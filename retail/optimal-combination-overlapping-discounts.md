---
title: "重複する割引の最適な組み合わせを決定します。"
description: "割引が重複すると、最小トランザクションの合計または最上位の割引合計の生産重複する割引の組み合わせを決定する必要があります。 割引金額が共通の「1であってなど、購買された製品の価格に応じて変わると」、(BOGO) Retailの割引に一つのXの割合が、このプロセスが組合わせの最適化の払出を表示します。"
author: kfend
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
translationtype: Human Translation
ms.sourcegitcommit: 0c6a7bdc4ba82dd57ab3e395e6dfb0ae4de31fc4
ms.openlocfilehash: 31e5104045ed5b8fbfa3677a7f5702d551de4231
ms.lasthandoff: 03/31/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a>重複する割引の最適な組み合わせを決定します。

割引が重複すると、最小トランザクションの合計または最上位の割引合計の生産重複する割引の組み合わせを決定する必要があります。 割引金額が共通の「1であってなど、購買された製品の価格に応じて変わると」、(BOGO) Retailの割引に一つのXの割合が、このプロセスが組合わせの最適化の払出を表示します。

この記事では、サポート技術3105973を持つMicrosoft Dynamics AX 2012 R3 (2015年12月11日2リリース) または後にMicrosoft Dynamics AX 2年1月2016日のリリースに適用されます。 組み合わせに重複する割引を決定するために、適切かつ速やかに適用され、小売にMicrosoft Dynamics AXで使用できる機能で適用された、リッチを提供することがに重複する割引を適用する方法をもたらしました。 ただし、この新しいメソッド**基準金額の値のランキング**コールバックを。 基準金額の値のランキング重複の割引の組み合わせを評価するために必要な時間がDynamics AX for Retail **パラメータ**ページでコンフィギュレーション可能なしきい値を超えた場合に使用されます。 基準金額の値のランキング方法の値は個々の重複する割引に共有製品の割引の値を使用して計算されます。 重複した割引が最上位相対値で最低額の相対値に適用されます。 新しい認証方法については、この記事の「基準金額値」のセクションでは、" "を参照してください。 基準金額の値のランキングは、製品の割引金額がトランザクションの別の製品で変わらない場合は使用されません。 たとえば、この方法は、の簡単な割引、または簡単な割引、一つの製品の数量割引には使用されません。

## <a name="discount-examples"></a>割引例
Dynamics AXでは、製品の共通設定の小売割引はいくつでも作成できます。 ただし、制限がないため、パフォーマンスの問題はさまざまな製品で使用される割引の計算が試行されるときに行われます。 次の例は、この問題をより詳しく説明します。 例1では、二つの製品としての重複する割引になります。 その後、例2で、詳細の製品が追加されるために問題がどのように展開するかを示します。

### <a name="example-1-two-products-and-two-discounts"></a>例1: 二つの製品としての割引

この例では、二つの製品には、各割引の資格を得るために要求されている割引を組み合わせることはできません。 この例の割引は、**最も安く**割引です。 製品も、両方の割引の資格します。 二つの割引がここに表示されます。 [![重複する割引コンボの01] (。/media/overlapping割引コンボ01.jpg) ] (。) 任意の二つの製品に/media/overlapping割引コンボ01.jpg、これらの二つの割引のうち、二つの製品の価格によって異なります。 両方の製品の価格があるまたはほとんど同じ場合に、割引1では、です。 一つの製品の価格がされるそのほかの製品の価格よりよりほとんどの場合、割引2では、です。 これら二つの割引を相互に評価する数式 (ルールを挙げます。: [![重複する割引コンボの02] (。/media/overlapping割引コンボ02.jpg) ] (。製品1の価格が製品2の価格の3分の2に等しい場合に、二つの割引は/media/overlapping割引コンボ02.jpg) メモ。 この例では、割引1の有効な割引率数は最大割合から25パーセント (二つの製品モデルに同じ価格がある場合) (、製品の価格を含む場合) 異なります。 割引2の有効な割引率は固定です。 これは20日です。 割引1の有効な割引率によって割引、または2より小さい場合のいずれかです。範囲があるため、最適な割引は割引追加する、製品の価格によって異なります。 この例では、計算は、の割引のみ二つの製品のみに適用されるので、簡単に入力されます。 BOM二つの組み合わせがあります: 割引2.の割引1または1アプリケーションの一つのアプリケーション。 計算する交換はありません。 各割引の値は、両方の製品を使用して計算され、最適な割引が使用されます。

### <a name="example-2-four-products-and-two-discounts"></a>例2: 4つの製品としての割引

次に、4つの製品と同じ二つの割引を使用します。 4つの製品には、すべての両方の割引の資格します。 12の組み合わせがあります。 ついに、二つの割引は、3つの組み合わせの一つのトランザクションに適用されます: 割引1の二つのアプリケーション、割引2.の割引1と1のアプリケーションの割引2、つまり1アプリケーションの二つのアプリケーション。 有効な組み合わせを説明するために、異なる価格を含める4つ製品の二つの異なる設定が表示されます:

-   4つの製品モデルに、同じ価格、$15.00があります。 この場合、最適な組み合わせ割引は、割引1.の二つのアプリケーションです。 二つの製品が定価で、して、50をオフ。 円のundiscounted合計だけでなく$15 (25日) のトランザクションの合計割引率が$45 (15 + 15 + 7.50 + 7.50) になります。 割引は2 $12専用になります (20日)。
-   二つの製品には、$20があり、一つの製品には、$15、1の製品には、$5.です。 この場合、最適な組み合わせ割引は、割引1.の割引2と1のアプリケーションの一つのアプリケーションです。 次の表は、割引を説明します。

テーブルを表示するには、行の一つの製品および列から1の製品を使用します。 たとえば、割引1の表に、二つの$20の製品を結合すると、$10が表示されます。 割引2の表では、$15製品と$5製品を結合すると、$4が表示されます。 [![重複する割引コンボの03] (。/media/overlapping割引コンボ03.jpg) ] (。/media/overlapping割引コンボ03.jpg) 最初に、いずれかの割引を使用して任意の二つの製品で使用できる最大割引が検出されます。 二つの表は、製品のすべての組み合わせの割引金額を表示します。 テーブルの斜線部分は製品がMicrosoftができない、または同じ割引金額を製造、無視できます。、製品の逆の組み合わせを表す、それぞれに組み合わせられる、どちらの場合。 テーブルを表示すると、二つの$20の品目の割引1がすべての4つ製品のいずれかの割引に使用できる最大割引であることがわかります。  (この割引は最初の表の緑で強調表示されます。) これは$15製品と$5製品のみ去ります。 二つのテーブルを再度表示すると、割引が2 $4割引を受ける場合は、これらの二つの製品に、割引が1 $2.50割引を受けることがわかります。 したがって、割引2.を選択します。 割引合計は$14です。 この説明を視覚化しやすいようここで割引1と割引の両方2.で使用できるすべての2製品の組み合わせに対して有効な割引率を表示、追加のテーブルであること。 、これらの二つの割引の場合は、二つの製品が割引に入力された注文が重要ではないため、組み合わせリスト半分に含まれます。 最も高い有効な割引 (25日) が緑色とは、有効な割引 (10日) を赤で強調表示されます強調表示されます。 [![重複する割引コンボの04] (。/media/overlapping割引コンボ04.jpg) ] (。/media/overlapping割引コンボ04.jpg) **注記: **価格は変わり、複数の割引が競合して場合、割引の最善の組み合わせを保証する唯一の方法は両方の割引を計算および比較します。

## <a name="total-possible-combinations"></a>合計可能な組み合わせ
このセクションでは、前のセクションでの例をされます。 ただし、複数の製品、別の割引を追加し、その組み合わせの計算および比較する必要があるかを示します。 次の表に、製品の数量が増加するときに有効な割引の組み合わせの数を示します。 二つの重複する割引がある場合は、前の例では、場合は、3つに重複する割引があるものを行うか、テーブルに表示されます。 すぐに評価する必要がある有効な割引の組み合わせの数は、簡単なコンピュータが小売トランザクションに対して許容可能にするには、計算し、適切に適用できる内容を超える比較します。 [![重複する割引コンボの05] (。/media/overlapping割引コンボ05.jpg) ] (。ロットまたは詳細に重複する割引が適用される場合に、/media/overlapping割引05.jpg)、コンボ有効な割引の組み合わせの合計数は、百万にすばやく入力し、最良の組み合わせをすぐに評価し、ピッキングに必要な時間が未払のままになります。 ある最適化がエンジン小売価格で評価する組み合わせの合計数を減らすために実行されました。 ただし、トランザクションの数に重複する割引と数量が有限いないため、多くの組み合わせは仕訳帳に割引が重複するたびに、常に評価する必要があります。 この問題は、基準金額の値のランキング処理方法は払出です。

## <a name="marginal-value-method"></a>基準金額の値方法
評価する組み合わせの指数関数的に増加する番号の問題を解決するには、複数の割引を適用できる製品の設定の各割引の共有製品ごとの値を計算する最適化があります。 ただし、として**または製品の割引、[この値は**基準金額の値参照します。 基準金額の値は、共有製品が各割引に含まれる場合、合計割引金額で製品の増加ごとの平均です。 基準金額の値は、割引金額を共有製品 (共有するDMinus\\) を使用しない振出、または製品 (ProductsShared) の数、その差が、合計割引金額 (DTotal) によって計算されます。 [![重複する割引コンボの06] (。/media/overlapping割引コンボ06.jpg) ] (。共有、製品の各割引の基準金額の値が計算された後に/media/overlapping割引06.jpg)、コンボ割引が最も高い基準金額の値から最小基準金額の値にする順序で共有製品に、包括的に適用されます。 この方法で、すべての残りの割引は、割引などの一つのインスタンスで適用された後は必ず比較されません。 代わりに、重複する割引は1回比較し、注文に適用されます。 追加比較はありません。 **小売パラメータ**ページの**割引**タブの基準金額の値方法に切り替えますしきい値を設定できます。 割引合計を計算する許容される時刻は小売業界によって異なります。 ただし、この時刻は1秒にミリ秒) の10では、一般に入ります。


