---
title: 初期顧客支払予測モデルの評価
description: このトピックでは、顧客支払予測モデルを理解し、その有効性を評価するために実行できる手順について説明します。
author: ShivamPandey-msft
ms.date: 05/02/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.custom: 14151
ms.assetid: 3d43ba40-780c-459a-a66f-9a01d556e674
ms.search.region: Global
ms.author: shpandey
ms.search.validFrom: 2020-05-28
ms.dyn365.ops.version: AX 10.0.8
ms.openlocfilehash: c0951c8dcf6205ebbb15baf86b1272af4e95547f
ms.sourcegitcommit: 9166e531ae5773f5bc3bd02501b67331cf216da4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/03/2022
ms.locfileid: "8677957"
---
# <a name="evaluate-the-initial-customer-payment-prediction-model"></a>初期顧客支払予測モデルの評価

[!include [banner](../includes/banner.md)]

このトピックでは、財務インサイトをオンにして、最初のモデルを生成およびトレーニングした後、予測モデルを評価する方法について説明します。 このトピックでは、顧客支払を予測するためのモデルについて説明します。 顧客支払予測モデルを理解し、その有効性を評価するために実行できる手順について説明します。

## <a name="getting-details-about-the-model"></a>モデルに関する詳細の取得

Microsoft Dynamics 365 Finance の **Finance Insights パラメーター** ページで、**モデル精度の改善** リンクが精度スコアの横に表示されます。

[![モデル精度の改善リンク。](./media/prediction-model.png)](./media/prediction-model.png)

このリンクは AI Builder へのリンクであり、現在のモデルについての詳細を確認したり、改善するための手順を実行することもできます。 次の図は、開いたページを示しています。

[![AI Builder。](./media/what-to-predict.png)](./media/what-to-predict.png)

開いたページには、次の情報が表示されます:

- **パフォーマンス** セクションでは、モデル パフォーマンスの等級は、モデルの品質に関する分析視点を提供します。 この等級の詳細については、 AI Builder ドキュメントの [予測モデルのパフォーマンス](/ai-builder/prediction-performance) を参照してください。
- **最も影響力のあるデータ** セクションでは、モデルに対して異なる入力タイプのデータの重要性を示します。 このリストと対応する割合を評価して、情報がビジネスと市場に関する知識と一致しているかどうかを判断できます。

    [![予測モデルのパフォーマンスと最も影響力のあるデータ セクション。](./media/models.png)](./media/models.png)

- **パフォーマンス** セクションで **詳細を表示** を選択して、等級やその他の考慮事項の詳細を表示します。 次の図では、モデルが推奨されている情報よりも少ない情報を使用していることを詳細に示しています。 したがって、システムは警告メッセージを生成しました。

    [![モデルのパフォーマンスに関する警告。](./media/details.png)](./media/details.png)

## <a name="digging-deeper"></a>専門的な情報

正確性はモデルを評価するための良い出発点であり、パフォーマンス等級は分析視点を提供するものですが、AI Builder は評価に使用できるさらに詳細な指標を提供します。 詳細をダウンロードするには、**パフォーマンス** セクションで **モデルの使用** ボタンの横にある省略記号ボタン (**...**) ボタンを選択し、**詳細なメトリックをダウンロード** を選択します。

[![詳細なメトリックスのダウンロード コマンド。](./media/performance.png)](./media/performance.png)

次の図は、データをダウンロードできる形式を示します。

[![ダウンロードしたデータの形式。](./media/data-format.png)](./media/data-format.png)

結果をより詳細に分析するには、"混同行列" メトリックを確認することが出発点になります。 たとえば、前述の図で、このメトリックに対して示されているデータは次のとおりです。

`{"name": "Confusion Matrix", "value": {"schema_type": "confusion_matrix", "schema_version": "1.0.0", "data": {"class_labels": ["0", "1", "2"], "matrix": [[71, 9, 21], [5, 0, 27], [2, 0, 45]]}}, "type": "dictionaryNumericalList", "isGlobalScore": false}`

このデータは、次の方法で拡張できます。

| &nbsp;                   | 予測期限内 | 予測遅延 | 予測かなりの遅延 |
|--------------------------|-------------------|----------------|---------------------|
| 実際の期限内の支払   | **71**            | 0              | 21                  |
| 実際の遅延支払      | 5                 | **0**          | 27                  |
| 実際のかなりの遅延支払 | 2                 | 0              | **45**              |

混同行列には、トレーニング プロセスからランダムに選択されたテスト データセットの結果が示されます。 これらの終了した請求書はモデルのトレーニングに使用されていなかったため、モデルの良いテスト ケースです。 また、請求書の実際の状態がわかっているので、モデルのパフォーマンスを表示することもできます。

最初に検索するのは、最も一般的な実績値です。 この値は、データセット全体と完全に一致しているわけではありませんが、妥当な近似値です。 この場合、**実際の期限内の支払** は請求書合計 171 件のうち 92 件で発生し、最も一般的な実際値になります。 したがって、モデルのベースラインとして適しています。 すべての請求書が期限内に処理されると予想した場合、171 回中 92 回 (つまり 54％ の確率) が正しく処理されます。

データセットのバランスを理解することが重要です。 この場合、171 件の請求書のうち 92 件は期限内に支払われ、32 件は支払いが遅れ、47 件は非常に遅れて支払われました。 これらの値は、各分類において重要な結果があるため、適度にバランスをとったデータセットを示します。 いずれかの状態において結果が非常に少ない状況は、機械学習モデルにとって困難な場合があります。

モデルの精度は、テスト データセットの正しい予測の数を示します。 これらの正しい予測は、前の例で太字で示した値です。 この場合、これらの値は、計算精度 67.8% (= \[71 + 0 + 45\] ÷ 171) となります。 この値はベースラインの推測値 54% に対して 14% の改善を表し、モデルの品質の 1 つの指標です。

混同行列をさらに詳しく見ると、このモデルが、期限内およびかなりの遅い請求書の支払いを、予測するの適していることがわかります。 ただし、実際に支払いが遅れた (しかし、それほど遅れていいない) 32 件の請求書すべてについて間違っています。 この結果は、モデルの追加調査と改善が必要であることを示しています。

精度より良いモデルのパフォーマンスを表す数値は、F1 マクロ スコアです。 このスコアでは、各分類の状態 (期限内、遅延、かなりの遅延) の結果が考慮されます。 たとえば、前述の図で、"F1 マクロ" メトリックに対して示されているデータは次のとおりです。

`{"name": "F1 Macro", "value": 0.4927170868347339, "type": "percentage", "isGlobalScore": false}`

この場合、約 49.3% の F1 マクロ スコアは、それなりに高いと思われる全体的な精度スコアにもかかわらず、各状態において、モデルが効果的な予測をできていないことを示してます。

## <a name="improving-the-model"></a>モデルの改善

最初のモデルの結果をよく理解した後、機能列を追加または削除したり、正確な予測をサポートしていないデータセットの一部をフィルタリングしたりすることにより、モデルを改善することができます。 AI Builder を閉じ、続いて Dynamics 365 Finance の **モデルの改善** リンクを使用して AI Builder プロセスを再起動します。 公開されたモデルに影響を与えずに、さまざまな特性を試すことができます。 公開されたモデルは、**公開** を選択した場合にのみ影響を受けます。 Dynamics 365 Finance のインスタンスには、1 つのモデルが使用されることに注意してください。 そのため、新しいモデルを公開する前に、そのモデルを慎重に確認する必要があります。

## <a name="for-more-information"></a>詳細情報

予測モデルの評価方法の詳細については、[機械学習モデルの結果](confusion-matrix.md)

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
