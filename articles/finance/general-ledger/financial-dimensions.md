---
title: 財務分析コード
description: このトピックは、財務分析コードのさまざまなタイプと設定方法を説明します。
author: aprilolson
manager: AnnBe
ms.date: 01/03/2019
ms.topic: article
ems.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: DimensionDetails, DimensionValueDetails, SysTranslationDetail
audience: Application User
ms.reviewer: roschlom
ms.custom: 25871
ms.search.region: Global
ms.author: aolson
ms.search.validFrom: 2018-10-31
ms.dyn365.ops.version: 8.0999999999999996
ms.openlocfilehash: 455b676dcd186b84a0c429c1b0bab85796c0dbff
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/15/2021
ms.locfileid: "4975742"
---
# <a name="financial-dimensions"></a>財務分析コード

[!include [banner](../includes/banner.md)]

このトピックは、財務分析コードのさまざまなタイプと設定方法を説明します。

共有勘定科目表の勘定の区分として使用する財務分析コードを作成するには、**財務分析コード** ページを使用します。 財務分析コードには、カスタム分析コードと、エンティティがサポートしている財務分析コードの 2 つのタイプがあります。 カスタム分析コードは法人間で共有され、値はユーザーにより入力され管理されます。 エンティティがサポートしている分析コードでは、顧客または店舗エンティティなどシステムの他の場所で値が定義されます。 エンティティがサポートしている分析コードには、法人間で共有されるものや、会社固有のものがあります。

財務分析コードを作成した後、**財務分析コード値** ページを使用して、各財務分析コードに追加のプロパティを割り当てます。

財務分析コードを使用して、法人を表すことができます。 Dynamics 365 Finance では、法人を作成する必要はありません。 ただし、財務分析コードは、法人の運営や業務上の要件に対処するようには設計されていません。 財務のユニット間会計機能は、各トランザクションによって作成された勘定項目のみ対処するように設計されています。

法人として財務分析コードを設定する前に、次の分野の業務プロセスを評価し、この設定が組織で使用できるかどうかを判断します:

- 棚卸資産
- 財務分析コードと法人間の販売および購買
- 売上税の計算および報告
- 業務レポート

次に、いくつか制限を示します。

- 法人でのみ売上税機能を使用できます。財務分析コードでは使用できません。
- 一部のレポートには、財務分析コードが含まれていません。 したがって、財務分析コードによるレポートは、レポートの修正が必要な場合があります。

## <a name="custom-dimensions"></a>カスタム分析コード

ユーザー定義の財務分析コードを作成するには、**値の使用元** フィールドで **カスタム分析コード** を選択します。

主勘定マスクを指定して、分析コード値に対して入力できる情報の量やタイプを制限することもできます。 文字またはハイフン (-) など、各分析コード値の変化しない文字を入力できます。 また、分析コード値が作成されるたびに変更される、文字のプレースホルダーとなる番号記号 (\#) とアンパサンド (&) を入力できます。 番号のプレースホルダーとして番号記号 (\#)、文字のプレースホルダーとしてアンパサンド (&) を使用します。 マスクの書式設定のためのフィールドは、**値の使用元** フィールドで **カスタム分析コード** を選択した場合にのみ使用できます。

**例**

分析コード値を文字 2 桁 (CC)、番号 3 桁に制限するには、マスクの書式設定として **CC-\#\#\#** を入力します。

## <a name="entity-backed-dimensions"></a>エンティティがサポートする分析コード

エンティティがサポートする分析コードを作成するには、**値の使用元** フィールドで、財務分析コードの基になるシステム定義エンティティを選択します。 財務分析コード値がそのエンティティから作成されます。 たとえば、プロジェクトの分析コード値を作成するには、**プロジェクト** を選択します。 各プロジェクト名に対して分析コード値が作成されます。 **財務分析コード値** ページには、エンティティの値が表示されます。 それらの値が会社固有のものである場合、そのページでは会社も表示されます。

## <a name="activating-dimensions"></a>分析コードの有効化

財務分析コードを有効にすると、財務分析コードの名前が含まれるようテーブルが更新されます。 削除された分析コードは削除されます。 財務分析コードを有効にする前に、分析コード値を入力することができます。 ただし、財務分析コードは有効化されていないと消費できません。 たとえば、財務分析コードが有効化される前に、勘定構造に財務分析コードを追加することはできません。 **有効化** を選択すると、すべての分析コードが更新され、ステータスの変更を表示します。

## <a name="translations"></a>翻訳

**テキスト翻訳** ページでは、様々な言語で、選択した財務分析コードのテキストを入力することができます。 **主勘定翻訳** ページでは、様々な言語で、主勘定のテキストを入力することができます。 

## <a name="legal-entity-overrides"></a>法人の上書き

分析コードには、ある法人に対して有効でないものもあります。 また、一部の分析コードは、特定の期間にだけ有効な場合があります。 これらのケースでは、**法人の上書き** セクションを使用して、分析コードを保留にする法人の指定、法人のオーナーの指定、分析コードの有効期間の指定ができます。

## <a name="deleting-financial-dimensions"></a>削除中の財務分析コード

データの整合性を維持するために財務分析コードを削除されることはほとんどありません。 財務分析コードを削除しようとする場合は、次の基準が評価されます。

- 転記済または未転記のトランザクションで、もしくは任意の分析コード値の組み合わせで財務分析コードが使用されているか。
- 財務分析コードは有効な勘定構造、詳細なルール構造、もしくは財務分析コードセットで使用されているか。
- 財務分析コードは、既定の財務分析コードの統合形式の一部であるか。
- 財務分析コードは既定の分析コードとして設定されているか。

条件が合致した場合は、財務分析コードを削除することはできません。

## <a name="default-dimension-values"></a>既定の分析コード値

顧客および仕入先などのマスター レコードの値は、新しい分析コードの既定値として使用できます。 新しい分析コードが作成されると、マスター レコード ID は、マスター レコードの分析コード値で入力されます。 たとえば、新しい顧客を作成するときに、顧客 ID は顧客分析コードで入力されます。 販売注文、請求書、または顧客 ID が必要なその他のドキュメントを作成するときは、既存の既定ルールが使用され、顧客 ID がドキュメントに追加されます。

この機能は、分析コードの設定によって制御されます。 **DimensionName** が分析コードの名前である場合、この設定の名前は **作成されたそれぞれの新しい DimensionName でこの分析コードに値をコピーする** です。 既定では、機能が無効になっています。 ただし、いつでも有効にすることができます。

分析コードのレコードが既に存在する場合、この機能を有効にすると、マスター レコードが更新されます。 ただし、既存のドキュメントおよびトランザクションは更新されません。

マスター レコードを作成するためにテンプレートを使用している場合は、マスターの分析コードのテンプレートの値が空白であることを確認してください。 たとえば、テンプレートから顧客を作成する場合は、テンプレートの顧客の分析コードが空白であることを確認してください。 新しい顧客を作成する際、新しい顧客番号の顧客分析コード値が既定で使用されます。  

## <a name="derived-dimensions"></a>派生分析コード

ドキュメントにその分析コードを入力すると、他の分析コードの情報が自動的に入力されるように分析コードをコンフィギュレーションすることができます。 たとえば、コスト センター 10 を入力した場合、値 **20** が部門分析コードに自動的に入力されます。

分析コードのページに派生した値を設定することができます。

1. 分析コードを選択し、その後 **派生分析コード** を選択します。

    **派生分析コード** ページには、グリッドが含まれています。 選択した分析コードのセグメントは、このグリッドの最初の列です。

2. 派生するセグメントを追加します。 各セグメントは、列として表示されます。

最初の列で分析コードから派生する分析コードの組み合わせを入力します。 たとえば、コスト センターを部門および場所の派生元の分析コードとして使用するには、コスト センター 10、部門 20、および場所 30 を入力します。 次に、マスター レコードまたはトランザクションのページに、コスト センター 10 を入力すると、部門 20 および場所 30 が既定で入力されます。

### <a name="overriding-existing-values-with-derived-dimensions"></a>既存の値を派生分析コードで上書きする
 
既定では、派生分析コードのプロセスは、既存の派生分析コードの値を上書きしません。 たとえば、コスト センター 10 を入力し、他の分析コードを入力しない場合、部門 20 と場所 30 は既定で入力されます。 ただし、コスト センターを変更する場合は、既に確立されている値は変更されません。 このため、マスター レコードに既定の分析コードを設定することができ、それらの分析コードは、派生した分析コードによって変更されません。

派生分析コードの動作を既存の値を上書きするように変更するには、**派生分析コード** ページで **既存の分析コードの値を派生値で置き換える** チェックボックスを選択します。 このフィールドが選択されている場合は、派生分析コード値と分析コードを入力することにより、派生分析コード値が既に存在している任意の値を上書きします。 上記の例を使用して、コスト センター 10 を入力し、他の分析コードを入力しない場合、部門 20 と場所 30 は既定で入力されます。 ただし、値が既に部門 50 および場所 60 である場合、部門 20 および場所 30 に変更されます。
 
この設定の派生分析コードは、分析コード値が既定に設定されているときには既存の既定分析コード値を自動的に置き換えることはしません。 分析コード値は、ページに新しい分析コード値を入力し、ページにその分析コードの派生値が既に存在する場合にのみ上書きされます。

### <a name="preventing-changes-with-derived-dimensions"></a>派生分析コードの変更を防止する
 
派生分析コードとして区分を追加するために、**派生分析コードページ** で **区分の追加"** を使用する場合、その分析コードがページで派生するときに変更を防止するためのオプションが **区分の追加** ページの下部に表示されます。 既定の設定ではオフになっているため、派生分析コード値の変更は防止されません。 分析コードが派生された後の変更を防止するには、設定を **はい** にします。 たとえば、部門分析コードの値がコスト センター分析コードの値から派生する場合は、**変更の防止** 設定が **はい** である場合、部門の値は変更されません。 
 
分析コード値が有効でも、派生分析コードの一覧に登録されていない場合、設定では変更を防止できません。 たとえば、部門 20 がコスト センター 10 から派生していて、コスト センター 10 を入力した場合、部門 20 を編集することはできません。 ただし、コスト センター 20 を入力し、それがコスト センターの派生分析コードの一覧にない場合は、部門の値を編集できます。 
 
いずれにしても、勘定値とすべての分析コード値は、派生分析コード値が適用された後も勘定構造に対して有効です。 派生分析コードを使用しており、ページで使用するときに検証に失敗した場合は、派生分析コード ページの派生分析コード値をトランザクションで使用する前に変更する必要があります。 
 
**財務分析コード** クイック タブで分析コードを変更すると、変更されないようにマークされている分析コードは編集できなくなります。 ページのセグメント化されたエントリのコントロールに勘定と分析コードを入力する場合、分析コードは編集可能です。 ただし、セグメント化されたエントリのコントロールから強調表示を移動して別のフィールドに移動するかアクションを実行すると、適切な値を入力したことを確認するために、派生分析コードの一覧と勘定構造に対して勘定と分析コードが検証されます。 

### <a name="derived-dimensions-and-entities"></a>派生分析コードおよびエンティティ

エンティティを使用して、派生分析コードのセグメントと値を設定することができます。

- 派生分析コードのエンティティはドライブ分析コードと、そこで使用されるセグメントを設定します。
- 派生分析コード値 エンティティでは、各ドライブ分析コード用の派生の値をインポートできます。

エンティティを使用してデータをインポートするときに、そのエンティティが分析コードをインポートする場合は、エンティティが具体的にそれらの分析コードを上書きしない限り、インポート中に派生分析コードのルールが適用されます。

詳細については、次のトピックを参照してください。

- [財務分析コードの定義](tasks/define-financial-dimensions.md)
- [財務分析コード用の既定テンプレートの管理](tasks/maintain-financial-dimension-default-templates.md)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]