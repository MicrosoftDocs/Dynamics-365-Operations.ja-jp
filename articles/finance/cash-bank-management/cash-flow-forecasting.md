---
title: キャッシュ フロー予測
description: このトピックでは、キャッシュ フロー予測プロセスの概要を示します。 また、キャッシュ フロー予測がシステムの他のモジュールと統合されている方法についても説明します。
author: panolte
ms.date: 02/16/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: LedgerCovParameters
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: panolte
ms.search.validFrom: 2017-06-30
ms.dyn365.ops.version: July 2017 update
ms.openlocfilehash: 4979a57c966f25dba62a944a4e44086e5f6aed28
ms.sourcegitcommit: 04e6c1c9400e1b582180cf3e0e4767434e736c26
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/05/2022
ms.locfileid: "8712540"
---
# <a name="cash-flow-forecasting"></a>キャッシュ フロー予測

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

キャッシュ フロー予測ツールで将来のキャッシュ フローと必要通貨の分析を行い、会社が将来必要とする現金を見積もることができます。 キャッシュ フロー予測を入手するには、次の作業を完了する必要があります。

- すべての流動資産勘定を特定して表示します。 流動資産勘定は、現金または現金等価物の法人勘定です。
- 会社の流動資産勘定に影響するトランザクションの予測の動作を設定します。

これらのタスクを完了した後は、キャッシュ フローと将来の必要通貨の予測の計算および分析を行うことができます。

## <a name="cash-flow-forecasting-integration"></a>キャッシュ フロー予測の統合

キャッシュ フロー予測は、一般会計、買掛金勘定、売掛金勘定、予算作成、および在庫管理と統合できます。 予測プロセスはシステムに入力されたトランザクションの情報を使用し、計算プロセスは各トランザクションがキャッシュに与えると思われる影響を予測します。 キャッシュ フローの計算時、次のタイプのトランザクションを考慮します。

- **販売注文** – 物理的または財務的な販売をもたらす、請求前の販売注文。
- **自由書式の請求書** – まだ投稿していない自由書式の請求書、財務的売上になります。 
- **発注書** – 物理的または財務的な購買をもたらす、請求前の発注書。
- **売掛金** – 未処理の顧客トランザクション (支払前の請求書)。
- **買掛金勘定** – 未処理の仕入先トランザクション (支払前の請求書)。
- **元帳トランザクション** – 将来、転記が発生することが指定されているトランザクション。
- **予算登録エントリ** – キャッシュ フロー予測に選択されている予算登録エントリ。
- **需要予測** – キャッシュ フロー予測に選択されている在庫予測モデルの明細行。
- **供給予測** – キャッシュ フロー予測に選択されている在庫予測モデルの明細行。
- **外部データ ソース** - スプレッドシート テンプレートを使用してキャッシュ フロー予測に対して入力やインポートを行った外部データ。
- **プロジェクト予測** - 予測モデルを使用したプロジェクト管理および会計予測。
- **キャッシュ フロー消費税所轄官庁の支払** – 予想される消費税所轄官庁の支払額と、財務的な支払を行うタイミング。 キャッシュ フロー消費税所轄官庁の支払機能を有効化します。

## <a name="configuration"></a>構成

キャッシュ フロー予測プロセスをコンフィギュレーションするには、**キャッシュ フロー予測の設定** ページを使用します。 このページでは、追跡する流動資産勘定および領域ごとの予測動作の既定値を指定します。

### <a name="general-ledger"></a>一般会計

最初に、キャッシュ フロー予測で追跡する流動資産勘定を定義する必要があります。 通常、これらの流動資産勘定は、現金を入出金する銀行口座に関連付けられている主勘定です。 **キャッシュ フロー予測の設定** ページの **総勘定元帳** タブで、予測に含める主勘定を選択します。 **銀行口座** ページで銀行口座が主勘定に関連付けられている場合、それは **銀行口座** フィールドに表示されます。

主勘定のトランザクションが別の主勘定のトランザクションに直接関係している場合は、依存キャッシュ フロー予測を設定できます。 **依存勘定** セクションで追加した各明細行は、依存主勘定のキャッシュ フロー予測金額を作成します。 この金額は、選択した基本主勘定のキャッシュ フロー金額に対する割合です。

最初に、**主勘定** フィールドを、トランザクションが最初に発生すると予想される基本主勘定に設定します。 **依存主勘定** フィールドを、基本主勘定に対する最初のトランザクションの影響を受ける勘定に設定します。 行の他のフィールドに適切な値を入力します。 依存主勘定に対する基本主勘定の影響を反映するように、**パーセンテージ** フィールドの値を変更できます。 売上予測または購買予測の場合は、**支払条件** に顧客または仕入先の最も一般的な値を選択します。 **転記タイプ** フィールドを、キャッシュ フロー予測に関連する予想転記タイプに設定します。

### <a name="accounts-payable"></a>買掛金管理

**キャッシュ フロー予測の設定** ページの **買掛金管理** タブの設定オプションを使用して、購買予測を計算できます。 買掛金勘定のキャッシュ フロー予測をコンフィギュレーションする前に、支払条件、仕入先グループ、および仕入先転記プロファイルをコンフィギュレーションする必要があります。

**購買予測の既定値** セクションで、購買キャッシュ フロー予測の既定動作を選択することができます。 現金の影響のタイミングを決定するのは、**配送日から請求日までの時間**、**支払条件**、および **請求書の期日から支払日までの時間** の 3 つのフィールドです。 値がトランザクションに対して指定されていない場合、予測は **支払条件** フィールドの既定の設定を使用します。 支払条件を使用して、プロセスの各部分の最も一般的な日数を記述します。

**支払用の流動資産勘定** フィールドは、支払に最も頻繁に使用される流動資産勘定を指定します。 **キャッシュ フロー予測に配賦する金額の割合** フィールドで、予測に際して金額の割合を使用するかどうかを指定します。 予測時にトランザクションの金額全てを使用する場合、このフィールドは空白のままにします。

特定の仕入先グループの **請求書の期日から支払日までの時間** フィールドの規定の設定を上書きすることができます。 トランザクションの仕入先に関連付けられている仕入先グループに別の値が指定されていない限り、予測は **購買予測の既定値** セクションの既定の値を使用します。 既定値を上書きするには、仕入先グループを選択し、**購入時間** フィールドに新しい値を設定します。

**流動資産勘定** フィールドの既定の設定を、特定の仕入先転記プロファイルで上書きすることができます。 トランザクションの仕入先に関連付けられている転記プロファイルで別の流動資産勘定が指定されていない限り、予測は **購買予測の既定値** セクションの既定の値を使用します。 既定値を上書きするには、転記プロファイルを選択し、影響を受けると予想される流動資産勘定を指定します。

### <a name="accounts-receivable"></a>売掛金

**キャッシュ フロー予測の設定** ページの **売掛金** タブの設定オプションを使用して、販売予測を計算できます。 売掛金勘定のキャッシュ フロー予測をコンフィギュレーションする前に、支払条件、顧客グループ、および顧客転記プロファイルをコンフィギュレーションする必要があります。

**売上予測の既定値** セクションで、売上キャッシュ フロー予測の既定動作を選択することができます。 現金の影響のタイミングを決定するのは、**出荷日から請求日までの時間**、**支払条件**、および **請求書の期日から支払日までの時間** の 3 つのフィールドです。 値がトランザクションに対して指定されていない場合、予測は **支払条件** フィールドの既定の設定を使用します。 支払条件を使用して、プロセスの各部分の最も一般的な日数を記述します。 

**支払用の流動資産勘定** フィールドは、支払に最も頻繁に使用される流動資産勘定を指定します。 **キャッシュ フロー予測に配賦する金額の割合** フィールドで、予測に際して金額の割合を使用するかどうかを指定します。 予測時にトランザクションの金額全てを使用する場合、このフィールドは空白のままにします。

特定の顧客グループの **請求書の期日から支払日までの時間** フィールドの規定の設定を上書きすることができます。 トランザクションの顧客に関連付けられている顧客グループに別の値が指定されていない限り、予測は **売上予測の既定値** セクションの既定の値を使用します。 既定値を上書きするには、顧客グループを選択し、**売上時間** フィールドに新しい値を設定します。

**流動資産勘定** フィールドの既定の設定を、特定の顧客転記プロファイルで上書きすることができます。 トランザクションの顧客に関連付けられている転記プロファイルで別の流動資産勘定が指定されていない限り、予測は **売上予測の既定値** セクションの既定の値を使用します。 既定値を上書きするには、転記プロファイルを選択し、影響を受けると予想される流動資産勘定を設定します。

### <a name="budgeting"></a>予算作成

予算モデルから作成される予算を、キャッシュ フロー予測に含めることができます。 **キャッシュ フロー予測の設定** ページの **予算作成** タブで、予測に含める予算モデルを選択します。 既定では、予算モデルがキャッシュ フロー予測で有効になった後、新しい予算登録エントリは予測に含められます。

予算登録エントリは、個人用設定を使用して個別にキャッシュ フロー予測に含めることができます。 [キャッシュ フロー予測に含める] 列を **予算登録エントリ** ページに追加すると、システムが **キャッシュ フロー予測の設定** ページの設定を上書きした後、個々の予算登録エントリが予測に含まれます。


### <a name="inventory-management"></a>在庫管理

在庫供給と需要予測は、キャッシュ フロー予測に含めることができます。 **キャッシュ フロー予測の設定** ページの **在庫管理** タブで、キャッシュ フロー予測に含める予測モデルを選択します。 キャッシュ フロー予測に含めるかどうかは、個々の供給予測および需要予測の行で上書きできます。

### <a name="setting-up-dimensions-for-cash-flow-forecasting"></a>キャッシュフロー予測の分析コードを設定する
 **キャッシュフロー予測の設定** ページの新しいタブでは、 **キャッシュ フローの予測ワークスペース** でフィルターに使用する財務分析コードをコントロールできます。 このタブは、キャッシュ フロー予測機能が有効な場合にのみ表示されます。

**分析コード** タブで、フィルター処理に使用する分析コードを一覧から選択し、方向キーを使用して右側の列に移動します。 キャッシュ フロー予測データのフィルター処理には、2 つの分析コードのみを選択できます。 

### <a name="setting-up-external-source"></a>外部ソースの設定
Finance Insights が設定されている場合、キャッシュ フロー予測に外部データを入力またはインポートすることができます。 外部データの入力またはインポートを行う前に、外部ソースを設定する必要があります。 **外部ソース** タブで、外部キャッシュ フロー カテゴリを設定します。 カテゴリは、**発信** または **着信** のいずれかです。 転記タイプとして **流動性** を選択する必要があります。 **法人設定** グリッドで、外部キャッシュ フロー カテゴリが適用される法人および対応する主勘定を選択します。

詳細については、[キャッシュ フロー予測における外部データ](../../finance/finance-insights/external-data-in-cash-flow.md) を参照してください。 

### <a name="project-management-and-accounting"></a>プロジェクト管理および会計

バージョン10.0.17 では、新機能によりプロジェクト管理と会計とキャッシュ フロー予測を統合できます。 **機能管理** ワークスペースで、**キャッシュ フロー プロジェクト予測** 機能をオンにし、キャッシュ フロー予測に予測コストと収益を含めます。 **キャッシュ フロー予測の設定** ページの **プロジェクト管理と会計** タブで、キャッシュ フロー予測に含めるプロジェクト タイプとトランザクション タイプを選択します。 次に、プロジェクト予測モデルを選択します。 減少タイプ サブモデルが一番うまくいきます。 売掛金の設定に入力した流動資産勘定は、既定の流動資産勘定として使用されます。 そのため、キャッシュ フロー予測を設定する際に、既定の流動資産勘定を入力する必要はありません。 予算モデルも使用できますが、プロジェクト管理および会計の **キャッシュ フロー予測の設定** ページでは、1 種類しか選択できません。 予測モデルは、プロジェクト管理と会計または Project Operations が使用された場合に最大の柔軟性を発揮します。

キャッシュ フロー プロジェクト予測機能をオンにしたら、**すべてのプロジェクト** ページで各プロジェクトのキャッシュ フロー予測を表示できます。 アクション ウィンドウの **計画** タブの **予測** グループで、**キャッシュ フロー予測** を選択します。 **キャッシュの概要** ワークスペース (本トピック後半の [レポート](#reporting) セクションを参照) で、プロジェクト予測トランザクション タイプには、インフロー (プロジェクト予測収益) とアウトフロー (プロジェクト予測コスト) が表示されます。 **キャッシュの概要** ワークスペースで **プロジェクト ステージ** が **処理中** に設定されている場合にのみ、金額を組み込むことができます。

**キャッシュ フロー プロジェクト予測** 機能がオンかどうかに関係なく、プロジェクト トランザクションは複数のやり方でキャッシュ フロー予測に含まれます。 転記されたプロジェクトの請求書は、未処理の顧客トランザクションの一部として、予測に含められます。 プロジェクトで開始される販売注文や発注書は、システムに入力された後でオープン注文として予測に含めます。 元帳予算モデルにプロジェクト予測を転送することもできます。 キャッシュ フロー予測の予算登録エントリの一部として、この元帳予算モデルが挿入されます。 **キャッシュ フロー プロジェクト予測** 機能をオンにしている場合、プロジェクト予測を元帳予算モデルに転送しないでください。このアクションを行うと、プロジェクト予測が 2 回計上されます。

### <a name="sales-tax-authority-payments"></a>消費税所轄官庁の支払 

キャッシュ フロー消費税所轄官庁の支払機能は、消費税の支払によるキャッシュ フローへの影響を予測します。 これは未払消費税トランザクション、税決済期間、税期間の支払条件を使用し、キャッシュ フロー支払の日付と金額を予測します。 

### <a name="calculation"></a>計算

キャッシュ フロー予測の分析を表示する前に、キャッシュ フロー計算プロセスを実行する必要があります。 計算プロセスでは、入力されたトランザクションが将来の現金に与える影響を予測します。

**キャッシュ フロー予測の計算** ページを使用して、キャッシュ フロー予測を計算します。 完全なキャッシュ フロー予測、または差分のキャッシュ フロー予測のいずれかを求めることができます。 

- すべてのキャッシュ フロー予測トランザクションをクリアして再計算するには、**キャッシュ フロー予測の計算方法** フィールドを **合計** に設定します。 キャッシュ フロー予測を長い間更新していない場合、この方法を使用することをお勧めします。 
- 新しいトランザクションのみで既存のキャッシュ フロー情報を更新するには、**キャッシュ フロー予測の計算方法** フィールドを **新規** に設定します。 最後にキャッシュ フロー計算が実行された日付は、ページに表示されます。

バッチ処理をキャッシュ フロー予測で使用することもできます。 予測分析が定期的に更新されるようにするには、キャッシュ フロー予測計算の定期的なバッチ処理を設定します。

バージョン 10.0.13 では、プロセス自動化フレームワークを使用してキャッシュ フローの計算ジョブをスケジュールする、計算プロセスの拡張がリリースされました。 これを有効化にするには、**機能管理** ワークスペースの **キャッシュフロー予測自動化** 機能を使用し ます。 有効化にした後は、**キャッシュ フロー予測の自動化** リンクを選択して、キャッシュ フロー計算プロセスのスケジュールを設定が可能となる、新しいオートメーション ページを表示します。 新しいキャッシュ フロー予測スケジュールを作成するには、**新しいプロセス自動化の作成** を選択し、**スケジュール タイプ** ドロップダウン メニューから **キャッシュフロー予測の自動化** を選択し ます。 キャッシュ フロー予測データを更新する会社単位でスケジュールを設定する必要があります。  このページには、保留中のキャッシュ フロー予測自動化ジョブと、ジョブの最終完了日時も表示されます。  

> [!NOTE] 
> 既存のバッチジョブがキャッシュ フロー予測に対して既にスケジュール設定されている場合は、エラーメッセージが表示され、この機能を有効化できません。 この機能を有効化するには、既存のバッチ ジョブを削除する必要があります。 

このプロセスの詳細については、[プロセスの自動化](../../fin-ops-core/dev-itpro/sysadmin/process-automation.md)を参照してください。

### <a name="reporting"></a>レポート

キャッシュ フロー予測が計算された後は、分析レポートに関連するエンティティ情報を更新する必要があります。 **エンティティ格納** ページで **LedgerCovLiquidityMeasurement 集計** 測定を選択し、**更新** をクリックします。

キャッシュ フロー予測データを含む 2 つのワークスペースがあります。 1 つのワークスペースにはすべての会社のデータ、別のワークスペースには現在の会社のデータのみが含まれています。

すべての会社のワークスペースへのアクセスは、**キャッシュ フローのすべての会社ワークスペースの表示** 職務で制御されています。 既定では、次のロールで **現金の概要 – すべての会社** ワークスペースが使用できます。

- 最高経営責任者
- 最高財務責任者
- 財務コントローラー

現在の会社のワークスペースへのアクセスは、**キャッシュ フローの現在の会社ワークスペースの表示** 職務で制御されています。 既定では、次のロールで **現金の概要 – 現在の会社** ワークスペースが使用できます。

- 経理担当
- 会計マネージャー
- 会計監修者
- 買掛金勘定マネージャー
- 売掛金管理マネージャー

**現金の概要 – すべての会社** ワークスペースは、キャッシュ フロー予測分析をシステム通貨で表示します。 分析に使用されるシステム通貨とシステム為替レート タイプは、**システム パラメーター** ページで定義します。 このワークスペースには、キャッシュ フロー予測の概要およびすべての会社の銀行口座の残高が表示されます。 現金収支のチャートは、予測トランザクションに関する詳細情報と共に、システム通貨での将来の現金移動および残高の概要が表示されます。 予測される通貨残高を表示することもできます。

**現金の概要 – 現在の会社** ワークスペースには、会社が定義した会計通貨でキャッシュ フロー予測分析が表示されます。 分析に使用される会計通貨は、**元帳** ページで定義されます。 このワークスペースには、キャッシュ フロー予測の概要および現在の会社の銀行口座の残高が表示されます。 現金収支のチャートは、予測トランザクションに関する詳細情報と共に、会計通貨での将来の現金移動および残高の概要が表示されます。 予測される通貨残高を表示することもできます。

キャッシュ フローの予測分析については、[キャッシュの概要 Power BI コンテンツ](Cash-Overview-Power-BI-content.md)を参照してください。

また次のページで、特定の勘定、注文、および品目についてのキャッシュ フロー予測データを表示できます。

- **試算表**: 選択した主勘定の将来のキャッシュ フローを表示するには、**キャッシュ フロー予測** を選択します。
- **すべての販売注文**: 選択した販売注文がキャッシュに与えると思われる影響を表示するには、**請求** タブで **キャッシュ フロー予測** を選択します。
- **すべての発注書**: 選択した発注書がキャッシュに与えると思われる影響を表示するには、**請求** タブで **キャッシュ フロー予測** を選択します。
- **供給予測**: 選択した品目の供給予測に関連付けられている将来のキャッシュ フローを表示するには、**キャッシュ フロー予測** を選択します。
- **需要予測**: 選択した品目の需要予測に関連付けられている将来のキャッシュ フローを表示するには、**キャッシュ フロー予測** を選択します。



[!INCLUDE[footer-include](../../includes/footer-banner.md)]
