---
title: 仕入先請求書をインポートする際に請求明細行を生成する
description: このトピックでは、請求書のインポート時に仕入先請求書に請求明細行を自動的に生成する機能について説明します。
author: sunfzam
ms.date: 09/10/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: twheeloc
ms.custom: intro-internal
ms.assetid: ''
ms.search.region: Global
ms.author: shpandey
ms.search.validFrom: 2021-08-30
ms.dyn365.ops.version: 10.0.23
ms.openlocfilehash: e452bda02c814b78c4bb48140b07f0113ab4a571
ms.sourcegitcommit: 9cbff8a2cdeaf606488fb0044b3de4ab4409c9dc
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/26/2022
ms.locfileid: "8358317"
---
# <a name="generate-invoice-lines-when-you-import-vendor-invoices"></a>仕入先請求書をインポートする際に請求明細行を生成する

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

このトピックでは、請求書のインポート時に仕入先請求書に請求明細行を自動的に生成する機能について説明します。

仕入先請求書には、受取人情報や小計など、限られた情報しか記載されていない場合があります。 しかし、明細品目の情報は含まれていません。 請求書をインポートすると、対応する発注書の情報をもとに、請求書行が自動的に生成されます。

請求明細行の自動作成を有効にするには、次の手順に従います。

1.  **買掛金勘定 \> 設定 \> 買掛金勘定パラメーター** の順に移動します。
2.  **仕入先請求書の自動化** タブの **インポートされた請求書の行の自動作成** で、**請求明細行の自動作成** オプションを **はい** に設定します。 
4.  **請求明細行の自動作成に対する既定の数量を選択** フィールドで、 請求書行を自動的に生成するために使用する数量を選択します:

    - **注文済数量** - 明細行は購買発注ラインから生成されます。 この値が既定値です。
    - **製品入庫数量** - 発注書番号から、該当する製品の領収書を検索します。 続いて、製品の入庫数量を使用して請求明細行を生成します。

## <a name="data-entity-changes"></a>データ エンティティの変更

このトピックで説明する機能をサポートするために、**仕入先請求書ヘッダー** のデータ エンティティが強化されました。 3 つのフィールドが追加されました。

- **HeaderOnlyImport** - 請求書ヘッダー用の明細行を生成するには、このフィールドを **はい** に設定する必要があります。
- **PurchIdRange** - 発注書番号のリストです。 請求書番号の範囲を指定可能です (範囲は **INV0001..INV0009** など 2 つのドットで区切って指定します)、または個別の値を指定可能です (**INV0001, INV0003, INV0006** など)。 すべての発注書は、請求書ヘッダーの同じ仕入先に属している必要があります。 それ以外の場合は、次のエラー メッセージが表示されます: 「請求明細行の生成に失敗しました。 発注書の仕入先勘定が異なります。」
- **PackingslipRange** - 製品のレシート番号のリストです。 仕入先請求明細行は、製品の入庫から作成できます。 しかし、仕入先の請求書には製品の受領番号が記載されていないのが一般的です。 どの製品の領収書がどの請求書に対するものかを明確に識別できる場合のみ、このフィールドに製品の領収書番号を入力してください。 製品の受領に基づいて請求書の明細行を生成することができます。 このフィールドが使用されている場合は、**買掛金勘定パラメーター** ページの **請求明細行自動作成用の既定の数量を選択する** フィールドの設定は無視されます。 

**制限**: 複数の製品入庫番号を入力すると、同じ請求書番号を持つ複数の保留中の仕入先請求書が作成されます。 請求書の処理を進める前に、これらの連結を手動で行う必要があります。 今後のリリースでは、請求書を自動的に統合する予定であるため、この制限はなくなります。

すべての製品の領収書は、請求書ヘッダーの同じ仕入先アカウントに属する必要があります。

## <a name="result"></a>結果

明細行の生成に成功した場合、ベンダーの請求書自動作成履歴に次のメッセージが記録されます: 「請求書行の自動作成: 成功」 と表示されます。

明細行の生成に失敗すると、次のエラーメッセージが記録されます: 「請求書の明細行の自動作成: 失敗」と表示されます。
