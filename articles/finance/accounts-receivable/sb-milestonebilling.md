---
title: マイルストーン テンプレート
description: このトピックでは、サブスクリプション請求管理でマイルストーン請求機能を設定する方法について説明します。
author: JodiChristiansen
ms.date: 11/04/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: twheeloc
ms.custom: 539093
ms.search.region: Global
ms.author: jchrist
ms.search.validFrom: 2021-11-05
ms.dyn365.ops.version: 10.0.24
ms.openlocfilehash: ecc4ddbb4d22eefac36f8cf8205d3b6084bd7d9d
ms.sourcegitcommit: a58dfb892e43921157014f0784bd411f5c40e454
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/04/2022
ms.locfileid: "8686494"
---
# <a name="milestone-billing"></a>マイルストーン請求

[!include [banner](../includes/banner.md)]

このトピックでは、サブスクリプション請求管理でマイルストーン請求機能のテンプレートを定義する方法について説明します。 マイルストーン テンプレートの各行に対して、配賦割合または金額を定義できます。 その後、マイルストーン請求機能を使用する請求スケジュール品目にマイルストーン テンプレートを割り当てる必要があります。

## <a name="add-a-template"></a>テンプレートを追加する

マイルストーンを追加するには、次の手順に従います。

1. **サブスクリプション請求管理 \>定期契約請求 \>設定 \> マイルストーン テンプレート** に移動します。
2. **新規** を選択します。
3. **テンプレート** フィールドに、新しいテンプレートの一意識別子を入力します。
4. **説明** フィールドに説明を入力します。
5. **配賦方法** フィールドで、配賦方法を選択します。
6. オプション: **合計金額** フィールドで、テンプレートの合計金額を指定します。
7. 明細行を追加するには、**追加** を選択します。 次に、**品目番号** フィールドで、新しい明細行の行番号を選択します。
8. **配賦方法** フィールドで選択した値に応じて、これらの手順のいずれかに従います。

    - 配賦方法に **割合** を選択した場合、**割合** フィールドで、各明細行の配賦割合を指定します。 割合を指定する場合、**合計割合** フィールドに表示される割合の合計は **100** と等しくなります。
    - 配賦方法に **変動金額** を選択した場合、**金額** フィールドで、各明細行の金額を指定します。
    - 配賦方法に **均等額** を選択した場合は、金額を指定する必要があります。 各明細行は、テンプレートに追加される行の数に基づいて、正しい割合と金額で更新されます。

9. **保存** を選択します。

## <a name="delete-a-template"></a>テンプレートの削除

マイルストーン テンプレートを削除するには、次の手順に従います。

1. 削除する明細行を 1 つ以上選択して、**削除** を選択します。
2. アクションの確認を求められたら、**はい** を選択します。

## <a name="milestone-template-fields"></a>マイルストーン テンプレート フィールド

**マイルストーン テンプレート** ページには、次のフィールドが表示されます。

| フィールド | Description |
|-------|-------------| 
| マイルストーン テンプレート | マイルストーン テンプレートの一意識別子。 |
| Description | マイルストーン テンプレートの説明。 |
| 配賦方法 | <p>配賦方法を選択します。</p><ul><li>**完了率** – 各明細行に累計完了値が使用されます。</li><li>**割合** – 配賦に対して割合を指定できます。 すべての割合の合計は 100 と等しくなります。</li><li>**変動金額** – 配賦に対して金額を指定できます。 配賦金額はトランザクション レベルで指定されます。</li><li>**均等額** – 配賦割合が自動的に計算され、テンプレート内の明細行間で均等に分割されます。</li></ul> |
| 合計金額 | テンプレートのマイルストーン金額を指定します。 |
| **明細行** | |
| 品目番号 | マイルストーン テンプレートの明細行を選択します。 |
| 製品名 | 品目の名前。 |
| パーセンテージ | <p>明細行の配賦割合を入力します。</p><ul><li>**配賦方法** フィールドが **割合** に設定されている場合は、明細行の割合を指定します。</li><li>**配賦方法** フィールドが **均等額** に設定されている場合、テンプレート内の明細行の数に基づいて割合が自動的に等しい割合に分割されます。</li></ul><p>すべての割合の合計は 100 と等しくなります。</p><p>ヘッダーで **合計金額** の値が指定されている場合に、行の **割合** の値を変更すると、**金額** の値が更新されます。 逆に、**金額** の値を変更すると、**割合** の値が更新されます。</p> |
| 数量 | <p>明細行の配賦金額:</p><ul><li>**配賦方法** フィールドが **変動金額** に設定されている場合は、明細行の金額を指定します。</li><li>**配賦方法** フィールドが **均等額** に設定されている場合は、テンプレートの明細行数とヘッダーで指定されている **合計金額** 値に基づいて、金額が自動的に等しい金額に分割されます。</li></ul><p>すべての金額の合計は、ヘッダーで指定されている **合計金額** と等しくする必要があります。</p><p>ヘッダーで **合計金額** の値が指定されている場合に、行の **金額** の値を変更すると、**割合** の値が更新されます。 逆に、**割合** の値を変更すると、**金額** の値が更新されます。</p> |
| **合計** | |
| 合計の割合 | 割合の合計。 すべての割合の合計は 100 と等しくなります。 |
| 合計金額 | すべての明細行の **金額** の合計値。 この合計は、ヘッダーで指定されている **合計金額** と等しくする必要があります。 |
| 残余額 | 残高。 この値は、ヘッダーの **合計金額** からすべての明細行の **金額** 値の合計を差し引いた値として計算されます。|

## <a name="milestone-allocation"></a>マイルストーン配賦

マイルストーン機能の使用を開始する前に、これらのタスクを完了する必要があります。

1. 1 つ以上のマイルストーン テンプレートを追加します。
2. 請求スケジュール グループを作成します。 アイテムの種類として **マイルストーン** を指定し、テンプレートを選択します。
3. **品目の設定** ページ (**サブスクリプション請求 \> 定期契約請求 \> 設定 \>品目**) で、品目関係と品目設定のマイルストーン テンプレートを選択します。

マイルストーン テンプレート、請求スケジュール グループ、および品目を作成したら、マイルストーン機能を使用する請求スケジュールを作成できます。

マイルストーンを使用する請求スケジュールを設定するには、次の手順に従います。

1. **請求スケジュール** ページの **すべて /有効な 請求スケジュール** ボックスの一覧から **新規** を選択します。
2. **すべての請求スケジュール** ページで、新しい請求スケジュールを作成し、顧客アカウントと開始日を指定します。
3. **請求スケジュール明細行** セクションで、**明細行の追加** を選択します。 次に、品目番号を追加し、**アイテムの種類** フィールドを **マイルストーン** に設定します。

    品目に対して既定のマイルストーン テンプレートが設定されている場合、マイルストーン イベントは自動的に請求スケジュール行に追加されます。 マイルストーン行の終了日は空白です。

    品目にマイルストーン テンプレートが設定されている場合は、**マイルストーン配賦** を選択します。 その後、**マイルストーン配賦** ページ で、マイルストーン テンプレートを選択し、必要な更新を行います。 次に、**閉じる** を選択して請求スケジュールに戻り、請求スケジュールの作成を完了します。

4. 請求スケジュールの請求書を作成するには、各マイルストーン イベントの終了日を更新する必要があります。 1 つの請求スケジュールに対して、請求スケジュール行のマイルストーン イベントの終了日を更新できます。 複数の請求書作成スケジュールを更新するには、**完了日処理の更新** を選択します。
5. 終了日が更新された後、請求書を作成できます。 1 つの請求スケジュールの場合は、**すべての請求スケジュール** ページで **請求書の生成** を選択します。 複数の請求スケジュールの請求書を作成するには、**定期処理タスク** で **請求書の生成** または **請求書バッチ処理の生成** を選択します。

## <a name="edit-milestone-allocation-on-a-billing-schedule-line"></a>請求スケジュール行でマイルストーン配賦を編集する

請求スケジュール行でマイルストーン配賦を編集するには、次のステップに従ってください。

1. **請求スケジュール** ページ > **すべてまたはアクティブな請求スケジュール** の **スケジュール番号フ** ィールドで、請求スケジュールの番号を選択します。
2. **請求スケジュール行** セクションで、品目を入力し、品目として **マイルストーン** を指定して、**マイルストーン配賦** を選択します。
3. **マイルストーン テンプレート** フィールドで、マイルストーン テンプレートを選択します。
4. **プロセス** を選択します。 マイルストーン テンプレート行は、請求書作成スケジュール行に自動的に追加されます。

## <a name="milestone-allocation-fields"></a>マイルストーン配賦フィールド

**マイルストーン配賦** ページには、次のフィールドが表示されます。

| フィールド | Description |
|-------|-------------|
| 親品目 | 親の品目番号。 |
| 拡張価格 | <p>請求品目の拡張価格。 この値は、請求スケジュール 行の **正味金額** の値に対応します。</p></p>マイルストーン親品目の場合、既定値は、マイルストーン テンプレートに対して指定されている **合計金額** の値です。 合計金額が 0 (ゼロ) の場合、既定値は請求スケジュール行の **正味金額** の値です。</p> |
| マイルストーン テンプレート | 行品目のマイルストーン テンプレート ID。 |
| テンプレートの説明 | マイルストーン テンプレートの説明。 |
| 配賦方法 | マイルストーン テンプレートに使用する配賦方法。 |
| **明細行** | すべての明細行の既定値は、選択したマイルストーン テンプレートに基づいて設定されます。 必要に応じて、変更できます。 |
| 品目番号 | マイルストーン配賦テンプレートの品目番号。 |
| 製品名 | 製品名。 |
| パーセンテージ | <p>明細行の配賦割合。 すべての割合の合計は 100 と等しくなります。</p><p>明細行の **割合** の値を変更すると、**賞味金額** の値が更新されます。 逆に、**正味金額** の値を変更すると、**割合** の値が更新されます。</p> |
| 正味金額 | <p>明細行の配賦金額。 すべての明細行の賞味金額は、ヘッダーで指定されている **拡張価格** と等しくする必要があります。</p><p>明細行の **正味金額** の値を変更すると、**割合** の値が更新されます。 逆に、**割合** の値を変更すると、**正味金額** の値が更新されます。</p> |
| **合計** | |
| 合計パーセンテージ | すべての明細行の **割合** の合計値。 この合計は 100 である必要があります。 |
| 合計金額 | すべての明細行の **正味金額** の合計値。 この合計は、ヘッダーで指定されている **拡張価格** と等しくする必要があります。 |
| 残余額 | 残高。 この値は、ヘッダーの **拡張価格** からすべての明細行の **正味金額** 値の合計を差し引いた値として計算されます。 最終金額は 0 にする必要があります。 |
