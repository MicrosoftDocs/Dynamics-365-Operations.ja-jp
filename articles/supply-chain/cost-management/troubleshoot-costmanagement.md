---
title: コスト管理のトラブルシューティング
description: このトピックでは、コスト管理を実行する際に発生する可能性がある問題の修正方法について説明します。
author: riluan
manager: tfehr
ms.date: 10/13/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: InventAgingStorage, InventAgingStorageChart, InventAgingStorageDetails, InventValueProcess, InventValueReportSetup, InventClosing
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: riluan
ms.search.validFrom: 2020-10-13
ms.dyn365.ops.version: Release 10.0.15
ms.openlocfilehash: b8c527e578fee6abfeeade99fba8070365c020bd
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/15/2021
ms.locfileid: "4983853"
---
# <a name="troubleshoot-cost-management"></a><span data-ttu-id="ba01f-103">コスト管理のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="ba01f-103">Troubleshoot cost management</span></span>

<span data-ttu-id="ba01f-104">このトピックでは、コスト管理を実行する際に発生する可能性がある問題の修正方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="ba01f-104">This topic describes how to fix issues that you might encounter while working with cost management.</span></span>

## <a name="functional-gaps-between-the-inventory-valueaging-reports-and-their-storage-versions"></a><span data-ttu-id="ba01f-105">在庫金額/エイジング レポートとそのストレージ バージョンの間の機能的なギャップ</span><span class="sxs-lookup"><span data-stu-id="ba01f-105">Functional gaps between the inventory value/aging reports and their storage versions</span></span>

<span data-ttu-id="ba01f-106">[在庫エイジング レポート ストレージ](inventory-aging-report-storage.md)および[在庫金額のストレージ レポート](inventory-value-report-storage.md)機能では、Supply Chain Management を使用して大量の在庫トランザクションを表示できます。</span><span class="sxs-lookup"><span data-stu-id="ba01f-106">The [Inventory aging report storage](inventory-aging-report-storage.md) and [Inventory value storage report](inventory-value-report-storage.md) features enable Supply Chain Management to display large volumes of inventory transactions.</span></span> <span data-ttu-id="ba01f-107">いずれの場合も、これらのレポートの非ストレージ バージョンとは異なり、レポート結果は、参照とエクスポートのために保存されます。</span><span class="sxs-lookup"><span data-stu-id="ba01f-107">In each case, the report results are saved for browsing and exporting, unlike with the non-storage versions of these reports.</span></span> <span data-ttu-id="ba01f-108">ただし、これらのレポートの非ストレージ バージョンに存在する機能のいくつかは、ストレージ バージョンには存在しません。</span><span class="sxs-lookup"><span data-stu-id="ba01f-108">However, some functionality that exists in the non-storage versions of these reports doesn't exist in the storage versions.</span></span> <span data-ttu-id="ba01f-109">以下のサブセクションでは、この違いについて説明し、回避策を示します。</span><span class="sxs-lookup"><span data-stu-id="ba01f-109">The following subsections summarize the differences and provide workarounds.</span></span>

### <a name="storage-reports-dont-include-subtotals-even-if-they-are-enabled-in-the-report-layout"></a><span data-ttu-id="ba01f-110">ストレージ レポートには、レポート レイアウトで有効になっている場合でも、小計は含まれません。</span><span class="sxs-lookup"><span data-stu-id="ba01f-110">Storage reports don't include subtotals, even if they are enabled in the report layout</span></span>

<span data-ttu-id="ba01f-111">小計は、特にレコード シーケンスが変更された場合、結果がエクスポートされるときに問題が発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="ba01f-111">Subtotals can cause issues when the result is exported, especially if users change the record sequence.</span></span>

<span data-ttu-id="ba01f-112">小計をチェックするには、結果を Microsoft Excel にエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="ba01f-112">To check the subtotals, you can export the result into Microsoft Excel.</span></span> <span data-ttu-id="ba01f-113">または、Supply Chain Management の中で小計をチェックする場合は、[機能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)を使用して、*新しいグリッド コントロール* と *(プレビュー) グリッド内でのグループ化* 機能を有効にします。これにより、グループの小計を、はるかに柔軟な方法で列ごとに表示できます。</span><span class="sxs-lookup"><span data-stu-id="ba01f-113">Alternatively, if you want to check subtotals within Supply Chain Management, use [Feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to enable the *New grid control* and *(Preview) Grouping in grids* features, which provide a much more flexible way to see the subtotal for any group by column.</span></span> <span data-ttu-id="ba01f-114">詳細については、[グリッド機能](../../fin-ops-core/fin-ops/get-started/grid-capabilities.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-114">For more information, see [Grid capabilities](../../fin-ops-core/fin-ops/get-started/grid-capabilities.md).</span></span>

### <a name="inventory-value-storage-report-doesnt-support-ledger-account-information"></a><span data-ttu-id="ba01f-115">在庫金額ストレージ レポートでは、勘定科目情報はサポートされない</span><span class="sxs-lookup"><span data-stu-id="ba01f-115">Inventory value storage report doesn't support ledger account information</span></span>

<span data-ttu-id="ba01f-116">試算表を実行して在庫勘定の残高を取得し、**在庫金額ストレージ** レポートと比較することができます。</span><span class="sxs-lookup"><span data-stu-id="ba01f-116">You can run the trial balance to get the inventory accounts balance and compare that to the **Inventory value storage** report.</span></span>

## <a name="warnings-or-errors-are-shown-when-changing-a-ledger-period-status-without-closing-inventory"></a><span data-ttu-id="ba01f-117">在庫決算なしで元帳期間のステータスを変更すると、警告またはエラーが表示される</span><span class="sxs-lookup"><span data-stu-id="ba01f-117">Warnings or errors are shown when changing a ledger period status without closing inventory</span></span>

<span data-ttu-id="ba01f-118">Microsoft では、決算に関する不適切な期末プロセスが原因で発生する問題を防止するために、次の検証を導入しました。</span><span class="sxs-lookup"><span data-stu-id="ba01f-118">Microsoft introduced the following validations to prevent issues caused by an incorrect period-end process around costing.</span></span> <span data-ttu-id="ba01f-119">次のいずれかのエラー メッセージが表示される場合は、[KB 4561987](https://fix.lcs.dynamics.com/Issue/Details?kb=4561987&bugId=445351&dbType=3&qc=f514f2adcddcddceec43af58c26ae8a9020effdc7cdfe085d9d0deeb8cc7b6a3) を参照して、これらの問題を解決する方法の詳細を確認してください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-119">If you encounter any of the following error messages, refer to [KB 4561987](https://fix.lcs.dynamics.com/Issue/Details?kb=4561987&bugId=445351&dbType=3&qc=f514f2adcddcddceec43af58c26ae8a9020effdc7cdfe085d9d0deeb8cc7b6a3) for more information about how to resolve these issues.</span></span>

- <span data-ttu-id="ba01f-120">日付 %1 (10-02-2019) を使用して再計算を実行しようとしています。</span><span class="sxs-lookup"><span data-stu-id="ba01f-120">You are about to execute a Recalculation with a date %1 (10-02-2019).</span></span> <span data-ttu-id="ba01f-121">最後に登録された再計算は、日付 %2 (20-01-2019) で前期に実行されました。</span><span class="sxs-lookup"><span data-stu-id="ba01f-121">The last registered Recalculation was executed in a previous period with a date %2 (20-01-2019).</span></span> <span data-ttu-id="ba01f-122">期末と一致する日付 %3 (31-01-2019) での在庫決算の実行が登録されていません。</span><span class="sxs-lookup"><span data-stu-id="ba01f-122">No execution of an inventory close with a date %3 (31-01-2019) matching period end has been registered.</span></span> <span data-ttu-id="ba01f-123">期末に一致する %3 (31-01-2019) の時点で在庫決算を実行することを忘れないでください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-123">Please remember to execute an inventory close as of %3 (31-01-2019) matching the period end.</span></span> <span data-ttu-id="ba01f-124">補助元帳および総勘定元帳において、在庫評価、売却済商品の原価、差異は、この処理が実行されるまで正しくない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ba01f-124">The valuation of inventories, cost of goods sold, and variances may not be correct in subledger or general ledger until this has been executed.</span></span>

- <span data-ttu-id="ba01f-125">元帳期間 %1 のステータスを %2 に変更しようとしています。</span><span class="sxs-lookup"><span data-stu-id="ba01f-125">You are about to change the status of ledger period %1 to %2.</span></span> <span data-ttu-id="ba01f-126">期末と一致する日付 %3 での在庫決算の実行が登録されていません。</span><span class="sxs-lookup"><span data-stu-id="ba01f-126">No execution of inventory close with a date %3 matching period end has been registered.</span></span> <span data-ttu-id="ba01f-127">ステータスを変更する前に、期末と一致する %3 の時点で在庫決算を実行してください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-127">Please execute an inventory close as of %3 matching the period end before changing the status.</span></span> <span data-ttu-id="ba01f-128">補助元帳および総勘定元帳において、在庫評価、売却済商品の原価、差異は、この処理が実行されるまで正しくない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ba01f-128">The valuation of inventories, cost of goods sold, and variances may not be correct in subledger or general ledger until this has been executed.</span></span> <span data-ttu-id="ba01f-129">法人 %4 から報告されました。</span><span class="sxs-lookup"><span data-stu-id="ba01f-129">Reported from legal entity %4.</span></span> <span data-ttu-id="ba01f-130">今のところは情報のみですが、将来はこのようなアクションを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ba01f-130">For now, it is informational, but you will be required to perform such action in future.</span></span>

- <span data-ttu-id="ba01f-131">勘定構造 %1 が変更されています。</span><span class="sxs-lookup"><span data-stu-id="ba01f-131">The Account structure %1 has been changed.</span></span> <span data-ttu-id="ba01f-132">1 つ以上の主勘定 %2 が存在しなくなっています。</span><span class="sxs-lookup"><span data-stu-id="ba01f-132">One or more main accounts %2 no longer exist.</span></span> <span data-ttu-id="ba01f-133">これらの主勘定は、日付 %4 に %3 によって求められています。</span><span class="sxs-lookup"><span data-stu-id="ba01f-133">These Main accounts are required by the %3 with a date %4.</span></span> <span data-ttu-id="ba01f-134">%3 ジョブを再開するには、これらの主勘定を勘定構造 %1 に追加してください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-134">Please add these Main accounts to the Account structure %1 before you can resume the %3 job.</span></span> <span data-ttu-id="ba01f-135">今のところは情報のみですが、将来はこのようなアクションを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ba01f-135">For now, it is informational, but you will be required to perform such action in future.</span></span>

- <span data-ttu-id="ba01f-136">日付 %1 (31-01-2019) を使用して在庫決算を実行しようとしています。</span><span class="sxs-lookup"><span data-stu-id="ba01f-136">You are about to execute an inventory close with a date %1 (31-01-2019).</span></span> <span data-ttu-id="ba01f-137">期末と一致する日付 %2 (31-01-2019) での一括引き落とし原価計算の実行が登録されていません。</span><span class="sxs-lookup"><span data-stu-id="ba01f-137">No execution of backflush costing calculation with a date %2 (31-01-2019) matching period end has been registered.</span></span> <span data-ttu-id="ba01f-138">期末と一致する日付 %3 (31-01-2019) での一括引き落とし原価計算を必ず実行してください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-138">Please remember to execute a backflush costing calculation with a date of %3 (31-01-2019) matching period end.</span></span> <span data-ttu-id="ba01f-139">補助元帳および総勘定元帳において、在庫評価、売却済商品の原価、差異は、この処理が実行されるまで正しくない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ba01f-139">The valuation of inventories, cost of goods sold, and variances may not be correct in subledger or general ledger until this has been executed.</span></span>

- <span data-ttu-id="ba01f-140">日付 %1 (28-02-2019) で一括引き落とし原価計算を実行しようとしています。</span><span class="sxs-lookup"><span data-stu-id="ba01f-140">You are about to execute a backflush costing calculation with a date %1 (28-02-2019).</span></span> <span data-ttu-id="ba01f-141">最後に登録された一括引き落とし原価計算は、日付 %2 (31-01-2019) で前期に実行されました。</span><span class="sxs-lookup"><span data-stu-id="ba01f-141">The last registered backflush costing calculation was executed in a previous period with a date %2 (31-01-2019).</span></span> <span data-ttu-id="ba01f-142">期末と一致する日付 %3 (31-01-2019) での在庫決算の実行が登録されていません。</span><span class="sxs-lookup"><span data-stu-id="ba01f-142">No execution of an inventory close with a date %3 (31-01-2019) matching a period end has been registered.</span></span>
<span data-ttu-id="ba01f-143">期末に一致する %3 (31-01-2019) の時点で在庫決算を実行することを忘れないでください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-143">Please remember to execute an inventory close as of %3 (31-01-2019) matching a period end.</span></span> <span data-ttu-id="ba01f-144">補助元帳および総勘定元帳において、在庫評価、売却済の商品の原価、および差異は、在庫決算が実行されるまで正しくない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ba01f-144">The valuation of inventories, cost of goods sold and variances may not be correct in subledger or general ledger until the inventory close has been executed.</span></span>

## <a name="inventory-aging-report-discrepancies"></a><span data-ttu-id="ba01f-145">在庫エイジング レポートの差異</span><span class="sxs-lookup"><span data-stu-id="ba01f-145">Inventory aging report discrepancies</span></span>

<span data-ttu-id="ba01f-146">**在庫エイジング レポート** には、さまざまな保管分析コード (サイトや倉庫など) で表示した場合、異なる値が表示されます。</span><span class="sxs-lookup"><span data-stu-id="ba01f-146">The **Inventory aging report** shows different values when viewed at different storage dimensions (such as site or warehouse).</span></span> <span data-ttu-id="ba01f-147">レポート ロジックの詳細については、[在庫エイジング レポートの例とロジック](inventory-aging-report.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-147">For more information about the reporting logic, see [Inventory aging report examples and logic](inventory-aging-report.md).</span></span>

## <a name="an-update-conflict-occurs-when-the-inventory-valuation-method-is-either-standard-cost-or-moving-average"></a><span data-ttu-id="ba01f-148">在庫評価方法が標準原価または移動平均である場合に更新の競合が発生します。</span><span class="sxs-lookup"><span data-stu-id="ba01f-148">An update conflict occurs when the inventory valuation method is either Standard cost or Moving average</span></span>

<span data-ttu-id="ba01f-149">在庫仕訳帳、発注請求書、販売注文請求書などのドキュメントを、スケーラビリティとパフォーマンスに関して並列で転記すると、更新の競合に関するエラー メッセージが表示され、一部のドキュメントが転記されない場合があります。</span><span class="sxs-lookup"><span data-stu-id="ba01f-149">When you post documents such as inventory journals, purchase order invoices, or sales order invoices in parallel for scalability and performance, you might receive an error message about an update conflict, and some of the documents might not be posted.</span></span> <span data-ttu-id="ba01f-150">この問題は、在庫評価方法が *標準原価* または *移動平均* である場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="ba01f-150">This issue can occur when the inventory valuation method is either *Standard cost* or *Moving average*.</span></span> <span data-ttu-id="ba01f-151">これらの方法はどちらも永続的な原価計算の方法です。</span><span class="sxs-lookup"><span data-stu-id="ba01f-151">Both these methods are perpetual costing methods.</span></span> <span data-ttu-id="ba01f-152">つまり、最終的な原価は転記時に決定されます。</span><span class="sxs-lookup"><span data-stu-id="ba01f-152">In other words, the final cost is determined at the time of posting.</span></span>

<span data-ttu-id="ba01f-153">*移動平均法* を使用している場合、エラー メッセージは次のような例です。</span><span class="sxs-lookup"><span data-stu-id="ba01f-153">If you're using the *Moving average* method, the error message resembles this example:</span></span>

> <span data-ttu-id="ba01f-154">比例経費計算後の在庫値 xx.xx が予期されません</span><span class="sxs-lookup"><span data-stu-id="ba01f-154">Inventory value xx.xx is not expected after the proportional expense calculation</span></span>

<span data-ttu-id="ba01f-155">*標準コスト* を使用している場合、エラー メッセージは次のような例です。</span><span class="sxs-lookup"><span data-stu-id="ba01f-155">If you're using the *Standard cost* method, the error message resembles this example:</span></span>

> <span data-ttu-id="ba01f-156">更新後の標準原価が資産在庫金額と一致しません。</span><span class="sxs-lookup"><span data-stu-id="ba01f-156">The standard cost does not match with the financial inventory value after the update.</span></span> <span data-ttu-id="ba01f-157">値 = xx.xx, Qty = yy.yy、標準コスト = zz.zz</span><span class="sxs-lookup"><span data-stu-id="ba01f-157">Value = xx.xx, Qty = yy.yy, Standard cost = zz.zz</span></span>

<span data-ttu-id="ba01f-158">Microsoft が問題を修正するソリューションをリリースするまで、次の説明を使用してエラーを回避または減らしてください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-158">Until Microsoft releases a solution to fix the issue, consider using the following workarounds to help avoid or reduce these errors:</span></span>

- <span data-ttu-id="ba01f-159">失敗したドキュメントを再転記します。</span><span class="sxs-lookup"><span data-stu-id="ba01f-159">Repost the failed documents.</span></span>
- <span data-ttu-id="ba01f-160">明細行の少ないドキュメントを作成します。</span><span class="sxs-lookup"><span data-stu-id="ba01f-160">Create documents that have fewer lines.</span></span>
- <span data-ttu-id="ba01f-161">標準コストでは小数の値を避けます。</span><span class="sxs-lookup"><span data-stu-id="ba01f-161">Avoid decimal values in the standard cost.</span></span> <span data-ttu-id="ba01f-162">**価格数量** フィールドが *1* に設定された標準コストを定義してください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-162">Try to define the standard cost so that the **Price quantity** field is set to *1*.</span></span> <span data-ttu-id="ba01f-163">*1* より大きい **価格数量** 値を指定する必要がある場合は、単位標準原価の小数点以下の桁数を最小限にしてください。</span><span class="sxs-lookup"><span data-stu-id="ba01f-163">If you must specify a **Price quantity** value that is more than *1*, try to minimize the number of decimal places in the unit standard cost.</span></span> <span data-ttu-id="ba01f-164">(小数点以下 2 桁以下が理想的です)。たとえば、**価格** = *10* や **価格数量** = *3* などの標準原価設定は 、3.333333 (小数点以下の値が繰り返される) 単位標準原価を生成するので定義しないようにします。</span><span class="sxs-lookup"><span data-stu-id="ba01f-164">(Ideally, there should be fewer than two decimal places.) For example, avoid defining standard cost settings such as **Price** = *10* and **Price quantity** = *3*, because they will produce a unit standard cost of 3.333333 (where the decimal value repeats).</span></span>
- <span data-ttu-id="ba01f-165">大多数のドキュメントでは、製品在庫分析コードと資産在庫分析コードの同じ組み合わせを保持する複数の明細行を保持しないようにします。</span><span class="sxs-lookup"><span data-stu-id="ba01f-165">In a majority of documents, avoid having multiple lines that hold the same combination of product and financial inventory dimensions.</span></span>
- <span data-ttu-id="ba01f-166">並列処理の程度を減らします。</span><span class="sxs-lookup"><span data-stu-id="ba01f-166">Reduce the degree of parallelization.</span></span> <span data-ttu-id="ba01f-167">(この場合、更新の競合や再試行の回数が少なくなるので、システムが高速化される可能性があります)。</span><span class="sxs-lookup"><span data-stu-id="ba01f-167">(In this case, your system might become faster, because fewer update conflicts and retries occur.)</span></span>
