---
title: コスト管理のトラブルシューティング
description: このトピックでは、コスト管理を実行する際に発生する可能性がある問題の修正方法について説明します。
author: AndersGirke
ms.date: 10/13/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: InventAgingStorage, InventAgingStorageChart, InventAgingStorageDetails, InventValueProcess, InventValueReportSetup, InventClosing
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: aevengir
ms.search.validFrom: 2020-10-13
ms.dyn365.ops.version: Release 10.0.15
ms.openlocfilehash: fc6a48a44a529c82c2a9ee818af95569d9bcb249
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/01/2021
ms.locfileid: "5834292"
---
# <a name="troubleshoot-cost-management"></a>コスト管理のトラブルシューティング

このトピックでは、コスト管理を実行する際に発生する可能性がある問題の修正方法について説明します。

## <a name="functional-gaps-between-the-inventory-valueaging-reports-and-their-storage-versions"></a>在庫金額/エイジング レポートとそのストレージ バージョンの間の機能的なギャップ

[在庫エイジング レポート ストレージ](inventory-aging-report-storage.md)および[在庫金額のストレージ レポート](inventory-value-report-storage.md)機能では、Supply Chain Management を使用して大量の在庫トランザクションを表示できます。 いずれの場合も、これらのレポートの非ストレージ バージョンとは異なり、レポート結果は、参照とエクスポートのために保存されます。 ただし、これらのレポートの非ストレージ バージョンに存在する機能のいくつかは、ストレージ バージョンには存在しません。 以下のサブセクションでは、この違いについて説明し、回避策を示します。

### <a name="storage-reports-dont-include-subtotals-even-if-they-are-enabled-in-the-report-layout"></a>ストレージ レポートには、レポート レイアウトで有効になっている場合でも、小計は含まれません。

小計は、特にレコード シーケンスが変更された場合、結果がエクスポートされるときに問題が発生することがあります。

小計をチェックするには、結果を Microsoft Excel にエクスポートします。 または、Supply Chain Management の中で小計をチェックする場合は、[機能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) を使用して、*新しいグリッド コントロール* と *グリッド内でのグループ化* 機能を有効にします。これにより、グループの小計をはるかに柔軟な方法で列ごとに表示できます。 詳細については、[グリッド機能](../../fin-ops-core/fin-ops/get-started/grid-capabilities.md) を参照してください。

### <a name="inventory-value-storage-report-doesnt-support-ledger-account-information"></a>在庫金額ストレージ レポートでは、勘定科目情報はサポートされない

試算表を実行して在庫勘定の残高を取得し、**在庫金額ストレージ** レポートと比較することができます。

## <a name="warnings-or-errors-are-shown-when-changing-a-ledger-period-status-without-closing-inventory"></a>在庫決算なしで元帳期間のステータスを変更すると、警告またはエラーが表示される

Microsoft では、決算に関する不適切な期末プロセスが原因で発生する問題を防止するために、次の検証を導入しました。 次のいずれかのエラー メッセージが表示される場合は、[KB 4561987](https://fix.lcs.dynamics.com/Issue/Details?kb=4561987&bugId=445351&dbType=3&qc=f514f2adcddcddceec43af58c26ae8a9020effdc7cdfe085d9d0deeb8cc7b6a3) を参照して、これらの問題を解決する方法の詳細を確認してください。

- 日付 %1 (10-02-2019) を使用して再計算を実行しようとしています。 最後に登録された再計算は、日付 %2 (20-01-2019) で前期に実行されました。 期末と一致する日付 %3 (31-01-2019) での在庫決算の実行が登録されていません。 期末に一致する %3 (31-01-2019) の時点で在庫決算を実行することを忘れないでください。 補助元帳および総勘定元帳において、在庫評価、売却済商品の原価、差異は、この処理が実行されるまで正しくない可能性があります。

- 元帳期間 %1 のステータスを %2 に変更しようとしています。 期末と一致する日付 %3 での在庫決算の実行が登録されていません。 ステータスを変更する前に、期末と一致する %3 の時点で在庫決算を実行してください。 補助元帳および総勘定元帳において、在庫評価、売却済商品の原価、差異は、この処理が実行されるまで正しくない可能性があります。 法人 %4 から報告されました。 今のところは情報のみですが、将来はこのようなアクションを実行する必要があります。

- 勘定構造 %1 が変更されています。 1 つ以上の主勘定 %2 が存在しなくなっています。 これらの主勘定は、日付 %4 に %3 によって求められています。 %3 ジョブを再開するには、これらの主勘定を勘定構造 %1 に追加してください。 今のところは情報のみですが、将来はこのようなアクションを実行する必要があります。

- 日付 %1 (31-01-2019) を使用して在庫決算を実行しようとしています。 期末と一致する日付 %2 (31-01-2019) での一括引き落とし原価計算の実行が登録されていません。 期末と一致する日付 %3 (31-01-2019) での一括引き落とし原価計算を必ず実行してください。 補助元帳および総勘定元帳において、在庫評価、売却済商品の原価、差異は、この処理が実行されるまで正しくない可能性があります。

- 日付 %1 (28-02-2019) で一括引き落とし原価計算を実行しようとしています。 最後に登録された一括引き落とし原価計算は、日付 %2 (31-01-2019) で前期に実行されました。 期末と一致する日付 %3 (31-01-2019) での在庫決算の実行が登録されていません。
期末に一致する %3 (31-01-2019) の時点で在庫決算を実行することを忘れないでください。 補助元帳および総勘定元帳において、在庫評価、売却済の商品の原価、および差異は、在庫決算が実行されるまで正しくない可能性があります。

## <a name="inventory-aging-report-discrepancies"></a>在庫エイジング レポートの差異

**在庫エイジング レポート** には、さまざまな保管分析コード (サイトや倉庫など) で表示した場合、異なる値が表示されます。 レポート ロジックの詳細については、[在庫エイジング レポートの例とロジック](inventory-aging-report.md)を参照してください。

## <a name="an-update-conflict-occurs-when-the-inventory-valuation-method-is-either-standard-cost-or-moving-average"></a>在庫評価方法が標準原価または移動平均である場合に更新の競合が発生します。

在庫仕訳帳、発注請求書、販売注文請求書などのドキュメントを、スケーラビリティとパフォーマンスに関して並列で転記すると、更新の競合に関するエラー メッセージが表示され、一部のドキュメントが転記されない場合があります。 この問題は、在庫評価方法が *標準原価* または *移動平均* である場合に発生します。 これらの方法はどちらも永続的な原価計算の方法です。 つまり、最終的な原価は転記時に決定されます。

*移動平均法* を使用している場合、エラー メッセージは次のような例です。

> 比例経費計算後の在庫値 xx.xx が予期されません

*標準コスト* を使用している場合、エラー メッセージは次のような例です。

> 更新後の標準原価が資産在庫金額と一致しません。 値 = xx.xx, Qty = yy.yy、標準コスト = zz.zz

Microsoft が問題を修正するソリューションをリリースするまで、次の説明を使用してエラーを回避または減らしてください。

- 失敗したドキュメントを再転記します。
- 明細行の少ないドキュメントを作成します。
- 標準コストでは小数の値を避けます。 **価格数量** フィールドが *1* に設定された標準コストを定義してください。 *1* より大きい **価格数量** 値を指定する必要がある場合は、単位標準原価の小数点以下の桁数を最小限にしてください。 (小数点以下 2 桁以下が理想的です)。たとえば、**価格** = *10* や **価格数量** = *3* などの標準原価設定は 、3.333333 (小数点以下の値が繰り返される) 単位標準原価を生成するので定義しないようにします。
- 大多数のドキュメントでは、製品在庫分析コードと資産在庫分析コードの同じ組み合わせを保持する複数の明細行を保持しないようにします。
- 並列処理の程度を減らします。 (この場合、更新の競合や再試行の回数が少なくなるので、システムが高速化される可能性があります)。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]