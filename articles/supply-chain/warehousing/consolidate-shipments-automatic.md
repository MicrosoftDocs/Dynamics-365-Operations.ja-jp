---
title: 販売注文の自動リリースを使用して倉庫にリリースされた出荷を連結する
description: このトピックでは、定期的に自動実行される [倉庫へのリリース] 手順内で、複数の注文が倉庫にリリースされたシナリオを示します。
author: GarmMSFT
manager: tfehr
ms.date: 05/12/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSShipConsolidationPolicy, WHSShipConsolidationWorkbench, WHSFilterGroupTable, WHSShipmentConsolidation, WHSFilterGenerallyAvail
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: kamaybac
ms.search.validFrom: 2020-05-01
ms.dyn365.ops.version: 10.0.3
ms.openlocfilehash: ac3ab25dc1355ee15e1209950ff0f3b3933b7095
ms.sourcegitcommit: 827d77c638555396b32d36af5d22d1b61dafb0e8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/16/2020
ms.locfileid: "4432306"
---
# <a name="consolidate-shipments-when-they-are-released-to-the-warehouse-by-using-automatic-release-of-sales-orders"></a>販売注文の自動リリースを使用して倉庫にリリースされた出荷を連結する

[!include [banner](../includes/banner.md)]

このトピックでは、定期的に自動実行される [倉庫へのリリース] 手順内で、複数の注文が倉庫にリリースされたシナリオを示します。 注文は、出荷連結ポリシーとして定義されているルールに基づいて自動的に出荷に連結されます。

このシナリオでは、販売注文のセットを作成し、各セットを倉庫にリリースします。 次に、出荷連結の際に作成または更新された出荷を、構成されたポリシーに基づいて確認します。

## <a name="make-demo-data-available"></a>デモ データを有効化する

このトピックのシナリオでは、Microsoft Dynamics 365 Supply Chain Management にて用意されている標準のデモデータに含まれる値とレコードを参照し ます。 ここで提供されている値を使用するには、デモデータがインストールされている環境で作業し、開始する前に法人を **usmf** に設定します。

## <a name="set-up-shipment-consolidation-policies-and-product-filters"></a>出荷連結ポリシーおよび製品フィルタの設定

このシナリオでは、既にこの機能を有効にし、[出荷連結ポリシーの構成](configure-shipment-consolidation-policies.md)内の実習を完了しており、同ページ内に記述されているポリシーとその他のレコードを作成していることを前提としています。 このシナリオを続行する前に、この演習を行っている必要があります。

## <a name="create-the-sales-orders-for-this-scenario"></a>このシナリオで使用する販売注文の作成

シナリオで使用する一連の販売注文を作成することから始めます。 高度な倉庫 (WMS) プロセスが利用できる倉庫を使用する必要があります。 他の倉庫を明示的に指定していない場合は、次の注文セットのそれぞれに対して同じ倉庫が使用されなければなりません。

**売掛金勘定  \> 注文 \> すべての販売注文** に移動し、次のサブセクションで説明されている設定を含む販売注文のコレクションを作成します。

### <a name="create-order-set-1"></a>注文セット 1 を作成する

#### <a name="sales-order-1-1"></a>販売注文 1-1

1. 以下の設定で販売注文を作成します:

    - **顧客アカウント:** *US-001*
    - **荷渡方法:** *Airwa-Air*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *A0001* (**コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*

#### <a name="sales-order-1-2"></a>販売注文 1-2

1. 以下の設定で販売注文を作成します:

    - **顧客アカウント:** *US-001*
    - **荷渡方法:** *Airwa-Air*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *A0001* (**コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*

#### <a name="sales-order-1-3"></a>販売注文 1-3

1. 以下の設定で販売注文を作成します:

    - **顧客アカウント:** *US-001*
    - **荷渡方法:** *10*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *A0001* (**コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*

1. 以下の設定で 2 つ目の販売注文を作成します:

    - **品目番号 :** *A0002* ( **コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*
    - **荷渡方法:** *Airwa-Air*

### <a name="create-order-set-2"></a>注文セット 2 を作成する

#### <a name="sales-orders-2-1-and-2-2"></a>販売注文 2-1 と 2-2

1. 以下の設定で 2 つの同一の販売注文を作成します:

    - **顧客アカウント:** *US-002*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *M9200* (**コード 4** のフィルタが *可燃性* に設定されている品目)
    - **数量:** *1.00*

1. 以下の設定で 2 つ目の販売注文を作成します:

    - **品目番号 :** *M9201*( **コード 4** のフィルタが *爆発物* に設定されている品目)
    - **数量:** *1.00*
    - **荷渡方法:** *Airwa-Air*

### <a name="create-order-set-3"></a>注文セット 3 を作成する

#### <a name="sales-order-3-1"></a>販売注文 3-1

1. 以下の設定で販売注文を作成します:

    - **顧客アカウント:** *US-002*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *M9200* (**コード 4** のフィルタが *可燃性* に設定されている品目)
    - **数量:** *1.00*

1. 以下の設定で 2 つ目の販売注文を作成します:

    - **品目番号 :** *M9201*( **コード 4** のフィルタが *爆発物* に設定されている品目)
    - **数量:** *1.00*
    - **荷渡方法:** *Airwa-Air*

> [!NOTE]
> この注文は、注文セット 2 で作成した 2 つの注文と同じものです。 ただし、このシナリオでは後に別途リリースするため、独自のオーダー セットとして記載しています。

### <a name="create-order-set-4"></a>注文セット 4 を作成する

#### <a name="sales-order-4-1"></a>販売注文 4-1

1. 以下の設定で販売注文を作成します:

    - **顧客アカウント:** *US-001*
    - **顧客の要求:** *1*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *A0001* (**コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*

### <a name="create-order-set-5"></a>注文セット 5 を作成する

#### <a name="sales-orders-5-1-and-5-2"></a>販売注文 5-1 と 5-2

1. 以下の設定で 2 つの同一の販売注文を作成します:

    - **顧客アカウント:** *US-001*
    - **顧客の要求:** *2*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *A0001* (**コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*

#### <a name="sales-order-5-3"></a>販売注文 5-3

1. 以下の設定で販売注文を作成します:

    - **顧客アカウント:** *US-001*
    - **顧客の要求:** *1*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *A0001* (**コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*

### <a name="create-order-set-6"></a>注文セット 6 を作成する

#### <a name="sales-orders-6-1-and-6-2"></a>販売注文 6-1 と 6-2

1. 以下の設定で 2 つの同一の販売注文を作成します:

    - **顧客アカウント:** *US-003*
    - **顧客の要求:** *2*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *A0001* (**コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*

#### <a name="sales-orders-6-3-and-6-4"></a>販売注文 6-3 と 6-4

1. 以下の設定で 2 つの同一の販売注文を作成します:

    - **顧客アカウント:** *US-004*
    - **顧客の要求:** *1*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *A0001* (**コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*

#### <a name="sales-orders-6-5-and-6-6"></a>販売注文 6-5 と 6-6

1. 以下の設定で 2 つの同一の販売注文を作成します:

    - **顧客アカウント:** *US-007*
    - **サイト:** *6*
    - **倉庫:** *61*
    - **プール :** *ShipCons*

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *A0001* (**コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*

#### <a name="sales-orders-6-7-and-6-8"></a>販売注文 6-7 と 6-8

1. 以下の設定で 2 つの同一の販売注文を作成します:

    - **顧客アカウント:** *US-007*
    - **サイト:** *6*
    - **倉庫:** *61*
    - **プール :** このフィールドは空白のままにします。

1. 以下の設定で注文明細行を追加します:

    - **品目番号 :** *A0001* (**コード 4** フィルタが割り当てられていない品目)
    - **数量:** *1.00*

## <a name="automatic-release-of-sales-orders-to-the-warehouse"></a>販売注文を倉庫に自動的にリリースする

既に作成した一連の販売注文に対して、自動的に倉庫にリリースする手順を実行します。 いずれの場合も、ここで提供されている[基本的な倉庫へのリリース手順](#release-procedure)に従って作業します。

### <a name="basic-release-to-warehouse-procedure"></a><a name="release-procedure"></a>基本的な倉庫へのリリース手順

作成済の連の販売注文ごとに、以下のサブセクションで説明する3つの手順を実行します。

#### <a name="update-the-wave-template-that-will-be-used-during-release"></a>リリース時に使用されるウェーブのテンプレートを更新する

1. **倉庫管理 \> 設定 \> ウェーブ \> ウェーブ テンプレート** の順に移動します。
1. **ウェーブ テンプレート タイプ** フィールドを *出荷* に設定 します。
1. このシナリオで作成した注文セットで使用した倉庫に関連付けられているウェーブ テンプレートを検索して選択します。 たとえば、倉庫 *24* を使用した場合は、 **出荷時の既定のウェーブ テンプレートとして 24** を選択します。 倉庫 *61* を使用した場合は、 **出荷時の既定のウェーブ テンプレートとして 61** を選択します。
1. アクション ウィンドウで、**編集** を選択します。
1. **倉庫へのリリース時にウェーブを処理する** オプションを *いいえ* に設定します。

#### <a name="release-to-the-warehouse"></a>倉庫へのリリース

1. **倉庫管理 \> 倉庫へのリリース \> 販売注文の自動リリース** に移動します。
1. **リリース数量** フィールドを *すべて* に設定します。
1. **含めるレコード** クイックタブで、**フィルター** を選択してクエリのダイアログ ボックスを開きます。
1. **範囲** タブで、 **追加** を選択して、グリッドに以下の設定を持つ行を追加します:

    - **テーブル:** *販売注文*
    - **派生テーブル:** *販売注文*
    - **フィールド:** *販売注文*
    - **基準:** 希望する注文セットの販売注文番号をカンマ区切りで入力します。

1. **OK** を選択してクエリを保存します。
1. **OK** を選択して、*倉庫への自動リリース* の手順を開始します。

#### <a name="review-the-shipment-that-is-created-or-updated"></a>作成または更新された出荷の確認

1. **倉庫管理 \> 出荷 \> すべての出荷** に移動します。
1. 必要な出荷を検索して選択します。
1. 出荷の作成時または更新時に連結ポリシーが使用されていた場合は、**出荷連結ポリシー** フィールドに表示する必要があります。

### <a name="release-sales-orders-from-order-set-1"></a>注文セット1から販売注文をリリースする

[基本的な倉庫へのリリース手順](#release-procedure)に従って、注文セット1から販売注文をリリースします。

完了すると、2つの出荷が作成されていることがわかります。

- 最初の出荷は、*顧客モード* の出荷連結ポリシーを使用して作成された 3 つの行で構成されます。
- 2 つ目の出荷は、*航空運賃* 輸送モードの荷渡方法を使用しないもので、顧客注文の *CustomerOrderNo* 連結ポリシーを使用して作成されてい ます。

### <a name="release-sales-orders-from-order-set-2"></a>注文セット2から販売注文をリリースする

[基本的な倉庫へのリリース手順](#release-procedure)に従って、注文セット2から販売注文をリリースします。

完了すると、3つの出荷が作成されていることがわかります。

- 最初の出荷には、 *可燃性* の品目が含まれています。
- 他の 2 つの出荷には、*爆発性* の品目を含む 1 つの行が含まれてい ます。

### <a name="release-sales-orders-from-order-set-3"></a>注文セット3から販売注文をリリースする

[基本的な倉庫へのリリース手順](#release-procedure)に従って、注文セット3から販売注文をリリースします。

完了すると、以下のアクションが実行されることを確認します:

- 既存の出荷 (注文セット2が倉庫にリリースされた際に作成された出荷) が1つ更新されました。 *可燃性* 品目を含む行が追加されました。
- *爆発* 品目を新規出荷が1つ作成されました。

### <a name="release-sales-orders-from-order-set-4"></a>注文セット4から販売注文をリリースする

[基本的な倉庫へのリリース手順](#release-procedure)に従って、注文セット4から販売注文をリリースします。

完了すると、既存の出荷 (**顧客要求** フィールドが *1* に設定されているもの ) が更新されたことを確認できます。 新たな行が1つ追加されました。

### <a name="release-sales-orders-from-order-set-5"></a>注文セット5から販売注文をリリースする

[基本的な倉庫へのリリース手順](#release-procedure)に従って、注文セット5から販売注文をリリースします。

完了すると、以下のアクションが実行されることを確認します:

- 既存の出荷 ( **顧客要求** フィールドが *1* に設定されたもの) が更新されました。 販売注文 5-3 ( **顧客要求** フィールドが *1* に設定されたもの) の明細行が 追加されました。
- 販売注文 5-1 と 5-2 の明細行が1つの出荷にグループ化されている、新たな出荷が1つ作成されました。

### <a name="release-sales-orders-from-order-set-6"></a>注文セット6から販売注文をリリースする

[基本的な倉庫へのリリース手順](#release-procedure)に従って、注文セット6から販売注文をリリースします。

完了すると、4つの出荷が作成されていることがわかります。

- 顧客アカウント *US-003* の 2 件の販売注文の明細行は、*注文プール* の出荷連結ポリシーを使用して 1 つの出荷にグループ化されています。
- 顧客アカウント *US-004* の 2 件の販売注文の明細行は、*注文プール* の出荷連結ポリシーを使用して 1 つの出荷にグループ化されています。
- 顧客 *007* の販売注文 6-5 および 6-6 の明細行は、*注文プール* の出荷連結ポリシーを使用して1つの出荷にグループ化されています。
- 顧客 *007* の販売注文 6-7 および 6-8 の明細行は、*クロスオーダー* の出荷連結ポリシーを使用して1つの出荷にグループ化されています。

## <a name="additional-resources"></a>追加リソース

- [出荷連結ポリシー](about-shipment-consolidation-policies.md)
- [出荷連結ポリシーを構成する](configure-shipment-consolidation-policies.md)
