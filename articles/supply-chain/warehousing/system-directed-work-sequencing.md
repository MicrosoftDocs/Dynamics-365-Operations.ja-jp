---
title: システム主導の作業優先順位
description: このトピックでは、システム主導の作業優先順位について説明します。 この機能により、システムが実行のためにユーザーに提示する作業指示書の並べ替えとフィルター処理を行うことができます。 これは、倉庫ピッキング プロセスを促進するための追加の基準が必要なシナリオで役立ちます。
author: Mirzaab
manager: tfehr
ms.date: 07/03/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSRFSystemDirectedWorkSequenceQuery, WHSLocDirTable
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-03
ms.dyn365.ops.version: Release 10.0.7
ms.openlocfilehash: 86d396b069a354b8fa7e15793372a8293273d238
ms.sourcegitcommit: 827d77c638555396b32d36af5d22d1b61dafb0e8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/16/2020
ms.locfileid: "4432352"
---
# <a name="system-directed-work-sequencing"></a>システム主導の作業優先順位

[!include [banner](../includes/banner.md)]

システム主導の作業優先順位により、システムが実行のためにユーザーに提示する作業指示書の並べ替えとフィルター処理を行うことができます。 これは、倉庫のピッキングプロセスを実行するために追加の基準 (出荷の時間、ピッキング ゾーン、場所プロファイル、またはさまざまな基準の組み合わせなど) が必要となるシナリオで役立ちます。

この機能は、現在のシステム主導のピッキング機能をシステム主導のクエリ順序を追加することにより拡張します。ユーザーは、作成されたすべての作業指示書を評価する優先順位と 1 つ以上のクエリを設定できます。 モバイル デバイス メニュー項目の設定で指定された基準を満たす作業指示書のみがキャプチャされ、表示されます。

したがって、この機能により、定義された基準に一致する作業指示書を識別し、それらを適切なモバイル デバイス メニュー項目に割り当て、特定のスキル セット、ピッキング機器、またはその他の要件に基づいて作業者に提示するので、倉庫のピッキング プロセスをさらに最適化できます。

> [!NOTE]
> 異なる基準が必要な場合は、複数のモバイル デバイス メニュー項目を使用する必要があります。

## <a name="turn-on-the-organization-wide-system-directed-work-sequencing-feature"></a>組織全体のシステム主導の作業優先順位機能を有効にする

システム主導の作業優先順位を使用するには、システム上でこの機能を有効にする必要があります。 管理者は、[機能の管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) ワークスペースを使用して、機能の状態を確認し、必要に応じて有効にすることができます。 この機能は、次のようにして表示されます。

- **モジュール:** *倉庫管理*
- **機能名:** *組織全体のシステム主導の作業優先順位*

## <a name="setup"></a>セットアップ

### <a name="make-demo-data-available"></a>デモ データを有効化する

このトピックで示されている値を使用してシナリオを実行するには、標準のデモ データがインストールされているシステムで作業する必要があります。 また、**USMF** 法人を選択する必要があります。 このシナリオでは、デモ データの倉庫 *51* を使用します。

> [!IMPORTANT]
> 注文を倉庫にリリースする前に、ピッキング場所に注文のすべての品目に十分な在庫があることを確認してください。
>
> 既定の USMF のデータは、このシナリオをサポートする必要があります。 デモ データを使用していない場合は、**場所のディレクティブ** の設定を確認して、どのピッキング場所が販売注文のピッキングに使用されるかを確認します。 在庫を調整する必要がある場合には、手動によって移動を作成したり、補充を使用したり、またはその他のフローを使用したりできます。

### <a name="set-up-a-mobile-device-menu-item"></a>モバイル デバイス メニュー項目を設定する

1. **倉庫管理 \> 設定 \> モバイル デバイス \> モバイル デバイスのメニュー品目** の順に移動します。
1. モバイル デバイス メニュー項目の一覧で、**販売ピッキング – システム** を選択します。 必須のメニュー項目が既に存在している必要があります。 
1. 次の設定を確認します。

    - **一般** クイックタブで、**指示者** フィールドを *システム主導* に設定する必要があります。
    - **作業クラス** クイックタブには、次の設定を表示する必要があります。

        | 作業クラス ID | ワーク オーダー タイプ |
        |---|---|
        | Sales | 販売注文 |
        | SO ピッキング | 販売注文 |

1. アクション ウィンドウで、**システム主導の作業シーケンス クエリ** を選択します。
1. **編集** を選択します。
1. 既存の明細行を削除し、**はい** を選択してアクションを確認します。
1. アクション ウィンドウで **新規** を選択して、明細行を作成します。
1. 新しい明細行で、次の値を設定します。

    - **シーケンス番号:** *1*
    - **説明フィールド:** *20 未満の作業数量と降順*

1. **保存** を選択します。
1. アクション ウィンドウで、**クエリの編集** を選択します。
1. **結合** タブで、結合階層を展開して、**作業明細行** テーブルを表示します。
1. **作業明細行** テーブルの結合を選択します。
1. **結合するテーブルの追加** を選択します。
1. 表示される一覧で、次の設定を含む行を検索して選択します。

    - **結合モード:** *n:1*
    - **リレーション:** *場所 (保管場所)*

1. **選択** を選択します。

    場所はテーブル結合に追加されます。

1. **並べ替え** タブで、**追加** を選択して新しい行を追加します。
1. 新しい明細行で、次の値を設定します。

    - **表:** *作業明細行*
    - **派生テーブル:** *作業明細行*
    - **フィールド:** *作業数量* (表示されるメッセージ ボックスで、**はい** を選択してこのフィールドに並べ替えを追加します。)
    - **検索の方向:** *降順*

1. **範囲** タブを選択します。

    優先順位に特定の作業基準のみを含める必要がある場合は、**範囲** タブで指定できます。この例では、数量が 20 個 (最小の測定単位) 未満の作業のみを含めます。

    一部の明細行が既に含まれていることに注意してください。 これらの明細行は削除しないでください。

1. **追加** を選択して明細行を追加します。
1. 新しい明細行で、次の値を設定します。

    - **表:** *作業明細行*
    - **派生テーブル:** *作業明細行*
    - **フィールド:** *在庫作業数量*
    - **基準:** *\<20* (20 未満)

1. **追加** を選択して別の明細行を追加します。
1. 新しい明細行で、次の値を設定します。

    - **表:** *作業明細行*
    - **派生テーブル:** *作業明細行*
    - **フィールド:** *作業タイプ*
    - **基準:** *ピッキング*

1. **追加** を選択して別の明細行を追加します。
1. 新しい明細行で、次の値を設定します。

    - **テーブル:** *場所*
    - **派生テーブル:** *場所*
    - **フィールド:***場所のプロファイル ID*
    - **基準:** *!STAGE*

        > [!IMPORTANT]
        > *STAGE* の前に感嘆符 (*!*) を必ず含めてください。

1. **OK** を選択して、クエリを保存して閉じます。
1. **保存** を選択します。
1. ページを閉じて、**モバイル デバイス メニュー項目** ページに戻ります。

> [!NOTE]
> この設定では、的確な作業をモバイル デバイス メニュー項目に適格な作業を供給するために使用される基準を定義します。 クエリにさらに基準明細行を追加すると、システムは最初に最小の順序番号を持つクエリ明細行を使用します。 言い換えると、最初に順序番号 1 のすべての適格な作業がユーザーに表示され、次に番号順序 2 のすべての作業が表示されます。 したがって、特定の範囲と並べ替えを一緒に使用する必要がある場合は、同じシステム主導の作業順序クエリで指定する必要があります。
>
> この設定では、数量が 20 個未満である明細行が少なくとも 1 行あるすべての作業をキャプチャします。 したがって、作業に数量がちょうど 20 個または 20 個より多い明細行がある場合、数量が 20 個未満の明細行も少なくとも 1 つあれば、それは有効になります。

### <a name="location-directives"></a>場所のディレクティブ

既定の Contoso データを使用している場合、場所ディレクティブ アクションのクエリを変更する必要はありません。 ただし、Contoso 以外の環境でこの機能を適用するときに、場所ディレクティブが販売注文の品目を確実にキャプチャするようにするには、新しい場所ディレクティブを作成します。 デモ環境で設定を確認するには、次の手順を実行します。

1. **倉庫管理** \> **設定** \> **場所ディレクティブ** の順に移動します。
1. **ワーク オーダー タイプ** フィールドで、*販売注文* を選択します。
1. *51 ピッキング* という名前の場所ディレクティブを選択します。
1. **場所ディレクティブ アクション** クイックタブで、**ピッキング** アクションの行を選択します。
1. グリッドの上にある **クエリの編集** を選択します。
1. **範囲** クエリを確認します。

    1. **フィールド** フィールドが *場所* に設定されている行を検索します。
    2. **基準** フィールドが空白になっていることを確認します (つまり、制限はありません)。

## <a name="scenario"></a>シナリオ

### <a name="create-sales-order-picking-work"></a>販売注文のピッキング作業の作成

システム主導のピッキングを実行する前に、いくつかの出荷作業を作成する必要があります。 このシナリオでは、指定されたシステム主導の作業順序クエリに基づく 4 つの販売注文を作成します。

販売注文ごとに在庫数量を引当します。 したがって、在庫引当または在庫引当の一部がキャンセルされない限り、引当済の在庫は他の注文のために倉庫から引き出すことはできません。

次に、各販売注文を倉庫にリリースして、出荷作業を作成します。

#### <a name="sales-order-1"></a>販売注文 1

1. **販売とマーケティング \> 販売注文 \> すべての販売注文** の順に移動します。
1. アクション ウィンドウで、**新規** を選択して、販売注文 1 を作成します。
1. **販売注文の作成** ダイアログ ボックスでは、次の値を設定します。

    - **顧客** セクションで、**顧客 ID** フィールドを *US-004* に設定します。
    - **一般** セクションで、**倉庫** フィールドを *51* に設定します。

1. **OK** を選択してダイアログ ボックスを閉じます。 販売注文番号をメモします。
1. 新しい販売注文に明細行を追加し、次の値を設定します。

    - **品目番号:** *M9200*
    - **数量:** *20*

1. グリッドの上部にある **在庫** メニューで、**引当** を選択します。
1. **引当** ページで、**引当ロット** を選択して、在庫を引当します。
1. **引当** ページを閉じます。
1. アクション ウィンドウの **倉庫** タブで、**倉庫へのリリース** を選択して、倉庫の作業を作成します。

    この販売注文に対して作成されたウェーブ ID および出荷 ID を示す情報メッセージが表示されます。

#### <a name="sales-order-2"></a>販売注文 2

1. アクション ウィンドウで、**新規** を選択して、販売注文 2 を作成します。
1. **販売注文の作成** ダイアログ ボックスでは、次の値を設定します。

    - **顧客アカウント:** *US-007*
    - **倉庫:** *51*

1. **OK** を選択してダイアログ ボックスを閉じます。 販売注文番号をメモします。
1. 新しい販売注文に明細行を追加し、次の値を設定します。

    - **品目番号:** *M9200*
    - **数量:** *5*

1. **明細行の追加** を選択して、2 行目を追加し、次の値を設定します。

    - **品目番号:** *M9201*
    - **数量:** *1*

1. 両方の明細行の在庫を引当します。
1. 注文を倉庫にリリースします。

#### <a name="sales-order-3"></a>販売注文 3

1. アクション ウィンドウで、**新規** を選択して、販売注文 3 を作成します。
1. **販売注文の作成** ダイアログ ボックスでは、次の値を設定します。

    - **顧客アカウント:** *US-009*
    - **倉庫:** *51*

1. **OK** を選択してダイアログ ボックスを閉じます。 販売注文番号をメモします。
1. 新しい販売注文に明細行を追加し、次の値を設定します。

    - **品目番号:** *M9200*
    - **数量:** *7*

1. **明細行の追加** を選択して、2 行目を追加し、次の値を設定します。

    - **品目番号:** *M9202*
    - **数量:** *8*

1. 両方の明細行の在庫を引当します。
1. 注文を倉庫にリリースします。

#### <a name="sales-order-4"></a>販売注文 4

1. アクション ウィンドウで、**新規** を選択して、販売注文 4 を作成します。
1. **販売注文の作成** ダイアログ ボックスでは、次の値を設定します。

    - **顧客アカウント:** *US-010*
    - **倉庫:** *51*

1. **OK** を選択してダイアログ ボックスを閉じます。 販売注文番号をメモします。
1. 新しい販売注文に明細行を追加し、次の値を設定します。

    - **品目番号:** *M9200*
    - **数量:** *25*

1. **明細行の追加** を選択して、2 行目を追加し、次の値を設定します。

    - **品目番号:** *M9202*
    - **数量:** *10*

1. 両方の明細行の在庫を引当します。
1. 注文を倉庫にリリースします。

### <a name="get-work-ids-for-the-work-that-was-created"></a>作成された作業の作業 ID を取得する

1. **倉庫管理 \> 作業 \> 作業の詳細** の順に移動します。
1. **倉庫** フィールドでフィルター処理して、倉庫 *51* の作業のみが表示されるようにします。
1. 4 つの作業 ID が作成されている必要があります。 各販売注文の作業 ID をメモします。

    | 販売注文 ID | 作業 ID | 作業数量 |
    |---|---|---|
    | 販売注文 1 | 作業 ID 1 | 20 個体 |
    | 販売注文 2 | 作業 ID 2 | 6 個 (両方の明細行の合計) |
    | 販売注文 3 | 作業 ID 3 | 15 個 (両方の明細行の合計) |
    | 販売注文 4 | 作業 ID 4 | 35 個 (両方の明細行の合計) |

モバイル デバイスでフローを実行する前に、作成したばかりの作業のみが、倉庫 *51* および *販売注文* の作業指示書タイプで *オープン* 状態にあることを確認してください。 それ以外の場合、システム主導のピッキングにはすべての適格な作業が含まれるため、テストの結果は異なる場合があります。

1. **倉庫管理 \> 作業 \> 出荷 \> オープン販売作業** の順に移動します。
1. **オープン販売作業** グリッドの **倉庫** フィールドでフィルター処理して、倉庫 *51* の作業のみが表示されるようにします。
1. 先ほど作成した 4 つの作業 ID のみが表示されていることを確認します。
1. **作業** ページを閉じます。

### <a name="mobile-device-flow-execution"></a>モバイル デバイス フローの実行

設定に基づいて、システムは、ユーザーの作業を作業明細行の数量が最も多いものから最も少ないものへと並べ替えて提供します。 各明細行の数量は、20 個未満になります。

この設定では、数量が 20 個未満である明細行が少なくとも 1 行あるすべての作業がキャプチャされることに注意してください。 したがって、作業に数量が 20 個または 20 個を超える別の明細行がある場合も、有効になります。

#### <a name="mobile-app"></a>モバイル アプリ

1. 倉庫 *51* にいるユーザーとして倉庫アプリにサインインします。
1. **出荷 \> 販売ピッキング - システム** に移動します。

    作業 ID *4* のピッキング ステップが表示されます。 この作業 ID が最初に表示されるのは、システム主導のクエリ順序が設定されているためです。ここで、作業は降順の作業明細行の数量に基づいて順序付けする必要があると指定しました。

1. 必要なピッキングを完了し、プットして作業 ID を閉じます。

    次に、作業 ID *3* が表示されます。 作業ラインの数量に基づいて、その作業ラインの 1 つは、順序で次になります。

1. ピッキングを完了し、プットして作業 ID を閉じます。

    次に、作業 ID *2* が表示されます。 この作業のピッキング行は順序で次になります。

1. ピッキングを完了し、プットして作業 ID を閉じます。

    これ以上の作業は表示されません。 作業 ID *1* は、このモバイル デバイス メニュー項目の対象となっていません。作業明細行の数量が 20 個未満の場合にのみ作業ヘッダーが考慮されることをクエリが指定しているためです。

## <a name="tips"></a>ヒント

システム主導の作業シーケンス クエリは *包括的* です。 一部の設定では、この事実を覚えておくことが重要です。 たとえば、特定のメニュー項目で、作業単位が *個* である作業のみを処理するとします。クエリの **範囲** タブでその制限を指定します。 この場合、少なくとも 1 つの作業明細行で、作業単位が *個* に設定されているすべての作業は、作業者に提供されます。 したがって、この作業には、作業明細行の *個* 以外の作業単位 (*ボックス* や *パレット* など) が含まれる場合もあります。 クエリは、作業単位が *個* に設定されている作業ラインがない作業のみを除外します。

したがって、このシナリオの例では、作業ID *4* もクエリでキャプチャされていました。 作成されたときに 2 つの明細行が追加されました。1 つは 25 個、もう 1 つは 10 個です。 少なくとも 1 つの作業ラインには、20 個未満の数量があるため、作業は引き続きユーザーに表示されました。

シナリオによっては、作業の分割を使用して、この動作を回避することができます。
