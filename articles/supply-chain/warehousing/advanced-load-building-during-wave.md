---
title: ウェーブ中の高度な積荷構築
description: このトピックでは、ウェーブ実行時に既存のウェーブに積荷が自動的に割り当てられる、高度なウェーブ積荷構築に関する情報を提供します。 したがって、積荷計画ワークベンチを使用することなく、トラックを表す適切な積荷を作成することができます。
author: Mirzaab
ms.date: 07/01/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSPostMethod,WHSWaveTemplateTable,WHSLoadMixGroup,WHSLoadBuildTemplate, WHSWaveTableListPage, TMSLoadBuildTemplateApply, TMSLoadBuildTemplates, TMSLoadBuildTemplateCreate
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-01
ms.dyn365.ops.version: 10.0.9
ms.openlocfilehash: 0dafac981bcdec307de6dc202f557e7b8837ae2e
ms.sourcegitcommit: 9166e531ae5773f5bc3bd02501b67331cf216da4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/03/2022
ms.locfileid: "8670520"
---
# <a name="advanced-load-building-during-wave"></a>ウェーブ中の高度な積荷構築

[!include [banner](../includes/banner.md)]

高度なウェーブ積荷構築は、ウェーブ実行時に、既存のウェーブに積荷を自動的に割り当てます。 したがって、積荷計画ワークベンチを使用することなく、トラックを表す適切な積荷を作成することができます。 この機能は、積荷の概念を使用して、トラックやトレーラーでの商品出荷を追跡および計画したいが、そのような積荷を毎日手動で作成したくない企業に役立ちます。

ウェーブ処理中に、システムは通常、積荷が割り当てられていない出荷ごとに新しい積荷を作成します。 ただし、高度なウェーブ積荷構築がオンになっている場合は、未割り当ての出荷ごとに既存の積荷が割り当てられ (適切な積荷が存在する場合)、新しい積荷は必要な場合にのみ作成されます。 高度なウェーブ積荷構築では、定義した基準に基づいて新しい積荷が自動的に作成されます。

この機能を使用するには、次のようにシステム設定をする必要があります。

- 新しい **buildLoads** メソッドを含む *ウェーブ テンプレート* を作成します。 このメソッドを使用すると、これらのテンプレートを使用するウェーブで高度なウェーブ積荷構築を使用できるようになります。
- *積荷構築テンプレート* を設定します。各テンプレートは、特定のウェーブ テンプレートおよびメソッドにリンクされています。 積荷構築テンプレートは、ウェーブされている積荷明細行が追加される積荷 (既存または新規) を制御します。 積荷テンプレート、機器、および積荷明細行の他のフィールドの値などの基準に基づいて、出荷を組み合わせたり、個別に出荷することができます。
- *積荷混合グループ* を定義して、単一の積荷でどの品目を組み合わせるか、または組み合わせないかを制御します。 また、制限により警告またはエラーを生成するかどうか、および積荷テンプレートの容積測定制限を評価するかどうかを指定します。

## <a name="turn-on-advanced-wave-load-building-in-your-system"></a>システムで高度なウェーブ積荷構築をオンにする

高度なウェーブ積荷構築を使用する前に、システム内で 2 つの機能をオンにする必要があります。 管理者は、[機能の管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)設定を使用して、これらの機能の状態を確認し、必要に応じて有効にすることができます。 **機能管理** ワークスペースで、この機能は次のようにリストされています。

- ウェーブ積荷構築機能:

    - **モジュール:** *倉庫管理*
    - **機能名:** *ウェーブ積荷構築機能*

- 組織全体のウェーブ ステップ コード:

    - **モジュール:** *倉庫管理*
    - **機能名:** *機能全体のウェーブ ステップ コード*

### <a name="make-sample-data-available"></a>サンプル データを有効化する

ここで指定されたサンプル レコードと値を使用してこのデモを実行するには、標準の [デモ データ](../../fin-ops-core/dev-itpro/deployment/deploy-demo-environment.md) がインストールされているシステムを使用する必要があります。 また、開始する前に **USMF** 法人を選択する必要があります。

このデモは、実稼働システムで作業するときにこの機能を使用するためのガイダンスとして使用することもできます。 ただし、その場合は、独自の値に置き換える必要があり、標準のデモ データが提供するいくつかのタイプの必要なレコードが不足している可能性があります。

### <a name="make-sure-that-the-scenario-setup-includes-enough-available-inventory"></a>シナリオの設定に十分な在庫があることを確認する

**USMF** のデモ データを使用している場合は、まず、関連する各場所に十分な在庫があるようにシステムが設定されていることを確認する必要があります。 このデモでは、倉庫 *62* に次の在庫があることが予想されます。

- **品目 A0001:** 10 個
- **品目 A0002:** 10 個
- **品目 M9200:** 10 個

品目 **M9200** を倉庫に追加する必要があります。 品目在庫を追加するには、次のサブセクションの手順を完了します。

#### <a name="create-a-new-license-plate-id"></a>新しいライセンス プレート ID の作成

1. **倉庫管理** \> **設定** \> **倉庫** \> **ライセンス プレート** に移動します。
1. アクション ウィンドウで、**新規** を選択します。
1. 新しい行の **ライセンス プレート** フィールドに *LP6203* を入力します。
1. **保存** を選択します。

#### <a name="create-a-standard-cost-for-item-m9200-in-site-6"></a>サイト 6 で品目 M9200 の標準原価を作成する

1. **製品情報管理** \> **製品** \> **リリース済製品** の順に移動します。
1. **M9200** で検索します。
1. 品目の行を選択し、アクション ウィンドウの **原価の管理** タブで、**設定** グループから **品目価格** を選択します。
1. **品目価格** のページで、**保留中の価格** タブを選択します。
1. アクション ウィンドウで、**新規** を選択します。
1. 新しい明細行で、次の値を設定します。

    - **原価タイプ:** *予定原価*
    - **価格タイプ:** *原価*
    - **バージョン:** *10*
    - **サイト:** *6*
    - **価格:** *1.60*

1. アクション ウィンドウで、**保存** を選択します。
1. アクション ウィンドウで、**保留中の価格の有効化** を選択します。
1. **有効な価格** タブを選択して、サイト *6* の新しい原価価格が追加されたことを確認します。

#### <a name="create-inventory-in-warehouse-62"></a>倉庫 62 の在庫を作成する

1. **在庫管理** \> **仕分入力** \> **品目** \> **在庫調整** に移動します。
1. アクション ウィンドウで、**新規** を選択します。
1. **在庫仕訳帳の作成** ダイアログ ボックスの **概要** クイック タブの **倉庫** フィールドに、*62* と入力します。 他のすべてのフィールドの規定値を受け入れます。
1. **OK** を選択してダイアログ ボックスを閉じます。
1. **在庫調整** ページが開きます。 **仕訳帳明細行** クイック タブで **新規** を選択して、明細行を追加します。
1. 新しい行で、次の値を設定します。 他のすべてのフィールドの規定値を受け入れます。

    - **品目番号:** *M9200*
    - **場所:** *bulk-003*
    - **数量:** 値を *10* に変更します。

1. アクション ウィンドウで、**保存** を選択します。
1. アクション ウィンドウで **検証** を選択して、エラーをチェックします。
1. **仕訳帳の確認** ダイアログ ボックスで **OK** を選択して、確認を開始します。 確認が完了すると、メッセージが表示されます。
1. アクション ウィンドウで **転記** を選択して、在庫調整をコミットします。
1. **仕訳帳の転記** ダイアログ ボックスで **OK** を選択して、転記を開始します。 転記が完了すると、メッセージが表示されます。

## <a name="set-up-advanced-wave-load-building"></a>高度なウェーブ積荷構築の設定

### <a name="regenerate-wave-process-methods"></a>ウェーブのプロセス方法の再生成

場合によっては、積荷構築メソッド (**buildLoads**) を使用可能にするために、ウェーブのプロセス方法を再生成する必要があります。

1. **倉庫管理** \> **設定** \> **ウェーブ** \> **ウェーブのプロセス方法** の順に移動します。
2. **buildLoads** が一覧に表示されていることを確認します。 表示されない場合は、アクション ウィンドウで **メソッドの再生成** を選択して追加します。

### <a name="set-up-wave-templates"></a>ウェーブ テンプレートの設定

高度なウェーブ積荷構築を利用するには、関連する各 [ウェーブ テンプレート](tasks/configure-wave-processing.md)に **buildLoads** メソッドを含める必要があります。

1. **倉庫管理** \> **設定** \> **ウェーブ** \> **ウェーブ テンプレート** の順に移動します。
1. ウェーブ テンプレートを選択します。

    **USMF** のデモ データを使用している場合は、**出荷時の既定のテンプレートとして 62** を選択します。

1. アクション ウィンドウで **編集** を選択し、ページを編集モードにします。
1. **メソッド** クイック タブの **残りのメソッド** グリッドで、**buildLoads** メソッドを選択します。
1. 右矢印ボタンを選択して、**buildLoads** メソッドを **選択されたメソッド** グリッドに移動します。
1. **buildLoads** メソッドに **ウェーブ ステップ コード** の値を割り当てるには、最初に **ウェーブ ステップ コード** ページでコードを作成する必要があります。 必要に応じて任意の値を使用できますが、後で必要になるため、必ずメモしておいてください。 コード **WSC2112** を作成するには、これらの手順に従います:

    1. **buildLoads** メソッドの行で、**ウェーブ ステップ コード** フィールドの下矢印を右クリックし、**詳細を表示** を選択します。
    1. **ウェーブ ステップ コード** ページのアクション ウィンドウで、**新規** を選択します。
    1. **ウェーブ ステップ コード** フィールドに、*WSC2112* と入力します。
    1. **ウェーブ ステップの説明** フィールドに、*WSC2112* と入力します。
    1. **ウェーブ ステップ タイプ** フィールドで、*積荷構築* を選択します。

1. **保存** を選択して、ページを閉じます。
1. **buildLoads** メソッドの行の **ウェーブ ステップ コード** フィールドで、作成したコード (**WSC2112**) を選択します。
1. アクション ウィンドウで、**保存** を選択します。

> [!NOTE]
> ウェーブ ステップ コードとは、ユーザーが設定し、ウェーブ メソッドの特定のインスタンスを対応するテンプレートにリンクするために使用できるコードです。 テンプレートには、補充、コンテナー詰め、ラベル印刷、積荷構築、および並べ替えのためのテンプレートが含まれます。
>
> ウェーブ ステップ コードが使用されていない場合、ユーザーはウェーブ メソッド インスタンスから特定のテンプレートを参照する自由書式のテキストを入力する必要があります。 ユーザーは、ウェーブ テンプレートの特定のウェーブ ステップ メソッドに追加するウェーブ ステップのテキストが、ターゲット テンプレートのウェーブ ステップ テキストと完全に一致するよう確認する必要があるため、自由書式のテキストのエラーが容易に発生します。
>
> 特定のウェーブ ステップ タイプに対するウェーブ ステップ コードが、別のページで設定されます。 ウェーブ ステップ コードを必要とするウェーブ テンプレート内の各ウェーブ ステップ メソッド インスタンスに関しては、ドロップダウン リストでウェーブ ステップ コードを選択する必要があります。 ドロップダウン リストでの選択により、自由書式のテキスト入力が置き換えられ、人為的エラーのリスクと影響を軽減するのに役立ちます。 設定コードは、ウェーブ テンプレートのウェーブ ステップ メソッドをメソッドのターゲット テンプレートにリンクするために使用します。

### <a name="set-up-load-mix-groups"></a>積荷混合グループの設定

積荷混合グループは、1 つの積荷で組み合わせることができる品目の種類に関するルールを設定します。 積荷混合グループは必要なだけ設定できます。 ただし、高度なウェーブ積荷構築を使用するには、少なくとも 1 つ準備する必要があります。 積荷混合グループを作成するには、次の手順に従います。

1. **倉庫管理** \> **設定** \> **積荷** \> **積荷混合グループ** の順に移動します。
1. アクション ウィンドウで **新規** を選択し、積荷グループを作成します。
1. **積荷混合グループ ID** フィールドに、新しいグループの名前を入力します。

    **USMF** デモ データを使用している場合は、次の値を設定します:

    - **積荷混合グループ ID:** *テレビ*
    - **説明:** *テレビ*

1. アクション ウィンドウで **保存** を選択し、**積荷混合グループの基準** のクイック タブを使用可能にします。
1. **積荷混合グループの基準** のクイック タブで、**新規** を選択して、グリッドに行を追加します。
1. 新しい行で、各フィールドに任意の値を設定します。 これらの値は、積荷混合の対象となる品目グループを決定します。

    **USMF** デモ データを使用している場合は、**品目グループ** フィールドの *テレビ & ビデオ* を選択します。

1. アクション ウィンドウで **保存** を選択し、**積荷混合グループの制約** のクイック タブを使用可能にします。
1. **積荷混合グループの制約** のクイック タブで、**新規** を選択して、グリッドに行を追加します。
1. 新しい行で、各フィールドに任意の値を設定します。

    **USMF** デモ データを使用している場合は、次の値を設定します:

    - **品目グループ:** *CarAudio*
    - **積荷構築アクション:** *制約* (この値は、**CarAudio** 品目グループに属する品目が、**テレビ & ビデオ** 品目グループに属する品目と同じ積荷になることを防ぎます。)

1. 積荷混合グループに必要なすべての基準と制約を追加するまで、ルールの操作を続けます。

**USMF** のデモ データを使用している場合は、これでこの設定は完了しました。

### <a name="set-up-load-build-templates"></a>積荷構築テンプレートを設定する

積荷構築テンプレートは必要なだけ設定できます。 ただし、高度なウェーブ積荷構築を使用するには、少なくとも 1 つ準備する必要があります。 積荷構築テンプレートを作成するには、次の手順に従います。

1. **倉庫管理** \> **設定** \> **積荷** \> **ウェーブ積荷構築テンプレート** の順に移動します。
1. アクション ウィンドウで **新規** を選択して、行をグリッドに追加します。
1. 新しい行で、次の値を設定します。

    | フィールド | 説明 | USMF デモ データの値 |
    |---|---|---|
    | 連番 | テンプレートが評価される順序。 | *1* |
    | 積荷構築テンプレートの名前 | 積荷構築テンプレートの一意の識別子を入力します。 この設定で作成または更新したテンプレートの名前を入力する必要があります。 | *62 出荷の既定* |
    | ウェーブ ステップ コード | ウェーブ メソッドにテンプレートをリンクするウェーブ ステップ コードを入力します。 この設定の前半でウェーブ テンプレートを設定する際には、**buildLoads** メソッドに対して選択したコードを入力する必要があります。 | *WSC2112* |
    | 読み込みテンプレート ID | 新しい積荷を作成し、既存の積荷に割り当てるときに照合する積荷テンプレートを選択します。 積荷テンプレートは、積荷全体に許容される最大重量とボリュームを定義します。 | *Stnd 積荷テンプレート* |
    | 設備 | 既存の積荷に割り当てるときに照合し、作成された新しい積荷に入力する設備。 | このフィールドは空白のままにします。 |
    | 積荷混合グループ ID | 品目が積荷を許可された場合に使用する積荷混合グループを選択します。 混合グループは、1 つの積荷で組み合わせることができる品目の種類に関するルールを設定します。 この設定の前の手順で作成した混合グループのいずれかを選択する必要があります。 | *TV* |
    | オープン積荷の使用 | 既存のオープンな積荷を追加するかどうかを選択します。 次のオプションを使用できます。<ul><li>**なし** – オープンな積荷を、既存の積荷に追加しないでください。</li><li>**任意** – この行に対して有効なすべての既存の積荷にオープンな積荷を追加します。</li><li>**割り当て済** – ウェーブに割り当てられている積荷にオープンな積荷を追加します。</li></ul> | *任意* |
    | 積荷の作成 | 基準に一致する既存の積荷がない場合に、新しい積荷を作成するかどうかを指定します。 | 選択済 (= *はい*) |
    | 出荷明細行の分割許可 | すべての明細行が積荷テンプレートの最大能力を超える場合、単一の積荷明細行を複数の積荷に分割するかを指定します。 | 清算済 (= *いいえ*) |
    | 容積測定の検証 | 各積荷明細行が追加されるときに、積荷構築が重量と容積をチェックするかどうかを指定して、積荷テンプレートの容積制限が確実に順守されるようにします。 | 清算済 (= *いいえ*) |

1. アクション ウィンドウで **保存** を選択して、**クエリの編集** オプションが使用できるようにします。
1. アクション ウィンドウで **クエリの編集** を選択して、クエリを編集するダイアログ ボックスを開きます。
1. ダイアログ ボックスの **並べ替え** タブで **追加** を選択して、行をグリッドに追加します。
1. 新しい行で、使用する並べ替えルールを定義します。 たとえば、次の値を設定して、検索結果を注文番号で昇順に並べ替えます。

    - **テーブル:** *積荷の詳細*
    - **派生テーブル:** *積荷の詳細*
    - **フィールド:** *注文番号*
    - **検索の方法:** *昇順*

1. **OK** を選択して変更を保存し、ダイアログ ボックスを閉じます。
1. **分割** クイック タブで、積荷を分割する方法を制御するルールを設定します。 通常、**ルート**、**ツアー** または **実行** など、積荷明細行に拡張されたカスタム フィールドで分割します。 たとえば、注文番号ごとに 1 つの積荷を作成するには、次の値を持つ行の **分割** チェック ボックスをオンにします。

    - **参照テーブル名:** *積荷の詳細*
    - **参照フィールド名:** *注文番号*

## <a name="scenario"></a>シナリオ

このシナリオでは、このトピックで前に説明した設定が、販売注文が処理されている間の倉庫の操作にどのように影響するかを示します。 このシナリオでは、**USMF** のデモ データを、それらのセットアップ手順で提供されているデモ値と共に使用します。

### <a name="create-sales-orders"></a>販売注文の作成

1. **販売とマーケティング** \> **販売注文** \> **すべての販売注文** の順に移動します。
1. アクション ウィンドウで **新規** を選択して、**販売注文の作成** ダイアログ ボックスを開きます。
1. ダイアログ ボックスに次の値を設定します。

    - **顧客** クイック タブで、**顧客 ID** フィールドを *US-007* に設定します。
    - **一般** クイック タブの **倉庫** フィールドを *62* に設定します。

1. **OK** を選択して販売注文を作成し、ダイアログ ボックスを閉じます。
1. 新しい販売注文が開かれます。 **販売注文明細行** クイック タブのグリッドに、新しい空の明細行を含める必要があります。 この新しい行で、**品目番号** フィールドを *A0001* に、**数量** フィールドを *1* に設定します。
1. グリッドの上部にある **在庫** メニューで、**引当** を選択します。
1. **引当** ページのアクション ウィンドウで、**引当ロット** を選択します。
1. ページの右上隅にある **閉じる** ボタン (**X**) を選択して、販売注文に戻ります。
1. アクション ペインの、**倉庫** タブにある **アクション** グループで、**倉庫にリリース** を選択します。 既存の積荷にはこの注文番号を持つ積荷明細行が含まれないため、システムは出荷を作成して、それを新しい積荷に追加します。

    この注文に対して作成された作業、ウェーブ、および出荷を示す情報メッセージが表示されます。

1. 販売明細行の積荷、出荷、および作業の詳細を確認するには、明細行を選択し、グリッドの上部にある **倉庫** メニューから、**積荷の詳細**、**出荷**、または **作業の詳細** を選択します。
1. 作成した販売注文の **販売注文明細行** クイック タブで **明細行の追加** を選択して、別の行を追加します。
1. 新しい明細行で、**品目番号** フィールドを *A0002* に、**数量** フィールドを *1* に設定します。
1. 6 行目から 9 行目を繰り返して明細行を引当し、倉庫にリリースします。 システムは、追加した明細行に対して **新規** 出荷を作成します。 ただし、高度なウェーブ積荷構築を使用しているので、システムはその出荷と積荷明細行を既存のウェーブに追加します。 高度なウェーブ積荷構築を使用していない場合は、システムは出荷に対して新しい積荷を作成します。
1. 作成した販売注文の **販売注文明細行** クイック タブで **明細行の追加** を選択して、別の行を追加します。
1. 新しい明細行で、**品目番号** フィールドを *M9200* に、**数量** フィールドを *1* に設定します。
1. 6 行目から 9 行目を繰り返して明細行を引当し、倉庫にリリースします。 以前と同様に、システムは追加した明細行に **新規** の出荷を作成します。 ただし、この品目は **CarAudio** 品目グループのものであるため、**積荷混合グループに設定した制約を渡すことができません**。 したがって、**新しい積荷に追加** されます。 積荷構築テンプレートに積荷混合グループを指定していない場合は、この出荷が最初の積荷に追加されます。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]