---
title: 出荷連結ポリシー
description: このトピックでは、出荷連結ポリシーの柔軟な構成を実現する機能の概要について説明します。
author: GarmMSFT
manager: tfehr
ms.date: 05/12/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSShipConsolidationPolicy, WHSShipConsolidationWorkbench, WHSShipConsolidationError, WHSShipConsolidationSetShipment, WHSShipConsolidationPolicySelect, WHSShipPlanningListPage, TMSCarrierGroup, WHSShipConsolidationTemplate, WHSShipConsolidationTemplateApply, WHSShipConsolidationTemplateCreate
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: kamaybac
ms.search.validFrom: 2020-05-01
ms.dyn365.ops.version: 10.0.3
ms.openlocfilehash: 326e9a32cdab049d974b6d88742434fbc8d56817
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/15/2021
ms.locfileid: "5006444"
---
# <a name="shipment-consolidation-policies"></a><span data-ttu-id="500b1-103">出荷連結ポリシー</span><span class="sxs-lookup"><span data-stu-id="500b1-103">Shipment consolidation policies</span></span>

<span data-ttu-id="500b1-104">出荷連結ポリシーを使用した出荷連結のプロセスを使用することで、倉庫への自動リリースと手動リリースの処理にて自動出荷連結が可能となります。</span><span class="sxs-lookup"><span data-stu-id="500b1-104">The shipment consolidation process that uses shipment consolidation policies allows for automated shipment consolidation during automated and manual release to the warehouse.</span></span> <span data-ttu-id="500b1-105">この機能が導入される前の自動連結では、フィールドがハードコーディングされており、これは倉庫対して設定されていた **倉庫にリリースされた出荷を連結する** フィールドをベースにしていました。</span><span class="sxs-lookup"><span data-stu-id="500b1-105">The automated consolidation that was available before this feature was introduced had hard-coded fields and was based on the **Consolidate shipment at release to warehouse** field that was set for a warehouse.</span></span>

<span data-ttu-id="500b1-106">出荷連結ポリシーは、次の機能に対して使用されます：</span><span class="sxs-lookup"><span data-stu-id="500b1-106">Shipment consolidation policies are used for the following functionality:</span></span>

- <span data-ttu-id="500b1-107">自動バッチジョブかされた「倉庫へのリリース」機能</span><span class="sxs-lookup"><span data-stu-id="500b1-107">The automated release-to-warehouse batch job</span></span>
- <span data-ttu-id="500b1-108">販売注文または在庫の移管指示における **倉庫へのリリース** コマンド</span><span class="sxs-lookup"><span data-stu-id="500b1-108">The **Release to warehouse** command in a sales order or transfer order</span></span>
- <span data-ttu-id="500b1-109">**倉庫へのリリース** 専用ページ</span><span class="sxs-lookup"><span data-stu-id="500b1-109">The dedicated **Release to warehouse** page</span></span>
- <span data-ttu-id="500b1-110">**積荷計画ワークベンチ** ページ上の **倉庫へのリリース** コマンド</span><span class="sxs-lookup"><span data-stu-id="500b1-110">The **Release to warehouse** command on the **Load planning workbench** page</span></span>
- <span data-ttu-id="500b1-111">**出荷の連結** と **出荷の連結ワークベンチ** ページ上での出荷の手動連結</span><span class="sxs-lookup"><span data-stu-id="500b1-111">The manual consolidation of shipments on the **Consolidate shipments** and **Shipment consolidation workbench** pages</span></span>

<span data-ttu-id="500b1-112">出荷連結ポリシーが導入される前は、この連結機能は、倉庫レベルの設定メニューに存在していました。</span><span class="sxs-lookup"><span data-stu-id="500b1-112">Before shipment consolidation policies were introduced, the consolidation function existed as a setting at the warehouse level.</span></span> <span data-ttu-id="500b1-113">倉庫が処理するあらゆる注文に対する連結要件の区別が困難な状態でした。</span><span class="sxs-lookup"><span data-stu-id="500b1-113">All orders for all customers from a single warehouse were treated as though they had the same consolidation requirements.</span></span> <span data-ttu-id="500b1-114">出荷連結ポリシーでは、組織によって異なる出荷連結要件を運用するシナリオに対応しています。</span><span class="sxs-lookup"><span data-stu-id="500b1-114">Shipment consolidation policies add support for scenarios where different organizations have different requirements for shipment consolidation.</span></span>

<span data-ttu-id="500b1-115">クエリは、適用される出荷統合ポリシーを特定するために使用され、編集可能な一連のフィールドによって、出荷レベルでの積荷ラインのグループ化が決定されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-115">Queries are used to identify the shipment consolidation policy that applies, and then an editable set of fields determines how the load lines are grouped at the shipment level.</span></span> <span data-ttu-id="500b1-116">(このパターンは、ウェーブのテンプレートが従うパターンと共通しています) また、**既存の出荷を含む連結**  オプションが各ポリシーに追加されました。</span><span class="sxs-lookup"><span data-stu-id="500b1-116">(This pattern resembles the pattern that wave templates follow.) In addition, a **Consolidate with existing shipments** option has been added to each policy.</span></span> <span data-ttu-id="500b1-117">このオプションをオンにすると、*倉庫へのリリース* の手順では、同じ連結ポリシーに基づいて作成された既存の出荷の中から連結対象の出荷を検索して、連結対象の出荷を検出します。</span><span class="sxs-lookup"><span data-stu-id="500b1-117">When this option is turned on, the *Release to warehouse* procedure finds shipments for consolidation by searching among existing shipments that were created based on the same consolidation policy.</span></span> <span data-ttu-id="500b1-118">この場合、システムは新規出荷を作成するのではなく、既存の出荷または積荷を選択します。</span><span class="sxs-lookup"><span data-stu-id="500b1-118">In this case, the system will select an existing shipment or load instead of creating a new one.</span></span> <span data-ttu-id="500b1-119">ただし、システムでは、*未処理* 状態の既存の出荷のみを連結し、*リリース済* または "高" の状態となっているウェーブ リリースに属する出荷は、連結の対象とはなりません。</span><span class="sxs-lookup"><span data-stu-id="500b1-119">However, the system will only consolidate with existing shipments that have a status of *Open*; shipments that belong to a wave release with a status of *Released* or higher won't be considered as targets for consolidation.</span></span>

<span data-ttu-id="500b1-120">出荷の連結ポリシーを有効化すると、 これまで **倉庫** の設定ページで選択可能となっていた、**倉庫にリリースされた出荷を連結する** の設定が非表示になります。</span><span class="sxs-lookup"><span data-stu-id="500b1-120">When shipment consolidation policies are made available, the **Consolidate shipment at release to warehouse** setting that was previously available on the **Warehouses** setup page is hidden.</span></span> <span data-ttu-id="500b1-121">新たな出荷連結機能への移行を簡易化する目的で、**出荷連結ポリシー** ページの機能によって、既存の倉庫の古い設定を自動的に含む既定のポリシーが作成されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-121">To help you transition to the new shipment consolidation feature, a function on the **Shipment consolidation policies** page creates a default policy that automatically includes the old setting for existing warehouses.</span></span> <span data-ttu-id="500b1-122">既定のポリシーが作成されると、 **在庫** の設定ページ内の **倉庫にリリースされた出荷を連結する** 設定が反映されなくなります。</span><span class="sxs-lookup"><span data-stu-id="500b1-122">After that default policy is created, the **Consolidate shipment at release to warehouse** setting on the **Warehouses** setup page will no longer be considered.</span></span>

<span data-ttu-id="500b1-123">**倉庫へのリリース** ページを使用すると、フルフィルメント ポリシーを上書きするのと同じ方法で、該当する連結ポリシーを手動で上書きできます。</span><span class="sxs-lookup"><span data-stu-id="500b1-123">You can use the **Release to warehouse** page to manually override the applicable consolidation policy in the same way that you can override fulfillment policies.</span></span>

<span data-ttu-id="500b1-124">**積荷計画ワークベンチ** ページの **リリース \>倉庫へのリリース** コマンドを使用することで、倉庫へのリリースを行う前に、販売注文と在庫移動指示明細に基づいて出荷積荷を作成することができます。</span><span class="sxs-lookup"><span data-stu-id="500b1-124">You can use the **Release \> Release to warehouse** command on the **Load planning workbench** page to build outbound loads that are based on sales order and transfer order lines before you do the release to the warehouse.</span></span> <span data-ttu-id="500b1-125">これらの積荷は、出荷ポリシーの連結と共に導入されたものと同じ連結ロジックを使用しています。</span><span class="sxs-lookup"><span data-stu-id="500b1-125">These loads use the same consolidation logic that was introduced together with the consolidation of shipment policies.</span></span>

<span data-ttu-id="500b1-126">**出荷連結ワークベンチ** ページを使用して、既に倉庫にリリースされている未確定の既存の出荷を連結することができます。</span><span class="sxs-lookup"><span data-stu-id="500b1-126">You can use the **Shipment consolidation workbench** page to consolidate existing shipments that haven't yet been confirmed but have already been released to the warehouse.</span></span> <span data-ttu-id="500b1-127">この機能は、独自の出荷連結を含む自動リリースプロセスが1日に複数回実行されるケースで、かつ確認プロセス中に運送業者への出荷完了前に、追加の連結が手動で識別される可能性があるシナリオに対応します。</span><span class="sxs-lookup"><span data-stu-id="500b1-127">This functionality supports scenarios where the automated release process, which has its own shipment consolidation, is run multiple times a day, but potential additional consolidations are manually identified before the shipment to carriers is completed during the confirmation process.</span></span> <span data-ttu-id="500b1-128">この機能を使用すると、販売注文または在庫移動指示明細から作成された出荷積荷を、倉庫にリリースされてから出荷が確定する前の任意のタイミングでまとめて出荷することができます。</span><span class="sxs-lookup"><span data-stu-id="500b1-128">This functionality lets you consolidate outbound shipments that are created from sales order or transfer order lines at any time after the shipments are released to the warehouse but before they are confirmed.</span></span>

<span data-ttu-id="500b1-129">**出荷統合ワークベンチ** ページでは、複数の出荷を同時に評価して、特定の出荷に非連結注文を割り当てることができる積荷構築ワークベンチと同様に機能します。</span><span class="sxs-lookup"><span data-stu-id="500b1-129">The **Shipment consolidation workbench** page works like the load building workbench, where you can assess multiple shipments at the same time and assign a non-consolidated order to a specific shipment.</span></span> <span data-ttu-id="500b1-130">出荷連結テンプレートを適用して、提案された連結を複数回評価して確認することができます。</span><span class="sxs-lookup"><span data-stu-id="500b1-130">You can apply shipment consolidation templates to assess proposed consolidations multiple times and confirm them.</span></span> <span data-ttu-id="500b1-131">一部のルールは、許可されていない連結を防止し、エラーの発生を警告する目的で使用されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-131">Some rules are implemented to prevent unauthorized consolidation and to warn you about possible errors.</span></span>

## <a name="overview-of-new-functionality"></a><span data-ttu-id="500b1-132">新しい機能の概要</span><span class="sxs-lookup"><span data-stu-id="500b1-132">Overview of new functionality</span></span>

<span data-ttu-id="500b1-133">このセクションでは、*出荷連結ポリシー* 機能を有効化して使用する際に変更あるいは追加される、ページ、コマンド、機能について説明します。</span><span class="sxs-lookup"><span data-stu-id="500b1-133">This section describes the pages, commands, and features that are changed or added when you turn on and use the *Shipment consolidation policies* feature.</span></span>

### <a name="shipment-consolidation-policies-page"></a><span data-ttu-id="500b1-134">出荷連結方針のページ</span><span class="sxs-lookup"><span data-stu-id="500b1-134">Shipment consolidation policies page</span></span>

<span data-ttu-id="500b1-135">ポリシーは、作業指示のタイプ別に区別されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-135">Policies are differentiated by work order type.</span></span> <span data-ttu-id="500b1-136">**販売注文** のタイプは _販売注文_ の出荷を表し、**在庫の移管指示** のタイプは _移管の発令_ の出荷を表します。</span><span class="sxs-lookup"><span data-stu-id="500b1-136">The **Sales orders** type represents _Sales order_ shipments, and the **Transfer orders** type represents _Transfer issue_ shipments.</span></span>

<span data-ttu-id="500b1-137">すべての出荷連結ポリシーには、適用のタイミングを定義するクエリと、実行順序を決定するシーケンス番号があります。</span><span class="sxs-lookup"><span data-stu-id="500b1-137">Every shipment consolidation policy has a query that defines when it's applied and a sequence number that determines the execution order.</span></span> <span data-ttu-id="500b1-138">連結は、選択したフィールドの一意の組み合わせごとに適用されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-138">Consolidation is applied for each unique combination of the selected fields.</span></span> <span data-ttu-id="500b1-139">追加されたパラメータは、既存の (オープンな) 出荷との連結に使用されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-139">An additional parameter that is provided is used for consolidation with existing (open) shipments.</span></span> <span data-ttu-id="500b1-140">このポリシーは、ウェーブ処理の前に新規出荷が作成されるたびに評価され、適用されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-140">The policies are evaluated and applied every time that a new shipment is created (before wave processing).</span></span>

<span data-ttu-id="500b1-141">ポリシーに必須のフィールドがない場合、または禁止されているフィールドが含まれている場合、そのポリシーは **選択済** セクションで [無効] としてマークされ ます。</span><span class="sxs-lookup"><span data-stu-id="500b1-141">If a policy is missing any mandatory fields, or if it includes any prohibited fields, the policy is marked as not valid in the **Selected** section.</span></span> <span data-ttu-id="500b1-142">必須フィールドと禁止フィールドの一覧はハードコーディングされており、拡張することができます。</span><span class="sxs-lookup"><span data-stu-id="500b1-142">The lists of mandatory and prohibited fields are hard-coded and can be extended.</span></span>

<span data-ttu-id="500b1-143">以下のリストに、必須のフィールドを示します。</span><span class="sxs-lookup"><span data-stu-id="500b1-143">The following list shows the mandatory fields.</span></span> <span data-ttu-id="500b1-144">出荷は常にこれらのフィールドに基づいて分割されるため、これらフィールドに異なる値を持つ複数の出荷をグループ化することはできません。</span><span class="sxs-lookup"><span data-stu-id="500b1-144">Because shipments are always split based on these fields, you can't group multiple shipments that have different values for these fields.</span></span>

- <span data-ttu-id="500b1-145">販売注文用:</span><span class="sxs-lookup"><span data-stu-id="500b1-145">For sales orders:</span></span>

    - <span data-ttu-id="500b1-146">**アカウント番号 :**_WHSShipmentTable.AccountNum_</span><span class="sxs-lookup"><span data-stu-id="500b1-146">**Account number:** _WHSShipmentTable.AccountNum_</span></span>
    - <span data-ttu-id="500b1-147">**配送の受取人 :**_WHSShipmentTable.DeliveryName_</span><span class="sxs-lookup"><span data-stu-id="500b1-147">**Delivery recipient:** _WHSShipmentTable.DeliveryName_</span></span>
    - <span data-ttu-id="500b1-148">**住所 (RecId) :**_WHSShipmentTable.DeliveryPostalAddress_</span><span class="sxs-lookup"><span data-stu-id="500b1-148">**Postal address (RecId):** _WHSShipmentTable.DeliveryPostalAddress_</span></span>
    - <span data-ttu-id="500b1-149">**倉庫 :**_WHSShipmentTable.InventLocationId_</span><span class="sxs-lookup"><span data-stu-id="500b1-149">**Warehouse:** _WHSShipmentTable.InventLocationId_</span></span>

- <span data-ttu-id="500b1-150">在庫の移管指示:</span><span class="sxs-lookup"><span data-stu-id="500b1-150">For transfer orders:</span></span>

    - <span data-ttu-id="500b1-151">**起点倉庫 :**_InventTransferTable.InventLocationIdFrom_</span><span class="sxs-lookup"><span data-stu-id="500b1-151">**From warehouse:** _InventTransferTable.InventLocationIdFrom_</span></span>
    - <span data-ttu-id="500b1-152">**宛先倉庫 :**_InventTransferTable.InventLocationIdTo_</span><span class="sxs-lookup"><span data-stu-id="500b1-152">**To warehouse:** _InventTransferTable.InventLocationIdTo_</span></span>

<span data-ttu-id="500b1-153">以下のフィールドは、ドキュメント タイプによっては使用できない場合があります。</span><span class="sxs-lookup"><span data-stu-id="500b1-153">The following fields are unavailable for all document types.</span></span> <span data-ttu-id="500b1-154">以下のフィールドはユーザー インターフェイス (UI) 上には表示されず、また、連結に使用することもできません。</span><span class="sxs-lookup"><span data-stu-id="500b1-154">These fields aren't visible in the user interface (UI), and they can't be used for consolidation.</span></span>

- <span data-ttu-id="500b1-155">**出荷ID :**_WHSShipmentTable.ShipmentId_</span><span class="sxs-lookup"><span data-stu-id="500b1-155">**Shipment ID:** _WHSShipmentTable.ShipmentId_</span></span>
- <span data-ttu-id="500b1-156">**状態 :**_WHSShipmentTable.ShipmentStatus_</span><span class="sxs-lookup"><span data-stu-id="500b1-156">**Status:** _WHSShipmentTable.ShipmentStatus_</span></span>
- <span data-ttu-id="500b1-157">**出荷連結ポリシー :**_WHSShipmentTable.ShipConsolidationPolicyName_</span><span class="sxs-lookup"><span data-stu-id="500b1-157">**Shipment consolidation policy:** _WHSShipmentTable.ShipConsolidationPolicyName_</span></span>
- <span data-ttu-id="500b1-158">**作業トランザクション タイプ :**_WHSShipmentTable.WorkTransType_</span><span class="sxs-lookup"><span data-stu-id="500b1-158">**Work transaction type:** _WHSShipmentTable.WorkTransType_</span></span>
- <span data-ttu-id="500b1-159">**ウェーブ ID :**_WHSShipmentTable.WaveId_</span><span class="sxs-lookup"><span data-stu-id="500b1-159">**Wave ID:** _WHSShipmentTable.WaveId_</span></span>
- <span data-ttu-id="500b1-160">**積荷 ID :**_WHSShipmentTable.LoadId_</span><span class="sxs-lookup"><span data-stu-id="500b1-160">**Load ID:** _WHSShipmentTable.LoadId_</span></span>
- <span data-ttu-id="500b1-161">**出荷 ID :**_WHSLoadLine.ShipmentId_</span><span class="sxs-lookup"><span data-stu-id="500b1-161">**Shipment ID:** _WHSLoadLine.ShipmentId_</span></span>
- <span data-ttu-id="500b1-162">**積荷 ID :**_WHSLoadLine.LoadId_</span><span class="sxs-lookup"><span data-stu-id="500b1-162">**Load ID:** _WHSLoadLine.LoadId_</span></span>

<span data-ttu-id="500b1-163">既定では、ポリシーを作成すると、一連の必須フィールドが連結フィールドとして使用されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-163">By default, when you create a policy, the set of mandatory fields is used as the consolidation fields.</span></span> <span data-ttu-id="500b1-164">ただし、一覧を変更するには、左方向ボタンや右方向キーを使用してください。</span><span class="sxs-lookup"><span data-stu-id="500b1-164">However, you can modify the list by using left arrow and right arrow buttons.</span></span> <span data-ttu-id="500b1-165">(このプロセスは、ウェーブのテンプレートでメソッドを選択するプロセスと共通しています)</span><span class="sxs-lookup"><span data-stu-id="500b1-165">(The process resembles the process for selecting methods in wave templates.)</span></span>

<span data-ttu-id="500b1-166">これらのフィールドに対してユーザーが選択した値は、新たに作成されたすべての出荷に対して使用されるか、これらの出荷との連結時に既存の出荷に追加されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-166">The values that users select for these fields will be used for all newly created shipments, or they will be added to existing shipments during consolidation with those shipments.</span></span> <span data-ttu-id="500b1-167">2 つの出荷が、それら出荷の連結を目的として選択されたフィールドで同じ値を持っている場合、その出荷は連結されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-167">When two shipments have the same value for a field that is selected for consolidation of those shipments, the shipments are consolidated.</span></span> <span data-ttu-id="500b1-168">選択されたすべての連結フィールドにこれと同じ原則が適用されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-168">The same principle applies for all subsequent consolidation fields that are selected.</span></span> <span data-ttu-id="500b1-169">値が異なる場合は、2つ目の出荷が破棄され、新たな出荷に対して選択されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-169">If the values differ, the second shipment is discarded and will be selected for a new shipment.</span></span> <span data-ttu-id="500b1-170">自動連結のプロセスでは、出荷連結フィールドの値のすべての一意の組み合わせを作成し、続いて関連する組み合わせに出荷を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="500b1-170">The automated consolidation process consists of creating all the unique combinations of values for the shipment consolidation fields and then assigning a shipment to the relevant combination.</span></span>

<span data-ttu-id="500b1-171">連結のプロセスでは、未選択のフィールドは無視されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-171">Unselected fields are ignored during the consolidation process.</span></span> <span data-ttu-id="500b1-172">2つの出荷で選択したフィールドの値が異なる場合、フィールドはクリアされます (空白になります)。</span><span class="sxs-lookup"><span data-stu-id="500b1-172">If two shipments have different values for an unselected field, the field is cleared (that is, it's set to blank).</span></span> <span data-ttu-id="500b1-173">選択されていないフィールドに対して両方の出荷の値が同じ場合、このフィールドには値が入力されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-173">If both shipments have the same value for an unselected field, the field is filled in.</span></span>

<span data-ttu-id="500b1-174">連結フィールドの一覧 (値が異なる場合にクリアされるフィールド) はハードコーディングされています。</span><span class="sxs-lookup"><span data-stu-id="500b1-174">The list of consolidation fields (that is, fields that will be cleared if they have different values) is hard-coded.</span></span> <span data-ttu-id="500b1-175">この一覧には、新たな出荷が作成されたときに販売注文または在庫移動指示明細によって初期化されたすべてのフィールドが含まれます。</span><span class="sxs-lookup"><span data-stu-id="500b1-175">The list contains all fields that are initialized from a sales order or transfer order line when a new shipment is created.</span></span> <span data-ttu-id="500b1-176">つまり、販売注文または在庫移動指示明細によって初期化されないフィールドは、既存の出荷に新たなデータが追加された場合は無視されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-176">In other words, if a field isn't initialized from a sales order or transfer order line, it's ignored when new data is added to an existing shipment.</span></span>

### <a name="release-to-warehouse-page"></a><span data-ttu-id="500b1-177">倉庫へのリリース ページ</span><span class="sxs-lookup"><span data-stu-id="500b1-177">Release to warehouse page</span></span>

- <span data-ttu-id="500b1-178">グリッドの下部にある新規フィールドには、適用された連結ポリシーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-178">A new field in the lower grid shows the consolidation policy that was applied.</span></span>
- <span data-ttu-id="500b1-179">新しいボタンを使用すると、連結ポリシーを手動で選択したり、上書きすることができます。</span><span class="sxs-lookup"><span data-stu-id="500b1-179">A new button lets you manually select and/or override the consolidation policy.</span></span>

### <a name="release-to-warehouse-command-on-the-load-planning-workbench-page"></a><span data-ttu-id="500b1-180">[積荷計画ワークベンチ] ページ上の [倉庫へのリリース] コマンド</span><span class="sxs-lookup"><span data-stu-id="500b1-180">Release to warehouse command on the Load planning workbench page</span></span>

- <span data-ttu-id="500b1-181">適用された連結ポリシーが使用されるようにロジックが調整されました。</span><span class="sxs-lookup"><span data-stu-id="500b1-181">The logic was adjusted so that it uses applied consolidation policies.</span></span>
- <span data-ttu-id="500b1-182">このリリースでは、出荷が1つの積荷内でのみ連結されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="500b1-182">Shipments are now consolidated only within a single load.</span></span>

### <a name="consolidate-shipments-page"></a><span data-ttu-id="500b1-183">出荷の連結ページ</span><span class="sxs-lookup"><span data-stu-id="500b1-183">Consolidate shipments page</span></span>

- <span data-ttu-id="500b1-184">類似性のある出荷 (連結の候補) の検索については、出荷連結ポリシーで選択されたフィールドを使用するように変更されました。</span><span class="sxs-lookup"><span data-stu-id="500b1-184">The search for similar shipments (that is, candidates for consolidation) was changed so that it uses fields that are selected in the shipment consolidation policy.</span></span>
- <span data-ttu-id="500b1-185">出荷ごとに値が異なるフィールドには、空白が設定されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-185">Fields that have different values in different shipments are now set to blank.</span></span> <span data-ttu-id="500b1-186">(これまでは、選択された "基本" 出荷の値が使用されていました。)</span><span class="sxs-lookup"><span data-stu-id="500b1-186">(Previously, the values from the selected "base" shipment were used.)</span></span>

### <a name="shipment-consolidation-workbench-page"></a><span data-ttu-id="500b1-187">出荷連結ワークベンチのページ</span><span class="sxs-lookup"><span data-stu-id="500b1-187">Shipment consolidation workbench page</span></span>

- <span data-ttu-id="500b1-188">新しい機能では、手動による連結のプロセスをより大きな規模で繰り返すことができます。</span><span class="sxs-lookup"><span data-stu-id="500b1-188">New functionality replicates the process of manual consolidation on a larger scale.</span></span>
- <span data-ttu-id="500b1-189">このリリースでは、このページを **倉庫管理** モジュールの **倉庫へのリリース** メニューから開くことができます。</span><span class="sxs-lookup"><span data-stu-id="500b1-189">You can now open this page from the **Release to warehouse** menu in the **Warehouse management** module.</span></span>
- <span data-ttu-id="500b1-190">このアルゴリズムは、未出荷の既存の出荷を分析します。</span><span class="sxs-lookup"><span data-stu-id="500b1-190">The algorithm analyzes existing shipments that haven't yet been shipped.</span></span> <span data-ttu-id="500b1-191">続いて、連結ポリシーで選択されたフィールドに基づいて連結を提案します。</span><span class="sxs-lookup"><span data-stu-id="500b1-191">It then proposes consolidation, based on fields that are selected in the consolidation policies.</span></span>

## <a name="comparison-of-functionality"></a><span data-ttu-id="500b1-192">機能の比較</span><span class="sxs-lookup"><span data-stu-id="500b1-192">Comparison of functionality</span></span>

<span data-ttu-id="500b1-193">以下の表では、出荷連結ポリシーを使用していない場合、あるいは使用する場合に、出荷連結がどのように機能するかをまとめています。</span><span class="sxs-lookup"><span data-stu-id="500b1-193">The following table summarizes how shipment consolidation works when you don't use shipment consolidation policies and when you do use them.</span></span>

| <span data-ttu-id="500b1-194">出荷連結方針を使用しない</span><span class="sxs-lookup"><span data-stu-id="500b1-194">Without shipment consolidation policies</span></span> | <span data-ttu-id="500b1-195">出荷連結方針を使用する</span><span class="sxs-lookup"><span data-stu-id="500b1-195">With shipment consolidation policies</span></span> |
|---|----|
| <span data-ttu-id="500b1-196">該当なし</span><span class="sxs-lookup"><span data-stu-id="500b1-196">Not applicable</span></span> | <span data-ttu-id="500b1-197">連結対象として選択されている販売注文または在庫移動指示の出荷は、作成される出荷と同一の連結ポリシーを使用するか、または、オープン出荷に割り当てられている必要があります(**既存の出荷と連結** オプションがオンになっている場合)。</span><span class="sxs-lookup"><span data-stu-id="500b1-197">Sales or transfer shipments that are selected for consolidation must have the same consolidation policy as the shipment that is being created, or they must be assigned to an open shipment (when the **Consolidate with existing shipments** option is turned on).</span></span> |
| <span data-ttu-id="500b1-198">*倉庫へのリリース* の手順では、既存の出荷を検索して連結の対象とする出荷を検索することはできません。</span><span class="sxs-lookup"><span data-stu-id="500b1-198">The *Release to warehouse* procedure doesn't search among existing shipments to find a shipment for consolidation.</span></span> <span data-ttu-id="500b1-199">*倉庫へのリリース* の手順では、現行のインスタンスが作成した出荷のみが、連結に使用する出荷の検索に使用することができます。</span><span class="sxs-lookup"><span data-stu-id="500b1-199">Only shipments that are created by a current instance of the *Release to warehouse* procedure are used to find a shipment for consolidation.</span></span> | <span data-ttu-id="500b1-200">現在使用されている連結ポリシーで **既存の出荷と連結** オプションがオンになっている場合、*倉庫へのリリース* の手順では、同じ連結ポリシーに基づいて作成された既存の出荷の中から連結対象の出荷を検索して、連結対象の出荷を検出します。</span><span class="sxs-lookup"><span data-stu-id="500b1-200">If the **Consolidate with existing shipments** option is turned on for a consolidation policy that is currently being used, the *Release to warehouse* procedure searches among existing shipments that were created based on the same consolidation policy to find a shipment for consolidation.</span></span> <span data-ttu-id="500b1-201">そのため、2つのポリシーが存在する場合、ポリシー 2 に基づいて作成された出荷は、ポリシー 1 に基づいて作成された出荷とは連結されません。</span><span class="sxs-lookup"><span data-stu-id="500b1-201">Therefore, if you have two policies, a shipment that is being created based on policy 2 will never be consolidated with a shipment that was created based on policy 1.</span></span> |
| <span data-ttu-id="500b1-202">該当なし</span><span class="sxs-lookup"><span data-stu-id="500b1-202">Not applicable</span></span> | <span data-ttu-id="500b1-203">連結ポリシー フィールドの一覧が空の場合、またはポリシーが見つからない場合は、販売注文または在庫移動指示明細ごとに新たな出荷が作成されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-203">If a list of consolidation policy fields is empty, or if a policy can't be found, a new shipment is created for each sales order or transfer order line.</span></span> |
| <span data-ttu-id="500b1-204">以下の連結フィールドは、 *在庫移動明細* の出荷の連結に使用される固有の値の組み合わせを定義しています。</span><span class="sxs-lookup"><span data-stu-id="500b1-204">The following consolidation field defines the unique combination of values that is used to consolidate shipments for a *transfer line*.</span></span> <span data-ttu-id="500b1-205">(ここに記載されていないすべてのフィールドは無視されます)</span><span class="sxs-lookup"><span data-stu-id="500b1-205">(All other fields are ignored.)</span></span><ul><li><span data-ttu-id="500b1-206">注文番号 (OrderNum)</span><span class="sxs-lookup"><span data-stu-id="500b1-206">Order number (OrderNum)</span></span></li></ul> | <span data-ttu-id="500b1-207">以下の連結フィールドは、 *在庫移動明細* の出荷の連結に使用される固有の値の組み合わせを定義しています。</span><span class="sxs-lookup"><span data-stu-id="500b1-207">The following consolidation fields define the unique combination of values that is used to consolidate shipments for a *transfer line*.</span></span> <span data-ttu-id="500b1-208">(ここに記載されていないすべてのフィールドは無視されます)</span><span class="sxs-lookup"><span data-stu-id="500b1-208">(All other fields are ignored.)</span></span><ul><li><span data-ttu-id="500b1-209">注文番号 (OrderNum)</span><span class="sxs-lookup"><span data-stu-id="500b1-209">Order number (OrderNum)</span></span></li><li><span data-ttu-id="500b1-210">配送先の受取人 (DeliveryName)</span><span class="sxs-lookup"><span data-stu-id="500b1-210">Delivery recipient (DeliveryName)</span></span></li><li><span data-ttu-id="500b1-211">配送先住所 (DeliveryPostalAddress)</span><span class="sxs-lookup"><span data-stu-id="500b1-211">Postal address (DeliveryPostalAddress)</span></span></li><li><span data-ttu-id="500b1-212">ISO 国 コード (CountryRegionISOCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-212">ISO country code (CountryRegionISOCode)</span></span></li><li><span data-ttu-id="500b1-213">住所 (Address)</span><span class="sxs-lookup"><span data-stu-id="500b1-213">Address (Address)</span></span></li><li><span data-ttu-id="500b1-214">サイト (InventSiteId)</span><span class="sxs-lookup"><span data-stu-id="500b1-214">Site (InventSiteId)</span></span></li><li><span data-ttu-id="500b1-215">倉庫 (InventLocationId)</span><span class="sxs-lookup"><span data-stu-id="500b1-215">Warehouse (InventLocationId)</span></span></li><li><span data-ttu-id="500b1-216">配送業者 (CarrierCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-216">Shipping carrier (CarrierCode)</span></span></li><li><span data-ttu-id="500b1-217">配送業者サービス (CarrierServiceCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-217">Carrier service (CarrierServiceCode)</span></span></li><li><span data-ttu-id="500b1-218">配送方法 (ModeCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-218">Mode of delivery (ModeCode)</span></span></li><li><span data-ttu-id="500b1-219">配送業者グループ (CarrierGroupCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-219">Carrier group (CarrierGroupCode)</span></span></li><li><span data-ttu-id="500b1-220">配送条件 (DlvTermId)</span><span class="sxs-lookup"><span data-stu-id="500b1-220">Delivery terms (DlvTermId)</span></span></li></ul><span data-ttu-id="500b1-221">これらのフィールドは、新たな出荷を作成する際に使用可能となり、初期化される唯一のフィールドです。</span><span class="sxs-lookup"><span data-stu-id="500b1-221">These fields are the only fields that are available and initialized when a new shipment is created.</span></span> |
| <span data-ttu-id="500b1-222">以下の連結フィールドは、 *販売明細* の出荷の連結に使用される固有の値の組み合わせを定義しています。</span><span class="sxs-lookup"><span data-stu-id="500b1-222">The following consolidation fields define the unique combination of values that is used to consolidate shipments for a *sales line*.</span></span> <span data-ttu-id="500b1-223">(ここに記載されていないすべてのフィールドは無視されます)</span><span class="sxs-lookup"><span data-stu-id="500b1-223">(All other fields are ignored.)</span></span><ul><li><span data-ttu-id="500b1-224">注文番号 (OrderNum)</span><span class="sxs-lookup"><span data-stu-id="500b1-224">Order number (OrderNum)</span></span></li><li><span data-ttu-id="500b1-225">顧客の参照情報 (CustomerRef)</span><span class="sxs-lookup"><span data-stu-id="500b1-225">Customer reference (CustomerRef)</span></span></li><li><span data-ttu-id="500b1-226">顧客要件 (CustomerReq)</span><span class="sxs-lookup"><span data-stu-id="500b1-226">Customer requisition (CustomerReq)</span></span></li><li><span data-ttu-id="500b1-227">配送条件 (DlvTermId)</span><span class="sxs-lookup"><span data-stu-id="500b1-227">Delivery terms (DlvTermId)</span></span></li></ul> | <span data-ttu-id="500b1-228">以下の連結フィールドは、 *販売明細* の出荷の連結に使用される固有の値の組み合わせを定義しています。</span><span class="sxs-lookup"><span data-stu-id="500b1-228">The following consolidation fields define the unique combination of values that is used to consolidate shipments for a *sales line*.</span></span> <span data-ttu-id="500b1-229">(ここに記載されていないすべてのフィールドは無視されます)</span><span class="sxs-lookup"><span data-stu-id="500b1-229">(All other fields are ignored.)</span></span><ul><li><span data-ttu-id="500b1-230">注文番号 (OrderNum)</span><span class="sxs-lookup"><span data-stu-id="500b1-230">Order number (OrderNum)</span></span></li><li><span data-ttu-id="500b1-231">アカウント番号 (AccountNum)</span><span class="sxs-lookup"><span data-stu-id="500b1-231">Account number (AccountNum)</span></span></li><li><span data-ttu-id="500b1-232">配送先の受取人 (DeliveryName)</span><span class="sxs-lookup"><span data-stu-id="500b1-232">Delivery recipient (DeliveryName)</span></span></li><li><span data-ttu-id="500b1-233">配送先住所 (DeliveryPostalAddress)</span><span class="sxs-lookup"><span data-stu-id="500b1-233">Postal address (DeliveryPostalAddress)</span></span></li><li><span data-ttu-id="500b1-234">ISO 国 コード (CountryRegionISOCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-234">ISO country code (CountryRegionISOCode)</span></span></li><li><span data-ttu-id="500b1-235">住所 (Address)</span><span class="sxs-lookup"><span data-stu-id="500b1-235">Address (Address)</span></span></li><li><span data-ttu-id="500b1-236">サイト (InventSiteId)</span><span class="sxs-lookup"><span data-stu-id="500b1-236">Site (InventSiteId)</span></span></li><li><span data-ttu-id="500b1-237">倉庫 (InventLocationId)</span><span class="sxs-lookup"><span data-stu-id="500b1-237">Warehouse (InventLocationId)</span></span></li><li><span data-ttu-id="500b1-238">配送業者 (CarrierCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-238">Shipping carrier (CarrierCode)</span></span></li><li><span data-ttu-id="500b1-239">配送業者サービス (CarrierServiceCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-239">Carrier service (CarrierServiceCode)</span></span></li><li><span data-ttu-id="500b1-240">配送方法 (ModeCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-240">Mode of delivery (ModeCode)</span></span></li><li><span data-ttu-id="500b1-241">配送業者グループ (CarrierGroupCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-241">Carrier group (CarrierGroupCode)</span></span></li><li><span data-ttu-id="500b1-242">ブローカー ID (BrokerCode)</span><span class="sxs-lookup"><span data-stu-id="500b1-242">Broker ID (BrokerCode)</span></span></li><li><span data-ttu-id="500b1-243">指示 (LoadDirection)</span><span class="sxs-lookup"><span data-stu-id="500b1-243">Direction (LoadDirection)</span></span></li><li><span data-ttu-id="500b1-244">配送条件 (DlvTermId)</span><span class="sxs-lookup"><span data-stu-id="500b1-244">Delivery terms (DlvTermId)</span></span></li><li><span data-ttu-id="500b1-245">顧客の参照情報 (CustomerRef)</span><span class="sxs-lookup"><span data-stu-id="500b1-245">Customer reference (CustomerRef)</span></span></li><li><span data-ttu-id="500b1-246">顧客要件 (CustomerReq)</span><span class="sxs-lookup"><span data-stu-id="500b1-246">Customer requisition (CustomerReq)</span></span></li></ul><span data-ttu-id="500b1-247">これらのフィールドは、新たな出荷を作成する際に使用可能となり、初期化される唯一のフィールドです。</span><span class="sxs-lookup"><span data-stu-id="500b1-247">These fields are the only fields that are available and initialized when a new shipment is created.</span></span> |
| <span data-ttu-id="500b1-248">該当なし</span><span class="sxs-lookup"><span data-stu-id="500b1-248">Not applicable</span></span> | <span data-ttu-id="500b1-249">*販売明細* では次の連結フィールドが必須となっており、削除することはできません。</span><span class="sxs-lookup"><span data-stu-id="500b1-249">The following consolidation fields are mandatory for a *sales line* and can't be removed:</span></span><ul><li><span data-ttu-id="500b1-250">アカウント番号 (AccountNum)</span><span class="sxs-lookup"><span data-stu-id="500b1-250">Account number (AccountNum)</span></span></li><li><span data-ttu-id="500b1-251">配送先の受取人 (DeliveryName)</span><span class="sxs-lookup"><span data-stu-id="500b1-251">Delivery recipient (DeliveryName)</span></span></li><li><span data-ttu-id="500b1-252">配送先住所 (DeliveryPostalAddress)</span><span class="sxs-lookup"><span data-stu-id="500b1-252">Postal address (DeliveryPostalAddress)</span></span></li><li><span data-ttu-id="500b1-253">倉庫 (InventLocationId)</span><span class="sxs-lookup"><span data-stu-id="500b1-253">Warehouse (InventLocationId)</span></span></li></ul><span data-ttu-id="500b1-254">既定では、これらのフィールドは、新しいポリシーが作成される際に割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="500b1-254">By default, these fields will be assigned when a new policy is created.</span></span> <span data-ttu-id="500b1-255">これらを削除することはできません。</span><span class="sxs-lookup"><span data-stu-id="500b1-255">They can't be removed.</span></span> |
| <span data-ttu-id="500b1-256">**積荷計画ワークベンチ** ページの *倉庫の積荷のリリース* を使用すると、出荷とウェーブを作成する独立したコードが使用されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-256">The *Release of loads to warehouse* procedure on the **Load planning workbench** page uses its own separate code to create shipments and waves.</span></span> | <span data-ttu-id="500b1-257">連結の評価がされるフィールドの決定には、出荷連結ポリシーが適用されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-257">Shipment consolidation policies are applied to determine which fields should be evaluated for consolidation.</span></span> <span data-ttu-id="500b1-258">出荷は1つの積荷内でのみ連結されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-258">Shipments are consolidated only within a single load.</span></span> |
| <span data-ttu-id="500b1-259">**すべての出荷** ページで **出荷の連結** を手動で選択し、続いて対象の "基本" の出荷を選択します。</span><span class="sxs-lookup"><span data-stu-id="500b1-259">You manually select **Consolidate shipments** on the **All shipments** page and then select a target "base" shipment.</span></span> <span data-ttu-id="500b1-260">複数のキー フィールドに一致する値を持つ既存の出荷がすべて提案されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-260">The filter will suggest any existing shipments that have matching values for several key fields.</span></span> | <span data-ttu-id="500b1-261">**すべての出荷** ページで **出荷の連結** を手動で選択し、続いて対象の "基本" の出荷を選択します。</span><span class="sxs-lookup"><span data-stu-id="500b1-261">You manually select **Consolidate shipments** on the **All shipments** page and then select a target "base" shipment.</span></span> <span data-ttu-id="500b1-262">システムでは、関連する出荷連結ポリシーに対して構成されているいくつかの主要なフィールドの値を照合することで、既存の出荷を提案します。</span><span class="sxs-lookup"><span data-stu-id="500b1-262">The system will suggest other existing shipments by matching the values of several key fields that are configured for the relevant shipment consolidation policies.</span></span> |
| <span data-ttu-id="500b1-263">**すべての出荷** ページの **出荷の連結** コマンドは、1つの出荷に対してのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="500b1-263">You can use the **Consolidate shipments** command on the **All shipments** page for only a single shipment.</span></span> | <span data-ttu-id="500b1-264">**出荷連ワークベンチ** ページでは、未出荷状態の出荷の組み合わせを簡単に見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="500b1-264">The **Shipment consolidation workbench** page helps you find a set of shipments that aren't yet in a shipped state.</span></span> <span data-ttu-id="500b1-265">これらの出荷は、出荷連結ポリシーで構成されているいくつかのキーフィールドに基づいて分析されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-265">These shipments are analyzed based on several key fields that are configured in your shipment consolidation policies.</span></span> <span data-ttu-id="500b1-266">連結をするにあたっては、これらフィールドの値が一致している出荷が提案されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-266">Any shipments where the values of these fields match are suggested for consolidation.</span></span><p><span data-ttu-id="500b1-267">提案された連結から出荷を削除、追加することによって、手動で連結を管理することも可能です。</span><span class="sxs-lookup"><span data-stu-id="500b1-267">You can manually maintain the consolidation by removing shipments from suggested consolidations and/or by adding shipments to them.</span></span> <span data-ttu-id="500b1-268">いくつかのタイプのエラーが発生する場合がありますが、オーバーライドが可能な場合があります。</span><span class="sxs-lookup"><span data-stu-id="500b1-268">Several types of errors can occur, but you can override some of them.</span></span></p> |
| <span data-ttu-id="500b1-269">**デザイン ノート :** *倉庫間の販売注文の自動リリース* では、販売明細行がグループに分割されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-269">**Design note:** The *Automatic release of sales orders to warehouse* procedure splits sales lines into groups.</span></span> <span data-ttu-id="500b1-270">各グループは、固有の **ReleaseToWarehouseId** 値を持ち、 *倉庫へのリリース* の手順によって個別処理されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-270">Each group has its own unique **ReleaseToWarehouseId** value and is processed separately by the *Release to warehouse* procedure.</span></span> <span data-ttu-id="500b1-271">この手順では、ワーク ブレイクの設定に関わらず、新規作業を作成します。</span><span class="sxs-lookup"><span data-stu-id="500b1-271">This procedure creates new work regardless of the work break setup.</span></span> | <span data-ttu-id="500b1-272">**デザイン ノート :** *販売注文の倉庫への自動リリース* では、同一の **ReleaseToWarehouseId** 値が処理中のすべての販売明細行に割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="500b1-272">**Design note:** The *Automatic release of sales orders to warehouse* procedure assigns the same **ReleaseToWarehouseId** value to all sales lines that are being processed.</span></span> <span data-ttu-id="500b1-273">すべての販売明細行は、*倉庫へのリリース* 手順で同時に処理されます。</span><span class="sxs-lookup"><span data-stu-id="500b1-273">All sales lines are processed by the *Release to warehouse* procedure at the same time.</span></span> <span data-ttu-id="500b1-274">以前の動作を実現するには、出荷 ID ごとにワーク ブレイクを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="500b1-274">To ensure the earlier behavior, you must configure work break per shipment ID.</span></span> |

## <a name="additional-resources"></a><span data-ttu-id="500b1-275">追加リソース</span><span class="sxs-lookup"><span data-stu-id="500b1-275">Additional resources</span></span>

- [<span data-ttu-id="500b1-276">出荷連結ポリシーを構成する</span><span class="sxs-lookup"><span data-stu-id="500b1-276">Configure shipment consolidation policies</span></span>](configure-shipment-consolidation-policies.md)
