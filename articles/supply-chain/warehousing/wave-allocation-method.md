---
title: サイクル配賦
description: このトピックでは、サイクル配賦の手順を設定して構成する方法と、それの並列処理を可能にする方法について説明します。
author: Mirzaab
ms.date: 03/08/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-03-08
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: feee33a7d4ea3f0d9c4d671210293a28aac14f61
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/01/2021
ms.locfileid: "5823170"
---
# <a name="wave-allocation"></a><span data-ttu-id="e03ee-103">サイクル配賦</span><span class="sxs-lookup"><span data-stu-id="e03ee-103">Wave allocation</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="e03ee-104">サイクルの処理は時間がかかる可能性があり、処理時間のほとんどは配賦ステップと作業作成ステップに費やされます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-104">Wave processing can be time consuming, and most of the processing time is spent in the allocation step and in the work creation step.</span></span>

<span data-ttu-id="e03ee-105">これらの各ステップを並列して実行することが可能になりました。これはサイクル処理のパフォーマンスを改善し、同じ倉庫でサイクルのスループットをより大きくすることを可能にします。</span><span class="sxs-lookup"><span data-stu-id="e03ee-105">It is now possible to run each of these steps in parallel, which can improve the performance of the wave processing, and allow for a larger throughput of waves in the same warehouse.</span></span> <span data-ttu-id="e03ee-106">このトピックでは、サイクル配賦手順を並列して実行するために設定する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-106">This topic explains how to set up the wave allocation method to run in parallel.</span></span> <span data-ttu-id="e03ee-107">並列して実行する作業作成の設定方法の詳細については、[サイクル中に作業作成をスケジュールする](configure-wave-schedule-work-creation.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e03ee-107">For more information about how to set up work creation to run in parallel, see [Schedule work creation during wave](configure-wave-schedule-work-creation.md).</span></span>

<span data-ttu-id="e03ee-108">以前は、倉庫につき一度に配賦できるサイクルは 1 つのみでした。</span><span class="sxs-lookup"><span data-stu-id="e03ee-108">Previously it was only possible to allocate one wave at a warehouse at a time.</span></span> <span data-ttu-id="e03ee-109">この制約が削除され、品目と分析コードが予約階層の場所より上にある場所のみをロックする新しい制約に置き換えられました。</span><span class="sxs-lookup"><span data-stu-id="e03ee-109">This constraint has been removed and replaced by a new constraint that only locks the item and dimensions that are above location in the reservation hierarchy.</span></span> <span data-ttu-id="e03ee-110">場所の上の分析コードには、常に製品分析コードが含まれます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-110">Dimensions above the location always include product dimensions.</span></span> <span data-ttu-id="e03ee-111">たとえば、品目が *色* を使用して構成されている場合は、*赤*、*青*、*黄色* はそれぞれバリアントを並列処理できます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-111">For example, if an item is configured using *Color*, then variants for *Red*, *Blue*, and *Yellow* could each be processed in parallel.</span></span>

<span data-ttu-id="e03ee-112">つまり、その場所の上に同じ分析コードを持つ同じ品目を 1 つ多く割り当てると、同じ品目および分析コードに対するロックを取得するまで待つ必要があります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-112">This means that if the same item with the same dimensions above the location is being allocated by one wave, other waves will have to wait to acquire a lock on the same item and dimensions.</span></span> <span data-ttu-id="e03ee-113">ロックを時間的に取得できない場合はエラーが発生し、その場合は処理に失敗します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-113">If the lock can't be acquired in a timely manner, an error will occur and the wave processing will fail.</span></span>

<span data-ttu-id="e03ee-114">並行処理を使用するには、複数のジョブをバッチで実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-114">In order to utilize parallel processing, the wave must run in batch.</span></span>

## <a name="performance-improvements"></a><span data-ttu-id="e03ee-115">パフォーマンスの向上</span><span class="sxs-lookup"><span data-stu-id="e03ee-115">Performance improvements</span></span>

<span data-ttu-id="e03ee-116">並行処理のパフォーマンス上の利点は、次の 2 つのカテゴリに分類されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-116">Performance benefits of parallel processing fall in two categories:</span></span>

- <span data-ttu-id="e03ee-117">**スループットの向上** -  : 並行処理が行なくても、特にサイクル内で品目が重複しない場合など、並行処理でデータが構成されなくても、スループットが向上するのが一般的です。</span><span class="sxs-lookup"><span data-stu-id="e03ee-117">**Improved throughput** - The throughput of waves will typically improve even if parallel processing isn't configured, especially for scenarios where there is no overlap of items within the waves.</span></span>
- <span data-ttu-id="e03ee-118">**単一サイクルの配賦の改善** - 並行配賦に切り替えてから顧客データをテストすることにより、50% 近いパフォーマンスの向上が示されました。</span><span class="sxs-lookup"><span data-stu-id="e03ee-118">**Improvement of the allocation for a single wave** - Testing on customer data has shown a near 50% performance improvement after switching to parallel allocation.</span></span> <span data-ttu-id="e03ee-119">並行処理は場所の上の品目および分析コードごとに行われるので、その改善は 1 つの場所に含まれるさまざまな品目の数、使用可能なインフラストラクチャ、配賦の期間と作業作成の期間に依存します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-119">The parallel processing is done per items and dimensions above the location, so the improvements depend on how many different items a wave contains, the infrastructure available, and the duration of the allocation versus the duration of the work creation.</span></span>

## <a name="configure-parallel-allocation"></a><span data-ttu-id="e03ee-120">並列配賦の構成</span><span class="sxs-lookup"><span data-stu-id="e03ee-120">Configure parallel allocation</span></span>

### <a name="warehouse-management-parameters"></a><span data-ttu-id="e03ee-121">倉庫管理パラメーター</span><span class="sxs-lookup"><span data-stu-id="e03ee-121">Warehouse management parameters</span></span>

<span data-ttu-id="e03ee-122">並行配賦処理を使用するには、**倉庫管理 > 設定 > 倉庫管理パラメータ** に移動して、**サイクル処理** タブを開いて、次の設定を行います。</span><span class="sxs-lookup"><span data-stu-id="e03ee-122">To use parallel allocation processing, go to **Warehouse management > Setup > Warehouse management parameters**, open the **Wave processing** tab, and make the following settings:</span></span>

- <span data-ttu-id="e03ee-123">**サイクル処理バッチ グループ** - サイクルの初期処理で使用するバッチ グループを選択します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-123">**Wave processing batch group** - Select the batch group that the initial processing of the waves should use.</span></span> <span data-ttu-id="e03ee-124">後続の配賦の処理は、異なるバッチ グループを使用して行います。</span><span class="sxs-lookup"><span data-stu-id="e03ee-124">The subsequent processing of allocation can be done using different batch groups.</span></span>
- <span data-ttu-id="e03ee-125">**バッチでサイクルを処理する** - 並行処理を使用するにはこれを *はい* に設定します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-125">**Process waves in batch** - Set this to *Yes* to use parallel processing.</span></span>
- <span data-ttu-id="e03ee-126">**ロックを待機 (ミリ秒)** - 配賦ステップが、他の配賦ステップでロックされたシステム リソースを待機する時間を、ミリ秒単位で入力します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-126">**Wait for lock (ms)** - Enter the time, in milliseconds, that an allocation step will wait for a system resource that is locked by another allocation step.</span></span> <span data-ttu-id="e03ee-127">この時間を超えた場合、ウェーブは処理されず、エラー メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-127">When this time is exceeded, the wave is not processed and an error message is displayed.</span></span> <span data-ttu-id="e03ee-128">1 つの論理ユニットの配賦を終了させるのに、少なくとも数秒を許可することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="e03ee-128">We recommend that you allow at least a few seconds to allow for allocation of one logical unit to finish.</span></span>

<span data-ttu-id="e03ee-129">**倉庫管理パラメータ** ページのこれらのオプションとその他の調整処理オプションの詳細については、[サイクル処理の 倉庫パラメータ](wave-warehouse-parameters.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e03ee-129">For information about these and other wave processing options on the **Warehouse management parameters** page, see [Warehouse parameters for wave processing](wave-warehouse-parameters.md).</span></span>

## <a name="wave-process-methods"></a><span data-ttu-id="e03ee-130">ウェーブのプロセス方法</span><span class="sxs-lookup"><span data-stu-id="e03ee-130">Wave process methods</span></span>

<span data-ttu-id="e03ee-131">並行処理を設定するには、次をおこないます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-131">To set up parallel processing:</span></span>

1. <span data-ttu-id="e03ee-132">**倉庫管理 > 設定 > サイクル > サイクル処理のメソッド** に移動します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-132">Go to **Warehouse Management > Setup > Waves > Wave process methods**.</span></span>
1. <span data-ttu-id="e03ee-133">グリッドで `allocateWave`メソッドを選択します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-133">Select the `allocateWave` method in the grid.</span></span>
1. <span data-ttu-id="e03ee-134">アクション ペインで、**タスクの作成** を選択します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-134">On the Action Pane, select **Task configuration**.</span></span>
1. <span data-ttu-id="e03ee-135">**サイクル投稿メソッドの構成** ページが開きます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-135">The **Wave post method task configuration** page opens.</span></span> <span data-ttu-id="e03ee-136">このグリッドには、`allocateWave` メソッドを構成した各倉庫が一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-136">This grid lists each warehouse where you have configured the `allocateWave` method.</span></span> <span data-ttu-id="e03ee-137">並列処理は、一覧表示されている倉庫に対してのみ使用されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-137">Parallel processing will only be used for warehouses that are listed.</span></span> <span data-ttu-id="e03ee-138">アクション ペインのボタンを使用して、必要に応じて倉庫をグリッドに追加したり、グリッドから倉庫を削除したりします。</span><span class="sxs-lookup"><span data-stu-id="e03ee-138">Use the Action Pane buttons to add or remove warehouses from the grid as needed.</span></span> 
1. <span data-ttu-id="e03ee-139">各倉庫について、次の設定を行います。</span><span class="sxs-lookup"><span data-stu-id="e03ee-139">For each warehouse, make the following settings:</span></span>
    - <span data-ttu-id="e03ee-140">**バッチ タスクの最大数** - 選択した倉庫の配賦に使用するバッチ タスクの数を指定します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-140">**Maximum number of batch tasks** - Specify the number of batch tasks that should be used for the allocation for the selected warehouse.</span></span> <span data-ttu-id="e03ee-141">最適なバッチ タスクの数は、使用可能なインフラストラクチャと、サーバーで処理されている他のバッチ ジョブによって異なります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-141">The optimal number of batch tasks depends on the infrastructure available and what other batch jobs are being processed on the server.</span></span> <span data-ttu-id="e03ee-142">その結果、8 つのタスクを使用して優れた結果が得られた、という 4 つのコア環境でのテストが示されました。</span><span class="sxs-lookup"><span data-stu-id="e03ee-142">Tests done on a four core environment that was dedicated to wave processing showed that using eight tasks produced good results.</span></span>
    - <span data-ttu-id="e03ee-143">**サイクル処理バッチ グループ** - 特定のバッチ グループを複数の倉庫に対して使用すると、配賦処理を倉庫ごとにスケールアウトできます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-143">**Wave processing batch group** - Specific batch groups can be used for different warehouses to allow the allocation processing to scale out per warehouse.</span></span>

## <a name="enable-or-disable-parallelization-across-all-legal-entities"></a><span data-ttu-id="e03ee-144">すべての法人エンティティ間での並列処理の有効化または無効化</span><span class="sxs-lookup"><span data-stu-id="e03ee-144">Enable or disable parallelization across all legal entities</span></span>

<span data-ttu-id="e03ee-145">すべての法人にまたがって並列で実行する `allocateWave` メソッドを設定することをお勧めします。なぜならこのメソッドはサイクル処理のパフォーマンスを改善するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-145">We recommend that you set the `allocateWave` method to run in parallel across all legal entities because this helps to improve the performance of the wave processing.</span></span> <span data-ttu-id="e03ee-146">Supply Chain Management のバージョン 10.0.17 から、新しいインストールおよび更新されたシステムすべてで、*サイクル配賦メソッドのサイクル並列処理* 機能が規定で有効になっていて、再度オフにすることはできません。</span><span class="sxs-lookup"><span data-stu-id="e03ee-146">Starting in Supply Chain Management version 10.0.17, the *Wave parallelization for Allocate Wave method* feature is enabled by default for all new and updated installations, and can't be turned off again.</span></span> <span data-ttu-id="e03ee-147">この機能を有効にすると、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-147">After enabling this feature, the following occurs:</span></span>

- <span data-ttu-id="e03ee-148">この `allocateWave` メソッドが更新され、並行処理の数と同じ、同時に実行されるタスクの数を実行できる **サイクル処理メソッド** ページを使用して、タスク構成設定が含まれます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-148">The `allocateWave` method is updated to include a task configuration setting that lets you use the **Wave process methods** page to define the number of tasks that will run simultaneously, equivalent to the number of parallel processes.</span></span> <span data-ttu-id="e03ee-149">その結果、各工程で使用される時間 (一般に総処理時間の 30% ~ 60%) から、タスクの数と大まかに等しい係数が減らされます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-149">As a result, the time used on the allocate-wave step (which is typically 30% to 60% of the total processing time) is reduced by a factor roughly equivalent to the number of tasks.</span></span> <span data-ttu-id="e03ee-150">これらのタスクを処理するために割り当てられるバッチを選択することもできます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-150">It's also possible to select which batch will be assigned to process these tasks.</span></span> <span data-ttu-id="e03ee-151">すべての法人が、一括してサイクルを処理するように構成される点に注意が必要です。</span><span class="sxs-lookup"><span data-stu-id="e03ee-151">It's important to note that all of your legal entities will be configured to process waves in batch.</span></span> <span data-ttu-id="e03ee-152">既にバッチのサイクル処理をするように構成されている倉庫と、その `allocateWave` メソッドを並列して使用するように構成されている倉庫については、既存の構成が維持されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-152">For the warehouses that are already configured to process waves in batch, and for the warehouses that are already configured to use the `allocateWave` method in parallel, the existing configuration will be kept.</span></span>
- <span data-ttu-id="e03ee-153">既定では、すべての新しい法人がバッチのサイクルを処理するように構成されています。</span><span class="sxs-lookup"><span data-stu-id="e03ee-153">By default, all the new legal entities are configured to process waves in batch.</span></span> <span data-ttu-id="e03ee-154">**倉庫管理プロセス** オプションが有効になっているすべての新しい倉庫に、既定で並列で `allocateWave` メソッドを実行するように構成されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-154">All new warehouses with the **Warehouse management processes** option enabled will have the `allocateWave` method configured to run in parallel by default.</span></span>
- <span data-ttu-id="e03ee-155">**倉庫管理パラメータ** ページジで、**バッチに保存する** が *はい* に設定され、**ロックを待機 (ミリ秒)** が既定の 15 秒に設定されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-155">On the **Warehouse management parameters** page, **Process saves in batch** is set to *Yes* and  **Wait for lock (ms)** set to a default 15 seconds.</span></span> <span data-ttu-id="e03ee-156">つまり、すべてのサイクルがバッチで実行されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-156">This means that all waves will be executed in batch.</span></span> <span data-ttu-id="e03ee-157">実行中のサイクルは、この配賦ステップで品目のロックと位置にある分析コードを取得します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-157">When a wave is running, it acquires a lock on the item and dimensions above location during the allocation step.</span></span> <span data-ttu-id="e03ee-158">他のサイクル処理タスクが同じ特定のレコードのロックを取得しようとすると、現在の処理が終了するまでブロックされます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-158">When another wave processing task tries to acquire the same lock for the identical record, it is blocked until the current process is finished.</span></span> <span data-ttu-id="e03ee-159">**ロックを待機 (ミリ秒)** の設定により、システムがロックがリリースされる前に待機 する最大時間が設定されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-159">The **Wait for lock (ms)** settings establishes the maximum time the system will wait before the lock is released.</span></span>

<span data-ttu-id="e03ee-160">並行配賦処理には、サイクル処理をバッチで実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-160">Parallel allocation processing requires wave processing to run in batch.</span></span> <span data-ttu-id="e03ee-161">そのため、**バッチで保存されたプロセス** 設定をオフにすると、バッチ設定で保存されます。特に、関連するジョブ メソッドのタスク構成で定義された並行処理を使用している場合は、処理がバッチ設定に保存されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-161">Therefore, you will reduce your wave processing performance if you turn off the **Process saves in batch** setting, especially if wave processing is using a parallel process as defined by the task configuration for the relevant wave methods.</span></span>

<span data-ttu-id="e03ee-162">必要に応じて、*サイクルの配賦メソッドのサイクル並行処理* 機能が自動的に有効になっている場合は、既定で行われた各設定を元に戻すことができます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-162">If necessary, you can undo each of the settings made by default when the *Wave parallelization for Allocate Wave method* feature is automatically enabled for your instance.</span></span> <span data-ttu-id="e03ee-163">これを行うには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-163">To do this:</span></span>

- <span data-ttu-id="e03ee-164">**倉庫管理\>設定\> 倉庫管理パラメーター** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-164">Go to **Warehouse management \> Setup \> Warehouse management parameters**.</span></span> <span data-ttu-id="e03ee-165">**制御処理** タブで、**バッチの処理** と **ロックを待機 (ミリ秒)** の値 を適用します 。</span><span class="sxs-lookup"><span data-stu-id="e03ee-165">On the **Wave processing** tab, apply your preferred values for **Process waves in batch** and **Wait for lock (ms)**.</span></span>
- <span data-ttu-id="e03ee-166">**倉庫管理 \> 設定 \> ウェーブ \> ウェーブのプロセス メソッド** に移動します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-166">Go to **Warehouse management \> Setup \> Waves \> Wave process methods**.</span></span> <span data-ttu-id="e03ee-167">`allocateWave` メソッドを選択します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-167">Select the `allocateWave` method.</span></span> <span data-ttu-id="e03ee-168">アクション ペインで、**タスク構成** を選択して、メソッドが並列して実行するために設定されている各倉庫を一覧表示するページを開きます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-168">On the Action Pane, select **Task configuration** to open a page that lists each warehouse where the method is set to run in parallel.</span></span> <span data-ttu-id="e03ee-169">必要に応じて、バッチ タスクの数と、リストされている各倉庫に割り当てられている複数のグループを変更または削除します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-169">Modify or delete the number of batch tasks and the assigned wave group for each listed warehouse as needed.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="e03ee-170">トラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="e03ee-170">Troubleshooting</span></span>

### <a name="troubleshoot-using-the-infolog"></a><span data-ttu-id="e03ee-171">情報ログを使用したトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="e03ee-171">Troubleshoot using the Infolog</span></span>

<span data-ttu-id="e03ee-172">バッチ フレームワークが使用されている場合は、ファイル内で発生したエラーが、バッチ ジョブ情報ログの一部としてキャプチャされます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-172">Because the batch framework is used, errors that occur during wave processing will be captured as part of the batch jobs Infologs.</span></span> <span data-ttu-id="e03ee-173">サイクルに関連するバッチ ジョブを読み取るには、次の操作を行います。</span><span class="sxs-lookup"><span data-stu-id="e03ee-173">To read the batch jobs related to a wave:</span></span>

1. <span data-ttu-id="e03ee-174">**倉庫管理 \> 出庫ウェーブ \> 出荷ウェーブ \> すべてのウェーブ** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-174">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="e03ee-175">検査するサイクルを選択します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-175">Select the wave you want to inspect.</span></span>
1. <span data-ttu-id="e03ee-176">アクション ペインで、**サイクル** タブを開き、**サイクル** グループから、**バッチ ジョブ** を選択します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-176">On the Action Pane, open the **Wave** tab and, from the **Wave** group, select **Batch jobs**.</span></span>

<span data-ttu-id="e03ee-177">プログラムによる処理はセルフ修正なので、処理中に検出されたエラーは情報ログを使用して報告する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-177">Wave processing is self-correcting, so any error detected during processing should be reported using the Infolog.</span></span>

<span data-ttu-id="e03ee-178">並行処理に関連する一般的なエラーは、2 つの波が同じ品目を同時に割り当てようとして、もう 1 つのジョブが完了しないので、指定した時間内にロックを取得できないという場合があります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-178">A typical error related to parallel processing could be that two waves try to allocate the same item at the same time and one does not complete so that the other wave is unable to acquire a lock within the specified time.</span></span> <span data-ttu-id="e03ee-179">この状況が発生すると、バッチ ジョブ ログに、品目のロックを取得できなかったという通知が含まれるので、失敗したジョブを再度処理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-179">If this situation occurs, the batch jobs log will contain information stating that the lock for the item could not be acquired, in which case the wave that failed must be processed again.</span></span>

<span data-ttu-id="e03ee-180">処理が並行処理で発生している場合から、処理の状態を追跡するために、別のテーブルでデータを管理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-180">Because the processing is happening in parallel, data must be maintained in different tables to track the state of the processing.</span></span> <span data-ttu-id="e03ee-181">つまり、バッチ ジョブのログにキー エラーの重複などのエラーが含まれる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-181">This means that the logs for the batch jobs might contain errors such as duplicate key errors.</span></span>

<span data-ttu-id="e03ee-182">バッチ タスクからのエラーは、バッチ ジョブ ログの一部です。</span><span class="sxs-lookup"><span data-stu-id="e03ee-182">The errors from the batch tasks are also part of the batch jobs log.</span></span> <span data-ttu-id="e03ee-183">最も重要な情報は一般にボトムに表示されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-183">The most important information is typically at the bottom.</span></span>

<span data-ttu-id="e03ee-184">たとえば、SQL 接続が終了した場合、バッチ ジョブが実行されているのように見えたが処理が停止されている不整合の状態で、クエリの処理が終了する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e03ee-184">In rare cases, for example if the SQL connection ended, it is possible for the wave processing to end in an inconsistent state where the batch job appears to be running but the processing is stopped.</span></span> <span data-ttu-id="e03ee-185">このようなサイクルは検出できないので、次の何を実行したら失敗した波をクリーンアップしようとします。</span><span class="sxs-lookup"><span data-stu-id="e03ee-185">The wave can't handle errors like this, so an attempt to clean up failed waves is done when the next wave runs.</span></span> <span data-ttu-id="e03ee-186">または、現在の何を示す値が不整合な状態の場合は、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-186">Alternatively, if the current wave is in an inconsistent state, perform the following steps:</span></span>

1. <span data-ttu-id="e03ee-187">**倉庫管理 \> 出庫ウェーブ \> 出荷ウェーブ \> すべてのウェーブ** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-187">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="e03ee-188">クリーンアップする必要があるサイクルを選択します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-188">Select the wave you need to clean up.</span></span>
1. <span data-ttu-id="e03ee-189">アクション ペインで、**サイクル** タブを開き、**サイクル** グループから、**サイクルデータのクリーンアップ** を選択します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-189">On the Action Pane, open the **Wave** tab and, in the **Wave** group, select **Cleanup wave data**.</span></span>

### <a name="troubleshoot-using-the-wave-progress-log"></a><span data-ttu-id="e03ee-190">進捗ログを使用したトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="e03ee-190">Troubleshoot using the wave progress log</span></span>

<span data-ttu-id="e03ee-191">**倉庫管理パラメータ** ページで **ファイルの処理状況ログの作成** オプションが有効になっている場合は、品目の配賦が開始および終了するごとにログ レコードが作成されます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-191">If the **Create wave progress log** option is enabled on the **Warehouse management parameters** page, then a log record is created every time allocation for an item and its dimensions begins and ends.</span></span> <span data-ttu-id="e03ee-192">このログは、最初のテスト中やトラブルシューティング時など、必要な場合にのみ有効にしてください。</span><span class="sxs-lookup"><span data-stu-id="e03ee-192">You should only enable this log when you need it, for example, during initial testing or for troubleshooting.</span></span> <span data-ttu-id="e03ee-193">このオプションが有効な場合、次の手順を実行してログを表示できます。</span><span class="sxs-lookup"><span data-stu-id="e03ee-193">When this option is enabled, you can view the log by taking the following steps:</span></span>

1. <span data-ttu-id="e03ee-194">**倉庫管理 \> 出庫ウェーブ \> 出荷ウェーブ \> すべてのウェーブ** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-194">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="e03ee-195">検査するサイクルを選択します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-195">Select the wave you want to inspect.</span></span>
1. <span data-ttu-id="e03ee-196">アクション ペインの、**ウェーブ** タブの、**ウェーブ** グループで、**処理** を選択します。</span><span class="sxs-lookup"><span data-stu-id="e03ee-196">On the Action Pane, open the **Wave** tab and, in the **Wave** group, select **Progress**.</span></span>
