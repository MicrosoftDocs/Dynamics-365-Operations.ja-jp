---
title: 場所ディレクティブを作成する
description: このトピックでは、場所ディレクティブを作成する方法について説明します。 場所ディレクティブはユーザー定義のルールで、在庫移動のピッキングとプットの場所を識別するために役立ちます。
author: Mirzaab
manager: tfehr
ms.date: 07/28/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSLocDirTable, WHSLocDirHint, WHSLocDirTableUOM, WHSLocDirFailure
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-28
ms.dyn365.ops.version: Release 10.0.9
ms.openlocfilehash: 4f634b7f526fd198b394af6d3870c43ee560813e
ms.sourcegitcommit: a36a4f9915ae3eb36bf8220111cf1486387713d9
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/16/2020
ms.locfileid: "4016773"
---
# <a name="create-location-directives"></a>場所ディレクティブを作成する

[!include [banner](../includes/banner.md)]

このトピックでは、場所ディレクティブを作成する方法について説明します。 場所ディレクティブはユーザー定義のルールで、在庫移動のピッキングとプットの場所を識別するために役立ちます。 たとえば、販売注文トランザクションの場合、場所ディレクティブが品目がピッキングされる場所とピッキングされた品目がプットされる場所を決定します。

> [!NOTE]
> このトピックは、 **倉庫管理** モジュールの機能に適用されます。 [在庫管理](../inventory/inventory-home-page.md) モジュールの機能は対象外です。

場所ディレクティブを使用して、次のタスクを実行できます:

- 受入品目のプット アウェイ。
- 出荷トランザクションの品目のピッキングとステージング。
- 生産用の原材料のピッキングとプット。
- 場所の補填。

## <a name="prerequisites"></a>必要条件

場所ディレクティブを作成する前に、次の手順に従って前提条件が設定されていることを確認する必要があります。

1. **倉庫管理 \> 設定 \> 倉庫 \> 倉庫** の順に移動します。
1. 倉庫を作成します。
1. **倉庫** クイック タブで、 **倉庫管理プロセスの使用** オプションを *はい* に設定します。
1. 場所、場所のタイプ、場所のプロファイル、場所の形式を作成します。 詳細については、[倉庫管理システムに対応した倉庫の場所のコンフィギュレーション](https://docs.microsoft.com/dynamics365/supply-chain/warehousing/tasks/configure-locations-wms-enabled-warehouse) を参照してください。
1. サイト、ゾーン、ゾーン グループを作成します。 詳細については、[倉庫の設定](https://docs.microsoft.com/dynamics365/commerce/channels-setup-warehouse) と [倉庫管理システムに対応した倉庫の場所のコンフィギュレーション](https://docs.microsoft.com/dynamics365/supply-chain/warehousing/tasks/configure-locations-wms-enabled-warehouse) を参照してください。

## <a name="setup"></a>段取り

### <a name="create-location-directives"></a>場所ディレクティブを作成する

場所ディレクティブを作成するには、次の手順に従います。

1. **倉庫管理 \> 設定 \> 場所のディレクティブ** に移動します。
1. リスト ペインで、 **作業指示書のタイプ** フィールドを、場所ディレクティブを作成している在庫トランザクションのタイプに設定します。
1. アクション ペインで、 **新規** を選択して、場所ディレクティブを作成します。
1. 新しい場所ディレクティブについては、次の表の説明に従ってフィールドを設定します。

    | フィールド | 説明 |
    |---|---|
    | 一連番号 | 場所ディレクティブのシーケンス位置を示す整数を入力します。 シーケンス位置は、選択した作業指示書に対して各場所ディレクティブがいつ処理されるかを決定します。 |
    | 氏名 | 場所ディレクティブの名前を入力します。 | 
    | 作業タイプ | 実行する必要がある作業のタイプを選択します。 値の一覧は、 **作業指示書のタイプ** フィールドで選択した在庫トランザクションのタイプによって異なります。 次の値が使用可能な場合があります:<ul><li>**プット** : 場所ディレクティブは、入庫、生産、または在庫調整を通じてシステムに取り込む在庫を配置または検索するのに最適な場所を見つけようとします。 場所ディレクティブは、アウトバウンド フローで、ステージの場所または最終ベイ ドアの出荷場所を定義するために使用することもできます。</li><li>**ピック** : 場所ディレクティブは、在庫を物理的に確保するのに最適な場所を見つけようとします (作業を作成します)。 作業が完了していない場合でも、ピッキングは完了することができます (つまり、ピッキング作業明細行は終了可能)。 ユーザーは、物理的なピッキングを完了できます。 システムでは、そのアクションがピッキング ステップになります。 ユーザーは、モバイル デバイスからキャンセルし、後で作業 (例えば、プット) を完了できます。 ただし、最終的なプットが完了すると、作業ヘッダーが最初に終了します。</li><li>**棚卸** 、 **調整** 、 **カスタム** 、 **在庫状態の変更** 、 **ライセンス プレートの構築** 、 **印刷** 、 **状態変更** 、 **入れ子になったライセンス プレートに梱包** – これらの値は、どの場所ディレクティブ設定でも使用できません。</li></ul> |
    | サイト | 作業を完了するサイトを選択します。 |
    | 倉庫 | 作業を完了する倉庫の場所を選択します。 |
    | ディレクティブ コード | ディレクティブ コードを選択し、このコードが割り当てられている作業テンプレート プット行に関連する場所ディレクティブの選択をガイドします。 **ディレクティブ コード** ページで、作業テンプレートを場所ディレクティブに接続するために使用できる新しいコードを作成できます。 また、作業テンプレート行と場所ディレクティブ (ベイ ドアまたはステージの場所など) 間のリンクを確立するためにそのページを使用できます 。 ディレクティブ コードを作業テンプレートとともにコンフィギュレーションする方法についての情報は、[作業テンプレートと場所ディレクティブを使用した倉庫作業の制御](control-warehouse-location-directives.md) を参照してください。<p>ディレクティブ コードが設定されている場合、作業を生成する必要があるときに、システムはシーケンスではなく、ディレクティブ コードで場所ディレクティブを検索します。 このようにして、材料をステージングする手順のような、作業テンプレートの特定の手順に使用される場所テンプレートを、より正確にすることができます。</p> |
    | 廃棄コード | 入庫済品目のプットアウェイを場所にリダイレクトする、廃棄コードを選択します。 (詳細については、 [廃棄コードの設定](tasks/set-up-dispositions-codes.md) を参照してください。) このフィールドは、 **作業指示書のタイプ** フィールドが *発注書* 、 *返品注文* 、または *完成品のプット アウェイ* に設定されている場合にのみ使用できます。 |
    | マルチ SKU | このオプションを *はい* に設定して、複数の最小在庫管理単位 (SKU) を場所で使用します。 たとえば、ベイ ドアについては、このオプションを *はい* に設定する必要があります。<p>**複数の SKU** オプションが *はい* に設定すると、プット場所は作業 (予想どおり) で指定されます。 ただし、プットする必要がある SKU が作業に 1 つしか含まれていない場合ではなく、ピッキングとプットする必要があるさまざまな SKU が作業に含まれている場合のみ、プット場所は、複数品目のプットを処理できます。</p><p>**複数の SKU** オプションを *いいえ* に設定すると、プット場所は、プットに SKU の種類が 1 つしかない場合のみ指定されます。</p><p>両方の方法を使用するには、同じ構造と設定を持つ 2 つの明細行を指定する必要がありますが、一方の明細行では **複数の SKU** オプションを *はい* に設定し、もう一方の明細行では *いいえ* に設定する必要があります。 つまり、作業 ID で単一および複数の SKU を区別する必要がなくても、2 つの同一の場所ディレクティブがプット操作には必要です。 複数の品目を含む注文がある場合は、ピッキングの場所ディレクティブを設定する必要もあります。</p><p>**注記:** *プット* 作業タイプの場所ディレクティブの **複数の SKU** オプションを *はい* に設定すると、その明細行に作成された他の制限に関わらず、システムは最初の場所ディレクティブ明細行を選択します。</p> |

1. オプション: アクション ペインで **クエリの編集** を選択して、場所を選択するか、特定の場所ディレクティブを選択するときに適用する制限を指定します。
1. **明細行** クイック タブで、1 つ以上の明細行を作成して単位を指定し、倉庫の数量を検索または予約します。
1. 新しい明細行ごとに、次の表に示すようにフィールドを設定します。

    | フィールド | 説明 |
    |---|---|
    | 一連番号 | 場所ディレクティブのシーケンス位置を示す整数を入力します。 シーケンス位置は、選択した作業タイプに対して各場所ディレクティブがいつ処理されるかを決定します。 |
    | 開始数量 | ミドル グリッド シーケンスが選択されるときの開始数量範囲を指定します。 **単位** フィールドで選択された、測定単位の数量を指定します。 |
    | 上限数量 | ミドル グリッド シーケンスが選択されるときの終了数量範囲を指定します。 **単位** フィールドで選択された、測定単位の数量を指定します。 |
    | 単位 | 品目の測定単位を選択します。<p>このディレクティブが適用される最小数量と最大数量を指定できます。 また、特定の在庫単位にディレクティブを使用するように指定することもできます。 **単位** フィールドは、数量の評価に対してのみ使用されます。</p><p>システムは、場所ディレクティブ明細行が適用されるかどうかを判別するために、明細行に指定されている **単位** 値を使用して数量を評価します。 場所ディレクティブ明細行がアクセスするたびに、システムは需要単位を明細行指定された単位に変換しようとします。 単位換算が存在しない場合、システムは次の行に移動します。</p> |
    | 数量の検索 | このフィールドは、倉庫に数量を入力または検索する場合にのみ有効です。 つまり、 *プット* 作業に対してのみ有効です。 数量が **開始数量** と **終了数量** フィールドで設定されている範囲内にあるかどうかの評価に使用する方法を選択します。 場所ディレクティブが入荷トランザクション用の場合は、次のいずれかのオプションを選択します:<ul><li>**ライセンス プレートの数量** - 数量が目標数量範囲内であるかどうかを評価するには、受け取ったライセンス プレートの数量を使用します。</li><li>**ユニット化された数量** - 数量が目標数量範囲内であるかどうかを評価するには、トランザクション中にユニット化された数量を使用します。 たとえば、倉庫で数量 1,000 を受け取り、数量 100 ごとの 10 枚のライセンス プレートに分ける場合、100 のライセンス プレートの数量ではなく、1,000 品目の数量を使用できます。</li><li>**残余数量** - 数量が目標数量範囲内であるかどうかを評価するには、現在チェック インされている発注書明細行でまだ受け取られていない数量を使用します。</li><li>**予定数量** - 数量が目標数量範囲内であるかどうかを評価するには、すでに受け取った数量とは無関係に、発注書明細行の合計数量を使用します。</li></ul> |

1. オプション: **明細行** クイック タブで、次の追加フィールドを設定できます。

    | フィールド | 説明 |
    |---|---|
    | 単位ごとに制限 | このチェック ボックスを選択すると、場所ディレクティブ明細行の有効な選択基準とみなされる測定単位が制限されます。 測定単位が指定されている場合は、単位が単位シーケンス グループに定義されている少なくとも 1 つの単位と一致する品目だけが、明細行の選択で有効と見なされます。<p>たとえば、単位がパレットに限定され、品目が *パレット* 単位を含む単位シーケンス グループに関連付けられているとします。 この場合、その品目は、場所ディレクティブの有効なオプションと見なされます。</p><p>ただし、 **単位ごとに制限** チェック ボックスは、作業明細行に適用される単位を制御しません。 単位制限は、単位シーケンス グループを介して使用できるようになる単位にのみ適用されます。</p><p>たとえば、品目が *パレット* と *個* 単位の両方を含む、単位シーケンス グループに関連付けられているとします。 測定単位は、1 パレット = 100 個で定義されており、場所ディレクティブでは、 **単位ごとに制限** 機能をパレットに対してのみ使用します。 さらに作業ヘッダーの作成を 50 個に制限する作業テンプレートが定義されています。 この場合、50 個の作業明細行が作成されます。</p><p>制限の測定単位を指定するには、次の手順に従います</p><ol><li>**明細行** クイック タブで、 **単位ごとに制限** を選択します。 このボタンは、明細行の **単位ごとに制限** チェック ボックスを選択し、 **保存** を選択した後にのみ使用できます。</li><li>**単位** フィールドで、ピッキングとプットアウェイ プロセスで制限するために測定単位を選択します。</li></ol> |
    | 単位に丸める | このオプションを選択して、原材料ピッキングは **単位ごとに制限** フィールドで指定されている材料取り扱い単位の倍数まで切り上げる必要があることを示します。 このフィールドは *ピック* タイプの原材料ピッキングと場所ディレクティブにのみ適用されます。 |
    | 梱包数量の検索 | 梱包単位数量を **販売注文** ページで指定するには、このチェック ボックスを選択します。 このチェック ボックスを選択すると、この梱包単位数量を持つ場所のみが選択されます。 |
    | 分割を許可 | 複数の場所に数量を分割する場合には、このチェック ボックスを選択します。 |
    | 即時補充テンプレート | 補充テンプレートへの接続を作成し、品目が割り当てられていない場合にすぐに補充が開始されるようにします。 このフィールドを空白のままにすると、場所ディレクティブのすべての明細行が処理されるまで品目の補充が開始されません。<p>このフィールドは、補充が許可されている選択済み作業指示書のタイプ ( *販売注文* や *原材料のピッキング* など) でのみ使用でき ます。</p> |

1. **場所ディレクティブ アクション** クイック タブで、 **新規** を選択して、場所または場所の範囲を選択します。
1. **シーケンス番号** フィールドには、選択した作業タイプに対して場所ディレクティブが処理されるシーケンスが表示されます。 このシーケンスは、必要に応じて修正できます。 ただし、場所ディレクティブ アクションは常にこのシーケンスで実行されるため、場所ディレクティブ アクションのシーケンス番号には注意してください。
1. **名前** フィールドに、場所ディレクティブ アクションの名前を入力します。 具体的にして、アクションが何であるかを明確にします。
1. オプション: **クエリの編集** を選択し、倉庫の場所および他の条件を変更します。
1. オプション: 場所ディレクティブに次の追加フィールドを設定できます。

    | フィールド | 説明 |
    |---|---|
    | 固定の場所の使用 | 場所ディレクティブで考慮する場所を選択します:<ul><li>**固定および固定以外の場所** – 場所ディレクティブはすべての場所を考慮します。</li><li>**製品の固定の場所のみ** – 場所ディレクティブは製品の固定の場所のみ考慮します。</li><li>**製品バリアントの固定の場所のみ** – 場所ディレクティブは製品バリアントの固定の場所のみ考慮します。</li></ul> |
    | マイナス在庫を許可 | 指定した倉庫の場所でマイナス在庫を許可するには、このチェック ボックスを選択します。 |
    | バッチが有効 | バッチが有効な品目に対してバッチ戦略を使用するには、このチェック ボックスを選択します。 このチェック ボックスが選択されていて、 **戦略** フィールドが *なし* に設定されている場合、システムは次のアクション明細行に移動します。 |
    | 戦略 | 場所ディレクティブで使用する戦略を選択します:<ul><li>**なし** – 戦略は使用されません。</li><li>**梱包数量の照合** – この戦略では、ピッキング場所に指定した梱包数量があるかどうかを確認します。 この戦略は、 **作業タイプ** フィールドが *ピック* に設定されている場合にのみ有効です。</li><li>**連結** – この戦略は、同様の品目が既に利用可能な場合、特定の場所の品目を連結します。 この戦略は、 **作業タイプ** フィールドが *プット* に設定されている場合にのみ有効です。 プットの一般的な設定では、システムは最初のアクション明細行で連結を実行しようとし、2 番目のアクション明細行で連結なしのプットを試みます。 商品の連結は、後にピッキングをより効率的にします。</li><li>**FEFO バッチ引当** – この戦略は、在庫がバッチ有効期限を使用して配置され、バッチの引当に割り当てられたときに使用されます。 有効期限に加え、バッチの消費期限を使用して在庫が配置されるときに、先入れ先出し (FEFO) バッチ引当戦略も使用されます。 バッチが有効な品目に対してのみ、この戦略を使用できます。 この戦略は、 **作業タイプ** フィールドが *ピック* に設定されている場合にのみ有効です。 この戦略を選択すると、適用されているバッチ番号のクエリの並べ替えを上書きします。</li><li>**全 LP への切り上げ** – この戦略は、ピッキングする必要がある品目に、割り当てられているライセンス プレート数量と一致するように在庫数量を切り上げます。 この戦略は、場所ディレクティブの補充タイプにのみ使用でき、 **作業タイプ** フィールドが *ピック* に設定されている場合にのみ使用できます。</li><li>**作業を受け取らない空の場所** – この戦略は、空の場所を検索するために使用されます。 現物在庫がなく、入荷作業が予定されていない場合、場所は空であると見なされます。 この戦略は、 **作業タイプ** フィールドが *プット* に設定されている場合にのみ有効です。</li></ul> |

## <a name="example-of-the-use-of-location-directives"></a>場所ディレクティブの使用例

この例では、入荷ドックに登録されたばかりの在庫品目のために倉庫内で使用されていない収容能力を場所ディレクティブが検索する必要がある発注書プロセスについて考慮します。 最初に、既存の手持在庫との連結によって倉庫内の使用されていない収容能力を検索する必要があります。 連結ができない場合、空の場所を見つける必要があります。

このシナリオでは、2 つの場所ディレクティブ アクションを定義する必要があります。 順序の最初のアクションでは、 **連結** 戦略を使用する必要があり、2番目では、 **作業を受け取らない空の場所** 戦略を使用する必要があります。 倉庫内に収容能力がもうない場合、オーバーフローのシナリオを処理する 3 番目のアクションを定義しない限り、可能性として二通りの結果があります: 場所が定義されていなくても作業を作成できる、または作業作成プロセスが失敗する。 **場所ディレクティブ エラー** ページの設定で、結果を決定します。そのページで、各作業オーダー タイプごとに **場所のディレクティブ エラーで作業を停止する** オプションを選択するかどうか決定できます。

## <a name="next-step"></a>次のステップ

場所ディレクティブを作成した後、各ディレクティブ コードを、作業作成のための作業テンプレート コードと関連付けることができます。 詳細については、[作業テンプレートと場所ディレクティブを使用した倉庫作業の制御](https://docs.microsoft.com/dynamics365/supply-chain/warehousing/control-warehouse-location-directives) を参照してください。

## <a name="technical-information-for-system-admins"></a>システム管理者向け技術情報

このタスクを完了するために使用するページに対するアクセス権限がない場合は、システム管理者に連絡し、次の表に示される情報を提供します。

| カテゴリ | 前提条件 |
|---|---|
| コンフィギュレーション キー | **システム管理 \> 設定 \> ライセンス コンフィギュレーション** の順にクリックします。 **取引** ライセンス キーを展開して、 **倉庫および配送の管理** コンフィギュレーション キーを選択します。 |
