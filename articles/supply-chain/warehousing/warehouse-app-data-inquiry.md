---
title: Warehouse Management モバイル アプリの迂回を使用してデータをクエリする
description: この記事では、データ照会モバイル デバイスのメニュー項目を構成し、迂回の一部として使用する方法について説明します。
author: perlynne
ms.date: 08/01/2022
ms.topic: article
ms.search.form: WHSMobileAppFlowStepListPage, WHSMobileAppFlowStepAddDetour,WHSMobileAppFlowStepDetourSelectFields
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2022-08-01
ms.dyn365.ops.version: 10.0.29
ms.openlocfilehash: c3ea53379badb3cb2ed71b7f102956d71c3f047a
ms.sourcegitcommit: c98d55a4a6e27239ae6b317872332f01cbe8b875
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/02/2022
ms.locfileid: "9220567"
---
# <a name="query-data-using-warehouse-management-mobile-app-detours"></a>Warehouse Management モバイル アプリの迂回を使用してデータをクエリする

[!include [banner](../includes/banner.md)]

## <a name="feature-introduction"></a>機能紹介

バー コード スキャン機能を提供することで、Warehouse Management モバイル アプリで、倉庫プロセスの一部としてデータを簡単かつ正確に取得することができます。 ただし、バーコードが破損して読み取り不能になったり、ビジネス プロセス フローで必要なデータ情報がバーコードとして存在しない場合があります。 このような場合、データの手動入力に時間がかかったり、誤ったデータが収集されることがあります。 その結果、有効性とサービス レベルが低下する場合があります。

作業者は、柔軟なデータ照会プロセスを使用することで、埋め込み Warehouse Management モバイル アプリ フローの一部として必要な情報を容易に検索し、関連データだけが表示されるようにフィルター処理オプションを適用できます。 そのため、手動選択の時間が短縮され、より正確になります。

たとえば、発注書の受信フローでは、発注書番号が着荷在庫と一致する必要があります。 このプロセスの一環として、関連する発注書番号のカード リスト ビューを提供するメニュー項目を簡単に構成できます。 この方法では、すばやいポイント選択を使用して、受信フローを続行できます。 この記事ではシナリオ例を示しますが、この機能は Warehouse Management モバイル アプリ フローの一部またはすべてのフロー内で使用することもできます。

## <a name="turn-on-the-data-inquiry-flow-feature-and-its-prerequisites"></a>データ照会フロー機能とその前提条件を有効にする

この記事で説明する機能を使用するには、次の手順に従って必要な機能を有効にする必要があります。

1. **システム管理者 \> ワークスペース \> フィーチャー管理** の順に移動します。 (**機能管理** ワークスペースの使用方法の詳細については、[機能管理の概要](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)を参照してください。)
1. 次の方法で表示された機能を有効にします。

    - **モジュール:** *倉庫管理*
    - **機能名:** *倉庫アプリ ステップ インストラクション*

    この機能は、*Warehouse Management アプリのデータ照会フロー* 機能の前提条件です。 *倉庫アプリのステップの手順* 機能の詳細については、[Warehouse Management モバイル アプリ](mobile-app-titles-instructions.md) を参照してください。

1. 次の方法で表示された機能を有効にします。

    - **モジュール:** *倉庫管理*
    - **機能名:** *Warehouse Management アプリの迂回*

    この機能は、*Warehouse Management アプリのデータ照会フロー* 機能の前提条件です。 *Warehouse management アプリの迂回* 機能の詳細については、[モバイル デバイス メニュー項目で手順の迂回を構成する](warehouse-app-detours.md)を参照してください。

1. *Warehouse Management アプリの迂回* 機能がまだ有効でない場合、**倉庫管理 \> 設定 \> モバイル デバイス \> 倉庫アプリ フィールド名** の順に移動して、**既定の設定の作成** を選択することで Warehouse Management モバイル アプリのフィールド名を更新します。 Warehouse Management モバイル アプリを使用する法人 (会社) ごとにこの手順を繰り返します。 詳細情報については、[Warehouse Management モバイル アプリのフィールドを構成する](configure-app-field-names-priorities-warehouse.md) を参照してください。
1. 次の方法で表示された機能を有効にします。

    - **モジュール:** *倉庫管理*
    - **機能名:** *Warehouse Management アプリのデータ照会フロー*

    この機能は、この記事で説明する機能です。

## <a name="example-scenarios"></a>シナリオ例

この記事では、シナリオ例を使用して、*Warehouse Management アプリのデータ照会フロー* 機能を使用して購買入庫フローを改善する方法を示します。 このシナリオでは、*購買入庫* という名前のフローを含む標準サンプル データを使用します。 このフローは、作業者に対して受け取る発注書番号を識別するように要求することで開始されます。 作業員が発注書を識別しやすくするには、次の新しいクエリ オプションを[迂回](warehouse-app-detours.md)リスクとして追加して、フローの最初のページを強化します。

- **仕入先による PO の検索** – 作業者に仕入先名または仕入先名の一部を入力するように求めるページが開きます。 ワイルドカード文字を使用できます。 たとえば、作業者が、名前に *Tailspin* が含まれる仕入先からの今日の入庫配送を予想している場合、**Tail\*** と入力してそのテキストを含むオープン発注書のカードのセットを表示することができます。 すべてのカードには、各発注書に関する情報を提供する複数のフィールドがあります。 仕入先の名前に加え、仕入先勘定番号、配送日、ドキュメントの状態が表示されるようにカードをデザインすることができます。
- **今日の PO の検索** – 作業者にデータの入力を求めませんが、事前設定済みのフィルター (今日の日付など) を表示するページが開きます。 フィルターに一致する一連のカードがページに表示されます。 作業者は、在庫品目を登録する発注書のカードを選択して処理を進めます。
- **品目による PO の検索** – 着荷在庫の品目のバー コードをスキャンするように作業者に求めるページが開きます。 その後、スキャンされた品目番号の明細行を含むすべてのオープン発注書がフローに表示されます。 バー コードが読み取りできない状況をカバーするために、このページに別の迂回を追加して、作業者が特定の発注書内の品目番号を検索できるようにすることができます。

それぞれのケースで、作業者はカードを選択して発注書を識別し、選択した発注書番号を示す最初のページに戻ります。 その後、作業者は在庫入庫登録フローを続行できます。

## <a name="enable-sample-data"></a>サンプルデータの有効化

この記事で説明されるシナリオ例を実行するには、標準の[デモ データ](../../fin-ops-core/dev-itpro/deployment/deploy-demo-environment.md)がインストールされているシステムで作業する必要があります。 また、開始する前に *USMF* 法人 (会社) を選択する必要があります。

## <a name="configure-the-mobile-device-menu-items"></a>モバイル デバイスのメニュー項目の構成

フローの最初のページに追加する必要がある新しい各クエリ オプションを作成するには、モバイル デバイスのメニュー項目として設定する必要があります。 後で、クエリ オプションを *購買入庫* フローに対する迂回として使用可能にします。

### <a name="create-the-look-up-pos-by-vendor-menu-item"></a>[仕入先による PO の検索] メニュー項目の作成

次の手順に従って、**仕入先による PO の検索** メニュー項目を作成します。

1. **倉庫管理 \> 設定 \> モバイル デバイス \> モバイル デバイスのメニュー品目** の順に移動します。
1. アクション ウィンドウで、**新規** を選択して、モバイル デバイス メニュー項目を追加します。
1. 新しいメニュー項目に次の値を設定します。

    - **メニュー項目名:** *仕入先による PO の検索*
    - **タイトル:** *仕入先による PO の検索*
    - **モード:** *間接*

1. **一般** クイック タブで、次の値を設定します。

    - **活動コード:** *データ照会*
    - **プロセスガイドの使用:** *はい* (この値は自動的に選択されます。)
    - **テーブル名:** *PurchTable* (このテーブルから発注書番号を検索します。)

1. アクション ウィンドウで、**クエリの編集** を選択して、選択した基本テーブル (この場合は発注書テーブル) に基づくクエリを定義します。
1. クエリ エディターの **範囲** タブで、以下の行をグリッドに追加します。

    | テーブル | 派生テーブル | フィールド | 基準 |
    |---|---|---|---|
    | 発注書 | 発注書 | 発注書の状態 | オープン注文 |
    | 発注書 | 発注書 | 配送日 | (dayRange(-10,10)) |
    | 発注書 | 発注書 | 仕入先名 | |

1.  **OK** を選択します。

    この例では、新しいメニュー項目は、過去 10 日から今後 10 日の間に入庫する予定のオープン発注書を検索するように構成されています。

    クエリで、*仕入先名* の **基準** 列が空白のままになります。 そのため、作業者は Warehouse Management モバイル アプリを使用する間にこの値を指定できます。

    リストの並べ替え方法を指定する場合は、**並べ替え** タブで並べ替えを設定できます。

1. クエリの定義に加えて、照会リスト ページのカードに表示するフィールドを選択する必要があります。 そのため、アクション ウィンドウで **フィールド リスト** を選択します。
1. **フィールド リスト** ページで、次の値を設定します。

    - **表示フィールド 1:** *PurchId* (このフィールドは、各カードのヘッダーとして表示されます。)
    - **表示フィールド 2:** *PurchStatus*
    - **表示フィールド 3:** *PurchName*
    - **表示フィールド 4:** *OrderAccount*
    - **表示フィールド 5:** *DeliveryDate*
    - **表示フィールド 6:** *displayDocumentStatus()* (この値は、末尾の () が示すように、表示メソッドです。)

1. アクション ウィンドウで、**保存** を選択します。 その後、ページを閉じます。

### <a name="create-the-look-up-pos-for-today-menu-item"></a>[今日の PO の検索] メニュー項目の作成

次の手順に従って、**今日の PO の検索** メニュー項目を作成します。

1. **倉庫管理 \> 設定 \> モバイル デバイス \> モバイル デバイスのメニュー品目** の順に移動します。
1. アクション ウィンドウで、**新規** を選択して、モバイル デバイス メニュー項目を追加します。
1. 新しい項目に、次の値を設定します。

    - **メニュー項目名:** *今日の PO の検索*
    - **タイトル:** *今日の PO の検索*
    - **モード:** *間接*

1. **一般** クイック タブで、次の値を設定します。

    - **活動コード:** *データ照会*
    - **プロセスガイドの使用:** *はい* (この値は自動的に選択されます。)
    - **テーブル名:** *PurchTable* (このテーブルから発注書番号を検索します。)

1. アクション ウィンドウで、**クエリの編集** を選択して、選択した基本テーブル (この場合は発注書テーブル) に基づくクエリを定義します。
1. クエリ エディターの **範囲** タブで、以下の行をグリッドに追加します。

    | テーブル | 派生テーブル | フィールド | 基準 |
    |---|---|---|---|
    | 発注書 | 発注書 | 発注書の状態 | オープン注文 |
    | 発注書 | 発注書 | 配送日 | (Day(0)) |

1.  **OK** を選択します。

    この例では、新しいメニュー項目は、今日入庫予定のオープン発注書を検索するように構成されています。

    リストの並べ替え方法を指定する場合は、**並べ替え** タブで並べ替えを設定できます。

1. クエリの定義に加えて、照会リスト ページのカードに表示するフィールドを選択する必要があります。 そのため、アクション ウィンドウで **フィールド リスト** を選択します。
1. **フィールド リスト** ページで、次の値を設定します。

    - **表示フィールド 1:** *PurchName* (このフィールドは、各カードのヘッダーとして表示されます。)
    - **表示フィールド 2:** *PurchId*
    - **表示フィールド 3:** *PurchStatus*
    - **表示フィールド 4:** *DlvMode*
    - **表示フィールド 5:** *DlvTerm*
    - **表示フィールド 6:** *OrderAccount*
    - **表示フィールド 7:** *VendorName()* (この値は、末尾の () が示すように、表示メソッドです。)

1. アクション ウィンドウで、**保存** を選択します。 その後、ページを閉じます。

### <a name="create-the-look-up-pos-by-item-menu-item"></a>[品目による PO の検索] メニュー項目の作成

次の手順に従って、**品目による PO の検索** メニュー項目を作成します。

1. **倉庫管理 \> 設定 \> モバイル デバイス \> モバイル デバイスのメニュー品目** の順に移動します。
1. アクション ウィンドウで、**新規** を選択して、モバイル デバイス メニュー項目を追加します。
1. 新しい項目に、次の値を設定します。

    - **メニュー項目名:** *品目による PO の検索*
    - **タイトル:** *品目による PO の検索*
    - **モード:** *間接*

1. **一般** クイック タブで、次の値を設定します。

    - **活動コード:** *データ照会*
    - **プロセスガイドの使用:** *はい* (この値は自動的に選択されます。)
    - **テーブル名:** *PurchLine* (明細行データを使用して品目番号に基づいて発注書番号を検索します。)

1. アクション ウィンドウで、**クエリの編集** を選択し、選択したベース テーブルに基づくクエリを定義します (この場合、発注書明細行テーブルですが、*PurchTable* に結合することで、ヘッダーに関連する任意の値を使用できます)。
1. クエリ エディターの **範囲** タブで、以下の行をグリッドに追加します。

    | テーブル | 派生テーブル | フィールド | 基準 |
    |---|---|---|---|
    | 購買注文明細行 | 購買注文明細行 | 明細行の状態 | オープン注文 |
    | 購買注文明細行 | 購買注文明細行 | 配送日 | (dayRange(-10,10)) |
    | 購買注文明細行 | 購買注文明細行 | 品目番号 | |

1.  **OK** を選択します。

    この例では、新しいメニュー項目は、過去 10 日から今後 10 日の間に入庫する予定のオープン発注書明細行を検索するように構成されています。

    クエリで、*品目番号* の **基準** 列が空白のままになります。 そのため、作業者は Warehouse Management モバイル アプリを使用する間にこの値を指定できます。

    リストの並べ替え方法を指定する場合は、**並べ替え** タブで並べ替えを設定できます。

1. クエリの定義に加えて、照会リスト ページのカードに表示するフィールドを選択する必要があります。 そのため、アクション ウィンドウで **フィールド リスト** を選択します。
1. **フィールド リスト** ページで、次の値を設定します。

    - **表示フィールド 1:** *PurchId* (このフィールド値は、各カードのヘッダーとして使用されます。)
    - **表示フィールド 2:** *VendAccount*
    - **表示フィールド 3:** *PurchQty*
    - **表示フィールド 4:** *PurchUnit*
    - **表示フィールド 5:** *PurchStatus*

1. アクション ウィンドウで、**保存** を選択します。 その後、ページを閉じます。

## <a name="add-the-new-mobile-device-menu-items-to-a-menu"></a>メニューへの新しいモバイル デバイスのメニュー項目の追加

3 つの新しいモバイル デバイス メニュー項目をモバイル デバイス メニューに追加する準備が整いました。 メニュー項目を迂回プロセスの一部として使用する前に、このタスクを完了する必要があります。 この例では、新しいサブメニューを作成し、新しいメニュー項目を追加します。

1. **倉庫管理 \> 設定 \> モバイル デバイス \> モバイル デバイス メニュー** の順に移動します。
1. アクション ウィンドウで、**新規** を選択します。
1. 新しいレコードのヘッダーに次の値を設定します。

    - **名前:** *照会*
    - **説明:** *照会*

1. **使用可能なメニューとメニュー項目** リストで、作成した最初のモバイル デバイス メニュー項目を選択します。 次に、右矢印ボタンを選択して、その項目を **メニュー構造** リストに移動します。
1. 他の 2 つの新しいメニュー項目について、前の手順を繰り返します。
1. 左側のリスト ウィンドウで、**メイン** メニューを 選択します。
1. **使用可能なメニューとメニュー項目** リストで、**メニュー** セクションまで下にスクロールして、新しい **照会** メニューを選択します。 次に、右矢印ボタンを選択して、その項目を **メニュー構造** リストに移動します。

## <a name="configure-detours-in-your-mobile-device-steps"></a>モバイル デバイス ステップで手順の迂回を構成する

設定を完了するには、**モバイル デバイス ステップ** ページで迂回構成を使用して、*購買入庫* フローの既存の発注書 ID ステップに 3 つの新しいモバイル デバイス メニュー項目を追加する必要があります。

1. **倉庫管理 \> 設定 > モバイル デバイス \> モバイル デバイスのステップ** の順に移動します。
1. **フィルター** フィールドに、*PONum* と入力します。 その後、ドロップダウン リストで *ステップ ID: "PONum"* を選択します。
1. 見つかったレコードをグリッドで選択している間に、アクション ウィンドウで **ステップ コンフィギュレーションの追加** を選択します。 表示されたドロップダウン ダイアログ ボックスで、*メニュー項目* フィールド **購買入庫** に設定します。 次に、**OK** を選択してダイアログ ボックスを閉じます。
1. 新しいステップ コンフィギュレーションの詳細ページ (**購買入庫: PONum**) で、**使用可能な迂回 (メニュー項目)** クイック タブで、ツール バーの **追加** を選択します。
1. **迂回の追加** ダイアログ ボックスで、以前作成した **仕入先による PO の検索** メニュー項目を選択します。
1. **OK** を選択してダイアログ ボックスを閉じ、選択したメニュー項目を迂回リストに追加します。
1. 新しい迂回を選択し、ツール バーで **送信するフィールドの選択** を選択します。
1. 迂回メニュー項目に渡す値はないので、**送信するフィールドの選択** ダイアログ ボックスでは、**購買入庫から送信** セクションに何も入力しないでください。 ただし、**仕入先による PO の検索から戻るセクション** で、そこに既に追加されている空の行に次の値を設定します。

    - **仕入先による PO の検索からコピー:** *発注書*
    - **購買入庫に貼り付け:** *発注書*

1. **OK** を選択してダイアログ ボックスを閉じます。
1. 他の 2 つの新しいメニュー項目 (**今日の PO の検索** と **品目による PO の検索**) について、手順 4 ～ 9 を繰り返します。 **仕入先による PO の検索** メニュー項目については、これらの迂回プログラムにデータを送信しませんが、発注書番号を返します。
1. ページを閉じます。

## <a name="try-a-purchase-receiving-flow-that-has-a-data-inquiry-as-part-of-a-detour"></a>迂回の一部としてデータの照会がある購買入庫フローを試す

次の手順に従って、新しいモバイル アプリの設定をテストします。

1. 倉庫 51 の明細行を含む複数の発注書を作成します。
1. 倉庫管理モバイル アプリを実行しているモバイル デバイスまたはエミュレーターに移動し、ユーザー ID とパスワードに *1* を使用して、倉庫 *51* にログインします。
1. モバイル アプリ メニューで、**入庫**、**購買入庫** の順に選択します。

    新しい 3 つのメニュー項目を含む次のページが表示されます。

    ![PO 番号を使用した購買入庫。](media/wma-purchase-receive-po-num-with-detours.png "PO 番号を使用した購買入庫")

1. さまざまな機能を試して、リスト内のいずれかのカードを選択して発注書番号を送り返すことができることにご注意ください。

    ![仕入先による PO の検索を使用した購買入庫、例 1。](media/wma-purchase-receive-lookup-po-vendor-keyin-detours.png "仕入先による PO の検索を使用した購買入庫、例 1")

    ![仕入先による PO の検索を使用した購買入庫、例 2。](media/wma-purchase-receive-lookup-po-vendor-detours.png "仕入先による PO の検索を使用した購買入庫、例 2")

> [!TIP]
> **購買入庫** メニュー項目から検索を行って入庫フローを実行する代わりに、照会フロー (**メイン \> 紹介\> 仕入先による PO の検索**) から開始し、一覧のいずれかのカードを選択することで目的のフローを実行する迂回を呼び出すことができます。 この方法を使用するには、*GenericDataInquiryList* の **ステップ ID** を持つステップの **モバイル デバイスのステップ** ページで迂回を定義します。 このフローは迂回フローであるため、このフローからさらに迂回を呼び出すことはできません。 そのため、たとえば、品目番号入力画面にアクセスした場合、現在 1 つのレベルの迂回のみサポートされるため、検索を使用できません。

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
