---
title: "仕入先コラボレーションの設定と管理"
description: "このトピックでは、Microsoft Dynamics 365 for Finance and Operations においてベンダー コラボレーションをセットアップする方法について説明します。 また、新しい仕入先コラボレーション ユーザーのプロビジョニング方法およびそれらのユーザーのセキュリティ ロールの管理方法についても説明します。"
author: mkirknel
manager: AnnBe
ms.date: 12/03/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
ms.search.form: DirExternalRole, SysUserRequestListPage, VendVendorPortalUsers, WorkflowTableListPageRnr
audience: IT Pro
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 220774
ms.assetid: 69d05e8b-7dc2-48ea-bc24-bea9ac963579
ms.search.region: Global
ms.author: mkirknel
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.translationtype: HT
ms.sourcegitcommit: 23a83fdca0996c83a3ffea605b8da5073ca8dfc1
ms.openlocfilehash: a1d0ec4c5aa5a3abf9ab6c38107b90b61c69c588
ms.contentlocale: ja-jp
ms.lasthandoff: 12/04/2018

---

# <a name="set-up-and-maintain-vendor-collaboration"></a>仕入先コラボレーションの設定と管理

[!include [banner](../includes/banner.md)]

仕入先コラボレーション インターフェイスは、発注書、請求書、委託販売在庫に関する限られた情報を外部仕入先ユーザーに公開します。 このインターフェイスから、仕入先も見積依頼 (RFQ) に返信でき、会社の基本情報を表示および編集できます。

このトピックでは、Microsoft Dynamics 365 for Finance and Operations においてベンダー コラボレーションをセットアップする方法について説明します。 また、新しい仕入先コラボレーション ユーザーをプロビジョニングするワークフローの設定方法およびそれらのユーザーのセキュリティ ロールの管理方法についても説明します。

> [!NOTE]
> 仕入先コラボレーションのセキュリティ ロールの設定に関する情報は、Finance and Operations の現在のバージョンにのみ適用されます。 Microsoft Dynamics AX 7.0 (2016 年 2 月) および Microsoft Dynamics AX アプリケーション バージョン 7.0.1 (2016 年 5 月) で、**仕入先ポータル** モジュールを使用して仕入先との共同作業を行います。 Microsoft Dynamics AX で仕入先ポータルのユーザーのアクセス許可の詳細については、[仕入先ポータルのユーザー セキュリティ](configure-security-vendor-portal-users.md) を参照してください。

## <a name="set-up-vendor-collaboration-security-roles"></a>仕入先コラボレーション セキュリティ ロールの設定

調達担当者または十分なアクセス許可を持つ仕入先は、連絡担当者レコードの**仕入先ユーザーのプロビジョニング**を有効にすることによって、連絡担当者をユーザーとしてプロビジョニングするように要求できます。 プロセスのプロビジョニング中に、新しい外部ユーザーに対してユーザーのアクセス許可が選択され、新しい仕入先ユーザーの要求が送信されます。 仕入先ユーザーの要求での選択に使用できるユーザーのアクセス許可を正しく設定する必要があります。 それ以外の場合、仕入先には、Finance and Operations にアクセスできない情報へのアクセスが許可される可能性があります。

### <a name="set-up-the-security-roles-that-are-available-for-selection-when-a-new-user-request-is-used-for-a-contact-person"></a>連絡担当者に新しいユーザー要求が使用される場合に選択に使用できるセキュリティ ロールを設定

1. **システム管理** &gt; **セキュリティ** &gt; **外部ロール** を選択します。
2. **新規** を選択してセキュリティ ロールと **仕入先** 関係者ロールを選択します。

Finance and Operations で提供される **仕入先管理者 (外部)** および **仕入先 (外部)** を追加する場合があります。 または、会社が作成したセキュリティ ロールを使用できます。

仕入先が新しい連絡先を作成でき、新規ユーザーとユーザー情報の変更に関してユーザーが要求する仕入先コラボレーションを送信でき、ワークフローを通じてそのような要求に対応できる場合にのみ、**仕入先管理者 (外部)** ロールを有効にしてください。

仕入先の連絡先とユーザーを手動で設定する場合は、**仕入先 (外部) ロール**のみを利用可能にすることができます。 このロールは、仕入先のユーザー要求によって要求できる唯一のロールになります。

> [!NOTE]
> Finance and Operations で新しいユーザー アカウントを手動で作成するとき、**SystemUser** ロールが自動的に付与されます。 したがって、そのロールを削除して **SystemExternalUser** ロールを割り当てる必要があります。 仕入先ユーザー要求によって開始されるワークフロー経由で新しいユーザー アカウントを作成した場合、共同作業に対して設定した 1 つ以上の仕入先のロールおよび **SystemExternalUser** ロールが割り当てられます。

#### <a name="vendor-admin-external-security-role"></a>仕入先管理者 (外部) のセキュリティ ポリシー

**仕入先管理者 (外部)** ロールは、仕入先の連絡先情報を管理し、新しい仕入先の共同作業ユーザーのプロビジョニング要求を行う外部仕入先に使用することができます。 このセキュリティ ロールを持つ外部ユーザーは、次のタスクを実行できます。

- 個人のタイトル、電子メール アドレス、および電話番号などの連絡担当者の情報を表示および変更します。
- 連絡先となっている仕入先勘定に新規または既存の連絡担当者を追加します。
- 作成した担当者を削除します。
- 連絡担当者と仕入先勘定の関連付けを有効化または無効化します。 連絡担当者と仕入先勘定の関連付けが無効にされた後、連絡担当者は新しい発注書またはその他のドキュメントで参照することはできません。
- 仕入先に固有の仕入先コラボレーション インターフェイス上のドキュメントへの連絡担当者のアクセスを拒否または許可する。 連絡担当者と仕入先勘定の関連付けを無効化した後、仕入先勘定への固有のドキュメントのアクセスは、常に拒否されます。
- **ユーザーのプロビジョニング** アクションを使用することで、連絡担当者の新しいユーザー アカウントをリクエストします。
- 連絡担当者のユーザー アカウントを無効にすることを要求します。
- セキュリティ ロールを追加または削除するために連絡担当者のユーザー アカウントを変更することを要求します。
- RFQ を表示します。

#### <a name="vendor-external-security-role"></a>仕入先 (外部) のセキュリティ ポリシー

**仕入先 (外部) ロール**は、発注書を操作する外部仕入先に使用できます。 このセキュリティ ロールを持つ外部ユーザーは、次のタスクを実行できます。

- 発注書に関する情報に応答して表示します。
- 仕入先コラボレーション請求書を管理します。
- 委託販売在庫を表示します。
- RFQ を表示し、それに対して回答します。
- 仕入先情報を表示する。

## <a name="set-up-security-roles-that-are-used-when-prospective-vendors-are-onboarded"></a>見込み仕入先がオンボーディングされたときに使用されるセキュリティ ロールの設定

見込み仕入先の登録要求によって開始されるオンボードの仕入先には、外部のセキュリティ ロールを設定する必要があります。 このロールは、**ユーザー リクエスト ワークフロー (プラットフォーム)** タイプのワークフローによって制御されるプロビジョニングのプロセス中に新規ユーザーに割り当てられます。 詳細については、このトピックで後述の [仕入先コラボレーションのユーザー要求を処理するワークフローの設定](#Set-up-workflows-to-process-vendor-collaboration-user-requests) を参照してください。

見込み仕入先のオンボードを行う方法の詳細については、[仕入先のオンボーディング](vendor-onboarding.md) を参照してください。

### <a name="set-up-a-security-role-that-is-used-when-a-new-prospective-vendor-user-request-is-submitted"></a>新しい見込み仕入先ユーザー要求が送信されたときに使用されるセキュリティ ロールの設定

1. **システム管理** > **セキュリティ** > **外部ロール** を選択します。
2. **新規** を選択してセキュリティ ロールと **見込み仕入先** 関係者ロールを選択します。

Finance and Operations で提供されている **仕入先見込顧客 (外部)** ロールを追加する必要があります。

セキュリティ ロールは、新しい仕入先登録ウィザードへのアクセスのみを許可します。

## <a name="set-up-workflows-to-process-vendor-collaboration-user-requests"></a>仕入先コラボレーション ユーザーの要求を処理するワークフローの設定

関連するすべてのタスクが完了し、適切な承認が与えられることを保証するために、仕入先コラボレーション ユーザーの要求を処理するワークフローを設定する必要があります。

仕入先コラボレーションのユーザー要求は、**仕入先管理者 (外部)** セキュリティ ロールまたは類似のアクセス許可を持つ外部仕入先か、自社の調達担当者が提出します。 また、仕入先のオンボーディング プロセス中の仕入先登録要求から生成することもできます。

リクエストには次の 3 つのタイプがあります。

- 新しいユーザーをプロビジョニングする要求
- 既存ユーザーを無効にする要求
- 既存のユーザーのセキュリティ ロールを変更する要求

仕入先コラボレーション ユーザー要求の詳細については、「[仕入先コラボレーション ユーザーの管理](manage-vendor-collaboration-users.md)」を参照してください。

仕入先コラボレーション ユーザー要求の 3 つのタイプすべてを処理するには、2 つ以上のワークフローを作成する必要があります。 新しいワークフローは、**ユーザー ワークフロー** ページで作成されます。

### <a name="example-of-a-workflow-for-provisioning-new-users-and-modifying-security-roles"></a>新しいユーザーをプロビジョニングおよびセキュリティ ロールを変更するためのワークフロー例

新しいユーザーを作成してセキュリティ ロールを変更する仕入先ユーザーの要求を処理するために、ワークフローの先頭に分岐条件を設定できます。 この方法では、要求が新しいユーザーの作成または既存のユーザーの変更であるかどうかに応じて、ワークフローの異なる分岐を使用します。

この分岐を設定するには、**ユーザー要求ワークフロー (プラットフォーム)** タイプの新しいワークフローを作成します。 このワークフローの分岐には、次の要素を含めることがあります。

#### <a name="branch-to-provision-new-users"></a>新しいユーザーをプロビジョニングするための分岐

1. 新しいユーザーに仕入先コラボレーション情報へのアクセスを許可することを承諾する担当者に、承認タスクを割り当てます。
2. Azure ポータルで新しい Microsoft Azure Active Directory (Azure AD) ユーザー アカウントを要求する担当者にタスクを割り当てます。 この手順では、事前に定義された **Azure B2B ユーザー招待状の送信**タスクを使用します。 Microsoft Dynamics 365 for Finance and Operations, Enterprise edition 7.3 以降のバージョンでは、B2B ユーザーを自動的に Azure AD にエクスポートすることができます。 定義済みの **Azure AD B2B ユーザーのプロビジョニング** を使用します。 詳細については、[Azure AD に B2B ユーザーをエクスポート](../../dev-itpro/sysadmin/implement-b2b.md) を参照してください。
3. 承認タスクを Azure にアップロードするユーザーに割り当てます。 勘定が正常に作成されていない場合、このユーザーはタスクを却下し、ワークフローを終了します。 この承認タスクは、B2B アプリケーション プログラミング インターフェイス (API) を使用して Azure に新しいユーザー アカウントを自動的にエクスポートするステップを含めるとスキップできます。
4. Finance and Operations で新しいユーザーをプロビジョニングする自動化タスクを追加します。 この手順では、事前に定義された**ユーザーの自動プロビジョニング**タスクを使用します。
5. 新しいユーザーに通知するタスクを追加します。 Finance and Operations の URL を含むようこそ電子メールを新しいユーザーに送信する可能性があります。 このメールでは、**電子メール メッセージ**ページで作成したテンプレートを使用して、**ユーザー ワークフロー パラメーター**ページを選択できます。 テンプレートには、**%portal URL%** タグを含めることができます。 ようこそ電子メールが生成されると、このタグは Finance and Operations のテナントの URL に置き換わります。

    > [!NOTE]
    > このワークフローは、ユーザー オンボードを含む複数のシナリオで使用できます。 たとえば、見込み仕入先または連絡担当者に仕入先コラボレーション アカウントを必要とする場合、使用できます。 したがって、複数の目的に使用できる一般的なステートメントとしてメールを使用する必要があります。

#### <a name="branch-to-modify-security-roles"></a>セキュリティ ロールを変更するための分岐

1. セキュリティ ロールへの変更を承諾する担当者に承認タスクを割り当てます。
2. 関連するセキュリティ ロールを追加または削除する自動化タスクを追加します。 この手順では、**ユーザーの自動プロビジョニング**タスクを使用します。

### <a name="example-of-a-workflow-for-inactivating-a-user"></a>ユーザーを無効にする方法のワークフロー例

**ユーザー要求ワークフロー プラットフォームの無効化**タイプのワークフローを作成し、次のタスクを追加します。

1. ユーザーを無効にする要求を承諾する担当者に承認タスクを割り当てます。 この承認ステップを自動化する条件を追加することができます。
2. ユーザーを無効化する自動化タスクを追加します。 この手順では、**ユーザーの自動無効化**タスクを使用します。
3. 必要なクリーンアップ タスクを追加します。 たとえば、Azure ポータルでディレクトリからアカウントを削除するタスクを追加できます。

## <a name="enable-vendor-collaboration-for-a-specific-vendor"></a>特定仕入先の仕入先コラボレーションの有効化

仕入先コラボレーションを使用するユーザー アカウントを作成する前に、仕入先コラボレーションを使用するための仕入先を設定する必要があります。 **仕入先** ページの **一般** タブで、**コラボレーションの有効化** フィールドを設定します。  次のオプションを使用できます。

- **有効 (発注書は自動で確認されます)** - 仕入先が変更を要求せずに受理した場合、発注書は自動的に確認されます。
- **有効 (発注書は自動確認されません)** - 仕入先が受理した後、組織によって手動で発注書を確認する必要があります。

> [!NOTE]
> 社内の調達担当者は、このタスクも完了できます。

## <a name="troubleshoot-the-provisioning-of-new-vendor-collaboration-users"></a>新しい仕入先の共同作業ユーザーのプロビジョニングのトラブルシューティング

新しい仕入先コラボレーション ユーザーは、**仕入先ユーザーのプロビジョニング** タイプの仕入先コラボレーション ユーザーの要求を処理するために設定したワークフロー経由でプロビジョニングされます。

新しいベンダー コラボレーション ユーザーの電子メール アドレスが、テナントとして Azure に登録されているドメインに属している場合 (つまり、管理対象ドメイン アカウントの場合)、電子メール アドレスは既存の Azure AD アカウントである必要があります。 それ以外の場合、プロビジョニング プロセスを実行することはできません。

Azure AD アカウント管理のワークフローでの **Azure B2B ユーザー招待の送信**タスクで使用されるプロセスの詳細については、[Azure Active Directory B2B コラボレーション](https://azure.microsoft.com/en-us/documentation/articles/active-directory-b2b-collaboration-overview/) を参照してください

## <a name="additional-resources"></a>その他のリソース

[外部仕入先との作業のために仕入先コラボレーションを使用する](vendor-collaboration-work-external-vendors.md)

仕入先のオンボーディング プロセスの簡単なビデオ[新しい仕入先の搭載](https://www.youtube.com/watch?v=0KUc3AGaTKk&feature=youtu.be)をご覧ください。

