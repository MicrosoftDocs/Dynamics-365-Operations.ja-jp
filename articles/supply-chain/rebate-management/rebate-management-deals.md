---
title: リベート管理取引
description: このトピックでは、リベートを管理する取引を作成する方法について説明します。 取引は、リベートやロイヤルティを計算するさまざまな方法と基準を制御するために使用されます。 これには、包含および除外のルールが含まれます。
author: sherry-zheng
ms.date: 02/19/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: TAMRebateDeal
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: chuzheng
ms.search.validFrom: 2021-02-19
ms.dyn365.ops.version: 10.0.18
ms.openlocfilehash: 76cdbf21cfbc0db7b363d0fbf60a1ecd0046efc1
ms.sourcegitcommit: a58dfb892e43921157014f0784bd411f5c40e454
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/04/2022
ms.locfileid: "8689694"
---
# <a name="rebate-management-deals"></a>リベート管理取引

[!include [banner](../includes/banner.md)]

リベート管理取引は、リベートやロイヤルティを計算するさまざまな方法と基準を制御するために使用されます。 これには、包含および除外のルールが含まれます。 リベート管理取引には、顧客リベート、顧客ロイヤルティ、仕入先リベートの 3 つのタイプがあります。 3 つのタイプのすべてが同様の設定を使用します。 このトピックでは、それらの違いについて説明します。

## <a name="create-a-deal"></a>取引の作成

1. **リベート管理 \> リベート管理取引 \> すべてのリベート管理取引** に移動します。 **すべてのリベート管理取引** リスト ページでは、3 つのタイプすべての取引を作成および処理できます。

    または、次のいずれかの手順に従います。 いずれの場合も、表示されるリスト ページには **すべてのリベート管理取引** リスト ページと同じ設定がすべて表示されますが、フィルター処理されて 1 つのタイプの取引のみが表示されます。

    - **リベート管理 \> リベート管理取引 \> 顧客リベート取引** に移動して、顧客リベート取引のみを作成します。
    - **リベート管理 \> リベート管理取引 \> 顧客ロイヤルティ取引** に移動して、顧客ロイヤルティ取引のみを作成します。
    - **リベート管理 \> リベート管理取引 \> 仕入先リベート取引** に移動して、仕入先リベート取引のみを作成します。

1. アクション ウィンドウで、**新規** を選択します。
1. **新規取引の作成** ダイアログ ボックスで、次のフィールドを設定します:

    - **リベート管理取引** – リベート取引の [番号順序を設定](rebate-management-parameters.md) した場合、このフィールドはシステム生成の固有 ID に自動的に設定されます。 それ以外の場合は、一意の ID を入力します。
    - **説明** – 取引の説明を入力します。
    - **モジュール** – 取引が適用されるパートナーのタイプ (*顧客* または *仕入先*) を選択します。 開始したページによっては、選択した取引タイプに基づいてこのフィールドが自動的に設定される場合があります。 この場合、フィールドは読み取り専用です。
    - **タイプ** – 取引のタイプ (*リベート* または *ロイヤルティ*) を選択します。 開始したページによっては、選択した取引タイプに基づいてこのフィールドが自動的に設定される場合があります。 この場合、フィールドは読み取り専用です。
    - **調整基準** – 取引の計算方法と調整方法を選択します。

        - *取引* – 1 回のリベートで、取引のすべてのリベートおよび控除を処理する必要があります。
        - *明細行* – リベートは、取引の各明細行で処理する必要があります。

    - **転記プロファイル** – 取引が適用されるトランザクションに使用する [転記プロファイル](rebate-management-posting.md) を選択します。 このフィールドは、**調整基準** フィールドが *取引* に設定されている場合にのみ使用できます。 *明細行* に設定されている場合は、後で、取引に追加する各明細行にプロファイルを割り当てます。
    - **保証の転記プロファイル** – 保証のトランザクションに使用する [転記プロファイル](rebate-management-posting.md) を選択します。 転記プロファイルは、保証がロイヤリティに適用される場合にのみ、保証トランザクションに必要です。 それ以外の場合、転記プロファイルは必須ではありませんが、転記プロファイルが指定されていない場合は、保証の転記時にエラーが表示されます。 このフィールドは、**タイプ** フィールドが *ロイヤルティ* に設定されている場合にのみ使用できます。 
    - **リベート出力** – リベートまたはロイヤルティの支払方法を選択します。

        - *財務* – 自由書式貸方票または買掛金借方票を生成して、あとからお金の支払または受け取りできるようにします。 このオプションが選択されている場合、リベートで引当金を使用 **できます**。 このオプションは、**タイプ** フィールドが *ロイヤルティ* に設定されている場合にのみ使用可能なオプションです。
        - *品目* – 取引設定に従って品目の販売注文を生成します。 この販売注文では、各品目に価格 0 (ゼロ) が割り当てられます。 このオプションが選択されている場合、リベートで引当金を使用 **できません**。

    - **リベート通貨** – リベート、控除、またはロイヤルティの支払時に使用する通貨を選択します。
    - **ドキュメント メモ** – 必要に応じて、取引に関するメモを入力します。
    - **累積保証** – **タイプ** フィールドが *ロイヤルティ* に設定されている場合にのみ、このオプションを *はい* に設定できます。 このオプションは、保証された控除額の計算に影響します。 次に例を示します。

        - 取引の保証は、四半期ごとに $10,000 の支払いにつながる金額を販売することです。
        - 商品を販売している組織は、第 1 四半期に $12,000 の控除をもたらす金額を販売します。 その結果、$12,000 のロイヤルティが支払われ、$10,000 の保証が差し引かれます。
        - **累積保証** オプションが *はい* に設定されている場合、第 1 四半期に支払われた追加のロイヤルティ $2,000 が、第 2 四半期に適用されます。 したがって、顧客には $8,000 ($10,000 の保証から $2,000 の支払いを差し引いた金額) が保証されます。
        - 第 2 四半期に、$5,000 のロイヤルティが発生する売上を登録します。
        - システムでは、$3,000 の支払い ($8,000 の保証から $5,000 の支払い済みロイヤルティを差し引いた金額) を特定します。
        - **累積保証** オプション が *いいえ* に設定されている場合、$10,000 全額が四半期ごとに保証されます。 この保証は、第 2 四半期に提示された支払額 $5,000 ($10,000 の保証から支払済ロイヤルティ $5,000 を差し引いた金額) に相当します。

1. **OK** を選択して、取引を作成し、ダイアログ ボックスを閉じます。

この手順により、新規取引のヘッダー レベルが作成されます。 次に、取引に明細行を追加します。

## <a name="add-lines-to-a-deal"></a>取引に明細行を追加

前のセクションで説明したように取引を作成したら、リスト ページからその取引を開くことができます。 その後、取引の顧客または仕入先、品目、概算時間、基準、および計算方法を特定するための明細行を追加できます。 1 行または複数行を取引に含めることができます。 取引に複数行がある場合は、通常は同じタイプであるか、同じパラメーターが関連付けられます。 取引に明細行を追加するまで、その取引は実際には何も行いません。

1. 前のセクションで説明したように、適切なリベート取引のリスト ページを開きます。
1. 処理する取引を検索して開きます。
1. **リベート管理** クイック タブで、次のいずれかのボタンを選択して、取引明細行をグリッドに追加します。

    - **行の追加** – 新しい空白の取引明細行を追加します。
    - **行のコピー** – 既存の取引明細行が追加する取引明細行に類似している場合は、このボタンを選択してコピーし、そのコピーを追加できます。 新しい取引明細行には、関連するリベート管理の詳細からすべての設定が含まれます。 その後、設定を編集できます。 たとえば、通常、商品関係およびリベート率を更新します。

1. 新規取引明細行に次のフィールドを設定します:

    - **リベート管理番号** – リベート管理番号の [番号順序を設定](rebate-management-parameters.md) した場合、このフィールドはシステム生成の固有 ID に自動的に設定されます。 それ以外の場合は、一意の ID を入力します。
    - **タイプ** – 行が適用される取引のタイプ (*リベート* または *ロイヤルティ*)。 値はヘッダーからコピーされ、変更することはできません。
    - **説明** – 取引明細行の説明を入力します。
    - **会社** – 取引明細行を適用する会社 (法人) を選択します。 処理中に、ユーザーは、現在使用している会社に割り当てられている取引明細行のみを処理できます。 **顧客リベート取引** のリスト ページには、ユーザーのセキュリティ アクセスに基づいた複数会社ビューが表示されます。 ただし、リベートを編集および処理できるのは、現在使用している会社に対してのみです。
    - **アカウント コード** – 取引明細行が適用される顧客または仕入先の範囲を選択します。

        - *テーブル* – 取引明細行は、特定の顧客または仕入先に適用されます。
        - *グループ* – 取引明細行は、顧客または仕入先のグループに適用されます。 グループの設定方法の詳細については、[リベート管理グループ](rebate-management-groups.md) を参照してください。
        - *すべて* – 取引明細行は、すべての顧客または仕入先に適用されます。

    - **アカウント関係** – **アカウント コード** フィールドで *テーブル* を選択した場合、取引が適用される顧客または顧客を選択します。 *グループ* を選択した場合は、顧客または仕入先グループを選択します。 *すべて* を選択した場合は、このフィールドは使用できません。
    - **品目コード** – 取引明細行が適用される品目の範囲を選択します。

        - *テーブル* – 取引明細行は、特定の品目に適用されます。
        - *グループ* – 取引明細行は、品目グループに適用されます。 グループの設定方法の詳細については、[リベート管理グループ](rebate-management-groups.md) を参照してください。
        - *すべて* – 取引明細行は、すべての品目に適用されます。

    - **商品関係** – **品目コード** フィールドで *テーブル* を選択した場合、取引明細行が適用される品目を選択します。 *グループ* を選択した場合は、品目グループを選択します。 *すべて* を選択した場合は、このフィールドは使用できません。
    - **単位タイプ** – 取引明細行に適用される単位タイプ (*在庫単位* または *Catch Weight 単位*) を選択します。 古いレコードの場合、このフィールドは空白になる可能性があることに注意してください。 この場合は、*在庫単位* 値が想定されます。
    - **(在庫管理パラメーター)** – 取引明細行の残りのフィールドで、取引に含まれる品目を定義するために使用される在庫管理パラメーター (品目のサイズ、色、スタイル、サイト、倉庫など) の値を指定します。 分析コードを追加または削除するには、アクション ペインの **分析コードの表示** を選択します。

1. アクション ウィンドウで、**保存** を選択します。
1. 取引明細行が適用される品目セットをさらに制限する場合は、その行を選択し、**リベート管理** クイック タブで **フィルター** を選択して、標準の **照会** ダイアログ ボックスを開きます。
1. 追加する取引明細行ごとに、次のセクションで説明するように、**リベート管理の詳細** クイック タブで計算の詳細やその他の詳細を設定します。

## <a name="add-rebate-management-details-to-a-deal-line"></a>取引明細行にリベート管理の詳細を追加

取引の各行について、**リベート管理の詳細** クイック タブで詳細を設定する必要があります。 最初に、**リベート管理** クイック タブで取引明細行を選択します。 その後、**リベート管理の詳細** クイック タブのさまざまなタブを使用して、その取引明細行の値を設定します。 次のサブセクションでは、各タブの使用方法について説明します。

### <a name="settings-on-the-general-tab"></a>全般タブの設定

**リベート管理の詳細** クイック タブの **全般** タブでは、選択した取引明細行の計算方法と基準を設定できます。 この設定では、最小購買が必要かどうか、取引明細行に関連付けられている転記プロファイル、および計算の詳細を制御します。 次の表に、使用できるフィールドを示します。

| フィールド | 説明 |
|---|---|
| 計算方法 | 選択した取引明細行を他の取引明細行と結合するときに使用する方法を選択します (*段階的*、*累計*、*ローリング*、または *合計*)。 このフィールドの値は、リベート計算の結果に大きく影響する可能性があります。 各方法の詳細と、それがリベート計算に与える影響を示す例については、このトピックで後述する [取引明細行の計算方法](#calc-methods) を参照してください。 |
| 基準 | リベートを数量 (つまり、購入または販売された単位の総数) または金額 (つまり、購入または販売された商品の合計価格) のどちらに基づいて適用するかを選択します。 |
| トランザクション タイプ | <p>計算を行うべきポイントをプロセス内で選択します。</p><ul><li>*注文* – 注文済数量または金額を計算の基準として使用します。</li><li>*出荷済* – 出荷済数量または金額を計算の基準として使用します。</li><li>*請求書* – 請求数量または金額を計算の基準として使用します。</li></ul> |
| 単位 | **基準** フィールドで *数量* を選択した場合は、数量を指定する単位を選択します。 |
| 最小額 | 期間ごとに支払う必要がある最小金額を入力します。 貸方票が期間の売上を超える場合は、負の値を入力してリベート金額がマイナスになることを許可します。 |
| リベート削減の原則 | 取引明細行に適用する [リベート削減の原則](rebate-reduction-principle.md) を選択します。 |
| バリアント番号 | 取引明細行がバリアントを持つ品目に適用される場合は、取引明細行を適用するバリアントを選択します。 |
| 仕入先リベートの基準 | <p>このフィールドは、仕入先リベート (つまり、**モジュール** フィールドが *仕入先* に設定された取引) の場合にのみ表示されます。 仕入先リベートの基準を選択します:</p><ul><li>*発注書* – 仕入先が受け取るリベートは、発注書の数量または金額に基づきます。</li><li>*販売注文* – 仕入先は、商品が販売された後にのみリベートを受け取ります。 リベートは、販売注文の数量または金額に基づきます。</li></ul> |
| 価格基準 | <p>このフィールドは、仕入先リベート (**モジュール** フィールドが *仕入先* に設定された取引) の場合にのみ表示されます。 **仕入先リベートの基準** フィールドで *販売注文* を選択した場合は、適切な価格基準を選択します:</p><ul><li><p>*FIFO* – リベートを計算するには、**FIFO 購買価格の計算** 定期処理タスクを実行する必要があります。 (タスクを実行するには、**リベート管理 \> 定期処理のタスク \> FIFO 購買価格の計算** に移動します。) 先入れ先出し (FIFO) ルールは、売却される在庫の価値を計算するために使用されます。 この値は、仕入先のリベートの計算に使用されます。 次に例を示します。</p><ul><li>**売却済の在庫** 1,000 単位を各 $3.00 = $3,000</li><li>**FIFO に基づく現在の購買価格** $2.00</li><li>**作業計算:** *売上単位* × *現在の購買価格* = 1,000 × $2.00 = $2,000</li></ul></li><li><p>*最新購買価格* – 仕入先リベートの計算には、最新の購買トランザクションの値が使用されます。 次に例を示します。</p><ul><li>**売却済の在庫** 1,000 単位を各 $3.00 = $3,000</li><li>**最新購買価格:** $2.00</li><li>**作業計算:** *売上単位* × *最新購買価格* = 1,000 × $2.00 = $2,000</li></ul></li><li><p>*平均購買価格* – 仕入先リベートの計算には、直近 *X* か月の 加重平均値が使用されます。 このオプションを選択する場合は、**月数** フィールドに月数を入力する必要があります (**価格基準** フィールドが *平均購買価格* に設定されている場合にのみ使用できます)。 次に例を示します。</p><ul><li>**売却済の在庫** 1,000 単位を各 $3.00 = $3,000</li><li>**平均購買価格:** $2.00</li><li>**作業計算:** *売上単位* × *平均購買価格* = 1,000 × $2.00 = $2,000</li></ul></li><li><p>*販売価格* – 販売価格は、仕入先リベートの計算に使用されます。 次に例を示します。</p><ul><li>**売却済の在庫** 1,000 単位を各 $3.00 = $3,000</li><li>**平均購買価格:** $2.00</li><li>**作業計算:** *売上単位* × *販売価格* = 1,000 × $3.00 = $3,000</li></ul></li></ul> |
| 当期の月数 | このフィールドは、仕入先リベート (**モジュール** フィールドが *仕入先* に設定された取引) の場合にのみ表示されます。 **価格基準** フィールドで *平均購買価格* を選択した場合は、使用する月数を入力します。 |
| 転記プロファイル | 選択した取引明細行に適用する [転記プロファイル](rebate-management-posting.md) を選択します。 このプロファイルは、取引ヘッダーの **調整基準** フィールドが *明細行* に設定されている場合にのみ使用されます。 **調整基準** フィールドが *取引* に設定されている場合は、取引ヘッダーに設定された転記プロファイルが常に使用されます。 転記プロファイルが取引明細行で設定されていない場合は、取引ヘッダーに設定された転記プロファイルが使用されます。 |
| 保証用の転記プロファイル | このフィールドは **転記プロファイル** フィールドと同様に機能しますが、ロイヤルティにのみ適用されます。 |
| 支払タイプ | 取引に対して選択された転記プロファイルの支払タイプ。 |
| 消費税込み | トランザクションが内税かどうかを選択します。 税金の算入は、**基準** フィールドが *値* に設定されている場合にのみ関連します。 請求金額が税込金額として使用されます。 リベートの計算が割合に基づく場合は、リベート率に税込金額が乗算されます。 計算では、取引明細行の消費税額が使用されることに注意してください。 |
| 訂正票を含める | <p>このオプションを *はい* に設定すると、貸方票がリベート計算に含まれます。</p><p>このオプションを *はい* に設定すると、効果は **トランザクション タイプ** フィールドのによって異なります:</p><ul><li>**トランザクション タイプ** フィールドが *請求書* に設定されている場合、貸方表を考慮した計算が行われます。 この構成は、通常の構成です。</li><li>**トランザクション タイプ** フィールドが *注文* に設定されている場合、計算では、マイナス値の販売注文と未処理の返品済注文の両方が考慮されます。</li></ul> |
| 割引金額 | このオプションを *はい* に設定すると、取引明細行に割引がある場合に、品目の割引金額に基づいて計算されます。 |
| 支払済請求書のみ | 全額支払済請求書のみを計算対象とする場合は、このオプションを *はい* に設定します。 (つまり、一部支払済請求書についてはリベートは計算されません。) このオプションは、**トランザクション タイプ** フィールドが *請求書* に設定されている場合にのみ使用できます。 |
| 自由書式を含める | このオプションを *はい* に設定すると、自由書式の請求書が計算に含まれます。 自由形式の請求書は、**品目コード** フィールドが *すべて* に設定されている取引明細行にのみ含めることができます。 |
| 決済割引を含める | このオプションを *はい* に設定すると、初回決済割引分のリベートが減額されます。 組織が初回決済割引を受けることを前提としています。 このオプションを *いいえ* に設定すると、決済割引を後で使用できます。 |
| ドキュメント メモ | リベート トランザクション仕訳帳明細行でトランザクション テキストとして使用するメモを入力します。 |

### <a name="settings-on-the-dates-tab"></a>日付タブの設定

**リベート管理の詳細** クイック タブにある **日付** タブ上の設定は、**全般** タブで指定された計算の頻度とタイミングを定義します。これらは、処理時の計算方法を決定します。

このタブでは、選択した取引明細行が有効な日付の範囲と計算頻度を指定します。 保証を転記するかどうか、およびいつ転記するかも指定できます。

ツール バーのボタンを使用して、日付明細行をグリッドに追加したり、削除できます。 複数の日付明細行が存在する場合、有効な日付範囲が重複しないようにする必要があります。 それ以外の場合、取引を保存しようとするとエラー・メッセージが表示されます。

次の表では、各日付明細行で使用できるフィールドについて説明します。

| フィールド | 説明 |
|---|---|
| 自 | 日付明細行を適用する最初の日付を入力します。 取引のヘッダーに "開始日" および "終了日" の日付が指定されている場合、これらの日付は新しい日付明細行ごとに既定値として使用されます。 |
| 最終日 | 日付明細行を適用する最後の日付を入力します。 取引のヘッダーに "開始日" および "終了日" の日付が指定されている場合、これらの日付は新しい日付明細行ごとに既定値として使用されます。 |
| 間隔 | 取引明細行を計算する頻度を指定します。 ここに整数を入力し、**累計** フィールドで単位を選択します。 たとえば、隔週で計算するには、**間隔** フィールドを *2* に、**累計** フィールドを *週* に設定します。 |
| 累計 | **間隔** 設定に適用する単位を選択します。 *有効期間* を選択して、取引明細行の全有効期間について計算します。 *カスタマイズされた期間* を選択して、一般会計で定義された期間を選択します。 この場合、**期間タイプ** フィールドも設定する必要があります。 |
| 期間タイプ | このフィールドは、**累計** フィールドが *カスタマイズされた期間* に設定されている場合にのみ使用できます。 選択可能な値は、一般会計で定義された期間タイプから取得されます。 |
| 週の最初の曜日 | 期間内の週の識別方法を指定します。 このフィールドは、**累計** フィールドが *週* に設定されている場合にのみ使用できます。 |
| 請求単位 | 取引明細行に対してリベートを請求できる頻度を指定します。 ここに整数を入力し、**請求元** フィールドで単位を選択します。 |
| 請求元 | **請求単位** 設定に適用する単位を選択します。 *有効期間* を選択して、取引明細行の有効期間全体で 1 回のみ請求を許可します。 *カスタマイズされた期間* を選択して、一般会計で定義された期間を選択します。 この場合、**請求期間タイプ** フィールドも設定する必要があります。 |
| 請求期間タイプ | このフィールドは、**請求元** フィールドが *カスタマイズされた期間* に設定されている場合にのみ使用できます。 選択可能な値は、一般会計で定義された期間タイプから取得されます。 |
| 転記時の処理 | 請求明細行を転記時に処理する場合は、このチェック ボックスを選択します。 このオプションは、**全般** タブの **トランザクション タイプ** フィールドが *出荷済* または *請求書* に設定されている取引明細行でのみ使用できます 。 引当金については、納品書または請求書が生成された際に転記されます。 |
| 保証単位 | このフィールドは、ロイヤルティ取引にのみ適用されます。 **累計** 設定によって定義された期間中にロイヤルティの保証を計算する頻度を指定します。 ここに整数を入力し、**支払保証** フィールドで支払時期を選択します。 |
| 支払保証 | <p>このフィールドは、ロイヤルティ取引にのみ適用されます。 保証計算の頻度を定義するために、**保証単位** フィールドと組み合わせて使用されます。 次の値からいずれか 1 つを選択します。</p><ul><li><p>*期間の開始* – 保証は、日付明細行に対して定義された契約期間の開始時に支払われます。 全額保証が最初に処理されます。 保証金額を超えたロイヤルティの金額だけがロイヤルティとして転記されます。 次に例を示します。</p><ul><li>**最小保証:** 2 か月で $10,000。</li><li>**月 1:** $10,000 が保証として転記され、ロイヤルティに $0 が転記されました。</li><li>**月 2:** $2,000 がロイヤルティに転記され、保証に $0 が転記されました。</li><li>**作業計算:** *残りの保証* – *転記されたロイヤルティ* = $0 – $2,000 = -$2,000。</li></ul><p>$2,000 のロイヤルティの支払が必要なため、$2,000 の仕訳が作成されます。</p><p>**注:** 保証は、最初の期間の控除引当金と共に計算および転記される必要があります。</p></li><li><p>*期間の終了* – 保証は、日付明細行に定義されている控除契約の終了まで支払われません。 次に例を示します。</p><ul><li>**最小保証:** 2 か月で $10,000。</li><li>**月 1:** $5,000 がロイヤルティとして転記され、仕訳が作成されました。</li><li>**月 2:** $7,000 がロイヤルティとして転記され、仕訳が作成されました。</li><li>**作業計算:** ロイヤルティは保証金額を超えるので $0 が保証に転記されます。</li></ul><p>**注:** 保証は、最終期間の控除およびリベート トランザクションと一緒の場合にのみ計算および転記される必要があります。</p></li></ul> |
| 最小保証 | このフィールドは、ロイヤルティ取引にのみ適用されます。 ロイヤルティに対する保証の最小金額を、取引ヘッダーに定義された通貨で入力します。 |

### <a name="settings-on-the-lines-tab"></a>明細行タブの設定

**リベート管理の詳細** クイック タブの **明細行** タブでは、選択した取引明細行の計算行を定義できます。 各計算行には、数量または値のしきい値、および関連する報酬金額または品目が設定されます。 **全般** の **基準** フィールドは、各計算行が数量または値に基づくかどうかを指定します。

ツール バーのボタンを使用して、計算行をグリッドに追加したり、削除できます。 任意の数の計算行を持つことができます。 ただし、複数の計算行が存在する場合は、"to" と "from" の数量または値の範囲が重複しないようにする必要があります。

次の表では、各計算行で使用できるフィールドについて説明します。

| フィールド | 説明 |
|---|---|
| 数量/値から | 計算行を適用する最小数量または値を入力します。 |
| 数量/値まで | 計算行を適用する最大数量または値を入力します。 |
| リベート管理方法 | <p>このフィールドは、ヘッダーの **リベート出力** フィールドが *財務* に設定されている取引でのみ使用できます。 リベートの計算に使用する方法を選択します:</p><ul><li>*固定* – 固定価格の金額が明細行に使用されます。</li><li>*パーセント* – 売上金額の割合が使用されます。</li><li>*レート* – 注文ごとの固定価格の金額が使用されます。</li></ul><p>**重要:** **明細行** タブのすべての計算行に同じ方法を使用することを強くお勧めします。新しい方法が必要な場合は、新しい取引明細行を作成します。 **リベート管理** クイック タブの **明細行のコピー** ボタンを使用して、既存の取引明細行から新しい取引明細行を作成できます。</p><p>**注:** **リベートの出力** フィールドが *品目* に設定されている場合、このフィールドは常に *固定* に設定されます。 品目の指定方法については、このテーブルに続くテキストを参照してください。 |
| リベート管理金額 | このフィールドは、ヘッダーの **リベート出力** が *財務* に設定されている取引でのみ使用できます。 **リベート管理方法** フィールドで選択した方法に基づいて、リベートの計算に使用する金額を入力します。 |

前のテーブルで説明したように、ヘッダーの **リベート出力** フィールドが *品目* に設定された取引の場合は、**明細行** タブのすべての計算行に対して提供される品目を指定する必要があります。品目を指定するには、次の手順に従います。

1. **明細行** タブで、必要な計算行が存在しない場合は作成し、選択します。
1. 計算行を作成した後、取引が保存されていない場合は、アクション ペインで **保存** を選択します。
1. **明細行** タブで、**品目** を選択します。
1. **品目** ページで、必要に応じてアクション ペインのボタンを使用して、品目をグリッドに追加するか、品目を削除します。 各行で、次のフィールドを設定します:

    - **品目番号** – 表示される品目を選択します。
    - **(他の分析コード)** – より多くの分析コードを使用して品目 (例えば、品目コンフィギュレーション、サイズ、色、スタイル、サイト、倉庫など) を定義する必要がある場合は、それらを指定します。 使用可能な分析コードを追加または削除するには、アクション ペインの **分析コードの表示** を選択します。
    - **数量** – 選択した計算行のしきい値が満たされた後に指定される数量を入力します。
    - **単位** – **数量** 値を指定する単位を選択します。
    - **倍数** – このフィールドは、**数量** フィールドと組み合わせて使用されます。 たとえば、品目行では、**数量** フィールドを *2* に、**倍数** フィールドを *100* に設定します。 販売注文の合計数量が 150 の場合、品目のうち 2 つ (100あたり 2 つ) が無料になります。

### <a name="settings-on-the-inventory-dimensions-tab"></a>在庫分析コード タブの設定

**リベート管理の詳細** クイック タブの **在庫分析コード** タブには、選択した取引明細行に対して指定されている製品で使用可能なすべての分析コード値が表示されます。 これには、**リベート管理** クイック タブに表示されない分析コードが含まれます。 選択した製品に適用される分析コードの値のみを編集できます。

アクション ペインの **分析コードの表示** を選択することで、**リベート管理** クイック タブのグリッドにさらに分析コードを追加できます。

## <a name="calculation-methods-for-deal-lines"></a><a name="calc-methods"></a>取引明細行の計算方法

前のセクションで説明したように、いずれかの取引明細行の詳細を設定するたびに、その行の計算方法を選択する必要があります。 このセクションでは、各計算方法について説明し、各方法で注文および取引明細行のリベート合計を計算する方法の例を示します。 これらの例では、注文と取引明細行は同じです。 計算方法のみが異なります。

### <a name="stepped-calculation-method"></a>段階的な計算方法

段階的計算方法はステップごとに計算し、各取引明細行が販売数量または金額に到達するまで、リベートに段階的に貢献します。 ステップは、**リベート管理の詳細** クイック タブの **全般** タブの **基準** フィールドの設定に応じて、販売される商品の数量または金額に基づくことができます。

たとえば、取引明細行は、**計算方法** フィールドが *段階的* に設定され、**基準** フィールドが *値* に設定されるように設定されます。 これには、次のリベートを提供する計算行が含まれます:

- **明細行 A:** $1,000 までは 10%
- **明細行 B:** $2,500 までは 25%

購入または販売した商品の価値が $2,000 の場合、結果として得られる $350 のリベートは、以下のように計算されます:

- **リベート (A):** *しきい値 (A)* × *パーセンテージ (A)* = $1,000 × 10% = $100
- **リベート (B):** (*売却額* – *しきい値 (A)*) × *パーセンテージ (B)* = ($2,000 – $1,000) × 25% = $250
- **リベートの合計:** *リベート (A)* + *リベート (B)* = $100 + $250 = $350

**基準** フィールドが *値* ではなく *数量* に設定されている場合、段階的な計算方法は同様に機能します。 第 1 ステップは、識別された数量に対して、第 2 ステップに到達するまで使用されます。 第 2 ステップは、第 3 ステップに達するまで、第 1 ステップを超えたすべての数量に使用されます。 このプロセスは、以降のすべてのステップで継続されます。

### <a name="cumulative-calculation-method"></a>累計計算方法

累計計算方法では、1 つの計算行のみを使用してリベートを計算します。 取引明細行で複数の計算行が使用できる場合は、到達した最高金額または最大数量の計算行が、数量または金額の全体に対して使用されます。 他の計算方法と同様に、累計方法では、**リベート管理の詳細** クイック タブの **全般** タブにある **基準** フィールドの設定を使用して、リベートの計算に販売数量または販売額のどちらを使用するかを決定します。

たとえば、取引明細行は、**計算方法** フィールドが *累計* に設定され、**基準** フィールドが *値* に設定されるように設定されます。 これには、次のリベートを提供する計算行が含まれます:

- **明細行 A:** $1,000 までは 10%
- **明細行 B:** $2,500 までは 25%

購入または販売した商品の価値が $2,000 の場合、計算では明細行 B のみが使用されます。結果として得られる $500 のリベートは、以下のように計算されます:

- **リベートの合計:** *売却額* × *リベート (B)* = $2,000 × 25% = $500

### <a name="rolling-calculation-method"></a>ローリング計算方法

ローリング計算方法では、取引で使用可能なすべての計算行を計算します。 計算行が複数あり、複数の計算行に到達した場合、到達したすべての計算行が使用されますが、上限のしきい値は各割合に適用されます。 他の計算方法と同様に、ローリング方法では、**リベート管理の詳細** クイック タブの **全般** タブにある **基準** フィールドの設定を使用して、リベートの計算に販売数量または販売額のどちらを使用するかを決定します。

たとえば、取引明細行は、**計算方法** フィールドが *ローリング* に設定され、**基準** フィールドが *値* に設定されるように設定されます。 これには、次のリベートを提供する計算行が含まれます:

- **明細行 A:** $1,000 までは 10%
- **明細行 B:** $2,500 までは 25%

購入または販売した商品の価値が $2,000 の場合、結果として得られる $600 のリベートは、以下のように計算されます:

- **リベート (A):** *しきい値 (A)* × *パーセンテージ (A)* = $1,000 × 10% = $100
- **リベート (B):** *売却額* × *パーセンテージ (B)* = $2,000 × 25% = $500
- **リベートの合計:** *リベート (A)* + *リベート (B)* = $100 + $500 = $600

### <a name="total-calculation-method"></a>合計計算方法

合計計算方法では、すべての計算行を使用してリベートを計算します。 合計数量を適用して、到達した計算行ごとにリベートを計算し、各計算行はその割合を全額に適用します。 他の計算方法と同様に、合計方法では、**リベート管理の詳細** クイック タブの **全般** タブにある **基準** フィールドの設定を使用して、リベートの計算に販売数量または販売額のどちらを使用するかを決定します。

たとえば、取引明細行は、**計算方法** フィールドが *合計* に設定され、**基準** フィールドが *値* に設定されるように設定されます。 これには、次のリベートを提供する計算行が含まれます:

- **明細行 A:** $1,000 までは 10%
- **明細行 B:** $2,500 までは 25%

購入または販売した商品の価値が $2,000 の場合、結果として得られる $700 のリベートは、以下のように計算されます:

- **リベート (A):** *売却額* × *パーセンテージ (A)* = $2,000 × 10% = $200
- **リベート (B):** *売却額* × *パーセンテージ (B)* = $2,000 × 25% = $500
- **リベートの合計:** *リベート (A)* + *リベート (B)* = $200 + $500 = $700
