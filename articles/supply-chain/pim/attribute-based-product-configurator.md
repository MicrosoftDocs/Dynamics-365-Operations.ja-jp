---
title: 制約ベースの製品コンフィギュレーションの属性ベースの販売価格
description: このトピックでは、物理的な部品表と工順ではなく、コンポーネントと属性に基づく販売価格の販売価格モデルを作成する方法について説明します。
author: sorenva
manager: tfehr
ms.date: 10/2/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: sorenand
ms.search.validFrom: 2020-08-17
ms.dyn365.ops.version: Release 10.0.15
ms.openlocfilehash: c0f9c1bb94b4dcc3c3c1e7656868ef6e6bd903db
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/13/2020
ms.locfileid: "4431628"
---
# <a name="attribute-based-sales-prices-for-constraint-based-product-configuration"></a>制約ベースの製品コンフィギュレーションの属性ベースの販売価格

このトピックでは、物理的な部品表と工順ではなく、コンポーネントと属性に基づく販売価格の販売価格モデルを作成する方法について説明します。 製品コンフィギュレーション モデルごとに、複数の販売価格モデルを作成できます。

## <a name="set-relevant-product-information-management-parameters"></a>関連する製品情報管理パラメーターの設定

価格モデルの作成を開始する前に、販売価格モデルを作成するときに使用する既定の通貨を定義する必要があります。 すべての注文明細行または見積明細行の価格内訳を含む Microsoft Excel ファイルを添付するかどうかを選択することもできます。 価格内訳により、コンフィギュレーション済みの製品に対する特定の販売価格に到達した方法について顧客と詳細情報を共有することができます。

既定の通貨を設定する方法は、次のとおりです。

1. **製品情報管理 \> 設定 \> 製品情報管理パラメーター** に移動します。
1. **制約ベースの製品コンフィギュレーション モデル** のタブを開きます。
1. **既定の通貨** ドロップダウン リストを開き、通貨を選択します。

    ![制約ベースの製品コンフィギュレーションの既定の通貨を設定する](media/prod-config-currency.png "制約ベースの製品コンフィギュレーションの既定の通貨を設定する")

1. すべての注文明細行または見積明細行に対して価格内訳を含む Excel ファイルを関連付ける場合、**価格モデル** のセクションで **添付** を *はい* に設定します。

## <a name="build-your-sales-price-models"></a><a name="build-price-model"></a>販売価格モデルの作成

販売価格モデルを作成する方法は、次のとおりです。

1. **製品情報管理 \> 製品 \> 製品コンフィギュレーション モデル** に移動します。
1. ターゲットにする製品構成モデルを選択します。
1. アクション ウィンドウで、**モデル** タブを開き、**設定** グループから、**価格モデル** を選択します。
1. **価格モデル** ページが開きます。
1. 価格モデルを選択するか、または新しいモデルをグリッドに追加します。
1. **編集** を選択すると、選択したモデルの編集ページが開き、次の機能が提供されます。
    - フォームのヘッダーに既定の通貨が表示され、価格設定に新しい通貨を追加することができます。
    - 左のウィンドウには、製品モデルのすべてのコンポーネントとユーザー要件が表示されます。 製品モデル ツリーの各ノードには、1 つの基準価格式と、任意の数の式のルールを設定できます。 式のルールは条件と式で構成され、各式のルールは製品の価格を管理するのに役立つ製品オプションを対象としています。
    - 条件と式を作成するとき、製品モデルの計算で使用可能な演算子を同じく使用できます。 式エディターでは、条件と式の両方もサポートされます。
1. 左の列でノードを選択し、前の手順で説明されている機能を使用して、その価格ルールを設定します (この手順の後で示される例も参照してください)。 必要に応じて、ノードごとにこの手順を繰り返します。

次の例では、顧客が選択したコンフィギュレーションに応じて、次の 5 つのうち 1 つ以上の式ルールによって変更可能で、静的な数字である 899.95 EUR という基本価格を示します。

- 白いキャビネット仕上げの場合、59.95 EUR 減算します。
- 角の保護については、35.95 EUR 加算します。
- 金属のフロント グリルの場合、89.95 EUR 加算します。
- ローズウッド キャビネット仕上げの場合、119.95 EUR 加算します。
- スピーカの高さは単位ごとに 12.95 EUR 加算します。

![価格モデルの例](media/prod-config-rules-example.png "価格モデルの例")

## <a name="add-support-for-multiple-currencies"></a>複数通貨のサポートを追加する

コンフィギュレーション可能な製品を販売する場合、価格が顧客の通貨で明示的に設定されているかどうかシステムが確認します。 その場合、明示的な値が使用されます。 それ以外の場合は、システムは、販売会社に対して設定された通貨為替レートを使用して、既定の通貨の値を顧客の通貨に変換します。

追加通貨で明示的な価格を追加する方法は、次のとおりです。

1. [販売価格モデルの作成](#build-price-model) で説明されているように、価格モデルの編集ページを開きます。
1. 価格モデルのヘッダーで **追加** ボタンを選択し、使用可能な通貨を一覧表示する **通貨** ドロップダウン ダイアログボックスを開きます。
1. **通貨** ドロップダウン ダイアログボックスで追加する通貨を選択し、**OK** を選択します。
1. **現在の通貨** ドロップダウン リストに、追加したばかりの通貨に加え、以前に追加された他の通貨すべてが含まれるようになりました。 新しい通貨を選択し、**式ルール** セクションのグリッドに 2 つの式フィールドが含まれていることに注目してください。
    - **式** - **現在の通貨** に対して現在選択されている通貨を使用して価格を検索する式 (または定数値) を示しています。
    - **既定の式** - 現在、(**現在の通貨** フィールドに表示されている) 既定値を使用して価格を検索する式 (または定数値) を示しています。

    > [!NOTE]
    > 式ルールに対する **条件** フィールドは、既定の通貨によって「所有」されており、他の通貨に対する条件を変更することはできません。 また、既定の通貨以外の通貨が **現在の通貨** として選択されている場合、新しい式のルールを追加することはできません。
1. 現在の通貨に応じて、**式** 列の値を編集します。

次の例では、_EUR_ が既定の通貨であり、_USD_ は追加の通貨として追加されています。

![複数の通貨を使用するモデルの例](media/prod-config-rules-currency-example.png "複数の通貨を使用するモデルの例")

> [!NOTE]
> 既定以外の通貨に対して一意となる式ルールを追加することはできません。 既定の通貨以外の通貨にのみ関連する式ルールを作成するには、既定の通貨の価格式を 0 に設定します。 その後、既定以外の通貨に適切な式を設定します。

## <a name="test-your-price-model"></a>価格モデルのテスト

コンフィギュレーション セッションで販売価格が機能する方法についてテストするには、[販売価格モデルの作成](#build-price-model) で説明されているように、価格モデルの編集ページを開き、アクション ウィンドウの **テスト** を選択します。 **製品モデルのテスト** ダイアログ ボックスが開き、以下の操作を実行できます。

- ここで提供されるコンフィギュレーション設定を使用して製品オプションを選択し、**価格および出荷日** について表示されている値への影響を確認します。
- **価格内訳の表示** を選択し、価格の計算方法に関する完全な詳細情報を示す Excel ドキュメントをダウンロードします。

![製品モデルのテスト](media/prod-config-test.png "製品モデルのテスト")

ダウンロードされたスプレッドシートには、絶対値と利益率の両方が有効な価格要素ごとに割合で表示されます。 **製品情報管理パラメーター** ページで **添付** 価格モデル オプションを設定した場合、この Excel シートが注文明細行または見積明細行に添付されます。

![価格内訳を示す Excel スプレッドシート](media/prod-config-excel-example.png "価格内訳を示す Excel スプレッドシート")

## <a name="set-up-selection-criteria-for-price-models"></a>価格モデルの選択基準を設定する

価格モデルが設定されている場合、少なくとも 1 つの選択基準を設定し、見積または注文をコンフィギュレーションするときに価格モデルが選択されるようにする必要があります。 これを行うには、1 つ以上のクエリを設定します。 販売価格モデルが一致した組み合わせについて、クエリによって、特定の顧客、地域、期間、およびその他の基準に対する販売価格を対象とした優れた柔軟性が提供されます。

価格モデルの選択基準を設定する方法は、次のとおりです。

1. **製品情報管理 \> 製品 \> 製品コンフィギュレーション モデル** に移動します。
1. ターゲットにする製品構成モデルを選択します。
1. アクション ウィンドウで、**モデル** タブを開き、**設定** グループから、**価格モデル基準** を選択します。 **価格モデル基準** ページが開きます。
1. 必要なクエリ行がまだ存在しない場合、アクション ウィンドウの **新規** を選択して新しい行をグリッドに追加し、次の設定をします。
    - **名前** - この行の名前を入力します。
    - **説明** - クエリとその目的を簡単に説明します。
    - **価格モデル** - トリガー時にクエリが適用される [価格モデル](#build-price-model) を選択します (現在のコンフィギュレーション モデルから)。
    - **注文タイプ** - クエリを適用する注文のタイプを選択します。
    - **発効日** - クエリを適用する最初の日を指定します。
    - **有効期限** - クエリを適用する最後の日付を指定します。

    ![価格モデル基準](media/prod-config-price-model-criteria.png "価格モデル基準")

1. 定義するクエリの行を選択し、**アクション ウィンドウ** で **編集** を選択します。 クエリ デザイナー ダイアログボックスが開きます。 Supply Chain Management のクエリ デザイナーと同じように機能します。 これを使用して、選択した行の価格モデルを適用する条件を定義します。

1. 必要なクエリごとに手順 4-5 を繰り返します。
    > [!TIP]
    > 追加する必要がある行に似ている既存の行をコピーすることによって、時間を節約できます。 これを行うには、対象となる行を選択し、アクション ウィンドウの **複製** を選択します。

1. 基準の設定が完了したら、**価格モデルの基準** リストで適切な順序に並び替えます。 行の位置変更をするには、行を選択し、アクション ウィンドウの **アップ** または **ダウン** を選択します。

    > [!IMPORTANT]
    > コンフィギュレーション時に、システムはリストの先頭から検索を開始し、見積または注文明細行のデータに一致する最初のクエリを使用します。 したがって、最も特定的なクエリを先頭に配置する必要があります。 一般なクエリをリストの先頭に配置した場合、正確な顧客を対象にしているクエリ、またはコンフィギュレーションに応じたクエリが一覧の下の方に存在する可能性がありますが、これが使用されます。

## <a name="set-attribute-based-sales-prices-for-the-product-model-version"></a>属性ベースの販売価格を製品モデルのバージョンに設定する

最後の手順は、製品モデルのバージョンに属性ベースの販売価格を指定することです。 これを行うには、次の手順を実行します。

1. **製品情報管理 \> 製品 \> 製品コンフィギュレーション モデル** に移動します。
1. ターゲットにする製品構成モデルを選択します。
1. アクション ウィンドウで、**モデル** タブを開き、**製品モデルの詳細** グループから、**バージョン** を選択します。
1. **バージョン** ページが開きます。 **価格決定方法** が **属性ベース** に設定されていることを確認します。
    ![価格決定方法を属性ベースに設定する](media/prod-config-versions.png "価格決定方法を属性ベースに設定する")


[!INCLUDE[footer-include](../../includes/footer-banner.md)]