---
title: フォーミュラとフォーミュラ バージョン
description: このトピックでは、フォーミュラおよびフォーミュラ バージョンに関する情報を提供します。 フォーミュラは材料、成分、およびプロセス製造での特定プロセスの結果を定義します。 フォーミュラは、プロセス製造で製品を計画および生産するのに使用されます。
author: cvocph
manager: AnnBe
ms.date: 09/12/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: PlanActivity, ReqSupplyDemandSchedule
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: conradv
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: bbffc298ff5d2442092f8f0c987b7e79a7934a84
ms.sourcegitcommit: 9d4c7edd0ae2053c37c7d81cdd180b16bf3a9d3b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/15/2019
ms.locfileid: "1564858"
---
# <a name="formulas-and-formula-versions"></a><span data-ttu-id="24626-105">フォーミュラとフォーミュラ バージョン</span><span class="sxs-lookup"><span data-stu-id="24626-105">Formulas and formula versions</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="24626-106">フォーミュラは材料、成分、およびプロセス製造での特定プロセスの結果を定義します。</span><span class="sxs-lookup"><span data-stu-id="24626-106">A formula defines the materials, ingredients, and outcomes of a specific process in process manufacturing.</span></span> <span data-ttu-id="24626-107">対応する工順と共に、フォーミュラはプロセス製造での全体のプロセスを定義します。</span><span class="sxs-lookup"><span data-stu-id="24626-107">Together with the corresponding route, the formula defines the whole process in process manufacturing.</span></span> <span data-ttu-id="24626-108">フォーミュラは、プロセス製造で製品を計画および生産するのに使用されます。</span><span class="sxs-lookup"><span data-stu-id="24626-108">Formulas are used to plan and produce products in process manufacturing.</span></span>

<span data-ttu-id="24626-109">フォーミュラは、構成要素およびフォーミュラ品目の特定の数量を生産するのに必要な数量で構成されます。</span><span class="sxs-lookup"><span data-stu-id="24626-109">A formula consists of the ingredients and quantities that are required in order to produce a specific quantity of a formula item.</span></span> <span data-ttu-id="24626-110">実行するタスクによって、[在庫および倉庫管理] または [製品情報管理] から式機能にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="24626-110">Depending on the task that you perform, you can access formula functionality from Inventory and warehouse management or Product information management.</span></span>

## <a name="formulas-and-formula-lines"></a><span data-ttu-id="24626-111">式と式明細行</span><span class="sxs-lookup"><span data-stu-id="24626-111">Formulas and formula lines</span></span>
<span data-ttu-id="24626-112">式は 1 つ以上の式明細行で構成され、この明細行は、式を構成する材料または品目を識別します。</span><span class="sxs-lookup"><span data-stu-id="24626-112">A formula consists of one or more formula lines that identify the ingredients or items that make up the formula.</span></span> <span data-ttu-id="24626-113">式明細行には部品表 (BOM) 品目、式品目、Catch Weight 品目、購買品目、連産品、副産物が含まれる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="24626-113">A formula line can contain Bill of materials (BOM) items, formula items, catch-weight items, purchased items, co-products, or by-products.</span></span> <span data-ttu-id="24626-114">多くの品目が複数の製品で使用されるので、1 つの品目を複数のフォーミュラで使用できます。</span><span class="sxs-lookup"><span data-stu-id="24626-114">Because many items are used in multiple products, an item can be used in more than one formula.</span></span>

<span data-ttu-id="24626-115">式の例では、チョコ チップ クッキーの式です。</span><span class="sxs-lookup"><span data-stu-id="24626-115">An example of a formula is the formula for a chocolate chip cookie.</span></span> <span data-ttu-id="24626-116">この式の材料は、小麦粉、砂糖、卵、バター、チョコ チップなどの複数の明細行を使用します。</span><span class="sxs-lookup"><span data-stu-id="24626-116">The ingredients for this formula use multiple lines, such as flour, sugar, eggs, butter, and chocolate chips.</span></span> <span data-ttu-id="24626-117">チョコ チップ クッキーの式には他の式で使用される材料が含まれます。</span><span class="sxs-lookup"><span data-stu-id="24626-117">The formula for the chocolate chip cookie contains ingredients that are likely used in other formulas.</span></span> <span data-ttu-id="24626-118">チョコ チップ クッキーの作成中に、少量の残りものがある可能性があり、一部のクッキーが焼かれたか焼いている途中の可能性があります。</span><span class="sxs-lookup"><span data-stu-id="24626-118">While you make the chocolate chip cookies, there might be leftovers, such as crumbs, or some of the cookies might be overbaked or undercooked.</span></span> <span data-ttu-id="24626-119">これらの品目は、生産の工程で連産品または副産物として設定できます。</span><span class="sxs-lookup"><span data-stu-id="24626-119">These items can be set up as co-products or by-products, depending on the production operations.</span></span>

<span data-ttu-id="24626-120">式明細行を作成する場合、マスター プランを実行しバッチ オーダーを生産する際にどのようにシステムを処理すべきかを指定する明細行タイプを使用します。</span><span class="sxs-lookup"><span data-stu-id="24626-120">When you create a formula line, you use the line type to indicate how the system should handle the line when you run master planning and produce batch orders.</span></span> <span data-ttu-id="24626-121">選択した明細行タイプに応じて結果が異なります。</span><span class="sxs-lookup"><span data-stu-id="24626-121">Each line type gives a different result.</span></span> <span data-ttu-id="24626-122">次の表では、選択できる行タイプについて説明します。</span><span class="sxs-lookup"><span data-stu-id="24626-122">The following table describes the line types that you can select.</span></span> 

| <span data-ttu-id="24626-123">行タイプ</span><span class="sxs-lookup"><span data-stu-id="24626-123">Line type</span></span>     | <span data-ttu-id="24626-124">説明</span><span class="sxs-lookup"><span data-stu-id="24626-124">Description</span></span>  |
|---------------|--------------|
| <span data-ttu-id="24626-125">項目</span><span class="sxs-lookup"><span data-stu-id="24626-125">Item</span></span>          | <span data-ttu-id="24626-126">品目が在庫からピッキングされる原材料または半完成品目である場合、または品目がサービスである場合は、**品目** を選択します。</span><span class="sxs-lookup"><span data-stu-id="24626-126">Select **Item** when the item is a raw material or a semi-finished item that is picked from inventory or when the item is a service.</span></span> |
| <span data-ttu-id="24626-127">ファントム</span><span class="sxs-lookup"><span data-stu-id="24626-127">Phantom</span></span>       | <span data-ttu-id="24626-128">式明細行に含まれる下位レベルの式品目をすべて展開する場合は、**ファントム** を選択します。</span><span class="sxs-lookup"><span data-stu-id="24626-128">Select **Phantom** when you want to explode any lower-level formula items that are contained on formula lines.</span></span> <span data-ttu-id="24626-129">バッチ オーダーを見積もり、式品目が配置されると、コンポーネント品目はバッチ オーダーの式明細行として表示されます。</span><span class="sxs-lookup"><span data-stu-id="24626-129">When you estimate the batch order, and the formula items are exploded, the component items are listed as formula lines on the batch order.</span></span> <span data-ttu-id="24626-130">また、対応する工順が生産工順に追加されます。</span><span class="sxs-lookup"><span data-stu-id="24626-130">Additionally, the corresponding routes are added to the production route.</span></span> <span data-ttu-id="24626-131">式品目は、現在のコンフィギュレーションを使用して展開されます。</span><span class="sxs-lookup"><span data-stu-id="24626-131">Formula items are exploded by using the current configuration.</span></span> <span data-ttu-id="24626-132">**ファントム** 細行タイプを使用すると、異なる式レベルで発生する生産および測定コンフィギュレーションを処理できます。</span><span class="sxs-lookup"><span data-stu-id="24626-132">When you use the **Phantom** line type, you can handle production and measurement configurations that occur at different formula levels.</span></span> <span data-ttu-id="24626-133">**ファントム** を **リリース済製品の詳細** ページの **エンジニア** クイック タブ上の製品に選択し、この製品を式で使用する場合、式明細行の明細行タイプは **ファントム** に変更されます。</span><span class="sxs-lookup"><span data-stu-id="24626-133">If you select **Phantom** for a product on the **Engineer** FastTab of the **Released product details** page and then use this product in a formula, the line type of the formula line is changed to **Phantom**.</span></span> <span data-ttu-id="24626-134">CW 品目、または製品タイプが **連産品**、**副産物**、または **計画品目** の品目に対して **ファントム** は選択できません。</span><span class="sxs-lookup"><span data-stu-id="24626-134">You can't select **Phantom** for a catch-weight item, or for items where the production type is **Co-product**, **By-product**, or **Planning item**.</span></span> |
| <span data-ttu-id="24626-135">ペギングされた供給</span><span class="sxs-lookup"><span data-stu-id="24626-135">Pegged supply</span></span> | <span data-ttu-id="24626-136">バッチ オーダー、製造オーダー、かんばん、移動オーダー、または式明細行に含まれる成分の発注書を作成するため、**ペギングされた供給** を選択します。</span><span class="sxs-lookup"><span data-stu-id="24626-136">Select **Pegged supply** to create a batch order, production order, kanban, transfer order, or purchase order for the ingredient that is contained on the formula line.</span></span> <span data-ttu-id="24626-137">関連する注文は、既定の注文設定および成分の生産タイプに基づいて特定され、バッチ オーダーの見積時に作成されます。</span><span class="sxs-lookup"><span data-stu-id="24626-137">The related order is determined based on the default order settings and the production type of the ingredient, and is created when you estimate the batch order.</span></span> <span data-ttu-id="24626-138">バッチ オーダーに必要な成分数量が引当されます。</span><span class="sxs-lookup"><span data-stu-id="24626-138">The required ingredient quantities are reserved for the batch order.</span></span> |
| <span data-ttu-id="24626-139">ベンダー</span><span class="sxs-lookup"><span data-stu-id="24626-139">Vendor</span></span>        | <span data-ttu-id="24626-140">生産プロセスで協力会社を使用し、その協力会社の副生産または発注書を作成する場合は、**ベンダー** を選択します。</span><span class="sxs-lookup"><span data-stu-id="24626-140">Select **Vendor** if the production process uses a subcontractor, and you want to create a sub-production or purchase order for the subcontractor.</span></span> <span data-ttu-id="24626-141">協力会社が実行するサービスまたは作業は、式品目またはサービス品目を使用して作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="24626-141">The service or work that the subcontractor performs must be created by using a formula item or service item.</span></span> <span data-ttu-id="24626-142">この品目は、式明細行として親品目に関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="24626-142">You can attach the item to the parent item as a formula line.</span></span> <span data-ttu-id="24626-143">工順には、協力会社の運営ソースに割り当てられる工程を含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="24626-143">The route must contain an operation that is assigned to the subcontractor's operations resource.</span></span> <span data-ttu-id="24626-144">この工程は、**工程番号** を使用して式明細行に関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="24626-144">This operation is attached to the formula line by using the **Oper. No.**</span></span> <span data-ttu-id="24626-145">] アクションを使用すると、このチェック ボックスは自動的にオンになります。</span><span class="sxs-lookup"><span data-stu-id="24626-145">field.</span></span> |

## <a name="formula-versions"></a><span data-ttu-id="24626-146">フォーミュラ バージョン</span><span class="sxs-lookup"><span data-stu-id="24626-146">Formula versions</span></span>
<span data-ttu-id="24626-147">新しい式を作成する場合、式明細行品目および固有な特性を追加する前に、式バージョンを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="24626-147">When you create a new formula, you must first create a formula version before you add the formula line items and their specific characteristics.</span></span> <span data-ttu-id="24626-148">どのフォーミュラにも 1 つ以上のバージョンが必要です。</span><span class="sxs-lookup"><span data-stu-id="24626-148">Every formula must have at least one version.</span></span> <span data-ttu-id="24626-149">式バージョンの **承認済** ボタンは、バージョン レコードが正常に保存された後にのみ使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="24626-149">The **Approved** button on a formula version becomes available only after a version record has been successfully saved.</span></span> <span data-ttu-id="24626-150">各式のバージョン レコードは、1 つ以上の連産品および副産物に関係づけられ、こられは完成製品の生産時に生産されるかもしれません。</span><span class="sxs-lookup"><span data-stu-id="24626-150">Each formula version record is associated with one or many co-products and by-products that can be produced as you produce the finished product.</span></span> <span data-ttu-id="24626-151">多くの製品は同じ構成要素でも、異なるバッチ サイズで、複数で、または別の歩留りを使用することにより、作成できます。</span><span class="sxs-lookup"><span data-stu-id="24626-151">Many products can be made from the same ingredients in different batch sizes, in multiples, or by using different yields.</span></span> <span data-ttu-id="24626-152">必要な数だけ式のバージョンを作成できます。</span><span class="sxs-lookup"><span data-stu-id="24626-152">You can create as many versions of a formula as you require.</span></span>

<span data-ttu-id="24626-153">複数の有効な式バージョンを管理するには、有効日の範囲または「開始」数量フィールドを使用します。</span><span class="sxs-lookup"><span data-stu-id="24626-153">To manage multiple active formula versions, use effective date ranges or "from" quantity fields.</span></span> <span data-ttu-id="24626-154">複数の有効な式バージョンを持つことができるのは、期間および「開始」数量が重複しない場合だけです。</span><span class="sxs-lookup"><span data-stu-id="24626-154">Multiple active formula versions can exist only if the date range and "from" quantity don't overlap.</span></span>

<span data-ttu-id="24626-155">BOM とは異なり、1 つの BOM は多くの場合複数の BOM バージョンに関連付けられ、各式ごとに 1 つだけ式バージョンが存在します。</span><span class="sxs-lookup"><span data-stu-id="24626-155">Unlike BOMs, where one BOM is often associated with many BOM versions, only one formula version typically exists per formula.</span></span> <span data-ttu-id="24626-156">1 つの式バージョンだけが、特定の製品の補充分析コードおよび数量に対して有効化できることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="24626-156">Remember that only one formula version can be activated for the coverage dimensions and quantity for a given product.</span></span> <span data-ttu-id="24626-157">ただし、その他の理由により複数の式バージョンが存在し、バッチ オーダーを作成するときそれらを手動で選択することができます。</span><span class="sxs-lookup"><span data-stu-id="24626-157">However, many formula versions might exist for other reasons, and you can manually select them when you create a batch order.</span></span>

## <a name="approve-and-activate-formulas-and-formula-versions"></a><span data-ttu-id="24626-158">式および式バージョンの承認および有効化</span><span class="sxs-lookup"><span data-stu-id="24626-158">Approve and activate formulas and formula versions</span></span>
<span data-ttu-id="24626-159">式および式バージョンは、計画および生産で使用する前に、事前に承認されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="24626-159">Formulas and formula versions must be approved before they can be used for planning and production.</span></span> <span data-ttu-id="24626-160">式は、通常使用される前に有効化されます。</span><span class="sxs-lookup"><span data-stu-id="24626-160">Formulas are usually activated before they are used.</span></span> <span data-ttu-id="24626-161">ただし、生産中にも承認されている式バージョンを選択できますが、有効化はされていません。</span><span class="sxs-lookup"><span data-stu-id="24626-161">However, during production, you can select a formula version that is approved, but that isn't activated.</span></span>

<span data-ttu-id="24626-162">式または式バージョンのセキュリティを確保するには、**編集を防止** および **承認の削除を防止** のパラメーターを **生産管理パラメーター** ページで設定できます。</span><span class="sxs-lookup"><span data-stu-id="24626-162">To help secure a formula or formula version, you can set the **Block editing** and **Block removal of approval** parameters on the **Production control parameters** page.</span></span>

<span data-ttu-id="24626-163">**編集を防止** を選択し、式を承認する場合は、式明細行のフィールドは削除または編集できません。</span><span class="sxs-lookup"><span data-stu-id="24626-163">If you select **Block editing**, and the formula is approved, no fields on the formula lines can be deleted or edited.</span></span> <span data-ttu-id="24626-164">ただし、式の承認を削除すると、式明細行を削除および変更できます。</span><span class="sxs-lookup"><span data-stu-id="24626-164">However, if you remove the approval of the formula, you can delete and modify the formula lines.</span></span> <span data-ttu-id="24626-165">新しい式と新しい式バージョンを作成できます。</span><span class="sxs-lookup"><span data-stu-id="24626-165">You can also create new formulas and new formula versions.</span></span>

<span data-ttu-id="24626-166">**承認の削除を防止** を選択した場合、承認済み式または式バージョンの承認を削除できません。</span><span class="sxs-lookup"><span data-stu-id="24626-166">If you select **Block removal of approval**, you can't remove the approval of an approved formula or formula version.</span></span> <span data-ttu-id="24626-167">ただし、新しい式と新しい式バージョンを作成すると、式バージョンの有効化を削除できます。</span><span class="sxs-lookup"><span data-stu-id="24626-167">However, you can create new formulas and new formula versions, and you can remove the activation of the formula version.</span></span>

<span data-ttu-id="24626-168">電子署名機能を使用して、さらに高度な管理を追加できます。</span><span class="sxs-lookup"><span data-stu-id="24626-168">You can add more levels of control by using the electronic signature functionality.</span></span> <span data-ttu-id="24626-169">式の承認時に電子署名が必要とされるよう、ユーザー設定されている場合、式が有効になると **署名** ページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="24626-169">When a user is set up so that an electronic signature is required at the time of formula approval, a **Signature** page appears when the formula is activated.</span></span> <span data-ttu-id="24626-170">変更が確定される前に、ユーザーに電子署名を行う権限が付与されて、証明書が正しく承認される必要があります。</span><span class="sxs-lookup"><span data-stu-id="24626-170">The user must be authorized to sign electronically, and the certificate must be successfully validated before the change can be committed.</span></span> <span data-ttu-id="24626-171">署名が承認されない場合は、承認または承認の削除が拒否され、承認または承認の削除を開始しようとした変更は元の状態に戻されます。</span><span class="sxs-lookup"><span data-stu-id="24626-171">If the signature can't be authenticated, the approval or removal of approval is denied, and the change that initiated the approval or removal of approval is returned to its original state.</span></span>

## <a name="use-the-scalable-feature"></a><span data-ttu-id="24626-172">スケーラブルな機能の使用</span><span class="sxs-lookup"><span data-stu-id="24626-172">Use the Scalable feature</span></span>
<span data-ttu-id="24626-173">スケーラブルな機能は、式のすべての品目コンポーネントが **変動消費** に設定されている場合にのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="24626-173">The Scalable feature is available only if all the item components in the formula are set to **Variable consumption**.</span></span> <span data-ttu-id="24626-174">品目コンポーネントが **固定消費** または **ステップの消費** に設定されている場合、機能は使用できません。</span><span class="sxs-lookup"><span data-stu-id="24626-174">The feature isn't available if item components are set to **Fixed consumption** or **Step consumption**.</span></span> <span data-ttu-id="24626-175">スケーラブルな機能を使用する場合、式の構成要素を変更すると、選択した他の材料の数量が調整されます。</span><span class="sxs-lookup"><span data-stu-id="24626-175">When the Scalable feature is used, if you change an ingredient in a formula, the quantity of the other ingredients that you select is adjusted.</span></span> <span data-ttu-id="24626-176">式サイズも調整されます。</span><span class="sxs-lookup"><span data-stu-id="24626-176">The size of the formula is also adjusted.</span></span> <span data-ttu-id="24626-177">同様に、式サイズを変更すると、すべてのスケーラブルな材料の数量が変更されます。</span><span class="sxs-lookup"><span data-stu-id="24626-177">Likewise, if you change the formula size, the quantity of all scalable ingredients is changed.</span></span> <span data-ttu-id="24626-178">この機能は、特に式の作成および管理を対象としています。</span><span class="sxs-lookup"><span data-stu-id="24626-178">This feature is intended specifically for formula creation and maintenance.</span></span> <span data-ttu-id="24626-179">構成要素の数量がバッチ オーダーで上下に縮小増幅されるかどうかを示していません。</span><span class="sxs-lookup"><span data-stu-id="24626-179">It doesn't indicate whether the quantity of an ingredient will be scaled up or down on a batch order.</span></span>

## <a name="use-step-consumption"></a><span data-ttu-id="24626-180">ステップ消費の使用</span><span class="sxs-lookup"><span data-stu-id="24626-180">Use Step consumption</span></span>
<span data-ttu-id="24626-181">ステップ消費では、構成材料の **フォーミュラ明細行** タブに数量を入力する必要がありません。</span><span class="sxs-lookup"><span data-stu-id="24626-181">Step consumption eliminates the requirement that you must enter a quantity on the **Formula line** tab for an ingredient.</span></span> <span data-ttu-id="24626-182">その代わり、ステップ消費は **シリーズの開始** 値と **数量** 値を持つように構成されます。</span><span class="sxs-lookup"><span data-stu-id="24626-182">Instead, Step consumption is configured so that it has a **From series** value and a **Quantity** value.</span></span> <span data-ttu-id="24626-183">バッチ オーダーで選択された数量を満たす一連のレコードごとのステップ消費からの情報。</span><span class="sxs-lookup"><span data-stu-id="24626-183">The information from the Step consumption per series record that satisfies the quantity on the batch order is selected.</span></span> <span data-ttu-id="24626-184">ステップ消費は、消費係数がバッチ オーダーのサイズに関して直線的でない場合、および特定の数量の閾値が満たされない時に条件のみを高める場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="24626-184">Step consumption is useful when the consumption rate isn't linear with respect to the batch order size and only increases the requirement when a specific quantity threshold is met.</span></span> <span data-ttu-id="24626-185">新しい式のこの機能を有効にするには、**消費計算** グループの下で、利用できる構成材料の式設定を **標準** から **ステップ** に変更します。</span><span class="sxs-lookup"><span data-stu-id="24626-185">To enable this feature for a new formula, under the **Consumption calculation** group, change the formula setting for the applicable ingredient from **Standard** to **Step**.</span></span> <span data-ttu-id="24626-186">**式明細行** ページの **設定** タブでこの消費方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="24626-186">You specify this consumption method on the **Setup** tab of the **Formula line** page.</span></span>
