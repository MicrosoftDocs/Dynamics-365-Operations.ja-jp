---
title: 品目に対する安全在庫フルフィルメント
description: このトピックでは、安全在庫フルフィルメント、および品目に対して安全在庫数量を設定する方法について説明します。
author: roxanadiaconu
manager: tfehr
ms.date: 11/27/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ReqSafetyKey, ReqItemTableSetup, ReqItemJournalName, ReqItemTable, EcoResProductDetailsExtended, ReqSafetyKeyDefaultDataWizard
audience: Application User, IT Pro
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: kamaybac
ms.dyn365.ops.version: 7.2999999999999998
ms.search.validFrom: 2017-12-31
ms.openlocfilehash: dbc0ca146327fada1325f4b11965c23948d3565d
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/15/2021
ms.locfileid: "4987257"
---
# <a name="safety-stock-fulfillment-for-items"></a>品目に対する安全在庫フルフィルメント

[!include [banner](../includes/banner.md)]

安全在庫は、品目が在庫切れになるリスクを軽減するために、在庫に保持されている品目の追加の数量を示します。 安全在庫は、販売注文が来ても、仕入先が顧客の指定出荷日に間に合うよう追加品目を配送できない場合に、バッファ在庫として使用されます。 安全在庫を販売注文を満たすよう使用する場合は、安全在庫が減少します。 在庫を安全レベルに自動的に戻すよう、マスター プランを使用することができます。    

## <a name="set-up-safety-stock-levels-for-items"></a>品目に対する安全在庫レベルを設定します

安全在庫は、**リリースされた製品** > **計画** > **補充** の **品目補充** ページで品目補充の一部として設定されます。

**最小** フィールドで、品目に対して維持する安全在庫レベルを入力します。 値は、在庫単位で表されます。 このフィールドに何も指定しなかった場合は、既定値の 0 が使用されます。 このフィールドは、**補充コード** リストで **期間**、**要求**、または **最小/最大** を選択した場合に使用可能です。 在庫レベル制限が利用可能な在庫に適用されます。これは、現物数量が指定された最小レベル以下になる前に、引当およびマーキングが安全在庫補充をトリガーする場合があるということです。

> [!NOTE]
> **最小** フィールドを定義するには、あらかじめ他のすべての計画済補充分析コードを定義しておく必要があります。 これで無効なレコードがマスター プラン中に使用されるのを防ぐことができます。 こうした状況は、たとえば、分析コード グループに、最小および最大の在庫数量が定義されていない他の計画済補充分析コードが追加された場合に発生することがあります。

最小キーを使用して、季節的な変動に対応できます。 たとえば、シーズン オフに品目の最小在庫レベルを小さくし、他の月の間に徐々にレベルを大きくすることができます。 **マスター プラン** > **設定** > **補充** > **最大/最小キー** の順に移動して、最小キーを作成します。 **品目補充** ページの **最小キー** フィールドで、季節ごとに安全在庫レベルを調整する最小キーを指定します。 

## <a name="example-minimum-key"></a>例 : 最小キー
春および夏の月間中に季節的な需要を増やすアカウントの最小キーを設定するには、**マスター プラン** > **設定** > **補充** > **最小/最大キー** の順に移動し、次の手順に従います。

1. **変更** フィールドで行を 12 行作成し、各行に 1 ～ 12 の番号を割り当てます。
2. **単位** フィールドで、**月** を選択します。
3. **係数** フィールドで、次の表に示す値を入力します。

|折れ線|この金額を入力|結果|
|---|---|---|
|1 ～ 3 回|1|最小在庫は、**品目補充** ページの 1 ～ 3 月の設定を基にします。|
|4-5|2|4 ～ 5 月は、最小在庫に係数 2 が乗算されます。|
|6-8|2.5|6 ～ 8 月は、最小在庫に係数 2.5 が乗算されます。|
|9-12|1|最小在庫は、**品目補充** ページで 9 ～ 12 月の設定に戻ります。|

補充コードが **最小/最大** である場合、維持する品目の **最大** 在庫数を指定することもできます。 値は、在庫単位でも表されます。 予想される利用可能在庫が最小数量を下回った場合は、マスター プランを通じて計画オーダーが生成され、未処理となっている要求が満たし、指定された最大数量に達するまで利用可能在庫が補充されます。 **最小** フィールドを設定するように、**最大** フィールドを定義するには、あらかじめ他のすべての計画済補充分析コードを定義しておく必要があります。

## <a name="example-minmax-coverage-code"></a>例 : 最小/最大補充コード
最小数量が 10、および最大数量が 15 です。 現在の手持在庫が 4 であるとします。 このとき、最小数量を満たすための必要量は 6 です。 ただし、最大数量が 15 であるため、マスター プランでは、11 品目の計画オーダーが生成されます。

季節的な需要を追跡する品目に対して、さまざまな最大レベルを維持する必要があります。 この操作を行うには、**マスター プラン** > **設定** > **補充** > **最大/最小キー** の順に移動して **最大キー** を定義する必要があります。 **品目補充** ページの **最大キー** フィールドを入力します。 **品目補充** ページの **最小/最大** タブで最小キーを通して定義されている、安全在庫レベルに関する情報を表示できます。 一定期間、最小値および最大値が同期しているのを確認する必要があります。

## <a name="safety-stock-fulfillment"></a>安全在庫のフルフィルメント 

**最小限実行** パラメーターを使用すると、**最小** フィールドで指定した数量を在庫レベルが満たす必要のある、日付または期間を選択できます。 このフィールドは、**補充コード** リストで **期間**、**要求**、または **最小/最大** を選択した場合に使用可能です。

**最小キー** を使用する場合、最小キーで設定されたすべての期間を対象に最小在庫レベルを満たすよう、**最小期間** チェック ボックスをオンにします。 このチェック ボックスをオフにした場合、現在の期間のみを対象として最小在庫が満たされます。

次のシナリオでは、このパラメータがどう機能するか、およびその値の間の違いを表示します。

> [!NOTE]
> このトピックのすべての図において、X 軸は在庫、Y 軸は日付、バーは在庫レベル、矢印は販売注文明細行、購買注文明細行、または計画オーダーなどの取引を表します。

[![安全在庫フルフィルメントに対する一般的なシナリオ](./media/Scenario1.png)](./media/Scenario1.png) **最小限実行** パラメーターには、次の値があります。
### <a name="todays-date"></a>今日の日付 
指定された最小数量は特定の日付 (マスター プランの実行時) に満たされます。 リード タイムのため非実際的であっても、システムは、できるだけ早く安全在庫制限を満たそうとします。 
[![今日の日付での要求](./media/TodayReq.png)](./media/TodayReq.png) この日付の安全在庫レベル上で利用可能な在庫を移動するよう、計画オーダー P1 が今日の日付で作成されます。 販売注文明細行 S1 ～ S3 は在庫レベルを引き続き下げていきます。 各販売注文の要求の後に、在庫レベルが安全制限に戻るよう、計画オーダー P2 ～ P4 がマスター プランによって生成されます。
**要件** 補充コードを使用する場合、複数の計画オーダーが作成されます。 補充をバンドルするのに、頻繁に必要となる品目および材料に対する **期間** または **最小/最大** 補充のいずれかを使用することをお勧めします。 次の図は、補充コード **期間** の例を示します。
[![期間。今日の日付](./media/TodayPeriod.png)](./media/TodayPeriod.png) 次の図は、補充コード **最小/最大** の例を示します。
[![最小最大。今日の日付](./media/TodayMinMax.png)](./media/TodayMinMax.png)
### <a name="todays-date--procurement-time"></a>今日の日付と調達時刻 
指定された最小数量は特定の日付 (マスター プランの実行日 + 購入時間または生産リード タイム) に満たされます。 この時間には、安全マージンが含まれます。 品目に売買契約が伴うとき、**マスター プランのパラメーター** ページで **売買契約の検索** チェック ボックスがオンになっている場合、売買契約に基づく配送のリード タイムは考慮されません。 リード タイムは、品目の補充設定または品目から取得されます。
このフルフィルメント モードは、品目の補充グループ設定に関係なく、より少ない遅延およびより少ない計画オーダーで計画を生成します。 次の図は、補充コードが **要件** または **期間** である場合の、計画の結果を示します。  
[![要件。期間。今日の日付およびリード タイム](./media/TodayPLTReq.png)](./media/TodayPLTReq.png) 次の図は、補充コードが **最小/最大** である場合の、計画の結果を示します。  
[![最小最大。今日の日付およびリード タイム](./media/TodayPLTMinMax.png)](./media/TodayPLTMinMax.png)
### <a name="first-issue"></a>初回払出 
次の図に示すように、利用可能な在庫が最小レベルを下回ったときに、その日付で指定された最小数量が満たされます。 マスター プランの実行時に、利用可能な在庫がその日付の最小レベルを下回っている場合でも、**初回払出** は、次の要件がで入荷するまで対応しません。
次の図は、補充コード **要件** の例を示します。
[![**要件** 補充コードおよび **初回払出** フルフィルメントで品目を計画](./media/FirstIssueReq.png)](./media/FirstIssueReq.png) 次の図は、補充コード **期間** の例を示します。
[![**期間** 補充コードおよび **初回払出** フルフィルメントで品目を計画](./media/FirstIssuePeriod.png)](./media/FirstIssuePeriod.png) 次の図は、補充コード **最小/最大** の例を示します。
[![**最小最大** 補充コードおよび **初回払出** フルフィルメントで品目を計画](./media/FirstIssueMinMax.png)](./media/FirstIssueMinMax.png) マスター プランの実行時の日付で、利用可能な在庫が既に安全最大在庫制限下にある場合、**今日の日付** および **今日の日付と調達時刻** は補充をすぐにトリガーします。 **初回払出** は、品目に対する販売注文および BOM 明細行の要件などの、別の払出トランザクションが出るまで待機します。その後、このトランザクションの日付で補充をトリガーします。 次の図に示すように、マスター プランの実行時の日付で、利用可能な在庫が安全在庫制限下にない場合、**今日の日付** および **初回払出** はまったく同じ結果を提供します。 

[![NotUnderLimit](./media/ReqFirstIssue.png)](./media/ReqFirstIssue.png) マスター プランの実行時の日付で、利用可能な在庫が安全在庫制限下にない場合、調達リード タイムの終わりまでフルフィルメントが延期されるため、**今日の日付と調達時刻** は次の結果を提供します。
![**要件** 補充コードおよび **初回払出** フルフィルメントで品目の計画](./media/ReqTodayLT.png)
### <a name="coverage-time-fence"></a>補充タイム フェンス
指定された最小数量は特定の期間 (**補充タイム フェンス** フィールドに指定された期間) に満たされます。 マスター プランは、利用可能な在庫が販売または転送などの実際の注文により使用されないようにする際、安全レベルを維持しようとするためにこのオプションは便利です。 ただし、将来のリリースでは、この補充のモードが必要でなくなり、このオプションは使用されなくなります。
## <a name="plan-safety-stock-replenishment-for-first-expired-first-out-fefo-items"></a>先に期限が切れるものから先出し (FEFO) 品目の安全在庫補充を計画します
任意の時点で、注文明細行または BOM 明細行などの実際の需要を許可するよう、FEFO (先に期限が切れるものから先出し) の順序で履行するよう、最新の有効期限の日付で在庫入庫が安全在庫に対して使用されます。
これがどう機能するかを示すため、次のシナリオを考えてみます。
[![FEFOScenario](./media/FEFOScenario.png)](./media/FEFOScenario.png) 計画を実行する場合、既存の手持在庫からの最初の販売注文、および残余数量の追加の購買注文をカバーします。
[![FEFO1](./media/FEFO1.png)](./media/FEFO1.png) 利用可能な在庫が安全制限に戻るよう確認する計画オーダーが作成されます。
[![FEFO2](./media/FEFO2.png)](./media/FEFO2.png) 2 つ目の販売注文が計画されると、以前に作成された安全在庫をカバーする計画オーダーがこの数量を満たすために使用されます。 したがって、安全在庫は常にローリングします。
[![FEFO3](./media/FEFO3.png)](./media/FEFO3.png) 最後に、安全在庫をカバーする別の計画オーダーが作成されます。
[![FEFO4](./media/FEFO4.png)](./media/FEFO4.png) すべてのバッチの有効期限が適宜切れ、期限切れ後に、安全在庫を補充する計画オーダーが作成されます。

## <a name="how-master-planning-handles-the-safety-stock-constraint"></a>マスター プランが安全在庫制約を処理する方法

安全在庫は、販売明細行または BOM の要件と同様の要件タイプとして、システムで追跡されます。 **表示** 列で既定のフィルターを削除すると、**正味必要量** ページで安全在庫要件の明細行を表示できます。

販売明細行、BOM 明細行、要件の移行、または需要予測明細行などの実際の需要のフルフィルメントに関して遅延が生じるとシステムが判断する場合、安全在庫要件トランザクションを満たす優先度が下がります。 それ以外の場合は、利用可能な在庫が安全在庫数量以上であり、その他の需要のタイプと同じ優先度であることを確認します。 これにより、実際のトランザクションに遅れがなく、安全在庫の超過補充および早期補充を防ぐのにも役立ちます。

マスター プランの補充フェーズでは、安全在庫補充の優先度が下がることはもうありません。 手持在庫は、他の任意の需要タイプの前に使用できます。 延滞計算の時に、遅れた販売明細行、BOM 明細行の要件、および他のすべての需要タイプを調べ、それらが安全在庫が使用できるように指定されている時間に期限遵守で配送されるかどうかを見極めるため、新しいロジックが追加されます。 安全在庫の使用により遅延が最小限にできることをシステムが示す場合、販売明細行またはBOM 明細行は、最初の補充を安全在庫に置き換え、代わりにシステムが安全在庫の補充をトリガーします。

計画または品目が延滞計算に対して設定されていない場合、安全在庫制約には他の任意の需要タイプと同じ優先順位があります。 つまり、他の需要タイプの前に、手持在庫およびその他の利用可能な在庫の引当があります。
