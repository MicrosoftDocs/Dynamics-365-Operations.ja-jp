---
title: マスター プランのパフォーマンスの改善
description: このトピックでは、マスター プランのパフォーマンスを改善し、問題のトラブルシューティングをするのに役立つさまざまなオプションについて説明します。
author: t-benebo
manager: AnnBe
ms.date: 12/18/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ReqCreatePlanWorkspace
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: benebotg
ms.search.validFrom: 2019-05-31
ms.dyn365.ops.version: AX 10.0.0
ms.openlocfilehash: 7e8c1d7ee51eb6e335554a01fd050bd80f2a070d
ms.sourcegitcommit: 36857283d70664742c8c04f426b231c42daf4ceb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/20/2019
ms.locfileid: "2915227"
---
# <a name="improve-master-planning-performance"></a><span data-ttu-id="4c0f6-103">マスター プランのパフォーマンスの改善</span><span class="sxs-lookup"><span data-stu-id="4c0f6-103">Improve master planning performance</span></span>

[!include [banner](../includes/preview-banner.md)]
[!include [banner](../includes/banner.md)]

<span data-ttu-id="4c0f6-104">このトピックでは、マスター プランのパフォーマンスを改善し、問題のトラブルシューティングをするのに役立つさまざまなオプションについて説明します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-104">This topic explains the various options that can help you improve the performance of master planning or troubleshoot issues.</span></span> <span data-ttu-id="4c0f6-105">これには、パラメーターと設定、および推奨されるコンフィギュレーションとアクションに関する情報が含まれます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-105">It includes information about parameters and settings, as well as recommended configurations and actions.</span></span> <span data-ttu-id="4c0f6-106">また、実行時間の長いマスター プラン ジョブがある場合に考慮する必要のある、すべての重要なパラメーターに関する概要も含まれます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-106">Also included is a summary of all the important parameters that you should consider when you have long-running master planning jobs.</span></span>

<span data-ttu-id="4c0f6-107">このトピックは、システム管理者またはトラブルシューティングをする機能を持つ IT ユーザーを対象としています。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-107">This topic is intended for system admins or IT users who have the capability to troubleshoot.</span></span> <span data-ttu-id="4c0f6-108">また、ビジネス プランの要件に関係するパラメーターの情報も含むため、生産または供給プランナーも対象にしています。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-108">It's also intended for production or supply planners because it includes information about parameters that are related to business planning requirements.</span></span> 

## <a name="parameters-related-to-master-planning-performance"></a><span data-ttu-id="4c0f6-109">マスター プランのパフォーマンスに関係するパラメーター</span><span class="sxs-lookup"><span data-stu-id="4c0f6-109">Parameters related to master planning performance</span></span>

<span data-ttu-id="4c0f6-110">マスター プランのパフォーマンスの実行時間に影響するため、さまざまなパラメーターを考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-110">Various parameters influence the running time of master planning and should be considered.</span></span>

### <a name="number-of-threads"></a><span data-ttu-id="4c0f6-111">スレッド数</span><span class="sxs-lookup"><span data-stu-id="4c0f6-111">Number of threads</span></span>

<span data-ttu-id="4c0f6-112">**スレッド数**パラメーターによりマスター スケジューリング プロセスを調整して、特定のデータ セット上でのパフォーマンスを向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-112">The **Number of threads** parameter lets you adjust the master scheduling process to help improve performance on the specific data set.</span></span> <span data-ttu-id="4c0f6-113">このパラメーターは、マスター プランを実行するために使用されるスレッドの合計数を指定します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-113">This parameter specifies the total number of threads that will be used to run master planning.</span></span> <span data-ttu-id="4c0f6-114">これによりマスター プラン実行の並列処理が発生し、実行時間を削減できます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-114">It causes parallelization of the master planning run, which helps decrease the running time.</span></span> 

<span data-ttu-id="4c0f6-115">**マスター プランの実行**ダイアログ ボックスで、**スレッド数**パラメーターを設定することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-115">You can set the **Number of threads** parameter in the **Master planning run** dialog box.</span></span> <span data-ttu-id="4c0f6-116">このダイアログ ボックスを開くには、**マスター プラン \> マスター プラン \> 実行 \> マスター プラン**に移動するか、または**マスター プラン** ワークスペースで**実行**を選択します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-116">To open this dialog box, go to **Master planning \> Master planning \> Run \> Master planning**, or select **Run** in the **Master planning** workspace.</span></span> <span data-ttu-id="4c0f6-117">このパラメーターの最適な値を決定するには、試行錯誤のプロセスに頼る必要があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-117">To determine the best value for this parameter, you will have to rely on a trial-and-error process.</span></span> <span data-ttu-id="4c0f6-118">ただし、次の式を使用して初期値を計算することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-118">However, you can use the following formulas to calculate an initial value:</span></span>

- <span data-ttu-id="4c0f6-119">**業種が製造の場合:** (スレッド数) = (計画オーダー数 ÷ 1,000)</span><span class="sxs-lookup"><span data-stu-id="4c0f6-119">**If your industry is manufacturing:** (Number of threads) = (Number of planned orders ÷ 1,000)</span></span>
- <span data-ttu-id="4c0f6-120">**それ以外の場合:** (スレッド数) = (品目数 ÷ 1,000)</span><span class="sxs-lookup"><span data-stu-id="4c0f6-120">**Otherwise:** (Number of threads) = (Number of items ÷ 1,000)</span></span>

<span data-ttu-id="4c0f6-121">マスター プラン中に使用されるヘルパーの数は、バッチ サーバー上で許可されている最大スレッド数以下である必要があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-121">The number of helpers used during master planning must be less than or equal to the maximum number of threads that are allowed on the batch server.</span></span> <span data-ttu-id="4c0f6-122">ヘルパーの数がバッチ サーバーのスレッド数を超えると、追加されたスレッドは動作しません。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-122">If the number of helpers exceeds the number of threads on the batch server, the extra threads won't do any work.</span></span>

> [!NOTE]
> <span data-ttu-id="4c0f6-123">**スレッド数**パラメーターに **0** (ゼロ) を設定すると、マスター プランの実行時間が増加します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-123">Setting the **Number of threads** parameter to **0** (zero) increases the master planning running time.</span></span> <span data-ttu-id="4c0f6-124">そのため、常に 0 より大きい値を設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-124">Therefore, we recommend that you always set a value that is more than 0.</span></span>

### <a name="number-of-tasks-in-helper-task-bundle"></a><span data-ttu-id="4c0f6-125">ヘルパー タスク バンドル内のタスク数</span><span class="sxs-lookup"><span data-stu-id="4c0f6-125">Number of tasks in helper task bundle</span></span>

<span data-ttu-id="4c0f6-126">**タスク バンドル内のタスク数**の設定 (つまり、バンドル サイズ) を変更することにより、実行時間を減少させられる場合があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-126">By changing the **Number of tasks in task bundle** setting (that is, the bundle size), you might be able to decrease the running time.</span></span> <span data-ttu-id="4c0f6-127">この設定により、単一のヘルパーによって一緒に計画される品目の数を制御できます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-127">This setting controls the number of items that are planned together by a single helper.</span></span>

<span data-ttu-id="4c0f6-128">**マスター プランのパラメーター** ページ (**マスター プラン** \> 設定 \> マスター プランのパラメーター) の**一般**タブの**パフォーマンス** セクションで、**タスク バンドル内のタスク数**パラメーターを設定することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-128">You can set the **Number of tasks in task bundle** parameter in the **Performance** section on the **General** tab of the **Master planning parameters** page (**Master planning \> Setup \> Master planning parameters**).</span></span> <span data-ttu-id="4c0f6-129">このパラメーターの最適な値は、データによって異なります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-129">The best value for this parameter depends on your data.</span></span> <span data-ttu-id="4c0f6-130">そのため、**1** の値から始めて、試行錯誤のプロセスを使用して、設定に対する最適な値を決定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-130">Therefore, we recommend that you start with a value of **1**, and then use a trial-and-error process to determine the best value for your setup.</span></span>

<span data-ttu-id="4c0f6-131">一般に、品目の数が非常に大きい場合 (数十万以内)、タスク数を増やすことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-131">In general, we recommend that you increase the number of tasks when the number of items is very large (in the hundreds of thousands).</span></span> <span data-ttu-id="4c0f6-132">それ以外の場合は、タスク数を減らす必要があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-132">Otherwise, you should decrease the number of tasks.</span></span> <span data-ttu-id="4c0f6-133">次の特定の業種については、次の推奨事項を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-133">For the following specific industries, consider these recommendations:</span></span>

- <span data-ttu-id="4c0f6-134">独立した品目が多い小売業および配送業では、品目間に依存関係がないので、ヘルパーを多く使用してください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-134">In the retail and distribution industries where there are many independent items, use many helpers because there is no dependency between items.</span></span> 
- <span data-ttu-id="4c0f6-135">部品表 (BOM) および共有サブコンポーネントが多い製造業では、品目間の依存関係によって待ち時間が発生することがあるので、ヘルパーの使用を減らしてください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-135">In the manufacturing industry where there are many bills of materials (BOMs) and shared subcomponents, use fewer helpers because dependencies between items might cause waiting times.</span></span>

> [!TIP]
> <span data-ttu-id="4c0f6-136">パフォーマンスに問題がある場合、**タスク バンドル内のヘルパー数**の設定を **1** に減少させることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-136">If you have performance issues, we recommend that you reduce the **Number of helpers in task bundle** setting to **1**.</span></span> <span data-ttu-id="4c0f6-137">その後、試行錯誤のプロセスを開始し、設定に最適な値を見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-137">You can then start the trial-and-error process to find the best value for your setup.</span></span> <span data-ttu-id="4c0f6-138">一般に、1 つの品目の処理に残りの品目よりも長い時間がかかる場合、パフォーマンスの問題が発生します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-138">In general, performance issues occur when one item takes longer to process than the remaining items.</span></span> <span data-ttu-id="4c0f6-139">この場合、マスター プランの実行においてステータスが**補充**である、後続の 2 つのタスクの実行時間が大きく異なることがわかります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-139">In this case, you will see that two subsequent tasks that have a status of **Coverage** in the master planning run take significantly different amounts of time to run.</span></span> <span data-ttu-id="4c0f6-140">極端な場合、この差が 30 分ほどになることがあります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-140">In extreme cases, this difference might be as much as 30 minutes.</span></span> <span data-ttu-id="4c0f6-141">各タスクの期間から、タスクの実行にかかる時間を推測することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-141">You can infer the amount of time that tasks take to run by looking at the duration of each task.</span></span>

### <a name="use-of-cache"></a><span data-ttu-id="4c0f6-142">キャッシュの使用</span><span class="sxs-lookup"><span data-stu-id="4c0f6-142">Use of cache</span></span>

<span data-ttu-id="4c0f6-143">**キャッシュの使用**パラメーターによりマスター スケジューリング プロセスを調整して、特定のデータ セット上でのパフォーマンスを向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-143">The **Use of cache** parameter lets you adjust the master scheduling process to help it perform better on the specific data set.</span></span> <span data-ttu-id="4c0f6-144">たとえば、調整により次の結果を達成することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-144">For example, you can adjust it to achieve the following results:</span></span>

- <span data-ttu-id="4c0f6-145">より多くのキャッシュを使用すると、データ メモリにより多くのデータが収集されます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-145">If more caching is done, more data is collected in data memory.</span></span> <span data-ttu-id="4c0f6-146">データが後で再使用されることが期待されます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-146">The expectation is that the data will be used again later.</span></span> <span data-ttu-id="4c0f6-147">メモリにデータがある場合、一部のデータベース要求を保存することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-147">If the data is in memory, you might save some database requests.</span></span> <span data-ttu-id="4c0f6-148">ただし、より多くのキャッシュを使用すると、必要なメモリが増加します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-148">However, if more caching is done, memory requirements increase.</span></span>
- <span data-ttu-id="4c0f6-149">キャッシュが少ない場合、より頻繁に同じデータをデータベースからフェッチする必要があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-149">If less caching is done, the same data might have to be fetched from the database more often.</span></span> <span data-ttu-id="4c0f6-150">また、Application Object Server (AOS) は、プロセス全体において、メモリにデータをあまり保存しません。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-150">Additionally, Application Object Server (AOS) stores little data in memory throughout the process.</span></span>

<span data-ttu-id="4c0f6-151">それぞれのケースはデータだけでなくハードウェアにも依存するため、どのオプションが良いかを予測することは困難です。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-151">It's difficult to predict which option will be better because each case depends not only on the data but also on the hardware.</span></span> <span data-ttu-id="4c0f6-152">たとえば、キャッシュを小さくするとデータベース サーバーに追加の負荷が発生するため、データベース サーバーがすでに過負荷状態になっている場合、このオプションは正しくない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-152">For example, because less caching causes additional load on the database server, it probably isn't a good idea to use that option if your database server is already overloaded.</span></span>

<span data-ttu-id="4c0f6-153">**マスター プランのパラメーター** ページ (**マスター プラン** \> 設定 \> マスター プランのパラメーター) の**一般**タブの**パフォーマンス** セクションで、**キャッシュの使用**パラメーターを設定することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-153">You can set the **Use of cache** parameter in the **Performance** section on the **General** tab of the **Master planning parameters** page (**Master planning \> Setup \> Master planning parameters**).</span></span> <span data-ttu-id="4c0f6-154">キャッシュの有効性は、顧客データによって大きく異なります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-154">The effectiveness of caching depends heavily on the customer data.</span></span> <span data-ttu-id="4c0f6-155">たとえば、キャッシュされたデータを必要としない場合、スケジューリング プロセスが終了するまでデータを格納しているなら、メモリを無駄にするだけです。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-155">For example, if cached data is never needed, you just waste memory if you store data until the end of the scheduling process.</span></span> <span data-ttu-id="4c0f6-156">この場合、キャッシュを少なくコンフィギュレーションするなら、AOS はあまりメモリを必要とせず、サーバー リソースを他のタスクに対して充てることができるため、パフォーマンスが向上する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-156">In this case, if you configure less caching, performance might increase because AOS requires less memory and server resources are freed up for other tasks.</span></span>

> [!TIP]
> <span data-ttu-id="4c0f6-157">一般に、パラメーターはパフォーマンス強化機能として使用することが意図されているため、**キャッシュの使用**パラメーターは**最大**に設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-157">In general, we recommend that you set the **Use of cache** parameter to **Maximum**, because the parameter is intended as a performance enhancing feature.</span></span> <span data-ttu-id="4c0f6-158">オンプレミスで実行していて、メモリに制限がある場合 (約 2 ギガバイト \[GB\])、このパラメーターを**最小**に設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-158">We recommend that you set the parameter to **Minimum** if you run on premises and have limited memory (approximately 2 gigabytes \[GB\]).</span></span>

### <a name="number-of-orders-in-firming-bundle"></a><span data-ttu-id="4c0f6-159">バンドル確定時の注文数</span><span class="sxs-lookup"><span data-stu-id="4c0f6-159">Number of orders in firming bundle</span></span>

<span data-ttu-id="4c0f6-160">**バンドル確定時の注文数**パラメーターによって、各スレッドまたはバッチによって一度に処理される注文の合計数が指定できます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-160">The **Number or orders in firming bundle** parameter specifies the total number of orders that will be processed at a time by each thread/batch.</span></span> <span data-ttu-id="4c0f6-161">これにより、自動確定プロセスの並列処理が発生します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-161">It causes parallelization of the autofirming process.</span></span>

<span data-ttu-id="4c0f6-162">**マスター プランのパラメーター** ページ (**マスター プラン** \> 設定 \> マスター プランのパラメーター) の**一般**タブの**パフォーマンス** セクションで、**バンドル確定時の注文数**パラメーターを設定することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-162">You can set the **Number or orders in firming bundle** parameter in the **Performance** section on the **General** tab of the **Master planning parameters** page (**Master planning \> Setup \> Master planning parameters**).</span></span> <span data-ttu-id="4c0f6-163">自動確定プロセスの並列処理は、一緒に処理する必要がある注文に基づいています。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-163">Parallelization of the autofirming process is based on the orders that must be processed together.</span></span> <span data-ttu-id="4c0f6-164">たとえばこのパラメーターが **50** に設定されている場合、各スレッドまたはバッチのタスクは一度に 50 の注文を取得し、まとめて処理します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-164">For example, if this parameter is set to **50**, each thread or batch task will pick up 50 orders at a time and process them together.</span></span> <span data-ttu-id="4c0f6-165">試行錯誤のプロセスを使用して、最適な値を見つけることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-165">We recommend that you use a trial-and-error process to find the best value.</span></span> <span data-ttu-id="4c0f6-166">ただし、次の式を使用して初期値を計算することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-166">However, you can use the following formula to calculate an initial value:</span></span>

<span data-ttu-id="4c0f6-167">(バンドルあたりの注文数) = (要求品目の数 ÷ スレッド数)</span><span class="sxs-lookup"><span data-stu-id="4c0f6-167">(Number of orders per bundle) = (Number of demand items ÷ Number of threads)</span></span>

> [!NOTE]
> <span data-ttu-id="4c0f6-168">**バンドル確定時の注文数**パラメーターを **0** (ゼロ) に設定すると、自動確定プロセスの並列処理は発生しません。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-168">If you set the **Number of orders in firming bundle** parameter to **0** (zero), no parallelization of the autofirming process will occur.</span></span> <span data-ttu-id="4c0f6-169">プロセス全体が 1 つのバッチ タスク上で実行され、累積実行時間が計算されます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-169">The whole process will run on a single batch task and have a cumulative running time.</span></span> <span data-ttu-id="4c0f6-170">そのため、マスター プランの実行時間は増加します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-170">Therefore, the running time of your master planning will increase.</span></span> <span data-ttu-id="4c0f6-171">この理由により、このパラメーターを **0** (ゼロ) よりも大きい値に設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-171">For this reason, we recommend that you set this parameter to a value that is more than **0** (zero).</span></span>

### <a name="time-fences"></a><span data-ttu-id="4c0f6-172">タイム フェンス</span><span class="sxs-lookup"><span data-stu-id="4c0f6-172">Time fences</span></span>

<span data-ttu-id="4c0f6-173">タイム フェンスにより、計算およびその他の要件が、将来どの程度までマスター プランで計算される必要があるかを指定します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-173">Time fences specify how far in the future the calculations and other requirements must be calculated by master planning.</span></span> <span data-ttu-id="4c0f6-174">タイム フェンスが長いと、マスター プランの実行にかかる時間が長くなります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-174">The larger the time fence is, the longer it will take master planning to run.</span></span> <span data-ttu-id="4c0f6-175">そのため、タイム フェンスは業務要件に従って設定してください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-175">Therefore, set the time fences according to your business requirements.</span></span> <span data-ttu-id="4c0f6-176">タイム フェンスの詳細については、[マスター プランの設定](master-planning-setup.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-176">For more information about time fences, see [Set up master planning](master-planning-setup.md).</span></span>

### <a name="actions"></a><span data-ttu-id="4c0f6-177">アクション</span><span class="sxs-lookup"><span data-stu-id="4c0f6-177">Actions</span></span>

<span data-ttu-id="4c0f6-178">タイム フェンスの中で、**アクション メッセージ** パラメーターを見つけることもできます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-178">Among the time fences, you can also find the **Action message** parameter.</span></span> <span data-ttu-id="4c0f6-179">アクション メッセージの計算により、マスター プランの実行時間が長くなります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-179">The calculation of action messages causes a longer running time for master planning.</span></span> <span data-ttu-id="4c0f6-180">アクション メッセージが定期的に分析および適用されない場合 (毎日、毎週など)、マスター プラン実行中の計算を無効にすることを考慮してください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-180">If action messages aren't regularly analyzed and applied (daily, weekly, and so on), consider turning off the calculation during the master planning run.</span></span> <span data-ttu-id="4c0f6-181">計算をオフにするには、**マスター プラン** ページ (**マスター プラン \> 設定 \> 計画 \> マスター プラン**) で、**アクション メッセージ** タイム フェンスを **0** (ゼロ) に設定します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-181">To turn off the calculation, on the **Master plans** page (**Master planning \> Setup \> Plans \> Master plans**), set the **Action message** time fence to **0** (zero).</span></span> <span data-ttu-id="4c0f6-182">また、すべての補充グループに対して**アクション メッセージ**の設定が無効になっていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-182">Also make sure that the **Action message** setting is turned off for all the coverage groups.</span></span>

### <a name="futures"></a><span data-ttu-id="4c0f6-183">計画</span><span class="sxs-lookup"><span data-stu-id="4c0f6-183">Futures</span></span>

<span data-ttu-id="4c0f6-184">計画の計算により、マスター プランの実行時間が長くなります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-184">The calculation of futures causes a longer running time for master planning.</span></span> <span data-ttu-id="4c0f6-185">BOM を計画していない場合、また計画中に遅延を供給から需要に反映する必要がない場合は、マスター プラン中の計画の計算を無効にすることを考慮してください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-185">If you aren't planning BOMs, or if delays don't have to be propagated from supply to demand during planning, consider turning off futures calculations during master planning.</span></span> <span data-ttu-id="4c0f6-186">計算を無効にするには、実行中のマスター プランに対して**計画**のタイム フェンスを **0** (ゼロ) に設定します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-186">To turn off the calculations, set the **Futures** time fence to **0** (zero) for the master plan that you're running.</span></span> <span data-ttu-id="4c0f6-187">また、すべての補充グループに対して**計画**の設定が無効になっていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-187">Also make sure that the **Futures** setting is turned off for all the coverage groups.</span></span>

## <a name="one-heavy-routine-at-a-time"></a><span data-ttu-id="4c0f6-188">重いルーティンの同時実行</span><span class="sxs-lookup"><span data-stu-id="4c0f6-188">One heavy routine at a time</span></span>

<span data-ttu-id="4c0f6-189">マスター プランをスケジュールする場合、他のバッチ ジョブを同時にスケジュールしないでください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-189">When you schedule master planning, don't schedule any other batch job at the same time.</span></span> <span data-ttu-id="4c0f6-190">在庫決算などの他の重いルーティンを同時にスケジュールしないように特に注意してください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-190">Be especially careful that you don't schedule any other heavy routines, such as inventory close, at the same time.</span></span>

## <a name="review-the-session-log"></a><span data-ttu-id="4c0f6-191">セッション ログの確認</span><span class="sxs-lookup"><span data-stu-id="4c0f6-191">Review the session log</span></span>

<span data-ttu-id="4c0f6-192">システムは、マスター プラン中に実行されるタスクに関する追加情報を収集することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-192">The system can collect additional information about the tasks that run during master planning.</span></span> <span data-ttu-id="4c0f6-193">システムでこの情報を収集するには、**マスター プランの実行**ダイアログ ボックスで**処理時間の追跡**の設定を有効にします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-193">To have the system collect this information, turn on the **Track processing time** setting in the **Master planning run** dialog box.</span></span> <span data-ttu-id="4c0f6-194">収集された情報は、実行のボトルネックを見つけるのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-194">The information that is collected can help you find bottlenecks in the run.</span></span> <span data-ttu-id="4c0f6-195">たとえば、**ヘルパー タスク バンドル内のタスク数**が **1** に設定されている場合、実行時間が最も長い品目を識別することができます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-195">For example, when the **Number of tasks in helper task bundle** parameter is set to **1**, you can identify the item that has the longest running time.</span></span> <span data-ttu-id="4c0f6-196">また、ステータスが**補充**であるさまざまなスレッドの実行時間を比較することができ、各タスクの期間を比較することもできます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-196">You can also compare the running times for the various threads that have a status of **Coverage** and compare the duration for each task.</span></span>

<span data-ttu-id="4c0f6-197">システムのマスター プランの実行を確認するには、次のいずれかの手順に従います。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-197">To review the master planning runs of your system, follow one of these steps.</span></span>

- <span data-ttu-id="4c0f6-198">**マスター プラン** ワークスペースで、ドロップダウン フィールドのマスター プランを選択し、**マスター プラン** タイルで**履歴**を選択します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-198">In the **Master planning** workspace, select a master plan in the drop-down field, and then on the **Master planning** tile, select **History**.</span></span> <span data-ttu-id="4c0f6-199">ジョブを選択し、クイック タブで**照会**を選択した後、**プロセス タスク期間**を選択します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-199">Select a job, select **Inquiries** on the FastTab, and then select **Process task duration**.</span></span>
- <span data-ttu-id="4c0f6-200">**マスター プラン** ページにおいて、左ウィンドウの計画を選択し、クイック タブの**履歴**を選択します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-200">On the **Master plans** page, select a plan in the left pane, and then select **History** on the FastTab.</span></span> <span data-ttu-id="4c0f6-201">ジョブを選択し、クイック タブで**照会**を選択した後、**プロセス タスク期間**を選択します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-201">Select a job, select **Inquiries** on the FastTab, and then select **Process task duration**.</span></span>

<span data-ttu-id="4c0f6-202">セッション ログを確認する場合、次を考慮します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-202">When you review the session log, consider the following:</span></span>

- <span data-ttu-id="4c0f6-203">**更新**に長い時間はかかりません (一般に、30 分までです)。ただし、これは単一スレッドの場合です。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-203">**Update** should not take a long time (in general, it should take up to 30 minutes), however, it's single-threaded.</span></span>
- <span data-ttu-id="4c0f6-204">**計画のコピー**に長い時間はかかりません (約 1 分かかります)。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-204">**Copy plan** should not take a long time (it should take about one minute).</span></span>
- <span data-ttu-id="4c0f6-205">通常、**自動確定**には約 30 分かかります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-205">**Auto firming** usually takes about 30 minutes.</span></span> <span data-ttu-id="4c0f6-206">ただし、注文数や品目の複雑さに応じて、最大で数時間かかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-206">However, it can take up to multiple hours, depending on the number of orders and the complexity of the items.</span></span>
- <span data-ttu-id="4c0f6-207">**自動確定**は**補充**ほど時間がかかりません。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-207">**Auto firming** should take less time than **Coverage**.</span></span>
- <span data-ttu-id="4c0f6-208">**補充**は、その残りに対して最も長い時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-208">**Coverage** should take the longest time relative to the rest.</span></span>
- <span data-ttu-id="4c0f6-209">データおよび BOM の数に応じて、**アクション**および**計画メッセージ**は時間がかかることがあります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-209">**Action** and **Future message** can take a long time, depending on the data and the number of BOMs.</span></span>

## <a name="filtering-of-items"></a><span data-ttu-id="4c0f6-210">品目のフィルター処理</span><span class="sxs-lookup"><span data-stu-id="4c0f6-210">Filtering of items</span></span>

<span data-ttu-id="4c0f6-211">**マスター プランの実行** ダイアログ ボックスで適用されるフィルター処理は、マスター プランの実行期間に影響します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-211">Filters that are applied in the **Master planning run** dialog box affect the duration of the master planning run.</span></span> <span data-ttu-id="4c0f6-212">**マスター プラン \> マスター プラン \> 実行 \> マスター プラン**に移動するか、または**マスター プラン** ワークスペースで**実行**を選択します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-212">Go to **Master planning \> Master planning \> Run \> Master planning**, or select **Run** in the **Master planning** workspace.</span></span> <span data-ttu-id="4c0f6-213">実行から品目を除外するには、(品目番号ではなく) 品目のライフサイクルの状態でフィルター処理することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-213">To exclude items from the run, we recommend that you filter by the lifecycle state of the item (not by item numbers).</span></span> <span data-ttu-id="4c0f6-214">ライフサイクルの状態でフィルター処理する場合、品目番号でフィルター処理する場合よりも更新プロセスに時間がかかりません。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-214">When you filter by lifecycle state, the update process will take less time than when you filter by item numbers.</span></span>

## <a name="automatically-filter-by-items-with-direct-demand"></a><span data-ttu-id="4c0f6-215">直納品目で自動的にフィルター処理する</span><span class="sxs-lookup"><span data-stu-id="4c0f6-215">Automatically filter by items with direct demand</span></span>

<span data-ttu-id="4c0f6-216">マスター プランの実行時間を改善するため、直納品目のみを含めるように選択できます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-216">To improve the master planning run time, you can choose to only include items with direct demand.</span></span> <span data-ttu-id="4c0f6-217">このフィルターは、**対象に含める**フィールドに他のフィルターが適用されていない完全なマスター プラン実行に対してのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-217">This filter can only be used for a complete master planning run with no other filters applied in the **Records to include** field.</span></span> <span data-ttu-id="4c0f6-218">フィルターを使用したマスター プランの実行では、**直納品目で自動的にフィルター処理する**の設定は無視されます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-218">A master planning run with filters will ignore the **Automatically filter by items with direct demand** setting.</span></span>

<span data-ttu-id="4c0f6-219">**直納品目で自動的にフィルター処理する**フィールドは、**マスター プラン パラメーター** ページにあり、前処理と後処理の両方の設定で使用できます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-219">The **Automatically filter by items with direct demand** field is found on the **Master planning parameters** page and can be used with both pre-processing and post-processing settings.</span></span>

### <a name="pre-processing"></a><span data-ttu-id="4c0f6-220">前処理</span><span class="sxs-lookup"><span data-stu-id="4c0f6-220">Pre-processing</span></span>
<span data-ttu-id="4c0f6-221">**前処理: 直納品目で自動的にフィルター処理する**パラメーターを使用すると、マスター プランの前処理フェーズには、次の条件の少なくとも 1 つを満たす品目のみが含まれるようになります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-221">The **Pre-processing: Automatically filter by items with direct demand** parameter ensures that the pre-processing phase of master planning only includes items that fulfill at least one of the following conditions:</span></span>
  - <span data-ttu-id="4c0f6-222">この品目には、発注書、販売注文、見積、移動オーダー、製造オーダーなど、予測される入庫または出庫があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-222">The item has an expected receipt or issue, such as a purchase order, sales order, quote, transfer order, or production order.</span></span> 
  - <span data-ttu-id="4c0f6-223">品目には、安全在庫 (最小手持在庫) がある品目補充があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-223">The item has item coverage with safety stock (minimum on-hand inventory).</span></span>
  - <span data-ttu-id="4c0f6-224">品目には、今日以降の需要予測があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-224">Forecast demand after today exists for the item.</span></span>
  - <span data-ttu-id="4c0f6-225">品目には、今日以降の供給予測があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-225">Forecast supply after today exists for the item.</span></span>
  - <span data-ttu-id="4c0f6-226">品目には、まだ作成されていないコール センター モジュールからの連続行が含まれます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-226">The item includes any continuity lines from the call center module yet to be created.</span></span>

> [!NOTE]
> <span data-ttu-id="4c0f6-227">利用可能な現物手持在庫がある品目には、その品目に対する需要がないため、要求トランザクションは表示されません。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-227">An item that has physically available on-hand inventory will not show a requirement transaction because there is no demand for the item.</span></span>

### <a name="post-processing"></a><span data-ttu-id="4c0f6-228">後処理</span><span class="sxs-lookup"><span data-stu-id="4c0f6-228">Post-processing</span></span>
<span data-ttu-id="4c0f6-229">**後処理: 直納品目で自動的にフィルター処理する**オプションは、補充グループで **部品表バージョン要件**を設定した場合にのみ関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-229">The **Post-processing: Automatically filter by items with direct demand** option is only relevant if you set **BOM version requirement** in your coverage groups.</span></span> <span data-ttu-id="4c0f6-230">それ以外の場合は、このパラメーターを有効にする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-230">Otherwise, you do not need to enable the parameter.</span></span> 

<span data-ttu-id="4c0f6-231">補充ステップを開始する前に、補充設定**部品表バージョン要求**が有効になっている品目が処理されるプレ補充ステップがあります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-231">Before the coverage step starts, there is a pre-coverage step during which items with the coverage setting **BOM version requirement** enabled will be reprocessed.</span></span> <span data-ttu-id="4c0f6-232">これは、必要な BOM バージョンの品目が計画されていることを確認するために行われます。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-232">This is done to ensure that items from the required BOM version are planned.</span></span> <span data-ttu-id="4c0f6-233">前処理中に需要があると見なされた品目には需要がないため、プランの実行から除外する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-233">Items that are considered to have demand during pre-processing no longer have any demand and therefore should be excluded from the planning run.</span></span>

## <a name="performance-checklist-summary"></a><span data-ttu-id="4c0f6-234">パフォーマンスのチェックリストの概要</span><span class="sxs-lookup"><span data-stu-id="4c0f6-234">Performance checklist summary</span></span>

- <span data-ttu-id="4c0f6-235">**スレッド数** – **0** (ゼロ) より大きい値に設定します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-235">**Number of threads** – Set to a value that is more than **0** (zero).</span></span>
- <span data-ttu-id="4c0f6-236">**ヘルパー タスク バンドル内のタスク数** – **0** (ゼロ) より大きい値に設定します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-236">**Number of tasks in helper task bundle** – Set to a value that is more than **0** (zero).</span></span> <span data-ttu-id="4c0f6-237">(このトピックの前の部分で示した式を使用します。)</span><span class="sxs-lookup"><span data-stu-id="4c0f6-237">(Use the formulas that are given earlier in this topic.)</span></span>
- <span data-ttu-id="4c0f6-238">**キャッシュの使用** – システムのメモリが不足しない限り**最大**に設定します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-238">**Use of cache** – Set to **Maximum** unless your system is low on memory.</span></span>
- <span data-ttu-id="4c0f6-239">**バンドル確定時の注文数** – **0** (ゼロ) より大きい値に設定します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-239">**Number of orders in firming bundle** – Set to a value that is more than **0** (zero).</span></span> <span data-ttu-id="4c0f6-240">(このトピックの前の部分で示した式を使用します。)</span><span class="sxs-lookup"><span data-stu-id="4c0f6-240">(Use the formula that is given earlier in this topic.)</span></span>
- <span data-ttu-id="4c0f6-241">**タイム フェンス** – 業務上の必要に合わせて調整します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-241">**Time fences** – Adjust to your business needs.</span></span>
- <span data-ttu-id="4c0f6-242">**アクションと計画** – 使用しない場合、アクションおよび計画を無効にします。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-242">**Actions and futures** – Disable actions and future if you don't use them.</span></span>
- <span data-ttu-id="4c0f6-243">**重いルーティンの同時実行** – マスター プランと他の重いルーティンを一緒に実行しないでください。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-243">**One heavy routine at a time** – Don't run master planning together with any other heavy routine.</span></span>
- <span data-ttu-id="4c0f6-244">**セッション ログの確認。**</span><span class="sxs-lookup"><span data-stu-id="4c0f6-244">**Review the session log.**</span></span>
- <span data-ttu-id="4c0f6-245">**品目のフィルター処理** – ライフサイクルの状態を使用して、マスター プランの実行から品目を除外します。</span><span class="sxs-lookup"><span data-stu-id="4c0f6-245">**Filtering of items** – Use the lifecycle state to exclude items from the master planning run.</span></span> <span data-ttu-id="4c0f6-246">(品目番号は使用しないでください。)</span><span class="sxs-lookup"><span data-stu-id="4c0f6-246">(Don't use the item numbers.)</span></span>
