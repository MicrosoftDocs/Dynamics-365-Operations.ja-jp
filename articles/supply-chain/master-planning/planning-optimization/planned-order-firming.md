---
title: 計画オーダーの確定
description: このトピックでは、計画オーダーを確定する方法について説明します。 計画オーダーが確定されると、それらは実際の発注書、移動オーダー、または製造オーダーになります。
author: ChristianRytt
ms.date: 04/22/2021
ms.search.form: ReqTransPo, ReqTransFirmLog
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: crytt
ms.search.validFrom: 2021-04-22
ms.dyn365.ops.version: 10.0.19
ms.openlocfilehash: a4f882f1abc9f758aca77b137b28aa973f925ea9
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/11/2021
ms.locfileid: "6019497"
---
# <a name="firm-planned-orders"></a><span data-ttu-id="ce1ff-104">計画オーダーの確定</span><span class="sxs-lookup"><span data-stu-id="ce1ff-104">Firm planned orders</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="ce1ff-105">計画オーダーは、マスター プラン プロセスの一部として *確定済* (つまり、リリース済) である必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-105">Planned orders must be *firmed* (that is, released) as part of the master planning process.</span></span> <span data-ttu-id="ce1ff-106">計画オーダーが確定されると、それらは実際の発注書、移動オーダー、または製造オーダーになります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-106">When planned orders are firmed, they become actual purchase orders, transfer orders, or production orders.</span></span> <span data-ttu-id="ce1ff-107">これらの注文は、*リリース済注文* または *オープン注文* とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-107">These orders are also known as *released orders* or *open orders*.</span></span>

<span data-ttu-id="ce1ff-108">計画オーダーを確定するための 3 つの方法があります:</span><span class="sxs-lookup"><span data-stu-id="ce1ff-108">There are three methods for firming planned orders:</span></span>

- <span data-ttu-id="ce1ff-109">**手動による確定** – 一覧で特定の計画オーダーを選択してから、手動でプロセスを開始します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-109">**Manual firming** – Select specific planned orders in a list, and then manually start the process.</span></span>
- <span data-ttu-id="ce1ff-110">**自動確定** – 補充グループ、個々の品目、および品目とマスター プランの組み合わせに対する既定の確定タイム フェンスを定義します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-110">**Auto-firming** – Define a default firming time fence for coverage groups, individual items, and combinations of items and master plans.</span></span> <span data-ttu-id="ce1ff-111">その後、マスター プランの実行時に、注文日付が確定用に指定されたタイム フェンス内である場合は、計画オーダーが自動的に確定されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-111">Then, during master planning runs, planned orders will automatically be firmed if the order date is within the specified time fence for firming.</span></span>
- <span data-ttu-id="ce1ff-112">**クエリベースの確定** – プロパティに基づいて計画オーダーを選択するクエリを定義します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-112">**Query-based firming** – Define a query to select planned orders based on their properties.</span></span> <span data-ttu-id="ce1ff-113">バッチ ジョブを設定して、定期的にクエリを実行し、一致する注文を確定できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-113">You can set up a batch job to run the query and firm matching orders on a regular schedule.</span></span>

<span data-ttu-id="ce1ff-114">このトピックでは、各方法について詳細に説明します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-114">This topic describes each method in detail.</span></span>

## <a name="enable-the-features-that-are-described-in-this-topic"></a><a name="enable-features"></a><span data-ttu-id="ce1ff-115">このトピックで説明されている機能を有効にする</span><span class="sxs-lookup"><span data-stu-id="ce1ff-115">Enable the features that are described in this topic</span></span>

<span data-ttu-id="ce1ff-116">計画オーダー機能のほとんどは、計画の最適化を使用する Microsoft Dynamics 365 Supply Chain Management のすべての標準インストールで利用できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-116">Most planned order features are available in all standard installations of Microsoft Dynamics 365 Supply Chain Management that use Planning Optimization.</span></span> <span data-ttu-id="ce1ff-117">ただし、このトピックで説明する機能のいくつかは、使用前に機能管理で有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-117">However, a few of the features that are described in this topic must be turned on in Feature management before you can use them.</span></span>

### <a name="enable-parallelized-firming-of-planned-orders"></a><span data-ttu-id="ce1ff-118">計画オーダーの確定並列化を有効にする</span><span class="sxs-lookup"><span data-stu-id="ce1ff-118">Enable parallelized firming of planned orders</span></span>

<span data-ttu-id="ce1ff-119">確定並列化により、複数のスレッド間で並列処理することで、確定プロセスの時間を高速化できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-119">Parallelized firming helps speed up the firming process by parallelizing it across multiple threads.</span></span> <span data-ttu-id="ce1ff-120">この方法は、多くの計画オーダーを確定する場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-120">This approach can be useful when many planned orders are firmed.</span></span>

<span data-ttu-id="ce1ff-121">この機能をシステムで使用するには、[機能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)に移動して、*計画オーダーの確定並列化* 機能を有効にします。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-121">To make this functionality available in your system, go to [Feature management](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), and turn on the *Parallel firming of planned orders* feature.</span></span>

### <a name="enable-planned-order-firming-with-filtering"></a><span data-ttu-id="ce1ff-122">フィルター処理を使用した計画オーダーの確定を有効にする</span><span class="sxs-lookup"><span data-stu-id="ce1ff-122">Enable planned order firming with filtering</span></span>

<span data-ttu-id="ce1ff-123">フィルター処理を使用した計画オーダーの確定により、確定する計画オーダーを選択するロジック基準を定義できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-123">Planned order firming with filtering lets you define logical criteria for selecting which planned orders to firm.</span></span> <span data-ttu-id="ce1ff-124">選択した計画オーダーをプレビューしたり、プロセスをバックグラウンドで実行したり、またはバッチ ジョブとしてスケジュールしたりもできます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-124">You can also preview which planned orders were selected, run the process in the background, and/or schedule it as a batch job.</span></span>

<span data-ttu-id="ce1ff-125">この機能をシステムで使用するには、[機能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)に移動して、*フィルター処理を使用した計画オーダーの確定* 機能を有効にします。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-125">To make this functionality available in your system, go to [Feature management](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), and turn on the *Planned order firming with filtering* feature.</span></span>

### <a name="enable-auto-firming-for-planning-optimization"></a><span data-ttu-id="ce1ff-126">計画最適化の自動確定を有効にする</span><span class="sxs-lookup"><span data-stu-id="ce1ff-126">Enable auto-firming for Planning Optimization</span></span>

<span data-ttu-id="ce1ff-127">自動確定により、計画オーダーを確定のタイム フェンス内でマスター プラン プロセスの一部として確定できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-127">Automatic firming lets you firm planned orders as part of the master planning process during the time fence for firming.</span></span> <span data-ttu-id="ce1ff-128">Supply Chain Management に組み込まれている計画エンジンでは、常に自動確定がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-128">Auto-firming is always supported for the planning engine that is built into Supply Chain Management.</span></span> <span data-ttu-id="ce1ff-129">ただし、計画の最適化でも使用するには、この機能を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-129">However, to use it with Planning Optimization too, you must turn on the feature.</span></span>

<span data-ttu-id="ce1ff-130">この機能をシステムで使用するには、[機能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)に移動して、*計画最適化の自動確定* 機能を有効にします。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-130">To make this functionality available in your system, go to [Feature management](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), and turn on the *Auto-firming for Planning Optimization* feature.</span></span>

## <a name="manually-firm-planned-orders"></a><span data-ttu-id="ce1ff-131">計画オーダーを手動で確定する</span><span class="sxs-lookup"><span data-stu-id="ce1ff-131">Manually firm planned orders</span></span>

<span data-ttu-id="ce1ff-132">計画オーダーを手動で確定するには、確定する計画オーダーを検索して選択してから、手動で確定プロセスを開始します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-132">To manually firm planned orders, you find and select the planned orders that you want to firm, and then you manually start the firming process.</span></span>

1. <span data-ttu-id="ce1ff-133">[計画オーダー リスト ページを開きます](approved-planned-order.md#view-planned-orders)。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-133">[Open any planned orders list page](approved-planned-order.md#view-planned-orders).</span></span>
1. <span data-ttu-id="ce1ff-134">**フィルター** フィールド、**計画** フィールド、および列見出しを使用して一覧をフィルター処理および並べ替えをし、検索している計画オーダーを見つけられるようにします。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-134">Use the **Filter** field, **Plan** field, and column headings to filter and sort the list so that you can find the planned orders that you're looking for.</span></span>
1. <span data-ttu-id="ce1ff-135">確定する各計画オーダー明細行のチェック ボックスを選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-135">Select the check box for each planned order that you want to firm.</span></span> <span data-ttu-id="ce1ff-136">(適用したフィルターに基づいて) 現在ページに一覧表示されているすべての計画オーダーを確定する場合は、この手順を省略します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-136">If you want to firm all the planned orders that are currently listed on the page (based on the filters that you applied), skip this step.</span></span>
1. <span data-ttu-id="ce1ff-137">アクション ウィンドウで、次のボタンのいずれかを選択します:</span><span class="sxs-lookup"><span data-stu-id="ce1ff-137">On the Action Pane, select one of the following buttons:</span></span>

    - <span data-ttu-id="ce1ff-138">**確定** – 選択した計画オーダーのみを確定します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-138">**Firm** – Firm only the selected planned orders.</span></span>
    - <span data-ttu-id="ce1ff-139">**すべて確定** – 選択されたチェック ボックスに関係なく、(適用したフィルターに基づいて) 現在ページに一覧表示されているすべての計画オーダーを確定します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-139">**Firm all** – Firm all the planned orders that are currently listed on the page (based on the filters that you applied), regardless of any check boxes that are selected.</span></span> <span data-ttu-id="ce1ff-140">このオプションは、多数の計画オーダーを確定する場合に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-140">This option can be useful if you're firming many planned orders.</span></span>

1. <span data-ttu-id="ce1ff-141">**確定** ダイアログ ボックスの、**パラメーター** クイック タブで、次のフィールドを設定します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-141">In the **Firming** dialog box, on the **Parameters** FastTab, set the following fields.</span></span> <span data-ttu-id="ce1ff-142">(これらのフィールドの多くは、**マスター プラン パラメーター** ページの **標準更新** タブから既定値を取得します。)</span><span class="sxs-lookup"><span data-stu-id="ce1ff-142">(Many of these fields take their default values from the **Standard update** tab on the **Master planning parameters** page.)</span></span>

    - <span data-ttu-id="ce1ff-143">**マーキングの更新** – 計画オーダーの確定時に使用する在庫のマーキング ポリシーを選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-143">**Update marking** – Select the inventory marking policy to use when planned orders are firmed.</span></span>
    - <span data-ttu-id="ce1ff-144">**エラーが発生した場合は確定を中止** – このオプションを *はい* に設定すると、計画オーダーの 1 つでエラーが発生した場合にすべての計画オーダーの確定が停止されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-144">**Stop firming if an error occurs** – Set this option to *Yes* to stop firming all selected planned orders if an error occurs in one of them.</span></span> <span data-ttu-id="ce1ff-145">**確定並列化** オプションが *はい* に設定されている場合は、このオプションが *いいえ* に設定される必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-145">This option must be set to *No* if the **Parallelize firming** option is set to *Yes*.</span></span>
    - <span data-ttu-id="ce1ff-146">**確定並列化** – このオプションは、システムで [*計画オーダーの確定並列化* 機能](#enable-features)が有効になっている場合、および確定する複数の計画オーダーを選択した場合にのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-146">**Parallelize firming** – This option is available only if the [*Parallel firming of planned orders* feature](#enable-features) is turned on in your system, and if you've selected two or more planned orders for firming.</span></span> <span data-ttu-id="ce1ff-147">確定プロセスを並列で実行するには、このオプションを *はい* に設定します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-147">Set it to *Yes* to run the firming processes in parallel.</span></span> <span data-ttu-id="ce1ff-148">確定並列化により、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-148">Parallel firming can help improve performance.</span></span>
    - <span data-ttu-id="ce1ff-149">**スレッド数** – このオプションは、システムで [*計画オーダーの確定並列化* 機能](#enable-features)が有効になっている場合、および **確定並列化** オプションを *はい* に設定した場合にのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-149">**Number of threads** – This option is available only if the [*Parallel firming of planned orders* feature](#enable-features) is turned on in your system, and if you've set the **Parallelize firming** option to *Yes*.</span></span> <span data-ttu-id="ce1ff-150">確定プロセスを並列化するのに使用するスレッドの数を入力します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-150">Enter the number of threads to use to parallelize the firming process.</span></span> <span data-ttu-id="ce1ff-151">このオプションをマスター プランで使用する方法については、[マスター プランのパフォーマンスの改善](../master-planning-performance.md#number-of-threads)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-151">For advice about how to use this option in master planning, see [Improve master planning performance](../master-planning-performance.md#number-of-threads).</span></span>

        > [!NOTE]
        > <span data-ttu-id="ce1ff-152">**スレッド数** フィールドの *0* (ゼロ) の値により、マスター プランの実行時間が長くなります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-152">A value of *0* (zero) for the **Number of threads** field increases the running time of master planning.</span></span> <span data-ttu-id="ce1ff-153">そのため、このフィールドに常に 0 より大きい値を設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-153">Therefore, we recommend that you always set this field to a value that is more than 0.</span></span>

    - <span data-ttu-id="ce1ff-154">**仕入先ごとにグループ化** – このオプションを *はい* に設定すると、計画発注書がグループ化され、確定時に仕入先ごとに 1 つの発注書が作成されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-154">**Group by vendor** – Set this option to *Yes* to group planned purchase orders and create one purchase order per vendor during firming.</span></span> <span data-ttu-id="ce1ff-155">また、1 つの発注書を作成し、その計画オーダーごとに 1 つの行があるようにすることもできます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-155">Alternatively, you can create one purchase order that has one line for each planned order.</span></span>
    - <span data-ttu-id="ce1ff-156">**購入担当者グループごとにグループ化** – このオプションを *はい* に設定すると、計画発注書がグループ化され、仕入先と購入担当者グループを組み合わせた 1 つの発注書が作成されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-156">**Group by buyer group** – Set this option to *Yes* to group planned purchase orders and create one purchase order that combines the vendor and buyer group.</span></span> <span data-ttu-id="ce1ff-157">このオプションを使用するには、**仕入先ごとにグループ化** オプションも *はい* に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-157">To use this option, you must also set the **Group by vendor** option to *Yes*.</span></span>
    - <span data-ttu-id="ce1ff-158">**期間ごとにグループ化** (**発注書** セクション) – 計画発注書をグループ化する期間を選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-158">**Group by period** (in the **Purchase orders** section) – Select the period to group planned purchase orders by.</span></span> <span data-ttu-id="ce1ff-159">このオプションを使用するには、**仕入先ごとにグループ化** オプションも選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-159">To use this option, you must also select the **Group by vendor** option.</span></span>
    - <span data-ttu-id="ce1ff-160">**期間ごとにグループ化** (**移動** セクション) – 移動オーダーをグループ化する期間を選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-160">**Group by period** (in the **Transfers** section) – Select the period to group planned transfer orders by.</span></span> <span data-ttu-id="ce1ff-161">注文は、**移動元倉庫** および **移動先倉庫** の値に基づいてグループ化されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-161">The orders will be grouped based on **From warehouse** and **To warehouse** values.</span></span>

    <span data-ttu-id="ce1ff-162">![確定ダイアログ ボックスのパラメーター クイック タブ](./media/manual-firming.png "確定ダイアログ ボックスのパラメーター クイック タブ")</span><span class="sxs-lookup"><span data-stu-id="ce1ff-162">![Parameters FastTab in the Firming dialog box](./media/manual-firming.png "Parameters FastTab in the Firming dialog box")</span></span>

1. <span data-ttu-id="ce1ff-163">**バックグラウンドで実行** クイック タブで、ジョブを設定してバッチ モードで実行されるようにします。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-163">On the **Run in the background** FastTab, set up the job so that it runs in batch mode.</span></span> <span data-ttu-id="ce1ff-164">ただし、手動で確定する場合は、繰り返しスケジュールを設定しても意味がありません。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-164">However, it doesn't make sense to set up a recurrent schedule when you're doing manual firming.</span></span> <span data-ttu-id="ce1ff-165">これらのフィールドは、Supply Chain Management の他の種類の[バックグラウンド ジョブ](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md)と同様に機能します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-165">The fields work just as they work for other types of [background jobs](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md) in Supply Chain Management.</span></span> <span data-ttu-id="ce1ff-166">ただし、手動確定の場合、バッチ ジョブでは現在選択されている計画オーダーのみが処理されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-166">However, for manual firming, the batch job will process only the currently selected planned orders.</span></span> <span data-ttu-id="ce1ff-167">ページで現在適用されているフィルターに適合する注文は処理されません。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-167">It won't process any orders that fit the filters that are currently applied on the page.</span></span>
1. <span data-ttu-id="ce1ff-168">**OK** を選択して設定を適用し、確定注文を生成します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-168">Select **OK** to apply your settings and generate the firmed orders.</span></span>

## <a name="auto-firm-planned-orders"></a><span data-ttu-id="ce1ff-169">計画オーダーを自動確定する</span><span class="sxs-lookup"><span data-stu-id="ce1ff-169">Auto-firm planned orders</span></span>

<span data-ttu-id="ce1ff-170">自動確定を使用して、マスター プラン プロセスの一部として計画オーダーを確定できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-170">Automatic firming lets you firm planned orders as part of the master planning process.</span></span> <span data-ttu-id="ce1ff-171">補充グループ、個々の品目、および品目とマスター プランの組み合わせに対する既定の確定タイム フェンスを定義できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-171">You can define a firming time fence for coverage groups, individual items, and combinations of items and master plans.</span></span> <span data-ttu-id="ce1ff-172">その後、マスター プランの実行時に、注文日付が確定用に指定されたタイム フェンス内である場合は、計画オーダーが自動的に確定されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-172">Then, during master planning runs, planned orders will automatically be firmed if the order date is within the specified time fence for firming.</span></span> <span data-ttu-id="ce1ff-173">計画の最適化と組み込みマスター プラン操作により生成される計画オーダーは、注文日 (開始日) を異なる方法で処理します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-173">Planned orders that are generated by Planning Optimization and the built-in master planning operation handle the order date (that is, the start date) differently.</span></span>

> [!NOTE]
> <span data-ttu-id="ce1ff-174">計画発注書の自動確定は、仕入先に関連付けられている品目に対してのみ発生します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-174">Auto-firming of planned purchase orders can occur only for items that are associated with a vendor.</span></span>
> 
> <span data-ttu-id="ce1ff-175">確定された派生オーダー (つまり、外注発注書) は、変更追跡が有効になっている場合は、状態が *確認中* と表示されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-175">Derived orders (that is, subcontract purchase orders) that are firmed will have a status of *In-review* if change tracking is turned on.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ce1ff-176">このセクションで説明されている機能を計画の最適化で使用する前に、このトピックで前述したように、システムで [*計画の最適化の自動確定* 機能](#enable-features)を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-176">Before the feature that is described in this section can be used with Planning Optimization, the [*Auto-firming for Planning Optimization* feature](#enable-features) must be turned on in your system, as described at the beginning of this topic.</span></span> <span data-ttu-id="ce1ff-177">自動確定は、常に組み込みマスター プラン エンジンで使用できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-177">Auto-firming can always be used with the built-in master planning engine.</span></span>

### <a name="auto-firming-with-planning-optimization-vs-the-built-in-planning-engine"></a><span data-ttu-id="ce1ff-178">計画の最適化による自動確定と組み込み計画エンジンによる自動確定の比較</span><span class="sxs-lookup"><span data-stu-id="ce1ff-178">Auto-firming with Planning Optimization vs. the built-in planning engine</span></span>

<span data-ttu-id="ce1ff-179">計画の最適化および組み込み計画エンジンの両方とも、計画オーダーの自動確定に使用できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-179">Both Planning Optimization and the built-in planning engine can be used to auto-firm planned orders.</span></span> <span data-ttu-id="ce1ff-180">ただし、重要な違いがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-180">However, there are some important differences.</span></span> <span data-ttu-id="ce1ff-181">たとえば、計画の最適化は注文日 (つまり、開始日) を使用して確定する計画オーダーを決定しますが、組み込み計画エンジンは、要求期日 (つまり、終了日) を使用します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-181">For example, Planning Optimization uses the order date (that is, the start date) to determine which planned orders to firm, whereas the built-in planning engine uses the requirement date (that is, the end date).</span></span> <span data-ttu-id="ce1ff-182">次の表では、違いについて要約します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-182">The following table summarizes the differences.</span></span>

| | <span data-ttu-id="ce1ff-183">計画の最適化</span><span class="sxs-lookup"><span data-stu-id="ce1ff-183">Planning Optimization</span></span> | <span data-ttu-id="ce1ff-184">組み込み計画エンジン</span><span class="sxs-lookup"><span data-stu-id="ce1ff-184">Built-in planning engine</span></span> |
|---|---|---|
| <span data-ttu-id="ce1ff-185">**日付基準**</span><span class="sxs-lookup"><span data-stu-id="ce1ff-185">**Date basis**</span></span> | <span data-ttu-id="ce1ff-186">自動確定は注文日 (開始日) に基づきます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-186">Auto-firming is based on the order date (start date).</span></span> | <span data-ttu-id="ce1ff-187">自動確定は要求期日 (終了日) に基づきます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-187">Auto-firming is based on the requirement date (end date).</span></span> |
| <span data-ttu-id="ce1ff-188">**リード タイム**</span><span class="sxs-lookup"><span data-stu-id="ce1ff-188">**Lead time**</span></span> | <span data-ttu-id="ce1ff-189">注文日 (開始日) によって確定がトリガーされるため、確定タイム フェンスの一部としてリード タイムを考慮する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-189">Because the order date (start date) triggers the firming, you don't have to consider the lead time as part of the firming time fence.</span></span> | <span data-ttu-id="ce1ff-190">注文が時間通りに確定されるようにするには、確定タイム フェンスはリード タイムよりも長くする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-190">To help guarantee that orders are firmed in a timely manner, the firming time fence must be longer than the lead time.</span></span> |
| <span data-ttu-id="ce1ff-191">**現在の週の注文**</span><span class="sxs-lookup"><span data-stu-id="ce1ff-191">**Orders for the current week**</span></span> | <span data-ttu-id="ce1ff-192">現在の週に開始する必要があるすべての注文を確定するには、確定タイム フェンスを 1 週間にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-192">To firm all orders that must start during the current week, the firming time fence must be one week.</span></span> | <span data-ttu-id="ce1ff-193">現在の週に開始する必要があるすべての注文を確定するには、確定タイム フェンスはリードタイム + 1 週間にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-193">To firm all orders that must start during the current week, the firming time fence must be the lead time plus one week.</span></span> |

### <a name="set-up-auto-firming-and-the-firming-time-fence"></a><span data-ttu-id="ce1ff-194">自動確定および確定タイム フェンスを設定する</span><span class="sxs-lookup"><span data-stu-id="ce1ff-194">Set up auto-firming and the firming time fence</span></span>

<span data-ttu-id="ce1ff-195">このセクションで後述するように、自動確定タイム フェンスを関連する補充設定に割り当てることにより、自動確定を有効にします。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-195">You turn on auto-firming by assigning an automated firming time fence to the relevant coverage setup, as described later in this section.</span></span> <span data-ttu-id="ce1ff-196">補充設定に対して自動確定を有効になっていない場合、またはリリース済製品の **正味必要量** ページなど、特定のページから計画を開始している場合は、自動確定プロセスは省略されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-196">If auto-firming isn't turned on for any coverage setup, or if planning is started from a specific page, such as the **Net requirements** page for a released product, the auto-firming process is skipped.</span></span>

<span data-ttu-id="ce1ff-197">自動確定のグループ化およびマーキング オプションでは、**マスター プラン パラメーター** ページの **標準更新** タブからその値を取得します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-197">Grouping and marking options for auto-firming take their values from the **Standard update** tab on the **Master planning parameters** page.</span></span>

<span data-ttu-id="ce1ff-198">自動確定タイム フェンスは、関連する補充設定に対して入力する日数により定義されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-198">The auto-firming time fence is defined by the number of days that you enter for the relevant coverage setup.</span></span> <span data-ttu-id="ce1ff-199">自動確定を有効にして、次の方法で確定タイム フェンスを制御できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-199">You can turn on auto-firming and control the firming time fence in the following ways:</span></span>

- <span data-ttu-id="ce1ff-200">補充グループの既定の確定タイム フェンスを定義するには、**マスター プラン \> 設定 \> 補充 \> 補充グループ** の順に移動し、補充グループを選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-200">To define the default firming time fence for a coverage group, go to **Master planning \> Setup \> Coverage \> Coverage groups**, and select a coverage group.</span></span> <span data-ttu-id="ce1ff-201">次に、**その他** クイック タブの **自動確定タイム フェンス (日)** フィールドに、日数を入力します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-201">Then, on the **Other** FastTab, in the **Automatic firming time fence (days)** field, enter the number of days.</span></span>
- <span data-ttu-id="ce1ff-202">特定の品目の補充グループに対して定義されている確定タイム フェンスを上書きするには、**製品情報管理 \> リリース済製品** に移動します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-202">To overwrite the firming time fence that is defined for the coverage group for a specific item, go to **Product information management \> Released products**.</span></span> <span data-ttu-id="ce1ff-203">アクション ウィンドウで、**計画** を選択し、**品目補充** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-203">On the Action Pane, select **Plan**, and then select **Item coverage**.</span></span> <span data-ttu-id="ce1ff-204">**一般** タブで、**タイム フェンスの上書き** を選択してから、**自動確定タイム フェンス (日)** フィールドに日数を入力します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-204">On the **General** tab, select **Override time fence**, and then, in the **Automatic firming time fence (days)** field, enter the number of days.</span></span>
- <span data-ttu-id="ce1ff-205">特定のマスター プランの補充グループおよび品目補充に対して定義される確定タイム フェンスを上書きするには、**マスター プラン \> 設定 \> マスター プラン** の順に移動し、マスター プランを選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-205">To overwrite the firming time fence that is defined for the coverage group and item coverage for a specific master plan, go to **Master planning \> Setup \> Master plans**, and select a master plan.</span></span> <span data-ttu-id="ce1ff-206">次に、**タイム フェンス (日数)** クイック タブで、**確定** オプションを *はい* に設定して、日数を入力します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-206">Then, on the **Time fence in days** FastTab, set the **Firming** option to *Yes*, and enter the number of days.</span></span>

<span data-ttu-id="ce1ff-207">前述のタイム フェンスをすべて *0* (ゼロ) に設定すると、関連する補充済品目に対して自動確定は事実上無効になります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-207">If you set all the previously mentioned time fences to *0* (zero), auto-firming is effectively disabled for the relevant covered items.</span></span>

## <a name="firm-planned-orders-by-using-a-query"></a><span data-ttu-id="ce1ff-208">クエリを使用して計画オーダーを確定する</span><span class="sxs-lookup"><span data-stu-id="ce1ff-208">Firm planned orders by using a query</span></span>

[!INCLUDE [preview-banner-section](../../../includes/preview-banner-section.md)]

<span data-ttu-id="ce1ff-209">クエリ ベースの確定により、事前に定義された基準に基づいて確定を計画できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-209">Query-based firming lets you plan firming based on criteria that are defined in advance.</span></span> <span data-ttu-id="ce1ff-210">自動確定とは異なり、クエリ ベースの確定では、異なる時点での注文の異なるサブセットの自動確定を実行できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-210">Unlike auto-firming, query-based firming allows for automated firming of different subsets of orders at different points in time.</span></span> <span data-ttu-id="ce1ff-211">また、手動または自動のいずれかの操作を使用して、さまざまなタイプの計画オーダーを確定できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-211">Additionally, you can use either manual or automated operations to firm different types of planned orders.</span></span> <span data-ttu-id="ce1ff-212">設定に基づいて選択された確定注文をプレビューすることもできます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-212">You can also preview which firmed orders are selected based on your settings.</span></span> <span data-ttu-id="ce1ff-213">したがって、選択内容が予想に適合していることを確認できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-213">Therefore, you can confirm that the selection fits your expectations.</span></span>

<span data-ttu-id="ce1ff-214">自動確定は、クエリ ベースの確定と組み合わせることができます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-214">You can combine auto-firming with query-based firming.</span></span> <span data-ttu-id="ce1ff-215">たとえば、クエリ ベースの確定ジョブには、一致する自動確定補充コンフィギュレーションのタイム フェンスより長いフォワード タイム フェンスがあります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-215">For example, a query-based firming job has a forward time fence that is longer than the time fence for a matching auto-firming coverage configuration.</span></span> <span data-ttu-id="ce1ff-216">したがって、クエリ ベースの確定ジョブは、自動確定がトリガーされる前に計画オーダーを処理します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-216">Therefore, the query-based firming job will process its planned orders before the auto-firming is triggered.</span></span> <span data-ttu-id="ce1ff-217">この動作を利用して、特定の仕入先への注文を、他の仕入先からの同様の製品の注文とは異なる方法でスケジュールできます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-217">You can take advantage of this behavior to schedule orders for specific vendors differently than orders for similar products from other vendors.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ce1ff-218">このセクションで説明されている機能を使用する前に、このトピックで前述したように、システムで [*フィルター処理を使用した計画オーダーの確定* 機能](#enable-features)を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-218">Before the feature that is described in this section can be used, the [*Planned order firming with filtering* feature](#enable-features) must be turned on in your system, as described at the beginning of this topic.</span></span>

<span data-ttu-id="ce1ff-219">クエリ ベースの確定プロセスを使用して計画オーダーを確定するには、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-219">To firm a planned order by using the query-based firming process, follow these steps.</span></span>

1. <span data-ttu-id="ce1ff-220">**マスター プラン \> マスター プラン \> 実行 \> 計画オーダーの確定** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-220">Go to **Master-planning \> Master planning \> Run \> Planned order firming**.</span></span>
1. <span data-ttu-id="ce1ff-221">**計画オーダーの確定** ダイアログ ボックスの、**パラメーター** クイック タブで、基本処理、マーキング、およびグループ化のオプションを設定します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-221">In the **Planned order firming** dialog box, on the **Parameters** FastTab, set the basic processing, marking, and grouping options.</span></span> <span data-ttu-id="ce1ff-222">これらのオプションは、**確定** ダイアログ ボックスで実行するのと同様に機能します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-222">These options work just as they do in the **Firming** dialog box.</span></span> <span data-ttu-id="ce1ff-223">(説明については、前のセクションを参照してください。) 次に **計画** セクションで、**計画オーダーの確定** ダイアログ ボックスに固有である次のフィールドを設定します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-223">(See the previous section for descriptions.) Then, in the **Plan** section, set the following fields that are unique to the **Planned order firming** dialog box:</span></span>

    - <span data-ttu-id="ce1ff-224">**計画** – このクエリによって検出される計画オーダーの確定時に適用するマスター プランを選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-224">**Plan** – Select the master plan that should be applied during firming of the planned orders that are found by this query.</span></span>
    - <span data-ttu-id="ce1ff-225">**確定タイム フェンスの繰越日数** – さまざまな要件やその他の考慮事項を、将来どの程度までマスター プランで計算する必要があるかを選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-225">**Firming time fence days forward** – Select how far in the future the various requirements and other considerations must be calculated by master planning.</span></span>
    - <span data-ttu-id="ce1ff-226">**確定タイム フェンスの逆算日数** – さまざまな要件やその他の考慮事項を、過去どの程度までマスター プランで計算する必要があるかを選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-226">**Firming time fence days backward** – Select how far in the past the various requirements and other considerations must be calculated by master planning.</span></span>

    <span data-ttu-id="ce1ff-227">![計画オーダーの確定ダイアログ ボックスのパラメーター クイック タブ](./media/planned-order-firming-main-1.png "計画オーダーの確定ダイアログ ボックスのパラメーター クイック タブ")</span><span class="sxs-lookup"><span data-stu-id="ce1ff-227">![Parameters FastTab in the Planned order firming dialog box](./media/planned-order-firming-main-1.png "Parameters FastTab in the Planned order firming dialog box")</span></span>

1. <span data-ttu-id="ce1ff-228">注文に含めるレコードを指定するには、**対象に含めるレコード** クイック タブの **フィルター** ボタンを選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-228">To specify which records should be included in the order, select the **Filter** button on the **Records to include** FastTab.</span></span> <span data-ttu-id="ce1ff-229">標準クエリ ダイアログが表示され、選択基準、並べ替え基準、および結合を定義できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-229">A standard query dialog appears, where you can define selection criteria, sorting criteria, and joins.</span></span> <span data-ttu-id="ce1ff-230">このフィールドは、Supply Chain Management の他の種類のクエリの実行と同様に機能します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-230">The fields work just as they do for other types of queries in Supply Chain Management.</span></span> <span data-ttu-id="ce1ff-231">このフィールドは読み取り専用であり、クエリに関連する値を表示します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-231">The fields here are read-only and show values that are related to your query.</span></span>

    <span data-ttu-id="ce1ff-232">![計画オーダーの確定ダイアログ ボックスの対象に含めるレコード クイック タブ](./media/planned-order-firming-main-2.png "計画オーダーの確定ダイアログ ボックスの対象に含めるレコード クイック タブ")</span><span class="sxs-lookup"><span data-stu-id="ce1ff-232">![Records to include FastTab on the Planned order firming dialog box](./media/planned-order-firming-main-2.png "Records to include FastTab on the Planned order firming dialog box")</span></span>

1. <span data-ttu-id="ce1ff-233">**プレビュー** を選択すると、これまでの設定に基づいて、確定注文の内容がプレビューできます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-233">Select **Preview** to preview the content of your firmed order, based on your settings so far.</span></span> <span data-ttu-id="ce1ff-234">確定される計画オーダーの一覧がメッセージとして表示されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-234">The list of planned orders that will be firmed is shown as a message.</span></span> <span data-ttu-id="ce1ff-235">その後、プレビューに意図したとおりに確定注文が表示されるまで、必要に応じて設定を調整できます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-235">You can then adjust your settings as required until the preview shows the firmed order as you intend it.</span></span>

    <span data-ttu-id="ce1ff-236">![確定注文プレビューの例](./media/planned-order-firming-preview.png "確定注文プレビューの例")</span><span class="sxs-lookup"><span data-stu-id="ce1ff-236">![Example of a firmed order preview](./media/planned-order-firming-preview.png "Example of a firmed order preview")</span></span>

    > [!WARNING]
    > <span data-ttu-id="ce1ff-237">この機能により、フィルター条件に一致するすべての計画オーダーが確定されます。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-237">This feature will firm all planned orders that match the filter criteria.</span></span> <span data-ttu-id="ce1ff-238">計画オーダーの無意味な確定によって、不要な購入、移動、および製造オーダーが大量に作成される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-238">Uncritical firming of planned orders can cause massive numbers of unwanted purchase, transfer, and production orders to be created.</span></span> <span data-ttu-id="ce1ff-239">続行する前に、**プレビュー** ボタンを常に使用して、含めるレコードを検証します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-239">Before you continue, always use the **Preview** button to validate the records that will be included.</span></span>

1. <span data-ttu-id="ce1ff-240">**バックグラウンドで実行** クイック タブで、バッチ モードで実行されるようにジョブを設定するか、定期的なスケジュールを設定します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-240">On the **Run in the background** FastTab, set up the job so that it runs in batch mode, and/or set up a recurrent schedule.</span></span> <span data-ttu-id="ce1ff-241">このフィールドは、Supply Chain Management の他の種類の[バックグラウンド ジョブ](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md)で実行されるのと同様に機能します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-241">The fields work just as they do for other types of [background jobs](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md) in Supply Chain Management.</span></span>
1. <span data-ttu-id="ce1ff-242">**OK** を選択して設定を適用し、確定注文を生成します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-242">Select **OK** to apply your settings and generate the firmed orders.</span></span>

## <a name="track-firmed-orders"></a><span data-ttu-id="ce1ff-243">確定注文を追跡する</span><span class="sxs-lookup"><span data-stu-id="ce1ff-243">Track firmed orders</span></span>

<span data-ttu-id="ce1ff-244">確定された計画オーダーを追跡するには、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-244">To track a planned order that was firmed, follow these steps.</span></span>

1. <span data-ttu-id="ce1ff-245">[計画オーダー リスト ページを開きます](approved-planned-order.md#view-planned-orders)。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-245">[Open any planned orders list page](approved-planned-order.md#view-planned-orders).</span></span>
1. <span data-ttu-id="ce1ff-246">追跡する計画オーダーを開くか選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-246">Open or select the planned order that you want to track.</span></span>
1. <span data-ttu-id="ce1ff-247">アクション ペインウィンドウの **表示** タブの、**表示** グループで、**確定履歴** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ce1ff-247">On the Action Pane, on the **View** tab, in the **View** group, select **Firming history**.</span></span>

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
