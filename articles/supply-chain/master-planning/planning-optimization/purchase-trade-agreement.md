---
title: 購買売買契約を使用したマスター プラン
description: このトピックでは、計画の最適化で計画オーダーの仕入先やリードタイムを、購買契約書に記載されている最高価格またはリードタイムに基づいて検出する方法について説明します。
author: ChristianRytt
ms.date: 06/29/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ReqCreatePlanWorkspace
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: crytt
ms.search.validFrom: 2020-05-29
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 138bf58e07d4d6df3c2106e4176e02fcdb0a6dba
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/01/2021
ms.locfileid: "5820421"
---
# <a name="master-planning-with-purchase-trade-agreements"></a>購買売買契約を使用したマスター プラン

[!include [banner](../../includes/banner.md)]

このトピックでは、計画の最適化で計画オーダーの仕入先やリードタイムを、特定の製品に対して指定されたすべての購買売買契約に記載されている最高価格またはリードタイムに基づいて検出する方法について説明します。

## <a name="turn-on-the-purchase-trade-agreements-for-planning-optimization-feature"></a>計画の最適化機能の購買売買契約を有効にする

この機能を使用するには、システム上で有効にする必要があります。 管理者は、[機能の管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) ワークスペースを使用して、機能の状態を確認し、必要に応じて有効にすることができます。 この機能は、次のようにして表示されます。

- **モジュール:** *マスター プラン*
- **機能名:** *計画の最適化の購買売買契約*

## <a name="prepare-your-system-to-evaluate-purchase-trade-agreements-during-master-planning"></a>マスタープラン中に購買売買契約を評価できるようにシステムを準備する

購買売買契約を評価する計画の最適化を適用するようにシステムを構成するには、次の手順に従います。

1. **マスター プラン \> 設定 \> マスター プランのパラメータ** に移動します。 **ベンダー** セクションの **計画オーダー** タブで、次の値を設定します。

    - **売買契約の検索** - このオプションを購買売買契約をマスター プランに含める場合は、このオプションを **はい** に設定します。
    - **検索基準** - 各購買売買契約に対して優先順位を付ける係数として、**最小リードタイム** または **最小単価** を選択します。

1. **調達 \> 設定 \> 価格と割引 \> 価格/割引をアクティブにする** に移動して、**ベンダー** オプションが **はい** に設定されていることを確認してください。
1. **製品情報管理 \> 設定 \> 分析コードグループとバリアントグループ \> 保管分析コードグループ** を表示し、マスタープランでの購買売買契約の評価に使用する製品に適用する保管分析コードグループを選択します。 このグループ内の関連する各保管分析コードの **購買価格** 列にチェックマークが付いていることを確認してください。 関連するすべての保管場所分析コード グループに対して、この手順を繰り返します。

## <a name="prepare-a-released-product-to-evaluate-purchase-trade-agreements-during-master-planning"></a>マスタープラン中に購買売買契約を評価できるようにシステムを準備する

前のセクションで説明されているようにシステムを準備したら、次の手順に従って、この機能を使用する各製品が正しく設定されていることを確認してください。

1. **製品情報管理 \> 製品 \> リリース済製品** の順に移動して、ターゲット製品を開きます。
1. **購買** クイックタブで、**仕入先** フィールドに仕入先が割り当てられていないことを確認します。
1. アクション ペインで、**計画** タブ、**補充** グループで、選択した製品の **品目補充** を選択して **品目補充** ページを開きます。 次の設定を検証します。

    - **一般** タブでは、仕入先の上書きを設定できます。 購買売買契約を使用して仕入先を選択する計画の最適化を行う場合は、**特定の設定を使用する** チェックボックスをオフにして、仕入先の上書きを防止する必要があり ます。
    - **リードタイム** タブでは、リードタイムの上書きを設定できます。 リードタイムを選択するために購買売買契約を使用する計画の最適化を実行する場合は、リードタイムを上書きしないようにする必要があります。 購買売買契約 (**購買**、**生産**、および/または **振替**) を使用して、選択するリードタイムのタイプごとに、このチェックボックスをオフにし ます。

1. **品目補充** ページを閉じて、選択した製品の詳細ページに戻ります。
1. アクション ペインの **計画** タブの **予測** グループで、**供給予測** を 選択して **供給予測** ページを開きます。 ここに表示されている行には、**仕入先アカウント** 列の値が含まれていないことを確認してください。
1. **供給予測** ページを閉じて、選択した製品の詳細ページに戻ります。
1. アクション ペインの **購入** タブの、**取引契約** グループで、**取引契約** をクリックします。 関連する購買売買契約がすべて表示されていることを確認します。 また、その契約に指定されたリードタイムを使用する計画の最適化を行う場合は、**リードタイムの無視** オプションが **いいえ** に設定されていることを確認してください。
1. アクション ペインで、**計画** タブ、**注文設定** グループで、選択した製品の **規定の注文設定** を選択して **規定の注文設定** ページを開きます。 **発注書** クイックタブで、**購買リードタイム** フィールドの値を表示します。 品目補充のリードタイムの上書きが定義されていない場合、**リードタイムの無視** オプションが **はい** に設定されている売買契約を選択するときに、計画の最適化によってこの値が使用されます。 したがって、この値は必要に応じて調整する必要があります。
1. 各関連製品に対してこの手順を繰り返します。

> [!NOTE]
> 購買売買契約明細行の通貨は、選択した仕入先の通貨と一致する必要があります。 マスター プランには、通貨が仕入先の通貨と一致する購買売買契約明細行の情報のみが含まれます。

## <a name="examples-of-how-planning-optimization-finds-vendor-and-lead-times"></a>計画の最適化によって仕入先とリードタイムを検索する方法の例

次の表に、リリースされた製品とその関連する購買売買契約のさまざまな設定が、結果として得られる計画発注書の値にどのように影響するかを示します。 右端の 2 つの列の **太字** の値は、計画の最適化によって選択された値です。 その他の列の **_bold and italic_** の値は、各行の結果の値を生成した設定です。

| リリース済製品: バリアント | 既定の注文設定: リードタイム | 品目補充: 仕入先の上書き | 品目補充: リードタイムの上書き | 売買契約: 仕入先 | 売買契約: リードタイム | 売買契約: リードタイムの無視 | 結果の仕入先 | 結果のリードタイム |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| ***US001** _ | _*_1_*_ | なし | なし | US003 | 3 | なし | _ *US001** | **1** |
| US001 | 1 | ***はい: US002** _ | _*_はい: 2_*_ | US003 | 3 | なし | _ *US002** | **2** |
| *(空白)* | 1 | なし | なし | ***US003** _ | _*_3_*_ | なし | _ *US003** | **3** |
| *(空白)* | ***1** _ | なし | なし | _*_US003_*_ | 3 | あり | _ *US003** | **1** |
| *(空白)* | ***1** _ | _*_はい: US002_*_ | なし | US003 | 3 | なし | _ *US002** | **1** |
| *(空白)* | ***1** _ | _*_はい: US002_*_ | なし | US003 | 3 | なし | _ *US002** | **1** |
| *(空白)* | 1 | なし | はい: 2 | ***US003** _ | _*_3_*_ | なし | _ *US003** | **3** |
| *(空白)* | 1 | なし | ***はい: 2** _ | _*_US003_*_ | 3 | あり | _ *US003** | **2** |

## <a name="additional-resources"></a>追加リソース

[購買契約](../../procurement/purchase-agreements.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]