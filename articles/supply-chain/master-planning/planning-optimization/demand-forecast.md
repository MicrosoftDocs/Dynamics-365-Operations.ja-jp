---
title: 需要予測を伴うマスター プラン
description: このトピックでは、計画の最適化を使用したマスター プラン中の需要予測を含める方法について説明します。
author: ChristianRytt
manager: tfehr
ms.date: 12/02/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: MpsIntegrationParameters, MpsFitAnalysis
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: crytt
ms.search.validFrom: 2020-12-02
ms.dyn365.ops.version: AX 10.0.13
ms.openlocfilehash: cb696c365e02ab3e3b28da19b8b33f1975c142f8
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/15/2021
ms.locfileid: "4983547"
---
# <a name="master-planning-with-demand-forecasts"></a>需要予測を伴うマスター プラン

[!include [banner](../../includes/banner.md)]

需要予測を計画の最適化と組み合わせて使用することにより、マスター プランで予測される需要を考慮することができます。 需要予測を手動で作成するか、インポートするか、または Microsoft Dynamics 365 Supply Chain Management の需要予測機能を使用して生成することができます。 需要予測の詳細については、[需要予測の概要](../introduction-demand-forecasting.md) を参照してください。

> [!NOTE]
> 個別の予測計画は、計画の最適化ではサポートされていません。 したがって、計画の最適化を使用している場合は、**マスター プラン パラメータ** ページの **現在の予測計画** の設定が無効になります。

## <a name="set-up-a-master-plan-to-include-a-demand-forecast"></a>需要予測を含めるためのマスター プランの設定

計画された需要予測が含まれるようにマスター プランを構成するには、次の手順に従います。

1. **マスター プラン \> 設定 \> プラン \> マスター プラン** の順に移動します。
1. 既存の計画を選択するか、新しい計画を作成します。
1. **一般** クイック タブで、次のフィールドを設定します。

    - **予測モデル** - 適用する予測モデルを選択します。 このモデルは、現在のマスター プランに対して供給提案が生成されるときに考慮されます。
    - **需要予測を含める** – このオプションを *はい* に設定すると、現在のマスター プランに需要予測を含めることができます。 これを *いいえ* に設定すると、需要予測トランザクションはマスター プランに含まれません。
    - **予測要件を減らすために使用するメソッド** - 予測要求を減らすために使用するメソッドを選択します。 詳細については、このトピックの後半の [予測の下方修正キー](#reduction-keys) セクションを参照してください。

1. **タイムフェンス (日数)** クイックタブで、次のフィールドを設定して、需要予測が発生する期間を指定できます。

    - **予測計画** - 個々の補充グループから発生した予測計画タイムフェンスを上書きする場合は、このオプションを *はい* に設定します。 現在のマスター プランの個々の補充グループの値を使用しない場合は、*いいえ* に設定します。
    - **予測期間** - **予測計画** オプションを *はい* に設定した場合は、需要予測を適用すべき日数 (今日からの日付) を指定します。

    > [!IMPORTANT]
    > **予測計画** 設定は、計画の最適化ではまだサポートされていません。

## <a name="set-up-a-coverage-group-to-include-a-demand-forecast"></a>需要予測を含めるための補充グループの設定

需要予測が含まれるように補充グループを構成するには、次の手順に従います。

1. **マスター プラン \> 設定 \> プラン \> 補充グループ** の順に移動します。
1. 既存の補充グループを選択するか、新しいグループを作成します。
1. **その他** クイック タブで、次のフィールドを設定します。

    - **予測計画タイム フェンス** - 需要予測を適用する日数 (今日の日付から) を入力します。 この値は、前のセクションで説明したように、マスター プランの **予測計画** オプションを使用して上書きできます。
    - **下方修正キー** - 適用する下方修正キーを選択します。 詳細については、[予測の下方修正キーを作成および設定](#create-reduction-key) して [このトピックの後の下方修正キーセクションを使用](#use-reduction-key) します。
    - **予測の下方修正** - **予測要求の削減に使用する方法** フィールドが *トランザクション-下方修正キー* または *トランザクション - 動的期間* に設定されているマスター プランの場合、予測を下方修正するトランザクションを指定します。 次の値からいずれか 1 つを選択します。

        - **すべてのトランザクション** - すべてのトランザクションで予測を下方修正する必要があります。
        - **注文** - 販売注文の場合のみ、予測を下方修正する必要があります。

        > [!NOTE]
        > *すべてのトランザクション* を選択した場合、同じ在庫分析コードで需要と供給の両方を持つトランザクションはニュートラルと見なされ、予測下方修正では無視されます。 たとえば、計画分析コードが [サイトのみ] に設定されており、倉庫ではない場合、サイト 1、倉庫 11、サイト 1 (倉庫 13) の移動オーダーは無視され、残りの需要予測が下方修正されません。

    - **会社間注文を含める** - 予測を下方出するときに会社間注文を含める必要がある場合は、このオプションを *はい* に設定します。 それ以外の場合、*いいえ* に設定します。
    - **需要予測に顧客予測を含める** - 顧客予測を全体的な予測に含めるかどうかを指定します。 このオプションにより、実需がどのように需要予測を減少させるか決定されます。 特定の顧客が購入した品目の供給をマスター プランでカバーするために、この設定を使用できます。

        - このオプションを *はい* に設定すると、予測全体に顧客予測が含まれます。 この場合、実際の顧客要求では、顧客予測と全体的な予測の両方が減少します。 マスター プランは、全体的な予測数量のみに対応する計画オーダーを生成します。
        - 予測全体に顧客予測が含めない場合は、このオプションを *いいえ* に設定します。 この場合、実際の顧客の需要では顧客の予測のみが減少します。 マスター プランは、全体的な予測数量および各顧客の数量に対する予測の両方をカバーする、計画オーダーを生成します。

## <a name="forecast-reduction-keys"></a><a name="reduction-keys"></a>予測下方修正キー

このセクションでは、予測要求を減らすために使用されるさまざまな方法に関する情報を提供します。 これには、各メソッドの結果の例が含まれます。 予測下方修正キーの作成、設定、および使用方法についても説明します。 予測要求を減らすため予測下方修正キーを使用するいくつかの方法があります。

### <a name="methods-that-are-used-to-reduce-forecast-requirements"></a>予測要求の削減に使用する方法

マスター プランに予測を含める場合、実際の需要が含まれるときに予測要求を削減する方法を選択できます。 マスター プランでは、過去から予測要求が除外されます。つまり、今日の日付より前のすべての予測要求が除外されます。

マスター プランに予測を含め、予測要求を減らすために使用される方法を選択するには、**マスター プラン \> 設定 \> プラン \> マスター プラン** の順に移動します。 **予測モデル** フィールドで、予測モデルを選択します。 **予測要求の削減に使用する方法** フィールドで、方法を選択します。 次のオプションを使用できます。

- None
- 率 – 下方修正キー
- トランザクション - 下方修正キー (計画の最適化ではまだサポートされていません)
- トランザクション – 動的期間

次のセクションでは、各オプションの詳細について説明します。

#### <a name="none"></a>なし

**なし** を選択すると、予測要求はマスター スケジューリング時に削減されません。 この場合、マスター プランでは需要予測 (予測要求) を供給する計画オーダーが作成されます。 これらの計画オーダーは、他のタイプの需要に関係なく、推奨数量を管理します。 たとえば、販売注文が出された場合、マスター プランは販売注文を供給する追加の計画オーダーを作成します。 予測要求の数量は削減されません。

#### <a name="percent--reduction-key"></a>率 – 下方修正キー

**率 - 下方修正キー** を選択すると、予測要求は下方修正キーで定義された割合および期間に従って削減されます。 この場合、マスター プランでは各期間の予測数量 × 下方修正キーとして数量が計算される計画オーダーが作成されます。 他のタイプの需要がある場合、マスター プランではその要求を供給する計画オーダーも作成されます。

##### <a name="example-percent--reduction-key"></a>例: 率 – 下方修正キー

この例は、下方修正キーによって定義されたパーセンテージおよび期間に従って、下方修正キーが需要予測要求を減少させる方法を示します。

この例では、次の需要予測がマスター プランに含まれます。

| 月    | 需要予測 |
|----------|-----------------|
| 1 月  | 1.000           |
| 2 月 | 1.000           |
| 3 月    | 1.000           |
| 4 月    | 1.000           |

**下方修正キー** ページで、次の行を設定します。

| 計上額 | 単位  | パーセンテージ |
|--------|-------|---------|
| 1      | 月 | 100     |
| 2      | 月 | 75      |
| 3      | 月 | 50      |
| 4      | 月 | 25      |

品目の補充グループに下方修正キーを割り当てます。 その後、**マスター プラン** ページの **予測要求の削減に使用する方法** フィールドで、**率 - 下方修正キー** を選択します。

この場合、1 月 1 日に予測のスケジューリングを実行する場合、需要予測要求は、**下方修正キー** ページで設定した率に従って消費されます。 次の要求数量がマスター プランに転送されます。

| 月                | 計画オーダーの数量 | 計算    |
|----------------------|------------------------|----------------|
| 1 月              | 0                      | = 0% × 1,000   |
| 2 月             | 250                    | = 25% × 1,000  |
| 3 月                | 500                    | = 50% × 1,000  |
| 4 月                | 750                    | = 75% × 1,000  |
| 5 ～ 12 月 | 1.000                  | = 100% × 1,000 |

#### <a name="transactions--reduction-key"></a>トランザクション – 下方修正キー

**トランザクション - 下方修正キー** を選択すると、予測要求は下方修正キーで定義された期間に発生するトランザクションによって削減されます。

##### <a name="example-transactions--reduction-key"></a>例: トランザクション – 下方修正キー

この例は、下方修正キーによって定義された期間中に実行される実際の注文が、需要予測要求を減少させる方法を示します。

この例では、**マスター プラン** ページの **予測要求の削減に使用する方法** フィールドで、**トランザクション – 下方修正キー** を選択します。

1 月 1 日の時点で次の販売注文が存在します。

| 月    | 注文数 |
|----------|--------------------------|
| 1 月  | 956                      |
| 2 月 | 1,176                    |
| 3 月    | 451                      |
| 4 月    | 119                      |

前の例で使用した毎月 1,000 個の同じ需要予測を使用する場合、次の要求数量がマスター プランに転送されます。

| 月                | 必要な個数 |
|----------------------|---------------------------|
| 1 月              | 44                        |
| 2 月             | 0                         |
| 3 月                | 549                       |
| 4 月                | 881                       |
| 5 ～ 12 月 | 1.000                     |

#### <a name="transactions--dynamic-period"></a>トランザクション – 動的期間

**トランザクション - 動的期間** を選択する場合、予測要求が動的期間中に発生する実際の注文トランザクションから削減されます。 動的期間は、現在の予測日を含み、次の予測の開始時点で終了します。 この場合、マスター プランでは需要予測 (予測要求) を供給する計画オーダーが作成されます。 ただし、実際の注文トランザクションが出されると、予測要求が削減されます。 実際のトランザクションは、予測要求の一部を使用します。

このオプションを使用すると、次の動作が実行されます。

- 下方修正キーは必要でないまたは使用されません。 
- 予測が完全に減少すると、現在の予測の予測要求は 0 (ゼロ) になります。
- 将来の予測がない場合、入力された最後の予測からの予測要求は減少します。
- タイム フェンスは予測下方修正の計算に含まれます。
- プラス在庫日数は予測下方修正の計算に含まれます。
- 実際の注文トランザクションが予測要求を超える場合、残りのトランザクションは次の予測の期間には繰り越されません。

##### <a name="example-1-transactions--dynamic-period"></a>例 1: トランザクション – 動的期間

ここでは、**トランザクション - 動的期間** メソッドの使用方法を示す簡単な例を上げます。

この例では、次の需要予測がマスター プランに含まれます。

| 日       | 需要予測 |
|------------|-----------------|
| 1 月 1 日  | 1.000           |
| 2 月 1 日 | 1.000             |

次の販売注文も作成します。

| 日        | 販売注文数量 |
|-------------|----------------------|
| 1 月 15 日  | 200                  |
| 15 年 2月 | 400                  |

この場合、次の計画オーダーが作成されます。

| 需要予測日 | 件数 | 説明                           |
|--------------------- |----------|---------------------------------------|
| 1 月 1 日            | 800      | 予測要求 (= 1,000 – 200) |
| 1 月 15 日           | 200      | 販売注文の要件             |
| 2 月 1 日           | 600      | 予測要求 (= 1,000 – 400) |
| 15 年 2月          | 400      | 販売注文の要件             |

##### <a name="example-2-transactions--dynamic-period"></a>例 2: トランザクション – 動的期間

ほとんどの場合、トランザクションが特定の予測期間内の需要予測を下方修正するようにシステムが設定されています: 週、月など。 これらの期間は下方修正キーで定義されます。 ただし、2 つの需要予測行の間の時間も、*暗黙に* 期間ととらえることもできます。

この例では、次の日付および数量について需要予測を作成します。

| 日       | 需要予測 |
|------------|-----------------|
| 1 月 1 日  | 1.000           |
| 1 月 5 日  | 500             |
| 1 月 12 日 | 1.000           |

この予測では、予測日の間にクリア期間がないことに注意してください。 日付 1 と日付 2 と間には 4 日間の期間があり、日付 2 と日付 3 の間には 7 日間の期間があります。 このような周期が変動するものを、動的期間といいます。

次の販売注文明細行も作成します。

| 日                             | 販売注文数量 |
|----------------------------------|----------------------|
| 前年度の 12 月 15 日 | 500                  |
| 1 月 3 日                        | 100                  |
| 1 月 10 日                       | 200                  |

この場合、次のように予測が削減されます。

- 最初の販売注文は、いずれの期間内でもないため、予測を下方修正することはありません。
- 2 番目の販売注文は 1 月 1 日から 1 月 5 日の間に行われるため、1 月 1 日の予測は 100 だけ下方修正されます。
- 3 番目の販売注文は 1 月 5 日から 1 月 12 日の間に行われるため、1 月 5 日の予測は 200 だけ下方修正されます。

したがって、次の計画オーダーが作成されます。

| 需要予測日             | 件数 | 説明                                                         |
|----------------------------------|----------|---------------------------------------------------------------------|
| 前年度の 12 月 15 日 | 500      | 販売注文の要件                                            |
| 1 月 1 日                        | 900      | 1 月 1 日から 1 月 5 日の期間の予測要求 (= 1,000 – 100) |
| 1 月 3 日                        | 100      | 販売注文の要件                                            |
| 1 月 5 日                        | 300      | 1 月 5 日から 1 月 10 日の期間の予測要求 (= 500 – 200)  |
| 1 月 12 日                       | 1.000    | 1 月 12 日から終了日の期間の予測要求                      |

### <a name="create-and-set-up-a-forecast-reduction-key"></a><a name="create-reduction-key"></a>予測下方修正キーの作成および設定

予測下方修正キーは、予測要求を削減するため **トランザクション - 下方修正キー** および **率 - 下方修正キー** の方法で使用されます。 下方修正キーを作成および設定するには、次の手順に従います。

1. **マスター プラン \> 設定 \> 補充 \> 下方修正キー** の順に移動します。
2. **新規** を選択または **Ctrl+N** を押して下方修正キーを作成します。
3. **下方修正キー** フィールドで、予測下方修正キーの固有識別子を入力します。 その後、**名前** フィールドで、名前を入力します。 
4. 各期間の期間および下方修正キーの割合を定義します。

    - **有効日** フィールドは、期間の作成が開始する日付を示します。 **有効日を使用** オプションを **はい** に設定すると、有効日の期間が開始します。 **いいえ** に設定すると、マスター プランが実行される日付で期間が開始します。
    - 予測下方修正が発生する期間を定義します。
    - 特定の期間の、予測要求を削減する必要がある割合を指定します。 要件を削減するには正の値、または要件を増加するには負の値を入力できます。

### <a name="use-a-reduction-key"></a><a name="use-reduction-key"></a>下方修正キーの使用

予測下方修正キーは、品目の補充グループに割り当てられる必要があります。 これらの手順に従い、下方修正キーを品目の補充グループに割り当てます。

1. **マスター プラン \> 設定 \> 補充 \> 補充グループ** の順に移動します。
2. **その他** クイック タブの、**下方修正キー** フィールドで、補充グループに割り当てる下方修正キーを選択します。 その後、下方修正キーは、補充グループに属する品目すべてに適用されます。
3. マスター スケジューリング時に予測下方修正の計算に下方修正キーを使用するには、予測計画またはマスター プランの設定でこの設定を定義する必要があります。 次の場所のいずれかに移動します:

    - マスター プラン \> 設定 \> 計画 \> 予測計画
    - マスター プラン \> 設定 \> 計画 \> マスター プラン

4. **予測計画** または **マスター プラン** ページの、**一般** クイック タブの、**予測要求の削減に使用する方法** フィールドで、**率 - 下方修正キー** または **トランザクション - 下方修正キー** のいずれかを選択します。

### <a name="reduce-a-forecast-by-transactions"></a>トランザクションによる予測の削減

予測要求の削減のメソッドとして **トランザクション - 下方修正キー** または **トランザクション - 動的期間** を選択すると、予測を削減するトランザクションを指定できます。 **補充グループ** ページの、**その他** クイック タブにある、**予測の削減方法** フィールドで、すべてのトランザクションで予測を削減する必要がある場合は **すべてのトランザクション** を、または販売注文のみで予測を削減する必要がある場合は **販売注文** を選択します。


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]