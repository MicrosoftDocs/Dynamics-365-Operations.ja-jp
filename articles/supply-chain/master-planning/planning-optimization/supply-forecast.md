---
title: 供給予測を伴うマスター プラン
description: この記事では、マスター プランで供給予測がどのように考慮されるのかについて説明します。
author: t-benebo
ms.date: 09/21/2022
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: benebotg
ms.search.validFrom: 2022-09-21
ms.dyn365.ops.version: 10.0.30
ms.openlocfilehash: dc83d10851958ec67166cb7e40cfd84dceae6651
ms.sourcegitcommit: 3e04f7e4bc0c29c936dc177d5fa11761a58e9a02
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/18/2022
ms.locfileid: "9690085"
---
# <a name="master-planning-with-supply-forecasts"></a>供給予測を伴うマスター プラン

[!include [banner](../../includes/banner.md)]

供給予測を使用すると、今後必要になる供給を指定できます。 通常、前年度の販売履歴に見積の基盤を作成し、その予測を予算作成に使用します。 自分のマスター プランを設定して、計画時に予測を考慮することもできます。

## <a name="set-up-a-master-plan-to-consider-supply-forecasts"></a>供給予測を考慮するためのマスター プランの設定

実行するときに、各マスター プランが予測を考慮するかどうかを指定できます。 次の手順に従って、各プランの予測オプションを設定します。

1. **マスター プラン \> 設定 \> プラン \> マスター プラン** の順に移動します。
1. リスト ペインにある既存のマスター プランを選択するか、アクションペインの **新規** を選択して新規マスター プランを作成します。
1. **一般** クイック タブで、次のフィールドを設定します。

    - **予測モデル** – マスター プランで考慮する必要がある供給予測または需要予測を含むモデルを選択します。
    - **供給予測を含める** – マスター プランが供給予測を考慮する必要がある場合にこのオプションを *はい* に設定します。
    - **需要予測を含める** – マスター プランが需要予測を考慮する必要がある場合にこのオプションを *はい* に設定します。 この設定は **供給予測を含める** 設定には依存しませんが、ページのその他の設定の一部は供給予測と需要予測の両方に適用されます。 需要予測を考慮するプランの詳細については、[需要予測を使用したマスター プラン](demand-forecast.md) を参照してください。
    - **予測要件を下方修正するために使用するメソッド** – マスター プラン中に、予測要求を下方修正するために使用するメソッドを選択します。

        - *無し* – マスター プランの際に予測要求は削減されません。
        - *率 - 下方修正キー* – 予測要求は下方修正キーで定義された割合および期間に応じて削減されます。
        - *トランザクション – 下方修正キー* – 予測要求は下方修正キーで定義された期間に発生するトランザクションによって下方修正されます。
        - *トランザクション – 動的期間* – 予測要求が動的期間中に発生する注文トランザクションから下方修正されます。 動的期間は、現在の予測日を含み、次の予測の開始時点で終了します。 *トランザクション – 動的期間* メソッドで、下方修正キーは使用または必要としません。この方法を使用する場合は、次の条件が適用されます。

            - 予測が完全に減少すると、現在の予測の予測要求は 0 (ゼロ) になります。
            - 将来の予測がない場合、入力された最後の予測からの予測要求は減少します。
            - タイム フェンスは予測下方修正の計算に含まれます。
            - プラス在庫日数は予測下方修正の計算に含まれます。
            - 実際の注文トランザクションが予測要求を超える場合、残りのトランザクションは次の予測の期間には繰り越されません。

        > [!NOTE]
        > **予測要求の下方修正に使用するメソッド** の設定は、マスター プランで予測を有効にした場合に需要予測にも適用され、同じように影響します。 詳細については、[需要予測を使ったマスター プラン](demand-forecast.md) を参照してください。

## <a name="set-reduction-options-for-coverage-groups"></a>補充グループの下方修正オプションの設定

補充グループがどのようにトランザクション ベースの減少を使用してマスター プランの予測要求を削減するかをコントロールするオプション設定は、次の手順に従って行います。

1. **マスター プラン \> 設定 \> プラン \> 補充グループ** の順に移動します。
1. リスト ウィンドウで既存の補充グループを選択するか、アクション ウィンドウで **新規** を選択して新しいグループを作成します。
1. **その他** FastTab の **予測の下方修正** フィールドで、**予測要求を下方修正する方法** フィールドが、*トランザクション - 下方修正キー* か *トランザクション - 動的期間* に設定されている場合、供給予測要求を補充グループの品目に対してどのように下方修正すべきかを指定します。 次の値からいずれか 1 つを選択します。

    - *すべてのトランザクション* - すべてのトランザクションで予測を下方修正する必要があります。
    - *注文* - 同じ種類の注文の場合のみ、予測を下方修正する必要があります。

    たとえば、品目の既定の注文設定では、生産が必要と示します。 数量が 50 の供給予測行と、数量が 20 の既存の発注書があります。 **予測の下方修正** フィールドが *注文* に設定されている場合、数量が 50 の計画製造オーダーが作成されます。 *すべてのトランザクション* に設定されている場合、計画製造オーダーの数量は 30 に下方修正されます。

    この設定は、需要予測の下方修正にも適用されます。 詳細については、[需要予測を使ったマスター プラン](demand-forecast.md) を参照してください。

## <a name="enter-a-supply-forecast-for-a-product"></a>製品の供給予測の入力

製品の供給予測を入力するには、次の手順に従います。

1. **製品管理情報 \> 製品 \> リリースされた製品** の順に移動します。
1. 予測を入力する製品を選択します。
1. アクション ウィンドウで、**計画** タブの **供給予測** を選択します。
1. アクション ウィンドウの **供給予測** ページで、**新規** を選択してグリッドに予測を追加します。
1. 必要に応じて新しい行に情報を入力し予測を指定します。

## <a name="plan-for-an-item-with-supply-forecast-lines"></a>供給予測行を含む品目の計画

供給予測がある品目を含むマスター プランを実行すると、入力されている供給行に対して発注書が作成されます。 品目の既定の注文設定が適用されます。 既定の注文設定で、*発注書* の **既定の注文タイプ** 値が指定され、供給予測行で仕入先勘定が指定されていない場合、その品目には既定の仕入先が使用されます。

## <a name="check-whether-a-planned-order-is-a-supply-forecast-order"></a>計画オーダーが供給予測注文かどうかを確認する

次の手順に従って、供給予測の結果として計画オーダーが作成されたかどうかを確認します。

1. **マスター プラン \> マスタープラン \> 計画オーダー** の順に移動します。
1. 検査したい計画オーダーを開きます。
1. **一般** FastTab で、**供給予測** フィールドの値を確認します。 供給予測に合う注文が作成された場合、このフィールドは *はい* に設定されます。

## <a name="examples-of-master-planning-with-supply-forecasts"></a>供給予測を伴うマスター プランの例

このセクションでは、供給予測がマスター プランに与える影響の例を紹介します。

### <a name="example-1-supply-forecast-for-an-item"></a>例 1: 品目の供給予測

既定の注文タイプが *発注書* で、既定の仕入先が *US-002* の品目があります。 供給予測行は次のとおりです。

| モデル    | 日付     | 仕入先アカウント | 仕入先グループ | Quantity | 単位 | サイト | 倉庫 |
|----------|----------|----------------|--------------|----------|------|------|-----------|
| CurrentF | 2022 年 10 月 10 日 |                |              | 35       | 個   | 1    | 11        |

マスター プランを実行すると、計画発注書は仕入先 *US-002* から *35 ずつ* と作成されます。

### <a name="example-2-several-supply-forecast-lines-with-and-without-a-vendor"></a>例 2: 仕入先ありの場合となし場合の供給予測行

既定の注文タイプが *発注書* で、既定の仕入先が *US-002* の品目があります。 供給予測行は次のとおりです。

| モデル    | 日付     | 仕入先アカウント | 仕入先グループ | Quantity | 単位 | サイト | 倉庫 |
|----------|----------|----------------|--------------|----------|------|------|-----------|
| CurrentF | 2022 年 10 月 10 日 |                |              | 35       | 個   | 1    | 11        |
| CurrentF | 2022 年 10 月 10 日 | US-101         |              | 25       | 個   | 1    | 11        |

この場合、仕入先を指定しない行は汎用予測として処理され、仕入先を指定する行を汎用予測から差し引く必要があります。 したがって、品目に対して次の計画発注書が作成されます。

- 仕入先 *US-101* から数量が *25 ずつ* の計画発注書 (予測行で指定された仕入先および数量が使用されます)。
- 仕入先 *US-002* から数量が *10 ずつ* の計画発注書 (他の予測行で仕入先が指定されていないので、既定の仕入先が使用され、この予測行の数量は仕入先固有の予測行の数量に下方修正されます)。

### <a name="example-3-plans-that-use-the-transactions---dynamic-period-reduction-method-in-a-single-forecast-period"></a>例 3: トランザクションを使用する計画 - 単一の予測期間内の動的期間の下方修正メソッド

*トランザクション - 動的期間* を予測の下方修正メソッドとして使用するマスター プランの場合、その供給特性に一致する既存のトランザクションがあると、マスター プランは予測数量を下方修正します。

たとえば、既定の注文タイプが *発注書* である品目があります。 供給予測行は次のとおりです。

| モデル    | 日付     | 仕入先アカウント | 仕入先グループ | Quantity | 単位 | サイト | 倉庫 |
|----------|----------|----------------|--------------|----------|------|------|-----------|
| CurrentF | 2022 年 10 月 10 日 | US-101         |              | 25       | 個   | 1    | 11        |

供給予測行が 1 行しかないので、予測期間は 1 つのみです。

*トランザクション – 動的期間* を下方修正メソッドとして使用するように設定されているマスター プランを実行すると、次のいずれかの結果が得られます。

- 仕入先 *US-101* と数量が *10 ずつ* に対して発注書が存在し、**供給予測** フィールドが *はい* に設定されている場合、マスター プランは、残りの数量が *10 ずつ* に対する新しい計画発注書を作成します。 仕入先と既存の発注書が一致すると予測行が下方修正されます。
- 仕入先 *US-102*、サイトが *1*、倉庫が *11*、数量が *10 ずつ* に対して発注書があり、**供給予測** フィールドが *はい* に設定されている場合、マスター プランは、全数量が  *25 ずつ* に対する新しい計画発注書を作成します。 仕入先が既存の発注書とは異なるため、予測行は下方修正できません。

> [!NOTE]
> 計画発注書に対するこのような状況は、仕入先が関連付けられているため発生します。 ただし、移動オーダーと製造オーダーの場合は、これらのタイプのオーダーに仕入先が指定されていないので、常に既存の注文が供給予測の金額を下方修正します。

### <a name="example-4-plans-that-use-the-transactions---dynamic-period-reduction-method-over-several-forecast-periods"></a>例 4: トランザクションを使用する計画 - 複数の予測期間の動的期間の下方修正メソッド

既定の注文タイプが *発注書* である品目があります。 供給予測行は次のとおりです。

| モデル    | 日付     | 仕入先アカウント | 仕入先グループ | Quantity | 単位 | サイト | 倉庫 |
|----------|----------|----------------|--------------|----------|------|------|-----------|
| CurrentF | 2022 年 10 月 10 日 | US-101         |              | 25       | 個   | 1    | 11        |
| CurrentF | 2022 年 10 月 15 日 | US-101         |              | 25       | 個   | 1    | 11        |

この例では、それぞれ日付が異なる 2 つの予測行があります。 したがって、この日付によって予測期間の境界ができます。 最初の期間は、2022 年 10 月 10 日から 10 月 14 日までです (10/10/22–10/14/22)。 2 つ目の期間は、2022 年 10 月 15 日 (10/15/22) からです。

仕入先 *US-101*、数量が *10ずつ*、日付が *10/12/22* (2022年10月12日) に対する既存の発注書があります。 *トランザクション – 動的期間* を下方修正メソッドとして使用するように設定されているマスター プランを実行すると、次の注文が作成されます。

- 数量が *15 ずつ* で日付が *2022 年 10 月 10 日* に対する計画オーダー (同じ予測期間中に日付が指定されている既存の発注書により数量が下方修正されます)。
- 数量が *25 ずつ* で日付が *2022 年 10 月 15 日* の計画オーダー (数量は予測の全数量)。

### <a name="example-5-plans-that-use-no-reduction"></a>例 5: 下方修正を使用ない計画

予測の下方修正メソッドが *なし* である計画を実行すると、マスター プランが常にすべての供給予測行に対する計画供給を作成します。 その計画供給が承認されると、今後の計画オーダーも下方修正されます。 ただし、発注書では供給予測行は下方修正されません。

たとえば、既定の注文タイプが *発注書* である品目があります。 供給予測行は次のとおりです。

| モデル    | 日付     | 仕入先アカウント | 仕入先グループ | Quantity | 単位 | サイト | 倉庫 |
|----------|----------|----------------|--------------|----------|------|------|-----------|
| CurrentF | 2022 年 10 月 10 日 | US-101         |              | 25       | 個   | 1    | 11        |

仕入先 *US-101*、サイト *1*、倉庫 *11*、数量が *25 ずつ*、日付が *2022 年 10 月 10 日* に対する既存の発注書があります。 

下方修正メソッドとして *なし* を使用するように設定されたマスター プランを実行すると、仕入先 *US-101*、サイト *1*、倉庫 *11*、数量 *25 ずつ*、日付 *2022 年 10 月 10 日* が作成されます。 つまり、予測の下方修正メソッドが *なし* なので、既存の発注書は下方修正されません。

最後の計画を実行した後に作成された計画発注書を編集し、数量を *15 ずつ* に変更しました。 注文を承認します。 次回マスター プランを実行すると、仕入先 *US-101*、サイト *1*、倉庫 *11*、数量 *10 ずつ* 、日付 *2022 年 10 月 10 日* が作成されます。 今回は、前の計画実行で得た既存の承認済注文の数量を反映して数量が下方修正されます。

## <a name="differences-between-planning-optimization-and-the-built-in-planning-engine"></a>計画最適化と組み込み計画エンジンの違い

供給予測は、使用している計画エンジンによって動作が若干異なります (組み込み計画または計画最適化)。 このセクションでは、その違いについて説明します。

### <a name="vendor-groups"></a>仕入先グループ

予測行を追加するときに、仕入先と仕入先グループを指定できます。 組み込み計画エンジンでは、作成した計画オーダーが仕入先と仕入先グループの値の組み合わせによってグループ化されます。 計画最適化では、計画オーダーが仕入先別にグループ化されます。

次のテーブルは、品目の供給予測行の例を示しています。

| モデル    | 日付     | 仕入先アカウント | 仕入先グループ | Quantity | 単位 | サイト | 倉庫 |
|----------|----------|----------------|--------------|----------|------|------|-----------|
| CurrentF | 2022 年 10 月 10 日 |                | VendorGroupA | 5        | 個   | 1    | 11        |
| CurrentF | 2022 年 10 月 10 日 |                | VendorGroupA | 6        | 個   | 1    | 11        |
| CurrentF | 2022 年 10 月 10 日 |                |              | 7        | 個   | 1    | 11        |

仕入先 *VendorA* は、仕入先グループ *VendorGroupA* の既定の仕入先です。 品目の既定の仕入先でもあります。

組み込み計画エンジンが、次の注文を作成すます。

- 仕入先 *VendorA*、仕入先グループ *VendorGroupA*、数量 *11* の計画発注書
- 仕入先 *VendorA*、数量 *7* の計画発注書

計画最適化では、作成される注文は 1 つのみです。

- 仕入先 *VendorA*、仕入先グループ *VendorGroupA*、数量 *18* の計画発注書

### <a name="reduction-of-general-forecasts-by-more-specific-forecasts"></a>さらに詳細な予測による一般予測の下方修正

組み込みのマスター プラン エンジンでは、一部の予測にだけ仕入先が含まれ、その他の予測には含まれない場合、結果は予期しない結果になります。

計画最適化では、次の例に示すように、具体的な予測によって一般予測は常に下方修正されます。

次のテーブルは、品目の供給予測行の例を示しています。

| 日付       | Quantity | 仕入先   | 仕入先グループ  |
|------------|----------|----------|---------------|
| 2022 年 2 月 11 日 | 5.00     | 仕入先-A | VendorGroup-A |
| 2022 年 2 月 11 日 | 6.00     | 仕入先-A | VendorGroup-A |
| 2022 年 2 月 11 日 | 15.00    |          |               |

一般予測 (15.00 個の場合) は、具体的な予測 (5.00 + 6.00 = 11.00 個) で下方修正されます。 残りは既定の仕入先に割り当てられます。 次のテーブルは、計画オーダーを示しています。

| 日付       | Quantity | 仕入先   | 仕入先グループ  |
|------------|----------|----------|---------------|
| 2022 年 2 月 11 日 | 11.00    | 仕入先-A | VendorGroup-A |
| 2022 年 2 月 11 日 | 4.00     | 仕入先-A | VendorGroup-A |

### <a name="respect-for-default-order-settings-when-planned-orders-are-generated"></a>計画オーダーが生成される際に既定の注文設定を尊重する

各品目には、最少の発注書数量など既定の注文設定を使用できます。 組み込み計画エンジンは、これらの設定を無視して、予測を同じ数量の計画オーダーに変換します。 計画最適化は、計画オーダーが供給予測から生成される際に、これらの設定を優先します。 

### <a name="aggregation-of-planned-orders-as-a-result-of-reduction-by-approved-orders"></a>承認済注文による下方修正の結果としての計画オーダーの集計

組み込みのマスター プラン エンジンは、1 つの注文のみが既存の供給予測を下方修正すると仮定します。 したがって、複数の注文が供給予測行と一致する場合は、最初の注文だけがその注文を下方修正します。 計画最適化では、供給予測行に一致する注文はすべて下方修正されます。

### <a name="reduction-of-forecasts-by-matching-vendors-only"></a>一致する仕入先のみによる予測の下方修正

組み込みマスター プラン エンジンが既存のリリース済発注書の予測を下方修正すると、発注書の仕入先と予測の仕入先の一致を確定できません。 計画最適化では、仕入先フィールドに一致する値を持つ発注書でのみ予測が下方修正されます。

移動オーダーおよび製造オーダーの場合、これらの注文タイプに関連しないので、仕入先フィールドは常に無視されます。

### <a name="reduction-of-forecasts-by-transfer-orders"></a>移動オーダーによる予測の下方修正

品目の既定の注文タイプが *移動* の場合、既存の計画移動オーダーのみが予測を下方修正できます。 ただし、製造オーダーと発注書の場合は、リリースされた注文のみ供給予測を下方修正します。

組み込み計画エンジンは、すべての移動オーダーの状態に対して下方修正しますが、計画最適化は、*リリース済み* の状態にある移動オーダーでのみ予測を下方修正します。
