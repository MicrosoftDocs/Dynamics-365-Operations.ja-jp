---
title: 優先順位に基づく計画
description: この記事では、Microsoft Dynamics 365 Supply Chain Management の優先順位に基づく計画フィーチャーについて説明します。
author: t-benebo
ms.date: 10/15/2021
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: benebotg
ms.search.validFrom: 2021-10-15
ms.dyn365.ops.version: 10.0.23
ms.openlocfilehash: e17e45f1d4e9f7c62317eac6f3ea1be84017b562
ms.sourcegitcommit: 203c8bc263f4ab238cc7534d4dd902fd996d2b0f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/23/2022
ms.locfileid: "9335288"
---
# <a name="priority-based-planning"></a>優先順位に基づく計画

[!include [banner](../../includes/banner.md)]

この記事では、Microsoft Dynamics 365 Supply Chain Management の優先順位に基づく計画フィーチャーについて説明します。 この機能により、需要手動型計画のサポートが追加されます。この計画は、[需要主導型材料所要量計画 (DDMRP)](ddmrp-overview.md) の 1 つのステップです。 優先順位に基づく計画を使用すると、計画の最適化によって、要求日ではなく計画の優先順位に基づいて計画オーダーを生成できます。

優先順位に基づく計画によって、補充注文に優先順位を付け、緊急需要が重要性の低い需要より優先されるようにします。 たとえば、欠品補充注文は標準の補充注文よりも優先されます。 システムでは、大きな注文を、注文明細行が優先順位別にグループ化される別の小さな注文に自動的に分割できます。 その後、優先順位が高いすべての注文を先に処理できます。

このフィーチャーの簡単な概要を確認するには、次のビデオを参照してください: [Dynamics 365 Supply Chain Management の優先順位に基づく計画の計画の最適化サポート](https://youtu.be/GmMHzFETTQc)。

## <a name="turn-on-priority-based-planning-in-your-system"></a>システムでの優先順位に基づく計画を有効にする

この機能は使用する前にシステムでオンにする必要があります。 管理者は、[機能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) 設定を使用して、機能の状態を確認し、有効にすることができます。 **機能管理** ワークスペースで、この機能は次のようにリストされています。

- **モジュール:** *マスター プラン*
- **フィーチャー名:** *計画最適化に対して優先順位によって推進される MRP のサポート*

## <a name="where-and-how-planning-priorities-are-assigned"></a>計画の優先順位の割り当て場所および方法

供給と需要に関する *計画の優先順位* 情報は、優先順位に基づく計画の基幹です。 計画の優先順位は、需要ラインまたは供給ラインの重要性を定義します。 計画の最適化では、**補充コード** フィールドが *優先順位* に設定されている場合にそれが使用されます。

通常、計画の優先順位は 0 (ゼロ) から 100 の間の数値で、最も重要度が高い計画の優先順位は 0 です。 これは、**計画の優先順位** フィールドに表示および設定されます。 このフィールドは、次のページに表示されます: **需要予測明細行**、**販売注文の詳細**、**発注書の詳細**、**移動オーダーの詳細**、および **計画オーダーの詳細**。

関連品目または補充グループの **補充コード** フィールドが *優先順位* に設定されている場合、計画の最適化では、需要主導型のアプローチを用いて計画の優先順位を計算し、リリースされた製品ごとに、**品目補充** ページの **最小**、**再注文ポイント**、**最大** の各フィールドに設定された値を考慮することで、需要と供給のバランスを取ります。

> [!NOTE]
> *優先順位* の値は、計画の最適化が有効な場合にのみ **補充コード** フィールドで使用できます。

関連する *計画の優先順位モデル* は、計画の優先順位と計画オーダーを優先順位の範囲で制御します。 また、各供給または需要タイプに対して既定の計画の優先順位の値を設定し、優先順位の計算方法を定義できます。

## <a name="types-of-priority-calculation-methods"></a>優先順位の計算方法のタイプ

各計画の優先順位モデルには、マスター プランを計画オーダーに適用する方法を制御する **優先順位計算方法** が設定されています。 利用可能な値は、*最大在庫数量の割合* および *優先順位の範囲* です。 *優先順位の範囲* は、*最大在庫数量の割合* 方法のより高度なバージョンを表します。

### <a name="percent-of-maximum-inventory-quantity"></a>最大在庫数量の割合

*最大在庫数量の割合* 計算方法では、供給優先順位の計算で、現在の *利用可能な合計在庫* (正味フロー) が品目に対して設定されている **最大在庫数量** 値に対する割合とみなされます。 次に、品目と仕入先ごとに 1 つの計画オーダーが作成されます (最大注文数量を使って強制的に分割する場合を除く)。 注文の計画の優先順位は、最大の割合として計算されます。

次の式が使用されます。

*最大の割合* = (*正味フロー位置* × 100) ÷ *品目補充の最大在庫数量値*

この式で、*正味フロー位置* は次のように計算されます。

*正味フロー位置* = *手持在庫* + *注文中* － *特定の需要*

- *注文中* は、予定供給です。
- *特定の需要* は、計画タイム フェンス内に要件日付がある正味要件を表します。

マスター プランの実行時に、正味フロー位置が品目の再発注ポイント数量を超える場合に、新しい計画オーダーが作成されます。 計画オーダー数量は、品目レベルで設定された **最大在庫数量** の値と正味フロー 位置の差です。 計画オーダーの優先順位は、**最大在庫数量** の値に対する *正味フロー位置* の割合として計算されます。

> [!NOTE]
> 需要が供給合計を超えても、計算される優先順位は負にできません。 需要が供給の合計を超えている場合、計算される優先順位は 0 (ゼロ) に設定されます。

### <a name="priority-ranges"></a>優先順位の範囲

*優先順位の範囲* の計算方法は、*最大在庫数量の割合* 方法よりも高度であり、計画優先順位モデルのレベルで構成されます。 品目ごとの需要を満たすために、複数の新しい計画供給オーダーを作成できます。 計画供給の優先順位は、**計画優先順位モデル** ページの **計画優先順位の範囲** グリッドで定義された値に従います。

**優先順位の計算方法** フィールドが *優先順位の範囲* に設定されている場合は、次の追加のルールが有効になります。

- 計画された優先順位モデルの **需要の優先順位の検討** オプションが *はい* に設定されている場合、各需要行で設定された優先順位によって、優先順位範囲バケットが制限されます。 供給の新しい計画オーダーの優先順位が、需要の優先順位よりも低くなることはなくなります。 範囲の上限値は、需要の優先順位の値と比較するしきい値と見なされます。 需要の優先順位が 2 つの範囲の上限しきい値の間の真ん中にある場合は、最も優先順位が高い範囲 (最も低い優先順位の値) が選択されます。
- 計画優先順位モデルの **計画オーダー作成** フィールドが *最も重要な優先順位による単一供給* に設定されている場合、最大までのすべての条件を満たすために供給は 1 つしか作成されません。 この優先順位は、供給をトリガーする最初の範囲の優先順位に設定されます。
- 手持在庫が存在し、供給も需要もない場合は、**計画優先順位の範囲** グリッドの **計画数量** フィールドが *ゼロ* に設定されている行が使用されます。
- 需要が存在するが、手持在庫または予想供給がない場合は、**計画優先順位の範囲** グリッドの **計画数量** フィールドが *ゼロ以下* に設定されている行が使用されます。
- 需要の一部である範囲が評価された場合でも、**需要の優先順位の検討** オプションの 設定に影響が出る場合があります。

## <a name="differences-between-traditional-timeline-calculations-and-priority-based-planning"></a>従来のタイムライン計算と優先順位に基づく計画の違い

優先順位に基づく計画は、次の点において従来のタイムラインの計算とは異なります。

- 通常の事前計画プロセッサはすべて引き続き有効です。 これらのプリプロセッサには、販売需要に対する承認済計画オーダーのペギング、購買要求のマッピング、および引当ロジックが含まれます。 これらのプリプロセッサによって満たされない要求のみが処理されます。
- ペギング時には、その優先順位に関係なく、すべての供給が考慮されます。 この供給には、手持在庫、リリースされた供給、および承認済み計画オーダーのペギングされていない部分が含まれます。
- 補充タイム中、供給に対して「マイナス日数」の需要をペギングできません。
- 供給を需要に対してペギングする場合、最も優先度の高い供給 (最も低い優先順位の値) が最初に使用されます。 手持供給の優先値が 0 (ゼロ) であると見なされます。 したがって、これは最初のソースとして消費されます。
- 最小注文サイズ、最大注文サイズ、数量の倍数など、通常のルールに従って新しい計画供給明細行が作成されます。

## <a name="planning-priority-models"></a>計画の優先順位モデル

*計画の優先順位モデル* を補充グループに割り当て、計画オーダーの計画優先順位を制御します。 計画オーダーごとに計画優先順位の値を計算する方法、および計画オーダー、供給明細行、および需要明細行に優先順位を割り当てる方法を決定するロジックを定義します。

計画の優先順位モデルを使用するには、**マスター プラン \> 設定 \> 計画の優先順位モデル** に移動します。 先述の通り、モデルの最も重要な設定の 1 つが **優先順位計算方法** の値です。 この設定は、マスター プランが計画オーダーに優先順位の値を割り当てるときに使用される計算方法を制御します。

> [!NOTE]
> 計画の優先順位モデルは、すべての法人に組織全体に適用されます。

### <a name="coverage-group"></a>補充グループ

優先順位に基づく計画で使用する新しい補充グループを設定します。詳細については、[品目の補充ルールの定義](../tasks/define-coverage-rules-items.md)を参照してください。 補充グループを作成したら、次の追加フィールドを設定します。

- **補充コード** - 補充グループで優先順位に基づく計画を使用する場合は、*優先順位* を選択します。
- **計画の優先順位モデル** - 組織全体の計画の優先順位モデルを選択します。

### <a name="item-coverage"></a>品目補充

[補充設定](../coverage-settings.md)の説明に従って、品目補充を設定します。 既定では、補充グループに対して選択された **補充コード** 値が品目補充設定にコピーされます。 必要に応じて既定値をオーバーライドすることもできます。 場合によっては、品目補充レコードの **補充コード** フィールドが *計画* に設定され、関連する補充グループに対して計画優先順位モデル が定義されていない場合があります。 この場合は、**優先順位の計算方法** フィールドが *最大在庫数量の割合* に設定され、**計画オーダーの作成** フィールドが *最も重要な優先順位による単一供給* に設定されたモデルが既定で適用されます。

品目補充設定の **再発注ポイント** フィールドを使用可能にする場合は、**補充コード** フィールドを *優先順位* に設定します。 このフィールドには、**補充コード** の値が *優先順位* の計画オーダーを配置する必要がある場合に、システムが使用する再発注ポイントの数量を入力します。

再発注ポイントの数量は、しばしばリード タイム中の需要に最小値 (安全在庫) を加えて計算されます。 **最小値** と **最大値** の間の値である必要があります。

たとえば、次のような方法でフィールドを設定できます。

- **最小:** *10*
- **再発注ポイント**: *45*
- **最大:** *60*

この例で、再発注ポイントの数量は、リード タイムが 7 日間、1 日の平均使用量が 5 に基づいて設定されます。 したがって、リード タイム中の需要は 35 です。 この場合、再発注ポイント 45 を取得するために最小値が 10 (安全在庫) として追加されます。 この設定を使用する場合は、計画される手持レベルが 45 を下回ると供給が提案されます。 注文の優先順位は、計画の優先順位の設定に基づいて設定されます。

### <a name="manage-planning-priority-models"></a>計画の優先順位モデルの管理

計画の優先順位モデルを使用するには 以下の手順を実行します。

1. **マスター プラン \> 設定 \> 計画の優先順位モデル** に移動します。
1. リスト ペインで既存のモデルを選択するか、アクション ペインで **新規** を選択して新しいモデルを作成します。
1. レコードのヘッダーで、次のフィールドを設定します:

    - **名前** – モデルの名前を入力します。 名前は、組織内のすべての法人で一意である必要があります。
    - **説明** – モデルの説明を入力します。
    - **優先順位計算方法** - 次のいずれかの値を選択します。

        - *優先順位の範囲* - この値を選択すると、**計画優先順位範囲** グリッドが使用可能になります。 計画の優先順位の値を定義するには、複数の優先順位の範囲を設定する必要があります。
        - *最大在庫数量の割合* - 最大在庫数量に対する計画在庫レベルに基づいて、計画の優先順位の値を割合で計算します。

    - **計画オーダーの作成** - このフィールドは、**優先順位の計算方法** フィールドが *優先順位の範囲* に設定されている場合に使用できます。 次の値からいずれか 1 つを選択します。

        - *最も重要な優先順位を持つ単一の供給* - 優先順位の範囲に基づいて計画オーダーを分割しません。 計画オーダーの計画の優先順位は、最も重要な優先順位の範囲 (最も低い計画の優先順位の値) に基づいて設定されます。
        - *優先順位の範囲に基づいて分割* - 計画の優先順位の範囲に基づいて、需要を複数の計画オーダーに分割します。 個々の計画オーダーの計画優先順位は、関連する計画の優先順位範囲の計画の優先順位で定義されます。

    - **需要の優先順位の検討** - 供給に対して作成される新しい計画オーダーの優先順位を制限するには、このオプションを *はい* に設定します。 この優先順位は、関連する需要の優先順位よりも低く設定されます。このオプションを *いいえ* に設定した場合、供給注文の優先順位を計算するときに需要注文の優先順位が考慮されません。

1. **優先順位計算方法** フィールドを *優先順位の範囲* に設定する場合は、**計画優先順位範囲** クイック タブのツール バーの **追加** と **削除** ボタンを使用して、必要に応じて優先順位範囲行を追加または削除します。 複数の行が存在し、新しい行を挿入すると、選択した行および行の上の行の平均に計画の優先順位が自動的に設定されます。 各行で、次のフィールドを設定します:

    - **計画の優先順位** - 0.00~100.00 の値を入力します。 この値は、行に使用される計画の優先順位を表します。 優先度の値が最も低い場合、優先度が最も高いということです。 既定値は割り当て済みですが、必要に応じて変更できます。 同じ **計画の優先順位** の値は、同じ計画の優先順位モデルの複数の計画の優先順位の範囲に対しては使用できません。
    - **説明** - 計画の優先順位の範囲の説明 (*最大再発注ポイント* など) を入力します。
    - **開始数量** - 計画優先順位の範囲の下限です。 この値は読み取り専用で、前の計画の優先順位範囲の **上限数量** および **上限数量の割合** の数量値に基づいて設定されます。
    - **上限数量** - 範囲の上限を定義するために使用する品目補充のフィールドを選択します。 次の値がサポートされ、次の範囲の **変更可能数量** の値に影響します。

        - *ゼロ* - この値は、負の値からゼロの範囲 (*ゼロ以下の値* から *ゼロ*) を表します。 この値が選択されている行の場合、**上限数量の割合** フィールドは読み取り専用で、常に *100%* に設定されます。
        - *最小在庫数量* - この値は、**品目補充** ページの品目の **最小** 値を表します。 この値が選択されている行の場合、**上限数量の割合** フィールドは編集可能であり、次の範囲の **開始数量** 値 (*最小在庫数量の 80%* など) を設定するために使用されます。
        - *再発注ポイント* - この値は、**品目補充** ページの品目の **再発注ポイント** 値を表します。 この値が選択されている行の場合、**上限数量の割合** フィールドは編集可能であり、次の範囲の **開始数量** 値 (*再発注ポイントの 80%* など) を設定するために使用されます。
        - *最大在庫数量* - この値は、**品目補充** ページの品目の **最大** 値を表します。 この値が選択されている行の場合、**上限数量の割合** フィールドは編集可能であり、次の範囲の **開始数量** (*最小在庫数量の 80%* など) を設定するために使用されます。
        - *無限* - この値は、範囲の無限上位レベル (*無限以下* から *無限*) を表します。 この値が選択されている行の場合、**上限数量の割合** フィールドは読み取り専用で、常に *100%* に設定されます。

    - **上限数量の割合** - **上限数量** フィールドで選択した値に基づいて、計画の優先順位の範囲の上限を計算するために使用する割合の値 を入力 します。 たとえば、**上限数量** フィールドが *最小在庫数量* に設定され、**上限数量の割合** フィールドが *50* に設定されている場合、上限は関連する品目補充の最小在庫数量に対する 50% になります。

1. 計画の **優先順位の既定値** クイックタブで、供給または需要の各タイプ (販売注文、発注書、移動オーダー、または需要予測) ごとに既定の計画の優先順位を定義するために必要なフィールドを設定します。 正の値のみを入力できます。

## <a name="view-and-maintain-planning-priority"></a>計画の優先順位の表示とメンテナンス

計画の優先順位が **計画の優先順位** フィールドに表示および設定されます。 このフィールドは、次のテーブルに示すページ上に表示されます。 計画の優先順位は 0 (ゼロ) から 100 の間の数値で、最も重要度が高い計画の優先順位は 0 に設定されます。

| ページ | フィールドの場所 | 値ソース |
|---|---|---|
| 需要予測の明細行 | <p>**品目** タブ</p><p>(上部セクションの行を選択し、次に **品目** タブを選択します。)</p> | 手動で設定する既定値または既定値 |
| 販売注文の詳細 | <p>**明細行の詳細** クイックタブの **デリバリー**</p><p>(**販売注文明細行** クイック タブで行を選択して、**注文明細行** クイックタブで **デリバリー** タブを設定します。)</p> | 既定値、会社間からの値、または手動で設定する値 |
| 発注書の詳細 | <p>**明細行の詳細** クイックタブの **デリバリー**</p><p>(**購買注文明細行** クイック タブで行を選択して、**注文明細行** クイックタブで **デリバリー** タブを設定します。)</p> | 計画オーダーからの、会社間からの値、または手動で設定された値からの固定中に設定される値 |
| 移動オーダー明細 | <p>**明細行の詳細** クイックタブの **デリバリー**</p><p>(**移動オーダーの明細行** クイック タブで行を選択して、**注文明細行** クイックタブで **デリバリー** タブを設定します。)</p> | 計画オーダーからの、または手動で設定された値からの固定中に設定される値 |
| 計画オーダーの詳細 | **全般** クイック タブ | マスター プラン中に計算される値または手動で設定される値 |

### <a name="intercompany-trade"></a>会社間取引

会社間供給明細行と会社間需要明細行の **計画の優先順位** 値は、リンクされたエンティティ間で共有されます。 どちらの側の変更もリンクされた注文行に反映されます。

次にいくつか例を挙げます。

- ユーザーは、会社間販売注文書の行の計画優先順位を 20 から 30 に変更します。 この変更は、リンクされている会社間発注書の行に反映されます。
- ユーザーは、会社間購買注文書の行の計画優先順位を 40 から 50 に変更します。 この変更は、リンクされている会社間販売注文行に反映されます。
