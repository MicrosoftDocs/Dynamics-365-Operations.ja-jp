---
title: バッファー プロファイルおよびレベル
description: この記事では、各デカップリング ポイントで保持する最小および最大在庫レベルを決定する、バッファー プロファイルとレベルに関する情報について説明します。
author: t-benebo
ms.date: 06/30/2022
ms.topic: article
ms.search.form: EcoResProductDetailsExtended, ReqItemDecoupledLeadTime
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: benebotg
ms.search.validFrom: 2022-06-30
ms.dyn365.ops.version: 10.0.28
ms.openlocfilehash: 57ee6206da926d0dbf62f562197538bfcdd41148
ms.sourcegitcommit: 3d7ae22401b376d2899840b561575e8d5c55658c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/08/2022
ms.locfileid: "9428147"
---
# <a name="buffer-profile-and-levels"></a>バッファー プロファイルおよびレベル

[!include [banner](../../includes/banner.md)]
[!INCLUDE [preview-banner](../../includes/preview-banner.md)]

デカップリング ポイント (戦略的に在庫として保持する主要品目) を特定した後、それぞれどの程度在庫 (バッファー) を保持するか決定する必要があります。 このタスクは、需要主導型材料リソース計画 (DDMRP) の 2 番目のステップです。

## <a name="buffer-levels-and-zones"></a>バッファー プロファイルおよびゾーン

DDMRP では、各在庫バッファーは、最小数量、最大数量、および再発注ポイントの 3 つの値を使用して定義されます。 これらの値は、次の色コードで識別される 3 つの異なるゾーンを設定します:

- **赤のゾーン** – 最小数量を下回る領域。 在庫最小数量は "赤の上部" とも呼ばれ、在庫レベルが常にこのポイントを上回るように計画戦略を設計する必要があります。
- **黄色のゾーン** – 最小数量と再発注ポイントの間の領域。 再発注ポイントは "黄色の上部" とも呼ばれます。 このポイントに達すると、システムは再発注を行う必要があります。
- **緑のゾーン** – 再発注ポイントと最大数量の間の領域。 最大数量は "緑の上部" とも呼ばれます。 このポイントは、補充されるの在庫の最大レベルです。

次の図は、3 つの色分けされたゾーンと、これらのゾーンが最小数量、最大数量、および再発注ポイントとどのように関連しているのかを示しています。

![DDMRP バッファー ゾーンとレベル](media/ddmrp-buffer-levels.png "DDMRP バッファー ゾーンとレベル")

## <a name="calculating-the-buffer-zones"></a>バッファー ゾーンの計算

このセクションでは、各バッファ ゾーンの高さの計算方法を説明します。

通常、黄色のゾーンが最初に計算されます。 このゾーンは、注文した時点から注文が到着するまでに消費する数量を表します。 つまり、補充リード タイム中に予想される消費です。 これは次の方程式を使用して計算されます:

- **黄色のゾーン** = *1 日の平均使用量 (ADU)* × *デカップリング済リード タイム*

*デカップリング済リード タイム* は、デカップリング ポイントの在庫が常にある場合に、品目の生産または受け取りに必要な時間を表します。 通常は、マスター プランで従来使用されている *累積的なリード タイム* よりもはるかに短くなります。 デカップリング ポイントの在庫が常にあり、かつ過剰在庫を生じさせないため、バッファーを正しく設定することは重要です。

赤いゾーンは、次の方程式を使用して計算されます:

- **赤の基準** = *ADU* × *デカップリング済リード タイム* × *リード タイム係数*
- **赤の安全性** = *赤の基準* × *変動係数*
- **赤いゾーン** = *赤の基準* + *赤の安全性*

緑のゾーンは、次の 3 つの方程式の最大値として計算されます:

- *最小注文数量*
- *ADU* × *注文サイクル*
- *ADU* × *デカップリング済リード タイム* × *リード タイム係数*

## <a name="calculating-average-daily-usage"></a>1 日の平均使用量を計算する

システムは、3 つのアプローチのいずれかを使用して、1 日に消費する数量を計算します:

- **1 日の平均使用量 (過去)** – このアプローチは、実際の過去の消費に基づいています。
- **1 日の平均使用量 (将来)** – このアプローチは、未来の消費予測に基づいています。
- **1 日の平均使用量 (ブレンド)** : このアプローチは、過去と予測消費の加重の組み合わせに基づいています。

### <a name="average-daily-usage-past"></a>1 日の平均使用量 (過去)

過去の ADU は、過去の特定日数分の毎日の使用数量を足して、合計を日数で割った平均として計算します。 次の図は、過去 3 日間を含めて計算した場合にこのアプローチがどのように機能するかを示しています。

![1 日の平均使用量 (過去) のチャート。](media/ddmrp-adu-past.png "1 日の平均使用量 (過去) のチャート")

前の図では、今日が 6 月 11 日の朝の場合、前の 3 日間 (6 月 8 日、9 日、10 日) の ADU は 21 です。

- **ADU (過去)** = (29 + 11 + 23) ÷ 3 = 21

1 日の平均使用量 (過去) の計算では、次のトランザクションが考慮されます:

- 品目の数量を減少させるトランザクション (数量がゼロ未満の `inventtrans` テーブル内)
- ステータスが *受注中*、*引当済注文*、*引当済現物*、*受取済*、*払出済*、または *売却済み* のトランザクション
- 選択された過去の期間内の日付のトランザクション (過去の期間の 1 日の平均使用量)
- 倉庫作業、検査、販売見積、または明細書 (`WHSWork`、`WHSQuarantine`、`SalesQuotation`、または `Statement`) 以外のトランザクション
- 同じ補充分析コード内の振替仕訳帳以外のトランザクション

### <a name="average-daily-usage-forward"></a>1 日の平均使用量 (将来)

新しい製品の場合、過去の使用状況データがないことがあります。 このため、代わりに今後の推定 ADU (たとえば、需要予測に基づいて) を使用できます。 次の図は、将来 3 日間 (今日を含む) で計算した場合にこのアプローチがどのように機能するかを示しています。

![1 日の平均使用量 (将来) のチャート。](media/ddmrp-adu-forward.png "1 日の平均使用量 (将来) のチャート")

前の図では、今日が 6 月 11 日の朝の場合、次の 3 日間 (6 月 11 日、12 日、13 日) の ADU は 21.66 です。

- **ADU (将来)** = (18 + 18 + 29) ÷ 3 = 21.66

1 日の平均使用量 (将来) の計算では、次のトランザクションが考慮されます:

- マスター プランで予測が選択されている品目の予測トランザクション
- 選択された将来の期間内の日付のトランザクション (将来の期間の 1 日の平均使用量)

### <a name="average-daily-usage-blended"></a>1 日の平均使用量 (ブレンド)

次の図に示すように、ブレンドされた ADU では、過去の平均使用量と将来の平均使用量が組み合わされます。

![1 日の平均使用量 (ブレンド) のチャート。](media/ddmrp-adu-blended.png "1 日の平均使用量 (ブレンド) のチャート")

前の図では、今日が 6 月 11 日の朝の場合、過去と次の 3 日間 (6 月 8 日から 13 日) のブレンドされた ADU は 21.33 です。

- **ブレンド ADU** = (*過去の ADU* + *将来の ADU*) ÷ 2<br>= (21 + 21.66) ÷ 2<br>= 21.33

## <a name="buffer-calculation-factors"></a>バッファー計算係数

品目ごとに、赤と緑のゾーンの大きさを調整する係数を 2 つ定義できます。 これにより、予想されるリード タイムと需要の変動を補うことができます。

![リード タイムと変動係数。](media/ddmrp-zone-factors.png "リード タイムと変動係数")

最初の係数は *リード タイム係数* です。 この値は、0 ～ 1 の 小数点以下を含む値です。 リード タイムが長いほど、値は小さい必要があります。 Demand Driven Institute は、次の範囲を推奨しています:

- **長いリード タイム:** 0.20–0.40
- **中程度のリード タイム:** 0.41–0.60
- **短いリード タイム:** 0.61–1.00

2 番目の係数は *変動係数* です。 この値は、0 ～ 1 の 小数点以下を含む値です。 需要変動が高いほど、値は小さい必要があります。 Demand Driven Institute は、次の範囲を推奨しています:

- **低い変動:** 0.20–0.40
- **中程度の変動:** 0.41–0.60
- **高い変動:** 0.61–1.00

## <a name="buffer-calculation-examples"></a>バッファー計算の例

この例は、[在庫配置](ddmrp-inventory-positioning.md)で示されている枕の生産例の続きです。 その例では、次の図に示すように、リード タイムを 21 日から 5 日に減らしたデカップリング ポイントを選択しました。

![デカップリング済リード タイムの例。](media/ddmrp-bom-decoupled-lead-time-example.png "デカップリング済リード タイムの例")

この例では ADU は 23 個と仮定して計算され、前の図に示すように、デカップリング済みリード タイムは 5 日です。 これらの値を使用すると、次の方程式を使用して黄色のゾーンを計算できます:

- **黄色のゾーン** = *ADU* × *デカップリング済リード タイム* = 115

![黄色のゾーンの計算例。](media/ddmrp-example-calc-yellow.png "黄色のゾーンの計算例")

赤いゾーンの計算は黄色のゾーン計算と似ていますが、変動性とリード タイムのために水増しされています。 この例では、中程度のリード タイム (係数 = 0.50) と高い需要変動 (係数 = 0.8) を確認したとします。 これらの値を黄色のゾーンの方程式のコンポーネントと併せて使用すると、次の方程式を使用して赤いゾーンを計算できます:

- **赤の基準** = *ADU* × *デカップリング済リード タイム* × *リード タイム係数* = 57.5
- **赤の安全性** = *赤の基準* × *変動係数* = 46
- **赤いゾーン** = *赤の基準* + *赤の安全性* = 103.5

個数は整数でカウントされるため、システムは赤いゾーンを 104 個に丸めます。

![赤いゾーンの計算例。](media/ddmrp-example-calc-red.png "赤いゾーンの計算例")

緑のゾーンの計算には黄色のゾーンの方程式コンポーネントも含まれますが、最小注文サイズ、注文サイクル、およびリード タイム係数を使用できます。 この例では、注文サイクルがない (したがって、注文頻度の時間制約がない) と仮定して、最小注文数量が 10 個とします。 緑のゾーンは次の 3 つの方程式の最大値として計算されます:

- *最小注文数量* = 10
- *ADU* × *注文サイクル* = 0
- *ADU* × *デカップリング済リード タイム* × *リード タイム係数* = 57.5

個数は整数でカウントされるため、システムは緑のゾーンを 58 個に丸めます。

![緑のゾーンの計算例。](media/ddmrp-example-calc-green.png "緑のゾーンの計算例")

次の図は、DDMRPでよく使用されるじょうごグラフを使用して、これらのゾーンの計算結果の概要を示しています。

![ゾーンの計算結果の概要。](media/ddmrp-example-calc-summary.png "ゾーンの計算結果の概要")

## <a name="dynamic-adjustments"></a><a name="dynamic-adjustments"></a>動的な調整

動的な調整により、高需要または低需要の期間中に *需要調整係数* を適用できます。 この係数は、選択された期間のすべての計算で ADU を乗算します。 これにより、バッファー ゾーンが変更されます。 通常、この係数は、初期バッファー値を生成した後に適用します。これにより、時間経過や条件の変化に応じて微調整できます。 このタスクは DDMRP の 3 番目のステップです。

たとえば、休暇で出かける人が増加する 8 月には、枕製品の需要が増加するかもしれません。 したがって、売上は増加すると予想されます。 この場合、8 月のすべての週で、製品の **需要調整係数** 値を *1.5* に変更できます。

これにより、時間経過に伴うバッファー値を計算し、システムの情報以上のものに基づいて調整できます。 完全な DDMRP 実装では、バッチ ジョブによって毎日新しいバッファー値を計算し、値を自動的に受け入れます。 その後、計画をバッチ ジョブとして実行し、計画オーダーを毎日確認してバッファーを補充します。

## <a name="implement-buffers-in-supply-chain-management"></a>Supply Chain Management でバッファーを実装する

このセクションでは、Microsoft Dynamics 365 Supply Chain Management でバッファー ゾーン戦略を実装する方法について説明します。 ここでは、この記事の前半で説明された分析と計算を既に完了していると想定しています。

### <a name="set-up-buffers-for-a-decoupling-point-item"></a><a name="set-up-buffers"></a>デカップリング ポイント品目のバッファーを設定する

以下の手順に従って、デカップリング ポイントのバッファー値を設定します。

1. **製品管理情報 \> 製品 \> リリースされた製品** の順に移動します。
1. デカップリング ポイントとして設定されたリリース済品目を選択します。 (詳細については、[在庫配置](ddmrp-inventory-positioning.md)を参照してください。)
1. アクション ウィンドウで、**計画** タブの **品目補充** を選択します。
1. **品目補充** ページで、デカップリング ポイントを作成する品目補充レコードを選択します。 (このレコードには、デカップリング ポイントを作成するために設定されている補充グループの名前が表示されます。)
1. **一般** タブを選択します。
1. 販売履歴、予測、補充グループの設定に基づいてシステムにバッファー値を毎日または毎週再計算させるには、次の手順に従います:

    1. **時間経過に伴うバッファー値** オプションを *はい* に設定します。
    1. メッセージ ボックスに、続行した場合は手動のバッファー設定 (**最小**、**再発注ポイント**、**最大**) がリセットされると通知されます。 新しい設定を維持するには、**はい** を選択します。

    または、バッファー設定を 1 回だけ計算または入力する場合は、次の手順に従います:

    1. **時間経過に伴うバッファー値** オプションを *いいえ* に設定します。
    1. **最小**、**再発注ポイント**、および **最大** フィールドを、この記事で先に説明した、品目に対して計算したバッファー値に設定します。

1. 品目の DDMRP 計算の設定を完了するには、次のフィールドを設定します:

    - **注文サイクル** – 品目の発注書間で経過すべき日数を指定します。 注文制限が存在しない場合は、値を *0* (ゼロ) に設定します。 このフィールドは、この記事で先述した通り、最大数量バッファーに影響します。
    - **1 日の平均使用量** – 必要に応じて品目の推定 ADU を入力できます。 このフィールドは情報提供のみを目的としています。 通常、この値はバッファー計算の一部として自動的に計算されます。
    - **注文スパイクのしきい値** – 注文スパイクと見なされる、品目の日々の売上の最小数を指定します (異常に高い需要)。 システムは、高需要の期間に計画オーダーの再発注数量を増やすため、このフィールドを使用します。 詳細については[需要主導型計画](ddmrp-planning.md)を参照してください。

### <a name="calculate-or-enter-decoupled-lead-times"></a><a name="calc-lead-time"></a>デカップリング済リード タイムを計算または入力する

システムに[バッファー ゾーンを自動的に計算する](#set-up-buffers)ことを許可した品目については、次の手順に従って、デカップリング ポイント品目のデカップリング済リード タイムを計算または入力します。

1. デカップリング ポイント品目の **品目補充** ページを開きます。 (詳細については、[デカップリング ポイント品目のバッファーを設定する](#set-up-buffers)を参照してください。)
1. デカップリング ポイントを作成する品目補充レコードを選択します。
1. **バッファー値** タブを選択します。
1. 期間が表示されない場合、アクション ウィンドウの **バッファー値** タブで **期間の追加** を選択します。 システムは、[補充グループ](ddmrp-inventory-positioning.md)の **最小、最大、再注文ポイント期間** フィールドが *毎日* または *毎週* に設定されているかによって、日または週の各期間の行があるグリッドに入力します。 システムは、品目に割り当てられている補充グループに対して指定されたタイム フェンスに到達するのに十分な行を追加します。
1. デカップリング済リード タイムを計算する期間を選択します。 (通常、この期間は今日の日付を含む期間です。)
1. アクション ウィンドウの **バッファー値** タブで、**デカップリング済リード タイムの計算** を選択します。
1. **デカップリング済リード タイムの計算** ダイアログ ボックスで、次のフィールドを設定します:

    - **BOM** – 計算を実行する部品表 (BOM) を選択します。
    - **日付** – 計算を実行する日付を選択します。 選択した日付に対して有効な BOM だけが表示されるよう、使用可能な BOM のセットがフィルター処理されます。
    - **数量** – 計算を実行する数量を入力します。 指定された数量が適用される BOM だけが表示されるよう、使用可能な BOM のセットがフィルター処理されます。

1. **OK** を選択して計算を実行し、**デカップリング済リード タイムの計算** のダイアログ ボックスを閉じます。 選択した期間の **デカップリング済リード タイム** 列に計算された値が表示されます。

### <a name="calculate-or-enter-average-daily-usage"></a><a name="calc-adu"></a>1 日の平均使用量を計算または入力する

システムに[バッファー ゾーンを自動的に計算する](#set-up-buffers)ことを許可した品目については、次の手順に従って、デカップリング ポイント品目の ADU を計算または入力します。

1. デカップリング ポイント品目の **品目補充** ページを開きます。 (詳細については、[デカップリング ポイント品目のバッファーを設定する](#set-up-buffers)を参照してください。)
1. デカップリング ポイントを作成する品目補充レコードを選択します。
1. **バッファー値** タブを選択します。
1. 期間が表示されない場合、アクション ウィンドウの **バッファー値** タブで **期間の追加** を選択します。 システムは、[補充グループ](ddmrp-inventory-positioning.md)の **最小、最大、再注文ポイント期間** フィールドが *毎日* または *毎週* に設定されているかによって、日または週の各期間の行があるグリッドに入力します。 さらに、補充グループから **リード タイム係数** と **変動係数** フィールドの既定値が取得されます。 これらの値は、必要に応じて各行で編集できます。
1. ADU を計算する期間を選択します。
1. アクション ウィンドウの **バッファー値** タブで、**1 日の平均使用量の計算** を選択します。 システムは、[補充グループ](ddmrp-inventory-positioning.md)に定義されている、ADU の計算に必要なデータの収集を試みます。
1. 次の手順のいずれかを実行します。

    - 必要なデータが使用可能な場合、計算結果が **1 日の平均使用量** 列に追加されます。 この場合、何もする必要はありません。
    - 必要なデータが使用できない場合、値は自動的に追加されません。 この場合、バッファー値の計算を行う各行の見積値を手動で入力します。

### <a name="calculate-and-apply-buffer-values"></a>バッファー値を計算して適用する

システムに[バッファー ゾーンを自動的に計算する](#set-up-buffers)ことを許可した品目については、次の手順に従って、バッファー値の計算を手動でトリガーできます。

1. この記事で前述したとおり，関連するデカップリング ポイント品目の関連するすべての期間の[バッファー計算を構成](#set-up-buffers)し、[デカップリング済リード タイムを計算または入力](#calc-lead-time)します。次に [1 日の平均使用量を計算または入力](#calc-adu)します。
1. デカップリング ポイント品目の **品目補充** ページを開きます。
1. **バッファー値** タブを選択します。このタブには期間の一覧が既に表示されているはずです。
1. バッファー値を計算する期間を選択します。 (通常、この期間は今日を含む期間です。) 選択する行の **1 日の平均使用量** と **デカップリング済リード タイム** 列には、既にゼロ以外の値が入っている必要があります。
1. 必要に応じて **需要調整係数** フィールドの行を 1 つ以上編集します。 システムは、この値を **1 日の平均使用量** 値が使用されるすべてのバッファー計算に適用します。 この係数により、需要の日付による変動 (休日や季節品目など) に合わせて調整することができます。
1. アクション ウィンドウの **バッファー値** タブで、**最小、最大、および再発注ポイントの数量を計算する** を選択します。 システムは、**品目補充** ページのグリッドの **計算された最小数**、**計算された再発注ポイント**、および **計算された最大数** 列を計算して入力します。
1. 計算値の確認が完了したら、適用する必要があります。 そうしない場合、値は無効になります。 計算を 1 つ以上の行に対して適用すると、**計算された最小数**、**計算された再発注**、および **計算された最大数** フィールドの値が **最小**、**再発注ポイント**、および **最大** 列にそれぞれコピーされます。 アクション ペインの **バッファー値** タブの **アクションの実行** グループで、次のいずれかのボタンを選択します:

    - **すべての計算を承認する** – グリッド内のすべての計算値を適用します。
    - **選択された行の計算を承認する** – 選択した行にのみ計算値を適用します。
    - **すべての計算を破棄する** – グリッドの最小数量、最大数量、および再発注ポイントの計算値をすべて破棄します。
    - **選択された行の計算を破棄する** – グリッドで選択された行の最小数量、最大数量、および再発注ポイントの計算値をすべて破棄します。

### <a name="schedule-automatic-buffer-value-calculations"></a>バッファー値の自動計算をスケジュールする

DDMRP を完全に設定して正常な動作を確認した後は、必要に応じ、実際の消費データや更新された予測に基づき ADU と関連するバッファー値を定期的に再計算するバッチ ジョブを設定した方がよい場合があります。 この手順は、システムに[自動的にバッファー ゾーンを計算する](#set-up-buffers)ことを許可した品目にのみ適用されます。

バッファー値の自動計算をスケジュールするには、次の手順に従います。

1. **マスター プラン \> マスター プラン \> DDMRP \> バッファー値を計算する** に移動します。
1. **バッファー値を計算する** のダイアログ ボックスで、次のフィールドを設定します:

    - **1 日の平均使用量を計算する** – このオプションを *はい* に設定して、ジョブが実行する度にデカップリング ポイント品目の ADU を再計算するようにします。 この計算をスキップするには、*いいえ* に設定します。 通常、このオプションは *はい* に設定する必要があります。
    - **デカップリング済リード タイムの計算** – ジョブを実行する度にデカップリング済リード タイムを再計算するには、このオプションを *はい* に設定します。 この計算をスキップするには、*いいえ* に設定します。 通常、このオプションは *はい* に設定する必要があります。
    - **バッファー値の計算** – ジョブを実行するごとにバッファー値を再計算するには、このオプションを *はい* に設定します。 この計算をスキップするには、*いいえ* に設定します。 通常、このオプションは *はい* に設定する必要があります。
    - **最小、最大、および再発注ポイントの計算を承認する** – ジョブを実行する度に再計算されたバッファー値を自動的に承認および適用するには、このオプションを *はい* に設定します。 再計算された値を未適用のままにするには、*いいえ* に設定します。 この場合、後で誰かが各製品の **品目補充** ページから手動で適用しない限り、再計算された値は有効になりません。 通常、このオプションは *はい* に設定する必要があります。
    - **マスター プラン** – この計算で影響を受ける品目を含むマスター プランを選択します。 この計算は、計画フィルターのすべての品目に適用されます。品目はダイアログ ボックスの **フィルター** 設定によってさらに限定されます。

1. バッチ ジョブが実行されるべき一連のレコードを制限するには、**対象に含めるレコード** クイック タブで、**フィルター** を選択して **照会** ダイアログ ボックスを開きます。 このダイアログ ボックスは、Supply Chain Management の他の種類の[バックグラウンド ジョブ](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md)で実行されるのと同様に機能します。
1. **バックグラウンドで実行** クイックタブで、選択された品目に対する選択された計算方法、タイミング、および頻度を指定します。 このフィールドは、Supply Chain Management の他の種類の[バックグラウンド ジョブ](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md)で実行されるのと同様に機能します。
1. メイン ダイアログで **OK** を選択し、新しいジョブをバッチ キューに追加して実行します。

### <a name="review-and-recalculate-decoupled-lead-times-for-all-items"></a>すべての品目のデカップリング済リード タイムを確認して再計算する

次の手順に従って、法人 (会社) で使用できるすべてのデカップリング済リード タイムを確認および再計算します。

1. **マスター プラン \> マスター プラン \> DDMRP \> デカップリング済リード タイム** に移動します。
1. **デカップリング済リード タイム** ページで、必要に応じて一覧を参照してフィルター処理し、目的の情報を見つけます。 ある品目に関する詳細情報を表示するには、**品目番号** 列でそのリンクを選択します。
1. 任意の品目のデカップリング済リード タイムを再計算する場合は、その品目を選択し、アクション ウィンドウで **デカップリング済リード タイムの計算** を選択します。 **デカップリング済リード タイムの計算** ダイアログ ボックスが表示されます。 このダイアログ ボックスは、**品目補充** ページで同じ品目の[デカップリング済リード タイムを計算](#calc-lead-time)する場合と同様に機能します。
