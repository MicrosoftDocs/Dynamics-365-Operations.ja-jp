---
title: 安全在庫仕訳帳を使用して品目の最小補充を更新する
description: このトピックでは、過去のトランザクションに基づいて最小補充提案を計算して、安全在庫仕訳帳を使用して品目の安全在庫数量を更新する方法について説明します。
author: ChristianRytt
ms.date: 10/28/2021
ms.topic: article
ms.search.form: ReqItemJournalName, ReqItemJournalSafetyStock, EcoResProductInformationDialog, ReqItemTableSetup, ReqItemTable, EcoResProductDetailsExtended
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: crytt
ms.search.validFrom: 2021-10-28
ms.dyn365.ops.version: 10.0.22
ms.openlocfilehash: 59e4959898cd961582e1ac1d2285c0c0867ee7af
ms.sourcegitcommit: bc9e75c38e192664cde226ed3a94df5a0b304369
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/10/2021
ms.locfileid: "7790981"
---
# <a name="use-the-safety-stock-journal-to-update-minimum-coverage-for-items"></a>安全在庫仕訳帳を使用して品目の最小補充を更新する

[!include [banner](../../includes/banner.md)]

安全在庫は、在庫に保持されている品目の追加の数量を示して、品目が在庫切れになるリスクを軽減する支援をします。 安全在庫は、販売注文が来てるが、仕入先が顧客の指定出荷日に間に合わない場合に、バッファ在庫として使用されます。

このトピックでは、履歴トランザクションに基づいて最小補充提案を計算し、その提案を使用して品目補充を更新する方法について説明します。

## <a name="overview-of-minimum-coverage-usage"></a>最小補充使用量の概要

安全在庫は、品目ごとに **品目補充** ページで設定します。 異なるタイプの補充が異なる補充コードで表されます。 (詳細については、[品目の安全在庫フルフィルメント](safety-stock-replenishment.md) を参照してください。) ただし、すべての補充コードは、各品目の **品目補充** ページの **最小** フィールドで 設定された値を使用します。 **最小** フィールドを使うには、2 つの主な方法があります。

- **最小/最大の目的の最小数量** - この方法では、最小数量と最小/最大ロジックを一緒に使用します。 これは、関連する品目または補充グループについて **補充コード** フィールドが *最小/最大* に設定されている場合に適用されます。 **最小** 数量 は、毎日の平均使用量に品目のリード タイムを乗算した値です。
- **在庫計画の目的での最小数量** - この方法は、最小数量を使用して、需要予測と組み合わせて在庫計画を表します。 これは、関連する品目または補充グループについて **補充コード** フィールドが *期間* または *要求* に設定されている場合に適用されます。 **最小** 数量は、在庫切れ、部分出荷、および配送リード タイムの削減に役立つ、望ましい顧客サービス レベルを反映した在庫計画を表します。 最小数量は、特定の品目の予測の精度の割合を反映します。 望ましい在庫の位置は表しません。

**最小** 値は、次の 3 つの方法で設定できます。

- **品目補充** ページで手動でおこなう
- データ管理フレームワークによる (*品目充填* データ エンティティ)
- 安全在庫仕訳帳によって行われる安全在庫計算による

## <a name="calculate-minimum-coverage-based-on-historical-usage"></a>使用履歴に基づく最小補充の計算

安全在庫仕訳帳は、最小/最大の目的または在庫計画のために、品目の過去の使用状況に基づいて提案された最小数量を計算するために使用されます。 履歴の使用状況は、指定した期間のすべての払出トランザクションを表します。 これらの払出トランザクションには、販売注文トランザクションや在庫調整が含まれます。 また、提案された最小数量が在庫金額に与える影響、および現在の最小数量と比較した在庫金額の変更の影響も計算によって識別されます。

各安全在庫仕訳帳の明細行は、品目とその補充分析コードを表します。 これらの仕訳帳明細行が作成され、**安全在庫仕訳帳明細行** ページ (**マスター プラン\> マスター プラン\> 実行\> 安全在庫計算**) に表示されます。 安全在庫仕訳帳を使用して提案された最小数量を計算する業務プロセスについては、このトピックで後で説明します。

プランナーは、安全在庫仕訳帳を使用して、選択した期間の過去の使用状況に基づいて、選択した品目に対して提示される最小数量を計算します。 提案された最小は、必要に応じて手動で上書きできます。また、提案された在庫金額に対する最小額の潜在的な影響を確認できます。 仕訳帳が転記されると、品目補充に関連付けられている最小数量が自動的に更新されます。

### <a name="create-a-new-safety-stock-journal-name"></a>新しい安全在庫仕訳帳名を作成します。

このタイプの仕訳帳を生成するには、その前に 1 つ以上の安全在庫仕訳帳名を作成する必要があります。 通常は、複数の仕訳帳名を使用して安全在庫の計算を分離する支援ができる可能性があります。

1. **マスタ プラン \> 設定 \> 安全在庫仕訳帳の名前** に移動します。
1. アクション ウィンドウで、**新規** を選択します。
1. 新規取引明細行に次のフィールドを設定します。

    - **名前** – 仕訳帳の短い名前を入力します。
    - **説明** – 仕訳帳の説明を入力します。
    - **ユーザー グループをプライベートに** - 現在の仕訳帳名のオーディエンスを制限するには、ユーザー グループを選択します。
    - **転記後に明細行を削除** - 仕訳帳明細行を転記時に既定でクリーンアップするには、このチェック ボックスを選択します。 すべての転記明細行を保持するには、オフにします。

    **仕訳帳タイプ** フィールドは読み取り専用で、*安全在庫* に事前設定されています 。

1. ページを閉じます。

### <a name="create-a-safety-stock-journal-and-lines"></a>安全在庫仕訳帳と明細行を作成する

この手順により仕訳帳が作成され、明細行が自動的に追加されます。 各明細行は、品目、その補充分析コード、使用履歴から計算されたいくつかの数量を識別します。 計算された数量には、品目のリード タイムごとの平均払出、月ごとの平均払出、および月ごとの標準偏差が含まれます。

#### <a name="automatically-generate-journal-lines"></a>仕訳帳明細行の自動生成

仕訳帳明細行は、現在表示されている仕訳帳の明細行が存在しない場合にのみ自動的に生成できます。

次の手順に従って、仕訳帳明細行を自動的に生成します。

1. **マスター プラン \> マスター プラン \> 実行 \> 安全在庫計算** に移動します。
1. アクション ウィンドウで、**新規** を選択します。 新しい安全在庫仕訳帳名が作成されます。
1. **仕訳帳のヘッダー詳細** クイック タブで、以下のフィールドを設定します。

    - **名前** - 明細行を追加する安全在庫仕訳帳の名前を選択します。
    - **説明** - 既定値は、選択した仕訳帳名の説明です。 必要に応じて値を編集することもできます。
    - **転記後に明細行を削除** - 仕訳帳明細行を転記時にクリーンアップするには、このチェック ボックスを選択します。 すべての転記明細行を保持するには、オフにします。 この設定は、選択した仕訳帳名から継承されます。

    **仕訳帳** フィールドは読み取り専用で、明細行を作成および追加する仕訳帳の ID 番号を表示します。

1. **仕訳帳の明細行** クイックタブで、ツールバーの **明細行を作成** を選択します。
1. 提案された **最小在庫レベルの仕訳帳明細行の作成** ダイアログ ボックスで、次のフィールドを設定します。

    - **開始日** - 問題を計算に含める期間の開始日を選択します。
    - **終了日** - 問題を計算に含める期間の終了日を選択します。 開始日と終了日の間には少なくとも 2 か月必要です。
    - **標準偏差の計算** - 標準偏差を計算するには、このオプションを *はい* に設定します。 提案を計算 (このトピックの後半で説明) するときに **サービス レベル** オプションを使用するには、このオプションを *はい* に設定する必要があります。

1. **対象に含めるレコード** クイックタブで、フィルターと制約を設定し、レポートに含めるデータを定義します。 (たとえば、**補充グループ** の値でフィルター処理できます。) **フィルター** を選択すると、標準のクエリ エディタ ダイアログ ボックスが開きます。このダイアログ ボックスでは、選択基準、並べ替え 基準、結合を定義できます。 このフィールドは、Microsoft Dynamics 365 Supply Chain Management のその他の種類のクエリの実行と同様に機能します。
1. **バックグラウンドで実行** クイック タブで、ジョブがバッチ モードで実行されるように選択するか、定期的なスケジュールを設定するかを選択します。 このフィールドは、Supply Chain Management の他の種類の[バックグラウンド ジョブ](../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md)で実行されるのと同様に機能します。
1.  **OK** を選択します。 在庫トランザクションがある分析コードの明細行が作成されます。

#### <a name="manually-add-or-remove-journal-lines"></a>仕訳帳明細行の手動での追加または削除

仕訳帳明細行は、いつでも (明細行の自動生成の後または自動生成の代わりに) 手動で追加または削除できます。 **仕訳帳明細行** クイック タブのツール バーで次のボタンを使用します。

- **新規** - 新しい明細行を追加します。 次に、各列に値を入力して、計算する製品と新しい最小量を適用する製品を定義します。 提案された最小計算は、明細行を手動で追加する場合は使用できないため、新しい **計算済最小数量** の値は表示されません。 したがって、**新しい最小数量** の値を手動で入力する必要があります。 ただし、**新しい最小数量** の値が在庫金額に与える影響や、現在指定されている最小数量と比較した在庫の潜在的な変化が、引き続 き表示できます。
- **削除** - 選択された明細行を削除します。
- **仕訳帳明細行の削除** - 仕訳帳からすべての明細行を削除します。

### <a name="calculate-a-proposal"></a>提案の計算

この手順では、提示された各仕訳帳行の最小額と、その行が在庫金額に与える潜在的な影響を計算します。 (提案された最小値は、**計算された最小数量** の値として表示されます。) 必要に応じて、計算を複数回実行できます。 この計算では、すべての仕訳帳明細行に対して表示される **計算済最小数量** の値が更新されます。

表示された計算は、アクション ペインで **転記** を選択するまで、各製品の実際の最小数量の 値には影響されません。 その時点で、各製品に **新しい最小数量** の値が適用されます。

1. **マスター プラン \> マスター プラン \> 実行 \> 安全在庫計算** に移動します。
1. 提案を計算する仕訳帳を開きます。 または、このトピックの前の説明に従って新しい仕訳帳を作成します。
1. **仕訳帳の明細行** クイックタブで、ツールバーの **提案を計算する** を選択します。 (明細行を選択する必要はありません。)
1. **提案された最小在庫レベルの提案を計算する** ダイアログ ボックスで、次のフィールドを設定します。

    - **リード タイム中の平均払出を使用する** - 指定した期間中の平均払出に基づいて **計算された最小数量** の値を生成するには、このオプションを選択します。 その後、**乗算係数** フィールドに値を入力し、必要に応じて結果を調整します。 たとえば、正確な計算平均を使用する場合は *1.0*、10% の追加バッファを追加するには *1.1* を入力します。
    - **サービス レベルの使用** - 必要なサービス レベルに基づいて提案された最小額を計算するには、このオプションを選択します。 その後、**サービス レベル** フィールドで、使用するサービス レベルを選択します。
    - **リード タイム幅** - 通常のリード タイムを延長する値 (管理を許可する場合など) を入力します。
    - **計算された最小数量を新しい最小数量として使用する** - **計算された最小数量** 列の値を、計算の完了後のすべての行の **新しい最小数量** 列に自動的にコピーするには、このオプションを *はい* に設定します。 このオプションを *いいえ* に設定した場合は、すべての明細行の **新しい最小数量** 列に **現在の最小数量** の値がコピーされます。 その後、必要に応じて、**新しい最小数量** の値を手動で編集する必要があります。

1. **バックグラウンドで実行** クイック タブで、ジョブがバッチ モードで実行されるように選択するか、定期的なスケジュールを設定するかを選択します。 このフィールドは、Supply Chain Management の他の種類の[バックグラウンド ジョブ](../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md)で実行されるのと同様に機能します。
1.  **OK** を選択します。 計算の結果は、**仕訳帳明細行** クイック タブの **計算済最小数量** 列に表示されます。 ここでの値は、製品にまだ適用されていない提案値のみです。

### <a name="update-minimum-quantity"></a>最小数量の更新

安全在庫仕訳帳の任意の行を選択し、**新しい最小数量** フィールドの値を手動で上書きできます。

1. **マスター プラン \> マスター プラン \> 実行 \> 安全在庫計算** に移動します。
1. 仕訳帳を開いて編集します。 または、このトピックの前で説明した通り、新しい仕訳帳を作成します。
1. **仕訳帳明細行** クイック タブで、調整する行を検索し、**新しい最小数量** 列の値を編集します。 たとえば、**新しい最小数量** の値が **計算済最小数量** の値に一致した場合に設定できます。 **計算された最小数量** が *0* (ゼロ) の場合は、必要な将来の値を入力できます。

### <a name="post-the-new-minimum-quantity-and-validate-the-result"></a>新しい最小数量を転記して結果を検証

これらの手順に従って、新しい最小数量を転記して結果を検証します。

1. **マスター プラン \> マスター プラン \> 実行 \> 安全在庫計算** に移動します。
1. 新しい最小数量を転記する仕訳帳を開きます。 または、このトピックの前で説明した通り、新しい仕訳帳を作成します。
1. アクション ペインで、**転記** を選択します。
1. **仕訳帳の転記** ダイアログ ボックスで、**すべての転記エラーを新しい仕訳帳に転送する** フィールドを必要に応じて設定します。 その後、**OK** を選択して仕訳帳を転記できます。
1. **仕訳帳明細行** クイック タブの明細行の **新しい最小数量** の値を変更した場合は、次の手順に従って変更を確認できます。

    1. 編集した明細行の **品目番号** 列でリンクを選択します。
    1. **製品情報** ダイアログ ボックスの **品目番号** フィールドでリンクを選択すると、関連するリリース済製品レコードが開きます。
    1. アクション ペインの **製品** タブにある **補充** グループで、**品目補充** を選択します。
    1. 転記された安全在庫仕訳帳を使用して調整したサイトおよび倉庫の **最小** 値が、編集内容に合わせて更新されました。

## <a name="additional-resources"></a>追加リソース

- [品目に対する安全在庫フルフィルメント](safety-stock-replenishment.md)

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
