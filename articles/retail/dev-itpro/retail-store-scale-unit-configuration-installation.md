---
title: "Retail Store Scale Unit の構成とインストール"
description: "このトピックでは、セルフ サービスを使用して、小売用バックオフィスで Retail Store Scale Unit を構成し、ダウンロードして、実店舗の 1 台以上のコンピューターにインストールする方法について説明します。"
author: jashanno
manager: AnnBe
ms.date: 08/24/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-365-retail
ms.technology: 
ms.search.form: SysAADClientTable, RetailCDXDataStore, RetailCDXDataGroup, RetailChannelProfile, RetailSharedParameters, RetailStoreTable
audience: IT Pro
ms.reviewer: sericks
ms.search.scope: Operations, Retail, Core
ms.custom: 219744
ms.assetid: 5e28948f-d40a-40e8-843b-8c2747916546
ms.search.region: Global
ms.search.industry: Retail
ms.author: jashanno
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.translationtype: HT
ms.sourcegitcommit: d20bc3519096f1035d26f89d42aa7e8f0fc368cd
ms.openlocfilehash: 7b9cfcedff0bcfdb63ea58593b52be6a8f824b08
ms.contentlocale: ja-jp
ms.lasthandoff: 08/29/2018

---

# <a name="configure-and-install-retail-store-scale-unit"></a><span data-ttu-id="3eeca-103">Retail Store Scale Unit の構成とインストール</span><span class="sxs-lookup"><span data-stu-id="3eeca-103">Configure and install Retail Store Scale Unit</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="3eeca-104">このトピックでは、セルフ サービスを使用して、Microsoft Dynamics 365 for Retail Headquarters で Retail Store Scale Unit を構成し、ダウンロードして、実店舗の 1 台以上のコンピューターにインストールする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-104">This topic explains how you can use self-service to configure Retail Store Scale Unit in Microsoft Dynamics 365 for Retail headquarters, download it, and install it on one or more computers in a brick-and-mortar store.</span></span> <span data-ttu-id="3eeca-105">Retail Store スケール ユニットは、Retail チャネル データベース、Retail Async Client、Retail Server、Retail Cloud 販売時点管理 (POS) コンポーネントを組み合わせます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-105">Retail Store Scale Unit combines the Retail channel database, Retail Async Client, Retail Server, and Retail Cloud point of sale (POS) components.</span></span> <span data-ttu-id="3eeca-106">Microsoft Dynamics 365 for Retail 環境では、これらのコンポーネントが既に提供されています。</span><span class="sxs-lookup"><span data-stu-id="3eeca-106">A Microsoft Dynamics 365 for Retail environment already provides these components.</span></span> <span data-ttu-id="3eeca-107">ただし、単一コンピューターのセットアップ (既定のオプション) または複数コンピューターのセットアップのいずれかで、ストア内でローカルに動作するように構成できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="3eeca-107">However, you can now configure them so that they work locally in a store, in either a single-computer setup (the default option) or a multiple-computer setup.</span></span> <span data-ttu-id="3eeca-108">このトピックは、Retail Store スケール ユニットのアンインストールとトラブルシューティングの方法についても説明します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-108">This topic also explains how to uninstall and troubleshoot Retail Store Scale Unit.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="3eeca-109">準備</span><span class="sxs-lookup"><span data-stu-id="3eeca-109">Before you begin</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3eeca-110">会社全体で高いレベルのセキュリティを維持するために、作成する小売店舗ごとに新しいアプリケーション ID (クライアント ID) とシークレットを作成することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-110">To help maintain a high level of security across the company, we strongly recommend that you create a new application ID (client ID) and secret for each retail store that is created.</span></span> <span data-ttu-id="3eeca-111">このステップでは、新しい Web アプリが必要です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-111">This step requires a new Web App.</span></span>

1. <span data-ttu-id="3eeca-112">アプリケーション ID (クライアント ID) とシークレットを作成する Microsoft Azure Active Directory (Azure広告) アプリ登録を生成します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-112">Generate a Microsoft Azure Active Directory (Azure AD) app registration to create an application ID (client ID) and secret.</span></span> <span data-ttu-id="3eeca-113">手順については、[Azure Active Directory アプリケーションを作成する](/azure/azure-resource-manager/resource-group-create-service-principal-portal#create-an-azure-active-directory-application) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3eeca-113">For instructions, see [Create an Azure Active Directory application](/azure/azure-resource-manager/resource-group-create-service-principal-portal#create-an-azure-active-directory-application).</span></span> <span data-ttu-id="3eeca-114">この記事では、Azure ユーザーのアクセス許可と要件を確認し、アプリ登録を生成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-114">This article reviews Azure user permissions and requirements, and explains how to generate an app registration.</span></span>
2. <span data-ttu-id="3eeca-115">Retail Store スケール ユニットにアプリケーション ID (クライアント ID) とシークレットが作成された後、クライアント ID は、小売で受け入れる必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-115">After an application ID (client ID) and secret are created for Retail Store Scale Unit, the client ID must be accepted in Retail.</span></span> <span data-ttu-id="3eeca-116">**システム管理** &gt; **セットアップ** &gt; **Azure Active Directory アプリケーション**の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-116">Go to **System administration** &gt; **Setup** &gt; **Azure Active Directory applications**.</span></span> <span data-ttu-id="3eeca-117">アプリケーション ID (クライアントID) を**クライアント ID** 列に入力し、説明のテキストを**名**列に入力および **RetailServiceAccount** を**ユーザー ID** 列に入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-117">Enter the application ID (client ID) in the **Client ID** column, enter descriptive text in the **Name** column, and enter **RetailServiceAccount** in the **User ID** column.</span></span>

## <a name="configure-a-new-retail-store-scale-unit"></a><span data-ttu-id="3eeca-118">新しい Retail Store スケール ユニットのコンフィギュレーション</span><span class="sxs-lookup"><span data-stu-id="3eeca-118">Configure a new Retail Store Scale Unit</span></span>

<span data-ttu-id="3eeca-119">機能する小売用店舗スケール ユニットを作成するには、[Retail Store Scale Unit インストーラーの実行] の手順に従ってこのトピックのすべてのセクションの手順を実行してください。</span><span class="sxs-lookup"><span data-stu-id="3eeca-119">To create a functioning Retail Store Scale Unit, complete the procedures in all sections of this topic through the "Run the Retail Store Scale Unit installer" section.</span></span> <span data-ttu-id="3eeca-120">構成とインストールを完了するには、まず小売用バックオフィスで初期構成を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-120">To complete the configuration and installation, you must first do the initial configuration in Retail headquarters.</span></span> <span data-ttu-id="3eeca-121">次に、インストールを完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-121">Next, you must complete the installation.</span></span> <span data-ttu-id="3eeca-122">最後に、小売用店舗スケール ユニットが正しく動作するよう、コンフィギュレーションを完了する小売用バック オフィスを返す必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-122">Finally, you must return to Retail headquarters to finish the configuration, so that Retail Store Scale Unit works correctly.</span></span>

1. <span data-ttu-id="3eeca-123">Azure AD 証明書を使用して、小売用バックオフィスまたは Retail 評価版にサインインします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-123">Use your Azure AD credentials to sign in to the Retail headquarters or Retail trial.</span></span>
2. <span data-ttu-id="3eeca-124">**ようこそ**ページで、左上隅のメニューを使用して、**小売** &gt; **チャンネル** &gt; **小売店舗** &gt; **すべての小売店舗**に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-124">On the **Welcome** page, use the menu in the upper left to go to **Retail** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel database**.</span></span>
3. <span data-ttu-id="3eeca-125">**チャネル データベース**ページの、アクション ウィンドウで、**新規**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-125">On the **Channel database** page, on the Action Pane, select **New**.</span></span>
4. <span data-ttu-id="3eeca-126">**チャネル データベース ID** フィールドに、固有の値を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-126">In the **Channel database ID** field, enter a unique value.</span></span>
5. <span data-ttu-id="3eeca-127">**チャンル データ グループ** フィールドで、**既定**オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-127">In the **Channel data group** field, select the **Default** option.</span></span>

    <span data-ttu-id="3eeca-128">既に作成した他のオプションを選択することができます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-128">You can select any other option that you've already created.</span></span>

6. <span data-ttu-id="3eeca-129">**タイプ** フィールドで、既定値 (**チャネル データベース**) を選択したままにします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-129">In the **Type** field, leave the default value (**Channel database**) selected.</span></span>
7. <span data-ttu-id="3eeca-130">**データ同期間隔** フィールドは空白のままにすることができます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-130">You can leave the **Data sync interval** field blank.</span></span> <span data-ttu-id="3eeca-131">あるいは、このフィールドで値を選択することができます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-131">Alternatively, you can select a value in this field.</span></span> <span data-ttu-id="3eeca-132">たとえば、デモ データでは、**D60-U15** の値が 15 分の同期間隔を指定します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-132">For example, in the demo data, the value **D60-U15** specifies a 15-minute synchronization interval.</span></span>

    <span data-ttu-id="3eeca-133">**データの同期間隔** 値は、チャネル データベース (Retail Store Scale Unit) および環境の Azure SQL データベース (本社) の間でデータを同期する頻度を決定します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-133">The **Data sync interval** value determines how often the data is synchronized between the channel database (Retail Store Scale Unit) and the environment's Azure SQL database (headquarters).</span></span> <span data-ttu-id="3eeca-134">値が入力されていない場合は、Retail Store スケール ユニットで設定されている既定の間隔が使用されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-134">If no value is entered, the default interval that is set up in Retail Store Scale Unit is used.</span></span> <span data-ttu-id="3eeca-135">この既定の間隔は、3 分です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-135">This default interval is three minutes.</span></span>

8. <span data-ttu-id="3eeca-136">**小売チャネル**のクイック タブで、**追加**を選択し、**チャネル フィールド**で、適切な小売店舗のチャンネルを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-136">On the **Retail channel** FastTab, select **Add**, and then, in the **Channel** field, select the appropriate Retail store channel.</span></span> <span data-ttu-id="3eeca-137">このデータベースを使用するすべてのチャンネルを追加するには、この手順を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-137">Repeat this step to add all the channels that should use this database.</span></span>

    <span data-ttu-id="3eeca-138">また、このデータベースを使用しないチャンネルを追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-138">You can also add channels that don't use this database.</span></span> <span data-ttu-id="3eeca-139">この方法で、Retail Store スケール ユニットのチャネル データベースのチャネルのデータを保持します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-139">In this way, you keep the data for those channels in the Retail Store Scale Unit channel database.</span></span> <span data-ttu-id="3eeca-140">このデータベースを頻繁に使用する Retail 店舗チャネルは、ローカルでそのデータにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-140">The Retail store channels that actively use this database can then access that data locally.</span></span>

9. <span data-ttu-id="3eeca-141">**店舗スケール ユニット パッケージ**クイック タブの、**名前**フィールドで、適切な小売店舗スケール ユニット パッケージを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-141">On the **Store Scale Unit package** FastTab, in the **Name** field, select the appropriate Retail Store Scale Unit package.</span></span>

    <span data-ttu-id="3eeca-142">各環境では、基本な Retail Store Scale Unit パッケージを生成します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-142">Each environment generates a base Retail Store Scale Unit package.</span></span> <span data-ttu-id="3eeca-143">したがって、このフィールドには常に少なくとも 1 つのオプションが含まれます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-143">Therefore, this field always contains at least one option.</span></span>

10. <span data-ttu-id="3eeca-144">アクション ウィンドウで、**保存**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-144">On the Action Pane, select **Save**.</span></span>
11. <span data-ttu-id="3eeca-145">**小売** &gt; **チャンネル設定** &gt; **チャンネル プロファイル** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-145">Go to **Retail** &gt; **Channel setup** &gt; **Channel profiles**.</span></span>
12. <span data-ttu-id="3eeca-146">アクション ウィンドウで、**新規**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-146">On the Action Pane, select **New**.</span></span>
13. <span data-ttu-id="3eeca-147">**名前**フィールドに、チャネル プロセスの一意な名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-147">In the **Name** field, enter a unique name for the channel profile.</span></span>
14. <span data-ttu-id="3eeca-148">アクション ウィンドウで、**保存**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-148">On the Action Pane, select **Save**.</span></span>
15. <span data-ttu-id="3eeca-149">新しいチャネル プロファイルの**プロファイルのプロパティ**クイック タブで、**追加**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-149">On the **Profile properties** FastTab for the new channel profile, select **Add**.</span></span>
16. <span data-ttu-id="3eeca-150">**プロパティ キー** フィールドで、**Retail サーバー URL** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-150">In the **Property key** field, select **Retail server URL**.</span></span>
17. <span data-ttu-id="3eeca-151">**プロパティ値**フィールドに、Retail Store スケール ユニットにインストールする必要のある Retail サーバーの URL を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-151">In the **Property value** field, enter the URL of the Retail Server that should be installed for Retail Store Scale Unit.</span></span>

    <span data-ttu-id="3eeca-152">Retail Store スケール ユニットのオンプレミス ストア インストールの URL の標準フォーマットは、**https://&lt;コンピューター名&gt;:&lt;Port&gt;/RetailServer/Commerce** です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-152">The standard format for the URL of an on-premises store installation of Retail Store Scale Unit is **https://&lt;Computer Name&gt;:&lt;Port&gt;/RetailServer/Commerce**.</span></span> <span data-ttu-id="3eeca-153">この形式で、**&lt;コンピューター名&gt;** は Retail Store スケール ユニットがインストールされているコンピューター、またはドメイン、フル コンピューター名に結合されていないシステムの完全修飾ドメイン名 (FQDN) のどちらかです。</span><span class="sxs-lookup"><span data-stu-id="3eeca-153">In this format, **&lt;Computer Name&gt;** is either the fully qualified domain name (FQDN) of the computer where Retail Store Scale Unit is installed or, for systems that aren't joined to a domain, the full computer name.</span></span> <span data-ttu-id="3eeca-154">**&lt;ポート&gt;** はインストールに使用するポート番号です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-154">**&lt;Port&gt;** is the port number that should be used in the installation.</span></span> <span data-ttu-id="3eeca-155">ポート番号は、 1 ～ 65535 の範囲の値である必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-155">The port number must be a value between 1 and 65535.</span></span> <span data-ttu-id="3eeca-156">既定の HTTPS ポート (443) を使用している場合、ポート番号を指定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="3eeca-156">If you're using the default HTTPS port (443), you don't have to specify the port number.</span></span>

18. <span data-ttu-id="3eeca-157">新しいチャネル プロファイルの**プロファイルのプロパティ**クイック タブで、**追加**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-157">On the **Profile properties** FastTab for the new channel profile, select **Add**.</span></span>
19. <span data-ttu-id="3eeca-158">**プロパティ キー** フィールドで、**クラウド POS URL** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-158">In the **Property key** field, select **Cloud POS URL**.</span></span>
20. <span data-ttu-id="3eeca-159">**プロパティ値**フィールドに、Retail Store スケール ユニットにインストールする必要のある Retail Cloud POS のインスタンスの URL を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-159">In the **Property value** field, enter the URL of the Retail Cloud POS instance that should be installed for Retail Store Scale Unit.</span></span>

    <span data-ttu-id="3eeca-160">Retail Store スケール ユニットのオンプレミス ストア インストールの URL の標準フォーマットは、**https://&lt;コンピューター名&gt;:&lt;Port&gt;/POS** です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-160">The standard format for the URL of an on-premises store installation of Retail Store Scale Unit is **https://&lt;Computer Name&gt;:&lt;Port&gt;/POS**.</span></span> <span data-ttu-id="3eeca-161">この形式で、**&lt;コンピューター名&gt;** は Retail Store スケール ユニットがインストールされているコンピューター、またはドメイン、フル コンピューター名に結合されていないシステムの FQDN のどちらかです。</span><span class="sxs-lookup"><span data-stu-id="3eeca-161">In this format, **&lt;Computer Name&gt;** is either the FQDN of the computer where Retail Store Scale Unit is installed or, for systems that aren't joined to a domain, the full computer name.</span></span> <span data-ttu-id="3eeca-162">**&lt;ポート&gt;** はインストールに使用するポート番号です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-162">**&lt;Port&gt;** is the port number that should be used in the installation.</span></span> <span data-ttu-id="3eeca-163">ポート番号は、 1 ～ 65535 の範囲の値である必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-163">The port number must be a value between 1 and 65535.</span></span> <span data-ttu-id="3eeca-164">既定の HTTPS ポート (443) を使用している場合、ポート番号を指定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="3eeca-164">If you're using the default HTTPS port (443), you don't have to specify the port number.</span></span>

21. <span data-ttu-id="3eeca-165">アクション ウィンドウで、**保存**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-165">On the Action Pane, select **Save**.</span></span>
22. <span data-ttu-id="3eeca-166">**小売** &gt; **チャンネル** &gt; **小売店舗** &gt; **すべての小売店舗**の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-166">Go to **Retail** &gt; **Channels** &gt; **Retail stores** &gt; **All retail stores**.</span></span>
23. <span data-ttu-id="3eeca-167">新しいチャネル データベースを使用する小売店の小売チャネル ID を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-167">Select the Retail channel ID for the retail store that will use the new channel database.</span></span>
24. <span data-ttu-id="3eeca-168">選択したストアの詳細ページにある、アクション ウィンドウで、**編集**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-168">On the details page for the selected store, on the Action Pane, select **Edit**.</span></span>
25. <span data-ttu-id="3eeca-169">店舗の**一般**クイック タブの、**ライブ チャネル データベース**フィールドで、手順 3 で作成したチャネル データベースを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-169">On the **General** FastTab for the store, in the **Live channel database** field, select the channel database that you created in step 3.</span></span>
26. <span data-ttu-id="3eeca-170">アクション ウィンドウで、**保存**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-170">On the Action Pane, select **Save**.</span></span>
27. <span data-ttu-id="3eeca-171">店舗の**一般**クイック タブの、**チャネル プロファイル**フィールドで、手順 12 で作成したチャネル プロファイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-171">On the **General** FastTab for the store, in the **Channel profile** field, select the channel profile that you created in step 12.</span></span>
28. <span data-ttu-id="3eeca-172">**小売** &gt; **本社の設定** &gt; **小売用スケジューラ** &gt; **チャンネル データ グループ**の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-172">Go to **Retail** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel data group**.</span></span>
29. <span data-ttu-id="3eeca-173">**既定** データ グループを選択した後、アクション ウィンドウで、**完全データ同期** を選択します。**配送スケジュールの選択** のフィールドで、ジョブ **9999** を選択し、**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-173">Select the **Default** data group, and then, on the Action Pane, select **Full data sync**. In the **Select a distribution schedule** field, select job **9999**, and then select **OK**.</span></span> <span data-ttu-id="3eeca-174">表示されるダイアログ ボックスで、**OK** を選択して完全同期を確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-174">In the dialog box that appears, select **OK** to confirm the full synchronization.</span></span> <span data-ttu-id="3eeca-175">チャンネル データベース内のすべてのデータはダウンロードの準備をします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-175">All the data in the channel database is prepared for download.</span></span>

### <a name="download-the-retail-store-scale-unit-installer"></a><span data-ttu-id="3eeca-176">Retail Store Scale Unit インストーラーをダウンロード</span><span class="sxs-lookup"><span data-stu-id="3eeca-176">Download the Retail Store Scale Unit installer</span></span>

1. <span data-ttu-id="3eeca-177">Azure AD 証明書を使用して、小売用バックオフィスまたは Retail 評価版にサインインします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-177">Use your Azure AD credentials to sign in to the Retail headquarters or Retail trial.</span></span>
2. <span data-ttu-id="3eeca-178">**ようこそ**ページで、左上隅のメニューを使用して、**小売** &gt; **チャンネル** &gt; **小売店舗** &gt; **すべての小売店舗**に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-178">On the **Welcome** page, use the menu in the upper left to go to **Retail** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel database**.</span></span>
3. <span data-ttu-id="3eeca-179">左のチャネル データベースの一覧で、以前に作成したチャネル データベースを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-179">In the list of channel databases on the left, select the channel database that you created earlier.</span></span>
4. <span data-ttu-id="3eeca-180">アクション ウィンドウで、**ダウンロード**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-180">On the Action Pane, select **Download**.</span></span>
5. <span data-ttu-id="3eeca-181">ドロップダウン メニューで、**コンフィギュレーション ファイル**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-181">On the drop-down menu, select **Configuration file**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="3eeca-182">Retail Store Scale Unit インストーラーが構成ファイル (XML ファイル) を正しく使用するためには、構成ファイルをインストーラと同じ場所に保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-182">To help guarantee that the Retail Store Scale Unit installer correctly uses the configuration file (XML file), you must save the configuration file to the same location as the installer.</span></span>

6. <span data-ttu-id="3eeca-183">Internet Explorer ウィンドウの下部に表示される通知バーで、**保存**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-183">On the Notification bar that appears at the bottom of the Internet Explorer window, select **Save**.</span></span> <span data-ttu-id="3eeca-184">(通知バーは、他のブラウザでは別の場所に表示される場合があります。)</span><span class="sxs-lookup"><span data-stu-id="3eeca-184">(The Notification bar might appear in a different place in other browsers.)</span></span>

    <span data-ttu-id="3eeca-185">ブラウザーは、生成されたダウンロード ポップアップをブロックする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-185">Browsers might block the download pop-up that is generated.</span></span> <span data-ttu-id="3eeca-186">**1 回許可** または **このサイトのオプション** &gt; **常に許可** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-186">Select either **Allow once** or **Options for this site** &gt; **Always allow**.</span></span> <span data-ttu-id="3eeca-187">その後、再度 **ダウンロード** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-187">Then select **Download** again.</span></span>

7. <span data-ttu-id="3eeca-188">アクション ウィンドウで、**ダウンロード**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-188">On the Action Pane, select **Download**.</span></span>
8. <span data-ttu-id="3eeca-189">ドロップダウン メニューで、**Retail Store スケール ユニット パッケージ**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-189">On the drop-down menu, select **Retail Store Scale Unit package**.</span></span>
9. <span data-ttu-id="3eeca-190">Internet Explorer ウィンドウの下部に表示される通知バーで、**保存**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-190">On the Notification bar that appears at the bottom of the Internet Explorer window, select **Save**.</span></span> <span data-ttu-id="3eeca-191">(通知バーは、他のブラウザでは別の場所に表示される場合があります。)</span><span class="sxs-lookup"><span data-stu-id="3eeca-191">(The Notification bar might appear in a different place in other browsers.)</span></span>

    <span data-ttu-id="3eeca-192">選択したチャネル データベースの Retail Store スケール ユニット パッケージに基づいて、適切なパッケージがダウンロード用に自動的に選択されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-192">The correct installation package is automatically selected for download, based on the Retail Store Scale Unit package on the selected channel database.</span></span>

10. <span data-ttu-id="3eeca-193">セットアップ インストーラが保存されたら、通知バーの、**実行**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-193">After the setup installer has been saved, on the Notification bar, select **Run**.</span></span> <span data-ttu-id="3eeca-194">(この手順はブラウザの種類によって異なる場合があります。)</span><span class="sxs-lookup"><span data-stu-id="3eeca-194">(This step might differ, depending on the type of browser.)</span></span>

### <a name="run-the-retail-store-scale-unit-installer"></a><span data-ttu-id="3eeca-195">Retail Store Scale Unit インストーラーを実行</span><span class="sxs-lookup"><span data-stu-id="3eeca-195">Run the Retail Store Scale Unit installer</span></span>

> [!NOTE]
> <span data-ttu-id="3eeca-196">Retail Cloud POS をインストールし、使用する場合は、次の手順に従って、インストーラーを初めて実行するときに構成を初期化する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-196">If you will install and use Retail Cloud POS, you must initialize the configuration the first time that you run the installer, as described in the following procedure.</span></span>

<span data-ttu-id="3eeca-197">Retail Store Scale Unit インストーラーを実行する前に、すべての[システム要件](../../fin-and-ops/get-started/system-requirements.md)が満たされていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="3eeca-197">Before you run the Retail Store Scale Unit installer, make sure that all [system requirements](../../fin-and-ops/get-started/system-requirements.md) are met.</span></span>

<span data-ttu-id="3eeca-198">Retail Store スケール ユニット インストーラーは、まず、関連付けられているファイルを展開します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-198">The Retail Store Scale Unit installer first extracts the associated files.</span></span> <span data-ttu-id="3eeca-199">インストールを開始します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-199">It then begins the installation.</span></span>

1. <span data-ttu-id="3eeca-200">インストーラーの最初のページで、インストールするコンポーネントを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-200">On the first page of the installer, select the components to install.</span></span> <span data-ttu-id="3eeca-201">次のコンポーネントをインストールすることができます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-201">You can install the following components:</span></span>

   - <span data-ttu-id="3eeca-202">小売チャンネル データベースと非同期クライアント</span><span class="sxs-lookup"><span data-stu-id="3eeca-202">Retail channel database together with Async Client</span></span>
   - <span data-ttu-id="3eeca-203">Retail サーバー</span><span class="sxs-lookup"><span data-stu-id="3eeca-203">Retail Server</span></span>
   - <span data-ttu-id="3eeca-204">小売クラウド POS</span><span class="sxs-lookup"><span data-stu-id="3eeca-204">Retail Cloud POS</span></span>

     > [!NOTE]
     > - <span data-ttu-id="3eeca-205">Retail Cloud POS をインストールするには、Retail Server も選択してインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-205">To install Retail Cloud POS, you must also select and install Retail Server.</span></span> <span data-ttu-id="3eeca-206">店舗内で Retail Modern POS のみを使用する場合は、**Retail Cloud POS** チェック ボックスをオフにして、ここで説明されているようにインストール プロセスを続行します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-206">If you will use only Retail Modern POS in the store, clear the **Retail Cloud POS** check box, and continue with installation process as it's described here.</span></span>
     > - <span data-ttu-id="3eeca-207">既定では、インストーラーはすべてのコンポーネントを 1 台のコンピュータにインストールします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-207">By default, the installer installs all components on one computer.</span></span> <span data-ttu-id="3eeca-208">複数のコンピューターにコンポーネントをインストールするには、追加の手動手順を完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-208">To install the components across multiple computers, you must complete additional manual steps.</span></span> <span data-ttu-id="3eeca-209">詳細については、「複数のコンピューターのインストール」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="3eeca-209">For more information, see the "Multiple-computer installation" section.</span></span>

     <span data-ttu-id="3eeca-210">インストールするすべてのコンポーネントを選択した後、**次**を選択して続行します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-210">After you've selected all the components to install, select **Next** to continue.</span></span>

2. <span data-ttu-id="3eeca-211">インストーラーは、すべての前提条件が満たされていることを検証します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-211">The installer validates that all prerequisites are met.</span></span> <span data-ttu-id="3eeca-212">Microsoft SQL Server の有効なバージョンが見つからない場合は、インストーラーが、Microsoft SQL Server 2014 with Service Pack 2 をダウンロードし、インストールします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-212">If a valid version of Microsoft SQL Server isn't found, the installer downloads and installs Microsoft SQL Server 2014 Express with Service Pack 2.</span></span>

    > [!NOTE]
    > - <span data-ttu-id="3eeca-213">この前提条件を満たすためには、SQL Server に全文検索機能を搭載し、最低限トランスポート層セキュリティ (TLS) 1.2 がサポートされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-213">To meet the prerequisites, SQL Server must have full-text search, and it must support, at a minimum, Transport Layer Security (TLS) 1.2.</span></span> <span data-ttu-id="3eeca-214">Microsoft SQL Server 2012 では、最低でも、Service Pack 3 がインストールされる必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-214">For Microsoft SQL Server 2012, Service Pack 3 must be installed, at a minimum.</span></span> <span data-ttu-id="3eeca-215">Microsoft SQL Server 2014 では、Service Pack 2 がインストールされる必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-215">For Microsoft SQL Server 2014, Service Pack 2 must be installed.</span></span>
    > - <span data-ttu-id="3eeca-216">システムの再起動が必要な場合、インストーラーはユーザーにプロンプトを表示します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-216">If a system restart is required, the installer will prompt the user.</span></span>  <span data-ttu-id="3eeca-217">この確認は、再起動が必要かどうかをすべてのアプリケーションに通知する Windows システム レジストリ キーに基づいています。</span><span class="sxs-lookup"><span data-stu-id="3eeca-217">This prompt is based upon a Windows system registry key that tells all applications if a restart is required.</span></span>  <span data-ttu-id="3eeca-218">インストールを続行する前に再起動することをお勧めしますが、再起動は必須ではなく、インストーラーはコンピュータを再起動せずに続行することができます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-218">While it is recommended to restart prior to continuing the installation, a restart is not mandatory and the installer can continue without restarting the computer.</span></span>

3. <span data-ttu-id="3eeca-219">Application Object Server (AOS) の URL を確認し、**次へ** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-219">Verify the URL for Application Object Server (AOS), and then select **Next**.</span></span> <span data-ttu-id="3eeca-220">(AOS URL とは、小売用バックオフィスにアクセスするために使用される URL のことです。)</span><span class="sxs-lookup"><span data-stu-id="3eeca-220">(The AOS URL is the URL that is used to access Retail headquarters.)</span></span>

    > [!NOTE]
    > <span data-ttu-id="3eeca-221">Retail Server URL は、構成ファイルから自動的に入力されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-221">The Retail Server URL is automatically entered from the configuration file.</span></span>

4. <span data-ttu-id="3eeca-222">HTTPS 通信に使用する、有効な Secure Sockets Layer (SSL) 証明書を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-222">Select a valid Secure Sockets Layer (SSL) certificate to use for HTTPS communication.</span></span>

    <span data-ttu-id="3eeca-223">証明書は秘密キー ストレージを使用する必要があり、サーバー認証は拡張キー使用プロパティにリストされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-223">The certificate must use private key storage, and server authentication must be listed in the enhanced key usage property.</span></span> <span data-ttu-id="3eeca-224">また、証明書はローカルに信頼される必要があり、期限切れにすることはできません。</span><span class="sxs-lookup"><span data-stu-id="3eeca-224">Additionally, the certificate must be trusted locally, and it can't be expired.</span></span> <span data-ttu-id="3eeca-225">ローカル コンピューターの個人用証明書格納場所に保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-225">It must be stored in the personal certificate store location on the local computer.</span></span>

5. <span data-ttu-id="3eeca-226">特定のユーザーが必要な場合は、アプリケーション プールを実行するために必要なユーザー名とパスワードを入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-226">If a specific user is required, enter the user name and password that the application pool should run under.</span></span> <span data-ttu-id="3eeca-227">既定では、インストーラーは自動的に使用するサービス アカウントを生成します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-227">By default, the installer automatically generates a service account to use.</span></span> <span data-ttu-id="3eeca-228">この方法は、安全性がより向上するためお勧めします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-228">This approach is more secure and is recommended.</span></span>
6. <span data-ttu-id="3eeca-229">次のページで、小売サーバー アプリケーション プールと Async Client のユーザー アカウントとパスワードを入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-229">On the next page, enter the user account and password for the Retail Server application pool and Async Client.</span></span> <span data-ttu-id="3eeca-230">既定では、このアカウントは自動的に生成されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-230">By default, this account is automatically generated.</span></span> <span data-ttu-id="3eeca-231">ただし、ユーザー アカウントとパスワードを手動で入力できます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-231">However, you can manually enter the user account and password.</span></span>
7. <span data-ttu-id="3eeca-232">使用する HTTPS ポートを入力し、コンピューターのホスト名が正しいことを確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-232">Enter the HTTPS port to use, and verify that the host name of the computer is correct.</span></span> <span data-ttu-id="3eeca-233">その後、**次へ** を選択して続行します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-233">Then select **Next** to continue.</span></span>

    > [!NOTE]
    > - <span data-ttu-id="3eeca-234">インストーラーは自動的にホスト名を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-234">The installer automatically enters the host name.</span></span> <span data-ttu-id="3eeca-235">何らかの理由で、インストールのためにホスト名を変更する必要がある場合は、ここで変更します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-235">If, for any reason, the host name must be changed for the installation, change it here.</span></span> <span data-ttu-id="3eeca-236">ホスト名はシステムの FQDN でなければなりません。また、選択した Store システム エントリの **ホスト名**フィールドに入力する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-236">The host name must be the FQDN of the system, and it must be entered in the **Host name** field for the selected Store system entry.</span></span>

8. <span data-ttu-id="3eeca-237">アプリケーション ID (クライアント ID) および Retail Store Scale Unit インストールと関連するシークレットを入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-237">Enter the application ID (client ID) and secret that are associated with this Retail Store Scale Unit installation.</span></span> <span data-ttu-id="3eeca-238">また、コンフィギュレーション ファイルから自動的に入力されるチャネル データベース ID を確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-238">Additionally, verify the channel database ID, which is automatically entered from the configuration file.</span></span> <span data-ttu-id="3eeca-239">その後、**インストール** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-239">Then select **Install**.</span></span> <span data-ttu-id="3eeca-240">Retail Cloud POS を使用する場合は、ページの下部にある **Retail Cloud POS のコンフィギュレーション** チェック ボックスが選択されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-240">If you will use Retail Cloud POS, make sure that the **Configure Retail Cloud POS** check box at the bottom of the page is selected.</span></span> <span data-ttu-id="3eeca-241">この構成ではAzure AD サインインが要求され、必要なすべての情報が Azure で自動的に生成され、Retail Cloud POS をオンプレミスで使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-241">This configuration requests Azure AD sign-in and automatically generates all required information in Azure, so that Retail Cloud POS can be used on-premises.</span></span>

    <span data-ttu-id="3eeca-242">Azure で Web アプリケーションを作成する方法については、[Azure Active Directory アプリケーションを作成する](/azure/azure-resource-manager/resource-group-create-service-principal-portal#create-an-azure-active-directory-application) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3eeca-242">For information about how to create web applications in Azure, see [Create an Azure Active Directory application](/azure/azure-resource-manager/resource-group-create-service-principal-portal#create-an-azure-active-directory-application).</span></span>

    <span data-ttu-id="3eeca-243">Web アプリを作成するとき、最初の URI と URL は特定の値である必要はありません。</span><span class="sxs-lookup"><span data-stu-id="3eeca-243">When you create the Web App, the initial URI and URL don't have to be any specific value.</span></span> <span data-ttu-id="3eeca-244">作成されるアプリケーション ID (クライアント ID) とキー (シークレット) のみ重要です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-244">Only the application ID (client ID) and key (secret) that are created are important.</span></span>

9. <span data-ttu-id="3eeca-245">Retail Store スケール ユニットにアプリケーション ID (クライアント ID) とシークレットが作成され、アプリケーション ID (クライアント ID) は、小売で受け入れる必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-245">After the application ID (client ID) and secret are created for Retail Store Scale Unit, the application ID (client ID) must be accepted in Retail.</span></span> <span data-ttu-id="3eeca-246">小売用バックオフィスでコンフィギュレーションを完了する次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="3eeca-246">Follow the next procedure to finish the configuration in Retail headquarters.</span></span>
10. <span data-ttu-id="3eeca-247">インストールが完了すると、最終正常性ページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-247">After the installation is completed, the final health page appears.</span></span> <span data-ttu-id="3eeca-248">このページには、インストールが成功したかどうかが表示されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-248">This page shows whether the installation was successful.</span></span> <span data-ttu-id="3eeca-249">また、基本的な接続テストに基づいた各コンポーネントの正常性と、このトピックの場所について示します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-249">It also shows the health of each component, based on basic connection tests, and the location of this topic.</span></span> <span data-ttu-id="3eeca-250">インストールに失敗した場合は、ページにログ ファイルの場所が表示されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-250">If the installation wasn't successful, the page shows the location of the log files.</span></span> <span data-ttu-id="3eeca-251">Retail Store スケール ユニットのコンフィギュレーションを完了して、すべてのコンポーネントが正しく動作するまで、この最終正常性ページを開いたままにしておくことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-251">We recommend that you keep this final health page open until you've completed the configuration of Retail Store Scale Unit and all components are working correctly.</span></span>

### <a name="finish-the-retail-store-scale-unit-configuration-in-headquarters"></a><span data-ttu-id="3eeca-252">本社で小売用店舗スケール ユニットのコンフィギュレーションを完了します</span><span class="sxs-lookup"><span data-stu-id="3eeca-252">Finish the Retail Store Scale Unit configuration in headquarters</span></span>

<span data-ttu-id="3eeca-253">最後のステップでは、Azure アプリケーション ID (クライアント ID) とキー (シークレット) が小売用バックオフィスで正しく受け入れられ、環境と新しい Retail Store スケール ユニットとの接続が可能であることを検証し、確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-253">The last steps require validation and verification that the Azure application ID (client ID) and key (secret) are correctly accepted in Retail headquarters, so that connections can be made between the environment and the new Retail Store Scale Unit.</span></span>

1. <span data-ttu-id="3eeca-254">Retail Store スケール ユニットにアプリケーション ID (クライアント ID) とキー (シークレット) が作成され、インストーラーに入力された後、アプリケーション ID (クライアント ID) は、小売用バック オフィスで受け入れる必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-254">After the application ID (client ID) and key (secret) are created for Retail Store Scale Unit and entered in the installer, the application ID (client ID) must be accepted in Retail headquarters.</span></span> <span data-ttu-id="3eeca-255">小売用バックオフィスで、**システム管理** &gt; **セットアップ** &gt; **Azure Active Directory アプリケーション**に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-255">In Retail headquarters, go to **System administration** &gt; **Setup** &gt; **Azure Active Directory applications**.</span></span> <span data-ttu-id="3eeca-256">アプリケーション ID (クライアントID) を**クライアント ID** 列に入力し、説明のテキストを**名**列に入力および **RetailServiceAccount** を**ユーザー ID** 列に入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-256">Enter the application ID (client ID) in the **Client ID** column, enter descriptive text in the **Name** column, and enter **RetailServiceAccount** in the **User ID** column.</span></span>
2. <span data-ttu-id="3eeca-257">Retail Cloud POS を使用するように設定されている場合、インストールの最後にクライアント ID が表示されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-257">If Retail Cloud POS is configured for use, a client ID is shown at the end of the installation.</span></span> <span data-ttu-id="3eeca-258">このクライアント ID を小売の **小売共有パラメーター** ページに追加する必要があります、</span><span class="sxs-lookup"><span data-stu-id="3eeca-258">You must add this client ID to the **Retail shared parameters** page in Retail.</span></span>

    1. <span data-ttu-id="3eeca-259">Retail で、**Retail** &gt; **本社の設定** &gt; **パラメーター** &gt; **小売共有パラメーター**に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-259">In Retail, go to **Retail** &gt; **Headquarters setup** &gt; **Parameters** &gt; **Retail shared parameters**.</span></span>
    2. <span data-ttu-id="3eeca-260">**ID プロバイダー** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-260">Select **Identity providers**.</span></span>
    3. <span data-ttu-id="3eeca-261">**ID プロバイダー** クイック タブで、`HTTPS://sts.windows.net/` で始まるプロバイダーを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-261">On the **Identity providers** FastTab, select the provider that begins with `HTTPS://sts.windows.net/`.</span></span> <span data-ttu-id="3eeca-262">選択に基づいて、**依存する関係者** FastTab の値が設定されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-262">The values on the **Relying parties** FastTab are set, based on your selection.</span></span>
    4. <span data-ttu-id="3eeca-263">**依存する関係者**クイック タブで、**+ 追加**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-263">On the **Relying parties** FastTab, select **+Add**.</span></span> <span data-ttu-id="3eeca-264">Retail Store Scale Unit インストラーの最終正常性ページに表示されているクライアント ID を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-264">Enter the client ID that is listed on the final health page of the Retail Store Scale Unit installer.</span></span> <span data-ttu-id="3eeca-265">**Type** フィールドを **Public** に、**UserType** フィールドを **Worker** に設定します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-265">Set the **Type** field to **Public** and the **UserType** field to **Worker**.</span></span> <span data-ttu-id="3eeca-266">[アクション] ウィンドウで、**保存** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-266">Then, on the Action Pane, select **Save**.</span></span>
    5. <span data-ttu-id="3eeca-267">新しい依存する関係者を選択し、**サーバー リソース ID** クイック タブで **+追加** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-267">Select the new relying party, and then, on the **Server resource IDs** FastTab, select **+Add**.</span></span> <span data-ttu-id="3eeca-268">**サーバー リソース ID** 列に、`https://retailstorescaleunit.retailserver.com` と入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-268">In the **Server Resource ID** column, enter `https://retailstorescaleunit.retailserver.com`.</span></span>
    6. <span data-ttu-id="3eeca-269">アクション ウィンドウで、**保存**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-269">On the Action Pane, select **Save**.</span></span>

3. <span data-ttu-id="3eeca-270">Retail で、**Retail** &gt; **本社の設定** &gt; **パラメーター** &gt; **小売共有パラメーター**に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-270">In Retail, go to **Retail** &gt; **Headquarters setup** &gt; **Parameters** &gt; **Retail shared parameters**.</span></span>
4. <span data-ttu-id="3eeca-271">**ID プロバイダー** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-271">Select **Identity providers**.</span></span>
5. <span data-ttu-id="3eeca-272">**ID プロバイダー**クイック タブで、**+ 追加**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-272">On the **Identity providers** FastTab, select **+Add**.</span></span>
6. <span data-ttu-id="3eeca-273">新しい**発行者**行に、新たにインストールした Retail Store スケール ユニットの Retail サーバー URL を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-273">In the new **Issuer** row, enter the Retail Server URL of the newly installed Retail Store Scale Unit.</span></span> <span data-ttu-id="3eeca-274">URL の末尾に **/auth** を追加します。URL は `https://<My Case-Sensitive Computer Name>:<Port Number>/RetailServer/auth` のようになります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-274">At the end of the URL, add **/auth**. The URL will resemble `https://<My Case-Sensitive Computer Name>:<Port Number>/RetailServer/auth`.</span></span>

    > [!NOTE]
    > <span data-ttu-id="3eeca-275">上記 URL では、大文字と小文字を区別します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-275">The URL described above is case sensitive.</span></span>
    > <span data-ttu-id="3eeca-276">インストールされている各 Retail Store スケール ユニットに新しい ID プロバイダー行があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-276">There will be a new identity provider line for each Retail Store Scale Unit that is installed.</span></span> <span data-ttu-id="3eeca-277">各 Retail Store Scale Unit では、この URL に似た URL が作成されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-277">Each Retail Store Scale Unit will have a URL that resembles this URL.</span></span>

7. <span data-ttu-id="3eeca-278">**名前**列に、URL が属する店舗の説明を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-278">In the **Name** column, enter a description for the store that the URL belongs to.</span></span>
8. <span data-ttu-id="3eeca-279">**タイプ**列で、**OpenID 接続**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-279">In the **Type** column, select **Open ID Connect**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="3eeca-280">この新しい行は、すべての Retail Store スケール ユニットのインストール (つまり、一意の URL ごと) ごとに複製する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-280">This new row must be duplicated for every Retail Store Scale Unit installation (that is, for every unique URL).</span></span>

9. <span data-ttu-id="3eeca-281">アクション ウィンドウで、**保存**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-281">On the Action Pane, select **Save**.</span></span>
10. <span data-ttu-id="3eeca-282">**ID プロバイダー**クイック タブで、新しく作成された明細行を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-282">On the **Identity providers** FastTab, select the newly created line.</span></span> <span data-ttu-id="3eeca-283">選択に基づいて、**依存する関係者** FastTab の値が設定されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-283">The values on the **Relying parties** FastTab are set, based on your selection.</span></span>
11. <span data-ttu-id="3eeca-284">**依存する関係者**クイック タブで、**+ 追加**を選択し、次の 2 つのエントリを追加します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-284">On the **Relying parties** FastTab, select **+Add**, and add the following two entries:</span></span>

    - <span data-ttu-id="3eeca-285">**ClientId** 列に、**クラウド POS** を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-285">In the **ClientId** column, enter **Cloud POS**.</span></span> <span data-ttu-id="3eeca-286">**Type** フィールドを **Public** に、**UserType** フィールドを **Worker** に設定します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-286">Set the **Type** field to **Public** and the **UserType** field to **Worker**.</span></span>
    - <span data-ttu-id="3eeca-287">**ClientId** 列に、**Modern POS** を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-287">In the **ClientId** column, enter **Modern POS**.</span></span> <span data-ttu-id="3eeca-288">**Type** フィールドを **Public** に、**UserType** フィールドを **Worker** に設定します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-288">Set the **Type** field to **Public** and the **UserType** field to **Worker**.</span></span>

12. <span data-ttu-id="3eeca-289">アクション ウィンドウで、**保存**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-289">On the Action Pane, select **Save**.</span></span>
13. <span data-ttu-id="3eeca-290">Retail では、**Retail** &gt; **Retail IT** &gt; **配送スケジュール**へ移動し、CDX ジョブ **1110** を実行します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-290">In Retail, go to **Retail** &gt; **Retail IT** &gt; **Distribution Schedule**, and run CDX Job **1110**.</span></span>
14. <span data-ttu-id="3eeca-291">完了したら、インストーラーに戻り、**完了** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-291">When you've finished, return to the installer, and select **Finish**.</span></span>

    <span data-ttu-id="3eeca-292">インストーラーの最後のページには、すべてのコンポーネントが正しく動作することをテストして検証するために使用できる貴重な情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="3eeca-292">The final page of the installer includes valuable information that you can use to test and validate that all components work correctly.</span></span> <span data-ttu-id="3eeca-293">このページは、検証が完了する段階まで開いたままにしておきます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-293">Keep this page open until you've completed the validation.</span></span>

> [!NOTE]
> <span data-ttu-id="3eeca-294">インストーラーが Retail Server、Async Client、またはその他のコンポーネントのチェック マークを表示しない場合は、10 分待って、キャッシュされた値をクラウドで更新できるようにします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-294">If the installer doesn't show a check mark for Retail Server, Async Client, or any other component, wait 10 minutes, so that any cached values can be updated in the cloud.</span></span> <span data-ttu-id="3eeca-295">再び確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-295">Then check again.</span></span> <span data-ttu-id="3eeca-296">それでもインストーラーが完全に成功しない場合は、このインストールを使用する新しいチャンネル データベースで完全同期を実行します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-296">If the installer still isn't fully successful, run a full synchronization on the new channel database that this installation uses.</span></span>
>
> <span data-ttu-id="3eeca-297">すべての手順を正しく実行する場合、構成には次の特性が必要です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-297">If you followed all the steps correctly, your configuration should have these characteristics:</span></span>
>
>     - <span data-ttu-id="3eeca-298">Azure では、2 つの Web アプリケーションはインストーラー経由で自動的に生成されています。</span><span class="sxs-lookup"><span data-stu-id="3eeca-298">In Azure, two web applications have been automatically generated through the installer:</span></span>
>
>         - <span data-ttu-id="3eeca-299">Retail Store スケール ユニット Cloud POS</span><span class="sxs-lookup"><span data-stu-id="3eeca-299">Retail Store Scale Unit Cloud POS</span></span>
>         - <span data-ttu-id="3eeca-300">Cloud POS 用 Retail Store スケール ユニット Retail Server</span><span class="sxs-lookup"><span data-stu-id="3eeca-300">Retail Store Scale Unit Retail Server for Cloud POS</span></span>
>
>     - <span data-ttu-id="3eeca-301">Azure では、Web アプリケーション (つまり、新しい Azure ポータルでのアプリ登録) は各 Retail Store Scale Unit インストールに対して手動で作成されています (たとえば、RetailStoreScaleUnitHouston)。</span><span class="sxs-lookup"><span data-stu-id="3eeca-301">In Azure, a web application (that is, an App registration in the new Azure portal) has been manually created for each Retail Store Scale Unit installation (for example, RetailStoreScaleUnitHouston).</span></span> <span data-ttu-id="3eeca-302">作成されたキー (シークレット) は、前述のようにインストーラーで使用できます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-302">A key (secret) has been created that can be used in the installer, as described earlier.</span></span>
>     - <span data-ttu-id="3eeca-303">手動で作成した Web アプリケーションのアプリケーション ID (クライアント ID) は、前の手順のステップ 1 で説明したように、Retail の **Azure Active Directory アプリケーション** ページに追加されています。</span><span class="sxs-lookup"><span data-stu-id="3eeca-303">The application ID (client ID) of the manually created web application has been added to the **Azure Active Directory applications** page in Retail, as explained in step 1 of the preceding procedure.</span></span>
>     - <span data-ttu-id="3eeca-304">Retail Store スケール ユニット インストーラーの最後に表示される Retail Cloud POS アプリケーション ID (クライアント ID) は、「Retail Store Scale Unit インストーラーを実行」セクションの最後の手順で説明されているように、**ID プロバイダー** クイック タブに追加されています。</span><span class="sxs-lookup"><span data-stu-id="3eeca-304">The Retail Cloud POS application ID (client ID) that was shown at the end of the Retail Store Scale Unit installer has been added on the **Identity providers** FastTab, as explained in the final steps of the "Run the Retail Store Scale Unit installer" section.</span></span>

### <a name="multiple-computer-installation"></a><span data-ttu-id="3eeca-305">複数のコンピューターのインストール</span><span class="sxs-lookup"><span data-stu-id="3eeca-305">Multiple-computer installation</span></span>

<span data-ttu-id="3eeca-306">上級者のみ、複数のコンピュータに Retail Store スケール ユニットをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-306">Only advanced users should install Retail Store Scale Unit across multiple computers.</span></span> <span data-ttu-id="3eeca-307">次の一連の手順では、1 台のコンピューターに Retail チャネル データベースと Async Client、2 台目のコンピューターに Retail Server と Retail Cloud POS をインストールする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-307">The following set of procedures explains how to install the Retail channel database and Async Client on one computer, and Retail Server and Retail Cloud POS on a second computer.</span></span> <span data-ttu-id="3eeca-308">指示では、両方のシステムが同じドメイン上にあり、インストールされるサービスのユーザーが両方のシステムで既に作成されていることが前提です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-308">The instructions assume that both systems are on the same domain, and that users for the services that will be installed have already been created on both systems.</span></span> <span data-ttu-id="3eeca-309">小売用バックオフィスですべてのコンフィギュレーションを行うことが重要です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-309">It's important that you do all configuration in Retail headquarters.</span></span>

#### <a name="installation-on-the-first-computer"></a><span data-ttu-id="3eeca-310">最初のコンピューターへのインストール</span><span class="sxs-lookup"><span data-stu-id="3eeca-310">Installation on the first computer</span></span>

<span data-ttu-id="3eeca-311">最初のコンピューターで、このトピックの前のところで説明したように、Retail Store スケール ユニット セルフ サービス インストーラーを実行しますが、次の変更を行います。</span><span class="sxs-lookup"><span data-stu-id="3eeca-311">On the first computer, run the Retail Store Scale Unit self-service installer as described earlier in this topic, but make the following changes.</span></span>

1. <span data-ttu-id="3eeca-312">インストールするコンポーネントとして Retail チャネル データベースと非同期クライアントのみを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-312">Select only Retail channel database and Async Client as the components to install.</span></span> <span data-ttu-id="3eeca-313">その後 **次へ** を選択して、インストールを続行します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-313">Then select **Next** to continue with the installation.</span></span> 

    > [!NOTE]
    > <span data-ttu-id="3eeca-314">Async Client はインストールされたコンピューターの外部からアクセスすることができないため、Async Client のために生成されたサービス アカウントを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-314">You can use a generated service account for Async Client, because Async Client won't be accessed outside the computer that it's installed on.</span></span>

2. <span data-ttu-id="3eeca-315">クライアント ID およびシークレットを入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-315">Enter the client ID and secret.</span></span> <span data-ttu-id="3eeca-316">2 台目のコンピューターで再度使用できるように、これらの詳細情報を使用可能な状態にしておきます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-316">Keep these details available, so that you can use them again on the second computer.</span></span>
3. <span data-ttu-id="3eeca-317">Retail Store スケール ユニットにクライアント ID とシークレットが作成された後、クライアント ID は、小売で受け入れる必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-317">After a client ID and secret are created for Retail Store Scale Unit, the client ID must be accepted in Retail.</span></span> <span data-ttu-id="3eeca-318">**システム管理** &gt; **セットアップ** &gt; **Azure Active Directory アプリケーション**の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-318">Go to **System administration** &gt; **Setup** &gt; **Azure Active Directory applications**.</span></span> <span data-ttu-id="3eeca-319">クライアント ID を**クライアント ID** 列に入力し、説明のテキストを**名**列に入力および **RetailServiceAccount** を**ユーザー ID** 列に入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-319">Enter the client ID in the **Client ID** column, enter descriptive text in the **Name** column, and enter **RetailServiceAccount** in the **User ID** column.</span></span>
4. <span data-ttu-id="3eeca-320">セットアップが正常に行われたときは、SQL Server 構成マネージャーを起動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-320">When setup is successful, start SQL Server Configuration Manager.</span></span>
5. <span data-ttu-id="3eeca-321">SQL Server インスタンスの **SQL Server ネットワークの構成** &gt; **プロトコル**に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-321">Go to **SQL Server Network Configuration** &gt; **Protocols** for the SQL Server instance.</span></span>
6. <span data-ttu-id="3eeca-322">右クリックし、**プロパティ** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-322">Right-click, and then select **Properties**.</span></span>
7. <span data-ttu-id="3eeca-323">**フラグ** セクションで、**強制暗号化の設定**の値を**はい**に変更します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-323">In the **Flags** section, change the value of **Set Force Encryption** to **Yes**.</span></span>
8. <span data-ttu-id="3eeca-324">**証明書**セクションで、ドロップダウン メニューから SSL 証明書を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-324">In the **Certificate** section, select the SSL certificate on the drop-down menu.</span></span> <span data-ttu-id="3eeca-325">この SQL Server SSL 証明書は、インストーラーで使用されているのと同じ証明書です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-325">This SQL Server SSL certificate is the same certificate that is used in the installer.</span></span>
9. <span data-ttu-id="3eeca-326">**OK**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-326">Select **OK**.</span></span>
10. <span data-ttu-id="3eeca-327">SQL Server 構成マネージャで**プロトコル**に戻り、次のプロトコルを有効にします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-327">Go back to **Protocols** in SQL Server Configuration Manager, and enable the following protocols:</span></span>

    - <span data-ttu-id="3eeca-328">名前付きパイプ</span><span class="sxs-lookup"><span data-stu-id="3eeca-328">Named Pipes</span></span>
    - <span data-ttu-id="3eeca-329">TCP/IP</span><span class="sxs-lookup"><span data-stu-id="3eeca-329">TCP/IP</span></span>

11. <span data-ttu-id="3eeca-330">**TCP/IP** プロトコルを右クリックし、**プロパティ** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-330">Right-click the **TCP/IP** protocol, and then select **Properties**.</span></span>
12. <span data-ttu-id="3eeca-331">**IP アドレス** セクションで、一覧を **IPALL** まで下方向にスクロールします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-331">In the **IP Address** section, scroll down the list to **IPALL**.</span></span>
13. <span data-ttu-id="3eeca-332">**TCPPort = 1433** と入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-332">Enter **TCPPort = 1433**.</span></span>
14. <span data-ttu-id="3eeca-333"> *\*OK*\*を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-333">Select **OK**.</span></span>
15. <span data-ttu-id="3eeca-334">高度なセキュリティの Microsoft Windows ファイアウォールを起動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-334">Start Microsoft Windows Firewall with Advanced Security.</span></span>
16. <span data-ttu-id="3eeca-335">Windows ファイアウォールで、TCP ポート 1433 を開放する受信ルールを作成します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-335">In Windows Firewall, create an inbound rule to open TCP port 1433.</span></span>

<span data-ttu-id="3eeca-336">SQL Server および Windows ファイアウォールに関する詳細については、[データベース エンジンへ アクセス用の Windows ファイアウォールをコンフィギュレーションする](https://msdn.microsoft.com/en-us/library/ms175043.aspx) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3eeca-336">For detailed information about SQL Server and Windows Firewall, see [Configure a Windows Firewall for Database Engine Access](https://msdn.microsoft.com/en-us/library/ms175043.aspx).</span></span>

#### <a name="installation-on-the-second-computer"></a><span data-ttu-id="3eeca-337">2 台目のコンピューターへのインストール</span><span class="sxs-lookup"><span data-stu-id="3eeca-337">Installation on the second computer</span></span>

<span data-ttu-id="3eeca-338">2 番目のコンピューターで、このトピックの前のところで説明したように、Retail Store スケール ユニット セルフ サービス インストーラーを実行しますが、次の変更を行います。</span><span class="sxs-lookup"><span data-stu-id="3eeca-338">On the second computer, run the Retail Store Scale Unit Self-service installer as described earlier in this topic, but make the following changes.</span></span>

1. <span data-ttu-id="3eeca-339">インストールするコンポーネントとして Retail Server と Retail Cloud POS のみを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-339">Select only Retail Server and Retail Cloud POS as the components to install.</span></span> <span data-ttu-id="3eeca-340">Retail サーバーをインストールする必要がある場合は、Retail クラウド POS を選択できません。</span><span class="sxs-lookup"><span data-stu-id="3eeca-340">If only Retail Server must to be installed, don't select Retail Cloud POS.</span></span> <span data-ttu-id="3eeca-341">その後 **次へ** を選択して、インストールを続行します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-341">Then select **Next** to continue with the installation.</span></span>
2. <span data-ttu-id="3eeca-342">最初のコンピュータで、SQL Server にアクセスする権限を持つドメイン ユーザーの資格情報 (ユーザー名およびパスワード) を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-342">Enter the domain user credentials (user name and password) that have permission to access SQL Server on the first computer.</span></span> <span data-ttu-id="3eeca-343">その後、**次へ** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-343">Then select **Next**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="3eeca-344">Retail サーバーでは、最初のコンピューター上の SQL データベースへのアクセスが必要なため、生成されたサービス アカウントは使用できません。</span><span class="sxs-lookup"><span data-stu-id="3eeca-344">A generated service account can't be used, because Retail Server requires access to the SQL database on the first computer.</span></span> <span data-ttu-id="3eeca-345">ドメイン アカウントを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-345">You must use a domain account.</span></span>

3. <span data-ttu-id="3eeca-346">最初のコンピューターで使用される同じクライアント ID およびシークレットを入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-346">Enter the same client ID and secret that are used on the first computer.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="3eeca-347">前述のように Retail にこのクライアント ID を追加することが重要です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-347">It's critical that you add this client ID to Retail as described earlier.</span></span>

4. <span data-ttu-id="3eeca-348">**クラウド POS のコンフィギュレーション** を選択し、Azure Web アプリケーションを作成するための適切なアクセス許可を持つ Azure AD 資格情報を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-348">Select **Configure Cloud POS**, and then enter Azure AD credentials that have the correct permissions to create Azure Web Apps.</span></span> 

    <span data-ttu-id="3eeca-349">Azure Web アプリ、それを作成する方法、および新しいシークレットを生成する方法の詳細については、[リソースにアクセスできる Azure Active Directory アプリケーションおよびサービス プリンシパルを作成するポータルの使用](https://azure.microsoft.com/en-us/documentation/articles/resource-group-create-service-principal-portal/) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3eeca-349">For more information about Azure Web Apps, how to create them, and how to generate new secrets, see [Use portal to create an Azure Active Directory application and service principal that can access resources](https://azure.microsoft.com/en-us/documentation/articles/resource-group-create-service-principal-portal/).</span></span> <span data-ttu-id="3eeca-350">サインイン URL やアプリ ID URI は重要ではないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="3eeca-350">Note that the sign-in URL and the App ID URI aren't important.</span></span>

5. <span data-ttu-id="3eeca-351">セットアップが正常に行われたときは、インストーラーを終了しません。</span><span class="sxs-lookup"><span data-stu-id="3eeca-351">When setup is successful, don't exit the installer.</span></span> 

    > [!NOTE]
    > <span data-ttu-id="3eeca-352">最初は、データベースがまだ正しく設定されていないため、ヘルスチェック ping は成功しません。</span><span class="sxs-lookup"><span data-stu-id="3eeca-352">At first, the healthcheck ping won't be successful, because the database isn't yet set up correctly.</span></span> <span data-ttu-id="3eeca-353">この手順の残りのステップを完了した後は、再度稼働状況チェックをテストできます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-353">After you've completed the remaining steps of this procedure, you can test the healthcheck again.</span></span>

6. <span data-ttu-id="3eeca-354">**Microsoft インターネット インフォメーション サービス (IIS)** を起動し、**小売店舗スケール単位** Web サイトを選択して **Retail Server** Web アプリケーションを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-354">Start **Microsoft Internet Information Services (IIS)**, select the **Retail Store Scale Unit** website, and select the **Retail Server** web application.</span></span>
7. <span data-ttu-id="3eeca-355">作業ディレクトリを検証します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-355">Explore the working directory.</span></span>
8. <span data-ttu-id="3eeca-356">Web.config ファイルを開いて、**connectionStrings** セクションで、**サーバー名**を追加します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-356">Open the Web.config file, and then, in the **connectionStrings** section, add **Server name**.</span></span> <span data-ttu-id="3eeca-357">**サーバー名** はユーザーがコンポーネントをインストールした最初のコンピュータの名前です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-357">**Server name** is the name of the first computer where you installed components.</span></span> <span data-ttu-id="3eeca-358">ファイル保存します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-358">Save the file.</span></span>
9. <span data-ttu-id="3eeca-359">使用されている証明書が信頼できる機関の有効な信頼できる証明書でない場合は、CERTMGR.MSC を開いて次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-359">If the certificate that is used isn't a valid, trusted certificate from a trusted authority, open CERTMGR.MSC, and follow these steps:</span></span>

    1. <span data-ttu-id="3eeca-360">前に作成した SQL Server SSL 証明書をインポートし、信頼されたルートに追加します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-360">Import the SQL Server SSL certificate that you created earlier, and add it to Trusted Root.</span></span>
    2. <span data-ttu-id="3eeca-361">管理者として**コマンド プロンプト** ウィンドウを開き、**IISRESET** と入力し、Enter キーを押します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-361">Open a **Command Prompt** window as an administrator, type **IISRESET**, and then press Enter.</span></span>

10. <span data-ttu-id="3eeca-362">Retail Cloud POS を使用するように設定されている場合は、クライアント ID が表示されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-362">If Retail Cloud POS is configured for use, a client ID is shown.</span></span> <span data-ttu-id="3eeca-363">このクライアント ID を小売の **小売共有パラメーター** ページに追加する必要があります、</span><span class="sxs-lookup"><span data-stu-id="3eeca-363">You must add this client ID to the **Retail shared parameters** page in Retail.</span></span>

    1. <span data-ttu-id="3eeca-364">Retail で、**Retail** &gt; **本社の設定** &gt; **パラメーター** &gt; **小売共有パラメーター**に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-364">In Retail, go to **Retail** &gt; **Headquarters setup** &gt; **Parameters** &gt; **Retail shared parameters**.</span></span>
    2. <span data-ttu-id="3eeca-365">**ID プロバイダー** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-365">Select **Identity providers**.</span></span>
    3. <span data-ttu-id="3eeca-366">**ID プロバイダー** クイック タブで、`HTTPS://sts.windows.net/` で始まるプロバイダーを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-366">On the **Identity providers** FastTab, select the provider that begins with `HTTPS://sts.windows.net/`.</span></span> <span data-ttu-id="3eeca-367">選択に基づいて、**依存する関係者** FastTab の値が設定されます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-367">The values on the **Relying parties** FastTab are set, based on your selection.</span></span>
    4. <span data-ttu-id="3eeca-368">**依存する関係者**クイック タブで、**+ 追加**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-368">On the **Relying parties** FastTab, select **+Add**.</span></span> <span data-ttu-id="3eeca-369">Retail Store Scale Unit インストラーに表示されているクライアント ID を入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-369">Enter the client ID that is listed in the Retail Store Scale Unit installer.</span></span> <span data-ttu-id="3eeca-370">**Type** フィールドを **Public** に、**UserType** フィールドを **Worker** に設定します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-370">Set the **Type** field to **Public** and the **UserType** field to **Worker**.</span></span> <span data-ttu-id="3eeca-371">[アクション] ウィンドウで、**保存** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-371">Then, on the Action Pane, select **Save**.</span></span>
    5. <span data-ttu-id="3eeca-372">新しい依存する関係者を選択し、**サーバー リソース ID** クイック タブで **+追加** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-372">Select the new relying party, and then, on the **Server resource IDs** FastTab, select **+Add**.</span></span> <span data-ttu-id="3eeca-373">**サーバー リソース ID** 列に、`https://retailstorescaleunit.retailserver.com` と入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-373">In the **Server Resource ID** column, enter `https://retailstorescaleunit.retailserver.com`.</span></span>
    6. <span data-ttu-id="3eeca-374">アクション ウィンドウで、**保存**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-374">On the Action Pane, select **Save**.</span></span>

11. <span data-ttu-id="3eeca-375">Retail で、**Retail** &gt; **本社の設定** &gt; **小売用スケジューラ** &gt; **チャネル データベース**に移動し、これらの手順に従います。</span><span class="sxs-lookup"><span data-stu-id="3eeca-375">In Retail, go to **Retail** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel database**, and follow these steps:</span></span>

    1. <span data-ttu-id="3eeca-376">このトピックの先頭に作成したチャネルのデータベースを選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-376">Select the channel database that you created at the beginning of this topic.</span></span>
    2. <span data-ttu-id="3eeca-377">アクション ウィンドウで、**完全な同期** &gt; **ジョブ 9999** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-377">On the Action Pane, select **Full Sync** &gt; **Job 9999**.</span></span> <span data-ttu-id="3eeca-378">完全な同期には数分間かかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-378">Full synchronization might require several minutes.</span></span>
    3. <span data-ttu-id="3eeca-379">Retail Store スケール ユニットのインストーラーで、すべての機能が正常に機能していることを確認するために再テストします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-379">In the Retail Store Scale Unit installer, retest to verify that all functionality is working correctly.</span></span>

12. <span data-ttu-id="3eeca-380">POS 操作を使用しているコンピューターから Retail Cloud POS を起動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-380">Start Retail Cloud POS from the computer that you're using for POS operations.</span></span> <span data-ttu-id="3eeca-381">(このコンピューターは、小売店舗スケール ユニット システムとは別の 3 台目のコンピューターです。)</span><span class="sxs-lookup"><span data-stu-id="3eeca-381">(This computer is a third computer that is separate from the Retail Store Scale Unit systems.)</span></span>
13. <span data-ttu-id="3eeca-382">このコンピューターを使用している Retail Cloud POS デバイスを有効化します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-382">Activate the Retail Cloud POS device that you're using for this computer.</span></span>
14. <span data-ttu-id="3eeca-383">完全なエンド ツー エンドの機能を確認する簡易販売を実行します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-383">Do a simple sale to verify full end-to-end functionality.</span></span>

### <a name="help-secure-retail-store-scale-unit"></a><span data-ttu-id="3eeca-384">Retail Store スケール ユニットのセキュリティを強化する</span><span class="sxs-lookup"><span data-stu-id="3eeca-384">Help secure Retail Store Scale Unit</span></span>

<span data-ttu-id="3eeca-385">現在のセキュリティ基準によると、実稼動環境で次のオプションを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-385">According to current security standards, the following options should be set in a production environment:</span></span>

- <span data-ttu-id="3eeca-386">コンピューターの SSL (v2およびv3) を完全に無効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-386">You should completely disable SSL (v2 and v3) on the computer.</span></span>
- <span data-ttu-id="3eeca-387">TLS バージョン 1.2 (または、現時点で最も新しいバージョン) のみを有効にし、使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-387">You should enable and use only TLS version 1.2 (or the current highest version).</span></span>

    > [!NOTE]
    > <span data-ttu-id="3eeca-388">既定では、SSL および TLS 1.2 を除くすべてのバージョンの TLS は無効です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-388">By default, SSL and all versions of TLS except TLS 1.2 are disabled.</span></span> <span data-ttu-id="3eeca-389">これらの設定を編集または有効にするには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-389">To edit or enable these settings, follow these steps:</span></span>
    >
    > 1. <span data-ttu-id="3eeca-390">Windows ロゴキーと R キーを同時に押して、**実行**ウィンドウを開きます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-390">Press the Windows logo key+R to open a **Run** window.</span></span>
    > 2. <span data-ttu-id="3eeca-391">**開く**フィールドに、**Regedit** と入力してから **OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-391">In the **Open** field, enter **Regedit**, and then select **OK**.</span></span>
    > 3. <span data-ttu-id="3eeca-392">**ユーザー アカウント制御**ウィンドウで、**はい** (この手順が必要である場合) を選択してから、新しい**レジストリ エディター** ウィンドウで **HKEY\_LOCAL\_MACHINE\\System\\CurrentControlSet\\SecurityProviders\\SCHANNEL\\Protocols** に移動します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-392">In the **User Account Control** window, select **Yes** (if this step is required), and then, in the new **Registry Editor** window, go to **HKEY\_LOCAL\_MACHINE\\System\\CurrentControlSet\\SecurityProviders\\SCHANNEL\\Protocols**.</span></span>
    > 4. <span data-ttu-id="3eeca-393">次のキーは自動的に入力され、TLS 1.2 のみが有効になります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-393">The following keys have been automatically entered to enable only TLS 1.2:</span></span>
    >
    >     - <span data-ttu-id="3eeca-394">TLS 1.2\\Server:Enabled=1</span><span class="sxs-lookup"><span data-stu-id="3eeca-394">TLS 1.2\\Server:Enabled=1</span></span>
    >     - <span data-ttu-id="3eeca-395">TLS 1.2\\Server:DisabledByDefault=0</span><span class="sxs-lookup"><span data-stu-id="3eeca-395">TLS 1.2\\Server:DisabledByDefault=0</span></span>
    >     - <span data-ttu-id="3eeca-396">TLS 1.2\\Client:Enabled=1</span><span class="sxs-lookup"><span data-stu-id="3eeca-396">TLS 1.2\\Client:Enabled=1</span></span>
    >     - <span data-ttu-id="3eeca-397">TLS 1.2\\Client:DisabledByDefault=0</span><span class="sxs-lookup"><span data-stu-id="3eeca-397">TLS 1.2\\Client:DisabledByDefault=0</span></span>
    >     - <span data-ttu-id="3eeca-398">TLS 1.1\\Server:Enabled=0</span><span class="sxs-lookup"><span data-stu-id="3eeca-398">TLS 1.1\\Server:Enabled=0</span></span>
    >     - <span data-ttu-id="3eeca-399">TLS 1.1\\Client:Enabled=0</span><span class="sxs-lookup"><span data-stu-id="3eeca-399">TLS 1.1\\Client:Enabled=0</span></span>
    >     - <span data-ttu-id="3eeca-400">TLS 1.0\\Server:Enabled=0</span><span class="sxs-lookup"><span data-stu-id="3eeca-400">TLS 1.0\\Server:Enabled=0</span></span>
    >     - <span data-ttu-id="3eeca-401">TLS 1.0\\Client:Enabled=0</span><span class="sxs-lookup"><span data-stu-id="3eeca-401">TLS 1.0\\Client:Enabled=0</span></span>
    >     - <span data-ttu-id="3eeca-402">SSL 3.0\\Server:Enabled=0</span><span class="sxs-lookup"><span data-stu-id="3eeca-402">SSL 3.0\\Server:Enabled=0</span></span>
    >     - <span data-ttu-id="3eeca-403">SSL 3.0\\Client:Enabled=0</span><span class="sxs-lookup"><span data-stu-id="3eeca-403">SSL 3.0\\Client:Enabled=0</span></span>
    >     - <span data-ttu-id="3eeca-404">SSL 2.0\\Server:Enabled=0</span><span class="sxs-lookup"><span data-stu-id="3eeca-404">SSL 2.0\\Server:Enabled=0</span></span>
    >     - <span data-ttu-id="3eeca-405">SSL 2.0\\Client:Enabled=0</span><span class="sxs-lookup"><span data-stu-id="3eeca-405">SSL 2.0\\Client:Enabled=0</span></span>

- <span data-ttu-id="3eeca-406">知られている特定の理由で必要とされない限り、追加のネットワーク ポートを開かないでください。</span><span class="sxs-lookup"><span data-stu-id="3eeca-406">No additional network ports should be open, unless they are required for known, specified reasons.</span></span>
- <span data-ttu-id="3eeca-407">クロスオリジンのリソース共有を無効にし、許可され承認されたオリジンを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3eeca-407">You must disable cross-origin resource sharing, and you must specify the allowed origins that are accepted.</span></span>
- <span data-ttu-id="3eeca-408">Store システムのコンピューターで使用する証明書の取得には、信頼された証明機関のみを活用してください。</span><span class="sxs-lookup"><span data-stu-id="3eeca-408">You should use only trusted certificate authorities to obtain certificates that will be used on Store system computers.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3eeca-409">IIS と Payment Card Industry (PCI) の要件向けのセキュリティ ガイドラインを確認することが重要です。</span><span class="sxs-lookup"><span data-stu-id="3eeca-409">It's critical that you review security guidelines for IIS and the Payment Card Industry (PCI) requirements.</span></span>

### <a name="troubleshoot-retail-store-scale-unit"></a><span data-ttu-id="3eeca-410">Retail Store Scale Unit のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="3eeca-410">Troubleshoot Retail Store Scale Unit</span></span>

<span data-ttu-id="3eeca-411">確認する項目のチェックリストを次に示します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-411">Here is a checklist of things to verify:</span></span>

1. <span data-ttu-id="3eeca-412">Retail の**小売共有パラメーター** ページで、適切なクライアント ID が**依存する関係者**クイック タブに追加されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-412">In Retail, on the **Retail shared parameters** page, verify that the correct client ID has been added to the **Relying parties** FastTab.</span></span> <span data-ttu-id="3eeca-413">また、正しい `https://retailstorescaleunit.retailserver.com` エントリが **サーバー リソース ID** クイック タブに追加されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-413">Additionally, verify that the correct `https://retailstorescaleunit.retailserver.com` entry has been added to the **Server resource IDs** FastTab.</span></span>
2. <span data-ttu-id="3eeca-414">Retail で、各小売店舗に生成されたすべてのクライアント ID が **Azure Active Directory アプリケーション** ページに存在することを確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-414">In Retail, verify that every client ID that was generated for each retail store exists on the **Azure Active Directory applications** page.</span></span>
3. <span data-ttu-id="3eeca-415">Retail の**チャネル プロファイル** ページで、URL が正しいことを確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-415">In Retail, on the **Channel profile** page, verify that the URLs are correct.</span></span> <span data-ttu-id="3eeca-416">(つまり、各 URL のコンピュータ名が正しいこと、URL が正しく書式設定されていることなどを確認します。)</span><span class="sxs-lookup"><span data-stu-id="3eeca-416">(In other words, verify that the computer name in each URL is correct, the URL is correctly formatted, and so on.)</span></span>
4. <span data-ttu-id="3eeca-417">Retail の**チャネル データベース** ページで、新しいチャネル データベースに完全同期が正しく発生したことを確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-417">In Retail, on the **Channel database** page, verify that full synchronization correctly occurred for the new channel database.</span></span>
5. <span data-ttu-id="3eeca-418">新しいチャネル データベースを使用するように小売店舗が正しく構成されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-418">Verify that the retail store is correctly configured to use the new channel database.</span></span>

### <a name="uninstall-retail-store-system"></a><span data-ttu-id="3eeca-419">Retail Store システムのアンインストール</span><span class="sxs-lookup"><span data-stu-id="3eeca-419">Uninstall Retail Store system</span></span>

<span data-ttu-id="3eeca-420">Microsoft Windows でコントロール パネルを使用して Retail Store システムをアンインストールします。</span><span class="sxs-lookup"><span data-stu-id="3eeca-420">Use Control Panel in Microsoft Windows to uninstall Retail Store system.</span></span>

1. <span data-ttu-id="3eeca-421">Windows ロゴ キーを押し、検索ボックスに**コントロール パネル**と入力します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-421">Press the Windows logo key, and then enter **Control Panel** in the search box.</span></span> <span data-ttu-id="3eeca-422">検索結果で、**コントロール パネル**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-422">In the search results, select **Control Panel**.</span></span>
2. <span data-ttu-id="3eeca-423">コントロール パネルで、**プログラム** &gt; **プログラムのアンインストール**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-423">In Control Panel, select **Programs** &gt; **Uninstall a program**.</span></span>
3. <span data-ttu-id="3eeca-424">**プログラムと機能**ウィンドウで、**Microsoft Dynamics 365 for Retail ストア システム**を選択してから、プログラムの一覧で**アンインストール**を選択します。</span><span class="sxs-lookup"><span data-stu-id="3eeca-424">In the **Programs and Features** window, select **Microsoft Dynamics 365 for Retail Store system**, and then, above the list of programs, select **Uninstall**.</span></span>
4. <span data-ttu-id="3eeca-425">アンインストールがプログラムの削除を完了するまで待ちます。</span><span class="sxs-lookup"><span data-stu-id="3eeca-425">Wait for the uninstaller to finish removing the program.</span></span>

