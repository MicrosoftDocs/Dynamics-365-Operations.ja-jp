---
title: Retail ソフトウェア開発キット (SDK)
description: このトピックでは、Retail SDK に関する一般情報を提供します。 Retail SDK は、小売クライアントをカスタマイズするために使用できる、コード、コード サンプル、テンプレート、およびツールが含まれています。
author: RobinARH
manager: AnnBe
ms.date: 10/16/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Developer
ms.reviewer: rhaertle
ms.search.scope: Operations, Retail
ms.custom: 17771
ms.assetid: c54d34a5-32e2-4d0d-a1c2-4a9940d95ade
ms.search.region: Global
ms.author: sijoshi
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: c40747d9cdc642ef28e36876bc39a00c5b85f5b8
ms.sourcegitcommit: 27a98a7a0f1d2623f5236a88066f483def30889c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/01/2019
ms.locfileid: "1833087"
---
# <a name="retail-software-development-kit-sdk"></a><span data-ttu-id="af79f-104">Retail ソフトウェア開発キット (SDK)</span><span class="sxs-lookup"><span data-stu-id="af79f-104">Retail software development kit (SDK)</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="af79f-105">このトピックでは、Retail SDK に関する一般情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="af79f-105">This topic provides general information about the Retail SDK.</span></span> <span data-ttu-id="af79f-106">Retail SDK は、小売クライアントをカスタマイズするために使用できる、コード、コード サンプル、テンプレート、およびツールが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-106">The Retail SDK includes code, code samples, templates, and tools that you can use to customize retail functionality.</span></span>

## <a name="overview"></a><span data-ttu-id="af79f-107">概要</span><span class="sxs-lookup"><span data-stu-id="af79f-107">Overview</span></span>

<span data-ttu-id="af79f-108">Retail ソフトウェア開発キット (SDK) は、新規小売機能を追加するか既存の小売機能をカスタマイズするために使用できる、コード、コード サンプル、テンプレート、およびツールが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-108">The Retail software development kit (SDK) includes code, code samples, templates, and tools that you can use to add new or customize existing retail functionality.</span></span> <span data-ttu-id="af79f-109">SDK は、迅速な開発、完全な MSBuild 統合、パッケージの生成、およびコード分離をサポートします。</span><span class="sxs-lookup"><span data-stu-id="af79f-109">The SDK supports rapid development, full MSBuild integration, package generation, and code separation.</span></span>

> [!NOTE]
> <span data-ttu-id="af79f-110">Retail SDK では、TLS (トランスポート層セキュリティ) 1.2 標準がサポートされています。Retail SDK を使用して構築されたカスタマイズはすべて、TLS 1.2 標準に準拠する必要があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-110">The Retail SDK supports TLS (Transport Layer Security) 1.2 standard, any customization build using the Retail SDK should follow TLS 1.2 standard.</span></span>

### <a name="download-the-retail-sdk"></a><span data-ttu-id="af79f-111">Retail SDK をダウンロード</span><span class="sxs-lookup"><span data-stu-id="af79f-111">Download the Retail SDK</span></span>

<span data-ttu-id="af79f-112">Retail SDK は、開発環境と、Retail SDK フォルダーにある修正プログラム パッケージで使用できます。</span><span class="sxs-lookup"><span data-stu-id="af79f-112">The Retail SDK is available in development environments, and in hotfix packages in a Retail SDK folder.</span></span> <span data-ttu-id="af79f-113">詳細については、「」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="af79f-113">For more information see:</span></span>

- <span data-ttu-id="af79f-114">開発インスタンスから SDK を取得すると、構成および使用の準備がすぐに整います。</span><span class="sxs-lookup"><span data-stu-id="af79f-114">If you get the SDK from a development instance, it is immediately ready for configuration and use.</span></span> <span data-ttu-id="af79f-115">詳細については、「[アクセス インスタンス](../../../dev-itpro/dev-tools/access-instances.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="af79f-115">For more information, see [Access instances](../../../dev-itpro/dev-tools/access-instances.md).</span></span> 
- <span data-ttu-id="af79f-116">修正プログラムから SDK を取得する場合は、修正プログラムのパッケージでは圧縮フォルダとして含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-116">If you get the SDK from a hotfix, it is included in the hotfix package as a zipped folder.</span></span> <span data-ttu-id="af79f-117">Retail 修正プログラムは、累積的であり、その他のすべての修正プログラムが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-117">Retail hotfixes are cumulative and includes all other fixes.</span></span> 

<span data-ttu-id="af79f-118">Visual Studio Online などのソース管理システムに SDK を配置することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="af79f-118">We recommend that you put the SDK in a source control system such as Visual Studio Online.</span></span>

### <a name="rapid-development"></a><span data-ttu-id="af79f-119">高速開発</span><span class="sxs-lookup"><span data-stu-id="af79f-119">Rapid development</span></span>

<span data-ttu-id="af79f-120">Retail SDK の主な焦点は、カスタマイズを効率的かつ正しく作成するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="af79f-120">The main focus of the Retail SDK is to help you write customizations efficiently and correctly.</span></span> <span data-ttu-id="af79f-121">SDK を使用すると、Microsoft Visual Studio の F5 機能 (実行とデバッグ) を使用して単一コンピューター デモ環境で直接アプリケーションを実行できます。</span><span class="sxs-lookup"><span data-stu-id="af79f-121">The SDK lets you run applications directly in a single-computer demo environment by using the F5 functionality (run and debug) in Microsoft Visual Studio.</span></span> <span data-ttu-id="af79f-122">すべての必要な "展開処理" が行われます。</span><span class="sxs-lookup"><span data-stu-id="af79f-122">All the required "deployment chores" are done for you.</span></span> <span data-ttu-id="af79f-123">したがって、ファイルをコピーする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="af79f-123">Therefore, you don't have to copy any files.</span></span>

### <a name="full-msbuild-integration"></a><span data-ttu-id="af79f-124">完全な MSBuild 統合</span><span class="sxs-lookup"><span data-stu-id="af79f-124">Full MSBuild integration</span></span>

<span data-ttu-id="af79f-125">Retail SDK は、ビルド システムです。</span><span class="sxs-lookup"><span data-stu-id="af79f-125">The Retail SDK is a build system.</span></span> <span data-ttu-id="af79f-126">SDK のルートからの単純な MSBuild コマンドは、すべてを構築します。</span><span class="sxs-lookup"><span data-stu-id="af79f-126">A simple MSBuild command from the root of the SDK builds everything.</span></span> <span data-ttu-id="af79f-127">この動作により、どのようにしてどこからビルドするかについての推測がなくなり、整合性と再現性が保証されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-127">This behavior eliminates guesswork about how and where to build from, and guarantees consistency and reproducibility.</span></span> <span data-ttu-id="af79f-128">したがって、Retail SDK は、Microsoft Visual Studio Online などのアプリケーション ライフサイクル管理 (ALM) システムと共に簡単に使用できます。</span><span class="sxs-lookup"><span data-stu-id="af79f-128">Therefore, the Retail SDK can easily be used together with any application lifecycle management (ALM) system, even Microsoft Visual Studio Online.</span></span> <span data-ttu-id="af79f-129">この統合には、ビルドの自動化が含まれます。</span><span class="sxs-lookup"><span data-stu-id="af79f-129">This integration includes automation of the build.</span></span>

### <a name="creation-of-final-update-packages-and-better-and-explicit-control-over-the-customization"></a><span data-ttu-id="af79f-130">最終更新パッケージの作成、およびカスタマイズのより明示的なコントロール</span><span class="sxs-lookup"><span data-stu-id="af79f-130">Creation of final update packages, and better and explicit control over the customization</span></span>

<span data-ttu-id="af79f-131">Retail SDK には、サービスを配置するために必要なすべてのものが含まれる新しいパッケージを生成するツールが含まれます。</span><span class="sxs-lookup"><span data-stu-id="af79f-131">The Retail SDK includes tools that generate new packages that include everything that is required in order to deploy a service.</span></span> <span data-ttu-id="af79f-132">たとえば、Commerce Runtime が新しいカスタム サービス ダイナミックリンク ライブラリ (DLL) で拡張された場合、SDK は自動で新しい DLL をすべての適切なパッケージ (RetailServer および MPOSOffline) に追加します。</span><span class="sxs-lookup"><span data-stu-id="af79f-132">For example, if the commerce runtime is extended with a new custom service dynamic-link library (DLL), the SDK automatically includes the new DLL in all appropriate packages (RetailServer and MPOSOffline).</span></span> <span data-ttu-id="af79f-133">または、データベースが拡張された場合、アップグレード スクリプトは自動的に RetailServer と MPOSOffline パッケージの両方に追加されます。これらは、チャンネル データベースの更新を実行する必要がある (潜在的に) パッケージだからです。</span><span class="sxs-lookup"><span data-stu-id="af79f-133">Or, if the database is extended, the upgrade script is automatically included in both RetailServer and MPOSOffline packages, because these are the packages that must (potentially) run the channel database update.</span></span> <span data-ttu-id="af79f-134">共有されているファイルは、SDK に 1 度だけ存在します。</span><span class="sxs-lookup"><span data-stu-id="af79f-134">Files that are shared exist only one time in the SDK.</span></span> <span data-ttu-id="af79f-135">パッケージ プロジェクトは、パッケージの正しいファイルを引き出すように設定されています。</span><span class="sxs-lookup"><span data-stu-id="af79f-135">The packaging projects are set up in such a way that they pull in the right files for the package.</span></span> <span data-ttu-id="af79f-136">したがって、commerceruntime.config ファイルは 1 か所のみで編集します。</span><span class="sxs-lookup"><span data-stu-id="af79f-136">Therefore, you edit a commerceruntime.config file in only one place.</span></span> <span data-ttu-id="af79f-137">これらのファイルにカスタマイズが必要な場合はほとんどありませんが、展開関連のスクリプト ファイルにも同じことが適用されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-137">The same applies for deployment-related script files, even though these files rarely require customization.</span></span>

### <a name="better-code-separation"></a><span data-ttu-id="af79f-138">より良いコードの分離</span><span class="sxs-lookup"><span data-stu-id="af79f-138">Better code separation</span></span>

<span data-ttu-id="af79f-139">Retail SDK の更新が必要な場合、潜在的なコード結合が必要です。</span><span class="sxs-lookup"><span data-stu-id="af79f-139">If the Retail SDK needs to be updated, a potential code merge is required.</span></span> <span data-ttu-id="af79f-140">この要件は、既存のコード サンプルまたは変更されているテンプレートに適用されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-140">This requirement applies to existing code samples or templates that have been changed.</span></span> <span data-ttu-id="af79f-141">SDK の実装とフォルダー構造のいくつかの機能は、サンプル コードからカスタム コードをより簡単に分離するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="af79f-141">Some features in the implementation and in the folder structure of the SDK help to provide an easy way to separate customized code from sample code.</span></span> <span data-ttu-id="af79f-142">将来のリリースでコード分離のその他の機能強化が追加される予定です。</span><span class="sxs-lookup"><span data-stu-id="af79f-142">You can expect to see additional improvements to code separation in future releases.</span></span>

### <a name="real-world-implementation-samples"></a><span data-ttu-id="af79f-143">実際の実装サンプル</span><span class="sxs-lookup"><span data-stu-id="af79f-143">Real-world implementation samples</span></span>

<span data-ttu-id="af79f-144">一部の Retail 実装のソース コードに加えて、Retail SDK には特定のシナリオを実装する方法を示すサンプル コードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-144">In addition to the source code of some of the Retail implementations, the Retail SDK includes sample code that illustrates how certain scenarios should be implemented.</span></span>

## <a name="retail-sdk-deep-dive"></a><span data-ttu-id="af79f-145">Retail SDK の詳細な情報</span><span class="sxs-lookup"><span data-stu-id="af79f-145">Retail SDK deep dive</span></span>

### <a name="prerequisites"></a><span data-ttu-id="af79f-146">前提条件</span><span class="sxs-lookup"><span data-stu-id="af79f-146">Prerequisites</span></span>

- <span data-ttu-id="af79f-147">カスタマイズの**コード**を書いたり**ビルド**するには、次のツールが必要です。</span><span class="sxs-lookup"><span data-stu-id="af79f-147">To **code** or **build** your customization, you must have the following tools:</span></span>

    - <span data-ttu-id="af79f-148">Typescript 1.5 付き Microsoft Visual Studio 2015 (LCS 開発者トポロジが許容可能)</span><span class="sxs-lookup"><span data-stu-id="af79f-148">Microsoft Visual Studio 2015 with Typescript 1.5 (an LCS developer topology is acceptable)</span></span>
    - <span data-ttu-id="af79f-149">ASP.NET MVC 4.0 (LCS 開発者トポロジ受入可能) (店舗でのみ必須)</span><span class="sxs-lookup"><span data-stu-id="af79f-149">ASP.NET MVC 4.0 (an LCS developer topology acceptable) (required only by StoreFront)</span></span>
    - <span data-ttu-id="af79f-150">150 MB 以上の使用可能なディスク領域 (LCS 開発者トポロジを受入可能)</span><span class="sxs-lookup"><span data-stu-id="af79f-150">A minimum of 150 MB of available disk space (an LCS developer topology is acceptable)</span></span>

    <span data-ttu-id="af79f-151">この要件のリストは非常に短く、開発者は簡単なラップトップで生産性を高めることができます。</span><span class="sxs-lookup"><span data-stu-id="af79f-151">This list of requirements is very short and lets developers be productive on simple laptops.</span></span> <span data-ttu-id="af79f-152">検証ユーティリティの前提条件はなくなりました。</span><span class="sxs-lookup"><span data-stu-id="af79f-152">There is no longer a prerequisite for a validation utility.</span></span>

- <span data-ttu-id="af79f-153">カスタマイズを**実行**するには、Retail を実行するための通常の前提条件が適用されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-153">To **run** your customization, the normal prerequisites to run Retail apply.</span></span> <span data-ttu-id="af79f-154">開発時に、シングル ボックスの開発者トポロジ (LCS クラウド ホストまたはダウンロードのいずれか) でカスタマイズを実行することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="af79f-154">We recommend that you run the customizations on a single-box developer topology (either LCS cloud-hosted or downloaded) during development.</span></span>

### <a name="retail-sdk-contents"></a><span data-ttu-id="af79f-155">Retail SDK のコンテンツ</span><span class="sxs-lookup"><span data-stu-id="af79f-155">Retail SDK contents</span></span>

<span data-ttu-id="af79f-156">次のフォルダーとファイルは、トップ レベルの Retail SDK の一部です。</span><span class="sxs-lookup"><span data-stu-id="af79f-156">The following folders and files are part of the Retail SDK at the top level.</span></span>

> [!NOTE]
> <span data-ttu-id="af79f-157">上記のフォルダー構造と説明は、Retail の 2017 年 7 月のアップデート (7.2) にのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-157">The folder structure and description above are applicable only for the Retail July 2017 update (7.2).</span></span> <span data-ttu-id="af79f-158">Retail 7.3 のリリースで、Retail プロキシおよびハードウェア ステーション プロジェクトが含まれました。</span><span class="sxs-lookup"><span data-stu-id="af79f-158">In the Retail 7.3 release, we sealed the Retail proxy and Hardware station projects.</span></span> <span data-ttu-id="af79f-159">したがって、Retail 7.3 リリースでは、ハードウェア ステーションと小売プロキシのサンプルのみが表示されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-159">Therefore, in the Retail 7.3 release, you will see only samples for Hardware station and retail proxy.</span></span> <span data-ttu-id="af79f-160">プロキシは、新しい拡張性パターンに従って作成できます。</span><span class="sxs-lookup"><span data-stu-id="af79f-160">The proxy can be generated by following the new extensibility pattern.</span></span>

<table>
<thead>
<tr>
<th><span data-ttu-id="af79f-161">フォルダー/ファイル</span><span class="sxs-lookup"><span data-stu-id="af79f-161">Folder/file</span></span></th>
<th><span data-ttu-id="af79f-162">説明</span><span class="sxs-lookup"><span data-stu-id="af79f-162">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span data-ttu-id="af79f-163">資産</span><span class="sxs-lookup"><span data-stu-id="af79f-163">Assets</span></span></td>
<td><span data-ttu-id="af79f-164">スクリプトや構成ファイル (commerceRuntime.config、dllhost.exe.config など) などの共有アイテムが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-164">Contains shared items such as scripts and configuration files (commerceRuntime.config, dllhost.exe.config, and so on).</span></span> <span data-ttu-id="af79f-165">コンフィギュレーション ファイルは、この場所でカスタマイズおよび編集する必要があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-165">The configuration files should be customized and edited in this location.</span></span> <span data-ttu-id="af79f-166">作成されたワークスペースを使用するプロジェクトで、ワークスペースが適切にピッキングされます。</span><span class="sxs-lookup"><span data-stu-id="af79f-166">The projects that use them will pick them up appropriately.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-167">BuildTools</span><span class="sxs-lookup"><span data-stu-id="af79f-167">BuildTools</span></span></td>
<td><span data-ttu-id="af79f-168">MSBuild およびグローバル構成に関連するものがすべて含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-168">Contains anything that is related to the MSBuild and global configurations.</span></span> <span data-ttu-id="af79f-169">Customization.settings は、ビルド システムを設定するために使用する主要なファイルです。</span><span class="sxs-lookup"><span data-stu-id="af79f-169">Customization.settings is the main file that is used to set up the build system.</span></span> <span data-ttu-id="af79f-170">次のリストは、このファイルが制御し、カスタマイザーが変更する可能性が高い項目を示しています。</span><span class="sxs-lookup"><span data-stu-id="af79f-170">The following list shows the items that this file controls and that customizers will likely change:</span></span>
<ul>
<li><span data-ttu-id="af79f-171">すべてのビルド済みアセンブリ (AssemblyNamePrefix) の接頭語</span><span class="sxs-lookup"><span data-stu-id="af79f-171">Prefix for all built assemblies (AssemblyNamePrefix)</span></span></li>
<li><span data-ttu-id="af79f-172">すべてのバイナリ (CustomAssemblyVersion) のアセンブリ バージョン</span><span class="sxs-lookup"><span data-stu-id="af79f-172">Assembly version for all binaries (CustomAssemblyVersion)</span></span></li>
<li><span data-ttu-id="af79f-173">すべてのバイナリ (CustomVersion) のファイル バージョン</span><span class="sxs-lookup"><span data-stu-id="af79f-173">File version for all binaries (CustomVersion)</span></span></li>
<li><span data-ttu-id="af79f-174">カスタマイズの名前 (CustomName)</span><span class="sxs-lookup"><span data-stu-id="af79f-174">Name of the customization (CustomName)</span></span></li>
<li><span data-ttu-id="af79f-175">カスタマイズの説明 (CustomDescription)</span><span class="sxs-lookup"><span data-stu-id="af79f-175">Description of the customization (CustomDescription)</span></span></li>
<li><span data-ttu-id="af79f-176">発行元 (CustomPublisher)</span><span class="sxs-lookup"><span data-stu-id="af79f-176">Publisher (CustomPublisher)</span></span></li>
<li><span data-ttu-id="af79f-177">コード署名 (SignAssembly、AssemblyOriginatorKeyFile)</span><span class="sxs-lookup"><span data-stu-id="af79f-177">Code signing (SignAssembly, AssemblyOriginatorKeyFile)</span></span></li>
<li><span data-ttu-id="af79f-178">Modern POS の証明書パス (ModernPOSPackageCertificateKeyFile)</span><span class="sxs-lookup"><span data-stu-id="af79f-178">Modern POS certificate path (ModernPOSPackageCertificateKeyFile)</span></span></li>
<li><span data-ttu-id="af79f-179">カスタマイズに関連付けられているファイル (RetailServerLibraryPathForProxyGeneration、ISV\_\*)</span><span class="sxs-lookup"><span data-stu-id="af79f-179">Files that are related to the customization (RetailServerLibraryPathForProxyGeneration, ISV\_\*)</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="af79f-180">CommerceRuntime</span><span class="sxs-lookup"><span data-stu-id="af79f-180">CommerceRuntime</span></span></td>
<td><span data-ttu-id="af79f-181">Visual Studio ソリューション ファイル (CommerceRuntime.sln) および関連する C# プロジェクト (CommerceRuntime、PricingEngine) が含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-181">Contains a Visual Studio solution file (CommerceRuntime.sln) and related C# projects (CommerceRuntime, PricingEngine).</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-182"> データベース</span><span class="sxs-lookup"><span data-stu-id="af79f-182">Database</span></span></td>
<td><span data-ttu-id="af79f-183">共有データベース スクリプトが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-183">Contains shared database scripts.</span></span> <span data-ttu-id="af79f-184">CommerceRuntimeScripts\_Create.sql のすべてのスクリプトは、新規の基礎データベース作成にのみ使用されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-184">The full script CommerceRuntimeScripts\_Create.sql is used only to create a new base database.</span></span> <span data-ttu-id="af79f-185">アップグレード フォルダーには、Microsoft とカスタマイザーの両方からの増分スクリプトが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-185">The Upgrade folder includes incremental scripts from both Microsoft and the customizer.</span></span> <span data-ttu-id="af79f-186">配置中にデータベースまたはデータベースのバージョンが存在すると、完全スクリプトまたは増分スクリプトの実行をコントロールします。</span><span class="sxs-lookup"><span data-stu-id="af79f-186">The existence of the database or the version in the database during a deployment controls which full or incremental scripts will be run.</span></span> <span data-ttu-id="af79f-187">まだ実行されていないスクリプトのみが実行されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-187">Only scripts that haven't been run before will be run.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-188">ハードウェア ステーション</span><span class="sxs-lookup"><span data-stu-id="af79f-188">HardwareStation</span></span></td>
<td><span data-ttu-id="af79f-189">Visual Studio ソリューション ファイル (HardwareStation.sln) および関連する C# プロジェクト (HardwareStation ライブラリと Webhost) が含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-189">Contains a Visual Studio solution file (HardwareStation.sln) and related C# projects (HardwareStation libraries and Webhost).</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-190">OnlineStore</span><span class="sxs-lookup"><span data-stu-id="af79f-190">OnlineStore</span></span></td>
<td><span data-ttu-id="af79f-191">Visual Studio ソリューション ファイル (OnlineStore.sln) および関連する C# プロジェクト (Ecommerce SDK) が含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-191">Contains a Visual Studio solution file (OnlineStore.sln) and related C# projects (Ecommerce SDK).</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-192">パッケージ</span><span class="sxs-lookup"><span data-stu-id="af79f-192">Packages</span></span></td>
<td><span data-ttu-id="af79f-193">パッケージ作成用の複数のプロジェクトが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-193">Contains multiple projects for package creation.</span></span> <span data-ttu-id="af79f-194">これらのパッケージは、LCS を介して配布するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-194">These packages are used to deploy via LCS.</span></span> <span data-ttu-id="af79f-195">これらのパッケージには、最終的な web.config ファイルも含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-195">These packages also include the final web.config files.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-196">PaymentExternals</span><span class="sxs-lookup"><span data-stu-id="af79f-196">PaymentExternals</span></span></td>
<td><span data-ttu-id="af79f-197">支払に関連するすべてのアセンブリが含まれます。</span><span class="sxs-lookup"><span data-stu-id="af79f-197">Contains all the payment-related assemblies.</span></span> <span data-ttu-id="af79f-198">次の 3 つのサブフォルダでは、さまざまな支払ファイルを保持します。</span><span class="sxs-lookup"><span data-stu-id="af79f-198">The following three subfolders hold various payment files:</span></span>
<ul>
<li><span data-ttu-id="af79f-199"><strong>IPaymentProcessor Assemblies</strong> – このフォルダーには、IPaymentProcessor インターフェイスを実装するアセンブリとその依存アセンブリが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-199"><strong>IPaymentProcessor Assemblies</strong> – This folder contains the assembly that implements the IPaymentProcessor interface and its dependent assemblies.</span></span></li>
<li><span data-ttu-id="af79f-200"><strong>支払 Web ファイル</strong> – このフォルダには、支払受け入れページを有効にするために必要なコールバック HTML、JavaScript、または CSS ファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-200"><strong>Payment Web Files</strong> – This folder contains the callback HTML, JavaScript, or CSS files that are required in order to enable the payment accepting page.</span></span> <span data-ttu-id="af79f-201">支払い受付ページで求められる場合、支払コネクタ開発者がこれらの Web ファイルを提供します。</span><span class="sxs-lookup"><span data-stu-id="af79f-201">Payment connector developers will provide these web files if their payment accepting page requires them.</span></span></li>
<li><span data-ttu-id="af79f-202"><strong>IPaymentDevice Assemblies</strong> – このフォルダーには、IPaymentDevice インターフェイスを実装するアセンブリと支払要求ハンドラー、およびインターフェイス依存アセンブリが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-202"><strong>IPaymentDevice Assemblies</strong> – This folder contains the assembly that implements the IPaymentDevice interface and payment request handlers, and the interface's dependent assemblies.</span></span> <span data-ttu-id="af79f-203">これらのアセンブリは、支払のターミナル デバイスと通信するために、Retail ハードウェア ステーションおよび Retail Modern Point of Sale (モダン POS) で使用されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-203">These assemblies are used in Retail Hardware station and Retail Modern Point of Sale (Modern POS) to communicate with payment terminal devices.</span></span>
<p><span data-ttu-id="af79f-204">さらに支払コネクタに関連するすべての拡張子は、配置パッケージを作成する前に、フォルダーに配置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-204">Additionally, all extensions that are related to payment connectors should be put in this folder before you create the deployment packages.</span></span></p></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="af79f-205">支払利息</span><span class="sxs-lookup"><span data-stu-id="af79f-205">Payments</span></span></td>
<td><span data-ttu-id="af79f-206">Visual Studio ソリューション ファイル (PaymentSDK.sln) および関連する C# プロジェクト (PaymentSDK コネクタ、サンプル、機能テスト) が含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-206">Contains a Visual Studio solution file (PaymentSDK.sln) and related C# projects (PaymentSDK connectors, samples and functional test).</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-207">POS</span><span class="sxs-lookup"><span data-stu-id="af79f-207">POS</span></span></td>
<td><span data-ttu-id="af79f-208">POS 用のファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-208">Contains files for POS:</span></span>
<ul>
<li><span data-ttu-id="af79f-209"><strong>CloudPos.sln</strong></span><span class="sxs-lookup"><span data-stu-id="af79f-209"><strong>CloudPos.sln</strong></span></span></li>
<li><span data-ttu-id="af79f-210"><strong>ModernPos.sln</strong></span><span class="sxs-lookup"><span data-stu-id="af79f-210"><strong>ModernPos.sln</strong></span></span></li>
<li><span data-ttu-id="af79f-211"><strong>フォルダ コア</strong> – 低レベルで共有されるPOS コード</span><span class="sxs-lookup"><span data-stu-id="af79f-211"><strong>Folder Core</strong> – Low-level shared POS code</span></span></li>
<li><span data-ttu-id="af79f-212"><strong>フォルダ ビューモデル</strong> – 共有される POS ビュー モデル</span><span class="sxs-lookup"><span data-stu-id="af79f-212"><strong>Folder ViewModels</strong> – Shared POS view models</span></span></li>
<li><span data-ttu-id="af79f-213"><strong>フォルダ シェアアプリ</strong> – 共有される POS ビュー</span><span class="sxs-lookup"><span data-stu-id="af79f-213"><strong>Folder SharedApp</strong> – Shared POS views</span></span></li>
<li><span data-ttu-id="af79f-214"><strong>フォルダ アプリ</strong> – Modern POS– 特定のビューおよびその他の品目</span><span class="sxs-lookup"><span data-stu-id="af79f-214"><strong>Folder App</strong> – Modern POS–specific views and other items</span></span></li>
<li><span data-ttu-id="af79f-215"><strong>フォルダ ウェブ</strong> – クラウド POS– 特定のビューおよびその他の品目</span><span class="sxs-lookup"><span data-stu-id="af79f-215"><strong>Folder Web</strong> – Cloud POS–specific views and other items</span></span></li>
</ul></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-216">プロキシ</span><span class="sxs-lookup"><span data-stu-id="af79f-216">Proxies</span></span></td>
<td><span data-ttu-id="af79f-217">他のユーザーが参照する 2 つの Visual Studio プロジェクトが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-217">Contains two Visual Studio projects that are referenced by others.</span></span> <span data-ttu-id="af79f-218">これらのプロジェクトには、Retail Server のプロキシ クライアントとして機能するインターフェイスと生成されたコードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-218">These projects contain interfaces and generated code that serves as a proxy client of Retail Server.</span></span> <span data-ttu-id="af79f-219">Proxies.Retail.TypeScript は TypeScript プロキシで、RetailProxy は C# プロキシです。</span><span class="sxs-lookup"><span data-stu-id="af79f-219">Proxies.Retail.TypeScript is the TypeScript proxy, and RetailProxy is the C# proxy.</span></span> <span data-ttu-id="af79f-220">Modern POS/Cloud POS と ECommerce SDK で使用されています。</span><span class="sxs-lookup"><span data-stu-id="af79f-220">They are used by Modern POS/Cloud POS and the ECommerce SDK.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-221">参照</span><span class="sxs-lookup"><span data-stu-id="af79f-221">References</span></span></td>
<td><span data-ttu-id="af79f-222">すべてのバイナリが存在する単一の場所。</span><span class="sxs-lookup"><span data-stu-id="af79f-222">The single place where all binaries live.</span></span> <span data-ttu-id="af79f-223">この場所は、プロジェクトのバイナリ参照を解決するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-223">The location is used to resolve any project's binary references.</span></span> <span data-ttu-id="af79f-224">ファイルのリストには、外部の非 Retail バイナリと Microsoft Retail バイナリが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-224">The list of files includes external non-Retail binaries and also Microsoft Retail binaries.</span></span> <span data-ttu-id="af79f-225">また、このディレクトリは、Retail SDK からビルドされているバイナリのグローバルな格納場所として使用されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-225">Additionally, this directory serves as the global drop location for any binaries that are built from the Retail SDK.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-226">SampleExtensions</span><span class="sxs-lookup"><span data-stu-id="af79f-226">SampleExtensions</span></span></td>
<td><span data-ttu-id="af79f-227">サンプル拡張子を含みます。</span><span class="sxs-lookup"><span data-stu-id="af79f-227">Contains sample extensions.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-228">dirs.proj</span><span class="sxs-lookup"><span data-stu-id="af79f-228">dirs.proj</span></span></td>
<td><span data-ttu-id="af79f-229">ビルド順序を指示するトップレベルの MSBuild ファイル。</span><span class="sxs-lookup"><span data-stu-id="af79f-229">The top-level MSBuild file that directs the build order.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="af79f-230">Microsoft-version.txt</span><span class="sxs-lookup"><span data-stu-id="af79f-230">Microsoft-version.txt</span></span></td>
<td><span data-ttu-id="af79f-231">Retail SDK の Microsoft のバージョンを含むファイル。</span><span class="sxs-lookup"><span data-stu-id="af79f-231">A file that includes the Microsoft version of the Retail SDK.</span></span> <span data-ttu-id="af79f-232">このファイルを編集しないでください。</span><span class="sxs-lookup"><span data-stu-id="af79f-232">Don't edit this file.</span></span></td>
</tr>
</tbody>
</table>

<span data-ttu-id="af79f-233">SDK の C\# ソース コードは、Contoso 名前空間を使用します。</span><span class="sxs-lookup"><span data-stu-id="af79f-233">The C\# source code in the SDK uses the Contoso namespace.</span></span> <span data-ttu-id="af79f-234">したがって、Microsoft が Microsoft.Dynamics を使用するため、Microsoft の型と独自の型を区別する方が簡単です。</span><span class="sxs-lookup"><span data-stu-id="af79f-234">Therefore, it's easier to distinguish Microsoft types and your own types, because Microsoft uses Microsoft.Dynamics.</span></span> <span data-ttu-id="af79f-235">Microsoft バイナリからタイプを参照している場合は、Microsoft.Dynamics を参照します。</span><span class="sxs-lookup"><span data-stu-id="af79f-235">If you're referencing a type from the Microsoft binary, reference it by using Microsoft.Dynamics.</span></span> <span data-ttu-id="af79f-236">そのようにして、Retail SDK からではなく、参照先のバイナリからであることがわかります。</span><span class="sxs-lookup"><span data-stu-id="af79f-236">That way, you'll know that it's not from the Retail SDK but from a referenced binary.</span></span> 

<span data-ttu-id="af79f-237">[![RetailSDK02](./media/retailsdk02.png)](./media/retailsdk02.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-237">[![RetailSDK02](./media/retailsdk02.png)](./media/retailsdk02.png)</span></span>

### <a name="dependencies-build-order-and-full-build"></a><span data-ttu-id="af79f-238">相互関係、ビルド順序、およびフル ビルド</span><span class="sxs-lookup"><span data-stu-id="af79f-238">Dependencies, build order, and full build</span></span>

<span data-ttu-id="af79f-239">次の図は、Retail SDK 内の高レベルの論理的な依存関係ツリーを示しています。</span><span class="sxs-lookup"><span data-stu-id="af79f-239">The following illustration shows a high-level logical dependency tree within the Retail SDK.</span></span> <span data-ttu-id="af79f-240">すべての Microsoft ファイルまたはアセットへの参照は示されません。</span><span class="sxs-lookup"><span data-stu-id="af79f-240">It doesn't show the references to all Microsoft files or assets.</span></span> <span data-ttu-id="af79f-241">これらを確認するには、Visual Studio プロジェクトとソリューション ファイルを詳しく見てください。</span><span class="sxs-lookup"><span data-stu-id="af79f-241">To see these, look at the Visual Studio project and solution files in more detail.</span></span> 

<span data-ttu-id="af79f-242">[![RetailSDK03](./media/retailsdk03.png)](./media/retailsdk03.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-242">[![RetailSDK03](./media/retailsdk03.png)](./media/retailsdk03.png)</span></span> 

<span data-ttu-id="af79f-243">次の重要な点を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="af79f-243">Consider the following important points:</span></span>

- <span data-ttu-id="af79f-244">RetailServer API は、自動的に生成されたクライアント プロキシ コードを使用していくつかのプロジェクトによって消費されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-244">The RetailServer API is consumed by a few projects by means of automatically generated client proxy code.</span></span> <span data-ttu-id="af79f-245">この動作により、より迅速な開発が可能になり、エラーやバグの機会が減ります。 </span><span class="sxs-lookup"><span data-stu-id="af79f-245">This behavior allows for more rapid development, and reduces opportunities for errors and bugs.</span></span> <span data-ttu-id="af79f-246">既定では、Retail SDK は公式の Microsoft DLL を使用してクライアント コードを生成します。</span><span class="sxs-lookup"><span data-stu-id="af79f-246">By default, the Retail SDK uses the official Microsoft DLL to generate the client code.</span></span> <span data-ttu-id="af79f-247">カスタマイザーは独自の DLL (Customization.settings 内) に切り替えることができ、カスタマイズされた RetailServer API 用のプロキシ コードを自動的に生成することができます。</span><span class="sxs-lookup"><span data-stu-id="af79f-247">Customizers can switch to their own DLL (in Customization.settings) and therefore automatically generate the proxy code for their customized RetailServer API.</span></span> <span data-ttu-id="af79f-248">DLL を切り替えた後、開発者は、RetailProxy プロジェクト内のいくつかの実装を変更する必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-248">After switching the DLL, a developer might have to change some implementations inside the RetailProxy project.</span></span> <span data-ttu-id="af79f-249">その理由は、オフライン モードの Modern POS は Commerce Runtime と直接通信する必要があり、そのコードを実装する必要があるためです。</span><span class="sxs-lookup"><span data-stu-id="af79f-249">The reason is that Modern POS in offline mode must communicate directly with the commerce runtime, and that code must be implemented.</span></span> <span data-ttu-id="af79f-250">ただし、推測は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="af79f-250">However, no guesswork is required.</span></span> <span data-ttu-id="af79f-251">C\# コンパイラはこれを強制します。</span><span class="sxs-lookup"><span data-stu-id="af79f-251">The C\# compiler will force it.</span></span>
- <span data-ttu-id="af79f-252">パッケージ プロジェクトは、LCS で想定されている方法で配置パッケージを生成します。</span><span class="sxs-lookup"><span data-stu-id="af79f-252">The packaging projects generate the deployment packages in the way that LCS expects them.</span></span> <span data-ttu-id="af79f-253">既定では、これらのプロジェクトは Microsoft の資産 (カスタマイズされていない) とプロキシ DLL のみを出荷します。</span><span class="sxs-lookup"><span data-stu-id="af79f-253">By default, these projects will ship only the Microsoft assets (non-customized) and the proxy DLLs.</span></span> <span data-ttu-id="af79f-254">含まれるべきものは、Customization.settings で明示的に記名される必要があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-254">Anything else that should be included must be explicitly named in Customization.settings.</span></span> <span data-ttu-id="af79f-255">この動作は仕様です。</span><span class="sxs-lookup"><span data-stu-id="af79f-255">This behavior is by design.</span></span> <span data-ttu-id="af79f-256">これは配置されたカスタム コードを削減して、バイナリ パッチを許可します。</span><span class="sxs-lookup"><span data-stu-id="af79f-256">It reduces the deployed custom code and allows for binary patches.</span></span> <span data-ttu-id="af79f-257">たとえば、カスタマイズは、新しい CommerceRuntime サービスおよび新しい RetailServer コントローラーを追加します。</span><span class="sxs-lookup"><span data-stu-id="af79f-257">For example, a customization adds a new CommerceRuntime service and a new RetailServer controller.</span></span> <span data-ttu-id="af79f-258">この場合、2 つの新しい DLL はパッケージの内容に登録され、関連するすべての場所に自動的に含まれます。</span><span class="sxs-lookup"><span data-stu-id="af79f-258">In this case, two new DLLs are registered for inclusion in the packages and are automatically included in all relevant places.</span></span> <span data-ttu-id="af79f-259">パッケージには、SDK のすべての再コンパイルされたバイナリは **ありません**。</span><span class="sxs-lookup"><span data-stu-id="af79f-259">The packages will **not** have all recompiled binaries from the SDK.</span></span>
- <span data-ttu-id="af79f-260">すべてのプロジェクトを含む単一の Visual Studio ソリューションはありません。</span><span class="sxs-lookup"><span data-stu-id="af79f-260">There is no single Visual Studio solution that includes all projects.</span></span> <span data-ttu-id="af79f-261">さまざまな Visual Studio プロジェクト間にいくつかの結合があるため、複数のプロジェクトまたはソリューションを並べて開くことができ、変更後に適切なプロジェクトをコンパイルできます。</span><span class="sxs-lookup"><span data-stu-id="af79f-261">Because there are few couplings between the various Visual Studio projects, you can open multiple projects or solutions side by side, and can compile the appropriate project after a change.</span></span>
- <span data-ttu-id="af79f-262">すべてのコンポーネントをカスタマイズしなくても、最終的な配置パッケージを入手する最も簡単な方法は、Retail SDK 全体を構築することです。</span><span class="sxs-lookup"><span data-stu-id="af79f-262">Even if you didn't customize every component, the easiest way to get the final deployment packages is by building the whole Retail SDK.</span></span> <span data-ttu-id="af79f-263">これを行うには、**VS2015 の MSBuild コマンド プロンプト** ウィンドウを開き、**msbuild** (または非デバッグ バージョンでは、**msbuild /p:Configuration=Release**) を入力します。</span><span class="sxs-lookup"><span data-stu-id="af79f-263">To do this, open an **MSBuild Command Prompt for VS2015** window, and enter **msbuild** (or **msbuild /p:Configuration=Release** for a non-debug version).</span></span> 

<span data-ttu-id="af79f-264">[![RetailSDK04](./media/retailsdk04.png)](./media/retailsdk04.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-264">[![RetailSDK04](./media/retailsdk04.png)](./media/retailsdk04.png)</span></span>

<span data-ttu-id="af79f-265">このコマンドはすべてのプロジェクトをビルドします。</span><span class="sxs-lookup"><span data-stu-id="af79f-265">This command will build all projects.</span></span> <span data-ttu-id="af79f-266">この方法は、実装やコードのバグがないことを確認する優れた方法も提供します。 </span><span class="sxs-lookup"><span data-stu-id="af79f-266">This approach also provides a great way to verify that there are no implementation or code bugs.</span></span> <span data-ttu-id="af79f-267">バグがある場合は、ビルドが失敗し、コマンド プロンプト ウィンドウに失敗した内容が表示されます (この出力は Visual Studio の表示と似ています)。</span><span class="sxs-lookup"><span data-stu-id="af79f-267">If there are any bugs, the build will fail, and the Command Prompt window will show what failed (this output resembles what Visual Studio would show).</span></span> 

<span data-ttu-id="af79f-268">[![RetailSDK05](./media/retailsdk05.png)](./media/retailsdk05.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-268">[![RetailSDK05](./media/retailsdk05.png)](./media/retailsdk05.png)</span></span>

<span data-ttu-id="af79f-269">MSBuild の詳細なヘルプについては、 [https://msdn.microsoft.com/library/0k6kkbsd.aspx](https://msdn.microsoft.com/library/0k6kkbsd.aspx)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="af79f-269">For detailed help for MSBuild, see [https://msdn.microsoft.com/library/0k6kkbsd.aspx](https://msdn.microsoft.com/library/0k6kkbsd.aspx).</span></span> 

<span data-ttu-id="af79f-270">ビルドによって作成されるバイナリは、SDK リファレンス フォルダーに自動的にコピーされます。</span><span class="sxs-lookup"><span data-stu-id="af79f-270">The binaries that the build creates are automatically copied to the SDK's References folder.</span></span> <span data-ttu-id="af79f-271">References フォルダーには、その他のすべてのバイナリも含まれます。</span><span class="sxs-lookup"><span data-stu-id="af79f-271">The References folder also includes all the other binaries.</span></span> <span data-ttu-id="af79f-272">DLL には、すべて Customization.settings で定義できる名前 (この場合は「Contoso」) が接頭語にあるため上書きされないことに注意します。</span><span class="sxs-lookup"><span data-stu-id="af79f-272">Notice that no DLLs are overwritten, because they are all prefixed with a name (in this case, "Contoso") that you can define in Customization.settings.</span></span> 

<span data-ttu-id="af79f-273">[![RetailSDK06](./media/retailsdk06.png)](./media/retailsdk06.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-273">[![RetailSDK06](./media/retailsdk06.png)](./media/retailsdk06.png)</span></span>

### <a name="minimal-required-configuration"></a><span data-ttu-id="af79f-274">最小限必要なコンフィギュレーション</span><span class="sxs-lookup"><span data-stu-id="af79f-274">Minimal required configuration</span></span>

<span data-ttu-id="af79f-275">Retail SDK をすばやくビルドしたり、デモ マシンでデバッガーの POS を実行したいのですか。</span><span class="sxs-lookup"><span data-stu-id="af79f-275">Do you just want to quickly build the Retail SDK, or to run POS in the debugger on a demo machine?</span></span> <span data-ttu-id="af79f-276">Modern POS のみで、正しく構築するためのアプリ パッケージ署名証明書を作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-276">For Modern POS only, you must create an app package signing certificate in order to build correctly.</span></span> <span data-ttu-id="af79f-277">また、クラウド POS を使用することができます。</span><span class="sxs-lookup"><span data-stu-id="af79f-277">Alternatively, you can use Cloud POS.</span></span> <span data-ttu-id="af79f-278">[https://msdn.microsoft.com/library/windows/desktop/jj835832(v=vs.85).aspx](https://msdn.microsoft.com/library/windows/desktop/jj835832(v=vs.85).aspx) で PFX ファイルを作成する指示に従ってください。</span><span class="sxs-lookup"><span data-stu-id="af79f-278">Follow the instructions at [https://msdn.microsoft.com/library/windows/desktop/jj835832(v=vs.85).aspx](https://msdn.microsoft.com/library/windows/desktop/jj835832(v=vs.85).aspx) to create a PFX file.</span></span> <span data-ttu-id="af79f-279">PFX ファイルを BuildTools フォルダーにコピーし、 BuildTools\\Customization.settings ファイルを正しい名前 (ModernPOSPackageCertificateKeyFile) で更新します。</span><span class="sxs-lookup"><span data-stu-id="af79f-279">Then copy the PFX file to the BuildTools folder, and update the BuildTools\\Customization.settings file with the correct name (ModernPOSPackageCertificateKeyFile).</span></span> <span data-ttu-id="af79f-280">この時点で個々のソリューション、プロジェクト、または Retail SDK 全体を (MSBuild を使用して) ビルドするために必要なものはすべてあります。</span><span class="sxs-lookup"><span data-stu-id="af79f-280">At this point you have everything that you require in order to build individual solutions, projects, or the whole Retail SDK (by using MSBuild).</span></span>

### <a name="normal-configurationcode-signing"></a><span data-ttu-id="af79f-281">通常の構成/コード署名</span><span class="sxs-lookup"><span data-stu-id="af79f-281">Normal configuration/code signing</span></span>

<span data-ttu-id="af79f-282">BuildTools\\Customization.settings には SDK のほとんどのコンフィギュレーション値が保持されています。</span><span class="sxs-lookup"><span data-stu-id="af79f-282">BuildTools\\Customization.settings holds most of the configuration values for the SDK.</span></span> <span data-ttu-id="af79f-283">次の図の強調表示された項目はグローバル値です。</span><span class="sxs-lookup"><span data-stu-id="af79f-283">The highlighted items in the following illustration are the global values.</span></span> <span data-ttu-id="af79f-284">これらの値は、ビルド バイナリ、コンポーネント、パッケージの名前付け、バージョン管理、コード署名の方法を制御します。</span><span class="sxs-lookup"><span data-stu-id="af79f-284">These values control how built binaries, components, and packages are named, versioned, and code-signed.</span></span> 

<span data-ttu-id="af79f-285">[![RetailSDK07](./media/retailsdk07.png)](./media/retailsdk07.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-285">[![RetailSDK07](./media/retailsdk07.png)](./media/retailsdk07.png)</span></span>

<span data-ttu-id="af79f-286">必須ではありませんが、厳密名でアセンブリに署名することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="af79f-286">It's good practice to sign your assemblies with a strong name, even though this isn't required.</span></span> <span data-ttu-id="af79f-287">独自のキー ファイルをまだ作成していない場合に作成する方法については、[[https://msdn.microsoft.com/library/6f05ezxy(v=vs.110).aspx](https://msdn.microsoft.com/library/6f05ezxy(v=vs.110).aspx)] を参照してください。</span><span class="sxs-lookup"><span data-stu-id="af79f-287">To learn how to create your own key file if you don't already have one, see [https://msdn.microsoft.com/library/6f05ezxy(v=vs.110).aspx](https://msdn.microsoft.com/library/6f05ezxy(v=vs.110).aspx).</span></span> <span data-ttu-id="af79f-288">正しくビルドするには、アプリ パッケージの署名証明書を作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-288">To build correctly, you must create an app package signing certificate.</span></span> <span data-ttu-id="af79f-289">[https://msdn.microsoft.com/library/windows/desktop/jj835832(v=vs.85).aspx](https://msdn.microsoft.com/library/windows/desktop/jj835832(v=vs.85).aspx) で PFX ファイルを作成するこれらの指示に従ってください。</span><span class="sxs-lookup"><span data-stu-id="af79f-289">Follow these instructions at [https://msdn.microsoft.com/library/windows/desktop/jj835832(v=vs.85).aspx](https://msdn.microsoft.com/library/windows/desktop/jj835832(v=vs.85).aspx) to create a PFX file.</span></span> <span data-ttu-id="af79f-290">厳密な名前のキー ファイルとアプリ パッケージの署名証明書の両方を BuildTools フォルダー内に保存することができます。</span><span class="sxs-lookup"><span data-stu-id="af79f-290">Both the strong name key file and the app package signing certificate can be stored inside the BuildTools folder.</span></span> <span data-ttu-id="af79f-291">**RetailServerLibraryPathForProxyGeneration** プロパティは、プロキシ生成で異なる RetailServer DLL を設定するために使用することができます。</span><span class="sxs-lookup"><span data-stu-id="af79f-291">The **RetailServerLibraryPathForProxyGeneration** property can be used to set a different RetailServer DLL for proxy generation.</span></span> <span data-ttu-id="af79f-292">Customization.settings は、バイナリー、コンフィギュレーション ファイル、SQL 更新スクリプトなどの新しいカスタマイズ資産を定義する場所でもあります。</span><span class="sxs-lookup"><span data-stu-id="af79f-292">Customization.settings is also the place to define your new customization assets, such as binaries, configuration files, and SQL update scripts.</span></span> <span data-ttu-id="af79f-293">拡張子、バイナリ、および資産をここで指定した後、ファイルは作成された配置可能パッケージに追加されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-293">After you specify your extensions, binaries, and assets here, the files will be added in the deployable package that is created.</span></span> 

<span data-ttu-id="af79f-294">[![RetailSDK08](./media/retailsdk08.png)](./media/retailsdk08.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-294">[![RetailSDK08](./media/retailsdk08.png)](./media/retailsdk08.png)</span></span>

### <a name="customizing-the-build"></a><span data-ttu-id="af79f-295">ビルドのカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="af79f-295">Customizing the build</span></span>

#### <a name="adding-new-projects"></a><span data-ttu-id="af79f-296">新しいプロジェクトの追加</span><span class="sxs-lookup"><span data-stu-id="af79f-296">Adding new projects</span></span>

<span data-ttu-id="af79f-297">簡単に新しいプロジェクトを Retail SDK のビルド システムに追加することができます。</span><span class="sxs-lookup"><span data-stu-id="af79f-297">It's easy to add new projects to the Retail SDK's build system.</span></span> <span data-ttu-id="af79f-298">多くの既存のプロジェクトのいずれかを複製するか、新しいプロジェクトを開始することができます。</span><span class="sxs-lookup"><span data-stu-id="af79f-298">You can either clone one of the many existing projects or start a new project.</span></span> <span data-ttu-id="af79f-299">次の図に示すように、テキスト エディタでいくつかの調整を加える必要があるだけです。</span><span class="sxs-lookup"><span data-stu-id="af79f-299">You just have to make some adjustments in a text editor, as shown in the following illustration.</span></span> <span data-ttu-id="af79f-300">**Import** 要素の相対パスを調整する必要があり、**AssemblyName** 要素は定義済みの **AssemblyNamePrefix** プロパティを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-300">The relative path of the **Import** elements should be adjusted, and the **AssemblyName** element should use the predefined **AssemblyNamePrefix** property.</span></span> <span data-ttu-id="af79f-301">これらの調整は、バージョン管理、コード署名、統一されたアセンブリ命名、[参照] フォルダーへの自動ドロップ、その他のタスクを無料で行うために必要です。</span><span class="sxs-lookup"><span data-stu-id="af79f-301">These adjustments are required in order to get versioning, code signing, uniform assembly naming, automatic dropping to the References folder, and other tasks for free.</span></span> 

<span data-ttu-id="af79f-302">[![RetailSDK09](./media/retailsdk09.png)](./media/retailsdk09.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-302">[![RetailSDK09](./media/retailsdk09.png)](./media/retailsdk09.png)</span></span>

#### <a name="changing-the-build-order-or-adding-to-the-build"></a><span data-ttu-id="af79f-303">ビルド順序の変更またはビルドへの追加</span><span class="sxs-lookup"><span data-stu-id="af79f-303">Changing the build order or adding to the build</span></span>

<span data-ttu-id="af79f-304">Retail SDK のディレクトリ ツリー全体は、MSBuild トラバーサル ファイル (dirs.proj ファイル) サポートを受けて構築されています。</span><span class="sxs-lookup"><span data-stu-id="af79f-304">The whole directory tree of the Retail SDK is built with the help of MSBuild traversal files (dirs.proj files).</span></span> <span data-ttu-id="af79f-305">次の図は、Retail SDK の主なトラバーサルファイルを示しています。</span><span class="sxs-lookup"><span data-stu-id="af79f-305">The following illustration shows the main traversal file of the Retail SDK.</span></span> <span data-ttu-id="af79f-306">類似したファイルは、サブディレクトリにも存在する場合があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-306">Similar files might also exist in subdirectories.</span></span> <span data-ttu-id="af79f-307">Visual Studio ソリューション ファイル (.sln ファイル) がトラバーサル ファイルに非常に類似していることに注意します。</span><span class="sxs-lookup"><span data-stu-id="af79f-307">Notice that Visual Studio solution files (.sln files) are very similar to traversal files.</span></span> <span data-ttu-id="af79f-308">どちらもMSBuild エンジンに対して、他のビルド スクリプトを処理するよう "命令"します。</span><span class="sxs-lookup"><span data-stu-id="af79f-308">Both "direct" the MSBuild engine to process other build scripts.</span></span> 

<span data-ttu-id="af79f-309">[![RetailSDK10](./media/retailsdk10.png)](./media/retailsdk10.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-309">[![RetailSDK10](./media/retailsdk10.png)](./media/retailsdk10.png)</span></span> 

<span data-ttu-id="af79f-310">新しいコードを追加した後、そのほとんどは、新しいフォルダーに配置する必要があります (詳細は、「コード実装のベスト プラクティス」を参照してください)。また、1 つまたは複数の dirs.proj ファイルに追加することによって、トラバーサル構造に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-310">After new code is added, most of it should be located in a new folder (for details, see "Best practices of code implementation"), and you must add it to the traversal structure by adding to one or multiple dirs.proj files.</span></span> <span data-ttu-id="af79f-311">拡張フォルダーは、前述の図の 10 行目で強調表示されています。</span><span class="sxs-lookup"><span data-stu-id="af79f-311">The Extensions folder appears highlighted on line 10 in the previous illustration.</span></span> <span data-ttu-id="af79f-312">新しい dirs.proj ファイルを開始する最も簡単な方法は、既存のファイルをコピーし、**Import** 要素のパスを修正して、**ItemGroup** 要素の **ProjectFiles** 要素を更新することです。</span><span class="sxs-lookup"><span data-stu-id="af79f-312">The quickest way to get started with a new dirs.proj file is to copy an existing file, correct the paths in the **Import** elements, and update the **ProjectFiles** elements in the **ItemGroup** element.</span></span>

#### <a name="build-script-customization"></a><span data-ttu-id="af79f-313">ビルド スクリプトのカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="af79f-313">Build script customization</span></span>

<span data-ttu-id="af79f-314">新しいビルド ステップを実装する必要があるとき、既存のスクリプトが Retail SDK 更新プログラムで後で更新される可能性があることに留意してください後で、で更新します。</span><span class="sxs-lookup"><span data-stu-id="af79f-314">When you must implement new build steps, keep in mind that the existing scripts might be updated by a Retail SDK update later.</span></span> <span data-ttu-id="af79f-315">ベスト プラクティスはファイルの編集を最小限にするか、新しいファイルを代わりに追加します。</span><span class="sxs-lookup"><span data-stu-id="af79f-315">Best practice is to minimize the editing of any file, or add new files instead.</span></span> <span data-ttu-id="af79f-316">新しいグローバル MSBuild プロパティが必要な場合、BuildTools\\Microsoft.Dynamics.RetailSDK.Build.props はそれらを追加する上でお勧めです。</span><span class="sxs-lookup"><span data-stu-id="af79f-316">If you require new global MSBuild properties, BuildTools\\Microsoft.Dynamics.RetailSDK.Build.props is a good place to add them.</span></span> <span data-ttu-id="af79f-317">同様に、BuildTools\\Microsoft.Dynamics.RetailSDK.Build.targets は、新しいビルド処理のターゲットを追加するために使用できます。</span><span class="sxs-lookup"><span data-stu-id="af79f-317">Likewise, BuildTools\\Microsoft.Dynamics.RetailSDK.Build.targets can be used to add new build processing targets.</span></span> <span data-ttu-id="af79f-318">1 つのプロジェクトで特別な処理が必要とならない場合は、明示的に変更を加えることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="af79f-318">If only one project requires special handling, it is better to explicitly make the change there.</span></span> <span data-ttu-id="af79f-319">新しいローカル MSBuild プロパティが必要な場合は、同じディレクトリに local.props という名前の新しいファイルを追加します。</span><span class="sxs-lookup"><span data-stu-id="af79f-319">If you require new local MSBuild properties, add a new file that is named local.props in the same directory.</span></span> <span data-ttu-id="af79f-320">または、ローカル ビルド処理ターゲットが必要な場合は、local.targets ファイルを追加します。</span><span class="sxs-lookup"><span data-stu-id="af79f-320">Alternatively, add a local.targets file if you require local build processing targets.</span></span>

### <a name="developer-productivity"></a><span data-ttu-id="af79f-321">開発者の生産性</span><span class="sxs-lookup"><span data-stu-id="af79f-321">Developer productivity</span></span>

<span data-ttu-id="af79f-322">この記事の前半のアーキテクチャ図に示すように、いくつかのものは RetailServer インターフェイスによって異なります。</span><span class="sxs-lookup"><span data-stu-id="af79f-322">As shown in the architecture diagram earlier in this article, several things depend on the RetailServer interface.</span></span> <span data-ttu-id="af79f-323">他のユーザーがこのインターフェイスを変更することがあります。</span><span class="sxs-lookup"><span data-stu-id="af79f-323">It is likely that someone will change this interface.</span></span> <span data-ttu-id="af79f-324">開発者のトポロジ マシンでは、誰かがすぐに変更を試してみることができます。</span><span class="sxs-lookup"><span data-stu-id="af79f-324">On a developer topology machine, someone might want to immediately try out a change.</span></span> <span data-ttu-id="af79f-325">この場合、任意の CommerceRuntime および RetailServer 拡張 DLL をローカルにインストールされた RetailServer Web アプリケーションの bin フォルダーにコピーする必要があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-325">In this case, any CommerceRuntime and RetailServer extension DLLs must be copied into the bin folder of the locally installed RetailServer web application.</span></span> <span data-ttu-id="af79f-326">ユーザーは、Customization.setting ファイルをコンフィギュレーションして、これらのファイルの新しいバージョンがビルドされるたびに、DLL がローカルの RetailServer Web アプリケーションの bin フォルダーに自動的にコピーされるようにできます。</span><span class="sxs-lookup"><span data-stu-id="af79f-326">A user can configure the Customization.setting file so that the DLLs are automatically copied into the bin folder of the local RetailServer web application whenever new versions of these files are built.</span></span> 

<span data-ttu-id="af79f-327">[![RetailSDK11](./media/retailsdk11.png)](./media/retailsdk11.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-327">[![RetailSDK11](./media/retailsdk11.png)](./media/retailsdk11.png)</span></span>

### <a name="application-lifecycle-management"></a><span data-ttu-id="af79f-328">アプリケーション ライフサイクル管理</span><span class="sxs-lookup"><span data-stu-id="af79f-328">Application lifecycle management</span></span>

<span data-ttu-id="af79f-329">優れた ALM ソリューションは、バージョン管理、ビルド、自動ビルド、プランニング ツール、追跡ツール、ダッシュ ボード、カスタマイズなどを提供します。</span><span class="sxs-lookup"><span data-stu-id="af79f-329">A good ALM solution provides version control, builds, automated builds, planning tools, tracking tools, dashboards, customization, and more.</span></span> <span data-ttu-id="af79f-330">Retail SDK は、これらのタスクをサポートするように編成されています。</span><span class="sxs-lookup"><span data-stu-id="af79f-330">The Retail SDK is organized in such a way that it supports these tasks.</span></span> 

<span data-ttu-id="af79f-331">[Azure DevOps](/Azure DevOps/) は、優れたツールでありお勧めします。</span><span class="sxs-lookup"><span data-stu-id="af79f-331">[Azure DevOps](/Azure DevOps/) is a great tool and is recommended.</span></span>

### <a name="branching-and-versioning"></a><span data-ttu-id="af79f-332">分岐およびバージョン管理</span><span class="sxs-lookup"><span data-stu-id="af79f-332">Branching and versioning</span></span>

<span data-ttu-id="af79f-333">チームで効率的に仕事をしたり、過去に行ったいくつかの変更を確認できるようにするには、適正な分岐戦略とバージョン管理の規範が必要です。</span><span class="sxs-lookup"><span data-stu-id="af79f-333">To work efficiently in a team, or even just to be able to go back and look at some changes that were done in the past, you must have good branching strategy and versioning discipline.</span></span> <span data-ttu-id="af79f-334">次の図は、ほとんどのチームでうまくいく単純な分岐戦略を示しています。</span><span class="sxs-lookup"><span data-stu-id="af79f-334">The following illustration shows a simple branching strategy that might work well for most teams.</span></span> <span data-ttu-id="af79f-335">バージョン番号は、架空のものです。</span><span class="sxs-lookup"><span data-stu-id="af79f-335">The version numbers are fictitious.</span></span>

<span data-ttu-id="af79f-336">[![RetailSDK12](./media/retailsdk12.png)](./media/retailsdk12.png)</span><span class="sxs-lookup"><span data-stu-id="af79f-336">[![RetailSDK12](./media/retailsdk12.png)](./media/retailsdk12.png)</span></span>

#### <a name="retail-sdk-mirror-branch"></a><span data-ttu-id="af79f-337">Retail SDK のミラー分岐</span><span class="sxs-lookup"><span data-stu-id="af79f-337">Retail SDK mirror branch</span></span>

<span data-ttu-id="af79f-338">強調すべき非常に重要なポイントは、カスタマイズされていない Retail SDK をソース コントロールに保存する必要があるということです。</span><span class="sxs-lookup"><span data-stu-id="af79f-338">A very important point to emphasize is that the non-customized Retail SDK should be stored in your source control.</span></span> <span data-ttu-id="af79f-339">すべてのバージョンを保存する必要はありませんが、チームがスナップするバージョンを追加する必要があります (これらのバージョンは、累積的な更新または修正プログラムである場合があります)。</span><span class="sxs-lookup"><span data-stu-id="af79f-339">You don't have to store every version, but the versions that your team wants to snap to should be added (these versions might be cumulative updates or hotfixes).</span></span> <span data-ttu-id="af79f-340">すべての変更 (追加、変更、および削除) の単純な結合のみ行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="af79f-340">Only a simple merge of all changes (additions, changes, and deletions) should be done.</span></span> <span data-ttu-id="af79f-341">このブランチで発生する他の開発作業はありません。</span><span class="sxs-lookup"><span data-stu-id="af79f-341">No other development work should occur in this branch.</span></span> <span data-ttu-id="af79f-342">Retail SDK には、独自のバージョンがあります。</span><span class="sxs-lookup"><span data-stu-id="af79f-342">The Retail SDK has its own version.</span></span> <span data-ttu-id="af79f-343">すべての Retail バイナリおよびパッケージには同じバージョンが含まれています。</span><span class="sxs-lookup"><span data-stu-id="af79f-343">All Retail binaries and packages that are included have the same version.</span></span> <span data-ttu-id="af79f-344">バージョンは、Microsoft-version.txt という名前のファイルの Retail SDK のルートにもあります。</span><span class="sxs-lookup"><span data-stu-id="af79f-344">The version can also be found in the root of the Retail SDK in a file that is named Microsoft-version.txt.</span></span>

#### <a name="customization-branch"></a><span data-ttu-id="af79f-345">カスタマイズ分岐</span><span class="sxs-lookup"><span data-stu-id="af79f-345">Customization branch</span></span>

<span data-ttu-id="af79f-346">配置を開発した後、新しい分岐を開始する必要があります (カスタマイズ分岐)。</span><span class="sxs-lookup"><span data-stu-id="af79f-346">After development can start, a new branch should be started (customization branch).</span></span> <span data-ttu-id="af79f-347">初期分岐アウトの先頭において、この分岐は Retail SDK ミラー分岐の正確なコピーになります。</span><span class="sxs-lookup"><span data-stu-id="af79f-347">At the beginning of the initial branch-out, this branch will be an exact copy of the Retail SDK mirror branch.</span></span> <span data-ttu-id="af79f-348">これはチーム開発用の分岐です。</span><span class="sxs-lookup"><span data-stu-id="af79f-348">This is the branch for a team's development.</span></span> <span data-ttu-id="af79f-349">カスタマイズ ブランチのバージョンは、少なくともテストのためにビルドが作成されるたびに増分する必要があります。また、毎日増分することもできます。</span><span class="sxs-lookup"><span data-stu-id="af79f-349">The version of the customization branch must be incremented at least every time that a build is created for testing, or it can even be incremented daily.</span></span> <span data-ttu-id="af79f-350">増分するファイル バージョンは、**CustomVersion** プロパティを使用して Customization.setting ファイルで定義されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-350">The file version to increment is defined in Customization.setting file by using the **CustomVersion** property.</span></span> <span data-ttu-id="af79f-351">それを更新し、すべてのバイナリ パッケージを再構築すると、マニフェスト ファイルはそれに応じて更新されます。</span><span class="sxs-lookup"><span data-stu-id="af79f-351">If you update it and rebuild, all binaries, packages, manifest files are updated accordingly.</span></span> <span data-ttu-id="af79f-352">**CustomAssemblyVersion** プロパティは、更新プログラムに下位互換性がなく、主な新しいリリースに対して互換性がない場合のみ更新する必要があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="af79f-352">Note that the **CustomAssemblyVersion** property should be updated only when the update isn't backward compatible and/or for major new releases.</span></span> <span data-ttu-id="af79f-353">つまり、この更新プログラムはめったにありません。</span><span class="sxs-lookup"><span data-stu-id="af79f-353">In other words, this update should very rarely.</span></span> <span data-ttu-id="af79f-354">たとえば、Microsoftのアセンブリバージョンは、現行バージョンに至るまでの複数のCTPリリースで変わっていません。</span><span class="sxs-lookup"><span data-stu-id="af79f-354">For example, Microsoft's assembly version stayed the same for the multiple CTP releases for the current version.</span></span> <span data-ttu-id="af79f-355">同じ分岐には Microsoft の資産と独自の変更の両方が存在するため、分岐には基本的に 2 つのファイル バージョンがあります。</span><span class="sxs-lookup"><span data-stu-id="af79f-355">Because there are both Microsoft assets and your own changes in the same branch, the branch essentially has two file versions.</span></span> <span data-ttu-id="af79f-356">最初のバージョンは、現在の支店が基づいている Retail SDK の Microsoft バージョンで、2 番目のバージョンは、**CustomVersion** プロパティによって設定されたバージョンです。</span><span class="sxs-lookup"><span data-stu-id="af79f-356">The first version is the Microsoft version of the Retail SDK that the current branch is based on, and the second version is the version that is set by the **CustomVersion** property.</span></span> <span data-ttu-id="af79f-357">前述の図では、カスタマイズ分岐の現在のファイル バージョンは、1.0.2\* です (Microsoft バージョン 7.0.2200.3 に基づく)。</span><span class="sxs-lookup"><span data-stu-id="af79f-357">In the previous illustration, the current file version of the customization branch is 1.0.2.\* (based on Microsoft version 7.0.2200.3).</span></span> <span data-ttu-id="af79f-358">展開された最初のリリースのファイル バージョンは 1.0.0.40 (7.0.2000.0 に基づく) でした。</span><span class="sxs-lookup"><span data-stu-id="af79f-358">The file version of the first rolled-out release was 1.0.0.40 (based on 7.0.2000.0).</span></span> <span data-ttu-id="af79f-359">テスト フェーズが完了し、最後のパッケージがそのバージョンで配置されるとき、バージョン番号を増分する (またはソース コントロールのラベルを作成する) ことが重要です。</span><span class="sxs-lookup"><span data-stu-id="af79f-359">When a testing phase is completed, and the final packages are being deployed with that version, it's important that you increment the version (or create a source control label).</span></span>
