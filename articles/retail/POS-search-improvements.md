---
title: 販売時点管理 (POS) での製品検索および顧客検索
description: このトピックでは、Dynamics 365 Retail の製品および顧客検索機能に加えられた改良の概要を示します。
author: ShalabhjainMSFT
manager: AnnBe
ms.date: 06/10/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: shajain
ms.search.validFrom: 2017-06-30
ms.dyn365.ops.version: Retail April 2017 update
ms.openlocfilehash: 60db9e9936f7728d76f5c7a0d0c31b33477c7c61
ms.sourcegitcommit: f87de0f949b5d60993b19e0f61297f02d42b5bef
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/24/2019
ms.locfileid: "2023687"
---
# <a name="product-search-and-customer-search-in-the-point-of-sale-pos"></a>販売時点管理 (POS) での製品検索および顧客検索

[!include [banner](includes/banner.md)]

Modern 販売時点管理 (MPOS) およびクラウド販売時点管理 (CPOS) は、製品および顧客の使いやすい検索機能を提供します。 検索バーは、常に MPOS および CPOS ウィンドウの上部に表示されているため、従業員はすばやく製品および顧客を検索できます。

従業員は、現在の店舗に関連付けられている品揃えとカタログにある商品を検索できます。 会社内の他のどの店舗に関連付けられている品揃えとカタログも検索できます。 したがって、レジ担当者は、店舗の品揃え外製品でも販売および返品をすることができます。 同様に、従業員は、現在の店舗または会社内の他のどの店舗に関連付けられている顧客でも検索できます。 また、従業員は、親組織内の別の会社に関連付けられている顧客も検索できます。

## <a name="product-search"></a>製品検索

既定では、商品検索は、店舗の品揃えで実行します。 このタイプの検索は、*ローカル製品検索* と呼ばれます。 ただし、従業員は、現在の店舗に関連付けられている任意のカタログへ容易に切り替えることができ、または別の店舗で検索することができます。 このタイプの検索は、*リモート製品検索* と呼ばれます。 カタログを変更するには、ページの左側にある **カテゴリ** ボタンを選択します。 表示されるウィンドウの上部で **カタログを変更** ボタンを選択し、参照するのには使用可能なカタログのいずれかを選択します。 システムは、選択した製品のカタログを検索します。

**カタログの変更** ページで、従業員が任意の店舗を容易に選択し、またはすべての店舗間で製品を検索することができます。

![カタログを変更します](./media/Changecatalog.png "カタログを変更します")

ローカル商品検索は、次の製品プロパティ内で検索します。

- 製品番号
- 製品名
- 説明
- 分析コード
- バーコード
- 検索名

### <a name="enhancements-to-local-product-searches"></a>ローカル商品検索の機能拡張

ローカル商品検索の体験がよりわかりやすくなりました。 次の機能が拡張されています:

- 従業員が検索を実行する前に **製品** または **顧客** のいずれかを選択できるように、製品および顧客のドロップダウン メニューが検索バーに追加されました。 既定では、**製品** が選択されている場合は、次の図のようになります。
- 複数キーワード検索 (検索条件を使用して検索) では、小売業者は、*任意* の検索条件に一致するまたは *すべて* の検索条件に一致する結果のみを含む検索結果かどうかをコンフィギュレーションできます。 この機能の設定は、**製品検索**という名前の新しいグループ内の、POS 機能プロファイルで使用可能です。 既定の設定は **任意の検索条件に一致** です。 この設定は、推奨される設定でもあります。 **任意の検索条件に一致** 設定が使用される場合、結果として完全または部分的に 1 つまたは複数の検索条件に一致するすべての製品が返されます。 それらの結果は自動的に最もキーワードの一致 (完全または部分的) がある製品の昇順で並べ替えられます。

    **すべての検索条件に一致** 設定は、すべての検索条件 (全体または一部) と一致する製品のみを返します。 この設定は、製品名が長くなる場合、および従業員が検索結果で限定されるた製品のみを表示したいときに役に立ちます。 ただし、このタイプの検索には、2 つの制限があります。

    - 個々の製品プロパティに対して検索が行われます。 たとえば、少なくとも 1 つの製品のプロパティに対して、すべての検索キーワードがある製品のみが返されます。
    - 分析コードは検索されません。

- 小売業者は、ユーザーが製品名を入力すると検索候補を表示する製品検索をコンフィギュレーションできるようになりました。 この機能の新しい設定は、**製品検索** という名前のグループで、POS 機能プロファイルで使用できます。 設定は **入力中に検索提案を表示** と呼ばれます。 この機能は、全体の名前を手動で入力する必要がないため、従業員が検索している製品をすばやく見つけるのに役立ちます。
- 製品検索アルゴリズムは、製品の **検索名** プロパティで検索された条件も検索するようになります。

![製品候補](./media/Productsuggestions.png "製品候補")

## <a name="customer-search"></a>顧客検索

顧客検索は、さまざまな目的で顧客を見つけるのに使用されます。 たとえば、レジ担当者は顧客の欲しい物リストまたは購入履歴を表示したり、またはトランザクションに顧客を追加するかもしれません。 検索アルゴリズムは、次の顧客プロパティに存在する値と検索条件に一致します。

- 氏名
- 電子メール アドレス
- 電話番号
- ロイヤルティ カード番号
- 住所
- アカウント番号

アルゴリズムは検索キーワードのいずれかに一致するすべての顧客を返すため、これらのプロパティの中で、名前が複数キーワードの検索に対して非常に高い柔軟性を示します。 ほとんどのキーワードに一致する顧客は、結果の上部に表示されます。 この動作は、レジ担当者が氏名を入力して検索しているが、初期データ入力中に姓と名が入れ替えられたような状況で役に立ちます。 ただし、パフォーマンス上の理由から、他のすべてのプロパティは検索キーワードの順序を保持します。 そのため、検索キーワードの順序がデータが保存されている順序と一致しない場合、結果が返されません。

既定では、顧客検索は、店舗に関連付けられている顧客アドレス帳で実行されます。 このタイプの検索は、*ローカル顧客検索* と呼ばれます。 ただし、従業員は顧客をグローバルに検索することもできます。 つまり、会社の店舗間および他のすべての法人間を検索することができます。 このタイプの検索は、*リモート顧客検索* と呼ばれます。

グローバルに検索する場合、次の図に示すように、従業員はページの下部にある **フィルター結果** ボタンを選択でき、**すべての店舗の検索** オプションを選択できます。 この場合、顧客だけが返されるわけではありません。 本社で任意のアドレス帳の一部である関係者のすべてのタイプが返されます。 これらの関係者には、作業者、仕入先、連絡先、および競合他社が含まれます。

> [!NOTE]
> 結果が返されるリモート顧客検索用の最小 4 文字を入力する必要があります。

リモート顧客検索では、現在の会社でこれらの関係者用に顧客 ID が作成されていないため、他の法人からの顧客用に顧客 ID が表示されません。 ただし、従業員が顧客の詳細ページを開くと、システムは関係者の顧客 ID を自動的に生成し、また店舗の顧客アドレス帳を顧客に関連付けます。 したがって、後に行われるローカル店舗検索時には、顧客が表示されます。

![グローバル顧客検索](./media/Globalcustomersearch.png "グローバル顧客検索")

### <a name="enhancements-to-local-customer-search"></a>ローカル顧客検索の機能拡張

電話番号に基づく検索が簡略化されました。 これらの検索は、顧客の作成時に追加されたかもしれないスペース、ハイフン、およびかっこなどの特殊文字を無視するようになります。 したがって、レジ担当者は、検索する際に電話番号の形式を考慮する必要はありません。 部分的な電話番号を入力して顧客の検索もできます。 電話番号に特殊文字が含まれている場合、特殊文字の後に表示される番号を検索して見つけることもできます。 たとえば、入力された顧客の電話番号が **123-456-7890** の場合、レジ担当者は **123**、**456**、**7890**、または**1234567890**、または電話番号の最初のいくつかの番号を入力することで顧客を検索できます。

従来の顧客検索は、複数のフィールド間で検索するため、時間がかかる場合があります。 代わりに、レジ担当者は名前、電子メール アドレス、または電話番号など、顧客の単一のプロパティで検索できるようになります。 顧客検索アルゴリズムが使用するプロパティは *顧客検索条件* として総称されています。 システム管理者は、POS に表示されるショートカットとして 1 つまたは複数の条件を簡単にコンフィギュレーションできます。 検索は 1 つの条件に制限されているため、関連する検索結果のみが表示され、パフォーマンスは標準的な顧客検索のパフォーマンスに比べてより良いものです。 次の図に、POS での顧客検索ショートカットを示します。

![顧客検索ショートカット](./media/SearchShortcutsPOS.png "顧客検索ショートカット")



ショートカットとして検索基準を設定するには、管理者が Microsoft Dynamics 365 Retail で**小売パラメーター** ページを開き、次に **POS 検索基準**タブで、ショートカットとして表示されるべきすべての基準を選択する必要があります。


![検索ショートカットをコンフィギュレーション](./media/ConfigureShortcutsAX.png "検索ショートカットをコンフィギュレーション")

> [!NOTE]
> あまりに多くのショートカットを追加する場合は、POS の検索バーで、ドロップダウン メニューが雑然として、従業員の検索体験に影響する可能性があります。 必要な数のショートカットだけを追加するようお勧めします。

**表示順序** フィールドでは、POS で表示されるショートカットの順序を決定します。 表示される基準は、顧客を検索するのに顧客検索アルゴリズムが使用する、最初から用意されているプロパティです。 ただし、パートナーは、検索ショートカットとしてカスタム プロパティを追加することができます。 検索ショートカットとしてカスタム プロパティを追加するには、システム管理者は顧客の検索条件として使用する拡張可能列挙 (列挙) を拡張し、ショートカットとしてパートナーのカスタム プロパティをマークする必要があります。 パートナーは、そのカスタム ショートカットが検索に使用されるときに、結果を検索するコードを記述します。

> [!NOTE]
> 列挙に追加されるカスタム プロパティは、標準的な顧客検索アルゴリズムに影響しません。 つまり、顧客検索アルゴリズムは、カスタム プロパティでは検索しません。 ユーザーは、ショートカットとしてカスタム プロパティが追加された場合、または既定の検索アルゴリズムが上書きされる場合にのみ、検索用にカスタム プロパティを使用できます。

Retail の今後のリリースで、小売業者は、POS の既定の顧客検索モードを**すべての店舗を検索**に設定できるようになります。 このコンフィギュレーションは、POS 以外で作成された顧客をすぐに検索する必要があるようなシナリオの場合 (たとえば、配送ジョブが実行される前であっても) に役に立ちます。 新しい**既定の顧客検索モード** オプションが POS 機能プロファイルで使用可能になります。 **オン**に設定すると、既定の検索モードが**すべての店舗を検索**に設定されます。 顧客検索のすべての試行は、本社に対してリアルタイムの呼び出しを行います。

予期しないパフォーマンスの問題を防ぐために、このコンフィギュレーションは **CUSTOMERSEARCH_ENABLE_DEFAULTSEARCH_FLIGHTING** という名前のフライティング フラグの後ろに隠されています。 そのため、ユーザー インターフェイス (UI) に**既定の顧客検索モード**の設定を表示するには、小売業者はユーザー承認テスト (UAT) および実稼働環境のためにサポート チケットを作成する必要があります。 チケットを受け取った後、エンジニアリング チームは小売業者と協力し、パフォーマンスの評価と必要なすべての最適化の実装を行うのに小売業者が非実稼働環境でテストを行っていることを確認します。
