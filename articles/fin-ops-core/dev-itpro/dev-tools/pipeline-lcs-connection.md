---
title: Azure Pipelines で LCS 接続を作成する
description: このトピックでは、Azure DevOps から Microsoft Dynamics Lifecycle Services (LCS) への接続を設定する方法について説明します。
author: jorisdg
ms.date: 03/05/2020
ms.topic: article
audience: Developer
ms.reviewer: rhaertle
ms.custom: ''
ms.search.region: Global
ms.author: jorisde
ms.search.validFrom: 2020-08-19
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 2494185d38b73359037be41e799c5778a3afcba2
ms.sourcegitcommit: 2f766e5bb8574d250f19180ff2e101e895097713
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/21/2021
ms.locfileid: "5923413"
---
# <a name="create-an-lcs-connection-in-azure-pipelines"></a><span data-ttu-id="8b5fb-103">Azure Pipelines で LCS 接続を作成する</span><span class="sxs-lookup"><span data-stu-id="8b5fb-103">Create an LCS connection in Azure Pipelines</span></span>

<span data-ttu-id="8b5fb-104">Microsoft Azure DevOps の [Dynamics 365 Finance and Operations ツール](https://marketplace.visualstudio.com/items?itemName=Dyn365FinOps.dynamics365-finops-tools) 拡張機能には、Microsoft Dynamics Lifecycle Services (LCS) でアクションを実行できるパイプライン タスクがいくつか用意されています。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-104">The [Dynamics 365 Finance and Operations Tools](https://marketplace.visualstudio.com/items?itemName=Dyn365FinOps.dynamics365-finops-tools) extension for Microsoft Azure DevOps has several pipeline tasks that let you perform actions in Microsoft Dynamics Lifecycle Services (LCS).</span></span> <span data-ttu-id="8b5fb-105">たとえば、資産のアップロード、資産のダウンロード、および環境のサービスを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-105">For example, you can upload assets, download assets, and service an environment.</span></span> <span data-ttu-id="8b5fb-106">LCS を正常に機能させるには、Azure DevOps で新しいサービス接続を設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-106">For the connection with LCS to work, you must set up a new service connection in Azure DevOps.</span></span> <span data-ttu-id="8b5fb-107">このサービス接続は、LCS に接続するために必要な認証の詳細を提供します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-107">This service connection provides the authentication details that are required to connect to LCS.</span></span> <span data-ttu-id="8b5fb-108">Azure DevOps のサービス接続の詳細については、[サービス接続](/azure/devops/pipelines/library/service-endpoints) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-108">For more information about service connections in Azure DevOps, see [Service connections](/azure/devops/pipelines/library/service-endpoints).</span></span>

<span data-ttu-id="8b5fb-109">このトピックは、[Azure Pipelines](/azure/devops/pipelines/get-started/pipelines-get-started) の実用的な知識を持っていることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-109">This topic assumes that you have a working knowledge of [Azure Pipelines](/azure/devops/pipelines/get-started/pipelines-get-started).</span></span>

> [!NOTE]
> <span data-ttu-id="8b5fb-110">これらのステップをパイプラインに追加するには、[Dynamics 365 Finance and Operations ツール](https://marketplace.visualstudio.com/items?itemName=Dyn365FinOps.dynamics365-finops-tools)拡張機能が有効になっていて、Azure DevOps アカウントで Azure DevOps が有効化およびインストールされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-110">Before you can add these steps to a pipeline, the [Dynamics 365 Finance and Operations Tools](https://marketplace.visualstudio.com/items?itemName=Dyn365FinOps.dynamics365-finops-tools) extension for Azure DevOps must be enabled and installed in the Azure DevOps account.</span></span> <span data-ttu-id="8b5fb-111">組織に拡張機能をインストールする方法の詳細については、[拡張機能のインストール](/azure/devops/marketplace/install-extension)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-111">For more information about how to install an extension for an organization, see [Install extensions](/azure/devops/marketplace/install-extension).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="8b5fb-112">必要条件</span><span class="sxs-lookup"><span data-stu-id="8b5fb-112">Prerequisites</span></span>

<span data-ttu-id="8b5fb-113">Azure DevOps から対話する 1 つ以上の LCS プロジェクトへのアクセス許可を持つユーザー資格情報が必要です。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-113">You must have the credentials for a user who has access to one or more LCS projects that you want to interact with from Azure DevOps.</span></span> <span data-ttu-id="8b5fb-114">このユーザーが以前に LCS に正常にサインインし、対話するプロジェクトのダッシュボードを開いたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-114">Make sure that this user has successfully signed in to LCS before, and has opened the dashboard for the projects that you want to interact with.</span></span>

> [!NOTE]
> <span data-ttu-id="8b5fb-115">LCS はサービス間認証をサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-115">LCS doesn't support service-to-service authentication.</span></span> <span data-ttu-id="8b5fb-116">したがって、通常のユーザー資格情報 (ユーザー名およびパスワード) のみを使用できます。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-116">Therefore, only regular user credentials (that is, a user name and password) can be used.</span></span> <span data-ttu-id="8b5fb-117">パイプラインは対話的に実行されないため、使用するアカウントでは多要素認証を設定してはいけません。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-117">Because the pipelines don't run interactively, multifactor authentication must not be set up for the account that you use.</span></span> <span data-ttu-id="8b5fb-118">セキュリティ上の目的で定期的にローテーションできる制限付きアクセスおよび強力な資格情報を持つ別のユーザー アカウントを設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-118">We recommend that you set up a separate user account that has limited access and strong credentials that can regularly be rotated for security purposes.</span></span>

<span data-ttu-id="8b5fb-119">ユーザーの代わりに Azure DevOps から LCS に直接接続できるようにするには、Azure Active Directory (Azure AD) にアプリケーションを登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-119">To enable direct connections from Azure DevOps to LCS on a user's behalf, you must register an application in your Azure Active Directory (Azure AD).</span></span>

1. <span data-ttu-id="8b5fb-120">[クイックスタート: Microsoft ID プラットフォームにアプリケーションを登録する](/azure/active-directory/develop/quickstart-register-app) の指示に従い、新しいリダイレクト URI を追加します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-120">Follow the instructions in [Quickstart: Register an application with the Microsoft identity platform](/azure/active-directory/develop/quickstart-register-app), and add a new redirect URI:</span></span>

    1. <span data-ttu-id="8b5fb-121">**パブリック クライアント/ネイティブ (モバイル & デスクトップ)** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-121">Select **Public client/native (mobile & desktop)**.</span></span>
    2. <span data-ttu-id="8b5fb-122">`http://localhost` などの有効な URI を入力します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-122">Enter any valid URI, such as `http://localhost`.</span></span>

2. <span data-ttu-id="8b5fb-123">LCS web Api にアクセスするためのアクセス許可をアプリケーション登録に追加します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-123">Add permissions to the application registration to access the LCS web APIs.</span></span> <span data-ttu-id="8b5fb-124">[Web API にアクセスするためのアクセス許可の追加](/azure/active-directory/develop/quickstart-configure-app-access-web-apis#add-permissions-to-access-your-web-api) の手順に従ってください。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-124">Follow the instructions in [Add permissions to access your web API](/azure/active-directory/develop/quickstart-configure-app-access-web-apis#add-permissions-to-access-your-web-api).</span></span> <span data-ttu-id="8b5fb-125">API のアクセス許可を要求する場合は、**自分の組織で使用する API** を選択し、**Dynamics Lifecycle Services** を検索します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-125">When you request the API permissions, select **APIs my organization uses**, and search for **Dynamics Lifecycle services**.</span></span>
3. <span data-ttu-id="8b5fb-126">使用するアカウントに、Azure AD でのアプリケーション登録に対して同意が付与されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-126">Make sure that the account that you will use has given consent for the application registration in Azure AD.</span></span> <span data-ttu-id="8b5fb-127">[Azure Active Directory でエンドユーザーがアプリケーションに対して同意する方法を構成する](/azure/active-directory/manage-apps/configure-user-consent) の指示に従います。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-127">Follow the instructions in [Configure the way end-users consent to an application in Azure Active Directory](/azure/active-directory/manage-apps/configure-user-consent).</span></span> <span data-ttu-id="8b5fb-128">特定のユーザーを有効にするか、テナント全体に対して管理者の同意を付与する ことができます。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-128">You can either enable a specific user or grant admin consent for the whole tenant.</span></span>

## <a name="create-the-dynamics-lifecycle-services-service-connection"></a><span data-ttu-id="8b5fb-129">Dynamics Lifecycle Services (LCS) へのサービス接続を作成する</span><span class="sxs-lookup"><span data-stu-id="8b5fb-129">Create the Dynamics Lifecycle Services service connection</span></span>

<span data-ttu-id="8b5fb-130">パイプライン タスクから直接、またはプロジェクト設定ページから、新しいサービス接続を作成することができます。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-130">You can create a new service connection either directly from a pipeline task or from your project's settings page.</span></span> <span data-ttu-id="8b5fb-131">サービス接続を作成する方法の詳細については、[サービス接続の作成](/azure/devops/pipelines/library/service-endpoints#create-a-service-connection) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-131">For more information about how to create service connections, see [Create a service connection](/azure/devops/pipelines/library/service-endpoints#create-a-service-connection).</span></span> <span data-ttu-id="8b5fb-132">**Dynamics Lifecycle Services** へのサービス接続のダイアログ ボックスで、次の情報が提供されます。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-132">In the dialog box for the **Dynamics Lifecycle Services** service connection, provide the following information:</span></span>

- <span data-ttu-id="8b5fb-133">**認証エンドポイント** – 規定値は Azure クラウドのすべての Azure AD テナントで機能します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-133">**Authentication Endpoint** – The default value works for all Azure AD tenants in the Azure cloud.</span></span> <span data-ttu-id="8b5fb-134">Azure AD が国内クラウドにある場合は、[国内クラウド](/azure/active-directory/develop/authentication-national-cloud) を参照して、正しい認証エンドポイントを検索します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-134">If your Azure AD is in a national cloud, see [National clouds](/azure/active-directory/develop/authentication-national-cloud) to find the correct authentication endpoint.</span></span>
- <span data-ttu-id="8b5fb-135">**Lifecycle Services API エンドポイント** – エンドポイントを提供します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-135">**Lifecycle Services API Endpoint** – Provide the endpoint.</span></span>
- <span data-ttu-id="8b5fb-136">**ユーザー名** – ユーザー資格情報の電子メール エイリアスを提供します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-136">**Username** – Provide the email alias for the user credentials.</span></span>
- <span data-ttu-id="8b5fb-137">**パスワード** – ユーザー資格情報のパスワードを提供します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-137">**Password** – Provide the password for the user credentials.</span></span>
- <span data-ttu-id="8b5fb-138">**アプリケーション (クライアント) ID** – Azure AD でのアプリケーション登録用に以前に作成した ID を提供します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-138">**Application (Client) ID** – Provide the ID that was previously created for your application registration in Azure AD.</span></span>
- <span data-ttu-id="8b5fb-139">**サービス接続名** – 接続に意味のある名前を提供します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-139">**Service connection name** – Provide a meaningful name for the connection.</span></span> <span data-ttu-id="8b5fb-140">この名前は、LCS 接続を必要とするパイプライン タスクの接続フィールドで表示されます。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-140">This name will appear in the connection field for pipeline tasks that require an LCS connection.</span></span>
- <span data-ttu-id="8b5fb-141">**説明** – この接続のオプションの説明を提供します。</span><span class="sxs-lookup"><span data-stu-id="8b5fb-141">**Description** – Provide an optional description of this connection.</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]