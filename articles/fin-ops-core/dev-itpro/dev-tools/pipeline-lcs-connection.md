---
title: Azure Pipelines で LCS 接続を作成する
description: このトピックでは、Microsoft Azure DevOps から LCS への接続を設定する方法について説明します。
author: jorisdg
manager: AnnBe
ms.date: 03/05/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Developer
ms.reviewer: rhaertle
ms.search.scope: Operations
ms.custom: ''
ms.search.region: Global
ms.author: jorisde
ms.search.validFrom: 2020-08-19
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 9f80b28ceb25249f199764e70e68a7d592dfdb46
ms.sourcegitcommit: a47a4652a29fdb567a8ba67c4f914a8698e8c48c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/03/2020
ms.locfileid: "3765092"
---
# <a name="create-a-lifecycle-services-lcs-connection-in-azure-pipelines"></a><span data-ttu-id="2fed5-103">Azure Pipelines での Lifecycle Services (LCS)  接続の作成</span><span class="sxs-lookup"><span data-stu-id="2fed5-103">Create a Lifecycle Services (LCS) connection in Azure Pipelines</span></span>

<span data-ttu-id="2fed5-104">Azure DevOps 用 [Dynamics 365 Finance and Operations ツール](https://marketplace.visualstudio.com/items?itemName=Dyn365FinOps.dynamics365-finops-tools)拡張機能には、Dynamics Lifecycle Services (LCS) でアクションを実行できるパイプライン タスクがいくつか用意されています。</span><span class="sxs-lookup"><span data-stu-id="2fed5-104">The [Dynamics 365 Finance and Operations Tools](https://marketplace.visualstudio.com/items?itemName=Dyn365FinOps.dynamics365-finops-tools) extension for Azure DevOps has several pipeline tasks that allow you to perform actions in Dynamics Lifecycle Services (LCS).</span></span> <span data-ttu-id="2fed5-105">たとえば、資産のアップロードとダウンロード、または環境のサービスを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="2fed5-105">For example, you can upload and download assets, or service an environment.</span></span> <span data-ttu-id="2fed5-106">LCS を正常に機能させるには、接続に必要な認証の詳細を含む Azure DevOps の新しい **サービス接続** を設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2fed5-106">For this connection with LCS to work, you have to set up a new **Service Connection** in Azure DevOps that provides the authentication details needed to connect.</span></span> <span data-ttu-id="2fed5-107">Azure DevOps の **サービス接続** の詳細については、[サービス接続](https://docs.microsoft.com/azure/devops/pipelines/library/service-endpoints?view=azure-devops) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2fed5-107">For more information about **Service Connections** in Azure DevOps, see [Service connections](https://docs.microsoft.com/azure/devops/pipelines/library/service-endpoints?view=azure-devops).</span></span>

<span data-ttu-id="2fed5-108">このトピックは、[Azure Pipelines](https://docs.microsoft.com/azure/devops/pipelines/get-started/pipelines-get-started?view=azure-devops) の実用的な知識を持っていることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="2fed5-108">This topic assumes that you have a working knowledge of [Azure Pipelines](https://docs.microsoft.com/azure/devops/pipelines/get-started/pipelines-get-started?view=azure-devops).</span></span>

> [!NOTE]
> <span data-ttu-id="2fed5-109">これらのステップをパイプラインに追加するには、[Dynamics 365 Finance and Operations ツール](https://marketplace.visualstudio.com/items?itemName=Dyn365FinOps.dynamics365-finops-tools)拡張機能が有効になっていて、Azure DevOps アカウントで Azure DevOps が有効化およびインストールされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="2fed5-109">Before you can add these steps to a pipeline, the [Dynamics 365 Finance and Operations Tools](https://marketplace.visualstudio.com/items?itemName=Dyn365FinOps.dynamics365-finops-tools) extension for Azure DevOps must be enabled and installed in the Azure DevOps account.</span></span> <span data-ttu-id="2fed5-110">組織に拡張機能をインストールする方法の詳細については、[拡張機能のインストール](https://docs.microsoft.com/azure/devops/marketplace/install-extension?view=azure-devops&tabs=browser)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2fed5-110">For more information about how to install an extension for an organization, see [Install extensions](https://docs.microsoft.com/azure/devops/marketplace/install-extension?view=azure-devops&tabs=browser).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="2fed5-111">必要条件</span><span class="sxs-lookup"><span data-stu-id="2fed5-111">Prerequisites</span></span>

<span data-ttu-id="2fed5-112">対話する 1 つ以上の LCS プロジェクトへのアクセス許可を持つユーザーの資格情報が必要です。</span><span class="sxs-lookup"><span data-stu-id="2fed5-112">You'll need credentials for a user that has access to one or more LCS projects you wish to interact with.</span></span> <span data-ttu-id="2fed5-113">ユーザーが事前に LCS にログインしていることを確認し、Azure DevOps から通信元となるプロジェクトのダッシュボードを開きました。</span><span class="sxs-lookup"><span data-stu-id="2fed5-113">Ensure the user has previously logged in to LCS successfully, and opened the dashboard of the project you'll interact with from Azure DevOps.</span></span>

> [!NOTE]
> <span data-ttu-id="2fed5-114">LCS はサービス間認証をサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="2fed5-114">LCS does not support service-to-service authentication.</span></span> <span data-ttu-id="2fed5-115">その結果、通常のユーザーの資格情報 (ユーザー名/パスワード) のみを使用できます。</span><span class="sxs-lookup"><span data-stu-id="2fed5-115">As a result, only regular user credentials (username/password) can be used.</span></span> <span data-ttu-id="2fed5-116">パイプラインは対話的に実行されないため、使用するアカウントでは多要素認証を設定することはできません。</span><span class="sxs-lookup"><span data-stu-id="2fed5-116">Since the pipelines do not run interactively, the account you'll use can not have multi-factor authentication set up.</span></span> <span data-ttu-id="2fed5-117">セキュリティ上の目的で定期的にを回転させることができる、限定アクセスと強力な資格情報を持つ別のユーザーアカウントを設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2fed5-117">We recommend to set up a separate user account with limited access and strong credentials that can be rotated reguarly for security purposes.</span></span>

<span data-ttu-id="2fed5-118">Azure DevOps からの接続をユーザーの代わりに直接 LCS に接続できるようにするには、アプリケーションを自分の Azure Active Directory (AAD) に登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2fed5-118">To allow connections from Azure DevOps directly to LCS on a user's behalf, you must register an application in your Azure Active Directory (AAD).</span></span>

1. <span data-ttu-id="2fed5-119">[クイックスタート: Microsoft ID プラットフォームを持つアプリケーションを登録する](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app) の指示に従い、新しい **リダイレクト URI** を追加します。</span><span class="sxs-lookup"><span data-stu-id="2fed5-119">Follow the instructions in [Quickstart: Register an application with the Microsoft identity platform](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app) and add a new **Redirect URI**:</span></span>

    - <span data-ttu-id="2fed5-120">**パブリック クライアント/ネイティブ (モバイル & デスクトップ)** を選択します</span><span class="sxs-lookup"><span data-stu-id="2fed5-120">Select **Public client/native (mobile & desktop)**</span></span>
    - <span data-ttu-id="2fed5-121">有効な URI を入力します (このURIは、たとえば、`http://localhost` など何でも構いません)</span><span class="sxs-lookup"><span data-stu-id="2fed5-121">Enter a valid URI (this URI can be anything, for example `http://localhost`)</span></span>

2. <span data-ttu-id="2fed5-122">LCS web Api にアクセスするためのアクセス許可をアプリケーション登録に追加します。</span><span class="sxs-lookup"><span data-stu-id="2fed5-122">Add permissions to the application registration to access the LCS web APIs.</span></span> <span data-ttu-id="2fed5-123">[Web API にアクセスするためのアクセス許可の追加](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-access-web-apis#add-permissions-to-access-web-apis) の手順に従ってください。</span><span class="sxs-lookup"><span data-stu-id="2fed5-123">Follow the instructions in [Add permissions to access web APIs](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-access-web-apis#add-permissions-to-access-web-apis).</span></span> <span data-ttu-id="2fed5-124">API のアクセス許可を要求する場合は、**自分の組織で使用する API** を選択し、**Dynamics Lifecycle Services** を検索します。</span><span class="sxs-lookup"><span data-stu-id="2fed5-124">When requesting the API permissions, select **APIs my organization uses** and search for **Dynamics Lifecycle services**.</span></span>

3. <span data-ttu-id="2fed5-125">使用するアカウントに、Azure AD でアプリケーション登録の同意が付与されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2fed5-125">Ensure that the account you'll use has given consent for the application registration in Azure AD.</span></span> <span data-ttu-id="2fed5-126">[Azure Active Directory でエンドユーザーがアプリケーションに対して同意する方法を構成する](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-user-consent#grant-admin-consent-to-enterprise-apps-in-the-azure-portal) の指示に従います。</span><span class="sxs-lookup"><span data-stu-id="2fed5-126">Follow the instructions in [Configure the way end-users consent to an application in Azure Active Directory](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-user-consent#grant-admin-consent-to-enterprise-apps-in-the-azure-portal).</span></span> <span data-ttu-id="2fed5-127">特定のユーザーを有効にするか、[テナント全体に対して管理者の同意を付与する](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-user-consent#grant-admin-consent-to-enterprise-apps-in-the-azure-portal) ことができます。</span><span class="sxs-lookup"><span data-stu-id="2fed5-127">You can either enable a specific user or [grant admin consent for the whole tenant](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-user-consent#grant-admin-consent-to-enterprise-apps-in-the-azure-portal).</span></span>

## <a name="create-the-dynamics-lifecycle-services-service-connection"></a><span data-ttu-id="2fed5-128">Dynamics Lifecycle Services (LCS) へのサービス接続を作成する</span><span class="sxs-lookup"><span data-stu-id="2fed5-128">Create the Dynamics Lifecycle Services service connection</span></span>

<span data-ttu-id="2fed5-129">パイプライン タスクから直接、またはプロジェクトの設定ページから、新しい接続を作成することができます。</span><span class="sxs-lookup"><span data-stu-id="2fed5-129">You can create a new connection from a pipeline task directly, or from your project's settings page.</span></span> <span data-ttu-id="2fed5-130">サービス接続の詳細は、[サービス接続の作成](https://docs.microsoft.com/azure/devops/pipelines/library/service-endpoints?view=azure-devops) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2fed5-130">For more information on creating service connections, see [Create a service connection](https://docs.microsoft.com/azure/devops/pipelines/library/service-endpoints?view=azure-devops).</span></span> <span data-ttu-id="2fed5-131">**Dynamics Lifecycle Services** のサービス接続ダイアログで、次の情報を入力します。</span><span class="sxs-lookup"><span data-stu-id="2fed5-131">On the **Dynamics Lifecycle Services** service connection dialog, provide the following information.</span></span>

- <span data-ttu-id="2fed5-132">認証エンドポイント: Azure クラウドのすべての Azure Active Directory (AAD) テナントに対して既定値が適用されます。</span><span class="sxs-lookup"><span data-stu-id="2fed5-132">Authentication Endpoint: The default value provided works for all Azure Active Directory (AAD) tenants in the Azure cloud.</span></span> <span data-ttu-id="2fed5-133">AAD が国内クラウドに配置されている場合は、[国内クラウド](https://docs.microsoft.com/azure/active-directory/develop/authentication-national-cloud) を参照して、正しい認証エンドポイントを見つけます。</span><span class="sxs-lookup"><span data-stu-id="2fed5-133">If your AAD is located in a national cloud,  see [Nation clouds](https://docs.microsoft.com/azure/active-directory/develop/authentication-national-cloud) to find the correct authentication endpoint.</span></span>
- <span data-ttu-id="2fed5-134">Lifecycle Services API エンドポイント: エンドポイントを提供します。</span><span class="sxs-lookup"><span data-stu-id="2fed5-134">Lifecycle Services API Endpoint: Provide the endpoint.</span></span>
- <span data-ttu-id="2fed5-135">ユーザー名: ユーザーの資格情報のメール エイリアスを指定します。</span><span class="sxs-lookup"><span data-stu-id="2fed5-135">Username: Provide the email alias of the user credentials.</span></span>
- <span data-ttu-id="2fed5-136">パスワード: ユーザーの資格情報のパスワードを入力します。</span><span class="sxs-lookup"><span data-stu-id="2fed5-136">Password: Provide the password of the user credentials.</span></span>
- <span data-ttu-id="2fed5-137">アプリケーション (クライアント) ID: アプリケーション登録用に作成した ID を AAD で事前に用意します。</span><span class="sxs-lookup"><span data-stu-id="2fed5-137">Application (Client) ID: Provide the ID previously created for your application registration in AAD.</span></span>
- <span data-ttu-id="2fed5-138">サービス接続名: 接続に意味のある名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="2fed5-138">Service connection name: Provide a meaninful name for the connection.</span></span> <span data-ttu-id="2fed5-139">この名前は、LCS 接続を必要とするパイプライン タスクの接続ドロップダウンで表示されます。</span><span class="sxs-lookup"><span data-stu-id="2fed5-139">This name will show in the connection dropdown on pipeline tasks that require an LCS connection.</span></span>
- <span data-ttu-id="2fed5-140">説明: この接続の説明を入力します (オプション)。</span><span class="sxs-lookup"><span data-stu-id="2fed5-140">Description: Provide an optional description for this connection.</span></span>

