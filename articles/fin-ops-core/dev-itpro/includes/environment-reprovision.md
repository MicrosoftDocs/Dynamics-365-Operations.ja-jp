環境間でデータベースをコピーする場合、環境再プロビジョニング ツールを実行し、すべての Retail コンポーネントを最新の状態にしない限り、コピーしたデータベースは完全には機能しません。

以下のステップに従って、環境再プロビジョニング ツールを実行します。

1. **ソフトウェア配置可能パッケージ** セクションにある自身のプロジェクトの **資産ライブラリ** で、 **インポート**を選択します。
2. 共用資産の一覧から、 **環境再プロビジョニング ツール**を選択します。
3. ターゲット環境の **環境の詳細** ページで、 **管理** > **更新プログラムを適用**を順に選択します。
4. 先ほどアップロードした **環境再プロビジョニング** ツールを選択し、 **適用** を選択してパッケージを適用します。
5. パッケージの配置の進捗を監視します。

配置可能なパッケージの適用方法についての詳細は、 [配置可能なパッケージを作成する](../deployment/create-apply-deployable-package.md)を参照してください。 配置可能パッケージを手動で適用する方法の詳細については、 [配置可能 な パッケージ を コマンド ライン から インストール する](../deployment/install-deployable-package.md)を参照してください。

> [!IMPORTANT]
> いくつかの環境固有のレコードは、データベースと一緒にソース環境からターゲット環境に移動できません。 次のレコードはターゲット環境に移動されません:
> - 小売セルフサービスのインストーラー
> - Retail Cloud Scale Unitチャネル データベース コンフィギュレーション レコード

### <a name="database-refresh-and-retail-cloud-scale-units"></a>データベースの更新と Retail Cloud Scale Unit

データベース更新の一部として (チャネル データベース フォームで) スケール ユニット チャネル データベース レコードは、環境固有のコンフィギュレーションを表すので、環境を越えて移動できません。

**Retail Cloud Scale Units** の場合は、LCS でスケール ユニットの再展開を発行して、チャネル データベース レコードを再生成できます。 詳細については [データベースの更新](../database/database-refresh.md) と [Retail Cloud Scale Unitの初期化](../deployment/Initialize-Retail-Channels.md) を参照してください。

### <a name="database-refresh-and-retail-self-service-installers"></a>データベース更新と小売セルフサービスのインストーラー

セルフサービス インストーラーはデータベースと共に移動することのできない環境固有のストレージに格納されます。

インストーラーは、配置可能なパッケージの一部として環境にアップロードされます。 Microsoft が提供するアプリケーションおよびバイナリ パッケージは、Microsoft が提供するインストーラーを含みます。 Retail SDK を介した拡張機能で生成された Retail の配置可能なパッケージは、拡張インストーラーを含みます。 データベース更新後にインストーラー セクションを利用可能にするには、データベースの更新後に必要な配置可能パッケージを環境に適用してください。
