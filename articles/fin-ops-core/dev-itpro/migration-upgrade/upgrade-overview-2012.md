---
title: AX 2012 から Finance and Operations へのアップグレード
description: このトピックでは、現在 Microsoft Dynamics AX 2012 を実行している顧客が、データとコードを Finance and Operations に移動するために使用できるプロセスについて説明します。
author: LaneSwenka
ms.date: 07/01/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: sericks
ms.custom: intro-internal
ms.search.region: Global
ms.author: laswenka
ms.search.validFrom: 2017-06-16
ms.dyn365.ops.version: Platform update 8
ms.openlocfilehash: b0fe3396a0400cb8ca148f0168e1ba2b0da9cbcd
ms.sourcegitcommit: b9c2798aa994e1526d1c50726f807e6335885e1a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/13/2021
ms.locfileid: "7343572"
---
# <a name="upgrade-from-ax-2012-to-finance-and-operations"></a>AX 2012 から Finance and Operations へのアップグレード

[!include [banner](../includes/banner.md)]

[!include [upgrade banner](../includes/upgrade-banner.md)]

Finance and Operations アプリは、Microsoft Dynamics AX 2012 を実行している顧客がデータとコードを Finance and Operations アプリに移行するために使用できるアップグレード パスを提供します。 現在、Dynamics AX 2012 R3 および AX 2012 R2 からのアップグレードがサポートされています。 アップグレード プロセスは、次の要素を基に構築されています。

- AX 2012 から既存のカスタム アプリケーション コードを継承するのに役立つツール。
- データベースを継承するのに使用できるデータ アップグレード プロセス。 したがって、完全なトランザクション履歴をアップグレードすることができます。

> [!IMPORTANT]
> 一部の [推奨されない機能](deprecated-features.md) を実行している Dynamics AX 2012 の実装は、現在アップグレードできません。 たとえば、仮想会社またはデータ パーティションのいずれかを使用しているシステムからのアップグレードはできません。 システムがアップグレードできるかどうか分からない場合は、アップグレード アナライザー ツールを実行します。 

> クラウドへの移行を開始するときは、[Dynamics 365移行プログラム](https://dynamics.microsoft.com/migration-program/)を使用した場合でも、無料で義務なしの移行評価を使用します。

## <a name="overview"></a>概要

分析、実行、および検証という 3 つの包括的なフェーズとして全体のアップグレード プロセスを視覚化することができます。

次の図は、エンド ツー エンドのアップグレード プロセス、および各フェーズの一部とみなす活動を示します。 

![アップグレード プロセス。](./media/upgrade-process.png)

Dynamics AX 2012 ソリューションを Finance and Operations アプリに正常にアップグレードするのに最も重要な要素とベスト プラクティスについては、[Dynamics AX 2012 を Finance and Operations アプリにアップグレードする](/learn/paths/upgrade-ax-2012-finance-operations/) を参照してください。

## <a name="analyze"></a>分析

分析フェーズにおける活動は、アップグレードに必要な工数を見積もるのに役立ちます。 またプロジェクト計画の準備にも役立ちます。 これらの活動は Finance and Operations を購入する前に実行できます。 必要になる工数およびリソースについてのデータ点を提供することにより、確かな情報に基づいた購買決定をするのに役立ちます。

### <a name="sign-up-for-a-preview-subscription"></a>プレビュー サブスクリプションのサインアップ

プレビュー サブスクリプションにサインアップするには、[プレビュー サブスクリプションへのサインアップ](../dev-tools/sign-up-preview-subscription.md)を参照してください。

### <a name="append-the-upgrade-methodology"></a>アップグレード方法の追加
新しい LCS プロジェクトで、プロジェクト方法を **AX 2012 を Dynamics 365 for Finance and Operations にアップグレードする** に追加します。 この方法は、特にアップグレード中の AX 2012 の顧客のためのものです。 3 つのフェーズについて詳細に説明し、プロセスに関するすべてのサポート ドキュメントへのリンクを提供します。
 
### <a name="run-the-upgrade-analyzer"></a>アップグレード アナライザーの実行
アップグレード アナライザー ツールは、AX 2012 環境に対して実行され AX 2012 環境を整えるために行なうタスクを特定して、アップグレードをより円滑にまたより安価にするのに役立ちます。

- **データ クリーンアップ** – このプロセスは、機能の損失を起こさずに削除できるデータを識別するのに役立ちます。 ツールは、クリーンアップ プロセスを実行することにより、削減できるさまざまなデータ タイプを識別します。 各データ タイプについて、クリーンアップの影響についての説明が与えられます。 その後、クリーンアップ プロセスを実行するかどうかを決定します。 サブスクリプションのコストの一部はデータベースのサイズに基づいています。 したがって、そのサイズを小さくすることにより、サブスクリプション コストのそのコンポーネントを削減し、アップグレード稼働プロセスに必要な時間も短縮できます。 データベースが小さいほうが、確実にアップグレードが高速になります。
- **SQL コンフィギュレーション** – このプロセスは、SQL コンフィギュレーションを確認して最適化を推奨します。 SQL が最適に動作するようにすることで、このプロセスはアップグレード稼働プロセスに必要な時間を短縮できます。
- **非推奨機能** – このプロセスでは、現在使用しているが Finance and Operations では使用できない機能を特定します。 したがって、このプロセスは機能のギャップを早期に発見するのに役立ちます。 また、代替案も提供します。

また、この手順の一部として、AX 2012 環境でアップグレード前のチェックリストをインストールする必要があります。 このチェックリストを使用すると、アップグレード手順に必要となるデータを入力することができます。 たとえば、アップグレード前のチェックリスト タスクの 1 つで、現在の AX 2012 ユーザーごとに Microsoft Azure Active Directory (Azure AD) サインイン情報を提供して、各ユーザーが Finance and Operations にサインインできるようにします。 

- AX 2012 R3 からアップグレードする場合は、[KB 4035163](https://go.microsoft.com/fwlink/?linkid=852255) をインストールします
- AX 2012 R2 からアップグレードする場合は、[KB 4048614](https://go.microsoft.com/fwlink/?linkid=869025) をインストールします

アップグレード アナライザー ツールの出力は、AX 2012 システム管理者のアップグレード プロジェクト計画におけるワーク ストリームになります。 詳細については、[AX 2012 からのアップグレード -  アップグレード アナライザー ツールを使用した計画](upgrade-analyzer-tool.md) を参照してください。

### <a name="run-the-code-upgrade-estimation-tools"></a>コード アップグレード見積ツールの実行
このステップでは、AX 2012 からコードを取得して新しい形式に変換し、開発者が後に解決する必要がある競合についてフィードバックを提供します。 このステップがコード アップグレードのコストの見積をする際の基礎となります。

このステップを完了するには、モデル ストア エクスポートとして AX 2012 からコードをエクスポートし、それを LCS コード アップグレード ツールにアップロードする必要があります。 コード アップグレード ツールは、コードのアップグレード バージョン、および解決の必要がある残りの競合に関するレポートを生成します。 開発者はその後、アップグレード済みのコードとレポートの両方を確認して、コード基準をアップグレードするために必要な工数を決定します。

このステップの出力は、Microsoft Dynamics AX 開発者のアップグレード プロジェクト計画におけるワークストリームを表します。

詳細については、[AX 2012 からのアップグレード - コードのアップグレード サービスを使用した工数見積](analyze-code-upgrade.md)を参照してください。

### <a name="deploy-a-demo-environment"></a>デモ環境の配置
デモ環境は、(独自のデータではない) デモ データおよび標準コード (カスタマイズなし) を含む既定の環境です。 新機能を評価し、AX 2012 で使用されているが Finance and Operations で変更された可能性がある標準プロセスの基本的なフィット ギャップ分析を実行するためにデモ環境を展開することをお勧めします。 これらのデモ環境は、Azure で配置するか、独自のハードウェア上で実行する仮想マシン (VM) としてダウンロードすることができます。 パブリック プレビュー プロジェクトをまだ使用しておりサブスクリプションをまだ購入していないので、Azure で配置する場合は Azure のサブスクリプションを提供する必要があります。

このステップの出力は、機能ユーザーおよびビジネス ユーザーのアップグレード プロジェクト計画におけるワーク ストリームを表します。

詳細については[AX 2012からのアップグレード: 分析のためのデモ環境の展開](analysis-sandbox.md)を参照してください。

### <a name="create-a-project-plan"></a>プロジェクト計画の作成
プロジェクト計画のテンプレートはアップグレード方法で提供されます。 このステップでは、分析フェーズの前のステップからの出力を使用してアップグレード プロジェクトのプロジェクト計画を作成します。 プロジェクト計画には、すべてのテストの詳細も含まれます。データ アップグレード テスト、切替テスト (切替モック)、機能テスト パス反復、およびそれらのタスクのさまざまなリソース割り当てについての詳細です。

このステージで、プロジェクト計画はアップグレードの時間とコストを理解するのに役立つデータ点を提供します。

## <a name="execute"></a>実行
実行フェーズ中は、分析フェーズ中に計画したタスクを処理します。 実行フェーズに移行するには、Finance and Operations アプリを購入する必要があり、アップグレードに使用できるリソースも必要です。

### <a name="switch-to-the-lcs-implementation-project"></a>LCS 実装プロジェクトへの切り替え
分析フェーズに使用したパブリック プレビュー プロジェクトは役目を果たしました。 破棄して構いません。 残りのステップには、分析フェーズの最後のステップで作成したプロジェクト計画のみが必要です。

Finance and Operations サブスクリプションを購入すると、新しい LCS プロジェクトへのサインアップ方法の詳細を受け取ります。 このプロジェクトは実装プロジェクトと呼ばれ、サブスクリプションを持っている間はそのテナントの新しい永続的な LCS プロジェクトになります。 このプロジェクトは、Microsoft が管理するという点で、パブリック プレビュー プロジェクトとは異なります。 したがって、このプロジェクトには次の特徴があります。

- このプロジェクトは、サンドボックスの配置および実稼働タイプの環境をサポートします。
- サンドボックスおよび実稼働タイプの環境は、お客様のスタッフではなく、Microsoft チームによって管理され、パッチが適用されます。
- すべての DevTest またはデモ環境は、引き続き Azure サブスクリプションに配置する必要があります。  すべての環境が、サンドボックスおよび実稼働環境として同じプロジェクトに含まれるように、これらの環境を LCS 実装プロジェクトから再配置することをお勧めします。 

### <a name="identify-the-project-as-an-ax-2012-upgrade"></a>プロジェクトを AX 2012 アップグレードとして識別する
LCS 実装プロジェクトに初めてサインインすると、**プロジェクト オンボード** ウィザードのガイドが表示されます。 プロジェクトの **プロジェクト設定** の横にあるナビゲーション メニューを使用して、後でいつでも **プロジェクト オンボード** ウィザードにアクセスできます。

プロジェクト オンボード ウィザードの **プロジェクト スコープ** セクションで、**レガシ システム** フィールドを使用して、プロジェクトを AX 2012 アップグレードとして指定できます。 この方法でプロジェクトを識別して、展開されるサンドボックス インフラストラクチャが、ここで説明するアップグレード プロセスと互換性があることが重要です。 プロジェクトの初期段階でこの手順を完了していないと、このプロセスと互換性のない新しいインフラストラクチャにサンドボックスを誤って展開してしまう可能性があります。 この場合、アップグレード作業が遅れる可能性があります。

### <a name="perform-the-ax-2012-preparation-tasks"></a>AX 2012 準備タスクの実行
アップグレード アナライザー ツールが検出し、アップグレード プロジェクト計画で文書化されているタスクを完了します。 Microsoft Dynamics AX のシステム管理者およびデータベース管理者 (DBA) がこれらのタスクを完了する必要があります。

[AX 2012 からのアップグレード - データ アップグレードのためのアップグレード前のチェックリスト](prepare-data-upgrade.md)

### <a name="perform-code-upgrade"></a>コード アップグレードの実行
分析フェーズのコード アップグレードの見積ステップ中に計画されたタスクを完了します。 開発者がこれらのタスクを実行する必要があります。

この時点から、AX 2012 のコード変更は凍結する必要があります。 AX 2012 では緊急コード変更のみが許可されることになります。 変更が行われた場合は、新しいコード基準に手動でポートする必要があります。

### <a name="develop-new-code"></a>新しいコードの開発
分析フェーズの「デモ環境の配置」ステップ中に実行されたフィットギャップ分析からのタスクを完了します。 これらのタスクは恐らく、コンフィギュレーションを定義する機能タスクと取り込もうとしている新機能に関連したカスタマイズの開発タスクの混合になります。

### <a name="data-upgrade-development-environment"></a>データ アップグレード (開発環境)
コード アップグレード タスクを完了した後は、 データベースを初めてアップグレードできます。 この初回のアップグレードは開発環境で行ない、この段階で検知された問題を容易に修正あるいはデバッグできるようにします。 開発環境では、問題を即座にデバッグし、コードを調整し、アップグレードを数分以内に再実行することができます。 より規模の大きいサンドボックス環境ではこの機敏性は得られず、問題の修正やデバッグ、コードの更新、更新済コードの配置、およびアップグレードの再実行に少なくとも数時間を要します。

次の図がプロセスを示します。 AX 2012 データベースをバックアップして、それを Azure にアップロードし、Finance and Operations 環境に復元してからデータ アップグレードを実行するだけです。

![開発環境でのデータ アップグレード。](./media/data-upgrade-dev.png)
 
データ アップグレードは、特殊なタイプの配置可能パッケージを介して行われます。 同じメカニズムを使用して、新しいコードを 1 つの環境から別の環境へと配置します。

このプロセス中にデータベース内のデータ変換に使用される基礎フレームワークは、**ReleaseUpdatexxx** クラスを実行する X++ バッチ ジョブに基づく AX 2012 のアップグレード フレームワークと大部分は同じです。

詳細については、[AX 2012 からのアップグレード - 開発環境でのデータ アップグレード](data-upgrade-2012.md) を参照してください。

> [!NOTE]
> AX 2012 R3 アップグレードの一部として Commerce 機能とストア内コンポーネントを使用している場合は、Dynamics 365 Commerce [段階的なロールアウト (N-1) のインストール、コンフィギュレーション、および切替のガイド](../../../commerce/dev-itpro/n-1-installation-configuration.md)を確認することをお勧めします。 開発環境では、小売パラメーターを初期化し、CDX スケジュールを再初期化し、データ アップグレード パッケージを適用した後、最新の品質更新およびチャネル拡張機能を環境に適用する必要があります。 

### <a name="data-upgrade-sandbox-environments"></a>データ アップグレード (サンドボックス環境)
開発環境でのデータ アップグレードが完了したら、サンドボックス環境で同じプロセスを実行できます。 サンドボックス環境とは、アップグレードした AX 2012 のデータとコードを使用して、ビジネス ユーザーと機能チームのメンバーが業務プロセスをテストできる環境のことです。

次の図では、サンドボックス環境でデータ アップグレードを実行するためのプロセスを示します。 ここでの違いは、従来の SQL バックアップに代わって bacpac ツールが使用されることです。 Microsoft SQL Server と Azure SQL データベース間の変換には、このツールが必要です。 これは標準 SQL ツールであり、Finance and Operations に固有のものではありません。

![サンドボックス環境でのデータ アップグレード。](./media/data-upgrade-sandbox.png)

詳細については、[AX 2012 からのアップグレード - セルフサービス環境でのデータ アップグレード](data-upgrade-self-service.md) を参照してください。

> [!NOTE]
> AX 2012 R3 アップグレードの一部として Commerce 機能とストア内コンポーネントを使用している場合は、Dynamics 365 Commerce [段階的なロールアウト (N-1) のインストール、コンフィギュレーション、および切替のガイド](../../../commerce/dev-itpro/n-1-installation-configuration.md)を確認することをお勧めします。 サンドボックス環境および開発環境では、小売パラメーターを初期化し、CDX スケジュールを再初期化し、データ アップグレード後に CSU を再初期化する必要があります。 CSU の再設定の詳細については、[Commerce Scale Unit (クラウド) の初期化](../deployment/Initialize-Retail-Channels.md)を参照してください。
 
## <a name="validate"></a>検証
検証フェーズを入力すると、アップグレード済カスタム コードとアップグレード済データを含む環境が使用できるようになります。 このフェーズでは、アップグレード済の環境が要求通りに動作することを検証してテストするプロセスを説明します。 また、稼働準備のプロセスについても説明します。

### <a name="perform-cutover-testing-and-create-a-cutover-plan"></a>切替テストの実行および切替計画の作成
ここでは _切替_ という用語を使用して、新しいシステムを作動させる最終的なプロセスを表します。 このプロセスは、AX 2012 をオフにした後、Finance and Operations をオンにする前に発生するタスクで構成されます。 

テストの目標、または *切替モック* は、切替プロセスを練習することです。 こうして、稼働への実際の切替に携わるすべての人が円滑に作業を進められるようになります。

次の 2 つの主要なワーク ストリームがあります。

- **技術的なワーク ストリーム** – このワーク ストリームは、データ アップグレードの実行プロセスです。 業務では、許可されているダウンタイムの金額に制限が適用されます。 このダウンタイム中には、どちらの製品データベースも使用できません。 技術的なワーク ストリームでは、業務でのダウンタイム制限を満たすために、データ アップグレード手順のパフォーマンス チューニングをしなければならない可能性があります。 
- **機能的なワーク ストリーム** – データのアップグレード後に、Finance and Operations 環境でいくつかのコンフィギュレーション タスクが必要になります。 技術的なタスクと共に業務のダウンタイム制限内に収まる必要があるため、これらのタスクすべては文書化および定量化し、リソースを割り当てる必要があります。

詳細については、以下を参照してください。 
- [AX 2012 からのアップグレード - アップグレード後のタスク](app-validation-process.md)
- [AX 2012 からのアップグレード - 切替テスト (切替モック)](upgrade-cutover-testing.md)

### <a name="functional-test-pass"></a>機能テストのパス
すべての業務プロセスの完全な機能テスト パスを完了します。 このテスト パスは Finance and Operations に関係するすべてのビジネス プロセスの広範な再テストになります。 これらのビジネス プロセスには、AX 2012 から継承された古いプロセスと、Finance and Operations で初めて取り込まれた新機能に関係する新しいプロセスの両方が含まれます。 

コードの品質によっては、問題修正と再テストのために機能テスト パスを何回か繰り返さなければならない可能性があります。 問題が修正されたら、関係するすべてのプロセスを確実に再テストし、下流プロセスも上流プロセスも変更による影響を受けないようにします。

詳細については、[AX 2012 からのアップグレード - 機能テスト パス](upgrade-functional-validation.md)を参照してください。

### <a name="pre-go-live-checklist"></a>稼働前のチェックリスト
稼働前のチェックリストは、稼働への最終的な切替中のエラーの可能性を減らすのに役立つ推奨手順です。 稼働期限の 1 週間前に、AX 2012 で (つまり \<module\>\Setup で) コンフィギュレーション変更を中止します。 コンフィギュレーション変更に対するこの制限は、単なる手順にすぎません。 Microsoft Dynamics AX のシステム管理者は、この時点ではこのタイプの変更を保留にすることに同意します。

Finance and Operations コード基準でコード変更を凍結することもお勧めします。 評価されて、稼働をブロックしないことが示されている場合を除いて、さらなる変更は許可されるべきではありません。  

コンフィギュレーションの制限およびコード凍結が実行されたら、最終的に切替前にデータ アップグレードを実行する必要があります。 このようにして、すべてが期待通りに動作することを確認できます。 

詳細については、「[検証 - 稼働の準備](upgrade-go-live-prep.md)」を参照してください。

### <a name="go-live"></a>Go live
標準またはプレミア承認テスト環境 (サンドボックス レベル 2 またはそれ以上) でアップグレード テストを正常に完了した場合、および正常にテスト切替を完了した後、実稼働環境をアップグレードして稼働するその時が来ました。 

*切替* という用語は、新しいシステムを稼働させる最後のプロセスに使用します。 この切替プロセスは、Dynamics AX 2012 をオフにした後、Finance and Operations をオンにする前に発生するタスクで構成されます。 

詳細については、[AX 2012 からのアップグレード - 切替プロセス (Go live)](2012-upgrade-cutover.md) を参照してください


## <a name="supported-upgrade-paths"></a>サポートされるアップグレード パス
Finance and Operations アプリのクラウド バージョンへのアップグレードは、AX 2012 R2 および AX 2012 R3 からサポートされています。 

Dynamics AX 2012 RTM からのアップグレードは現在サポートされていません。 [Dynamics 365 Finance + Operations (on-premises) への AX 2012 のデータ アップグレード プロセス](on-prem-upgrade-2012.md) で記載されているようにオンプレミス バージョンへのアップグレードがサポートされます。 

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
