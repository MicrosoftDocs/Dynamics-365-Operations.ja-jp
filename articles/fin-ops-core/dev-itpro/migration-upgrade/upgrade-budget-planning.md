---
title: 予算計画のアップグレード
description: このトピックでは、どのような再コンフィギュレーションが必要かを説明し、アップグレードの完了後に考慮すべき新機能についても説明します。
author: panolte
manager: AnnBe
ms.date: 04/10/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Application User
ms.reviewer: sericks
ms.custom: 272923
ms.assetid: 17cdfe74-bdfd-466a-9bdd-c12583f250c7
ms.search.region: Global
ms.author: panolte
ms.dyn365.ops.version: Version 1611
ms.search.validFrom: 2016-11-30
ms.openlocfilehash: 1b1ac233feb124fea261f65f16656fea1ac2ae37
ms.sourcegitcommit: f8bac7ca2803913fd236adbc3806259a17a110f4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/06/2021
ms.locfileid: "5127182"
---
# <a name="upgrade-budget-planning"></a>予算計画のアップグレード

[!include [banner](../includes/banner.md)]

Microsoft Dynamics AX 2012 および Dynamics 365 Finance 間の予算計画には大きな違いがあります。 一部の機能はアップグレードされていないため、再コンフィギュレーションが必要です。 このトピックでは、どのような再コンフィギュレーションが必要かを説明し、アップグレードの完了後に考慮すべき新機能についても説明します。  

Finance の予算計画には、AX 2012 で使用できなかった多くの拡張機能があります。 このトピックでは、アップグレードを行う顧客に必要な変更について説明します。 アップグレード プロセス中に考慮すべき新機能も示されています。 変更の範囲のために、既存の予算計画は、このトピックの説明にある変更が行われるまで開くことができません。 ただし、レポートは作業を続行でき、追加の変更は必要ありません。

## <a name="overview-of-changes"></a>変更の概要
Finance and Operations の予算作成に大幅な変更が加えられています。 これらの変更は、予算作成をより簡単にコンフィギュレーションし、再利用の可能性を高め、年次メンテナンスと設定を削減することを目的としています。 AX 2012 の次の領域は、Finance にはもう存在しません。

-   予算計画テンプレート (予算計画のコンフィギュレーション)
-   予算計画フォルダー (予算計画のコンフィギュレーション)
-   シナリオの制約 (予算計画のコンフィギュレーション)
-   予算計画ステージ ルールとテンプレートのためのテンプレート (予算計画プロセス)
-   ワークシート テンプレートのマトリックス フィールド
-   予算計画 Microsoft Excel テンプレート ウィザード

いくつかの新しい概念は、以前の機能から直接アップグレードすることはできません。 したがって、これらの新しい概念に対応するいくつかの再コンフィギュレーションを完了する必要があります。 次のセクションでは、以前のリストの品目に取って代わった概念について説明します。

### <a name="columns"></a>列

列は、Excel テンプレートおよびマトリックス フィールドの一部を置き換える新しい概念です。 列は、期間、月、四半期、年、またはすべての時間を表すことができます。 時間参照は、動的です。 これは、予算計画に関連する相対的な期間または年を指します。 たとえば、 **前年度 1 月** 列は、年 -1 に対して会計年度期間 1 を 参照します。 列は、実績または予算要求などの予算計画シナリオに固有です。

### <a name="layouts"></a>レイアウト

レイアウトは、Excel テンプレートに置き換わる新しい概念です。 レイアウトには、どの予算または実績データおよび期間を表示するかを定義する列が含まれています。 レイアウトは、クライアントと Excel アドインの間でも共有されます。 したがって、Finance and Operations クライアントでデータの入力または表示を行う際のユーザー エクスペリエンスは、AX 2012 のユーザー エクスペリエンスよりも優れています。 Finance クライアントでデータを入力するのに、トランザクション ビューで単一のシナリオの表示と入力に制限されることはなくなりました。 代わりに、比較ビューにより、簡単に複数の期間と勘定の金額を同時に表示し、入力することができます。 通貨、コメント、およびその他のオプション データを入力し表示できるように、レイアウトを定義することもできます。 レイアウトでは、どの勘定分析コードと分析コードの説明を表示するかを定義することもできます。 レイアウトには、テンプレートのどの列が編集できるか、またどの列が Excel で利用可能なのかを定義するシナリオの制約も組み込まれています。 レイアウトを定義した後に、テンプレートが生成されます。 このテンプレートは、さらに、対応する Excel テンプレートを作成します。 Excel テンプレートを編集して、より多くのフォーミュラと書式を反映させることができるようになり、さらにそれをもう一度アップロードできます。 レイアウトはその後、**予算計画プロセス** ページの各ステージ ルールに割り当てられます。 したがって、レイアウトは、同様の方法で割り当てられ使用されていたテンプレートに取って代わります。

### <a name="budget-planning-processes"></a>予算計画プロセス

予算の計画プロセスは、ほとんど AX 2012 と同じです。 最も重要な変更は、テンプレートがレイアウトに置換されることです。 以前に AX 2012 で完了したプロセスがあれば、そのプロセスは変更することができるように、進行中のステータスに更新されます。 クライアント内で計画が開かれたとき、どのシナリオと期間を表示するかを決定するため、各ステージ ルールで必要とされるレイアウトを割り当てる必要があります。 レイアウトでは、予算を表示するため、Dynamic 365 Finance の外部でどの Excel テンプレートが開かれるかも決定します。 **既定の勘定構造** は予算計画プロセスのための新しい必須フィールドです。 各予算計画プロセスのために、予算作成に使用する基本勘定構造を割り当てます。

### <a name="attachments"></a>アタッチメント

AX 2012 では、妥当性ドキュメントは添付ファイル フォルダーに保存されました。 以前の妥当性ドキュメントはどれもアップグレードされません。 妥当性ドキュメントはデータベースに保存されるようになりました。 この情報をアップグレード バージョンに保存するには、アクション ペインの **妥当性** ボタンを使用して、各計画の最終妥当性ドキュメントを添付ファイルとしてアップロードします。 AX 2012 では、各予算計画の Excel ワークシートはテンプレートに基づいて作成されました。 Finance では、すべての計画がレイアウトのコピーを開きます。 ただし、Excel ファイルへの変更は保存されません。 フォーミュラあるいは計画ごとに使用された補足情報はすべて、コメント、妥当性ドキュメント、または他の補足的なプロセスを通じて追加される必要があります。

## <a name="configuring-an-upgraded-environment-from-ax-2012"></a>AX 2012 からアップグレードされた環境のコンフィギュレーション
アップグレードされたシステムをどのようにコンフィギュレーションするか決定できるように、次の例では、AX 2012 デモ データからアップグレードされた予算プロセスを使用します。 列の既定のコンフィギュレーション データは、アップグレード プロセスを支援するために作成されました。 コンフィギュレーション要件を満たさない場合、この既定のデータは更新もしくは削除できます。 **注:** システムに設定されない新しい必須フィールドがあります。 **予算計画のコンフィギュレーション** ページなどのページで問題が起きて移動できなくなった場合は、ブラウザーを閉じて再度別のページで開き、正しい順序で詳細を入力します。 まだ設定されていない必須フィールドがあります。 したがって、すべてがコンフィギュレーションされ、すべての必須フィールドが設定されるまでは、問題が発生する可能性があります。 このトピックでは、必要に応じてこれらのフィールドを設定する方法について説明します。 これらの必須フィールドの例を次に示します。

-   **予算計画プロセス** ページ: **既定の勘定構造** フィールド
-   **予算計画プロセス** ページ: **予算計画ステージ ルールとレイアウト** クイック タブの **レイアウト** フィールド

### <a name="define-columns-and-layouts"></a>列とレイアウトの定義

1. **予算計画のコンフィギュレーション** ページで **列** タブをクリックします。アップグレードの一環として、予算計画の明細行に基づき、新しい列が自動的に作成されます。 列は動的な日付を使用するようになり、予算計画プロセスで定義されている会計年度から時刻と年を補正します。 **注:** パフォーマンス上の理由で、アップグレード中にすべての予算サイクルは会計年度ではなく暦年を表示すると想定されます。 会計年度を使用する場合は、列が会計年度に正しくマップされるよう編集を行う必要があります。 たとえば、AX 2012 には次の要素が存在していました。
   -   予算計画シナリオ: 実績、ベースライン、予算要求、承認済予算
   -   2017 年のすべてのシナリオのための予算計画ライン、および 2017 年と 2016 年両方の実績

   次の列が Finance and Operations で作成されます。

   | 列名    | 予算計画シナリオ | 列の期間 | 年度相殺 |
   |----------------|----------------------|--------------------|-------------|
   | 1 月シナリオ 1 | 実績              | 1                  | 0           |
   | 1 月シナリオ 2 | ベースライン             | 1                  | 0           |
   | 1 月シナリオ 3 | 予算要求       | 1                  | 0           |
   | 1 月シナリオ 4 | 承認済予算      | 1                  | 0           |
   | 1 月シナリオ 5 | 実績              | 1                  | -1          |
   | 2 月シナリオ 1 | 実績              | 1                  | 0           |
   | ...            | ...                  | ...                | ...         |

   この例では、**1 月シナリオ 1** という名前の列が、1 月のトランザクションが存在する最新の予算計画トランザクション データ用に作成されています。 データを持つ各シナリオ用に、同様の列が作成されます。 列がその年のすべての期間存在すると、前年度用の列が作成されます。
2. クライアント内で手動で、または予算計画の列のデータ エンティティを示す Excel アドインを使用して一括更新のいずれかを行って、列の名前と説明、およびその他の詳細を変更します。 以前マトリックス フィールドに対して設定されていたすべてのフィルターは、列の中で設定されるようになります。
3. 新しい予算計画レイアウトを作成します。 レイアウトは、Excel およびクライアントで表示されるビューを定義する複数の列を指しています。 まず、レイアウトには、どの財務分析コードを入力するかを決定するため、勘定分析コード セットを指定することが必要です。 分析コード セットを指定した後、**説明** をクリックして、レイアウトに含める分析コードの説明を選択します。
4. **レイアウト要素** クイック タブで **追加** をクリックし、通貨、コメント、または収益対経費行を決定する予算クラスなど、行ごとにメタデータを追加します。 次に、期間、およびこの予算サイクルとステージに適用されるシナリオ用の列を追加します。 クライアント内で、または予算計画レイアウト要素のデータ エンティティを示す Excel アドインを使用して、手動でこれらの変更を加えることができます。
5. 各レイアウト要素に対し、列を編集可能にする必要があるかどうか、および列をこのレイアウトの Excel ブックにも表示する必要があるかどうかを選択します。 **注:** 履歴計画の場合、そのプロセスの任意の予算計画シナリオの 12 か月の列を表示するレイアウトを考慮できるかもしれません。

### <a name="update-budget-planning-processes-to-use-the-appropriate-layout-for-each-budget-stage"></a>各予算ステージに適切なレイアウトを使用するための予算計画プロセスの更新

1.  **予算計画プロセス** ページで、コンフィギュレーションするプロセスを選択します。
2.  アクション ペインで、 **編集** をクリックします。
3.  この予算プロセス用の既定の勘定構造を指定します。 **既定の勘定構造** は設定する必要がある新しい必須フィールドです。
4.  **予算計画ステージ ルールとレイアウト** クイック タブの **レイアウト** フィールドで、以前にコンフィギュレーションされた、このステージに適したレイアウトを選択します。
5.  続けて、さまざまな予算計画ステージ用の同じまたは異なるレイアウトを選択し、変更を保存します。

## <a name="additional-features-to-consider-in-your-budgeting-process"></a>予算作成プロセスで考慮すべき追加機能
### <a name="budget-planning-workspace"></a>予算計画ワークスペース

このワークスペースは、予算の所有者および個々の予算寄与者の両方のために設計されています。 確認が必要なすべての予算ドキュメントへのリンクがあります。 また、レポートおよび予算プロセスの主要業績評価指標 (KPIs) もあります。 予算管理者は、**予算作成パラメーター** ページで、すべてのユーザーの現在の予算計画プロセスを定義できます。 **ワークスペースの設定** タブの **予算計画** クイック タブには、予算計画プロセスを選択できるフィールドが含まれています。

### <a name="alternate-layouts"></a>代替レイアウト

代替レイアウトは、さまざまなレイアウトで計画を表示できる新しい機能です。 1 つまたは複数のレイアウトがオプションとして提供できます。 月ごとのレイアウト、または四半期ごとのレイアウトで予算計画を表示できます。 **予算計画ステージ ルールとレイアウト** クイック タブの **予算計画プロセス** ページで代替レイアウトを定義できます。

### <a name="budget-milestones"></a>予算のマイルストーン

予算プロセスの一環として、重要な日付や期限を理解しておくことが重要です。 説明を付けて日付をコンフィギュレーションできるようになりました。 予算作成ユーザーは、予算の編集、もしくはそれらに割り当てられている項目を表示するときに、これらの説明を参照します。

### <a name="copy-from-budget-plan-allocation"></a>予算計画配賦からのコピー

新しい配賦方法では、階層内で中間的なレベルを通過することなしに、親計画から子計画に配分できます。 この方法は、以前に予算配分と承認のためだけに財務分析コードを作成した顧客に特に役立ちます。

### <a name="generating-budget-plans-from-new-budget-sources"></a>新しい予算ソースからの予算計画の生成

次のオプションは、定期的なプロセスとして追加されました。 これらのオプションでは、別のモジュールから既存のデータを開始点として使用して、予算計画を生成できます。

-   需要予測から予算計画を生成
-   供給予測から予算計画を生成
-   プロジェクトから予算計画を生成
-   予算登録から予算計画を生成

### <a name="more-complete-tracking-of-amounts"></a>金額のより完全な追跡

AX 2012 で、予算計画には、各値ごとに保存された 1 つの計画金額がありました。 Finance では、データ モデルが拡張されました。 各値ごとに、会計通貨、トランザクション通貨、およびレポート通貨金額があります。 アップグレード中に、これらの新しい列は既存のデータに自動的に入力されます。

### <a name="do-not-convert-currency-in-aggregation"></a>集約の際に通貨を換算しないでください

通常、子計画が親レベルに集計されるとき、金額はトランザクション通貨から組織の会計通貨に自動的に変換されます。 **集約の際に通貨を換算しないでください** オプションを **いいえ** に設定すると、総額は元の通貨のままになります。 したがって、このオプションは為替レートの変動の影響を受ける、より正確な調整を可能にします。

### <a name="looking-back-from-a-budget-plan-to-other-modules-that-contributed-to-the-budget"></a>予算計画から予算に寄与した他のモジュールに遡って確認

予算計画は、需要、または供給予測、プロジェクト、および他の領域から生成されます。 分析コード セット別予算計画照会には、予算計画のソースとなったデータを識別するのに役立つクエリを実行できるように、複数のオプションが含まれています。

### <a name="overwrite-or-append-to-plan-for-allocation-schedules"></a>上書きもしくは配賦スケジュールの計画への追加

配分の必要がある金額に対して複数のソースがある場合は、金額を付加的に使用するよう指定できます。 この場合、金額は、既存の金額を上書きしません。 代わりに、これらは、既存の金額に追加されます。

### <a name="default-financial-dimension-set-for-budget-planning-configuration"></a>予算計画コンフィギュレーション用の既定財務分析コード セット

**予算計画コンフィギュレーション** ページに、既定の財務分析コード セットを指定するフィールドが含まれるようになりました。 このフィールドはオプション フィールドですが、特定の照会に必要な場合があります。 レポートをグループ化、または分析コード セットごとにグループ化してフィルター処理したい時にも、必要になる場合があります。

### <a name="data-entities"></a>データ エンティティ

予算計画の高速実装を可能にするため、いくつかのデータ エンティティが追加されました。 エンティティにより、Excel を使用して多くの変更を行うこともできます。 したがって、クライアントを使用して 1 つずつ品目を作成する必要はありません。 新しいデータ エンティティの一覧を次に示します。

-   エンティティ名
-   予算パラメーター
-   予算計画パラメーター
-   予算計画シナリオ
-   予算計画ステージ
-   予算計画ワークフロー ステージ
-   予算計画の配賦スケジュール
-   予算計画ステージ配賦
-   予算計画の優先順位
-   予算計画列
-   予算計画レイアウトの要素




