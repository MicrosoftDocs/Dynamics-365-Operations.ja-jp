---
title: データベースの更新
description: このトピックでは、Microsoft Dynamics 365 Finance のデータベースの更新を実行する方法について説明します。
author: LaneSwenka
manager: AnnBe
ms.date: 09/22/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: IT Pro, Developer
ms.reviewer: sericks
ms.search.scope: Operations
ms.custom: 257614
ms.assetid: 558598db-937e-4bfe-80c7-a861be021db1
ms.search.region: Global
ms.author: laswenka
ms.search.validFrom: 2016-09-30
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 1c31d92410a3aca95dcbd626e913a684c285e57e
ms.sourcegitcommit: 8fe59d216154dbed1208274f44707465b668a8e0
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/22/2020
ms.locfileid: "3830733"
---
# <a name="refresh-database"></a><span data-ttu-id="e6add-103">データベースの更新</span><span class="sxs-lookup"><span data-stu-id="e6add-103">Refresh database</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="e6add-104">サンドボックス ユーザー受け入れテスト (UAT) 環境に対するデータベースの更新の実行に、Microsoft Dynamics Lifecycle Services (LCS) を使用することができます。</span><span class="sxs-lookup"><span data-stu-id="e6add-104">You can use Microsoft Dynamics Lifecycle Services (LCS) to perform a refresh of the database to a sandbox user acceptance testing (UAT) environment.</span></span> <span data-ttu-id="e6add-105">データベースの更新対象となるサンド ボックス UAT 環境に、本番環境のトランザクションおよび財務報告データベースをコピーできます。</span><span class="sxs-lookup"><span data-stu-id="e6add-105">A database refresh lets you copy the transactional and financial reporting databases of your production environment into the target, sandbox UAT environment.</span></span> <span data-ttu-id="e6add-106">別のサンドボックス環境を使用する場合は、その環境から対象のサンドボックス UAT 環境にデータベースをコピーすることもできます。</span><span class="sxs-lookup"><span data-stu-id="e6add-106">If you have another sandbox environment, you can also copy the databases from that environment to your target, sandbox UAT environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e6add-107">生産報告を目的としてサンドボックス環境に生産のデータをコピーすることはできません。</span><span class="sxs-lookup"><span data-stu-id="e6add-107">Copying production data to your sandbox environment for the purpose of production reporting is not supported.</span></span>

## <a name="self-service-database-refresh"></a><span data-ttu-id="e6add-108">データベースのセルフ サービスエ更新</span><span class="sxs-lookup"><span data-stu-id="e6add-108">Self-service database refresh</span></span>
<span data-ttu-id="e6add-109">人手または手動のプロセスに依存しないでお客様にデータ アプリケーション ライフサイクル管理 (*DataALM* とも呼ばれます) 機能を提供することを目標として、Lifecycle Services チームは自動化された**データベースの更新**アクションを導入しました。</span><span class="sxs-lookup"><span data-stu-id="e6add-109">With the goal of providing Data Application Lifecycle Management (also referred to as *DataALM*) capabilities to our customers without relying on human or manual processes, the Lifecycle Services team has introduced an automated **Refresh database** action.</span></span> <span data-ttu-id="e6add-110">このプロセスの概要を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="e6add-110">This process is outlined below:</span></span>

1. <span data-ttu-id="e6add-111">**環境の詳細** ページで 対象のサンドボックスを確認し 、メニューオプションの **メンテナンス** \> **データベースの移動** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e6add-111">Visit your target sandbox on the **Environment Details** page, and click the **Maintain** \> **Move database** menu option.</span></span>
2. <span data-ttu-id="e6add-112">**データベースの選択** オプションを選択し、ソース環境を選択します。</span><span class="sxs-lookup"><span data-stu-id="e6add-112">Select the **Refresh database** option and choose your source environment.</span></span>
3. <span data-ttu-id="e6add-113">警告に注意し、ソース環境からコピーされていないデータの要素の一覧を確認します。</span><span class="sxs-lookup"><span data-stu-id="e6add-113">Note the warnings and review the list of data elements that are not copied from the source environment.</span></span>
4. <span data-ttu-id="e6add-114">更新操作がすぐに開始されます。</span><span class="sxs-lookup"><span data-stu-id="e6add-114">The refresh operation will begin immediately.</span></span>

### <a name="refresh-operation-failed"></a><span data-ttu-id="e6add-115">更新操作が失敗しました</span><span class="sxs-lookup"><span data-stu-id="e6add-115">Refresh operation failed</span></span>
<span data-ttu-id="e6add-116">失敗した場合、ロールバックを実行するオプションを使用できます。</span><span class="sxs-lookup"><span data-stu-id="e6add-116">In case of failure, the option to perform a rollback is available.</span></span>  <span data-ttu-id="e6add-117">工程が最初に失敗した後に**ロールバック** オプションをクリックすると、対象となるサンドボックス環境が更新の開始前の状態に戻されます。</span><span class="sxs-lookup"><span data-stu-id="e6add-117">By clicking the **Rollback** option after the operation has initially failed, your target sandbox environment will be restored to the state it was before the refresh began.</span></span> <span data-ttu-id="e6add-118">Azure SQL ポイントインタイム復元機能により、データベースを復元できるようになります。</span><span class="sxs-lookup"><span data-stu-id="e6add-118">This is made possible by the Azure SQL point-in-time restore capability to restore the database.</span></span> <span data-ttu-id="e6add-119">新しく更新されたデータでデータベースの同期を完了できないをターゲット サンドボックスにカスタマイズがある場合は、これがよく必要になります。</span><span class="sxs-lookup"><span data-stu-id="e6add-119">This is often required if a customization, that is present in the target sandbox, cannot complete a database synchronization with the newly refreshed data.</span></span>

<span data-ttu-id="e6add-120">失敗の根本原因を特定するには、ロールバック操作を開始する前に、使用可能なボタンを使用して Runbook ログをダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="e6add-120">To determine the root cause of the failure, use the available buttons to download the runbook logs before you start the rollback operation.</span></span>  

### <a name="data-elements-that-arent-copied-during-refresh"></a><span data-ttu-id="e6add-121">更新中にはコピーされないデータ要素</span><span class="sxs-lookup"><span data-stu-id="e6add-121">Data elements that aren't copied during refresh</span></span>
<span data-ttu-id="e6add-122">実稼働環境をサンドボックス環境に、またはサンドボックス環境を別のサンドボックス環境に更新するときは、ターゲット環境にコピーされない特定のデータベース要素があります。</span><span class="sxs-lookup"><span data-stu-id="e6add-122">When refreshing a production environment to a sandbox environment, or a sandbox environment to another sandbox environment, there are certain elements of the database that are not copied over to the target environment.</span></span> <span data-ttu-id="e6add-123">これらの要素として次のものがあります。</span><span class="sxs-lookup"><span data-stu-id="e6add-123">These elements include:</span></span>

* <span data-ttu-id="e6add-124">LogisticsElectronicAddress テーブル内の電子メール アドレス。</span><span class="sxs-lookup"><span data-stu-id="e6add-124">Email addresses in the LogisticsElectronicAddress table.</span></span>
* <span data-ttu-id="e6add-125">BatchJobHistory、BatchHistory、および BatchConstraintHistory テーブルのバッチ ジョブ履歴。</span><span class="sxs-lookup"><span data-stu-id="e6add-125">Batch job history in the BatchJobHistory, BatchHistory, and BatchConstraintHistory tables.</span></span>
* <span data-ttu-id="e6add-126">SysEmailParameters テーブルの SMTP 中継サーバー。</span><span class="sxs-lookup"><span data-stu-id="e6add-126">SMTP Relay server in the SysEmailParameters table.</span></span>
* <span data-ttu-id="e6add-127">PrintMgmtSettings と PrintMgmtDocInstance テーブルの印刷管理設定。</span><span class="sxs-lookup"><span data-stu-id="e6add-127">Print Management settings in the PrintMgmtSettings and PrintMgmtDocInstance tables.</span></span>
* <span data-ttu-id="e6add-128">SysServerConfig、SysServerSessions、SysCorpNetPrinters、SysClientSessions、BatchServerConfig、および BatchServerGroup テーブル内の環境固有のレコード。</span><span class="sxs-lookup"><span data-stu-id="e6add-128">Environment-specific records in the SysServerConfig, SysServerSessions, SysCorpNetPrinters, SysClientSessions, BatchServerConfig, and BatchServerGroup tables.</span></span>
* <span data-ttu-id="e6add-129">DocuValue テーブル内のドキュメント添付ファイル。</span><span class="sxs-lookup"><span data-stu-id="e6add-129">Document attachments in the DocuValue table.</span></span> <span data-ttu-id="e6add-130">これらの添付ファイルには、ソース環境で上書きされたすべての Microsoft Office テンプレートが含まれます。</span><span class="sxs-lookup"><span data-stu-id="e6add-130">These attachments include any Microsoft Office templates that were overwritten in the source environment.</span></span>
* <span data-ttu-id="e6add-131">管理者以外のすべてのユーザーは **無効** のステータスに設定されます。</span><span class="sxs-lookup"><span data-stu-id="e6add-131">All users except the admin will be set to **Disabled** status.</span></span>
* <span data-ttu-id="e6add-132">すべてのバッチ ジョブは、 **保留** 状態に設定されます。</span><span class="sxs-lookup"><span data-stu-id="e6add-132">All batch jobs are set to **Withhold** status.</span></span>
* <span data-ttu-id="e6add-133">すべてのユーザーのパーティション値は "初期" パーティション レコード ID にリセットされます。</span><span class="sxs-lookup"><span data-stu-id="e6add-133">All users will have their partition value reset to the "initial" partition record ID.</span></span>
* <span data-ttu-id="e6add-134">別のデータベースサーバーでは解読できないため、すべての Microsoft 暗号化フィールドはクリアされます。</span><span class="sxs-lookup"><span data-stu-id="e6add-134">All Microsoft-encrypted fields will be cleared, because they can't be decrypted on a different database server.</span></span> <span data-ttu-id="e6add-135">次の例は、sysemailsmtppasswordテーブルの **パスワード** フィールドです。</span><span class="sxs-lookup"><span data-stu-id="e6add-135">An example is the **Password** field in the SysEmailSMTPPassword table.</span></span>

<span data-ttu-id="e6add-136">これらの要素は、環境固有のものであるためコピーされません。</span><span class="sxs-lookup"><span data-stu-id="e6add-136">Some of these elements aren't copied because they are environment-specific.</span></span> <span data-ttu-id="e6add-137">この例には、BatchServerConfigおよびSysCorpNetPrintersの各レコードが含まれます。</span><span class="sxs-lookup"><span data-stu-id="e6add-137">Examples include BatchServerConfig and SysCorpNetPrinters records.</span></span> <span data-ttu-id="e6add-138">その他の要素は、サポート チケットのデータ量が多くなる懸念があるためコピーされません。</span><span class="sxs-lookup"><span data-stu-id="e6add-138">Other elements aren't copied because of the volume of support tickets.</span></span> <span data-ttu-id="e6add-139">たとえば、簡易メール転送プロトコル (SMTP) はUAT環境でも有効になっているため、重複する電子メールが送信されてしまう可能性があります。また、バッチジョブも有効になっているため、無効な統合メッセージが送信されてしまう可能性もあるため、管理者がポストリフレッシュクリーンアップを行う前にユーザーが有効化されてしまう可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e6add-139">For example, duplicate emails might be sent because Simple Mail Transfer Protocol (SMTP) is still enabled in the UAT environment, invalid integration messages might be sent because batch jobs are still enabled, and users might be enabled before admins can perform post-refresh cleanup activities.</span></span>

### <a name="environment-administrator"></a><span data-ttu-id="e6add-140">環境管理者</span><span class="sxs-lookup"><span data-stu-id="e6add-140">Environment administrator</span></span>
<span data-ttu-id="e6add-141">対象となる環境のシステム管理者アカウント ('Admin' の UserId) は、ターゲットの web.config file ファイルにある値にリセットされます。</span><span class="sxs-lookup"><span data-stu-id="e6add-141">The System Administrator account in the target environment (UserId of 'Admin') is reset to the value found in the web.config file on the target.</span></span>  <span data-ttu-id="e6add-142">これは、Lifecycle Services の管理者と同じ値になります。</span><span class="sxs-lookup"><span data-stu-id="e6add-142">This should be the same value as that of the Administrator from Lifecycle Services.</span></span>  <span data-ttu-id="e6add-143">これがどのアカウントになるかをプレビューするには、LCS でターゲット サンドボックスの **環境の詳細** ページにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="e6add-143">To preview which account this will be, visit your target sandbox **Environment Details** page in LCS.</span></span>  <span data-ttu-id="e6add-144">環境が最初に展開されたときに選択された **環境管理者** フィールドの値は、トランザクション データベース内のシステム管理者となるように更新されます。</span><span class="sxs-lookup"><span data-stu-id="e6add-144">The value of the **Environment Administrator** field that was selected when the environment was first deployed is updated to be the System Administrator in the transactional database.</span></span> <span data-ttu-id="e6add-145">これは、環境のテナントが環境管理者のテナントとなることも意味します。</span><span class="sxs-lookup"><span data-stu-id="e6add-145">This also means that the tenant of the environment will be that of the Environment Administrator.</span></span>

<span data-ttu-id="e6add-146">web.config ファイルを別の値に変更するために環境で管理者ユーザー プロビジョニング ツールを使用した場合は、Lifecycle Services の内容と一致しない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e6add-146">If you have used the Admin User Provisioning Tool on your environment to change the web.config file to a different value, it may not match what is in Lifecycle Services.</span></span>  <span data-ttu-id="e6add-147">別のアカウントを使用することを要求する場合、ターゲット サンドボックスを割り当て解除して削除し、別のアカウントを選択して再展開する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e6add-147">If you require a different account to be used, you will need to deallocate and delete the target sandbox, and redeploy selecting another account.</span></span> <span data-ttu-id="e6add-148">この後、データを復元するためにデータベースの更新操作をもう 1 回実行することができます。</span><span class="sxs-lookup"><span data-stu-id="e6add-148">After this, you can perform another refresh database action to restore the data.</span></span>

<span data-ttu-id="e6add-149">あるテナントから別のテナントに環境を更新することはできません。</span><span class="sxs-lookup"><span data-stu-id="e6add-149">An environment can't be refreshed from one tenant to another.</span></span> <span data-ttu-id="e6add-150">この制限は、onmicrosoft.com テナントにも適用されます。</span><span class="sxs-lookup"><span data-stu-id="e6add-150">This restriction applies even to .onmicrosoft.com tenants.</span></span> <span data-ttu-id="e6add-151">ソース環境とターゲット環境の管理者アカウントが、同じテナント ドメインからのものであることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e6add-151">You should make sure that the admin accounts in the source and target environments are from the same tenant domain.</span></span>

### <a name="conditions-of-a-database-refresh"></a><span data-ttu-id="e6add-152">データベース更新の条件</span><span class="sxs-lookup"><span data-stu-id="e6add-152">Conditions of a database refresh</span></span>
<span data-ttu-id="e6add-153">データベース更新の操作の要件および条件の一覧を次に示します。</span><span class="sxs-lookup"><span data-stu-id="e6add-153">Here is the list of requirements and conditions of operation for a database refresh:</span></span>

- <span data-ttu-id="e6add-154">更新処理では、実行対象のデータベースで削除が実行されます。</span><span class="sxs-lookup"><span data-stu-id="e6add-154">A refresh performs a delete operation on the original target database.</span></span>
- <span data-ttu-id="e6add-155">ターゲット環境は、データベースのコピーがターゲット サーバーに達するまで使用可能です。</span><span class="sxs-lookup"><span data-stu-id="e6add-155">The target environment will be available until the database copy has reached the target server.</span></span> <span data-ttu-id="e6add-156">その時点以降は、更新プロセスが完了するまで、ターゲット環境はオフラインになります。</span><span class="sxs-lookup"><span data-stu-id="e6add-156">After that point, the environment will be offline until the refresh process is completed.</span></span>
- <span data-ttu-id="e6add-157">リフレッシュは、アプリケーションおよび Financial Reporting データベースにのみ影響します。</span><span class="sxs-lookup"><span data-stu-id="e6add-157">The refresh will affect only the application and Financial Reporting databases.</span></span>
- <span data-ttu-id="e6add-158">Azure blob storage のドキュメントは、ある環境から別の環境にコピーされません。</span><span class="sxs-lookup"><span data-stu-id="e6add-158">Documents in Azure blob storage are not copied from one environment to another.</span></span> <span data-ttu-id="e6add-159">つまり、添付されたドキュメント処理ドキュメントとチームプレートは変更されず、現在の状態にとどまります。</span><span class="sxs-lookup"><span data-stu-id="e6add-159">This means that attached document handling documents and templates won't be changed and will remain in their current state.</span></span>
- <span data-ttu-id="e6add-160">管理者ユーザー、およびその他の内部サービス ユーザー アカウントを除くすべてのユーザーは使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="e6add-160">All users except the Admin user and other internal service user accounts will be unavailable.</span></span> <span data-ttu-id="e6add-161">このプロセスにより、ほかのユーザーがシステムに復帰する前に管理者ユーザーがデータを削除または難読化できます。</span><span class="sxs-lookup"><span data-stu-id="e6add-161">This process allows the Admin user to delete or obfuscate data before allowing other users back into the system.</span></span>
- <span data-ttu-id="e6add-162">管理者ユーザーは、特定のサービスまたは URL に統合エンドポイントを再接続するなど、必要な構成の変更を加える必要があります。</span><span class="sxs-lookup"><span data-stu-id="e6add-162">The Admin user must make required configuration changes, such as reconnecting integration endpoints to specific services or URLs.</span></span>
- <span data-ttu-id="e6add-163">定期的なインポートおよびエクスポート ジョブを持つすべてのデータ管理フレームワークは完全に処理され復元が開始される前にターゲット システムで停止する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e6add-163">All data management framework with recurring import and export jobs must be fully processed and stopped in the target system prior to initiating the restore.</span></span> <span data-ttu-id="e6add-164">さらに、すべての定期的なインポートおよびエクスポート ジョブが完全に処理された後に、データベースをソースから選択することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="e6add-164">In addition, we recommend that you select the database from the source after all recurring import and export jobs have been fully processed.</span></span> <span data-ttu-id="e6add-165">これにより、いずれかのシステムから Azure ストレージにオーファン ファイルが存在しないことが保証されます。</span><span class="sxs-lookup"><span data-stu-id="e6add-165">This will ensure there are no orphaned files in Azure storage from either system.</span></span> <span data-ttu-id="e6add-166">これは、データベースがターゲット環境にリストアされた後にオーファン ファイルを処理できないため重要です。</span><span class="sxs-lookup"><span data-stu-id="e6add-166">This is important because orphaned files cannot be processed after the database is restored in the target environment.</span></span> <span data-ttu-id="e6add-167">復元後、統合ジョブを再開することができます。</span><span class="sxs-lookup"><span data-stu-id="e6add-167">After the restore, the integration jobs can be resumed.</span></span>
- <span data-ttu-id="e6add-168">LCS でプロジェクト所有者または環境マネージャーのロールを持つユーザーは、すべての非実稼働環境の SQL とマシンの資格情報にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="e6add-168">Any user with a role of Project owner or Environment manager in LCS will have access to the SQL and machine credentials for all non-production environments.</span></span>
- <span data-ttu-id="e6add-169">データベースが Spartan で管理されていない場合は、データベースを同じ地理上の Azure リージョンでホストする必要があります。</span><span class="sxs-lookup"><span data-stu-id="e6add-169">The databases must be hosted in the same Azure geographic region, unless the databases are Spartan-managed.</span></span>  <span data-ttu-id="e6add-170">SQL server の完全修飾アドレスの一部に ' spartan ' が含まれていれば、データベースは Spartan に管理されています。</span><span class="sxs-lookup"><span data-stu-id="e6add-170">Databases are Spartan-managed when you see 'spartan' as part of the fully qualified SQL server address.</span></span>
- <span data-ttu-id="e6add-171">実行元の環境で割り当てられたデータベースの容量は、実行対象の環境のデータベースの最大容量よりも小さくする必要があります。</span><span class="sxs-lookup"><span data-stu-id="e6add-171">The allocated database capacity of the source environment must be less than the maximum database capacity of the target environment.</span></span>

## <a name="steps-to-complete-after-a-database-refresh-for-environments-that-use-commerce-functionality"></a><span data-ttu-id="e6add-172">コマース機能を使用する環境のデータベース更新後に実行する手順</span><span class="sxs-lookup"><span data-stu-id="e6add-172">Steps to complete after a database refresh for environments that use Commerce functionality</span></span>
[!include [environment-reprovision](../includes/environment-reprovision.md)]

## <a name="known-issues"></a><span data-ttu-id="e6add-173">既知の問題</span><span class="sxs-lookup"><span data-stu-id="e6add-173">Known issues</span></span>

### <a name="refresh-is-denied-for-environments-that-run-platform-update-20-or-earlier"></a><span data-ttu-id="e6add-174">プラットフォーム 更新プログラム 20 以前が稼働している環境では、更新処理は拒否されます</span><span class="sxs-lookup"><span data-stu-id="e6add-174">Refresh is denied for environments that run Platform update 20 or earlier</span></span>
<span data-ttu-id="e6add-175">現在、環境がプラットフォーム更新プログラム 20 またはそれ以前を実行している場合は、データベースの更新プロセスを完了することはできません。</span><span class="sxs-lookup"><span data-stu-id="e6add-175">The database refresh process can't currently be completed if the environment is running Platform update 20 or earlier.</span></span> <span data-ttu-id="e6add-176">詳細については、[現在サポートされているプラットフォーム更新の一覧](../migration-upgrade/versions-update-policy.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e6add-176">For more information, see the [list of currently supported platform updates](../migration-upgrade/versions-update-policy.md).</span></span>

### <a name="incompatible-version-of-financial-reporting-between-source-and-target-environments"></a><span data-ttu-id="e6add-177">ソース環境とターゲット環境間での財務報告の互換性のないバージョン</span><span class="sxs-lookup"><span data-stu-id="e6add-177">Incompatible version of Financial Reporting between source and target environments</span></span>
<span data-ttu-id="e6add-178">実行対象とする環境の財務報告のバージョンが実行元の環境よりも古い場合は、データベースの更新プロセス (セルフサービスまたはサービス要求経由) を正常に完了できません。</span><span class="sxs-lookup"><span data-stu-id="e6add-178">The database refresh process (self-service or via a service request) can't be completed successfully if the version of Financial Reporting in the target environment is earlier than the version in the source environment.</span></span> <span data-ttu-id="e6add-179">この問題を解決するには、両方の環境で財務報告が最新バージョンとなるように更新を行ってください。</span><span class="sxs-lookup"><span data-stu-id="e6add-179">To resolve this issue, update both environments so that they have the latest version of Financial Reporting.</span></span>

<span data-ttu-id="e6add-180">実行対象と実行元の環境でインストールしたバージョンを確認するには、 **詳細バージョン情報を表示** のリンクを確認します。これは **環境の詳細** ページにあります。</span><span class="sxs-lookup"><span data-stu-id="e6add-180">To determine the version you have installed in your source and target environments, visit the **View detailed version information** link on the **Environment Details** page.</span></span>

<span data-ttu-id="e6add-181">**MRApplicationService** を検索し、対象となる環境が実行元の環境と同等かそれ以上のバージョンあることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="e6add-181">Search for **MRApplicationService** and ensure that the target environment is greater than or equal to the source environment.</span></span>

<img src="media/FinancialReporting_Binaries2.png" width="500px" alt="MRApplicationService">

<span data-ttu-id="e6add-182">8.1またはそれ以降のバージョンを使用しているお客様</span><span class="sxs-lookup"><span data-stu-id="e6add-182">For customers that are using version 8.1 or later:</span></span>
1. <span data-ttu-id="e6add-183">**更新** のタイルメニューを開き、UAT環境を更新します。</span><span class="sxs-lookup"><span data-stu-id="e6add-183">Go to the **Update** tiles for your UAT environment.</span></span> <span data-ttu-id="e6add-184">更新内容をプロジェクトの資産ライブラリに保存します。</span><span class="sxs-lookup"><span data-stu-id="e6add-184">Save the updates to your Project asset library.</span></span>
2. <span data-ttu-id="e6add-185">このパッケージをUAT環境に適用します。</span><span class="sxs-lookup"><span data-stu-id="e6add-185">Apply this package to your UAT environment.</span></span>
3. <span data-ttu-id="e6add-186">エラーが解決されたことを確認してください。</span><span class="sxs-lookup"><span data-stu-id="e6add-186">Verify that the error has been resolved.</span></span>

<span data-ttu-id="e6add-187">8.0 またはそれ以前のバージョンを使用しているお客様</span><span class="sxs-lookup"><span data-stu-id="e6add-187">For customers that are using version 8.0 or earlier:</span></span>
1. <span data-ttu-id="e6add-188">実行元環境の環境履歴を確認します。</span><span class="sxs-lookup"><span data-stu-id="e6add-188">Review the Environment history of your source environment.</span></span> <span data-ttu-id="e6add-189">具体的には、「プラットフォームおよびアプリケーションのバイナリ パッケージ」のいずれかが実行元の環境に展開されていることを確認します。対象の環境ではありませんのでご注意ください。</span><span class="sxs-lookup"><span data-stu-id="e6add-189">Specifically, look for any "Platform and application binary package" that might have been deployed to the source environment and not the target environment.</span></span>
2. <span data-ttu-id="e6add-190">このバイナリパッケージをUAT環境に適用します。</span><span class="sxs-lookup"><span data-stu-id="e6add-190">Apply this binary package to your target environment.</span></span>
3. <span data-ttu-id="e6add-191">エラーが解決されたことを確認してください。</span><span class="sxs-lookup"><span data-stu-id="e6add-191">Verify that the error has been resolved.</span></span>

### <a name="incompatible-application-versions-between-source-and-target-environments"></a><span data-ttu-id="e6add-192">ソース環境とターゲット環境間での互換性のないアプリケーション バージョン</span><span class="sxs-lookup"><span data-stu-id="e6add-192">Incompatible application versions between source and target environments</span></span>
<span data-ttu-id="e6add-193">ソースおよびターゲット環境のアプリケーション リリースが同じでない場合は、データベースの更新プロセス (セルフサービスまたはサービス要求経由) を正常に完了できません。</span><span class="sxs-lookup"><span data-stu-id="e6add-193">The database refresh process (self-service or via service request) cannot be completed if the Application release of your source and target environment are not the same.</span></span> <span data-ttu-id="e6add-194">これは、データ アップグレード プロセスが、更新などのデータベース移動操作によって実行されず、データ損失が発生する可能性があるためです。</span><span class="sxs-lookup"><span data-stu-id="e6add-194">This is because the data upgrade process is not executed by database movement operations such as refresh, and data loss can occur.</span></span>

<span data-ttu-id="e6add-195">新しいアプリケーション バージョンにサンドボックス UAT 環境をアップグレードする場合 (たとえば、7.3 から 8.1)、必ずアップグレードを開始する前にデータベースの更新アクションを実行してください。</span><span class="sxs-lookup"><span data-stu-id="e6add-195">If upgrading your sandbox UAT environment to a newer Application version (for example, 7.3 to 8.1), be sure to perform the database refresh action prior to starting the upgrade.</span></span> <span data-ttu-id="e6add-196">サンドボックスが新しいバージョンにアップグレードされると、サンドボックス UAT 環境に古い実稼働環境データベースを復元することはできません。</span><span class="sxs-lookup"><span data-stu-id="e6add-196">After your sandbox is upgraded to the newer version, you cannot restore an older production environment database in to the sandbox UAT environment.</span></span>

<span data-ttu-id="e6add-197">逆に、実稼働環境がターゲット サンドボックスよりも新しい場合、更新前にターゲット サンドボックスをアップグレードするか、更新の実行前にそのまま割り当て解除、削除、および再展開する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e6add-197">Conversely, if your production environment is newer than your target sandbox, you will need to either upgrade the target sandbox prior to the refresh or simply deallocate, delete, and redeploy prior to performing the refresh.</span></span>
