---
title: Azure Active Directory への企業間 (B2B) のユーザーのエクスポート
description: この記事では、企業間のトランザクション機能を実装する方法について説明します。
author: paulliew
ms.date: 04/09/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: developer, IT Pro
ms.reviewer: sericks
ms.search.region: Global
ms.author: paulliew
ms.search.validFrom: 2017-10-31
ms.dyn365.ops.version: Platform update 12
ms.custom: ''
ms.assetid: ''
ms.search.form: B2BInvitationConfiguration
ms.openlocfilehash: fdf55138167d1756760a0d98e5d37b26c6a3c744
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/12/2022
ms.locfileid: "9281373"
---
# <a name="export-business-to-business-b2b-users-to-azure-active-directory"></a>Azure Active Directory への企業間 (B2B) のユーザーのエクスポート

[!include [banner](../includes/banner.md)]

企業間 (B2B) ユーザーを Azure Active Directory (Azure AD) に自動的にエクスポートすることができます。 

過去には、B2B ユーザーは .csv ファイルに手動でエクスポートされていました。 その後、Azure AD テナントの管理者は、このファイルを使用して Azure ポータルを使用してユーザーを Azure AD に手動で追加する必要があります。 

自動エクスポート機能を有効にするには、ワンタイム設定と構成プロセスを完了する必要があります。 このプロセスが完了したら、**Azure AD B2B ユーザーのプロビジョニング** ワークフロー タスクを使用して、Azure AD に B2B ユーザーを自動的にエクスポートできます。

1回限りの設定とコンフィギュレーションでは、次のことが必要になります。 
1. Azure AD で B2B 招待サービス アプリケーションを設定します。
2. 財務と運用で B2B 招待サービスの設定のコンフィギュレーションを行います。

### <a name="set-up-a-b2b-invitation-service-application-in-azure-ad"></a>Azure AD での B2B 招待サービス アプリケーションの設定
Azure AD テナントのテナント管理者は、以下の手順を完了する必要があります。

1. [Azure ポータル](https://portal.azure.com)にテナント管理者としてログオンします。 

2. **Azure Active Directory** > **プロパティ** をクリックします。

3. **ディレクトリ ID** (これはテナント ID) をコピーし、保存します。 これは後で必要になります。

4. **アプリの登録** > **新しいアプリケーションの登録** をクリックします。

5. 以下の情報を入力し、**作成** をクリックします。
    1. **名前** フィールドに、アプリケーションの名前を入力します。 例: **B2B 管理者アプリケーション**。
    2. **アプリケーション タイプ** フィールドで、**Web アプリ/API** を選択します。
    3. **サインオン URL** フィールドに、財務と運用の URL を入力します。
  
6. **アプリの登録** タブをクリックし、新しく作成したアプリケーションをクリックし、**アプリケーション ID** をコピーして保存します。 これは後で必要になります。

7. **すべての設定** > **必要なアクセス許可** > **追加** をクリックします。

8. **API アクセスの追加** ウィンドウで、次の操作を行います。
    1. **API を選択** タブをクリックします。**Microsoft Graph** をクリックし、**選択** をクリックします。
    
    2. **アクセス許可の選択** タブで、以下の **アプリケーションのアクセス許可** を選択して **はい** に設定します。
         - **ゲスト ユーザーを組織へ招待します**
         - **ディレクトリ データの読み取りと書き込み**
         - **すべてのユーザーの完全なプロファイルの読み取りと書き込み**
    
    3. 次の **委任されたアクセス許可** を選択して、**はい** に設定します。
         - **ゲスト ユーザーを組織へ招待します**
         - **ディレクトリ データの読み取りと書き込み**
         - **すべてのユーザーの完全なプロファイルの読み取りと書き込み**
         - **サインインし、ユーザー プロファイルを読み取ります**
     
    4. **選択** および **完了** をクリックします。
    
9. **必要なアクセス許可** ブレードで、**アクセス許可の付与** をクリックしてから、**はい** をクリックしてアクセス許可を割り当てます。

10. **すべての設定** > **キー** をクリックし、次の操作を行います。 
    1. **説明** フィールドにキーの名前を入力します。
    2. **期限切れ日時** フィールドで有効期間を設定します。
  
11. **保存** をクリックします。 キーを保存すると、**値** が表示されます。 

    > [!WARNING]
    > キーを保存した後 **値** キーを必ずコピーしてください。 この値はブレードを離れるときには使用できません。

### <a name="configure-the-b2b-invitation-service-settings"></a>B2B 招待サービスの設定を構成

1. 財務と運用に管理者としてログインします。

2. **B2B 招待状のコンフィギュレーション** ページに移動して、**編集** をクリックします。

3. **有効** を選択します。

4. **テナント ID** が **ディレクトリ ID** (前の手順の手順 3 でメモしたもの) と同じであることを確認します。

5. **クライアント ID** フィールドに、**アプリケーション ID** (前の手順の手順 6 でメモしたもの) を入力します。

6. 上記手順からコピーされたキー **値** を、**アプリケーション キー** フィールドに入力します。

7. 設定を **保存します**。

これで、ワークフローで **Azure AD B2B ユーザーのプロビジョニング** ワークフロー タスクの使用を開始して、Azure AD に B2B ユーザーを自動的にエクスポートできます。


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
