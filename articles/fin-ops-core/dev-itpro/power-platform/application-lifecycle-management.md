---
title: 仮想エンティティを使用するソリューションのアプリケーション ライフサイクル管理
description: このトピックでは、Finance and Operations の仮想エンティティを使用するソリューションのアプリケーション ライフサイクルについて説明します。
author: Sunil-Garg
ms.date: 07/13/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: sericks
ms.search.region: Global
ms.author: sunilg
ms.search.validFrom: 2020-10-31
ms.dyn365.ops.version: 10.0.0
ms.openlocfilehash: b004b88c11b056af897e33d50d6f4f5a5638b173
ms.sourcegitcommit: 34b478f175348d99df4f2f0c2f6c0c21b6b2660a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/16/2021
ms.locfileid: "5909014"
---
# <a name="application-lifecycle-management-for-solutions-that-use-virtual-entities"></a><span data-ttu-id="ab603-103">仮想エンティティを使用するソリューションのアプリケーション ライフサイクル管理</span><span class="sxs-lookup"><span data-stu-id="ab603-103">Application lifecycle management for solutions that use virtual entities</span></span>

[!include[banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

> [!IMPORTANT]
> <span data-ttu-id="ab603-104">この機能を使用するには、Finance and Operations アプリのバージョン 10.0.12 が必要ですが、Dataverse にはサービス更新 189 が必要です。</span><span class="sxs-lookup"><span data-stu-id="ab603-104">This functionality requires version 10.0.12 for Finance and Operations apps, while service update 189 is required for Dataverse.</span></span> <span data-ttu-id="ab603-105">Dataverse のリリース情報は、[最新バージョンの利用可能性](/business-applications-release-notes/dynamics/released-versions/dynamics-365ce#all-version-availability)ページに発行されています。</span><span class="sxs-lookup"><span data-stu-id="ab603-105">The release information for Dataverse is published on the [latest version availability page](/business-applications-release-notes/dynamics/released-versions/dynamics-365ce#all-version-availability).</span></span>

<span data-ttu-id="ab603-106">Finance and Operations 仮想エンティティを使用するエンド ツー エンド ソリューションのアプリケーション ライフサイクルには、Finance and Operations および Dataverse の両方が含まれます。</span><span class="sxs-lookup"><span data-stu-id="ab603-106">The application lifecycle for an end-to-end solution using Finance and Operations virtual entities will encompass both Finance and Operations as well as Dataverse.</span></span> <span data-ttu-id="ab603-107">詳細については、このトピックで説明します。</span><span class="sxs-lookup"><span data-stu-id="ab603-107">This topic explains this in detail.</span></span>

## <a name="solution-management"></a><span data-ttu-id="ab603-108">ソリューション管理</span><span class="sxs-lookup"><span data-stu-id="ab603-108">Solution management</span></span>

<span data-ttu-id="ab603-109">Finance and Operations の仮想エンティティは、作成されるまで Dataverse には存在しません。</span><span class="sxs-lookup"><span data-stu-id="ab603-109">Virtual entities for Finance and Operations don't exist in Dataverse until they are created.</span></span> <span data-ttu-id="ab603-110">仮想エンティティは、ソリューション内に作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ab603-110">Virtual entities must be created inside a solution.</span></span> <span data-ttu-id="ab603-111">MicrosoftOperationsERPVE ソリューションは、この目的に使用されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-111">The MicrosoftOperationsERPVE solution is used for this purpose.</span></span> <span data-ttu-id="ab603-112">このソリューションには、Finance and Operations のインスタンスから作成されたすべての仮想エンティティが含まれます。</span><span class="sxs-lookup"><span data-stu-id="ab603-112">This solution will contain all the virtual entities that are created from an instance of Finance and Operations.</span></span>

<span data-ttu-id="ab603-113">MicrosoftOperationsERPVE は、[マネージド ソリューション](/powerapps/developer/common-data-service/introduction-solutions)です。</span><span class="sxs-lookup"><span data-stu-id="ab603-113">MicrosoftOperationsERPVE is a [managed solution](/powerapps/developer/common-data-service/introduction-solutions).</span></span> <span data-ttu-id="ab603-114">定義上、マネージド ソリューションを生成した後で変更することはできません。</span><span class="sxs-lookup"><span data-stu-id="ab603-114">By definition, a managed solution can't be modified after it has been generated.</span></span> <span data-ttu-id="ab603-115">ただし、MicrosoftOperationsERPVE は、その中に含まれるコンポーネント (仮想エンティティ) を更新する特権を付与するマネージド ソリューションです。</span><span class="sxs-lookup"><span data-stu-id="ab603-115">However, MicrosoftOperationsERPVE is a managed solution that grants privileges to update the components (that is, virtual entities) that are inside it.</span></span> <span data-ttu-id="ab603-116">したがって、新しい仮想エンティティを作成時にソリューションに追加したり、既存の仮想エンティティを必要に応じて更新したりできます。</span><span class="sxs-lookup"><span data-stu-id="ab603-116">Therefore, new virtual entities can be added to the solution as they are created, and existing virtual entities can be updated as required.</span></span> <span data-ttu-id="ab603-117">ただし、マネージド ソリューションを変更する特権は、プラットフォーム自体に対してのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="ab603-117">Nevertheless, the privileges to modify the managed solution are available only to the platform itself.</span></span> <span data-ttu-id="ab603-118">ユーザーは直接ソリューションに変更を加えることはできません。</span><span class="sxs-lookup"><span data-stu-id="ab603-118">Users can't make changes directly to the solution.</span></span>

<span data-ttu-id="ab603-119">MicrosoftOperationsERPVE はマネージド ソリューションであるため、顧客、パートナー、および独立系ソフトウェアベンダー (ISV) によるソリューションは、それに対する依存関係を持つことになります。</span><span class="sxs-lookup"><span data-stu-id="ab603-119">Because MicrosoftOperationsERPVE is a managed solution, solutions from customers, partners, and independent software vendors (ISVs) can take a dependency on it.</span></span> <span data-ttu-id="ab603-120">この機能により、Finance and Operations の仮想エンティティを使用したり依存したりするソリューションに一貫したアプリケーション ライフサイクル管理 (ALM) が可能になります。</span><span class="sxs-lookup"><span data-stu-id="ab603-120">This capability allows for consistent application lifecycle management (ALM) for solutions that use and depend on the virtual entities for Finance and Operations.</span></span>

<span data-ttu-id="ab603-121">MicrosoftOperationsERPVE に依存するソリューションがエクスポートされると、ソリューションで使用される仮想エンティティのプレースホルダーがエクスポートされたソリューションに追加されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-121">When a solution that depends on MicrosoftOperationsERPVE is exported, placeholders for the virtual entities that are used in the solution are added in the exported solution.</span></span> <span data-ttu-id="ab603-122">このソリューションを別の Dataverse 環境にインポートすると、インポート プロセスによって、Dataverse 環境に関連付けられている Finance and Operations インスタンスの MicrosoftOperationsERPVE ソリューションの依存 Finance and Operations 仮想エンティティが生成されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-122">When that solution is imported into another Dataverse environment, the import process also generates the dependent Finance and Operations virtual entities in the MicrosoftOperationsERPVE solution for the Finance and Operations instance that is connected to the Dataverse environment.</span></span> <span data-ttu-id="ab603-123">したがって、MicrosoftOperationsERPVE は、それに依存するソリューションをインポートする前に、既に存在している必要があります。</span><span class="sxs-lookup"><span data-stu-id="ab603-123">Therefore, MicrosoftOperationsERPVE must already exist before a solution that depends on it is imported.</span></span> <span data-ttu-id="ab603-124">同じ日付を入力すると、エラー メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-124">Otherwise, an error message is shown.</span></span> <span data-ttu-id="ab603-125">また、依存エンティティが Finance and Operations インスタンスで使用できない場合は、そのエンティティの仮想エンティティは生成されません。</span><span class="sxs-lookup"><span data-stu-id="ab603-125">Additionally, if a dependent entity isn't available in the Finance and Operations instance, the virtual entity for that entity won't be generated.</span></span> <span data-ttu-id="ab603-126">仮想エンティティは、使用可能なエンティティに対してのみ生成されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-126">Virtual entities are generated only for entities that are available.</span></span>

> [!NOTE]
> <span data-ttu-id="ab603-127">仮想エンティティが既に Dataverse に存在し、ソリューションがインポートされ Dataverse に存在しない仮想エンティティの新しいフィールドを参照する場合は、Finance and Operations から最新のメタデータを取得するために、仮想エンティティに手動で実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ab603-127">If a virtual entity already exists in Dataverse and a solution is being imported that now references new fields in the virtual entity which does not exist in Dataverse, a manual refresh must be performed on the virtual entity to get the latest metadata from Finance and Operations.</span></span>

<span data-ttu-id="ab603-128">次の一覧は、Finance and Operations 仮想エンティティの動作を必要とし、Dataverse 環境で使用できるようにする必要があるその他のソリューションを示しています。</span><span class="sxs-lookup"><span data-stu-id="ab603-128">The following list describes other solutions that Finance and Operations virtual entities require to work, and that must be available in the Dataverse environment:</span></span>

- <span data-ttu-id="ab603-129">**MicrosoftOperationsERPCatalog**: このソリューションは、Finance and Operations インスタンスで利用可能なエンティティのカタログを提供します。</span><span class="sxs-lookup"><span data-stu-id="ab603-129">**MicrosoftOperationsERPCatalog** – This solution provides a catalog of the available entities in a Finance and Operations instance.</span></span> <span data-ttu-id="ab603-130">また、コンフィギュレーションの設定に使用される接続も提供されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-130">It also provides the connection that is used to set up a configuration.</span></span> <span data-ttu-id="ab603-131">詳細については、このトピックの後のセクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="ab603-131">For more information, see the later sections of this topic.</span></span>
- <span data-ttu-id="ab603-132">**MicrosoftOperationsVESupport**: このソリューションにより、Finance and Operations アプリの仮想エンティティ プロバイダーが提供されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-132">**MicrosoftOperationsVESupport** – This solution provides the virtual entity provider for Finance and Operations apps.</span></span> <span data-ttu-id="ab603-133">プロバイダーは、Finance and Operations アプリおよび Dataverse と通信できます。</span><span class="sxs-lookup"><span data-stu-id="ab603-133">The provider can communicate with Finance and Operations apps and Dataverse.</span></span> <span data-ttu-id="ab603-134">詳細については、次のセクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="ab603-134">For more information, see the next section.</span></span>
- <span data-ttu-id="ab603-135">**Dynamics365Company**: このソリューションは、**PrimaryCompanyContext** メタデータ値を持つすべての Finance and Operations エンティティによって参照される会社エンティティを追加します。</span><span class="sxs-lookup"><span data-stu-id="ab603-135">**Dynamics365Company** – This solution adds the Company entity, which is referenced by all Finance and Operations entities that have a **PrimaryCompanyContext** metadata value.</span></span>

<span data-ttu-id="ab603-136">これらのソリューションはすべて、環境内に存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ab603-136">All these solutions must be present in an environment.</span></span> <span data-ttu-id="ab603-137">それ以外の場合、仮想エンティティは Finance and Operations アプリでは使用できません。</span><span class="sxs-lookup"><span data-stu-id="ab603-137">Otherwise, virtual entities won't work with Finance and Operations apps.</span></span> <span data-ttu-id="ab603-138">これらのソリューションは、環境全体でのより容易な移植性を実現するためにパッケージ化されています。</span><span class="sxs-lookup"><span data-stu-id="ab603-138">These solutions are packaged together to allow for easier portability across environments.</span></span>

## <a name="managing-entities-from-multiple-environments"></a><span data-ttu-id="ab603-139">複数の環境からのエンティティの管理</span><span class="sxs-lookup"><span data-stu-id="ab603-139">Managing entities from multiple environments</span></span>

<span data-ttu-id="ab603-140">MicrosoftOperationsVESupport ソリューションは、**msdyn\_financeandoperationsvirtualentity** エンティティで構成されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-140">The MicrosoftOperationsVESupport solution consists of the **msdyn\_financeandoperationsvirtualentity** entity.</span></span> <span data-ttu-id="ab603-141">このエンティティは、接続の設定情報をキャプチャする Finance and Operations の仮想エンティティ データ ソースを表します。</span><span class="sxs-lookup"><span data-stu-id="ab603-141">This entity represents the virtual entity data source for Finance and Operations that captures connection setup information.</span></span> <span data-ttu-id="ab603-142">このエンティティの各レコードは、Finance and Operations インスタンスへの接続を表します。</span><span class="sxs-lookup"><span data-stu-id="ab603-142">Each record in this entity represents a connection to a Finance and Operations instance.</span></span>

<span data-ttu-id="ab603-143">カタログを使用して、Dataverse の仮想化に使用できる Finance and Operations インスタンス内のすべてのエンティティを一覧表示します (つまり、Open Data Protocol (\[OData\]) に対して有効になっている Finance and Operations のエンティティがすべて表示されます)。</span><span class="sxs-lookup"><span data-stu-id="ab603-143">A catalog is used to list all the entities in a Finance and Operations instance that are available for virtualization in Dataverse (in other words, all the entities in Finance and Operations that are enabled for Open Data Protocol \[OData\]).</span></span> <span data-ttu-id="ab603-144">カタログは、既定の MicrosoftOperationsERPCatalog ソリューションの一部であり、Finance and Operations インスタンスに適用できます。</span><span class="sxs-lookup"><span data-stu-id="ab603-144">The catalog is part of the default MicrosoftOperationsERPCatalog solution and is applicable to a Finance and Operations instance.</span></span>

<span data-ttu-id="ab603-145">各 Dataverse 環境が常に 1 つの Finance and Operations インスタンスをポイントしている必要があり、各 Finance and Operations 環境は 1 つの Dataverse 環境のみをポイントする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ab603-145">Note that each Dataverse environment must point to only one Finance and Operations instance at any time, and each Finance and Operations environment must point to only one Dataverse environment.</span></span> <span data-ttu-id="ab603-146">したがって、**msdyn\_financeandoperationsvirtualentity** エンティティに含まれるレコードは 1 つだけにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ab603-146">Therefore, there should be only one record in the **msdyn\_financeandoperationsvirtualentity** entity.</span></span>

<span data-ttu-id="ab603-147">カタログを表す **mserp\_financeandoperationsentity** エンティティは、Finance and Operations インスタンス内のエンティティを一覧表示するように照会できます。</span><span class="sxs-lookup"><span data-stu-id="ab603-147">The **mserp\_financeandoperationsentity** entity that represents the catalog can be queried to list the entities in a Finance and Operations instance.</span></span> <span data-ttu-id="ab603-148">このエンティティは仮想エンティティなので、Dataverse にはカタログは保存されません。</span><span class="sxs-lookup"><span data-stu-id="ab603-148">Because this entity is a virtual entity, the catalog is never persisted in Dataverse.</span></span>

<span data-ttu-id="ab603-149">カタログ エンティティの名前の先頭に接頭辞 "mserp\_" が付いていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="ab603-149">Notice that the name of the catalog entity has the "mserp\_" prefix.</span></span> <span data-ttu-id="ab603-150">この接頭辞は、カタログ内のエンティティを Finance and Operations エンティティとして識別します。</span><span class="sxs-lookup"><span data-stu-id="ab603-150">This prefix identifies the entities in the catalog as Finance and Operations entities.</span></span> <span data-ttu-id="ab603-151">MicrosoftOperationsERPVE ソリューションで Finance and Operations に生成される仮想エンティティのシステム名にも同じ接頭語が追加されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-151">The same prefix is also added to the system names of the virtual entities that are generated for Finance and Operations in the MicrosoftOperationsERPVE solution.</span></span> <span data-ttu-id="ab603-152">したがって、作成者は他のエンティティと Finance and Operations 仮想エンティティを区別することができます。</span><span class="sxs-lookup"><span data-stu-id="ab603-152">Therefore, the maker can distinguish Finance and Operations virtual entities from other entities.</span></span> <span data-ttu-id="ab603-153">接頭辞はマネージド ソリューションで設定され、変更することはできません。</span><span class="sxs-lookup"><span data-stu-id="ab603-153">The prefix is set in the managed solution and can't be changed.</span></span>

### <a name="managing-entities-from-multiple-isv-solutions"></a><span data-ttu-id="ab603-154">複数の ISV ソリューションからのエンティティの管理</span><span class="sxs-lookup"><span data-stu-id="ab603-154">Managing entities from multiple ISV solutions</span></span>

<span data-ttu-id="ab603-155">1 つ以上の ISV ソリューションが、Finance and Operations の仮想エンティティを使用する MicrosoftOperationsERPVE ソリューションへの依存関係を取得します。</span><span class="sxs-lookup"><span data-stu-id="ab603-155">One or more ISV solutions will take a dependency on the MicrosoftOperationsERPVE solution to use virtual entities for Finance and Operations.</span></span> <span data-ttu-id="ab603-156">Finance and Operations のユーザー定義エンティティは、Finance and Operations の標準のエンティティと同じカタログを使用するため、MicrosoftOperationsERPVE ソリューションでもカスタム Finance and Operations エンティティの仮想エンティティが生成されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-156">Because custom entities in Finance and Operations use the same catalog as out-of-box entities in Finance and Operations, the virtual entities for custom Finance and Operations entities will also be generated in the MicrosoftOperationsERPVE solution.</span></span>

<span data-ttu-id="ab603-157">Finance and Operations でエンティティの開発に対して確立されたガイドラインと ALM により、ISV ソリューション間に競合するエンティティ名がないことが保証されます。</span><span class="sxs-lookup"><span data-stu-id="ab603-157">The established guidelines and ALM for entity development in Finance and Operations ensure that there are no conflicting entity names across ISV solutions.</span></span> <span data-ttu-id="ab603-158">したがって、複数の ISV ソリューションからカスタム Finance and Operations エンティティに対して Dataverse で仮想エンティティが生成される場合、このタイプの競合は発生しません。</span><span class="sxs-lookup"><span data-stu-id="ab603-158">Therefore, no conflicts of this type can occur when virtual entities are generated in Dataverse for custom Finance and Operations entities from multiple ISV solutions.</span></span> <span data-ttu-id="ab603-159">ユーザー定義エンティティを含む Finance and Operations エンティティのすべての仮想エンティティには、前に説明した "mserp\_" プレフィックスが付けられます。</span><span class="sxs-lookup"><span data-stu-id="ab603-159">All virtual entities for Finance and Operations entities, including custom entities, will have the "mserp\_" prefix that was mentioned earlier.</span></span>

### <a name="managing-a-finance-and-operation-instance-in-a-dataverse-environment-for-virtual-entities"></a><span data-ttu-id="ab603-160">仮想エンティティの Dataverse 環境における Finance and Operation インスタンスの管理 </span><span class="sxs-lookup"><span data-stu-id="ab603-160">Managing a Finance and Operation instance in a Dataverse environment for virtual entities</span></span>

<span data-ttu-id="ab603-161">仮想エンティティの Dataverse 環境には、1 つの Finance and Operations インスタンスをリンクする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ab603-161">One Finance and Operations instance must be linked to a Dataverse environment for virtual entities.</span></span> <span data-ttu-id="ab603-162">必要な接続設定情報は、Finance and Operations の仮想エンティティ データ ソースでキャプチャされます。</span><span class="sxs-lookup"><span data-stu-id="ab603-162">The connection setup information that is required is captured in a virtual entity data source for Finance and Operations.</span></span> <span data-ttu-id="ab603-163">このデー タソースは、MicrosoftOperationsERPCatalog ソリューションに含まれています。</span><span class="sxs-lookup"><span data-stu-id="ab603-163">This data source is included in the MicrosoftOperationsERPCatalog solution.</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]