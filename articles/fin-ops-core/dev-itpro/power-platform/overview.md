---
title: Finance and Operations と Microsoft Power Platform の統合
description: このトピックでは Finance and Operations および Microsoft Dataverse の Lifecycle Services を介して Power Platform の統合の概要を提供します。
author: Sunil-Garg
ms.date: 04/08/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: sericks
ms.search.region: Global
ms.author: sunilg
ms.search.validFrom: 2020-10-31
ms.dyn365.ops.version: 10.0.0
ms.openlocfilehash: 9b8d5a5703a42c3788cabfd051a7633bc849ec05
ms.sourcegitcommit: 34b478f175348d99df4f2f0c2f6c0c21b6b2660a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/16/2021
ms.locfileid: "5908688"
---
# <a name="microsoft-power-platform-integration-with-finance-and-operations"></a><span data-ttu-id="67cac-103">Finance and Operations と Microsoft Power Platform の統合</span><span class="sxs-lookup"><span data-stu-id="67cac-103">Microsoft Power Platform integration with Finance and Operations</span></span>

[!include[banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

> [!IMPORTANT]
> <span data-ttu-id="67cac-104">この機能を使用するには、Finance and Operations アプリのバージョン 10.0.12 が必要ですが、Dataverse にはサービス更新 189 が必要です。</span><span class="sxs-lookup"><span data-stu-id="67cac-104">This functionality requires version 10.0.12 for Finance and Operations apps, while service update 189 is required for Dataverse.</span></span> <span data-ttu-id="67cac-105">Dataverse のリリース情報は、[最新バージョンの利用可能性](/business-applications-release-notes/dynamics/released-versions/dynamics-365ce#all-version-availability)ページに発行されています。</span><span class="sxs-lookup"><span data-stu-id="67cac-105">The release information for Dataverse is published on the [latest version availability page](/business-applications-release-notes/dynamics/released-versions/dynamics-365ce#all-version-availability).</span></span>

<span data-ttu-id="67cac-106">Microsoft Power Platform は、Power Platform 管理者センターを介した Dynamics 365 アプリケーションの一連の機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="67cac-106">Microsoft Power Platform provides a suite of capabilities for Dynamics 365 applications via the Power Platform Admin Center.</span></span> <span data-ttu-id="67cac-107">現在、Finance and Operations アプリは Power Platform 管理センターによって管理されませんが、時間の経過とともに、Lifecycle Services (LCS) から管理センターに移行される管理機能がますます増えています。</span><span class="sxs-lookup"><span data-stu-id="67cac-107">Today, Finance and Operations apps are not managed by the Power Platform Admin Center, however, over time more and more management capabilities will be migrated from Lifecycle Services (LCS) over to the admin center.</span></span> <span data-ttu-id="67cac-108">暫定的に、顧客は、LCS の Power Platform 統合機能を介して、二重書き込み機能、仮想エンティティ、アドインなどの機能のロックを解除できるようになります。</span><span class="sxs-lookup"><span data-stu-id="67cac-108">In the interim, customers will be able to unlock features, such as dual-write functionality, virtual entities, add-ins, and more via Power Platform integration functionality in LCS.</span></span>

<span data-ttu-id="67cac-109">このトピックでは、Power Platform 統合によってロックが解除されたさまざまな機能の概要と、設定手順の実行方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="67cac-109">This topic provides an overview of the various features unlocked by Power Platform integration as well as how to perform the setup steps.</span></span>

## <a name="prerequisite-reading"></a><span data-ttu-id="67cac-110">前提条件の参照先</span><span class="sxs-lookup"><span data-stu-id="67cac-110">Prerequisite reading</span></span>

<span data-ttu-id="67cac-111">Power Platform, Microsoft Dataverse のアーキテクチャと Finance and Operations アプリの仮想エンティティを理解するには、それらのしくみを理解しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-111">To understand the architecture of Power Platform, Microsoft Dataverse, and virtual entities for Finance and Operations apps, you must understand how they work.</span></span> <span data-ttu-id="67cac-112">したがって、次のドキュメントが前提条件になります。</span><span class="sxs-lookup"><span data-stu-id="67cac-112">Therefore, the following documentation is a prerequisite:</span></span>

- [<span data-ttu-id="67cac-113">Power Platform の管理</span><span class="sxs-lookup"><span data-stu-id="67cac-113">Administer Power Platform</span></span>](/power-platform/admin/admin-documentation)
- [<span data-ttu-id="67cac-114">Dataverse とは</span><span class="sxs-lookup"><span data-stu-id="67cac-114">What is Dataverse?</span></span>](/powerapps/maker/common-data-service/data-platform-intro)
- [<span data-ttu-id="67cac-115">エンティティ概要</span><span class="sxs-lookup"><span data-stu-id="67cac-115">Entity overview</span></span>](/powerapps/maker/common-data-service/entity-overview)
- [<span data-ttu-id="67cac-116">エンティティの関連付けの概要</span><span class="sxs-lookup"><span data-stu-id="67cac-116">Entity relationships overview</span></span>](/powerapps/maker/common-data-service/relationships-overview)
- [<span data-ttu-id="67cac-117">外部データ ソースのデータを含む仮想エンティティの作成と編集</span><span class="sxs-lookup"><span data-stu-id="67cac-117">Create and edit virtual entities that contain data from an external data source</span></span>](/powerapps/maker/common-data-service/create-edit-virtual-entities)
- [<span data-ttu-id="67cac-118">Power Apps ポータルについて</span><span class="sxs-lookup"><span data-stu-id="67cac-118">What is Power Apps portals?</span></span>](/powerapps/maker/portals/overview)
- [<span data-ttu-id="67cac-119">Power Apps でのアプリの作成の概要</span><span class="sxs-lookup"><span data-stu-id="67cac-119">Overview of creating apps in Power Apps</span></span>](/powerapps/maker/)

## <a name="tools-and-services-unlocked-with-power-platform-integration"></a><span data-ttu-id="67cac-120">Power Platform 統合によってロックが解除されたツールとサービス</span><span class="sxs-lookup"><span data-stu-id="67cac-120">Tools and services unlocked with Power Platform integration</span></span>
<span data-ttu-id="67cac-121">以下は、環境に Power Platform 統合を設定することでロックが解除されるさまざまなツールとサービスの一覧です。</span><span class="sxs-lookup"><span data-stu-id="67cac-121">The following is a listing of various tools and services that are unlocked by setting up Power Platform integration for your environments.</span></span>

### <a name="virtual-entities-for-finance-and-operations-apps"></a><span data-ttu-id="67cac-122">Finance and Operations アプリの仮想エンティティ</span><span class="sxs-lookup"><span data-stu-id="67cac-122">Virtual entities for Finance and Operations apps</span></span>

<span data-ttu-id="67cac-123">Finance and Operations アプリは、Dataverse の仮想データ ソースであり、Dataverse および Microsoft Power Platform からの完全な作成、読み取り、更新、削除 (CRUD) 操作を可能にし ます。</span><span class="sxs-lookup"><span data-stu-id="67cac-123">Finance and Operations apps are a virtual data source in Dataverse, and enable full create, read, update, and delete (CRUD) operations from Dataverse and Microsoft Power Platform.</span></span> <span data-ttu-id="67cac-124">定義上、仮想エンティティのデータは、Dataverse には存在しません。</span><span class="sxs-lookup"><span data-stu-id="67cac-124">By definition, the data for virtual entities doesn't reside in Dataverse.</span></span> <span data-ttu-id="67cac-125">その代わりに、データは属しているアプリケーションで引き続き存在します。</span><span class="sxs-lookup"><span data-stu-id="67cac-125">Instead, the data continues to reside in the application where it belongs.</span></span> <span data-ttu-id="67cac-126">Dataverse から Finance and Operations エンティティに対して CRUD 操作を有効にするには 、エンティティを Dataverse の仮想エンティティとして使用できるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-126">To enable CRUD operations on Finance and Operations entities from Dataverse, entities must be made available as virtual entities in Dataverse.</span></span> <span data-ttu-id="67cac-127">これにより、Finance and Operations アプリに存在するデータに対して、Dataverse と Microsoft Power Platform から CRUD 処理を実行できるようになります。</span><span class="sxs-lookup"><span data-stu-id="67cac-127">The allows CRUD operations to be performed from Dataverse and Microsoft Power Platform, on data that resides in Finance and Operations apps.</span></span>

<span data-ttu-id="67cac-128">Finance and Operations 内のすべての Open Data Protocol (OData) エンティティは、Dataverse の仮想エンティティとして使用できます。したがって Power Platform でも使用できます。</span><span class="sxs-lookup"><span data-stu-id="67cac-128">All Open Data Protocol (OData) entities in Finance and Operations are available as virtual entities in Dataverse, and therefore also in Power Platform.</span></span> <span data-ttu-id="67cac-129">作成者は、Finance and Operations から直接データを使用して Customer Engagement アプリのエクスペリエンスを構築できるようになりました。このとき、完全な CRUD 機能を使用でき、Dataverse にコピーする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="67cac-129">Makers can now build experiences in customer engagement apps with data directly from Finance and Operations with full CRUD capability and without copying to Dataverse.</span></span> <span data-ttu-id="67cac-130">Power Apps ポータルは、Finance and Operations の業務プロセスのコラボレーション シナリオを可能にする外部向けの Web サイトを構築するために使用できます。</span><span class="sxs-lookup"><span data-stu-id="67cac-130">Power Apps Portals can be used to build external-facing websites that enable collaboration scenarios for business processes in Finance and Operations.</span></span>

#### <a name="virtual-entities-for-core-human-resources"></a><span data-ttu-id="67cac-131">Core Human Resources の仮想エンティティ</span><span class="sxs-lookup"><span data-stu-id="67cac-131">Virtual entities for core Human Resources</span></span>
<span data-ttu-id="67cac-132">Core Human Resources エンティティは、Finance and Operations エンティティと同じように仮想化することもできます。</span><span class="sxs-lookup"><span data-stu-id="67cac-132">Core Human Resources entities can also be virtualized like Finance and Operations entities.</span></span> <span data-ttu-id="67cac-133">詳細については、[Core HR の仮想エンティティ](../../../human-resources/hr-admin-integration-common-data-service-virtual-entities.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="67cac-133">For more information, see [Core HR virtual entities](../../../human-resources/hr-admin-integration-common-data-service-virtual-entities.md).</span></span>


#### <a name="virtual-entities-vs-dual-write"></a><span data-ttu-id="67cac-134">仮想エンティティ対二重書き込み</span><span class="sxs-lookup"><span data-stu-id="67cac-134">Virtual entities vs. dual-write</span></span>
<span data-ttu-id="67cac-135">仮想エンティティは、データを Dataverse に物理的にコピーすることなく、Finance and Operations で Microsoft Power Platform を使用するメカニズムを提供します。</span><span class="sxs-lookup"><span data-stu-id="67cac-135">Virtual entities provide a mechanism to use Microsoft Power Platform with Finance and Operations without having to physically copy data to Dataverse.</span></span> <span data-ttu-id="67cac-136">このガイダンスは、要件に二重書き込みまたはデータ統合、または仮想エンティティが必要かどうかを判断するために使用します。</span><span class="sxs-lookup"><span data-stu-id="67cac-136">Use this guidance to determine if the requirements will need dual-write or data integrator or virtual entities.</span></span> <span data-ttu-id="67cac-137">仮想エンティティと二重書き込み/データ統合は、必要に応じて併用できる補完的なテクノロジです。</span><span class="sxs-lookup"><span data-stu-id="67cac-137">Virtual entities and dual-write/data integrator are complementary technologies, meaning that they can be used together if required.</span></span> <span data-ttu-id="67cac-138">各テクノロジは、[統合戦略](../data-entities/integration-overview.md)で説明されているように、特定のシナリオに対して存在します。</span><span class="sxs-lookup"><span data-stu-id="67cac-138">Each technology exists for specific scenarios, as explained in [Integration strategies](../data-entities/integration-overview.md).</span></span>

### <a name="dual-write-functionality"></a><span data-ttu-id="67cac-139">二重書き込み機能</span><span class="sxs-lookup"><span data-stu-id="67cac-139">Dual-write functionality</span></span>
<span data-ttu-id="67cac-140">二重書き込み機能は、Customer Engagement アプリと Finance and Operations アプリの間の、ほぼリアルタイムの対話を提供する標準のインフラストラクチャです。</span><span class="sxs-lookup"><span data-stu-id="67cac-140">Dual-write functionality is out-of-the-box infrastructure that provides near real-time interaction between Customer Engagement apps and Finance and Operations apps.</span></span> <span data-ttu-id="67cac-141">顧客、製品、人材、および業務に関するデータがアプリケーション境界を超えてフローする場合、組織のすべての部門が権利を持つことになります。</span><span class="sxs-lookup"><span data-stu-id="67cac-141">When data about customers, products, people, and operations flows beyond application boundaries, all departments in an organization are empowered.</span></span>

<span data-ttu-id="67cac-142">二重書き込み機能は、Finance and Operations アプリと Dataverse の間で密に結合された双方向の統合を提供します。</span><span class="sxs-lookup"><span data-stu-id="67cac-142">Dual-write functionality provides tightly coupled, bidirectional integration between Finance and Operations apps and Dataverse.</span></span> <span data-ttu-id="67cac-143">Finance and Operations アプリでのデータの変更によって Dataverse 書き込みが行われ、Dataverse のデータの変更によって Finance and Operations アプリケーションへの書き込みが行われます。</span><span class="sxs-lookup"><span data-stu-id="67cac-143">Any data change in Finance and Operations apps causes writes to Dataverse, and any data change in Dataverse causes writes to Finance and Operations apps.</span></span> <span data-ttu-id="67cac-144">この自動化されたデータ フローによって、アプリ間で統合されたユーザー エクスペリエンスが提供されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-144">This automated data flow provides an integrated user experience across the apps.</span></span>  <span data-ttu-id="67cac-145">二重書き込み機能の詳細については、[二重書き込みの概要](../data-entities/dual-write/dual-write-overview.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="67cac-145">For more information about dual-write functionality, see [Dual-write overview](../data-entities/dual-write/dual-write-overview.md).</span></span>

### <a name="add-ins-functionality"></a><span data-ttu-id="67cac-146">アドイン機能</span><span class="sxs-lookup"><span data-stu-id="67cac-146">Add-ins functionality</span></span>
<span data-ttu-id="67cac-147">アドインを使用すると、Finance and Operations アプリの機能を拡張できます。</span><span class="sxs-lookup"><span data-stu-id="67cac-147">Add-ins provide a way to extend the functionality of Finance and Operations apps.</span></span> <span data-ttu-id="67cac-148">すべてのアドインは、サンドボックスおよび実稼働タイプの環境の環境詳細ページの Lifecycle Services を介してインストールされ、管理されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-148">All add-ins are installed and managed via Lifecycle Services on the environment details page for sandbox and production-type environments.</span></span> <span data-ttu-id="67cac-149">インストールされているアドインと各アドインの構成オプションに関するメタデータは、Power Platform 統合の一部としてプロビジョニングされている Microsoft Dataverse データベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-149">The metadata regarding which add-ins are installed and the configuration options for each add-in are stored in the Microsoft Dataverse database that is provisioned as part of the Power Platform integration.</span></span> <span data-ttu-id="67cac-150">一部のアドインは、Dataverse データベースにビジネス データも格納します。</span><span class="sxs-lookup"><span data-stu-id="67cac-150">Some add-ins also store business data in the Dataverse database.</span></span> <span data-ttu-id="67cac-151">使用可能なアドインの詳細については、[アドインの概要](add-ins-overview.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="67cac-151">To learn more about available add-ins, see [Add-ins overview](add-ins-overview.md).</span></span>

## <a name="architecture"></a><span data-ttu-id="67cac-152">アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="67cac-152">Architecture</span></span>

<span data-ttu-id="67cac-153">仮想エンティティは、Finance and Operations 以外にも有用な Dataverse の概念です。</span><span class="sxs-lookup"><span data-stu-id="67cac-153">Virtual entities are a Dataverse concept that is useful beyond Finance and Operations.</span></span> <span data-ttu-id="67cac-154">次の図は、仮想エンティティの Finance and Operations プロバイダーを実装する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="67cac-154">The following illustration shows how the Finance and Operations provider for virtual entities is implemented.</span></span> <span data-ttu-id="67cac-155">6 つの主要メソッドがプロバイダーによって実装されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-155">Six primary methods are implemented by the provider.</span></span> <span data-ttu-id="67cac-156">最初の 5 つのメソッドは、**Create**、**Update**、**Delete**、**Retrieve**、**RetrieveMultiple** という標準的な CRUD 操作です。</span><span class="sxs-lookup"><span data-stu-id="67cac-156">The first five methods are the standard CRUD operations: **Create**, **Update**, **Delete**, **Retrieve**, and **RetrieveMultiple**.</span></span> <span data-ttu-id="67cac-157">最後のメソッドである **PerformAction** は、このトピックで後述するように OData アクションを呼び出すために使用されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-157">The last method, **PerformAction**, is used to call OData actions, as described later in this topic.</span></span> <span data-ttu-id="67cac-158">Finance and Operations 仮想エンティティ データ プロバイダー (図では "VE プラグイン" と表示) を呼び出すと、Finance and Operations の CDSVirtualEntityService Web API エンドポイントに対して Secure Sockets Layer (SSL)/トランスポート層セキュリティ (TLS) 1.2 セキュア Web 呼び出しが行われます。</span><span class="sxs-lookup"><span data-stu-id="67cac-158">Calls to the Finance and Operations Virtual Entity Data Provider (shown as "VE Plugin" in the illustration) will cause a Secure Sockets Layer (SSL)/Transport Layer Security (TLS) 1.2 secure web call to the CDSVirtualEntityService web API endpoint of Finance and Operations.</span></span> <span data-ttu-id="67cac-159">その後、この Web サービスは、Finance and Operations 内の関連する物理エンティティへの呼び出しにクエリを変換し、それらのエンティティで CRUD 操作または OData 操作を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="67cac-159">This web service then converts the queries into calls to the associated physical entities in Finance and Operations, and invokes CRUD or OData operations on those entities.</span></span> <span data-ttu-id="67cac-160">Finance and Operations エンティティはすべての操作で直接呼び出されるため、エンティティまたはバッキング テーブルのビジネス ロジックも呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-160">Because a Finance and Operations entity is directly invoked in all operations, any business logic on the entity or its backing tables is also invoked.</span></span>

<span data-ttu-id="67cac-161">[![Finance and Operations アプリの仮想エンティティのアーキテクチャ](../media/fovearchitecture.png)](../media/fovearchitecture.png)</span><span class="sxs-lookup"><span data-stu-id="67cac-161">[![Architecture of virtual entities for Finance and Operations apps](../media/fovearchitecture.png)](../media/fovearchitecture.png)</span></span>

<span data-ttu-id="67cac-162">呼び出し時、Dataverse から Finance and Operations アプリまで 2 つの変換点があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-162">During calls, there are two points of translation from Dataverse to Finance and Operations apps.</span></span> <span data-ttu-id="67cac-163">変換の最初のポイントは、エンティティの物理名などの概念を Finance and Operations エンティティ名に変換する VE プラグインにあります。</span><span class="sxs-lookup"><span data-stu-id="67cac-163">The first point of translation occurs in the VE Plugin, which translates concepts such as entity physical names into Finance and Operations entity names.</span></span> <span data-ttu-id="67cac-164">また、会社の参照などの既知の概念も変換されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-164">It also converts some well-known concepts, such as Company references.</span></span> <span data-ttu-id="67cac-165">Web サービス呼び出しでは、引き続き EntityCollection、Entity、および QueryExpression オブジェクトを使用して、実行される操作が表されます。このとき、VE プラグインから変換されたエンティティ名と概念が使用されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-165">The web service call still uses the EntityCollection, Entity, and QueryExpression objects to express the operations that are performed, by using the translated entity names and concepts from the VE Plugin.</span></span> <span data-ttu-id="67cac-166">最後に、Finance and Operations の CDSVirtualEntityAdapterService Web API によって、QueryExpression から QueryBuildDataSource およびその他の内部 Finance and Operations 言語構成要素への変換が完了します。</span><span class="sxs-lookup"><span data-stu-id="67cac-166">Finally, the CDSVirtualEntityAdapterService web API in Finance and Operations completes the translation from QueryExpression to QueryBuildDataSource and other internal Finance and Operations language constructs.</span></span>

<span data-ttu-id="67cac-167">仮想エンティティの一部としての Dataverse および Finance and Operations 間での呼び出しはすべて、コンフィギュレーションで指定されている Azure Active Directory (Azure AD) アプリケーションを使用して、サービス間 (S2S) 呼び出しとして実行されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-167">All calls between Dataverse and Finance and Operations as part of virtual entities are done as service-to-service (S2S) calls by using the Azure Active Directory (Azure AD) application that is specified in the configuration.</span></span> <span data-ttu-id="67cac-168">このアプリケーションのユーザーは、CDSVirtualEntityAdapterService Web API とカタログ エンティティ CDSVirtualEntityListEntity に *のみ* アクセスできるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-168">The user of this application should have access *only* to the CDSVirtualEntityAdapterService web API and the Catalog entity, CDSVirtualEntityListEntity.</span></span> <span data-ttu-id="67cac-169">これらの特権は、CDSVirtualEntityApplication という名前の、標準のセキュリティ ロールに含まれています。</span><span class="sxs-lookup"><span data-stu-id="67cac-169">These privileges are included in the out-of-box security role that is named CDSVirtualEntityApplication.</span></span> <span data-ttu-id="67cac-170">S2S 呼び出し中に、アクションを呼び出す Dataverse のユーザーの ID が Dataverse により提供されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-170">During the S2S calls, Dataverse provides the identity of the user in Dataverse who is invoking the action.</span></span> <span data-ttu-id="67cac-171">CDSVirtualEntityAdapterService Web API は、Finance and Operations の関連付けられているユーザーを検索し、そのユーザーのコンテキストでクエリを実行します。</span><span class="sxs-lookup"><span data-stu-id="67cac-171">The CDSVirtualEntityAdapterService web API looks up the associated user in Finance and Operations and runs the query in the context of that user.</span></span> <span data-ttu-id="67cac-172">したがって、S2S 呼び出しでは、すべての Finance and Operations エンティティに明示的にアクセスする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="67cac-172">Therefore, the S2S call doesn't have to have explicit access to all the Finance and Operations entities.</span></span> <span data-ttu-id="67cac-173">代わりに、データ アクセスを決定するには、アクションを呼び出すユーザーの特権が必要な場合があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-173">Instead, it can rely on the privileges of the user who is invoking the action to determine data access.</span></span>

> [!NOTE]
> <span data-ttu-id="67cac-174">仮想エンティティの呼び出しの待機時間を最適化するために、同じ Azure リージョンに Finance and Operations と Dataverse の両方を同一配置することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="67cac-174">We always recommend that you have both Finance and Operations and Dataverse co-located in the same Azure region to ensure optimal latency in virtual entity calls.</span></span> <span data-ttu-id="67cac-175">同一配置する場合、仮想エンティティの間接費は 1 回の呼び出しあたり 30 ミリ秒 (ms) 未満である予定です。</span><span class="sxs-lookup"><span data-stu-id="67cac-175">When co-located, the virtual entity overhead is expected to be less than 30ms per call.</span></span>

<span data-ttu-id="67cac-176">Power Apps ポータルでは、仮想エンティティにもアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="67cac-176">Power Apps Portal can also access virtual entities.</span></span> <span data-ttu-id="67cac-177">Power Apps ポータル認証は連絡先レコードに基づいているため、連絡先レコードと Finance and Operations ユーザーの間のマッピングは Dataverse の msdyn\_externalportalusermapping テーブルで管理されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-177">Because Power Apps Portal authorization is based on contact records, a mapping between contact records and Finance and Operations users is maintained in the msdyn\_externalportalusermapping table in Dataverse.</span></span> <span data-ttu-id="67cac-178">このテーブルは、Dataverse の高度な特権を持つユーザーのみが編集できます。このユーザーは、ポータル ユーザーのセキュリティアクセスを Finance and Operations 仮想エンティティに対して制御する権限を持っています。</span><span class="sxs-lookup"><span data-stu-id="67cac-178">This table should be editable only by highly privileged users in Dataverse, who have the rights to control the security access of portal users to Finance and Operations virtual entities.</span></span> <span data-ttu-id="67cac-179">Power Apps ポータル アクセス用に設定されたすべての Finance and Operations ユーザーには、CDSVirtualEntityAuthorizedPortalUser セキュリティ ロールが割り当てられている必要があります。また、システム管理者またはセキュリティ管理者ロールを割り当てることはできません。</span><span class="sxs-lookup"><span data-stu-id="67cac-179">Any Finance and Operations user who is set up for Power Apps Portal access must have the CDSVirtualEntityAuthorizedPortalUser security role assigned, and can't have the System administrator or Security administrator role assigned.</span></span> <span data-ttu-id="67cac-180">仮想エンティティに適用される Power Apps ポータル セキュリティ設定に関係なく、Finance and Operations アプリへの結果のクエリは常に関連付けられた Finance and Operations ユーザーとして実行され、そのユーザーのエンティティと行のセキュリティ設定に従います。</span><span class="sxs-lookup"><span data-stu-id="67cac-180">Regardless of the Power Apps Portal security setting that is applied to virtual entities, the resulting query to Finance and Operations apps is always run as the associated Finance and Operations user, and is subject to that user's entity and row security settings.</span></span> <span data-ttu-id="67cac-181">匿名ポータルのアクセスもサポートされます。</span><span class="sxs-lookup"><span data-stu-id="67cac-181">Anonymous portal access is also supported.</span></span> <span data-ttu-id="67cac-182">このタイプのアクセスとその実行方法については、[Power Apps ポータル参照](power-portal-reference.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="67cac-182">For information about this type of access and how it can be done, see [Power Apps Portal reference](power-portal-reference.md).</span></span>

## <a name="prerequisites-for-setting-up-the-power-platform-integration"></a><span data-ttu-id="67cac-183">Power Platform 統合を設定するための前提条件</span><span class="sxs-lookup"><span data-stu-id="67cac-183">Prerequisites for setting up the Power Platform integration</span></span>
<span data-ttu-id="67cac-184">次の一覧は、Power Platform 統合を設定するための前提条件に関する詳細を提供します。</span><span class="sxs-lookup"><span data-stu-id="67cac-184">The following list provides details about the prerequisites for setting up the Power Platform integration:</span></span>

- <span data-ttu-id="67cac-185">テナントで少なくとも 1 ギガバイト (GB) の Power Platform データベース ストレージ容量スペースが使用可能であることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="67cac-185">Make sure that at least one gigabyte (GB) of Power Platform database storage capacity space is available for your tenant.</span></span> <span data-ttu-id="67cac-186">それ以外の場合、設定は失敗です。</span><span class="sxs-lookup"><span data-stu-id="67cac-186">Otherwise, setup will fail.</span></span> <span data-ttu-id="67cac-187">[Power Platform管理センター](https://admin.powerplatform.microsoft.com/resources/capacity) にて、容量を表示できます。</span><span class="sxs-lookup"><span data-stu-id="67cac-187">You can view your capacity in the [Power Platform admin center](https://admin.powerplatform.microsoft.com/resources/capacity).</span></span> 
- <span data-ttu-id="67cac-188">Finance and Operations 環境管理者を識別します。</span><span class="sxs-lookup"><span data-stu-id="67cac-188">Identify your Finance and Operations environment administrator.</span></span> <span data-ttu-id="67cac-189">**環境の詳細** セクションにて、情報を確認できます。</span><span class="sxs-lookup"><span data-stu-id="67cac-189">You can find that information in the **Environment details** section.</span></span>

    ![環境の詳細タブ](media/EnvironmentDetails.png)
    
- <span data-ttu-id="67cac-191">Power Platform 環境ガバナンス ポリシーを検証します。</span><span class="sxs-lookup"><span data-stu-id="67cac-191">Validate your Power Platform environment governance policy.</span></span> <span data-ttu-id="67cac-192">検証するには、**グローバル管理者** または **Power Platform 管理者** である必要があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-192">To validate, you must be a **Global administrator** or **Power Platform administrator**.</span></span>
    
    1. <span data-ttu-id="67cac-193">[Power Platform 管理センター](https://admin.powerplatform.microsoft.com) にサイン インします。</span><span class="sxs-lookup"><span data-stu-id="67cac-193">Sign in to the [Power Platform admin center](https://admin.powerplatform.microsoft.com).</span></span>
    2. <span data-ttu-id="67cac-194">Power Platform サイトの右上端にあるギア アイコンを選択します。</span><span class="sxs-lookup"><span data-stu-id="67cac-194">Select the gear icon in the upper-right corner of the Power Platform site.</span></span>
    
        ![Power Platform の設定](media/PowerPlatformSettings.png)
    
- <span data-ttu-id="67cac-196">**全員** に Power Platform 実稼働環境の作成を許可しない組織のために、Finance and Operations 環境管理者のアカウントを次の Power Platform 管理ロールの 1 つを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-196">For organizations that do not allow **Everyone** to create Power Platform production environments, the Finance and Operations environment administrator account for your environment must be added to one of the following Power Platform admin roles.</span></span>
    
    <span data-ttu-id="67cac-197">Finance and Operations 環境管理者は、次のいずれかのロールに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-197">The Finance and Operations environment administrator must be added to one of the following roles.</span></span> <span data-ttu-id="67cac-198">このアクションを実行するには、グローバル管理者が必要です。</span><span class="sxs-lookup"><span data-stu-id="67cac-198">You will need a Global Administrator to perform this action.</span></span>
    - <span data-ttu-id="67cac-199">Global 管理者</span><span class="sxs-lookup"><span data-stu-id="67cac-199">Global admins</span></span>
    - <span data-ttu-id="67cac-200">Dynamics 365 管理者</span><span class="sxs-lookup"><span data-stu-id="67cac-200">Dynamics 365 admins</span></span>
    - <span data-ttu-id="67cac-201">Power Platform 管理者</span><span class="sxs-lookup"><span data-stu-id="67cac-201">Power Platform admins</span></span>
    
    <span data-ttu-id="67cac-202">詳細については、[サービス管理者ロールを使用したテナントの管理](/power-platform/admin/use-service-admin-role-manage-tenant) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="67cac-202">For more information, see [Use service admin roles to manage your tenant](/power-platform/admin/use-service-admin-role-manage-tenant).</span></span>

- <span data-ttu-id="67cac-203">Power Platform 環境を作成するすべてのユーザーはライセンスが必要です。</span><span class="sxs-lookup"><span data-stu-id="67cac-203">All users who create Power Platform environments must be licensed.</span></span> <span data-ttu-id="67cac-204">Finance and Operations 環境管理者アカウントは、Microsoft 365 管理者センターを使用して **Dynamics 365 Unified Operations プラン** ライセンスを適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-204">The Finance and Operations environment administrator account should have the **Dynamics 365 Unified Operations Plan** license applied using the Microsoft 365 admin center.</span></span>

## <a name="enabling-the-power-platform-integration"></a><span data-ttu-id="67cac-205">Power Platform 統合の有効化</span><span class="sxs-lookup"><span data-stu-id="67cac-205">Enabling the Power Platform integration</span></span>
<span data-ttu-id="67cac-206">現在、Power Platform 統合は Finance and Operations 環境の配置後にのみ設定できます。</span><span class="sxs-lookup"><span data-stu-id="67cac-206">Currently, the Power Platform integration can only be set up after the Finance and Operations environment is deployed.</span></span>  <span data-ttu-id="67cac-207">将来、Finance and Operations 環境自体を配置中や新しいサンドボックス環境と実稼働環境でも可能になります。</span><span class="sxs-lookup"><span data-stu-id="67cac-207">In the future, this will also be possible during deployment of the Finance and Operations environment itself, as well for new sandbox and production environments.</span></span>

### <a name="set-up-after-environment-deployment"></a><span data-ttu-id="67cac-208">環境を配置後に設定</span><span class="sxs-lookup"><span data-stu-id="67cac-208">Set up after environment deployment</span></span>
<span data-ttu-id="67cac-209">Finance and Operations 環境が配置された後に設定するには、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="67cac-209">To set up after the Finance and Operations environment has been deployed, follow these steps:</span></span>

1. <span data-ttu-id="67cac-210">Finance and Operations 環境が LCS を通じて展開された後、LCS の **環境詳細** ページが開きます。</span><span class="sxs-lookup"><span data-stu-id="67cac-210">After the Finance and Operations environment has been deployed through LCS, open the **Environment details** page in LCS.</span></span>
2. <span data-ttu-id="67cac-211">**Power Platform 統合** セクションで、**設定** を選択します。</span><span class="sxs-lookup"><span data-stu-id="67cac-211">In the **Power Platform integration** section, select **Setup**.</span></span>
3. <span data-ttu-id="67cac-212">**Power Platform 環境の設定** ダイアログ ボックスで契約条件に同意し、ダイアログ ボックスの下部にある **設定** を選択します。</span><span class="sxs-lookup"><span data-stu-id="67cac-212">In the **Power Platform environment setup** dialog box, agree to the terms and conditions, and then select **Setup** at the bottom of the dialog box.</span></span>

    > [!NOTE]
    > <span data-ttu-id="67cac-213">これにより、Power Platform 管理センターで Microsoft Dataverse ベースの環境がプロビジョニングされ、通常は 1GB のデータベース ストレージ容量が必要になります。</span><span class="sxs-lookup"><span data-stu-id="67cac-213">This will provision a Microsoft Dataverse-based environment in the Power Platform admin center, and typically requires 1GB of database storage capacity.</span></span>  <span data-ttu-id="67cac-214">使用する Finance and Operations 環境と同じ名前が必要です。</span><span class="sxs-lookup"><span data-stu-id="67cac-214">It will have the same name as your Finance and Operations environment.</span></span>  <span data-ttu-id="67cac-215">二重書き込みプラットフォーム レベルのコンポーネントはインストールされますが、二重書き込みアプリケーション コンポーネントは設定または有効化されません。</span><span class="sxs-lookup"><span data-stu-id="67cac-215">Dual-write platform-level components will be installed, but dual-write application components will not be set up or enabled.</span></span>  <span data-ttu-id="67cac-216">これは別のアクションです。</span><span class="sxs-lookup"><span data-stu-id="67cac-216">That is a separate action.</span></span>  

4. <span data-ttu-id="67cac-217">Microsoft Power Platform 環境が準備されているというメッセージが表示された場合は、**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="67cac-217">When you receive a message that states that the Microsoft Power Platform environment is being provisioned, select **OK**.</span></span>

    <span data-ttu-id="67cac-218">**環境詳細** ページの **Power Platform 統合** セクションに、Microsoft Power Platform 環境が準備されているというメッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-218">The **Power Platform integration** section of the **Environment details** page now shows a message that states that the Microsoft Power Platform environment is being provisioned.</span></span>

5. <span data-ttu-id="67cac-219">数分後、**環境の詳細** ページが更新されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-219">After a few minutes, refresh the **Environment details** page.</span></span>
6. <span data-ttu-id="67cac-220">**Power Platform 統合** セクションにおいて、**ステータス** フィールドの値が **環境設定が進行中** であることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="67cac-220">In the **Power Platform integration** section, notice that the value of the **Status** field is **Environment setup is in progress**.</span></span>

    <span data-ttu-id="67cac-221">通常、設定は 60分 から 90分かかります。</span><span class="sxs-lookup"><span data-stu-id="67cac-221">Typically, the setup takes between 60 and 90 minutes.</span></span>

    <span data-ttu-id="67cac-222">Dataverse 環境がプロビジョニングされた後、**新しいアドインのインストール** と **二重書き込みアプリケーション** ボタンが **Power Platform 統合** セクションで利用できます。</span><span class="sxs-lookup"><span data-stu-id="67cac-222">After the Dataverse environment is provisioned, the **Install a new add-in** and the **Dual-write application** buttons become available in the **Power Platform integration** section.</span></span>

    <span data-ttu-id="67cac-223">![新しいアドイン ボタンのインストール](media/InstallANewAddIn.png)
    </span><span class="sxs-lookup"><span data-stu-id="67cac-223">![Install a new add-in button](media/InstallANewAddIn.png)
    </span></span><br/>
 <span data-ttu-id="67cac-224">![二重書き込みアプリケーション ボタン](media/powerplat_integration_dwApp_button.png)</span><span class="sxs-lookup"><span data-stu-id="67cac-224">![Dual-write application button](media/powerplat_integration_dwApp_button.png)</span></span>

### <a name="troubleshooting-the-setup"></a><span data-ttu-id="67cac-225">設定のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="67cac-225">Troubleshooting the setup</span></span>
<span data-ttu-id="67cac-226">設定は、Dataverse ベースの環境を配置するさまざまなステージで失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-226">Setup can fail at various stages of the deployment of the Dataverse-based environment.</span></span>   

![デュアル書き込みの失敗](media/Error.png)

- <span data-ttu-id="67cac-228">設定が失敗すると、エラー メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="67cac-228">Anytime the setup fails, an error message will be displayed.</span></span>  <span data-ttu-id="67cac-229">エラー メッセージに基づいて、ライセンスや容量の問題に対処する必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="67cac-229">Based on the error message, you may need to address licensing or capacity issues.</span></span>  <span data-ttu-id="67cac-230">これらが解決されたら、LCS の **環境の詳細** ページの **Power Platform 統合** セクションにある **再開** ボタンを使用して設定を完了することができます。</span><span class="sxs-lookup"><span data-stu-id="67cac-230">After these have been resolved, you can then use the **Resume** button in the **Power Platform integration** section of the **Environment details** page in LCS to finish the setup.</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]