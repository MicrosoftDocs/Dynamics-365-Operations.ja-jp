---
title: 保存されたビューを十分に活用するフォームの作成
description: このトピックでは、保存されたビューの技術的な側面について説明します。また、保存されたビューを使用したフォームがうまく機能するよう、フォーム開発に関する考察を記載します。
author: jasongre
manager: AnnBe
ms.date: 10/15/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysUserSetup, DefaultDashboard
audience: Developer
ms.reviewer: sericks
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: jasongre
ms.search.validFrom: 2019-07-31
ms.dyn365.ops.version: Platform update 28
ms.openlocfilehash: e55e9266a25b583223267473f5d598293707d4f5
ms.sourcegitcommit: dd991154231280aff9c9c5799e42799e2bfc02fb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/15/2019
ms.locfileid: "2622784"
---
# <a name="build-forms-that-fully-utilize-saved-views"></a>保存されたビューを十分に活用するフォームの作成

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

保存されたビューは、Finance and Operations アプリケーションにおけるパーソナライズ機能の中でも重要な拡張機能です。 [保存されたビュー](../../fin-ops/get-started/saved-views.md) のトピックでは、この機能の総合的な詳細情報を提供します。ここでは、保存されているビューの技術的な要素のみでなく、ビューの影響を受ける可能性のあるフォーム開発の側面も対象とします。 

## <a name="user-perceived-pages"></a>「ユーザー視点」のページ
従来、パーソナライゼーションには、1セットにつきモデル化されたフォームに対する 1:1 のリンクが含まれています。 多くのページでは、これはユーザーにとっては理にかなっています。ユーザーが知覚するページと、フォームをモデル化した方法と合致するためです。 ただし、場合によっては 1:1のリンクとモデル化されたフォームが、パーソナライゼーションに対して直感的ではなく、わかりにくい場合があります。これはユーザーがモデル化されたフォーム間の境界に対して注意を払っていないためです。 

保存されたビューは、このような混乱を解消するべく 「ユーザー視点」 ページ上でビューを作成できる機能がついています。これにより、パーソナライゼーションがいつ、どのように適用されるかを理解するために、フォームがどのようにモデル化されているかを理解する必要がなくなります。 たとえば、次の2つのシナリオを考えてみます。  

-    **一つのモデル化されたフォームに複数の「ユーザー視点」ページ**: マスタの詳細 と トランザクションの詳細 フォーム ( たとえば **CustTable** や **PurchTable** フォームなど) は一般的に、グリッドページと詳細ページからなる複数の「ユーザー視点」ページで構成されています。 

     これはユーザーはリストから詳細への切り替えることによってフォームの境界を超えていることに気づかない (気づく必要もないのですが) ためです。詳細フォームでのビューのサポートは、グリッド部分と詳細部分で別々にビューを定義できるように、異なる方法で処理されています。 つまり、「グリッド」と「詳細」のビューセレクタでは、使用可能なビューの異なるセットを表示できます。 これらのフォームで対応している特殊なケースのビューを使用することで、「グリッド」ビューにてビュー定義にフィルタを適用できます。その一方で「詳細」ビューではパーソナライゼーションのみが必要です。

-    **1つの 「ユーザー視点」 ページに複数のモデル化されたフォーム**: モデル化されたフォーム (FactBoxまたはフォームパーツ) にサブフォームを埋め込む機能により、複数のモデル化されたフォームが単一の「ユーザー視点」ページに割り当てられている場合があります たとえば、 **すべての顧客** ページの詳細の部分には、情報ボックスの数と、フォームパーツの内容情報を取得する2つのファストタブがあります。 従来のパーソナリゼーションではユーザーの期待に反して、 **CustTable** フォームにおけるパーソナリゼーションのエクスポートには、FactBoxのパーソナリゼーションも **住所** 、 **連絡先情報** のファストタブ内で行われたパーソナリゼーションも含まれていませんでした。 これと同様にユーザーが予期しないこととして、これらのサブフォームで行われたパーソナライゼーションはすべて、該当するフォームパーツが使用されているアプリケーションの他の部分にも反映されます。 例えば **すべての顧客** ページ内の **住所** ファストタブに変更を加えると、変更した内容が **すべての仕入先** ページの **住所** ファストタブにも反映されます。

     ビューでは、フォームパーツのパーソナライゼーションの範囲が、ユーザーの期待に合うように変更されています。 特にサブフォームのパーソナライゼーションは、作成された基本フォームに関連付けられるようになっています。 つまり、 **すべての顧客** の詳細ページからビューをエクスポートすると、元となっている **CustTable** フォームのパーソナライゼーションと、FactBox またはフォーム上の該当部分でモデル化されたフォームパーツからの個人設定が含まれます。 同様に、 **すべての顧客** ページ内の **住所** ファストタブ (フォームパーツ) で行ったパーソナライゼーションは、そのフォームパーツを使用している他のフォームには反映されません。
     
これらはパーソナライゼーション・サブシステムに対する高度な技術的変更であり、ビューが使用可能となっている場合にのみ利用できます。 これらの変更は、ユーザーがビューに関して予測可能で理解しやすい運用を行うにあたって非常に重要となります。

## <a name="view-support"></a>ビューのサポート
フォームのスタイルは、ビューのサポートレベルによって決まります。 

-    ビューには、以下のようなフォームに対するクエリが含まれています
     -    リスト ページ
     -    簡易リスト
     -    [マスタの詳細] フォーム と [トランザクションの詳細] フォーム のグリッド部分

-    以下のようなクエリは、ビューには含まれていません
     -    その他形式のフルページのフォーム
     -    [マスタの詳細] フォーム と [トランザクションの詳細] フォーム の詳細

-    以下のビューについては現在対応していません
     -     ダッシュボード
     -    ワークスペース
     -    ダイアログ
     -    ドロップダウンダイアログ、ルックアップ、強化されたプレビューなどの、副次的なフォーム

## <a name="modifying-forms-to-fully-utilize-views"></a>フォームを変更してビューを完全に活用する
ほとんどのフォームは保存されたビューで十分に機能しますが、フォー上でビューが問題なく想定どおりに機能するためには、フォームロジックへの変更が必要となる部分も存在します。 以下は、新しいフォームを開発する際に留意すべき重要な項目です。

-    フォームのスタートアップサイクルにてX++コードの遅延が発生すると、ビューが想定どおりに機能しない可能性があります。 特に、以下の点にご注意ください。 
     -    executeQuery() 内の super()または、run() 内の super() のクエリに対する変更を行うと、ビューからのクエリが無視される可能性があります。  
     -    run() 内の super() に対するフォーム変更を行うと、ユーザーのパーソナライゼーションが正しく適用されない可能性があります。  

-    カスタムフィルタの値を常に現在のビュー、またはクエリに合わせるには、追加の作業が必要となる場合があります。  
     -    保存されているビューでカスタムフィルターを正しく機能させるには、プラットフォームで追加の作業を行う必要があり、また、フォームによってカスタムのフィルタの取得の可能性があります。 詳細については、後ほど提供します。  

-    長期的に見ると、ビューはモデル化されたセカンダリ リストページに取って代わるものです。  
     -   通常、保留中の得意先などのセカンダリ リスト ページは、同じフォームを指定するメニュー項目ですが、異なるクエリを持っています。 クエリを渡すメニュー項目は、既定のビューで定義されているすべてのクエリを上書きするため、こうしたエントリ ポイントはユーザーを混乱させる可能性があります。 長期的には、セカンダリ リストページを廃止して、それらをビューに移動する計画となっています。

     -  ユーザがフォームキャプション (「すべての顧客」など) とビュー名 (「お客様」など) を混同しないように、フォームキャプションを対応するエンティティの名前に変更することを検討してください。 たとえば、フォームキャプションに 「すべての顧客」 や 「すべての受注」 と表示していたものを、 「顧客」 や 「受注」 へと変更します。 

## <a name="known-issues"></a>既知の問題
- QuickFilter 条件は、ビュー定義に保存されていません。
- カスタムフィルター、高度なフィルター、または並べ替え (ビュー上でフィルターがサポートされているページ上で) でフィルター処理を実行しても、ビューは正しく表示されません。 ただし、グリッドの列ヘッダーまたはフィルターウィンドウを使用してフィルター処理を行う場合や、明示的なカスタマイズを実行してビューを保存する場合は、カスタムフィルター、高度なフィルタ、または並べ替えの各クエリ条件がビューに保存されます。  
