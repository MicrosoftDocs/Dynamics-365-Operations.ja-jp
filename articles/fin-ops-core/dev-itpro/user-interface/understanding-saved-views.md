---
title: 保存されたビューを十分に活用するフォームの作成
description: このトピックでは、保存されたビューの技術的な側面について説明します。また、保存されたビューを使用したフォームがうまく機能するよう、フォーム開発に関する考察を記載します。
author: jasongre
manager: AnnBe
ms.date: 06/18/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysUserSetup, DefaultDashboard
audience: Developer
ms.reviewer: rhaertle
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: jasongre
ms.search.validFrom: 2019-07-31
ms.dyn365.ops.version: Platform update 28
ms.openlocfilehash: e2595c486fa74c8890b7d74cabebe78bd12098a3
ms.sourcegitcommit: 1e6a7b50596eaf9d965e0155f3f2c50f7f50747e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/22/2020
ms.locfileid: "3497345"
---
# <a name="build-forms-that-fully-utilize-saved-views"></a>保存されたビューを十分に活用するフォームの作成

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

保存されたビューは、Finance and Operations アプリにおけるパーソナライズ機能の中でも重要な拡張機能です。 [保存されたビュー](../../fin-ops/get-started/saved-views.md) のトピックでは、この機能の総合的な詳細情報を提供します。ここでは、保存されているビューの技術的な要素のみでなく、ビューの影響を受ける可能性のあるフォーム開発の側面も対象とします。 

## <a name="user-perceived-pages"></a>「ユーザー視点」のページ
従来、パーソナライゼーションには、1セットにつきモデル化されたフォームに対する 1:1 のリンクが含まれています。 多くのページでは、これはユーザーにとっては理にかなっています。ユーザーが知覚するページと、フォームをモデル化した方法と合致するためです。 ただし、場合によっては 1:1のリンクとモデル化されたフォームが、パーソナライゼーションに対して直感的ではなく、わかりにくい場合があります。これはユーザーがモデル化されたフォーム間の境界に対して注意を払っていないためです。 

保存されたビューは、このような混乱を解消するべく 「ユーザー視点」 ページ上でビューを作成できる機能がついています。これにより、パーソナライゼーションがいつ、どのように適用されるかを理解するために、フォームがどのようにモデル化されているかを理解する必要がなくなります。 たとえば、次の2つのシナリオを考えてみます。  

-    **一つのモデル化されたフォームに複数の「ユーザー視点」ページ**: マスタの詳細 と トランザクションの詳細 フォーム ( たとえば **CustTable** や **PurchTable** フォームなど) は一般的に、グリッドページと詳細ページからなる複数の「ユーザー視点」ページで構成されています。 

     これはユーザーはリストから詳細への切り替えることによってフォームの境界を超えていることに気づかない (気づく必要もないのですが) ためです。詳細フォームでのビューのサポートは、グリッド部分と詳細部分で別々にビューを定義できるように、異なる方法で処理されています。 つまり、「グリッド」と「詳細」のビューセレクタでは、使用可能なビューの異なるセットを表示できます。 これらのフォームで対応している特殊なケースのビューを使用することで、「グリッド」ビューにてビュー定義にフィルタを適用できます。その一方で「詳細」ビューではパーソナライゼーションのみが必要です。

-    **1つの 「ユーザー視点」 ページに複数のモデル化されたフォーム**: モデル化されたフォーム (FactBoxまたはフォームパーツ) にサブフォームを埋め込む機能により、複数のモデル化されたフォームが単一の「ユーザー視点」ページに割り当てられている場合があります たとえば、 **すべての顧客** ページの詳細の部分には、情報ボックスの数と、フォームパーツの内容情報を取得する2つのファストタブがあります。 従来のパーソナリゼーションではユーザーの期待に反して、 **CustTable** フォームにおけるパーソナリゼーションのエクスポートには、FactBoxのパーソナリゼーションも **住所** 、 **連絡先情報** のファストタブ内で行われたパーソナリゼーションも含まれていませんでした。 これと同様にユーザーが予期しないこととして、これらのサブフォームで行われたパーソナライゼーションはすべて、該当するフォームパーツが使用されているアプリケーションの他の部分にも反映されます。 例えば **すべての顧客** ページ内の **住所** ファストタブに変更を加えると、変更した内容が **すべての仕入先** ページの **住所** ファストタブにも反映されます。

     ビューでは、フォームパーツのパーソナライゼーションの範囲が、ユーザーの期待に合うように変更されています。 特にサブフォームのパーソナライゼーションは、作成された基本フォームに関連付けられるようになっています。 つまり、 **すべての顧客** の詳細ページからビューをエクスポートすると、元となっている **CustTable** フォームのパーソナライゼーションと、FactBox またはフォーム上の該当部分でモデル化されたフォームパーツからの個人設定が含まれます。 同様に、 **すべての顧客** ページ内の **住所** ファストタブ (フォームパーツ) で行ったパーソナライゼーションは、そのフォームパーツを使用している他のフォームには反映されません。
     
これらはパーソナライゼーション・サブシステムに対する高度な技術的変更であり、ビューが使用可能となっている場合にのみ利用できます。 これらの変更は、ユーザーがビューに関して予測可能で理解しやすい運用を行うにあたって非常に重要となります。

## <a name="view-support"></a>ビューのサポート
フォームのスタイルは、ビューのサポートレベルによって決まります。 

-    ビューには、以下のようなフォームに対するクエリが含まれています
     -    リスト ページ
     -    簡易リスト
     -    [マスタの詳細] フォーム と [トランザクションの詳細] フォーム のグリッド部分

-    以下のようなクエリは、ビューには含まれていません
     -    その他形式のフルページのフォーム
     -    [マスタの詳細] フォーム と [トランザクションの詳細] フォーム の詳細

-    以下のビューについては現在対応していません
     -     ダッシュボード
     -    ワークスペース
     -    ダイアログ
     -    ドロップダウンダイアログ、ルックアップ、強化されたプレビューなどの、副次的なフォーム

## <a name="modifying-forms-to-fully-utilize-views"></a>フォームを変更してビューを完全に活用する
ほとんどのフォームは保存されたビューで十分に機能しますが、フォー上でビューが問題なく想定どおりに機能するためには、フォームロジックへの変更が必要となる部分も存在します。 以下は、新しいフォームを開発する際に留意すべき重要な項目です。

-    フォームのスタートアップサイクルにてX++コードの遅延が発生すると、ビューが想定どおりに機能しない可能性があります。 特に、以下の点にご注意ください。 
     -    executeQuery() 内の super()または、run() 内の super() のクエリに対する変更を行うと、ビューからのクエリが無視される可能性があります。  
     -    run() 内の super() に対するフォーム変更を行うと、ユーザーのパーソナライゼーションが正しく適用されない可能性があります。  

-    カスタムフィルタの値を常に現在のビュー、またはクエリに合わせるには、追加の作業が必要となる場合があります。  
     -    保存されているビューでカスタムフィルターを正しく機能させるには、プラットフォームで追加の作業を行う必要があり、また、フォームによってカスタムのフィルタの取得の可能性があります。 詳細については、後ほど提供します。  

-    長期的に見ると、ビューはモデル化されたセカンダリ リストページに取って代わるものです。  
     -   通常、保留中の得意先などのセカンダリ リスト ページは、同じフォームを指定するメニュー項目ですが、異なるクエリを持っています。 クエリを渡すメニュー項目は、既定のビューで定義されているすべてのクエリを上書きするため、こうしたエントリ ポイントはユーザーを混乱させる可能性があります。 長期的には、セカンダリ リストページを廃止して、それらをビューに移動する計画となっています。

     -  ユーザがフォームキャプション (「すべての顧客」など) とビュー名 (「お客様」など) を混同しないように、フォームキャプションを対応するエンティティの名前に変更することを検討してください。 たとえば、フォームキャプションに 「すべての顧客」 や 「すべての受注」 と表示していたものを、 「顧客」 や 「受注」 へと変更します。 

## <a name="known-issues"></a>既知の問題
このセクションでは、当機能のプレビュー版で発生する、保存されたビューにおける既知の問題の一覧について説明します。

### <a name="open-issues"></a>未処理の問題
-  カスタム フィルター (QuickFilter を除くグリッドの上にあるフィルター) を使用した後、ビューには保存されていない変更があるとしてマークされません。カスタム フィルター条件がビューに保存されている場合は、カスタム フィルター コントロールが現在のクエリを正しく反映しない場合があります。  
-  ビューは、ビューへの明示的な保存なしに、最後に使用されたクイックフィルター列を追跡する必要があります。 

### <a name="fixed-in-10013"></a>10.0.13 での修正

> [!NOTE]
> バージョン 10.0.13 はまだリリースされていません。 この情報は計画目的のために提供されています。 バージョン 10.0.13 のコンテンツと機能は、変更されることがあります。 バージョン 10.0.13 のリリース スケジュールの詳細については、[サービス更新プログラムの可用性](../../fin-ops/get-started/public-preview-releases.md) を参照してください。

-  [KB 4568154] ビューのインポート フローでは、ビューがグリッドまたは詳細ページの詳細側面に適用されるかどうかは表面化されません
-  [KB 4568152] ユーザーは、標準ビューをエクスポートできます
-  [KB 4568151] 公開済ビューの受信者は、別の法人から再発行後に更新されていません
-  [KB 4562137] 親セキュリティ ロールに対して公開されたビューは、子ロールには適用されません

### <a name="fixed-in-release-10012"></a>リリース 10.0.12 での修正
-  [KB 4568122] ビューの有効化後に予期しないクエリが適用されます
-  [KB 4562152] 保存されたビューの有効化後に個人用設定の移行が例外をスローする場合があります 
-  [KB 4568121] 既定ビューの個人用設定は、個人用設定の権限のないユーザーには適用されません
-  [KB 4568119] ワークスペースをインポートするとき、またはビューが有効な状態でワークスペースにタイルまたはリストを追加するときにエラーが発生する可能性があります
-  [KB 4568118] ユーザーが多数のビューを持っているとき、ビュー セレクターを開こうとするとエラーが発生します
-  [KB 4568148] ビューの有効化後に、古いカスタム ユーザー ワークスペースが個人用設定フォームに表示されません

### <a name="quality-update-for-release-10011platform-update-35"></a>リリース 10.0.11/プラットフォーム更新プログラム 35 の品質更新プログラム
-  [KB 4562147] 多数のユーザーに対する個人用設定のインポートがタイムアウトします 

### <a name="fixed-in-release-10011"></a>リリース 10.0.11 での修正
-  [KB 4549735] セキュリティ ロールからの個人用設定フォームが見つかりません 
-  [KB 4568116] 高度なフィルターまたは並べ替えを使用した後、ビューには未保存の変更があるとしてマークされません
-  [KB 4568117] 古い個人用設定フォームをインポートしようとするときにクラッシュします
-  [KB 4568115] ビューは名前なしで公開されます
-  [KB 4564908] 未保存フィルターおよび個人用設定が一部のビューに反映されます 

### <a name="quality-update-for-release-10010platform-update-34"></a>リリース 10.0.10/プラットフォーム更新プログラム 34 の品質更新プログラム
-  [KB 4560406] 多数のユーザーに対する個人用設定のインポートがタイムアウトします 
-  [KB 4564906] 個人用設定フォームが初めて公開されたビューを読み込みません/読み込みに時間がかかります

### <a name="fixed-in-release-10010platform-update-34"></a>リリース 10.0.10/プラットフォーム更新プログラム 34 での修正
-  [KB 4568114] ビューは空白の法人に対して公開されます
-  [kB 4568113] 既存のフィルターを変更するビューを読み込むときに、"ビュー クエリを適用できません" というメッセージが表示されます
