---
title: 保存されたビューを十分に活用するフォームの作成
description: このトピックでは、保存されたビューの技術的な側面について説明します。また、保存されたビューを使用したフォームがうまく機能するよう、フォーム開発に関する考察を記載します。
author: jasongre
manager: AnnBe
ms.date: 09/11/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysUserSetup, DefaultDashboard
audience: Developer
ms.reviewer: rhaertle
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: jasongre
ms.search.validFrom: 2019-07-31
ms.dyn365.ops.version: Platform update 28
ms.openlocfilehash: 44a0d51733bee5aa628141ec5e2939a62490edfc
ms.sourcegitcommit: 5bb36b74935ffe140367fd6ecf956b4857ad12e5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/14/2020
ms.locfileid: "3802835"
---
# <a name="build-forms-that-fully-utilize-saved-views"></a>保存されたビューを十分に活用するフォームの作成

[!include [banner](../includes/banner.md)]

保存されたビューは、Finance and Operations アプリにおけるパーソナライズ機能の中でも重要な拡張機能です。 [保存されたビュー](../../fin-ops/get-started/saved-views.md) のトピックでは、この機能の総合的な詳細情報を提供します。ここでは、保存されているビューの技術的な要素のみでなく、ビューの影響を受ける可能性のあるフォーム開発の側面も対象とします。 

## <a name="user-perceived-pages"></a>「ユーザー視点」のページ
従来、パーソナライゼーションには、1セットにつきモデル化されたフォームに対する 1:1 のリンクが含まれています。 多くのページでは、これはユーザーにとって理にかなっています。ユーザーが知覚するページとフォームをモデル化した方法とが合致するためです。 ただし、場合によっては 1:1のリンクとモデル化されたフォームが、パーソナライゼーションに対して直感的ではなく、わかりにくい場合があります。これはユーザーがモデル化されたフォーム間の境界に対して注意を払っていないためです。 

保存されたビューには、このような混乱を解消するべく 「ユーザー視点」 ページ上でビューを作成できる機能があります。 したがって、ユーザーはパーソナライゼーションを適用する方法とタイミングを知るために、フォームがどのようにモデル化されているかを理解する必要はありません。 たとえば、次の2つのシナリオを考えてみます。  

-    **単一のモデル化されたフォームにある複数の「ユーザー視点」ページ:** マスター詳細およびトランザクション詳細フォーム (たとえば **CustTable** や **PurchTable** フォームなど) は一般的に、グリッド ページと詳細ページからなる複数の「ユーザー視点」ページで構成されています。 

     これはユーザーはリストから詳細への切り替えることによってフォームの境界を超えていることに気づかない (気づく必要もないのですが) ためです。詳細フォームでのビューのサポートは、グリッド部分と詳細部分で別々にビューを定義できるように、異なる方法で処理されています。 つまり、「グリッド」と「詳細」のビュー セレクターでは、異なる一連の使用可能なビューを表示できます。 これらのフォームで対応している特殊ケースのビューを使用することで、「グリッド」ビューによるビュー定義でのフィルター適用も可能になります。その一方で「詳細」ビューではパーソナライゼーションのみが必要です。

-    **単一の「ユーザー視点」ページに複数のモデル化されたフォーム:** モデル化されたフォーム (FactBox またはフォーム パーツ) にサブフォームを埋め込む機能により、複数のモデル化されたフォームが単一の「ユーザー視点」ページに対応している場合があります。 たとえば、 **すべての顧客** ページの詳細の部分には、情報ボックスの数と、フォームパーツの内容情報を取得する2つのファストタブがあります。 従来のパーソナライゼーションでは、ユーザーの期待に反して、**CustTable** フォームのパーソナライゼーションのエクスポートに任意の FactBox のパーソナライゼーションや**住所**または**連絡先情報**のクイック タブ内で行われたパーソナライゼーションも含まれていませんでした。 これと同様にユーザーが予期しないこととして、これらのサブフォームで行われたパーソナライゼーションはすべて、該当するフォームパーツが使用されているアプリケーションの他の部分にも反映されます。 例えば **すべての顧客** ページ内の **住所** ファストタブに変更を加えると、変更した内容が **すべての仕入先** ページの **住所** ファストタブにも反映されます。

     ビューでは、フォームパーツのパーソナライゼーションの範囲が、ユーザーの期待に合うように変更されています。 特にサブフォームのパーソナライゼーションは、作成された基本フォームに関連付けられるようになっています。 つまり、 **すべての顧客** の詳細ページからビューをエクスポートすると、元となっている **CustTable** フォームのパーソナライゼーションと、FactBox またはフォーム上の該当部分でモデル化されたフォームパーツからの個人設定が含まれます。 同様に、 **すべての顧客** ページ内の **住所** ファストタブ (フォームパーツ) で行ったパーソナライゼーションは、そのフォームパーツを使用している他のフォームには反映されません。
     
これらはパーソナライゼーション・サブシステムに対する高度な技術的変更であり、ビューが使用可能となっている場合にのみ利用できます。 これらの変更は、ユーザーがビューに関して予測可能で理解しやすいなエクスペリエンスを確実に得るために重要です。

## <a name="view-support"></a>ビューのサポート
フォームのスタイルは、ビューのサポートレベルによって決まります。 

-    ビューには、以下のようなフォームに対するクエリが含まれています
     -    リスト ページ
     -    簡易リスト
     -    [マスタの詳細] フォーム と [トランザクションの詳細] フォーム のグリッド部分

-    以下のようなクエリは、ビューには含まれていません
     -    その他形式のフルページのフォーム
     -    [マスタの詳細] フォーム と [トランザクションの詳細] フォーム の詳細

-    以下のビューについては現在対応していません
     -     ダッシュボード
     -    ワークスペース
     -    ダイアログ
     -    ドロップダウンダイアログ、ルックアップ、強化されたプレビューなどの、副次的なフォーム

## <a name="modifying-forms-to-fully-utilize-views"></a>フォームを変更してビューを完全に活用する
ほとんどのフォームは保存されたビューで十分に機能しますが、フォー上でビューが問題なく想定どおりに機能するためには、フォームロジックへの変更が必要となる部分も存在します。 以下は、新しいフォームを開発する際に留意すべき重要な項目です。

-    フォームのスタートアップサイクルにてX++コードの遅延が発生すると、ビューが想定どおりに機能しない可能性があります。 特に、次の項目にご注意ください: 
     -    **executeQuery()** の **super()** の後、または **run()** の **super()** の後のクエリの変更により、ビューのクエリ側面が無視される可能性があります。  
     -    **run()** の **super()** の後にフォームを変更すると、一部のユーザー パーソナライゼーションが既定ビューに誤って適用される可能性があります。  

-    カスタムフィルタの値を常に現在のビュー、またはクエリに合わせるには、追加の作業が必要となる場合があります。  
     -    保存されたビューでカスタム フィルターが正しく機能することを確認するため、プラットフォームにはこれらのコントロールをより適切にサポートするための追加作業があります。 このサポートが利用可能になると、カスタム フィルターを持つ任意のフォームによる取り込みが必要になります。 推奨される方法が確定した時点で、詳細情報が提供されます。 

-    長期的に見ると、ビューはモデル化されたセカンダリ リストページに取って代わるものです。  
     -   通常、**保留中の得意先**などのセカンダリ リスト ページは、同じフォームを指すが異なるクエリを持つメニュー項目です。 クエリで渡すメニュー項目は、既定ビューで定義されるすべてのクエリを上書きするため、これらのエントリ ポイントはユーザーを混乱させる可能性があります。 現在の長期計画では、セカンダリ リスト ページを廃止 (非推奨) にして、それらをビューに移動させます。 ただし、その取り組みはまだ始まっていません。 

     -  ユーザがフォーム キャプション (「すべての顧客」など) とビュー名 (「お客様」など) を混同しないように、フォーム キャプションを対応するエンティティの名前に変更することを検討してください。 たとえば、フォーム キャプションに 「すべての顧客」 や 「すべての販売注文」 と表示していたものを、「顧客」や「販売注文」へと変更します。 

## <a name="known-issues"></a>既知の問題
このセクションでは、当機能のプレビュー版で発生する、保存されたビューにおける既知の問題の一覧について説明します。

### <a name="open-issues"></a>未処理の問題
-  カスタム フィルター (QuickFilter を除くグリッドの上にあるフィルター) を使用した後、ビューには保存されていない変更があるとしてマークされません。カスタム フィルター条件がビューに保存されている場合は、カスタム フィルター コントロールが現在のクエリを正しく反映しない場合があります。  
-  ワークスペース、ダッシュボード、およびダイアログのサポートが表示されます
-  [KB 4553227] パーソナライゼーションにより (参照グループ) フィールドを追加した後、フィールドが空白のままになります

### <a name="fixed-in-10013"></a>10.0.13 での修正

-  [Bug 474817] ユーザー オプション > パーソナライゼーションではユーザーのすべてのパーソナライゼーションが一覧表示されません 
-  [KB 4574781] ビューの保存時の重複レコードの例外
-  [KB 4575278] ビューが再公開されると、タイル、リスト、およびリンクは公開されたビューにリンクされなくなります
    -  リンクの復元には追加情報が必要なため、10.0.13 より前に公開されたビューの固定要素については、再リンクは行われません。 これを軽減するには、10.0.13 への更新後にビューを再公開し、ワークスペースに要素を再固定する必要があります。
-  [KB 4575285] 既存のビュー名に公開すると、既に加えられたコンフィギュレーションの変更が上書きされます
-  [KB 4574778] 既定として固定し公開すると、ビューが公開された会社は考慮されません
-  [KB 4568154] ビューのインポート フローでは、ビューがグリッドまたは詳細ページの詳細側面に適用されるかどうかは表面化されません
-  [KB 4568152] ユーザーは、標準ビューをエクスポートできます
-  [KB 4568151] 公開済ビューの受信者は、別の法人から再発行後に更新されていません
-  [KB 4562137] 親セキュリティ ロールに対して公開されたビューは、子ロールには適用されません
-  [KB 4564528] QuickFilter の既定フィールド パーソナライゼーションが、ビューでの期待通りに機能しません

### <a name="fixed-in-release-10012"></a>リリース 10.0.12 での修正
-  [KB 4568122] ビューの有効化後に予期しないクエリが適用されます
-  [KB 4562152] 保存されたビューの有効化後に個人用設定の移行が例外をスローする場合があります 
-  [KB 4568121] 既定ビューの個人用設定は、個人用設定の権限のないユーザーには適用されません
-  [KB 4568119] ワークスペースをインポートするとき、またはビューが有効な状態でワークスペースにタイルまたはリストを追加するときにエラーが発生する可能性があります
-  [KB 4568118] ユーザーが多数のビューを持っているとき、ビュー セレクターを開こうとするとエラーが発生します
-  [KB 4568148] ビューの有効化後に、古いカスタム ユーザー ワークスペースが個人用設定フォームに表示されません

### <a name="quality-update-for-release-10011platform-update-35"></a>リリース 10.0.11/プラットフォーム更新プログラム 35 の品質更新プログラム
-  [KB 4562147] 多数のユーザーに対する個人用設定のインポートがタイムアウトします 

### <a name="fixed-in-release-10011"></a>リリース 10.0.11 での修正
-  [KB 4549735] セキュリティ ロールからの個人用設定フォームが見つかりません 
-  [KB 4568116] 高度なフィルターまたは並べ替えを使用した後、ビューには未保存の変更があるとしてマークされません
-  [KB 4568117] 古い個人用設定フォームをインポートしようとするときにクラッシュします
-  [KB 4568115] ビューは名前なしで公開されます
-  [KB 4564908] 未保存フィルターおよび個人用設定が一部のビューに反映されます 

### <a name="quality-update-for-release-10010platform-update-34"></a>リリース 10.0.10/プラットフォーム更新プログラム 34 の品質更新プログラム
-  [KB 4560406] 多数のユーザーに対する個人用設定のインポートがタイムアウトします 
-  [KB 4564906] 個人用設定フォームが初めて公開されたビューを読み込みません/読み込みに時間がかかります

### <a name="fixed-in-release-10010platform-update-34"></a>リリース 10.0.10/プラットフォーム更新プログラム 34 での修正
-  [KB 4568114] ビューは空白の法人に対して公開されます
-  [kB 4568113] 既存のフィルターを変更するビューを読み込むときに、"ビュー クエリを適用できません" というメッセージが表示されます
