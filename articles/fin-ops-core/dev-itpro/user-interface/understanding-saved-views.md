---
title: 保存されたビューを十分に活用するフォームの作成
description: このトピックでは、保存されたビューの技術的な側面について説明します。また、保存されたビューを使用したフォームがうまく機能するよう、フォーム開発に関する考察を記載します。
author: jasongre
manager: AnnBe
ms.date: 08/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysUserSetup, DefaultDashboard
audience: Developer
ms.reviewer: sericks
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: jasongre
ms.search.validFrom: 2019-07-31
ms.dyn365.ops.version: Platform update 28
ms.openlocfilehash: 83bc6b3e87120af0fd5354fe6456615eae70749e
ms.sourcegitcommit: 3ba95d50b8262fa0f43d4faad76adac4d05eb3ea
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "2183028"
---
# <a name="build-forms-that-fully-utilize-saved-views"></a><span data-ttu-id="1bc07-103">保存されたビューを十分に活用するフォームの作成</span><span class="sxs-lookup"><span data-stu-id="1bc07-103">Build forms that fully utilize saved views</span></span>

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

<span data-ttu-id="1bc07-104">保存されたビューは、Finance and Operations アプリケーションにおけるパーソナライズ機能の中でも重要な拡張機能です。</span><span class="sxs-lookup"><span data-stu-id="1bc07-104">Saved views are an important expansion of personalization capabilities Finance and Operations applications.</span></span> <span data-ttu-id="1bc07-105">[保存されたビュー](../../fin-and-ops/get-started/saved-views.md) のトピックでは、この機能の総合的な詳細情報を提供します。ここでは、保存されているビューの技術的な要素のみでなく、ビューの影響を受ける可能性のあるフォーム開発の側面も対象とします。</span><span class="sxs-lookup"><span data-stu-id="1bc07-105">While the [Saved views](../../fin-and-ops/get-started/saved-views.md) topic provides general details about this feature, this topic focuses on the more technical elements of saved views as well as aspects of form development that may be impacted by views.</span></span> 

## <a name="user-perceived-pages"></a><span data-ttu-id="1bc07-106">「ユーザー視点」のページ</span><span class="sxs-lookup"><span data-stu-id="1bc07-106">“User-perceived” pages</span></span>
<span data-ttu-id="1bc07-107">従来、パーソナライゼーションには、1セットにつきモデル化されたフォームに対する 1:1 のリンクが含まれています。</span><span class="sxs-lookup"><span data-stu-id="1bc07-107">Traditionally, a set of personalizations has a 1:1 link to a modeled form.</span></span> <span data-ttu-id="1bc07-108">多くのページでは、これはユーザーにとっては理にかなっています。ユーザーが知覚するページと、フォームをモデル化した方法と合致するためです。</span><span class="sxs-lookup"><span data-stu-id="1bc07-108">For many pages, this makes sense to the user, as the user’s perception of the page matches the way in which the form is modeled.</span></span> <span data-ttu-id="1bc07-109">ただし、場合によっては 1:1のリンクとモデル化されたフォームが、パーソナライゼーションに対して直感的ではなく、わかりにくい場合があります。これはユーザーがモデル化されたフォーム間の境界に対して注意を払っていないためです。</span><span class="sxs-lookup"><span data-stu-id="1bc07-109">However, in some cases the 1:1 link of a modeled form to a set of personalizations is not intuitive or obvious because users do not see or care about the boundaries between modeled forms.</span></span> 

<span data-ttu-id="1bc07-110">保存されたビューは、このような混乱を解消するべく 「ユーザー視点」 ページ上でビューを作成できる機能がついています。これにより、パーソナライゼーションがいつ、どのように適用されるかを理解するために、フォームがどのようにモデル化されているかを理解する必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="1bc07-110">Saved views tries to eliminate this confusion by allowing users to create views on “user-perceived” pages, which eliminates the need to understand how forms are modeled to understand how and when personalizations are applied.</span></span> <span data-ttu-id="1bc07-111">たとえば、次の2つのシナリオを考えてみます。</span><span class="sxs-lookup"><span data-stu-id="1bc07-111">Consider the following two scenarios:</span></span>  

-    <span data-ttu-id="1bc07-112">**一つのモデル化されたフォームに複数の「ユーザー視点」ページ**: マスタの詳細 と トランザクションの詳細 フォーム ( たとえば **CustTable** や **PurchTable** フォームなど) は一般的に、グリッドページと詳細ページからなる複数の「ユーザー視点」ページで構成されています。</span><span class="sxs-lookup"><span data-stu-id="1bc07-112">**More than one “user-perceived” page in a single modeled form**: The standard modeling of Master Details and Transaction Details forms (like the **CustTable** and **PurchTable** forms, respectively) consist of more than one “user-perceived” page: a grid page and a details page.</span></span> 

     <span data-ttu-id="1bc07-113">これはユーザーはリストから詳細への切り替えることによってフォームの境界を超えていることに気づかない (気づく必要もないのですが) ためです。詳細フォームでのビューのサポートは、グリッド部分と詳細部分で別々にビューを定義できるように、異なる方法で処理されています。</span><span class="sxs-lookup"><span data-stu-id="1bc07-113">Because users are not aware when this transition from list to details crosses a form boundary (nor do they need to know this), view support in Details forms is handled differently to allow views to be defined separately for the grid and details portions.</span></span> <span data-ttu-id="1bc07-114">つまり、「グリッド」と「詳細」のビューセレクタでは、使用可能なビューの異なるセットを表示できます。</span><span class="sxs-lookup"><span data-stu-id="1bc07-114">This means that the view selector for the “grid” and “details” can show different sets of available views.</span></span> <span data-ttu-id="1bc07-115">これらのフォームで対応している特殊なケースのビューを使用することで、「グリッド」ビューにてビュー定義にフィルタを適用できます。その一方で「詳細」ビューではパーソナライゼーションのみが必要です。</span><span class="sxs-lookup"><span data-stu-id="1bc07-115">The special casing of view support on these forms also allows the “grid” views to allow filters in their view definitions, whereas the “details” view only need personalizations.</span></span>

-    <span data-ttu-id="1bc07-116">**1つの 「ユーザー視点」 ページに複数のモデル化されたフォーム**: モデル化されたフォーム (FactBoxまたはフォームパーツ) にサブフォームを埋め込む機能により、複数のモデル化されたフォームが単一の「ユーザー視点」ページに割り当てられている場合があります</span><span class="sxs-lookup"><span data-stu-id="1bc07-116">**More than one modeled form in a single “user-perceived” page**: The ability to embed subforms into modeled forms (via FactBoxes or form parts) leads to situations where more than one modeled form corresponds to a single “user-perceived” page.</span></span> <span data-ttu-id="1bc07-117">たとえば、 **すべての顧客** ページの詳細の部分には、情報ボックスの数と、フォームパーツの内容情報を取得する2つのファストタブがあります。</span><span class="sxs-lookup"><span data-stu-id="1bc07-117">For example, consider the details portion of the **All customers** page, which has a number of FactBoxes and two FastTabs whose contents come from form parts.</span></span> <span data-ttu-id="1bc07-118">従来のパーソナリゼーションではユーザーの期待に反して、 **CustTable** フォームにおけるパーソナリゼーションのエクスポートには、FactBoxのパーソナリゼーションも **住所** 、 **連絡先情報** のファストタブ内で行われたパーソナリゼーションも含まれていませんでした。</span><span class="sxs-lookup"><span data-stu-id="1bc07-118">With traditional personalization, contrary to a user’s expectations, exporting the personalizations for the **CustTable** form would not include personalizations on any FactBox or any personalizations done inside the **Addresses** or **Contact information** FastTabs.</span></span> <span data-ttu-id="1bc07-119">これと同様にユーザーが予期しないこととして、これらのサブフォームで行われたパーソナライゼーションはすべて、該当するフォームパーツが使用されているアプリケーションの他の部分にも反映されます。</span><span class="sxs-lookup"><span data-stu-id="1bc07-119">Equally unexpected for users, any personalizations done on these subforms would also be reflected in other parts of the application where these form parts are used.</span></span> <span data-ttu-id="1bc07-120">例えば **すべての顧客** ページ内の **住所** ファストタブに変更を加えると、変更した内容が **すべての仕入先** ページの **住所** ファストタブにも反映されます。</span><span class="sxs-lookup"><span data-stu-id="1bc07-120">For example, changes to the **Addresses** FastTab in the **All customers** page would also result in the same changes appearing in the **Addresses** FastTab in the **All vendors** page.</span></span>

     <span data-ttu-id="1bc07-121">ビューでは、フォームパーツのパーソナライゼーションの範囲が、ユーザーの期待に合うように変更されています。</span><span class="sxs-lookup"><span data-stu-id="1bc07-121">With views, the personalization scope of form parts has been modified to match user expectations.</span></span> <span data-ttu-id="1bc07-122">特にサブフォームのパーソナライゼーションは、作成された基本フォームに関連付けられるようになっています。</span><span class="sxs-lookup"><span data-stu-id="1bc07-122">In particular, subform personalizations are now tied to the base form where they are made.</span></span> <span data-ttu-id="1bc07-123">つまり、 **すべての顧客** の詳細ページからビューをエクスポートすると、元となっている **CustTable** フォームのパーソナライゼーションと、FactBox またはフォーム上の該当部分でモデル化されたフォームパーツからの個人設定が含まれます。</span><span class="sxs-lookup"><span data-stu-id="1bc07-123">This means that exporting a view on the **All customers** details page will include personalizations from the base **CustTable** form as well as any personalizations in FactBoxes or form parts modeled in that portion of the form.</span></span> <span data-ttu-id="1bc07-124">同様に、 **すべての顧客** ページ内の **住所** ファストタブ (フォームパーツ) で行ったパーソナライゼーションは、そのフォームパーツを使用している他のフォームには反映されません。</span><span class="sxs-lookup"><span data-stu-id="1bc07-124">Similarly, any personalizations done on the **Addresses** FastTab (form part) on the **All customers** page will not be reflected in other forms where that form part is used.</span></span>
     
<span data-ttu-id="1bc07-125">これらはパーソナライゼーション・サブシステムに対する高度な技術的変更であり、ビューが使用可能となっている場合にのみ利用できます。</span><span class="sxs-lookup"><span data-stu-id="1bc07-125">These are highly technical modifications to the personalization subsystem that are only available when view is enabled.</span></span> <span data-ttu-id="1bc07-126">これらの変更は、ユーザーがビューに関して予測可能で理解しやすい運用を行うにあたって非常に重要となります。</span><span class="sxs-lookup"><span data-stu-id="1bc07-126">These modifications are very important for ensuring that users have a predictable and understandable experience with views.</span></span>

## <a name="view-support"></a><span data-ttu-id="1bc07-127">ビューのサポート</span><span class="sxs-lookup"><span data-stu-id="1bc07-127">View support</span></span>
<span data-ttu-id="1bc07-128">フォームのスタイルは、ビューのサポートレベルによって決まります。</span><span class="sxs-lookup"><span data-stu-id="1bc07-128">The style of a form determines the level of support for views.</span></span> 

-    <span data-ttu-id="1bc07-129">ビューには、以下のようなフォームに対するクエリが含まれています</span><span class="sxs-lookup"><span data-stu-id="1bc07-129">Views include queries for forms, such as:</span></span>
     -    <span data-ttu-id="1bc07-130">リスト ページ</span><span class="sxs-lookup"><span data-stu-id="1bc07-130">List pages</span></span>
     -    <span data-ttu-id="1bc07-131">簡易リスト</span><span class="sxs-lookup"><span data-stu-id="1bc07-131">Simple lists</span></span>
     -    <span data-ttu-id="1bc07-132">[マスタの詳細] フォーム と [トランザクションの詳細] フォーム のグリッド部分</span><span class="sxs-lookup"><span data-stu-id="1bc07-132">Grid portions of Master Details and Transaction Details forms</span></span>

-    <span data-ttu-id="1bc07-133">以下のようなクエリは、ビューには含まれていません</span><span class="sxs-lookup"><span data-stu-id="1bc07-133">Views do not include queries, such as:</span></span>
     -    <span data-ttu-id="1bc07-134">その他形式のフルページのフォーム</span><span class="sxs-lookup"><span data-stu-id="1bc07-134">Any other full-page form</span></span>
     -    <span data-ttu-id="1bc07-135">[マスタの詳細] フォーム と [トランザクションの詳細] フォーム の詳細</span><span class="sxs-lookup"><span data-stu-id="1bc07-135">Details portions of Master Details and Transaction Details forms</span></span>

-    <span data-ttu-id="1bc07-136">以下のビューについては現在対応していません</span><span class="sxs-lookup"><span data-stu-id="1bc07-136">Views that are not currently supported include:</span></span>
     -    <span data-ttu-id="1bc07-137"> ダッシュボード</span><span class="sxs-lookup"><span data-stu-id="1bc07-137">Dashboards</span></span>
     -    <span data-ttu-id="1bc07-138">ワークスペース</span><span class="sxs-lookup"><span data-stu-id="1bc07-138">Workspaces</span></span>
     -    <span data-ttu-id="1bc07-139">ダイアログ</span><span class="sxs-lookup"><span data-stu-id="1bc07-139">Dialogs</span></span>
     -    <span data-ttu-id="1bc07-140">ドロップダウンダイアログ、ルックアップ、強化されたプレビューなどの、副次的なフォーム</span><span class="sxs-lookup"><span data-stu-id="1bc07-140">Secondary forms like drop-down dialogs, lookups, and enhanced previews</span></span>

## <a name="modifying-forms-to-fully-utilize-views"></a><span data-ttu-id="1bc07-141">フォームを変更してビューを完全に活用する</span><span class="sxs-lookup"><span data-stu-id="1bc07-141">Modifying forms to fully utilize views</span></span>
<span data-ttu-id="1bc07-142">ほとんどのフォームは保存されたビューで十分に機能しますが、フォー上でビューが問題なく想定どおりに機能するためには、フォームロジックへの変更が必要となる部分も存在します。</span><span class="sxs-lookup"><span data-stu-id="1bc07-142">While most forms will work well with saved views, there are some areas that may require changes to form logic so that views work as expected on these forms without causing confusion.</span></span> <span data-ttu-id="1bc07-143">以下は、新しいフォームを開発する際に留意すべき重要な項目です。</span><span class="sxs-lookup"><span data-stu-id="1bc07-143">Here are some key items to keep in mind during development of new forms.</span></span>

-    <span data-ttu-id="1bc07-144">フォームのスタートアップサイクルにてX++コードの遅延が発生すると、ビューが想定どおりに機能しない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="1bc07-144">X++ code late in the form startup cycle can interfere with views working as users expect.</span></span> <span data-ttu-id="1bc07-145">特に、以下の点にご注意ください。</span><span class="sxs-lookup"><span data-stu-id="1bc07-145">In particular, be aware of the following:</span></span> 
     -    <span data-ttu-id="1bc07-146">executeQuery() 内の super()または、run() 内の super() のクエリに対する変更を行うと、ビューからのクエリが無視される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="1bc07-146">Modifications of the query post super() of executeQuery() or post super() of run() can cause the query aspect of a view to be ignored.</span></span>  
     -    <span data-ttu-id="1bc07-147">run() 内の super() に対するフォーム変更を行うと、ユーザーのパーソナライゼーションが正しく適用されない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="1bc07-147">Form changes post super() of run() can result in some user personalizations not applying correctly.</span></span>  

-    <span data-ttu-id="1bc07-148">カスタムフィルタの値を常に現在のビュー、またはクエリに合わせるには、追加の作業が必要となる場合があります。</span><span class="sxs-lookup"><span data-stu-id="1bc07-148">Extra work may be required to ensure the values of custom filters always align to the current view or query.</span></span>  
     -    <span data-ttu-id="1bc07-149">保存されているビューでカスタムフィルターを正しく機能させるには、プラットフォームで追加の作業を行う必要があり、また、フォームによってカスタムのフィルタの取得の可能性があります。</span><span class="sxs-lookup"><span data-stu-id="1bc07-149">To make sure custom filters work properly with saved views, additional work needs to be done by the platform and there will likely be uptake by forms with custom filters.</span></span> <span data-ttu-id="1bc07-150">詳細については、後ほど提供します。</span><span class="sxs-lookup"><span data-stu-id="1bc07-150">More information will be provided in the future.</span></span>  

-    <span data-ttu-id="1bc07-151">長期的に見ると、ビューはモデル化されたセカンダリ リストページに取って代わるものです。</span><span class="sxs-lookup"><span data-stu-id="1bc07-151">Looking forward, in the long-term, views are meant to replace modeled secondary list pages.</span></span>  
     -   <span data-ttu-id="1bc07-152">通常、保留中の得意先などのセカンダリ リスト ページは、同じフォームを指定するメニュー項目ですが、異なるクエリを持っています。</span><span class="sxs-lookup"><span data-stu-id="1bc07-152">Typically, secondary list pages, such as Customers on hold, are menu items that point at the same form but have a different query.</span></span> <span data-ttu-id="1bc07-153">クエリを渡すメニュー項目は、既定のビューで定義されているすべてのクエリを上書きするため、こうしたエントリ ポイントはユーザーを混乱させる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="1bc07-153">Because menu items that pass in queries will override any query defined on the default view, these entry points can create confusion for users.</span></span> <span data-ttu-id="1bc07-154">長期的には、セカンダリ リストページを廃止して、それらをビューに移動する計画となっています。</span><span class="sxs-lookup"><span data-stu-id="1bc07-154">Long-term, the current plan is to deprecate secondary list pages and move them to views.</span></span>

     -  <span data-ttu-id="1bc07-155">ユーザがフォームキャプション (「すべての顧客」など) とビュー名 (「お客様」など) を混同しないように、フォームキャプションを対応するエンティティの名前に変更することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="1bc07-155">To avoid user confusion between form caption (such as “All customers”) and view name (such as “My customers”), consider renaming form captions to simply be the name of the corresponding entity.</span></span> <span data-ttu-id="1bc07-156">たとえば、フォームキャプションに 「すべての顧客」 や 「すべての受注」 と表示していたものを、 「顧客」 や 「受注」 へと変更します。</span><span class="sxs-lookup"><span data-stu-id="1bc07-156">For example, instead of a form caption of “All customers” or “All sales orders”, the form caption would be modified to “Customers” and “Sales orders”.</span></span> 

## <a name="known-issues"></a><span data-ttu-id="1bc07-157">既知の問題</span><span class="sxs-lookup"><span data-stu-id="1bc07-157">Known issues</span></span>
- <span data-ttu-id="1bc07-158">QuickFilter 条件は、ビュー定義に保存されていません。</span><span class="sxs-lookup"><span data-stu-id="1bc07-158">The QuickFilter condition is not being saved to the view definition.</span></span>
- <span data-ttu-id="1bc07-159">カスタムフィルター、高度なフィルター、または並べ替え (ビュー上でフィルターがサポートされているページ上で) でフィルター処理を実行しても、ビューは正しく表示されません。</span><span class="sxs-lookup"><span data-stu-id="1bc07-159">Filtering done via custom filters, advanced filters, or sort (on pages where filters are supported on views) will not currently cause the view to appear dirty.</span></span> <span data-ttu-id="1bc07-160">ただし、グリッドの列ヘッダーまたはフィルターウィンドウを使用してフィルター処理を行う場合や、明示的なカスタマイズを実行してビューを保存する場合は、カスタムフィルター、高度なフィルタ、または並べ替えの各クエリ条件がビューに保存されます。</span><span class="sxs-lookup"><span data-stu-id="1bc07-160">However, if you filter via the grid column header or Filter pane, or if you perform an explicit personalization and then save your view, the custom filter, advanced filter, or sort query conditions will be saved to the view.</span></span>  
