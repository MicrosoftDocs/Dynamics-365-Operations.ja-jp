---
title: 侵入的なカスタマイズ
description: このトピックは、侵襲性のあるカスタマイズの特性を定義します。
author: MichaelFruergaardPontoppidan
ms.date: 04/10/2018
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Developer
ms.reviewer: rhaertle
ms.custom: 89563
ms.assetid: ''
ms.search.region: Global
ms.author: mfp
ms.search.validFrom: 2017-07-01
ms.dyn365.ops.version: Platform update 9
ms.openlocfilehash: ca93578438fb0a92913fbcd69026bcc7b27d2861
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/31/2021
ms.locfileid: "5746037"
---
# <a name="intrusive-customizations"></a><span data-ttu-id="57704-103">侵入的なカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="57704-103">Intrusive customizations</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="57704-104">このトピックは、侵襲性のあるカスタマイズの特性を定義します。</span><span class="sxs-lookup"><span data-stu-id="57704-104">This topic defines the characteristics of an intrusive customization.</span></span> <span data-ttu-id="57704-105">侵入的なカスタマイズは、継続的なアップグレードの費用をゼロに維持する主要な障害です。</span><span class="sxs-lookup"><span data-stu-id="57704-105">Intrusive customizations are the major obstacle to keeping continuous upgrade costs close to zero.</span></span> <span data-ttu-id="57704-106">面倒なカスタマイズには、ツールによってなくすことができる種類もありますが、それ以外の種類は引き続き作成者が拡張する必要があります。</span><span class="sxs-lookup"><span data-stu-id="57704-106">Some types of intrusive customizations can be prevented by tooling, whereas other types remain the responsibility of the author of the extension.</span></span> <span data-ttu-id="57704-107">X++ コンパイラと Microsoft Visual Studio デザイナーでは、いくつかの種類の侵入的なカスタマイズが禁止されます。</span><span class="sxs-lookup"><span data-stu-id="57704-107">The X++ compiler and Microsoft Visual Studio designers will prevent some types of intrusive customizations.</span></span> <span data-ttu-id="57704-108">ただし、侵入的なカスタマイズのサブセットはツールよって検出できませんが、継続的なアップグレードを実行しない場合があります。</span><span class="sxs-lookup"><span data-stu-id="57704-108">However, a subset of intrusive customizations can't be detected by tooling but might still prevent continuous upgrades.</span></span> <span data-ttu-id="57704-109">最終的には、開発者は不注意なカスタマイズを避ける責任があります。</span><span class="sxs-lookup"><span data-stu-id="57704-109">Ultimately, the developer is responsible for avoiding intrusive customizations.</span></span>

<span data-ttu-id="57704-110">次のいずれかの原則に違反しているカスタマイズは侵入的です。</span><span class="sxs-lookup"><span data-stu-id="57704-110">A customization that violates any of the following principles is intrusive.</span></span>

 > [!NOTE]
> <span data-ttu-id="57704-111">他のソリューションを拡張するとき、責任を持つことが求められます。</span><span class="sxs-lookup"><span data-stu-id="57704-111">When extending other solutions you are expected to be responsible.</span></span> <span data-ttu-id="57704-112">これには、次のものが含まれます。</span><span class="sxs-lookup"><span data-stu-id="57704-112">This includes:</span></span>
> + <span data-ttu-id="57704-113">拡張の責任を受け入れる。</span><span class="sxs-lookup"><span data-stu-id="57704-113">Accepting the responsibility of your extension.</span></span> <span data-ttu-id="57704-114">新しい動作を導入しようとしているため、変更についてのすべての責任を負います。</span><span class="sxs-lookup"><span data-stu-id="57704-114">You are introducing new behavior and therefore own the full responsibility of the change.</span></span>
> + <span data-ttu-id="57704-115">他の拡張の共存を許可する。</span><span class="sxs-lookup"><span data-stu-id="57704-115">Allowing other extensions to co-exist.</span></span> <span data-ttu-id="57704-116">拡張ポイントの唯一のユーザーではないことを認識します。</span><span class="sxs-lookup"><span data-stu-id="57704-116">Recognize that you are not the only consumer of an extension point.</span></span> <span data-ttu-id="57704-117">たとえば、必要なときのみ応答します。</span><span class="sxs-lookup"><span data-stu-id="57704-117">For example, only respond when needed.</span></span>
> + <span data-ttu-id="57704-118">拡張ポイントと一貫性のある拡張のみ追加する。</span><span class="sxs-lookup"><span data-stu-id="57704-118">Only adding extensions that are coherent with the extension point.</span></span> <span data-ttu-id="57704-119">ソリューションの有効期限は、変更への弾力性によって定義されます。</span><span class="sxs-lookup"><span data-stu-id="57704-119">The longevity of a solution is defined by its resilience to change.</span></span> <span data-ttu-id="57704-120">その拡張ポイントが将来のバージョンで実行されるシナリオが増えることもあれば減ることもあることを認識します。</span><span class="sxs-lookup"><span data-stu-id="57704-120">Recognize that extension points may be exercised in more or fewer scenarios in future versions.</span></span> <span data-ttu-id="57704-121">たとえば、validate() メソッドにのみ関連する検証ロジックを追加します。</span><span class="sxs-lookup"><span data-stu-id="57704-121">For example, only add relevant validation logic to a validate() method.</span></span>
> + <span data-ttu-id="57704-122">実装の詳細への依存関係を回避する。</span><span class="sxs-lookup"><span data-stu-id="57704-122">Avoiding dependencies on implementation details.</span></span> <span data-ttu-id="57704-123">実装の詳細は、将来のバージョンで変更される可能性が高くなります。</span><span class="sxs-lookup"><span data-stu-id="57704-123">Implementation details are likely to change in future versions.</span></span> <span data-ttu-id="57704-124">ローカル変数、呼び出しスタック、呼び出し順序への依存を回避し、リフレクションの使用を回避することによって、ソリューションの復元力を高めます。</span><span class="sxs-lookup"><span data-stu-id="57704-124">Make your solution resilient by avoiding dependencies on local variables, call-stacks and, calling sequences and avoid using reflection.</span></span>


## <a name="dont-change-type-definitions"></a><span data-ttu-id="57704-125">タイプの定義を変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-125">Don't change type definitions</span></span>
<span data-ttu-id="57704-126">タイプはその定義によって参照されます。</span><span class="sxs-lookup"><span data-stu-id="57704-126">Types are referenced by their definition.</span></span> <span data-ttu-id="57704-127">タイプの定義の変更は大きな変更であり、すべての参照を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="57704-127">A change to a type’s definition is a breaking change and requires that all references be updated.</span></span> <span data-ttu-id="57704-128">(たとえば、タイプをホストするモデルで) 今後の参照が正しく実装されるよう確認することが重要です。</span><span class="sxs-lookup"><span data-stu-id="57704-128">It's impossible to ensure that future references will be implemented correctly (for example, in the model that hosts the type).</span></span> <span data-ttu-id="57704-129">これにはいくつかの意味があります。</span><span class="sxs-lookup"><span data-stu-id="57704-129">There are several implications:</span></span>

+ <span data-ttu-id="57704-130">メソッド シグネチャを変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-130">Don't change a method signature.</span></span> <span data-ttu-id="57704-131">メソッド シグネチャには、戻り値の型、名前 (大文字と小文字の区別を含む)、およびパラメーター (オプションのパラメーターを含む) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="57704-131">The method signature includes the return type, the name (which includes casing), and the parameters (which include optional parameters).</span></span>
+ <span data-ttu-id="57704-132">インターフェイスおよびテーブル マップの実装者の要件を変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-132">Don't change requirements for implementers of interfaces and table maps.</span></span> <span data-ttu-id="57704-133">たとえば、新しいメソッドをインターフェイスに、または新しいフィールドをテーブル マップに追加しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-133">For example, don't add a new method to an interface or a new field to a table map.</span></span>
+ <span data-ttu-id="57704-134">抽象クラスから派生したクラスの要件を変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-134">Don't change requirements for classes that are derived from abstract classes.</span></span> <span data-ttu-id="57704-135">たとえば、クラスに新しい抽象メソッドを追加しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-135">For example, don't add a new abstract method to a class.</span></span>
+ <span data-ttu-id="57704-136">タイプまたはメンバーのアクセス修飾子を減らさないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-136">Don't reduce access modifiers for types or members.</span></span> <span data-ttu-id="57704-137">たとえば、クラス、テーブル、またはメソッドをパブリックからプライベートに変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-137">For example, don't change classes, tables, or methods from public to private.</span></span>
+ <span data-ttu-id="57704-138">テーブルまたはデータ エンティティで定義されている制約を変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-138">Don't change constraints that are defined on a table or a data entity.</span></span> <span data-ttu-id="57704-139">制約には、編集、必須の制約、一意性の制約、および参照の制約を許可することが含まれます。</span><span class="sxs-lookup"><span data-stu-id="57704-139">Constraints include allowing editing, mandatory constraints, uniqueness constraints, and referential constraints.</span></span>

## <a name="dont-break-encapsulation"></a><span data-ttu-id="57704-140">カプセル化を中止しない</span><span class="sxs-lookup"><span data-stu-id="57704-140">Don't break encapsulation</span></span>
<span data-ttu-id="57704-141">モデルの作成者は、カプセル化されたコードとタイプを管理し続けて製品を改良することができる必要があります。</span><span class="sxs-lookup"><span data-stu-id="57704-141">The author of a model must be able improve the product by remaining in control of encapsulated code and types.</span></span> <span data-ttu-id="57704-142">モデルの所有者は、事前に通知せず、拡張機能およびカスタマイズの下位に影響を及ぼすことなく、自由にカプセル化されたコードを変更および削除できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="57704-142">Model owners must be able to change and delete encapsulated code and types at will, without prior notice, and without risk of downstream impact on extensions and customizations.</span></span> <span data-ttu-id="57704-143">たとえば、プライベート メソッドを削除された場合、カプセル化は中断されます。</span><span class="sxs-lookup"><span data-stu-id="57704-143">Encapsulation is broken if, for example, a private method is deleted.</span></span> <span data-ttu-id="57704-144">次に、いくつか関連事項を示します。</span><span class="sxs-lookup"><span data-stu-id="57704-144">Here are some of the implications:</span></span>

+ <span data-ttu-id="57704-145">タイプまたはメンバーのアクセス修飾子を増やさないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-145">Don't increase access modifiers for types or members.</span></span> <span data-ttu-id="57704-146">たとえば、クラス、テーブル、またはメソッドをプライベートからパブリックに変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-146">For example, don't change classes, tables, or methods from private to public.</span></span>
+ <span data-ttu-id="57704-147">変更のために何かを閉じる必要がある場合は、カスタマイズ動作のためににそれを開けることはできません。</span><span class="sxs-lookup"><span data-stu-id="57704-147">If something should be closed for modification, don't open it for customizing behavior.</span></span> <span data-ttu-id="57704-148">拡張子の機能は、拡張性に向けオープンであるように設計されなければならないが、変更のためクローズする必要があります。</span><span class="sxs-lookup"><span data-stu-id="57704-148">Extension capabilities must be designed as open for extensibility but closed for modification.</span></span>
            
## <a name="be-additive-in-nature"></a><span data-ttu-id="57704-149">本質的に付加</span><span class="sxs-lookup"><span data-stu-id="57704-149">Be additive in nature</span></span>
<span data-ttu-id="57704-150">拡張機能の一部として追加された機能を通じて新しい動作が有効になります。</span><span class="sxs-lookup"><span data-stu-id="57704-150">New behaviors are enabled through added functionality as part of extensions.</span></span> <span data-ttu-id="57704-151">拡張子の機能は、拡張子機能で設計および拡張子用にオープンされていなければならず、同じインストールで並行して存在する複数の拡張子をサポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="57704-151">Extension capabilities must be designed in and open for extensions, and they must support multiple extensions that exist side by side in the same installation.</span></span> <span data-ttu-id="57704-152">これにはいくつかの意味があります。</span><span class="sxs-lookup"><span data-stu-id="57704-152">There are several implications:</span></span>

+ <span data-ttu-id="57704-153">オーバーレイしないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-153">Don't overlayer.</span></span> <span data-ttu-id="57704-154">オーバーレイヤーは、既定の実装を置き換え、複数のソリューションが同じ要素を変更できないようにします。</span><span class="sxs-lookup"><span data-stu-id="57704-154">Overlayering replaces the default implementation and prevents multiple solutions from changing the same element.</span></span>
+ <span data-ttu-id="57704-155">標準的な機能の特性を大幅に変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-155">Don't significantly change the characteristics of the standard functionality.</span></span> <span data-ttu-id="57704-156">これらの特性には、ユーザー エクスペリエンスとパフォーマンスが含まれます。</span><span class="sxs-lookup"><span data-stu-id="57704-156">These characteristics include the user experience and performance.</span></span> <span data-ttu-id="57704-157">たとえば、拡張子がインストールされているが使用されていない場合、パフォーマンスが低下することはありません。</span><span class="sxs-lookup"><span data-stu-id="57704-157">For example, performance must not be adversely affected if an extension is installed but isn't used.</span></span>
+ <span data-ttu-id="57704-158">**EventHandlerResult** クラスで結果を無条件に設定しないでください。**XppPrePostArgs** クラスで戻り値を無条件に設定しないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-158">Don't unconditionally set results in **EventHandlerResult** classes, and don't unconditionally set return values in **XppPrePostArgs** classes.</span></span>
+ <span data-ttu-id="57704-159">置換ロジックがリスコフの置換原則に準拠していない限り、既定では、既存の動作を置き換えないでください。</span><span class="sxs-lookup"><span data-stu-id="57704-159">Don't replace existing behavior by default, unless the replacing logic conforms to the Liskov Substitution Principle.</span></span>  

> [!NOTE]
> <span data-ttu-id="57704-160">拡張機能の作成者は、これらの原則に違反しないようにする責任があります。</span><span class="sxs-lookup"><span data-stu-id="57704-160">The author of the extension is responsible for not violating these principles.</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]