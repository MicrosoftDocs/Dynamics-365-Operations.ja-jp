---
title: クラウド環境へ更新プログラムを適用
description: このトピックでは、Lifecycle Services (LCS) を使用して、バイナリ更新プログラムまたはアプリケーション (AOT) 展開可能なパッケージをクラウド環境に適用する方法について説明します。
author: manalidongre
manager: AnnBe
ms.date: 11/06/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: sericks
ms.search.scope: Operations, Retail
ms.assetid: 341a229f-d9c3-4678-b353-d08d5b2c1caf
ms.search.region: Global
ms.author: manado
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: Platform update 1
ms.openlocfilehash: 062317ad379347194debd412bdea7e880a696697
ms.sourcegitcommit: 81a647904dd305c4be2e4b683689f128548a872d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/01/2020
ms.locfileid: "3003607"
---
# <a name="apply-updates-to-cloud-environments"></a><span data-ttu-id="6614d-103">クラウド環境への更新プログラムの適用</span><span class="sxs-lookup"><span data-stu-id="6614d-103">Apply updates to cloud environments</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="6614d-104">このトピックでは、Microsoft Dynamics Lifecycle Services (LCS) を使用して、クラウド環境に更新プログラムを自動的に適用する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="6614d-104">This topic describes how you can use Microsoft Dynamics Lifecycle Services (LCS) to automatically apply updates to cloud environments.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="6614d-105">展開可能なパッケージを使用して更新が適用されます。</span><span class="sxs-lookup"><span data-stu-id="6614d-105">Updates are applied using deployable packages.</span></span> <span data-ttu-id="6614d-106">更新プログラムを適用するとシステムのダウンタイムが発生します。</span><span class="sxs-lookup"><span data-stu-id="6614d-106">Applying updates causes system downtime.</span></span> <span data-ttu-id="6614d-107">すべて関連するサービスを停止、およびパッケージを適用中のときには環境を使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="6614d-107">All relevant services will be stopped, and you won't be able to use your environments while the package is being applied.</span></span> <span data-ttu-id="6614d-108">それに応じた計画を立てる必要があります。</span><span class="sxs-lookup"><span data-stu-id="6614d-108">You should plan accordingly.</span></span>

## <a name="supported-environments"></a><span data-ttu-id="6614d-109">サポートされる環境</span><span class="sxs-lookup"><span data-stu-id="6614d-109">Supported environments</span></span>
<span data-ttu-id="6614d-110">Lifecycle Services を使用して配置されるすべての環境がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="6614d-110">All environments deployed through Lifecycle Services are supported.</span></span> 

> [!NOTE]
> <span data-ttu-id="6614d-111">ビルド環境があれば、LCS のみを使用してバイナリ更新プログラムとデータ アップグレード パッケージを適用します。</span><span class="sxs-lookup"><span data-stu-id="6614d-111">If you have a build environment, you can only use LCS to apply Binary updates and Data upgrade packages.</span></span> <span data-ttu-id="6614d-112">LCS を使用してアプリケーション配置可能パッケージを適用することはできません。</span><span class="sxs-lookup"><span data-stu-id="6614d-112">You can't use LCS to apply an Application Deployable package.</span></span>

<span data-ttu-id="6614d-113">他の環境 (以下の一覧) については、リモート デスクトップ プロトコル (RDP) を使用して環境に接続し、コマンドラインからインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6614d-113">For other environments (listed below), you must use Remote Desktop Protocol (RDP) to connect to the environment and install from the command line.</span></span> <span data-ttu-id="6614d-114">手動のパッケージ配置の詳細については、[コマンド ラインからの配置可能パッケージのインストール](install-deployable-package.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6614d-114">For information about manual package deployment, see [Install deployable packages from the command line](install-deployable-package.md).</span></span>

- <span data-ttu-id="6614d-115">ローカルの開発環境 (仮想ハード ディスク [VHD] からダウンロード可能)</span><span class="sxs-lookup"><span data-stu-id="6614d-115">Local development environments (Downloadable virtual hard disk [VHD])</span></span>
- <span data-ttu-id="6614d-116">Microsoft Azure (パートナーおよび試用プロジェクト) でのマルチボックス開発/テスト環境</span><span class="sxs-lookup"><span data-stu-id="6614d-116">Multi-box dev/test environments in Microsoft Azure (Partner and trial projects)</span></span>

## <a name="key-concepts"></a><span data-ttu-id="6614d-117">重要な概念</span><span class="sxs-lookup"><span data-stu-id="6614d-117">Key concepts</span></span>

<span data-ttu-id="6614d-118">開始する前に、*配置可能パッケージ*、*runbooks*、および *AXInstaller* を理解する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6614d-118">Before you begin, you should understand *deployable packages*, *runbooks*, and the *AXInstaller*.</span></span> <span data-ttu-id="6614d-119">デプロイ可能なパッケージは、どのような環境でも利用可能なデプロイメントの単位です。</span><span class="sxs-lookup"><span data-stu-id="6614d-119">A deployable package is a unit of deployment that can be applied in any environment.</span></span> <span data-ttu-id="6614d-120">デプロイ可能なパッケージは、プラットフォームまたは他のランタイム コンポーネント、更新されたアプリケーション (AOT) パッケージ、または新しいアプリケーション (AOT) パッケージのバイナリ更新です。</span><span class="sxs-lookup"><span data-stu-id="6614d-120">A deployable package can be a binary update to the platform or other runtime components, an updated application (AOT) package, or a new application (AOT) package.</span></span> <span data-ttu-id="6614d-121">AXInstaller は、パッケージのインストールを可能にする runbook を作成します。</span><span class="sxs-lookup"><span data-stu-id="6614d-121">The AXInstaller creates a runbook that enables installing a package.</span></span> <span data-ttu-id="6614d-122">詳細については、このトピックの最後で [パッケージ、Runbook、および AXUpdateInstaller の詳細](apply-deployable-package-system.md#packages-runbooks-and-the-axupdateinstaller-in-depth) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6614d-122">For more details, see [Packages, runbooks, and the AXUpdateInstaller in depth](apply-deployable-package-system.md#packages-runbooks-and-the-axupdateinstaller-in-depth) at the end of this topic.</span></span>

## <a name="supported-package-types"></a><span data-ttu-id="6614d-123">サポートされているパッケージの種類</span><span class="sxs-lookup"><span data-stu-id="6614d-123">Supported package types</span></span>

- <span data-ttu-id="6614d-124">**AOT の配置可能パッケージ** - アプリケーション メタデータおよびソース コードから生成される配置可能なパッケージ。</span><span class="sxs-lookup"><span data-stu-id="6614d-124">**AOT deployable package** – A deployable package that is generated from application metadata and source code.</span></span> <span data-ttu-id="6614d-125">この展開可能なパッケージは、開発環境またはビルド環境で作成されます。</span><span class="sxs-lookup"><span data-stu-id="6614d-125">This deployable package is created in a development or build environment.</span></span>
- <span data-ttu-id="6614d-126">**アプリケーションおよびプラットフォーム バイナリ更新プログラム パッケージ** - ダイナミックリンク ライブラリ (DLL)と、プラットフォームとアプリケーションが依存するその他のバイナリとメタデータを含む配置可能パッケージ。</span><span class="sxs-lookup"><span data-stu-id="6614d-126">**Application and Platform Binary update package** – A deployable package that contains dynamic-link libraries (DLLs) and other binaries and metadata that the platform and application depend on.</span></span> <span data-ttu-id="6614d-127">これは、Microsoft によってリリースされたパッケージです。</span><span class="sxs-lookup"><span data-stu-id="6614d-127">This is a package released by Microsoft.</span></span> <span data-ttu-id="6614d-128">これは、LCS の **すべてのバイナリ更新** タイルから使用できます。</span><span class="sxs-lookup"><span data-stu-id="6614d-128">This is available from the **All binary updates** tile from LCS.</span></span>
- <span data-ttu-id="6614d-129">**プラットフォーム更新パッケージ** - ダイナミックリンク ライブラリ (DLL)と、プラットフォームが依存するその他のバイナリとメタデータを含む配置可能パッケージ。</span><span class="sxs-lookup"><span data-stu-id="6614d-129">**Platform update package** – A deployable package that contains dynamic-link libraries (DLLs) and other binaries and metadata that the platform depend on.</span></span> <span data-ttu-id="6614d-130">これは、Microsoft によってリリースされたパッケージです。</span><span class="sxs-lookup"><span data-stu-id="6614d-130">This is a package released by Microsoft.</span></span> <span data-ttu-id="6614d-131">これは、LCS の **プラットフォーム バイナリ更新** タイルから使用できます。</span><span class="sxs-lookup"><span data-stu-id="6614d-131">This is available from the **Platform binary updates** tile from LCS.</span></span>
- <span data-ttu-id="6614d-132">**配置可能小売パッケージ** - 小売コードが結合された後に生成されるさまざまな小売パッケージの組み合わせ。</span><span class="sxs-lookup"><span data-stu-id="6614d-132">**Retail deployable package** – A combination of various Retail packages that are generated after the Retail code is combined.</span></span>
- <span data-ttu-id="6614d-133">**マージ済パッケージ** – 各タイプの 1 つのパッケージを組み合わせて作成されたパッケージ。</span><span class="sxs-lookup"><span data-stu-id="6614d-133">**Merged package** – A package that is created by combining one package of each type.</span></span> <span data-ttu-id="6614d-134">たとえば、1 つのバイナリ更新パッケージと 1 つの AOT パッケージ、または 1 つの AOT パッケージと 1 つの小売展開可能パッケージを結合することができます。</span><span class="sxs-lookup"><span data-stu-id="6614d-134">For example, you can merge one binary update package and one AOT package, or one AOT package and one Retail deployable package.</span></span> <span data-ttu-id="6614d-135">パッケージは、LCS のプロジェクトのアセット ライブラリでマージされます。</span><span class="sxs-lookup"><span data-stu-id="6614d-135">The packages are merged in the Asset library for the project in LCS.</span></span>
> [!NOTE] 
> <span data-ttu-id="6614d-136">バイナリ パッケージおよび小売展開可能パッケージは、同じ結合済パッケージにまとめることはできません。</span><span class="sxs-lookup"><span data-stu-id="6614d-136">A binary package and a Retail deployable package can't be included in the same merged package.</span></span>
>
> <span data-ttu-id="6614d-137">LCS から更新をダウンロードする方法と、環境のバージョンに基づくタイルに表示される内容については、[Lifecycle Services (LCS) から更新プログラムをダウンロード](../migration-upgrade/download-hotfix-lcs.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6614d-137">For information about how to download an update from LCS and what you see in the tiles based on your environment version, see [Download updates from Lifecycle Services (LCS)](../migration-upgrade/download-hotfix-lcs.md).</span></span>
>
> <span data-ttu-id="6614d-138">環境がアプリケーション バージョン 8.1 以上の場合、**プラットフォーム更新パッケージ**は環境に適用されません。</span><span class="sxs-lookup"><span data-stu-id="6614d-138">If your environment is on an application version 8.1 and later, then the **Platform Update package** does not apply to your environment.</span></span> <span data-ttu-id="6614d-139">8.1 以降のリリースでは、**アプリケーションおよびプラットフォームのバイナリ更新パッケージ**は、アプリケーションとプラットフォームが 1 つの累積的なパッケージにまとめられ、Microsoft によってリリースされてから適用されます。</span><span class="sxs-lookup"><span data-stu-id="6614d-139">Starting with 8.1 and later releases, **Application and Platform Binary update package** is the one that applies since application and platform will be combined into a single cumulative package and will be released by Microsoft.</span></span> <span data-ttu-id="6614d-140">細かい X++ 修正プログラムを適用する必要はなくなり、すべてのアプリケーションとプラットフォーム更新がまとめて取得される点にも注意してください。</span><span class="sxs-lookup"><span data-stu-id="6614d-140">Also note that you will no longer be applying granular X++ hotfixes and will get all application and platform updates together.</span></span> <span data-ttu-id="6614d-141">つまり、環境の詳細ページで**詳細バージョン情報を表示**をクリックしても、細かい修正プログラムまたは KB に関する詳細情報が表示されません。適用する方法がないからです。</span><span class="sxs-lookup"><span data-stu-id="6614d-141">This means that on the environment details page, clicking on **View detailed version information** will not have details on the granular hotfixes or KBs applied as there is no way to apply them.</span></span> 

## <a name="prerequisite-steps"></a><span data-ttu-id="6614d-142">前提条件のステップ</span><span class="sxs-lookup"><span data-stu-id="6614d-142">Prerequisite steps</span></span>

- <span data-ttu-id="6614d-143">**適用するパッケージが有効であることを確認してください。**</span><span class="sxs-lookup"><span data-stu-id="6614d-143">**Make sure that the package that should be applied is valid.**</span></span> <span data-ttu-id="6614d-144">パッケージがアセット ライブラリにアップロードされるとき、そのパッケージは分析されません。</span><span class="sxs-lookup"><span data-stu-id="6614d-144">When a package is uploaded to the Asset library, it isn't analyzed.</span></span> <span data-ttu-id="6614d-145">パッケージを選択すると、右側のペインにパッケージ ステータスが **未検証** として表示されます。</span><span class="sxs-lookup"><span data-stu-id="6614d-145">If you select the package, the package status appears in the right pane as **Not Validated**.</span></span> <span data-ttu-id="6614d-146">パッケージは、環境に適用する前に、次の手順を使用して検証に合格する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6614d-146">A package must pass validation before it can be applied in an environment by using the following procedures.</span></span> <span data-ttu-id="6614d-147">パッケージの状態は、パッケージが有効かどうかを示すために、資産ライブラリで更新されます。</span><span class="sxs-lookup"><span data-stu-id="6614d-147">The status of the package will be updated in the Asset library to indicate whether the package is valid.</span></span> <span data-ttu-id="6614d-148">ガイドラインを満たしていないパッケージによって実稼働環境が影響を受けていなことを確認する手助けのために検証が必要です。</span><span class="sxs-lookup"><span data-stu-id="6614d-148">We require validation to help ensure that production environments aren't affected by packages that don't meet the guidelines.</span></span>

    <span data-ttu-id="6614d-149">検証には次の 3 つのタイプがあります。</span><span class="sxs-lookup"><span data-stu-id="6614d-149">There are three types of validations:</span></span>

    - <span data-ttu-id="6614d-150">基本パッケージの形式検証</span><span class="sxs-lookup"><span data-stu-id="6614d-150">Basic package format validations</span></span>
    - <span data-ttu-id="6614d-151">プラットフォーム バージョンのチェック</span><span class="sxs-lookup"><span data-stu-id="6614d-151">Platform version checks</span></span>
    - <span data-ttu-id="6614d-152">パッケージのタイプ</span><span class="sxs-lookup"><span data-stu-id="6614d-152">Types of packages</span></span>

- <span data-ttu-id="6614d-153">**実稼動環境でパッケージを適用する前に、パッケージがサンド ボックス環境に適用されていることを確認してください。**</span><span class="sxs-lookup"><span data-stu-id="6614d-153">**Make sure that the package is applied in a sandbox environment before it's applied in the production environment.**</span></span> <span data-ttu-id="6614d-154">実稼働環境が常に良好な状態に保たれるように、実稼働環境に適用される前にパッケージがサンドボックス環境でテストされていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6614d-154">To help ensure that the production environment is always in a good state, we want to make sure that the package is tested in a sandbox environment before it's applied in the production environment.</span></span> <span data-ttu-id="6614d-155">したがって、パッケージが実稼働環境で適用されるように要求する前に、自動フローを使用してパッケージがサンドボックス環境に適用されていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="6614d-155">Therefore, before you request that the package be applied in your production environment, make sure that it has been applied in your sandbox environment by using the automated flows.</span></span>
- <span data-ttu-id="6614d-156">**複数のパッケージを適用する場合は、マージ済パッケージを作成します。このパッケージは、まずサンドボックス環境で、次に実稼働環境で適用できます。**</span><span class="sxs-lookup"><span data-stu-id="6614d-156">**If you want to apply multiple packages, create a merged package that can be applied first in a sandbox environment and then in the production environment.**</span></span> <span data-ttu-id="6614d-157">平均環境で単一パッケージのアプリケーションは、約 5 時間のダウンタイムが必要です。</span><span class="sxs-lookup"><span data-stu-id="6614d-157">Application of a single package in an average environment requires about 5 hours of downtime.</span></span> <span data-ttu-id="6614d-158">複数のパッケージを適用する必要がある場合にダウンタイムが発生しないように、各タイプのパッケージを 1 つずつ含む単一のパッケージを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="6614d-158">To avoid additional hours of downtime when you must apply multiple packages, you can create a single combined package that contains one package of each type.</span></span> <span data-ttu-id="6614d-159">資産ライブラリでバイナリ パッケージとアプリケーション配置可能パッケージを選択した場合、**マージ** ボタンは、ツールバー上で利用可能になります。</span><span class="sxs-lookup"><span data-stu-id="6614d-159">If you select a binary package and an application deployable package in the Asset library, a **Merge** button becomes available on the toolbar.</span></span> <span data-ttu-id="6614d-160">このボタンをクリックすると、2 つのパッケージを単一のパッケージにマージできるため、合計のダウンタイムを半分に減らすことができます。</span><span class="sxs-lookup"><span data-stu-id="6614d-160">By clicking this button, you can merge the two packages into a single package and therefore reduce the total downtime by half.</span></span>
- <span data-ttu-id="6614d-161">**サンド ボックスと製造環境に適用する前に、アプリケーション バイナリ更新プログラムのパッケージが開発/ビルド環境に適用されていることを確認してください** - アプリケーション バイナリ パッケージが階層 2+ サンドボックス環境に直接適用されているが、開発/ビルド環境に適用されてない場合、次に AOT パッケージを開発/ビルド ボックス (サンドボックス環境と同じアプリケーション バイナリを持たない) からサンド ボックスに移動すると、アプリケーション バイナリの一部は開発/ビルド環境で上書きされます。</span><span class="sxs-lookup"><span data-stu-id="6614d-161">**Make sure that the Application binary update package is applied to your dev/build environment before it is applied to your sandbox and production environment** - If the application binary package is applied directly to your Tier 2+ sandbox environment but is not applied on your dev/build environment, the next time you move an AOT package from dev/build box (which does not have the same application binaries as your sandbox environment) to sandbox, some of the application binaries will be overwritten with what is in your dev/build environment.</span></span> <span data-ttu-id="6614d-162">これにより、サンドボックス環境のバージョンが後退する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6614d-162">This could result in a regression of the version of your sandbox environment.</span></span> 

## <a name="apply-a-package-to-a-non-production-environment-by-using-lcs"></a><span data-ttu-id="6614d-163">LCS を使用して非運用環境にパッケージを適用します</span><span class="sxs-lookup"><span data-stu-id="6614d-163">Apply a package to a non-production environment by using LCS</span></span>

<span data-ttu-id="6614d-164">開始する前に、配置可能パッケージが LCS のアセット ライブラリにアップロードされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6614d-164">Before you begin, verify that the deployable package has been uploaded to the Asset library in LCS.</span></span>

1. <span data-ttu-id="6614d-165">バイナリ更新プログラムで、資産ライブラリに直接パッケージをアップロードします。</span><span class="sxs-lookup"><span data-stu-id="6614d-165">For a binary update, upload the package directly to the Asset library.</span></span> <span data-ttu-id="6614d-166">LCS から更新プログラムをダウンロードする方法の詳細については、[Lifecycle Services (LCS) から更新プログラムをダウンロード](../migration-upgrade/download-hotfix-lcs.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6614d-166">For information about how to download an update from LCS, see [Download updates from Lifecycle Services (LCS)](../migration-upgrade/download-hotfix-lcs.md).</span></span> <span data-ttu-id="6614d-167">X++ 修正プログラムまたはアプリケーション カスタマイズおよび拡張機能からの結果であるアプリケーション (AOT) 配置可能パッケージについては、開発またはビルド環境で配置可能パッケージを作成し、資産ライブラリにアップロードします。</span><span class="sxs-lookup"><span data-stu-id="6614d-167">For an application (AOT) deployable package that results from an X++ hotfix, or from application customizations and extensions, create the deployable package in your development or build environment, and then upload it to the Asset library.</span></span>
2. <span data-ttu-id="6614d-168">更新プログラムを適用する環境の **環境の詳細** ビューを開きます。</span><span class="sxs-lookup"><span data-stu-id="6614d-168">Open the **Environment details** view for the environment where you want to apply the update.</span></span>
3. <span data-ttu-id="6614d-169">**メンテナンス** &gt; **更新プログラムの適用**をクリックし、更新プログラムを適用します。</span><span class="sxs-lookup"><span data-stu-id="6614d-169">Click **Maintain** &gt; **Apply updates** to apply an update.</span></span>
4. <span data-ttu-id="6614d-170">パッケージを選択して適用します。</span><span class="sxs-lookup"><span data-stu-id="6614d-170">Select the package to apply.</span></span> <span data-ttu-id="6614d-171">上部にあるフィルターを使用してパッケージを探します。</span><span class="sxs-lookup"><span data-stu-id="6614d-171">Use the filter at the top to find your package.</span></span>
5. <span data-ttu-id="6614d-172">**適用** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="6614d-172">Click **Apply**.</span></span> <span data-ttu-id="6614d-173">**環境の詳細** ビューの右上隅のステータスが **キューに設定** から **処理中** に変わり、**環境の更新** セクションにパッケージの進行状況が表示されます。</span><span class="sxs-lookup"><span data-stu-id="6614d-173">Notice that the status in the upper-right corner of the **Environment details** view changes from **Queued** to **In Progress**, and an **Environment updates** section now shows the progress of the package.</span></span> <span data-ttu-id="6614d-174">ページを更新して、ステータスを確認できます。</span><span class="sxs-lookup"><span data-stu-id="6614d-174">You can refresh the page to check the status.</span></span> 
6. <span data-ttu-id="6614d-175">ページを更新して、パッケージ アプリケーション要求のステータス更新を確認します。</span><span class="sxs-lookup"><span data-stu-id="6614d-175">Continue to refresh the page to see the status updates for the package application request.</span></span> <span data-ttu-id="6614d-176">このパッケージが適用されると、環境ステータスは **配置済み** に変わり、サービスのステータスは **完了** に変わります。</span><span class="sxs-lookup"><span data-stu-id="6614d-176">When the package has been applied, the environment status changes to **Deployed**, and the servicing status changes to **Completed**.</span></span>     

## <a name="apply-a-package-to-a-production-environment-by-using-lcs"></a><span data-ttu-id="6614d-177">LCS を使用して運用環境にパッケージを適用します</span><span class="sxs-lookup"><span data-stu-id="6614d-177">Apply a package to a production environment by using LCS</span></span>

<span data-ttu-id="6614d-178">実稼働環境では、顧客は更新を適用する必要があるときのダウンタイムをスケジュールできます。</span><span class="sxs-lookup"><span data-stu-id="6614d-178">In a production environment, customers can schedule a downtime for when they want the update to be applied.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="6614d-179">パッケージを実稼働環境に適用するための重要な前提条件は、同じプロジェクトの少なくとも 1 つのサンドボックス環境にパッケージを正常に適用する必要があることです。</span><span class="sxs-lookup"><span data-stu-id="6614d-179">An important prerequisite for applying a package to a production environment is that the package must be successfully applied to at least one sandbox environment in the same project.</span></span> 

1. <span data-ttu-id="6614d-180">更新プログラムがサンドボックス環境へ正常に適用された後、プロジェクトのアセット ライブラリに移動します。</span><span class="sxs-lookup"><span data-stu-id="6614d-180">After the update is successfully applied in a sandbox environment, go to the project's asset library.</span></span> <span data-ttu-id="6614d-181">**アセット ライブラリ** ページで **ソフトウェア配置可能パッケージ** タブを選択し、プロダクションに移行するパッケージを選択して、**リリース候補** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="6614d-181">On the **Asset library** page, select the **Software deployable package** tab, select the package that you want to move to production, and click **Release candidate**.</span></span> <span data-ttu-id="6614d-182">これはこのパッケージが実稼働環境に対する準備ができていることを示します。</span><span class="sxs-lookup"><span data-stu-id="6614d-182">This indicates that this package is ready for production deployment.</span></span> 
2. <span data-ttu-id="6614d-183">パッケージを適用する実稼働環境の**環境の詳細**ビューを開きます。</span><span class="sxs-lookup"><span data-stu-id="6614d-183">Open the **Environment details** view for the production environment where you want to apply the package.</span></span>
3. <span data-ttu-id="6614d-184">**メンテナンス** &gt; **更新プログラムの適用** を選択してパッケージを適用します。</span><span class="sxs-lookup"><span data-stu-id="6614d-184">Select **Maintain** &gt; **Apply updates** to apply the package.</span></span>
4. <span data-ttu-id="6614d-185">実稼働環境に適用するパッケージを選択し、**スケジュール** をクリックして適用要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="6614d-185">Select the package to apply in your production environment, and then click **Schedule** to submit a request to apply it.</span></span>

    > [!NOTE]
    > <span data-ttu-id="6614d-186">パッケージのリストには、サンドボックス環境で正常に署名され、リリース候補としてマークされているパッケージのみが含まれています。</span><span class="sxs-lookup"><span data-stu-id="6614d-186">The list of packages includes only the packages that have been successfully signed off in the sandbox environment, and that have been marked as release candidates.</span></span>
    
5. <span data-ttu-id="6614d-187">パッケージ アプリケーションをスケジュールする日付と時刻を指定します。</span><span class="sxs-lookup"><span data-stu-id="6614d-187">Specify the date and time to schedule the package application.</span></span> <span data-ttu-id="6614d-188">**送信** をクリックし **OK** をクリックして確定します。</span><span class="sxs-lookup"><span data-stu-id="6614d-188">Click **Submit**, and then click **OK** to confirm.</span></span> <span data-ttu-id="6614d-189">パッケージを適用している間、お客様の環境は業務を遂行できないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="6614d-189">Note that your environments will be unavailable to perform business while the package is being applied.</span></span>
6. <span data-ttu-id="6614d-190">スケジュールされたダウンタイムで、パッケージの配置が開始します。</span><span class="sxs-lookup"><span data-stu-id="6614d-190">At the scheduled downtime, package deployment will start.</span></span>     
7. <span data-ttu-id="6614d-191">環境がサービスされた後、ステータスを監視することができます。</span><span class="sxs-lookup"><span data-stu-id="6614d-191">After the environment is serviced, you can monitor the status.</span></span> <span data-ttu-id="6614d-192">**ステータスのサービス** フィールドは、パッケージ アプリケーションのステータスを示します。</span><span class="sxs-lookup"><span data-stu-id="6614d-192">The **Servicing status** field indicates the status of package application.</span></span> <span data-ttu-id="6614d-193">また、進捗状況インジケーターは、利用可能な手順の総数のうち、実行された手順の数を表示します。</span><span class="sxs-lookup"><span data-stu-id="6614d-193">Additionally, a progress indicator shows the number of steps that have been run, out of the total number of steps that are available.</span></span>
8. <span data-ttu-id="6614d-194">配置が正常に完了すると、**サービスのステータス** フィールドが **完了** に設定されます。</span><span class="sxs-lookup"><span data-stu-id="6614d-194">After the deployment is successfully completed, the **Servicing status** field is set to **Completed**.</span></span>
9. <span data-ttu-id="6614d-195">パッケージ アプリケーションが正常に終了されていない場合、Microsoft は問題を調査します。</span><span class="sxs-lookup"><span data-stu-id="6614d-195">If package application isn't successfully completed, Microsoft will investigate the issue.</span></span> <span data-ttu-id="6614d-196">**ステータスのサービス** フィールドは、パッケージ アプリケーションが失敗したことを示します。</span><span class="sxs-lookup"><span data-stu-id="6614d-196">The **Servicing status** field will indicate that package application has failed.</span></span> <span data-ttu-id="6614d-197">環境は正常な状態にロールバックされます。</span><span class="sxs-lookup"><span data-stu-id="6614d-197">The environment will be rolled back to a good state.</span></span> 

## <a name="troubleshoot-package-deployment-failures"></a><span data-ttu-id="6614d-198">パッケージ配置失敗のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="6614d-198">Troubleshoot package deployment failures</span></span>

<span data-ttu-id="6614d-199">パッケージの配置に失敗した場合は [パッケージ アプリケーションに関する問題のトラブルシューティング](deployable-package-troubleshooting.md) のトピックを参照してください。</span><span class="sxs-lookup"><span data-stu-id="6614d-199">If package deployment fails, see the [Troubleshoot package application issues](deployable-package-troubleshooting.md) topic.</span></span>

## <a name="applying-updates-and-extensions"></a><span data-ttu-id="6614d-200">更新と拡張機能の適用</span><span class="sxs-lookup"><span data-stu-id="6614d-200">Applying updates and extensions</span></span>

<span data-ttu-id="6614d-201">アプリケーション バージョン 8.1.2.x 以降でレベル 2 サンドボックスまたは運用環境を更新し、Cloud Scale Unit を初期化した場合は、コマース チャネル コンポーネントも更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6614d-201">If you are updating a Tier-2 Sandbox or Production environment on application version 8.1.2.x or newer and have initialized Cloud Scale Unit, you will also need to update Commerce channel components.</span></span> <span data-ttu-id="6614d-202">詳細については、[Retail Cloud Scale Unit の更新](Update-retail-channel.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6614d-202">For more information, see [Update Retail Cloud Scale Unit](Update-retail-channel.md).</span></span>

<span data-ttu-id="6614d-203">コンポーネント (Modern POS など) を使用している場合、環境内で更新プログラムと拡張機能を適用した後に、店舗内コンポーネントも更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6614d-203">If you're using components (such as Modern POS), after you've applied updates and extensions in your environment, you must also update your in-store components.</span></span> <span data-ttu-id="6614d-204">詳細については、[Retail Modern POS (MPOS) の構成、インストール、有効化](../../../retail/retail-modern-pos-device-activation.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6614d-204">For more information, see [Configure, install, and activate Retail Modern POS (MPOS)](../../../retail/retail-modern-pos-device-activation.md).</span></span>

## <a name="packages-runbooks-and-the-axupdateinstaller-in-depth"></a><span data-ttu-id="6614d-205">パッケージ、Runbook、および AXUpdateInstaller の詳細</span><span class="sxs-lookup"><span data-stu-id="6614d-205">Packages, runbooks, and the AXUpdateInstaller in depth</span></span>

<span data-ttu-id="6614d-206">配置可能パッケージ、runbooks、および AXUpdateInstaller は、更新プログラムの適用に使用するツールです。</span><span class="sxs-lookup"><span data-stu-id="6614d-206">Deployable packages, runbooks, and the AXUpdateInstaller are the tools you use to apply updates.</span></span> 

<span data-ttu-id="6614d-207">**配置可能パッケージ** - 配置可能パッケージとは、環境に適用できる配置の単位です。</span><span class="sxs-lookup"><span data-stu-id="6614d-207">**Deployable package** – A deployable package is a unit of deployment that can be applied in an environment.</span></span> <span data-ttu-id="6614d-208">デプロイ可能なパッケージは、プラットフォームまたは他のランタイム コンポーネント、更新されたアプリケーション (AOT) パッケージ、または新しいアプリケーション (AOT) パッケージのバイナリ更新です。</span><span class="sxs-lookup"><span data-stu-id="6614d-208">A deployable package can be a binary update to the platform or other runtime components, an updated application (AOT) package, or a new application (AOT) package.</span></span> <span data-ttu-id="6614d-209">LCS からダウンロードした、または開発環境で作成した配置可能なパッケージは、製品タイプ間では適用できません。</span><span class="sxs-lookup"><span data-stu-id="6614d-209">Deployable packages downloaded from LCS or created in a development environment cannot be applied across product types.</span></span> <span data-ttu-id="6614d-210">たとえば、Finance の展開可能なパッケージはコマース アプリ環境に適用することができず、その逆も同様です。</span><span class="sxs-lookup"><span data-stu-id="6614d-210">For example, a Finance deployable package cannot be applied in a Commerce app environment, and vice versa.</span></span> <span data-ttu-id="6614d-211">コマース アプリと互換性のある Finance and Operations アプリの既存のカスタマイズを持ち、それをコマース 環境に適用する場合、コマース 開発環境でソース コードを再パッケージする必要があり、逆の方向に移動させている場合は逆コンパイルする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6614d-211">If you have an existing customization for a Finance and Operations app that is compatible with the Commerce app, and you would like to apply it to a Commerce environment, you will need to re-package your source code in a Commerce development environment, and conversely if moving in the other direction.</span></span>   

<span data-ttu-id="6614d-212">[![配置可能なパッケージの例](./media/applypackage_deployablepackage.jpg)](./media/applypackage_deployablepackage.jpg)</span><span class="sxs-lookup"><span data-stu-id="6614d-212">[![Example of a deployable package](./media/applypackage_deployablepackage.jpg)](./media/applypackage_deployablepackage.jpg)</span></span>

<span data-ttu-id="6614d-213">**Runbook** – 展開 runbook は展開可能なパッケージを対象となる環境に適用させるために生成される一連の手順です。</span><span class="sxs-lookup"><span data-stu-id="6614d-213">**Runbook** – The deployment runbook is a series of steps that are generated in order to apply the deployable package to the target environment.</span></span> <span data-ttu-id="6614d-214">一部のステップは自動化され、一部のステップは手動です。</span><span class="sxs-lookup"><span data-stu-id="6614d-214">Some steps are automated, and some steps are manual.</span></span> <span data-ttu-id="6614d-215">AXUpdateInstaller は、これらの手順を一度に 1 つずつ正しい順序で実行できます。</span><span class="sxs-lookup"><span data-stu-id="6614d-215">AXUpdateInstaller lets you run these steps one at a time and in the correct order.</span></span>

<span data-ttu-id="6614d-216">[![展開 runbook の例](./media/applypackage_runbook-1024x528.jpg)](./media/applypackage_runbook.jpg)</span><span class="sxs-lookup"><span data-stu-id="6614d-216">[![Example of a deployment runbook](./media/applypackage_runbook-1024x528.jpg)](./media/applypackage_runbook.jpg)</span></span>

<span data-ttu-id="6614d-217">**AXUpdateInstaller** - Microsoft Visual Studio または Microsoft バイナリ更新プログラムからカスタマイズ パッケージを作成すると、インストーラの実行可能ファイルが配置可能パッケージと共にバンドルされます。</span><span class="sxs-lookup"><span data-stu-id="6614d-217">**AXUpdateInstaller** – When you create a customization package from Microsoft Visual Studio or a Microsoft binary update, the installer executable is bundled together with the deployable package.</span></span> <span data-ttu-id="6614d-218">インストーラーは、指定したトポロジの Runbook を生成します。</span><span class="sxs-lookup"><span data-stu-id="6614d-218">The installer generates the runbook for the specified topology.</span></span> <span data-ttu-id="6614d-219">インストーラーは、特定のトポロジの Runbook に従って、手順を順番に実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="6614d-219">The installer can also run steps in order, according to the runbook for a specific topology.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="6614d-220">その他のリソース</span><span class="sxs-lookup"><span data-stu-id="6614d-220">Additional resources</span></span>

[<span data-ttu-id="6614d-221">配置可能なパッケージのコマンドラインからのインストール</span><span class="sxs-lookup"><span data-stu-id="6614d-221">Install deployable packages from the command line</span></span>](install-deployable-package.md)
