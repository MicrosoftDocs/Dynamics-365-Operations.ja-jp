---
title: ビジネス イベントのトラブルシューティング
description: このトピックでは、ビジネス イベントのトラブルシューティングについて説明します。
author: Sunil-Garg
ms.date: 04/17/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: IT Pro
ms.reviewer: sericks
ms.search.region: Global for most topics. Set Country/Region name for localizations
ms.author: sunilg
ms.search.validFrom: Platform update 24
ms.dyn365.ops.version: 2019-02-28
ms.openlocfilehash: 5efa79aaef5da6449b4e84b89b71744c9efa6962
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/31/2021
ms.locfileid: "5745347"
---
# <a name="troubleshoot-business-events"></a><span data-ttu-id="409db-103">ビジネス イベントのトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="409db-103">Troubleshoot business events</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="409db-104">このトピックでは、ビジネス イベントに関する問題を解決するためのヒントを提供します。</span><span class="sxs-lookup"><span data-stu-id="409db-104">This topic provides tips for troubleshooting issues that involve business events.</span></span>

| <span data-ttu-id="409db-105">問題点</span><span class="sxs-lookup"><span data-stu-id="409db-105">Issue</span></span> | <span data-ttu-id="409db-106">考えられる解決策</span><span class="sxs-lookup"><span data-stu-id="409db-106">Possible resolution</span></span> | 
|---------------|---------------------|
| <span data-ttu-id="409db-107">**システム パラメーター** フォームでビジネス イベントへのナビゲーションが見つかりません</span><span class="sxs-lookup"><span data-stu-id="409db-107">Unable to find navigation to business events in the **System parameters** form</span></span> | <span data-ttu-id="409db-108">ビジネス イベントには、**システム管理 > 設定 > ビジネス イベント** の順に移動することでアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="409db-108">You can access business events by going to **System administration > Set up > Business events**.</span></span> <span data-ttu-id="409db-109">この変更は、ビジネス イベントがプラットフォーム更新プログラム 26 で一般に利用可能になった時点で加えられました。</span><span class="sxs-lookup"><span data-stu-id="409db-109">This change was made when business events was made generally available in Platform update 26.</span></span>|
| <span data-ttu-id="409db-110">**エラー:** エンドポイントを構築できません。</span><span class="sxs-lookup"><span data-stu-id="409db-110">**Error:** Unable to construct endpoint.</span></span> <span data-ttu-id="409db-111">例外メッセージ: キー コンテナー 'https://[KeyVaultName].vault.azure.net/' からのシークレット '[KeyValueSecretName]' を取得中にエラーが発生しました。AADSTS700016: 識別子を持つアプリケーションは '7e28cb03-dc28-43b5-b129-e13dcfb4b1fb' は、ディレクトリ 'ee3fe5c6-26af-42b1-9acf-5ee38e6ead6e' で見つかりませんでした。</span><span class="sxs-lookup"><span data-stu-id="409db-111">Exception message: Error retrieving secret '[KeyValueSecretName]' from key vault 'https://[KeyVaultName].vault.azure.net/': AADSTS700016: Application with identifier '7e28cb03-dc28-43b5-b129-e13dcfb4b1fb' was not found in the directory 'ee3fe5c6-26af-42b1-9acf-5ee38e6ead6e'.</span></span> | <span data-ttu-id="409db-112">これは、アプリケーションがテナントの管理者によってインストールされていないか、テナントのユーザーによって同意されていない場合に発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="409db-112">This can happen if the application has not been installed by the administrator of the tenant or consented to by any user in the tenant.</span></span> <span data-ttu-id="409db-113">認証要求を間違ったテナントに送信した可能性があります。</span><span class="sxs-lookup"><span data-stu-id="409db-113">It's likely that you may have sent your authentication request to the wrong tenant.</span></span>|
|<span data-ttu-id="409db-114">**エラー:** 追跡 ID:  19dc9946-45b6-4335-9676-6a133dbf4000 相関関係 ID: ecbc8a80-f9d0-41ec-9c8f-d334d050bd64 タイムスタンプ: 2019-02-06 23:27:06Z</span><span class="sxs-lookup"><span data-stu-id="409db-114">**Error:** Trace ID: 19dc9946-45b6-4335-9676-6a133dbf4000 Correlation ID: ecbc8a80-f9d0-41ec-9c8f-d334d050bd64 Timestamp: 2019-02-06 23:27:06Z</span></span>| <span data-ttu-id="409db-115">このエラーは、**Azure Active Directory アプリケーション ID** フィールドの値が正しくないことを意味します。</span><span class="sxs-lookup"><span data-stu-id="409db-115">This error typically means that the value in the **Azure Active Directory Application ID** field is incorrect.</span></span> <span data-ttu-id="409db-116">顧客の Azure ポータルの **Azure Active Directory アプリケーション ID** の値を **Azure Active Directory > アプリケーションの登録** で確認します。</span><span class="sxs-lookup"><span data-stu-id="409db-116">Check the **Azure Active Directory Application ID** value in the customers Azure portal in **Azure Active Directory > App Registration**.</span></span>|
|<span data-ttu-id="409db-117">**エラー:** エンドポイントを構築できません。</span><span class="sxs-lookup"><span data-stu-id="409db-117">**Error:** Unable to construct endpoint.</span></span> <span data-ttu-id="409db-118">例外メッセージ: キー コンテナー 'https://[KeyVaultName].vault.azure.net/' からシークレット '[KeyValueSecretName]' を取得中にエラーが発生しました。要求の送信中にエラーが発生しました。</span><span class="sxs-lookup"><span data-stu-id="409db-118">Exception message: Error retrieving secret '[KeyValueSecretName]' from key vault 'https://[KeyVaultName].vault.azure.net/': An error occurred while sending the request.</span></span>|<span data-ttu-id="409db-119">このエラーは、**Key Vault DNS Name** フィールドの値が正しくないことが原因です。</span><span class="sxs-lookup"><span data-stu-id="409db-119">This error is likely due to an incorrect value in the **Key Vault DNS Name** field.</span></span> <span data-ttu-id="409db-120">これを解決するには、顧客の Azure ポータルに移動して、キー コンテナーのオブジェクトを開きます。</span><span class="sxs-lookup"><span data-stu-id="409db-120">To resolve this, go to the customer's Azure portal and open the key vault object.</span></span> <span data-ttu-id="409db-121">**概要** セクションで、**Key Vault DNS 名** 値を確認します。</span><span class="sxs-lookup"><span data-stu-id="409db-121">In the **Overview** section, check the **Key Vault DNS Name** value.</span></span>|
|<span data-ttu-id="409db-122">**エラー:** テストイベントをエンドポイントに送信できません。</span><span class="sxs-lookup"><span data-stu-id="409db-122">**Error:** Unable to send test event to endpoint.</span></span> <span data-ttu-id="409db-123">例外メッセージ: 40103: 認証トークンの署名が無効です。リソース:sb://[ServiceBusName].servicebus.windows.net/[QueueName]。</span><span class="sxs-lookup"><span data-stu-id="409db-123">Exception message: 40103: Invalid authorization token signature, Resource:sb://[ServiceBusName].servicebus.windows.net/[QueueName].</span></span> <span data-ttu-id="409db-124">TrackingId:cd0eccaa-1717-4f97-b837-4cd7eda99af4_G13、Systemtracker:[ServiceBusName]servicebus.windows.net:[QueueName]、Timestamp:2019-02-06T23:36:54</span><span class="sxs-lookup"><span data-stu-id="409db-124">TrackingId:cd0eccaa-1717-4f97-b837-4cd7eda99af4_G13, SystemTracker:[ServiceBusName].servicebus.windows.net:[QueueName], Timestamp:2019-02-06T23:36:54</span></span>|<span data-ttu-id="409db-125">顧客の Key Vault シークレットの値が予想が正しくない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="409db-125">The value in the customer’s Key Vault Secret is likely incorrect.</span></span> <span data-ttu-id="409db-126">**Key Vault シークレット** の値を確認し、エンドポイントのタイプが正しいことを確認します。</span><span class="sxs-lookup"><span data-stu-id="409db-126">Check the **Key Vault Secret** value and make sure that it is correct for the endpoint type.</span></span>|
|<span data-ttu-id="409db-127">**エラー:** エンドポイントを構築できません。</span><span class="sxs-lookup"><span data-stu-id="409db-127">**Error:** Unable to construct endpoint.</span></span> <span data-ttu-id="409db-128">例外メッセージ: key vault 'https://[KeyVaultName].vault.azure.net/' からシークレット '[KeyValueSecretName]' を取得中にエラーが発生しました。アクセスが拒否されました。</span><span class="sxs-lookup"><span data-stu-id="409db-128">Exception message: Error retrieving secret '[KeyValueSecretName]' from key vault 'https://[KeyVaultName].vault.azure.net/': Access denied</span></span>|<span data-ttu-id="409db-129">**Azure Active Directory アプリケーション ID** に Key Vault での適切なアクセス許可がない可能性あります。</span><span class="sxs-lookup"><span data-stu-id="409db-129">This is likely due to the **Azure Active Directory Application ID** not having the appropriate permissions in the Key Vault.</span></span> <span data-ttu-id="409db-130">これを解決するには、Azure ポータルに移動して、**Key Vault** のオブジェクトを開きます。</span><span class="sxs-lookup"><span data-stu-id="409db-130">To resolve this, go to the Azure portal and open the **Key Vault** object.</span></span> <span data-ttu-id="409db-131">**アクセス ポリシー** に移動し、キー、シークレット、および証明書の管理テンプレートを使用して、AAD アプリケーションを追加します。</span><span class="sxs-lookup"><span data-stu-id="409db-131">Go to **Access Policies** and add the AAD application with Key, Secret, and Certificate Management template.</span></span>|
|<span data-ttu-id="409db-132">**エラー:** テストイベントをエンドポイントに送信できません。</span><span class="sxs-lookup"><span data-stu-id="409db-132">**Error:** Unable to send test event to endpoint.</span></span> <span data-ttu-id="409db-133">例外メッセージ: 40400: エンドポイントが見つかりません。リソース: sb://[ServiceBusName].servicebus.windows.net/[QueueName]。</span><span class="sxs-lookup"><span data-stu-id="409db-133">Exception message: 40400: Endpoint not found., Resource:sb://[ServiceBusName].servicebus.windows.net/[QueueName].</span></span> |<span data-ttu-id="409db-134">この問題は、キュー/トピック/ハブ名が正しくないことが原因です。</span><span class="sxs-lookup"><span data-stu-id="409db-134">This issue is likely a result of the queue/topic/hub name being incorrect.</span></span> <span data-ttu-id="409db-135">Azure ポータルのサービス バスにアクセスし、**名** フィールドを確認し、**トピック** または **キュー** 名を確認します。</span><span class="sxs-lookup"><span data-stu-id="409db-135">Check the **Name** field by going to service bus in the Azure portal and reviewing the **Topic** or **Queue** name.</span></span> <span data-ttu-id="409db-136">イベント ハブである場合、Azure の **イベント ハブ** オブジェクトに移動し、**ハブ** 名を検証します。</span><span class="sxs-lookup"><span data-stu-id="409db-136">If it is an Event Hub, go to the **Event Hub** object in Azure and validate the **Hub** name.</span></span>|
|<span data-ttu-id="409db-137">**エラー:** テストイベントをエンドポイントに送信できません。</span><span class="sxs-lookup"><span data-stu-id="409db-137">**Error:** Unable to send test event to endpoint.</span></span> <span data-ttu-id="409db-138">例外メッセージ: 要求の送信中にエラーが発生しました。</span><span class="sxs-lookup"><span data-stu-id="409db-138">Exception message: An error occurred while sending the request.</span></span>|<span data-ttu-id="409db-139">**エンドポイント URL** フィールドのエンドポイントの指定された値が正しくない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="409db-139">This is likely due to an incorrect endpoint value specified in the **Endpoint URL** field.</span></span> <span data-ttu-id="409db-140">Azure ポータルの **イベント グリッド** オブジェクトに移動し、**イベント グリッド** を開きます。</span><span class="sxs-lookup"><span data-stu-id="409db-140">Go to the **Event Grid** object in the Azure portal and open the **Event Grid**.</span></span> <span data-ttu-id="409db-141">**概要** セクションで、この値が **トピック エンドポイント** になります。</span><span class="sxs-lookup"><span data-stu-id="409db-141">In the **Overview** section, this value will be the **Topic Endpoint**.</span></span>|
|<span data-ttu-id="409db-142">ビジネス イベントはカタログに表示されません</span><span class="sxs-lookup"><span data-stu-id="409db-142">Business events do not show up in the catalog</span></span>|<span data-ttu-id="409db-143">ビジネス イベント カタログは、データベース全体の同期中に作成されます。その結果、以下に示すように、新しいビジネス イベントを確認するためにカタログを手動で更新する必要がある使用例がいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="409db-143">The Business event catalog is built during full database sync. As a result, there are some use cases, as noted below, where a manual refresh of the catalog is needed in order to see the new business events.</span></span> <span data-ttu-id="409db-144">手動更新は **管理 > ビジネス イベント カタログの再構築** に移動することによってカタログから呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="409db-144">Manual refresh can be invoked from the catalog by going to **Manage > Rebuild business events catalog**.</span></span><br><br><span data-ttu-id="409db-145">Visual Studio でビジネス イベントを実装中のときは、新しくコード化されたビジネス イベントがカタログに表示されない場合があります。</span><span class="sxs-lookup"><span data-stu-id="409db-145">When you are implementing business events in Visual Studio you may not see the newly coded business event in the catalog.</span></span><br><br><span data-ttu-id="409db-146">ワークフロー要素やステップなどの新しいワークフローが構成されていると、ビジネス イベント カタログに表示されない場合があります。</span><span class="sxs-lookup"><span data-stu-id="409db-146">When new workflows are configured, such as the workflow elements or steps, might not show up in the business events catalog.</span></span><br><br><span data-ttu-id="409db-147">他の状況では、特定のビジネス イベントが表示されない場合、手動更新を行うと問題が解決する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="409db-147">In other situations, when you don’t see certain business events, doing a manual refresh should resolve the issue.</span></span>|
|<span data-ttu-id="409db-148">- 0 はバンドルのサイズが無効です。</span><span class="sxs-lookup"><span data-stu-id="409db-148">- 0 is an invalid bundle size</span></span><br><span data-ttu-id="409db-149">- ビジネスイベントはトリガーされません。</span><span class="sxs-lookup"><span data-stu-id="409db-149">- Business events are not getting triggered</span></span><br><span data-ttu-id="409db-150">- Microsoft Flow は、ビジネスイベントによってトリガーされていません。</span><span class="sxs-lookup"><span data-stu-id="409db-150">- Microsoft Flow is not getting triggered by business events</span></span><br><span data-ttu-id="409db-151">- 構成されたエンドポイントが上限の 0 に達したため、ビジネス イベントをコンフィギュレーションできません。</span><span class="sxs-lookup"><span data-stu-id="409db-151">- Unable to configure business event because it has reached the limit of 0 configured endpoints</span></span> |<span data-ttu-id="409db-152">この問題が発生する理由のひとつは、**BusinessEventsParameters** テーブルで特定のパラメータが予想どおりに設定されていない場合です。</span><span class="sxs-lookup"><span data-stu-id="409db-152">One of the reasons why this issue can occur is if certain parameters are not set as expected in the **BusinessEventsParameters** table.</span></span> <span data-ttu-id="409db-153">これは、一部のビジネス イベント パラメータが正しく設定されていない更新プログラムによるものです。</span><span class="sxs-lookup"><span data-stu-id="409db-153">This is due to an update in which some of the business events parameters not being set correctly.</span></span><br><br><span data-ttu-id="409db-154">非実稼働環境では、**システム管理 > 設定** のパラメータを更新して、再試行回数 = 3; イベントごとに許可されるエンドポイント = 10、待機時間 = 1000 に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="409db-154">In a non-production environment, you must update the parameters in **System administration > Setup** to set retry count = 3; End points allowed per event = 10 and wait time = 1000.</span></span> <span data-ttu-id="409db-155">この更新を行った後、バッチサービスを再起動し、IISResetを実行して最新の値を取得してください。</span><span class="sxs-lookup"><span data-stu-id="409db-155">After this update, restart the batch service and run IISReset to pick up the latest values.</span></span><br><br> <span data-ttu-id="409db-156">ビジネス イベントが依然としてトリガーされない場合は、ビジネス イベントを処理するための専用キャパシティが機能していません。</span><span class="sxs-lookup"><span data-stu-id="409db-156">If business events still do not trigger, then the dedicated capacity is not working to process business events.</span></span> <span data-ttu-id="409db-157">手動バッチ ジョブは、ビジネス イベントを処理するようにスケジュールされる必要があります。これは、**システム管理 > 設定** の **ビジネス イベント パラメーター** ページから有効にできます。</span><span class="sxs-lookup"><span data-stu-id="409db-157">A manual batch job must be scheduled to process business events, which can be enabled from the **Business events parameters** page in **System administration > Set up**.</span></span>
|<span data-ttu-id="409db-158">アダプター クラスの addProperties メソッド コマンド チェーン (CoC) の介した強化による顧客のペイロード コンテキスト フィールド作成時の、プラットフォーム更新プログラム 30 コンパイラの警告</span><span class="sxs-lookup"><span data-stu-id="409db-158">Platform update 30 compiler warning when creating custom payload context fields by augmenting via Chain of Command (CoC) the addProperties method in the adapter class.</span></span> <span data-ttu-id="409db-159">**クラス 'BusinessEventsServiceBusAdapter' はモデル 'ApplicationFoundation' の内部にあり、拡張することはできません**。</span><span class="sxs-lookup"><span data-stu-id="409db-159">**Class 'BusinessEventsServiceBusAdapter' is internal in model 'ApplicationFoundation' and cannot be extended**.</span></span>  |<span data-ttu-id="409db-160">これは、内部 API が拡張されないようにするコンパイラの変更です。</span><span class="sxs-lookup"><span data-stu-id="409db-160">This is a change in the compiler that prevents an internal API from being extended.</span></span> <span data-ttu-id="409db-161">これはバグとして追跡中で、カスタム プロパティを追加するための代替方法が提供されます。</span><span class="sxs-lookup"><span data-stu-id="409db-161">This is being tracked as a bug to provide alternate ways to add custom properties.</span></span> <span data-ttu-id="409db-162">詳細については、この [Yammer ディスカッション](https://www.yammer.com/dynamicsaxfeedbackprograms/threads/376155850727424) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="409db-162">For more information, see this [Yammer discussion](https://www.yammer.com/dynamicsaxfeedbackprograms/threads/376155850727424).</span></span>
|<span data-ttu-id="409db-163">**エラー:** 要求された 1 つ以上のタイプを読み込めません。</span><span class="sxs-lookup"><span data-stu-id="409db-163">**Error:** Unable to load one or more of the requested types.</span></span> <span data-ttu-id="409db-164">詳細については、LoaderExceptions プロパティを取得してください。</span><span class="sxs-lookup"><span data-stu-id="409db-164">Retrieve the LoaderExceptions property for more information</span></span>|<span data-ttu-id="409db-165">通常、有効なビジネス イベントのエラー タブに表示されるこのエラー メッセージは、カタログを再構築することによって解決できます。</span><span class="sxs-lookup"><span data-stu-id="409db-165">This error message on the error tab of active business events can typically be resolved by rebuilding the catalog.</span></span>
|<span data-ttu-id="409db-166">ビジネス イベントの警告がトリガーされない</span><span class="sxs-lookup"><span data-stu-id="409db-166">Alert business events don't trigger</span></span>|<span data-ttu-id="409db-167">イベントがトリガーされない理由の 1 つは、電子メール警告機能の潜在的な問題である可能性があります。</span><span class="sxs-lookup"><span data-stu-id="409db-167">One of the reasons why an event is not triggering could be a potential issue with alerts email functionality.</span></span> <span data-ttu-id="409db-168">警告の電子メール送信オプションをオフにして、問題が解決するかどうかを確認してください。</span><span class="sxs-lookup"><span data-stu-id="409db-168">Try turning off the send email option in the alert to see if that resolves the issue.</span></span>
|<span data-ttu-id="409db-169">テスト イベントをエンドポイントに送信できません。</span><span class="sxs-lookup"><span data-stu-id="409db-169">Unable to send test event to endpoint.</span></span> <span data-ttu-id="409db-170">例外メッセージ: 基礎的な接続が閉じられました: SSL/TLS セキュリティ チャネルの信頼関係を確立できませんでした。</span><span class="sxs-lookup"><span data-stu-id="409db-170">Exception message: The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.</span></span>|<span data-ttu-id="409db-171">ミドルウェアが TLS 1.2 を使用していることを確認してください</span><span class="sxs-lookup"><span data-stu-id="409db-171">Make sure the middleware is using TLS 1.2</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]