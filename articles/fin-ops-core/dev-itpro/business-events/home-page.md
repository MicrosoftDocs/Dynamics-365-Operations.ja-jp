---
title: ビジネス イベントの概要
description: このトピックは、外部システムが Dynamics 365 Finance and Operations アプリケーションから通知を受信するためのメカニズムを提供するビジネス イベントに関する情報を提供します。
author: Sunil-Garg
manager: AnnBe
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: IT Pro
ms.reviewer: sericks
ms.search.scope: Operations, Core
ms.search.region: Global for most topics. Set Country/Region name for localizations
ms.author: sunilg
ms.search.validFrom: Platform update 24
ms.dyn365.ops.version: 2019-02-28
ms.openlocfilehash: 403143a0da1129db05725f45a01985cbf878cba7
ms.sourcegitcommit: 0d7b700950b1f95dc030ceab5bbdfd4fe1f79ace
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2020
ms.locfileid: "3284393"
---
# <a name="business-events-overview"></a><span data-ttu-id="152aa-103">ビジネス イベントの概要</span><span class="sxs-lookup"><span data-stu-id="152aa-103">Business events overview</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="152aa-104">ビジネス イベントは外部システムが Finance and Operations アプリケーションから通知を受信するメカニズムを提供します。</span><span class="sxs-lookup"><span data-stu-id="152aa-104">Business events provide a mechanism that lets external systems receive notifications from Finance and Operations applications.</span></span> <span data-ttu-id="152aa-105">これにより、システムは、ビジネス イベントに対してビジネス アクションを実行できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-105">In this way, the systems can perform business actions in response to the business events.</span></span>

<span data-ttu-id="152aa-106">ビジネス プロセスの実行時に、ビジネス イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="152aa-106">Business events occur when a business process is run.</span></span> <span data-ttu-id="152aa-107">ビジネス プロセス中には、それに参加するユーザーは、ビジネス プロセスを構成するタスクを完了するビジネス アクションを実行します。</span><span class="sxs-lookup"><span data-stu-id="152aa-107">During a business process, users who participate in it perform business actions to complete the tasks that make up the business process.</span></span> 

<span data-ttu-id="152aa-108">ユーザーが実行するビジネス アクションは、ワークフロー アクションまたは非ワークフロー アクションのいずれかにすることを選択できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-108">A business action that a user performs can be either a workflow action or a non-workflow action.</span></span> <span data-ttu-id="152aa-109">購買要求の承認はワークフロー アクションの例で、発注書の確認は非ワークフロー アクションの例です。</span><span class="sxs-lookup"><span data-stu-id="152aa-109">Approval of a purchase requisition is an example of a workflow action, whereas confirmation of a purchase order is an example of a non-workflow action.</span></span> <span data-ttu-id="152aa-110">どちらのタイプのアクションも、統合および通知のシナリオで、外部システムが使用できるビジネス イベントを生成できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-110">Both types of actions can generate business events that external systems can use in integration and notification scenarios.</span></span> 

## <a name="prerequisites"></a><span data-ttu-id="152aa-111">必要条件</span><span class="sxs-lookup"><span data-stu-id="152aa-111">Prerequisites</span></span>

<span data-ttu-id="152aa-112">ビジネス イベントは Microsoft Power Automate および Azure メッセージング サービスにて利用できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-112">Business events can be consumed using Microsoft Power Automate and Azure messaging services.</span></span> <span data-ttu-id="152aa-113">したがって、ビジネス イベントを使用する際には、顧客が該当するアセットのサブスクリプションを契約している必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-113">Therefore, customers must bring their subscriptions to such assets to use business events</span></span>

> [!IMPORTANT]
> <span data-ttu-id="152aa-114">ビジネス イベントを、エクスポート用データのメカニズムと考えることはできません。</span><span class="sxs-lookup"><span data-stu-id="152aa-114">Business events must not be considered a mechanism for exporting data.</span></span> <span data-ttu-id="152aa-115">定義上は、ビジネス イベントは簡易で軽快であることになっています。</span><span class="sxs-lookup"><span data-stu-id="152aa-115">By definition, business events are supposed to be lightweight and nimble.</span></span> <span data-ttu-id="152aa-116">データ エクスポートのシナリオを実行するために大量のペイロードを搭載することは想定していません。</span><span class="sxs-lookup"><span data-stu-id="152aa-116">They aren't intended to carry large payloads to fulfill data export scenarios.</span></span>

## <a name="business-events-that-are-implemented"></a><span data-ttu-id="152aa-117">実装されるビジネス イベント</span><span class="sxs-lookup"><span data-stu-id="152aa-117">Business events that are implemented</span></span>

<span data-ttu-id="152aa-118">ビジネス イベントは、最初から用意されているいくつかのビジネス プロセスに実装されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-118">Business events are implemented in some business processes out of the box.</span></span> <span data-ttu-id="152aa-119">これらのビジネス イベントには、ワークフローおよび非ワークフロー ビジネス イベントの両方が含まれます。</span><span class="sxs-lookup"><span data-stu-id="152aa-119">These business events include both workflow and non-workflow business events.</span></span> <span data-ttu-id="152aa-120">詳細については [アプリケーション ビジネス イベント](app-business-events.md)、[ワークフロー ビジネス イベント](business-events-workflow.md)、[ビジネス イベントとしての警告](alerts-business-events.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="152aa-120">For more information, see [Application business events](app-business-events.md), [Workflow business events](business-events-workflow.md), and [Alerts as business events](alerts-business-events.md).</span></span>

<span data-ttu-id="152aa-121">開発者は、拡張機能を使用して、新しいビジネス イベントを実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-121">A developer must use extensions to implement new business events.</span></span> <span data-ttu-id="152aa-122">詳細については、「[ビジネス イベント開発者ドキュメント](business-events-dev-doc.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="152aa-122">For more information, see [Business events developer documentation](business-events-dev-doc.md).</span></span>

## <a name="business-event-catalog"></a><span data-ttu-id="152aa-123">ビジネス イベント カタログ</span><span class="sxs-lookup"><span data-stu-id="152aa-123">Business event catalog</span></span>

<span data-ttu-id="152aa-124">ビジネスイベントカタログには、**システム管理 > > ビジネスイベント**を設定するためにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="152aa-124">The business events catalog can be accessed from **System administration > Set up > Business events**.</span></span> <span data-ttu-id="152aa-125">ビジネス イベント カタログには、使用しているインスタンスで利用可能なビジネス イベントが一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-125">The business event catalog lists the business events that are available in the instance that you're using.</span></span> <span data-ttu-id="152aa-126">カタログは、どのビジネス イベントが使用可能かを示し、カテゴリ、ビジネス イベントのIDおよび名前でフィルタ処理することができるため、便利です。</span><span class="sxs-lookup"><span data-stu-id="152aa-126">The catalog is useful because it shows which business events are available, and you can filter it by category, business event ID, and name.</span></span>

<span data-ttu-id="152aa-127">ビジネス イベントのカテゴリでは、そのソースを識別します。</span><span class="sxs-lookup"><span data-stu-id="152aa-127">The category of a business event identifies its source.</span></span> <span data-ttu-id="152aa-128">ワークフロー システムから生成されたビジネス イベントは、**ワークフロー** カテゴリに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="152aa-128">Business events that originate from the workflow system are assigned to the **Workflow** category.</span></span> <span data-ttu-id="152aa-129">他のモジュールから生成されたビジネス イベントについては、モジュール名はカテゴリ名として使用されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-129">For business events that originate from other modules, the module name is used as the category name.</span></span> 

<span data-ttu-id="152aa-130">ビジネス イベント カタログは、配置時のデータベースの同期中に作成されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-130">The business event catalog is built during database synchronization at the time of deployment.</span></span> <span data-ttu-id="152aa-131">したがって、ユーザーは、カタログでビジネス イベントの完全な一覧を確認することになります。</span><span class="sxs-lookup"><span data-stu-id="152aa-131">Therefore, users should see the complete list of business events in the catalog.</span></span> <span data-ttu-id="152aa-132">ただし、カタログの明示的な更新が必要な場合は、**管理 \> 再構築ビジネス イベント カタログ**を選択します。</span><span class="sxs-lookup"><span data-stu-id="152aa-132">However, if an explicit update of the catalog is required, you can select **Manage \> Rebuild business events catalog**.</span></span>

![ビジネス イベント カタログ](../media/businesseventscatalog.png)

<span data-ttu-id="152aa-134">各ビジネス イベントについて、ビジネス イベント カタログは説明を表示します。</span><span class="sxs-lookup"><span data-stu-id="152aa-134">For each business event, the business event catalog shows a description.</span></span> <span data-ttu-id="152aa-135">この説明は、ビジネス イベントおよびビジネス プロセス内のコンテキストを理解するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="152aa-135">This description can help you better understand the business event and its context in the business process.</span></span> <span data-ttu-id="152aa-136">カタログには、イベントに送信されるデータ フィールドの一覧も表示されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-136">The catalog also shows the list of data fields that will be sent out in the event.</span></span>

<span data-ttu-id="152aa-137">外部の統合システムが開発中にビジネス イベントのペイロードのスキーマを必要とする場合、**ダウンロード スキーマ**を選択して JavaScript Object Notation (JSON) スキーマをダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="152aa-137">In scenarios where external integration systems require the schema of the payload for a business event during development, you can select **Download schema** to download the JavaScript Object Notation (JSON) schema.</span></span>

<span data-ttu-id="152aa-138">簡単に言うと、ビジネス イベント カタログは、実装に必要なビジネス イベントを識別するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="152aa-138">In summary, the business event catalog helps identify the business events that are required for an implementation.</span></span> <span data-ttu-id="152aa-139">各ビジネス イベントのスキーマを識別することもできます。</span><span class="sxs-lookup"><span data-stu-id="152aa-139">It also helps identify the schema for each business event.</span></span>

<span data-ttu-id="152aa-140">次のステップでは、エンドポイントを管理します。</span><span class="sxs-lookup"><span data-stu-id="152aa-140">The next step is to manage the endpoints.</span></span>
## <a name="business-events-parameters-and-processing"></a><span data-ttu-id="152aa-141">ビジネス イベント パラメーターおよび処理</span><span class="sxs-lookup"><span data-stu-id="152aa-141">Business events parameters and processing</span></span>
<span data-ttu-id="152aa-142">アプリケーションでは、ほぼリアル タイムでビジネス イベントを処理する専用のバッチ スレッドが割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="152aa-142">The application allocates dedicated batch threads to process business events in near real time.</span></span> <span data-ttu-id="152aa-143">スレッドの最大数は、システムで使用可能なスレッドの合計を超えることはできません (**System administration > Server configuration**)。</span><span class="sxs-lookup"><span data-stu-id="152aa-143">The maximum number of threads cannot exceed the total threads available in the system (**System administration > Server configuration**).</span></span> <span data-ttu-id="152aa-144">スレッドはすべてのバッチ処理と共有されているリソースであるため、ビジネスイベントのスレッド割り当てを変更する場合は注意が必要です。</span><span class="sxs-lookup"><span data-stu-id="152aa-144">Because threads are a shared resource for all batch processing, care must be taken when deciding to change the thread allocation for business events.</span></span> <span data-ttu-id="152aa-145">ビジネスイベントに割り当てられるスレッドの合計数は、ビジネスイベント パラメータ テーブル内のパラメータを使用して管理されています。</span><span class="sxs-lookup"><span data-stu-id="152aa-145">The total threads allocated for business events is controlled using a parameter in the business events parameter table.</span></span> <span data-ttu-id="152aa-146">この設定は、ユーザーインターフェイス (UI) 上では非表示となっており、運用環境においてはデータベースへのアクセスが必要となるため、この変更を行うにはサポート案件として対応する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-146">This setting is not exposed from the user interface (UI), so a support case must be created to get this count changed in production environments as this will need database access.</span></span>

<span data-ttu-id="152aa-147">ビジネス イベントでのバッチ処理ジョブは利用可能となっており、必要に応じて利用することで専用処理を運用する際の問題を軽減する回避策となります。</span><span class="sxs-lookup"><span data-stu-id="152aa-147">The business events batch processing job is available as a workaround to mitigate issues with the dedicated processing, if needed.</span></span> <span data-ttu-id="152aa-148">プラットフォーム更新プログラム 33 の前に、ユーザーの混乱を回避するために、ビジネスイベントでのバッチ処理を設定するメニューは削除されています。</span><span class="sxs-lookup"><span data-stu-id="152aa-148">Prior to Platform update 33, the corresponding menu item to schedule the business events batch processor has been removed to avoid any confusion for users.</span></span> <span data-ttu-id="152aa-149">メニュー上表示されてはいませんが、バッチ UI から BusinessEventsBundleBatchProcessor クラスを使用することでバッチジョブを手動で作成できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-149">However, you can manually create a batch job using the BusinessEventsBundleBatchProcessor class from the batch UI.</span></span> <span data-ttu-id="152aa-150">プラットフォーム更新プログラム 33 以降では、バッチ ジョブを**ビジネス イベント パラメーター** ページから有効化し、スケジュールすることができます。</span><span class="sxs-lookup"><span data-stu-id="152aa-150">In Platform update 33 and later, the batch job can be enabled and scheduled from the **Business events parameters** page.</span></span> <span data-ttu-id="152aa-151">回避策として必要不可欠な場合を除き、この手動バッチジョブを実行しないように留意してください。</span><span class="sxs-lookup"><span data-stu-id="152aa-151">It’s important that you do not run this as a manual batch job unless it is absolutely necessary as a workaround.</span></span>

<span data-ttu-id="152aa-152">エンド ポイントへのビジネス イベントの送信中にエラーが発生した場合は、システムでは、再試行ごとに 1 秒間隔でビジネス イベントの送信を 3 回再試行します。</span><span class="sxs-lookup"><span data-stu-id="152aa-152">In the event of an error while sending business events to its end point, the system retries to send the business events three times with an interval of one second per retry.</span></span> <span data-ttu-id="152aa-153">これは、**ビジネス イベント パラメーター** ページで変更できる既定の設定です。</span><span class="sxs-lookup"><span data-stu-id="152aa-153">This is the default setting that can be changed on the **Business events parameters** page.</span></span>

<span data-ttu-id="152aa-154">法人内の同じビジネス イベントにサブスクライブできるエンドポイントの数は、既定では 10 に制限されています。</span><span class="sxs-lookup"><span data-stu-id="152aa-154">The number of endpoints that can subscribe to the same business event in a legal entity is limited to ten by default.</span></span> <span data-ttu-id="152aa-155">これは、**ビジネス イベント パラメーター** ページで変更できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-155">This can be changed on the **Business events parameters** page.</span></span>

<span data-ttu-id="152aa-156">上記のパラメーターに対する標準の既定の設定は、**ビジネス イベント パラメーター** ページで復元することができます。</span><span class="sxs-lookup"><span data-stu-id="152aa-156">The out-of-the-box default settings for the above described parameters can be restored on the **Business events parameters** page.</span></span>

## <a name="managing-endpoints"></a><span data-ttu-id="152aa-157">エンドポイントの管理</span><span class="sxs-lookup"><span data-stu-id="152aa-157">Managing endpoints</span></span>

<span data-ttu-id="152aa-158">エンドポイントを使用すると、ビジネス イベントをに送信するための送信先を管理できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-158">Endpoints let you manage the destinations for sending business events to.</span></span> <span data-ttu-id="152aa-159">次のタイプのエンドポイントが現在サポートされています。</span><span class="sxs-lookup"><span data-stu-id="152aa-159">The following types of endpoints are currently supported.</span></span> <span data-ttu-id="152aa-160">直ちに、これらのメッセージングおよびイベント ブローカーのエンドポイントを作成できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-160">Endpoints can be created for these messaging and event brokers out of the box.</span></span>

- <span data-ttu-id="152aa-161">Azure Service Bus キュー</span><span class="sxs-lookup"><span data-stu-id="152aa-161">Azure Service Bus Queue</span></span>
- <span data-ttu-id="152aa-162">Azure Service Bus トピック</span><span class="sxs-lookup"><span data-stu-id="152aa-162">Azure Service Bus Topic</span></span>
- <span data-ttu-id="152aa-163">Azure Event Grid</span><span class="sxs-lookup"><span data-stu-id="152aa-163">Azure Event Grid</span></span>
- <span data-ttu-id="152aa-164">Azure イベント ハブ</span><span class="sxs-lookup"><span data-stu-id="152aa-164">Azure Event Hub</span></span>
- <span data-ttu-id="152aa-165">HTTPS</span><span class="sxs-lookup"><span data-stu-id="152aa-165">HTTPS</span></span>
- <span data-ttu-id="152aa-166">Microsoft Power Automate</span><span class="sxs-lookup"><span data-stu-id="152aa-166">Microsoft Power Automate</span></span>

<span data-ttu-id="152aa-167">消費者にビジネス イベントを組織化して配布するため、複数のエンドポイントが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-167">Some scenarios might require multiple endpoints for organized distribution of business events to consumers.</span></span> <span data-ttu-id="152aa-168">このようなシナリオをサポートするため、複数のエンドポイントを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="152aa-168">You can create multiple endpoints to support these scenarios.</span></span>

<span data-ttu-id="152aa-169">Azure ベースのエンドポイントは、顧客の Azure サブスクリプションに含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-169">The Azure-based endpoints must be in the customer's Azure subscription.</span></span> <span data-ttu-id="152aa-170">たとえば、イベント グリッドをエンドポイントとして使用する場合は、エンドポイントが顧客の Azure サブスクリプションに含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-170">For example, if Event Grid is used as an endpoint, the endpoint must be in the customer's Azure subscription.</span></span>

<span data-ttu-id="152aa-171">アプリケーションがエンドポイントを準備しません。</span><span class="sxs-lookup"><span data-stu-id="152aa-171">The application doesn't provision the endpoints.</span></span> <span data-ttu-id="152aa-172">用意されているイベントをエンドポイントに送信するだけです。</span><span class="sxs-lookup"><span data-stu-id="152aa-172">It just sends events to the endpoints that are provided.</span></span> <span data-ttu-id="152aa-173">顧客が Azure サブスクリプションでこれらのエンドポイントを使用している場合、追加費用が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-173">Customer might incur additional costs if they use these endpoints in their Azure subscription.</span></span>

![ビジネス イベントのエンドポイント](../media/businesseventsendpoint.png)

### <a name="create-an-azure-service-bus-queue-endpoint"></a><span data-ttu-id="152aa-175">Azure Service Bus キュー エンドポイントの作成</span><span class="sxs-lookup"><span data-stu-id="152aa-175">Create an Azure Service Bus Queue endpoint</span></span>

<span data-ttu-id="152aa-176">新しいエンドポイントを作成するには、**新規作成**を選択します。</span><span class="sxs-lookup"><span data-stu-id="152aa-176">To create a new endpoint, select **New**.</span></span> <span data-ttu-id="152aa-177">次に、**エンドポイントの種類**フィールドで、適切なエンドポイントの種類を選択します。</span><span class="sxs-lookup"><span data-stu-id="152aa-177">Then, in the **Endpoint type** field, select the appropriate endpoint type.</span></span> <span data-ttu-id="152aa-178">Service Bus キューにエンドポイントを作成するには、**Azure Service Busキュー**を選択します。</span><span class="sxs-lookup"><span data-stu-id="152aa-178">To create an endpoint to a Service Bus queue, select **Azure Service Bus Queue**.</span></span>

![ビジネス イベントの新規エンドポイント](../media/businesseventsnewendpoint1.png)

<span data-ttu-id="152aa-180">**次へ**を選択し、エンドポイントおよび Service Busキューの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="152aa-180">Select **Next**, and specify the name of the endpoint and the Service Bus queue.</span></span> <span data-ttu-id="152aa-181">また、Azure メッセージング リソースにシークレットを提供するために、Azure Key Vault を設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-181">In addition, you must set up Azure Key Vault to provide the secret to the Azure messaging resource.</span></span> <span data-ttu-id="152aa-182">また、Azure Active Directory (Azure AD) アプリケーション ID およびアプリケーション シークレットを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-182">You must also set up the Azure Active Directory (Azure AD) application ID and application secret.</span></span>

![ビジネス イベントの新規エンドポイント](../media/businesseventsnewendpoint2.png)

<span data-ttu-id="152aa-184">**キュー名**フィールドに、Azure の Azure Service Bus キューの構成で作成した**Azure Service Bus キュー**名を入力します。</span><span class="sxs-lookup"><span data-stu-id="152aa-184">In the **Queue Name** field, enter the **Azure Service Bus Queue** name that you created in the Azure Service Bus Queue configuration in Azure.</span></span>  

![ビジネス イベント キュー名](../media/BusinessEventsSBQueueName.PNG)

<span data-ttu-id="152aa-186">**Azure Active Directory アプリケーションID**フィールドに、Azure ポータルの Azure AD で作成されたアプリケーションIDを入力します。</span><span class="sxs-lookup"><span data-stu-id="152aa-186">In the **Azure Active Directory application ID** field, enter the application ID that is created in Azure AD in the Azure portal.</span></span>

![ビジネス イベントの Azure AD のコンフィギュレーション](../media/businesseventsaad1.png)

<span data-ttu-id="152aa-188">**Azure アプリケーション シークレット** フィールドに、アプリケーションのシークレット値を入力します。</span><span class="sxs-lookup"><span data-stu-id="152aa-188">In the **Azure application secret** field, enter the secret value for the application.</span></span>

![ビジネス イベントの Azure AD のコンフィギュレーション](../media/businesseventsaad2.png)

<span data-ttu-id="152aa-190">**Key Vault DNS 名**フィールドに、Key Vault設定名を入力します。</span><span class="sxs-lookup"><span data-stu-id="152aa-190">In the **Key vault DNS name** field, enter the name from your Key Vault setup.</span></span>

![ビジネス イベントの Azure Key Vault のコンフィギュレーション](../media/businesseventskeyvault1.png)

<span data-ttu-id="152aa-192">**Key Vault シークレット名**フィールドに、Key Vaultに作成する必要があるエンドポイント リソースのシークレット名を入力します。</span><span class="sxs-lookup"><span data-stu-id="152aa-192">In the **Key vault secret name** field, enter the secret name for the endpoint resource that must be created in Key Vault.</span></span>

![ビジネス イベントの Azure Key Vault のコンフィギュレーション](../media/businesseventskeyvault2.png)

<span data-ttu-id="152aa-194">Azure では、**Key Vault シークレット**の値は Azure Service Busの**プライマリ接続文字列**の値になります。</span><span class="sxs-lookup"><span data-stu-id="152aa-194">The **Key Vault Secret** value, in Azure, will be the Azure Service Bus **Primary Connection String** value.</span></span> <span data-ttu-id="152aa-195">この値は**共有アクセス ポリシー > RootManagedSharedAccessKey** で構成した Azure Service Bus で確認できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-195">This value is found in the Azure Service Bus that you configured in **Shared Access Policies > RootManagedSharedAccessKey**.</span></span>

![ビジネス イベントの Azure Key Vault のキー値](../media/BusinessEventsKVSValue.PNG)

> [!IMPORTANT]
> <span data-ttu-id="152aa-197">また、登録された Azure アプリケーションは、Key Vault のアクセス ポリシーで設定された Key Vault に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-197">The Azure application that was registered must be also added to the Key Vault set up under Access policies in the Key Vault.</span></span> <span data-ttu-id="152aa-198">この設定を完了するには、**キー、シークレット、および証明書の管理**テンプレートを選択し、アプリケーションを**プリンシパル**として選択します。</span><span class="sxs-lookup"><span data-stu-id="152aa-198">For this setup to be complete, select the **Key, Secret & Certificate Management** template and then select the application as the **principal**.</span></span>

### <a name="create-an-azure-service-bus-topic-endpoint"></a><span data-ttu-id="152aa-199">Azure Service Bus トピック エンドポイントの作成</span><span class="sxs-lookup"><span data-stu-id="152aa-199">Create an Azure Service Bus Topic endpoint</span></span>

<span data-ttu-id="152aa-200">Service Bus トピックにエンドポイントを作成するには、**新規**を選択し、次に**エンドポイントの種類**フィールドで、**Azure Service Bus トピック**を選択します。</span><span class="sxs-lookup"><span data-stu-id="152aa-200">To create an endpoint to a Service Bus topic, select **New**, and then, in the **Endpoint type** field, select **Azure Service Bus Topic**.</span></span> <span data-ttu-id="152aa-201">**トピック名**フィールドは、Service Bus トピック名に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-201">The **Topic name** field must be set to the name of the Service Bus topic.</span></span> <span data-ttu-id="152aa-202">Key Vault の情報は、Azure Service Bus キュー エンドポイントの設定と同じ方法で設定されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-202">Key Vault information is set up in the same way that it is set up for an Azure Service Bus Queue endpoint.</span></span>

### <a name="create-an-azure-event-grid-endpoint"></a><span data-ttu-id="152aa-203">Azure イベント グリッド エンドポイントの作成</span><span class="sxs-lookup"><span data-stu-id="152aa-203">Create an Azure Event Grid endpoint</span></span>

<span data-ttu-id="152aa-204">エンドポイントを作成するには、Azure ポータルで **Azure イベント グリッド トピック**を作成して構成し、次に**ビジネス イベント ワークスペース**でイベント グリッド トピックにエンドポイントを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-204">To create an endpoint, you need to create and configure an **Azure Event Grid Topic** in Azure Portal, and then create an endpoint to the Event Grid Topic in the **Business Events Workspace**.</span></span> <span data-ttu-id="152aa-205">**エンドポイント**タブに移動し、**新規**を選択し、**エンドポイントの種類**で **Azure イベント グリッド**を選択します。</span><span class="sxs-lookup"><span data-stu-id="152aa-205">Go to the **Endpoints** tab, select **New**, and then select **Azure Event Grid** as the **Endpoint type**.</span></span> <span data-ttu-id="152aa-206">**エンドポイント URL** フィールドで、**Azure イベント グリッド トピック**からURLを入力します。</span><span class="sxs-lookup"><span data-stu-id="152aa-206">In the **Endpoint URL** field, enter the URL from the **Azure Event Grid Topic**.</span></span> <span data-ttu-id="152aa-207">これは、イベント グリッド トピックの**概要**セクションの**トピック エンドポイント**の値です。</span><span class="sxs-lookup"><span data-stu-id="152aa-207">This is the **Topic Endpoint** value in the **Overview** section of your Event Grid Topic.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="152aa-208">また、登録された Azure アプリケーションは、Key Vault のアクセス ポリシーで設定された Key Vault に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-208">The Azure application that was registered must be also added to the Key Vault set up under Access policies in the Key Vault.</span></span> <span data-ttu-id="152aa-209">この設定を完了するには、**キー、シークレット、および証明書の管理**テンプレートを選択し、アプリケーションを**プリンシパル**として選択します。</span><span class="sxs-lookup"><span data-stu-id="152aa-209">For this setup to be complete, select the **Key, Secret & Certificate Management** template and then select the application as the **principal**.</span></span>

![ビジネス イベントのイベント グリッド エンドポイントの値](../media/BusinessEventsEGTopicsEndpoint.PNG)

<span data-ttu-id="152aa-211">Key Vault の情報は、Azure Service Bus キュー エンドポイントの設定と同じ方法で設定されますが、Key Vault シークレットだけはService Bus 接続文字列ではなく、イベント グリッドの資格情報に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-211">Key Vault information is set up in the same way that it is set up for an Azure Service Bus Queue endpoint, except the Key Vault secret should now point to the Event Grid credential, rather than the Service Bus connection string.</span></span>  <span data-ttu-id="152aa-212">イベント グリッドの資格情報は、設定セクションの **Access Keys** で作成されたイベント グリッドで確認できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-212">The Event Grid Credential can be found under the Event Grid you created in the **Access Keys** section under Settings.</span></span> 

![ビジネス イベントのイベント グリッド資格情報の値](../media/BusinessEventsEGKeyValue.PNG)

<span data-ttu-id="152aa-214">必要なエンドポイントを作成したら、次に、ビジネス イベントを有効にします。</span><span class="sxs-lookup"><span data-stu-id="152aa-214">After you've created the endpoints that you require, the next step is to activate the business events.</span></span>


## <a name="activating-business-events"></a><span data-ttu-id="152aa-215">ビジネス イベントの有効化</span><span class="sxs-lookup"><span data-stu-id="152aa-215">Activating business events</span></span>

<span data-ttu-id="152aa-216">既定では、ビジネス イベント カタログのビジネス イベントは有効ではありません。</span><span class="sxs-lookup"><span data-stu-id="152aa-216">Business events in the business event catalog aren't active by default.</span></span> <span data-ttu-id="152aa-217">カタログから必要なビジネス イベントを有効化することができます。</span><span class="sxs-lookup"><span data-stu-id="152aa-217">From the catalog, you can activate any business events that you require.</span></span> <span data-ttu-id="152aa-218">1つまたは複数のビジネス イベントを選択し、**有効化**を選択します。</span><span class="sxs-lookup"><span data-stu-id="152aa-218">Select one or more business events, and then select **Activate**.</span></span>

![ビジネス イベントの有効化](../media/businesseventsactivation.png)

<span data-ttu-id="152aa-220">ビジネス イベントは、すべての法人または特定の法人のいずれかで有効化できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-220">Business events can be activated either in all legal entities or in specific legal entities.</span></span> <span data-ttu-id="152aa-221">**法人**フィールドを空白のままにすると、選択したビジネス イベントは*すべて*の法人で有効化されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-221">If you leave the **Legal entity** field blank, the selected business events will be activated in *all* legal entities.</span></span> <span data-ttu-id="152aa-222">ビジネス イベントが特定の法人に対してのみ必要な場合は、法人ごとに個別に構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-222">If a business event is required only for specific legal entities, it must be configured separately for each legal entity.</span></span>

<span data-ttu-id="152aa-223">有効化されるビジネス イベントにエンドポイントを割り当てる必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-223">Endpoints must be assigned to the business events that are activated.</span></span>

<span data-ttu-id="152aa-224">ビジネス プロセスの実行時にビジネス イベントが発生した場合、システムは有効化されたビジネス イベントに対してのみ、発信処理を行います。</span><span class="sxs-lookup"><span data-stu-id="152aa-224">When business events occur as business processes are run, the system will do outbound processing only for business events that have been activated.</span></span>

<span data-ttu-id="152aa-225">ビジネス イベントが有効化されると、**有効なイベント**タブに表示されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-225">After business events are activated, they appear on the **Active events** tab.</span></span>

![有効なビジネス イベント](../media/businesseventsactivetab.png)

<span data-ttu-id="152aa-227">**の有効なイベント**タブで、ビジネス イベントを無効にできます。</span><span class="sxs-lookup"><span data-stu-id="152aa-227">From the **Active events** tab, you can inactivate business events.</span></span> <span data-ttu-id="152aa-228">システムは、無効化されたイベントには発信処理を行いません。</span><span class="sxs-lookup"><span data-stu-id="152aa-228">The system won't do outbound processing for inactivated events.</span></span>

<span data-ttu-id="152aa-229">ビジネス イベントが無効化されると、 それらは **無効なイベント** タブに表示されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-229">After business events are inactivated, they appear on the **Inactive events** tab.</span></span>

![無効なビジネス イベント](../media/businesseventsinactivetab.png)

<span data-ttu-id="152aa-231">統合環境におけるシステムの管理活動のためにビジネス イベントの処理をある期間停止する必要がある場合、ビジネス イベントを無効にできます。</span><span class="sxs-lookup"><span data-stu-id="152aa-231">Business events can be inactivated when processing of business events must be paused for a period because of specific system maintenance activities in the integration landscape.</span></span>

<span data-ttu-id="152aa-232">ビジネス要件を変更するときに、ビジネス イベントが不要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-232">When business requirements change, some business events might no longer be required.</span></span> <span data-ttu-id="152aa-233">この場合、有効なイベントの一覧から削除するのではなく、無効にできます。</span><span class="sxs-lookup"><span data-stu-id="152aa-233">In this case, you can inactivate them instead of deleting them from the list of active events.</span></span> <span data-ttu-id="152aa-234">この方法は、ビジネス イベントのエラーの履歴を保持する必要がある場合に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="152aa-234">This approach is useful if the history of errors for the business events must be preserved.</span></span> <span data-ttu-id="152aa-235">無効化されたビジネス イベントは、無効のまま保持する必要があるビジネスがなくなった場合、後で削除することができます。</span><span class="sxs-lookup"><span data-stu-id="152aa-235">Inactivated business events can be deleted later, when there is no longer a business need to keep them inactivated.</span></span>

## <a name="errors"></a><span data-ttu-id="152aa-236">エラー</span><span class="sxs-lookup"><span data-stu-id="152aa-236">Errors</span></span>

<span data-ttu-id="152aa-237">システムがビジネス イベントの発信処理を行う間にエラーが発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-237">While the system does outbound processing of business events, errors can occur.</span></span> <span data-ttu-id="152aa-238">これらのエラーにより、システムがエンドポイントにビジネス イベントを正常に送付できない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-238">These errors might prevent the system from successfully delivering a business event to the endpoint.</span></span> <span data-ttu-id="152aa-239">エラーが発生した場合、システムはビジネス イベントを正常に処理するため、何度か再試行します。</span><span class="sxs-lookup"><span data-stu-id="152aa-239">If an error occurs, the system retries several times to successfully process the business event.</span></span> <span data-ttu-id="152aa-240">しかし、試行が全く成功しなかった場合は、ビジネス イベントはエラー ログに保存されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-240">However, if all attempts are unsuccessful, the business event is saved in an error log.</span></span>

<span data-ttu-id="152aa-241">エラー ログには、**有効なイベント**、**無効なイベント**、および**エラー**タブからアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="152aa-241">Error logs can be accessed from the **Active events**, **Inactive events**, and **Errors** tabs.</span></span> <span data-ttu-id="152aa-242">**エラー**タブにはすべてのビジネス イベントのすべてのエラーが表示され、他の2つのタブには特定のビジネス イベントに関連するエラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-242">The **Errors** tab shows all errors across all business events, whereas the other two tabs show errors in the context of a specific business event.</span></span>

<span data-ttu-id="152aa-243">**再送信**アクションを使用して、各エラーにおける発信処理を必要に応じて行うことができます。</span><span class="sxs-lookup"><span data-stu-id="152aa-243">You can do on-demand outbound processing on each error by using the **Resend** action.</span></span> <span data-ttu-id="152aa-244">このアクションは、発信処理ロジックを起動します。</span><span class="sxs-lookup"><span data-stu-id="152aa-244">This action invokes the outbound processing logic.</span></span> <span data-ttu-id="152aa-245">このロジックには、再試行が含まれます。</span><span class="sxs-lookup"><span data-stu-id="152aa-245">This logic includes retries.</span></span> <span data-ttu-id="152aa-246">発信処理がそれでも成功しない場合は、エラー ログにエラーが記録されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-246">If the outbound processing is still unsuccessful, the error is logged in the error log.</span></span> <span data-ttu-id="152aa-247">この場合、**エラー**タブの**最終処理時間**フィールドに、イベントの処理が発生した最終時間が表示されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-247">In this case, the **Last process time** field on the **Errors** tab indicates when the last attempt to process the event occurred.</span></span>

<span data-ttu-id="152aa-248">エラーを正常に処理できない場合は、必要に応じて**ダウンロード ペイロード** オプションを使用し、イベントからペイロードをダウンロードしてオフライン処理します。</span><span class="sxs-lookup"><span data-stu-id="152aa-248">If an error can't be successfully processed, you can use the **Download payload** option to download the payload from the event for offline processing, as you require.</span></span>

> [!NOTE]
> <span data-ttu-id="152aa-249">エンドポイントが削除され、新しいエンドポイントがビジネス イベントに関連付けられている場合は、ビジネス イベントに関連付けられているすべてのエラーは引き続き再送信できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-249">If an endpoint is deleted and a new endpoint is associated with business events, all errors that are associated with the business events can still be resent.</span></span> <span data-ttu-id="152aa-250">この場合、システムは発信処理システムを実行し、対応するビジネス イベントに関連付けられている新しいエンドポイントに送信します。</span><span class="sxs-lookup"><span data-stu-id="152aa-250">In this case, the system will do outbound processing to send to the new endpoint that is associated with the corresponding business event.</span></span> <span data-ttu-id="152aa-251">この機能により、コンフィギュレーションのミスやその他のエラー状態から上手に復旧できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-251">This functionality allows for graceful recovery from misconfiguration or other error states.</span></span>

## <a name="business-event-consumption-models"></a><span data-ttu-id="152aa-252">ビジネス イベント消費モデル</span><span class="sxs-lookup"><span data-stu-id="152aa-252">Business event consumption models</span></span>

<span data-ttu-id="152aa-253">実装の統合の要件と統合ソリューションの設計はさまざまです。</span><span class="sxs-lookup"><span data-stu-id="152aa-253">The integration requirements and integration solution design for implementations vary.</span></span> <span data-ttu-id="152aa-254">統合の要件は、ビジネス イベントの消費モデルの識別に影響します。</span><span class="sxs-lookup"><span data-stu-id="152aa-254">The integration requirements play a role in identifying the consumption model for business events.</span></span> <span data-ttu-id="152aa-255">簡単に言うと、ビジネス イベントを使用した統合を設計する際に、次の点を考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-255">In summary, you must consider the following points when you design integrations that use business events:</span></span>

- <span data-ttu-id="152aa-256">ビジネス イベントは Power Automate、Service Bus、イベント グリッド、その他のエンドポイント タイプを使用して消費できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-256">Business events can be consumed using Power Automate, Service Bus, Event Grid, or other endpoint types.</span></span>
- <span data-ttu-id="152aa-257">Power Automate、Service Bus、イベント グリッド、その他のエンドポイント タイプを使用するには、顧客は独自の購読を提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-257">Customers must bring their own subscriptions to use Power Automate, Service Bus, Event Grid, or other endpoint types.</span></span>
- <span data-ttu-id="152aa-258">ビジネス イベントは、すべての法人または特定の法人で有効化できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-258">A business event can be activated in all legal entities or in specific legal entities.</span></span>
- <span data-ttu-id="152aa-259">ビジネス イベントは、一意のエンドポイントまたは同一のエンドポイントに送信できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-259">A business event can be sent to a unique endpoint or the same endpoints.</span></span>
- <span data-ttu-id="152aa-260">Power Automate はビジネス イベントを直接購読できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-260">Power Automate can directly subscribe to business events.</span></span>

## <a name="idempotency"></a><span data-ttu-id="152aa-261">べき等</span><span class="sxs-lookup"><span data-stu-id="152aa-261">Idempotency</span></span>
<span data-ttu-id="152aa-262">ビジネス イベントはペイロードに管理番号を含めることで消費側でべき等の動作を有効にします。</span><span class="sxs-lookup"><span data-stu-id="152aa-262">Business events enable idempotent behavior on the consuming side by having a control number in the payload.</span></span> <span data-ttu-id="152aa-263">制御番号は増加する番号であり、重複や故障出荷を検出するために消費アプリケーションによって追跡できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-263">The control number is an upwardly increasing number, which can be tracked by the consuming application to detect duplication and/or out of order delivery.</span></span> <span data-ttu-id="152aa-264">制御番号は連番にできないため、順序番号と読み間違えられることはありません。</span><span class="sxs-lookup"><span data-stu-id="152aa-264">The control number cannot be misread as the sequence number because the control number cannot be sequential.</span></span> <span data-ttu-id="152aa-265">番号付けスペースに間隔がある可能性があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-265">There can be gaps in the numbering space.</span></span>

## <a name="filtering-in-azure-event-grid-and-azure-service-bus"></a><span data-ttu-id="152aa-266">Azure Event Grid と Azure Service Bus でのフィルター処理</span><span class="sxs-lookup"><span data-stu-id="152aa-266">Filtering in Azure Event Grid and Azure Service Bus</span></span>
<span data-ttu-id="152aa-267">Azure Service Bus と Azure Event Grid は受信メッセージの条件を指定してトピックの購読をサポートします。</span><span class="sxs-lookup"><span data-stu-id="152aa-267">Azure Service Bus and Azure Event Grid supports subscribing to topics by specifying criteria on the incoming message.</span></span> <span data-ttu-id="152aa-268">詳細については [トピック フィルターとアクション](https://docs.microsoft.com/azure/service-bus-messaging/topic-filters) および [イベント グリッド購読のイベント フィルターを理解する](https://docs.microsoft.com/azure/event-grid/event-filtering) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="152aa-268">For more information, see [Topic filters and actions](https://docs.microsoft.com/azure/service-bus-messaging/topic-filters) and [Understand event filtering for Event Grid subscriptions](https://docs.microsoft.com/azure/event-grid/event-filtering).</span></span>

<span data-ttu-id="152aa-269">Azure Service Bus や Azure Event Grid に送信されるビジネス イベントは、この目的で使用できる次のフィールドを持ちます。</span><span class="sxs-lookup"><span data-stu-id="152aa-269">A business event that is sent to an Azure Service Bus or Azure Event Grid has the following fields made available for this purpose.</span></span> <span data-ttu-id="152aa-270">購読者はこの情報を使用して、必要に応じてさらに特定のトピックを購読できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-270">Subscribers can use this information to subscribe to more specific topics as required.</span></span>

-   <span data-ttu-id="152aa-271">**カテゴリ** - これはビジネス イベント カタログに表示されたビジネス イベントのカテゴリです。</span><span class="sxs-lookup"><span data-stu-id="152aa-271">**Category** – This is the business event category as displayed in the business event catalog.</span></span> <span data-ttu-id="152aa-272">複数のカテゴリから共通トピックがビジネス イベントの受信に使用されていて、購読者が関心のあるカテゴリのビジネス イベントのみを受信する必要がある場合に、これはフィルター条件として役立ちます。</span><span class="sxs-lookup"><span data-stu-id="152aa-272">This is useful as a filter criterion when a common topic is used for receiving business events from multiple categories and subscribers want to only receive business events for the category that they are interested in.</span></span>

-   <span data-ttu-id="152aa-273">**ビジネス イベント ID** – これはビジネス イベント カタログに表示されたビジネス イベント実装のクラス名です。</span><span class="sxs-lookup"><span data-stu-id="152aa-273">**Business event ID** – This is the class name of the business event implementation as displayed in the business event catalog.</span></span> <span data-ttu-id="152aa-274">これはビジネス イベント (ビジネス イベントのインスタンスではない) を一意に識別して、したがって消費者側で受信したビジネス イベントを検証し、期待されるビジネス イベントが受信および処理されていることを検証するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="152aa-274">This uniquely identifies the business event (not the instance of the business event) and thus helps in validation of received business events on the consumer side to ensure the expected business event is what is being received and processed.</span></span>

-   <span data-ttu-id="152aa-275">**法人** – これはビジネス イベントが発生した法人です。</span><span class="sxs-lookup"><span data-stu-id="152aa-275">**Legal entity** – This is the legal entity in which the business event happened.</span></span> <span data-ttu-id="152aa-276">消費側でのビジネス イベントの処理および配信が法人によって推進される必要がある場合、これは消費ロジックを基準とするのに役立つ情報です。</span><span class="sxs-lookup"><span data-stu-id="152aa-276">This is a useful information to base the consuming logic on if the processing and distribution of business events on the consumption side must be driven by a legal entity.</span></span>

> [!NOTE]
> <span data-ttu-id="152aa-277">ビジネス イベントで送信されるフィルター処理可能フィールドは、カスタムフィールドを含むように変更できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-277">The filterable fields that are sent in a business event can be modified to include custom fields.</span></span> <span data-ttu-id="152aa-278">これは開発者向けの環境です。</span><span class="sxs-lookup"><span data-stu-id="152aa-278">This is a developer experience.</span></span>

## <a name="role-based-security-for-business-events"></a><span data-ttu-id="152aa-279">ビジネス イベントのロールベース セキュリティ</span><span class="sxs-lookup"><span data-stu-id="152aa-279">Role-based security for business events</span></span>
<span data-ttu-id="152aa-280">プラットフォーム更新 29 以降、ロールベース セキュリティをビジネス イベントに適用して、適切なセキュリティ コンポーネントを使用して以下の要件を満たすことができます。</span><span class="sxs-lookup"><span data-stu-id="152aa-280">Starting in Platform update 29, role-based security can be applied to business events to meet the following requirements using the appropriate security artifact.</span></span>

| <span data-ttu-id="152aa-281">**必要量**</span><span class="sxs-lookup"><span data-stu-id="152aa-281">**Requirement**</span></span>                                                                                                                                | <span data-ttu-id="152aa-282">**権限**</span><span class="sxs-lookup"><span data-stu-id="152aa-282">**Privilege**</span></span>                                 | <span data-ttu-id="152aa-283">**関税**</span><span class="sxs-lookup"><span data-stu-id="152aa-283">**Duty**</span></span>                          |
|------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|-----------------------------------|
| <span data-ttu-id="152aa-284">限定されたユーザーのみがビジネス イベント カタログを表示するアクセス権を持つ必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-284">Only certain users must have access to view the business events catalog.</span></span>                                                                       | <span data-ttu-id="152aa-285">**BusinessEventsCatalogView**</span><span class="sxs-lookup"><span data-stu-id="152aa-285">**BusinessEventsCatalogView**</span></span>                 | <span data-ttu-id="152aa-286">なし</span><span class="sxs-lookup"><span data-stu-id="152aa-286">None</span></span>                              |
| <span data-ttu-id="152aa-287">限定されたユーザーのみがビジネス イベントをアクティブにするアクセス権を持つ必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-287">Only certain users must have access to activate business events.</span></span>                                                                               | <span data-ttu-id="152aa-288">**BusinessEventsCatalogMaintain**</span><span class="sxs-lookup"><span data-stu-id="152aa-288">**BusinessEventsCatalogMaintain**</span></span>             | <span data-ttu-id="152aa-289">なし</span><span class="sxs-lookup"><span data-stu-id="152aa-289">None</span></span>                              |
| <span data-ttu-id="152aa-290">限定されたユーザーのみがエンドポイントを作成して管理するアクセス権を持つ必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-290">Only certain users must have access to create and manage endpoints.</span></span>                                                                            | <span data-ttu-id="152aa-291">**ビジネス イベントのセキュリティ権限**</span><span class="sxs-lookup"><span data-stu-id="152aa-291">**Business events security privilege**</span></span>        | <span data-ttu-id="152aa-292">**ビジネス イベントのセキュリティ職務権限**</span><span class="sxs-lookup"><span data-stu-id="152aa-292">**Business events security duty**</span></span> |
| <span data-ttu-id="152aa-293">ユーザーは Power Automate など外部アプリケーションからアクセスが許可されているビジネス イベントのみを購読できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-293">Users must only be able to subscribe to business events which they have been granted access to from external applications like Power Automate.</span></span> | <span data-ttu-id="152aa-294">**サービスからビジネス イベントを購読**</span><span class="sxs-lookup"><span data-stu-id="152aa-294">**Subscribe to business events from service**</span></span> | <span data-ttu-id="152aa-295">なし</span><span class="sxs-lookup"><span data-stu-id="152aa-295">None</span></span>                              |
| <span data-ttu-id="152aa-296">限定されたユーザーのみがビジネス イベントのセキュリティ設定を表示できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-296">Only certain users must be able to view the business events security setup.</span></span>                                                                    | <span data-ttu-id="152aa-297">**BusinessEventsCatalogSecuritySetupView**</span><span class="sxs-lookup"><span data-stu-id="152aa-297">**BusinessEventsCatalogSecuritySetupView**</span></span>    | <span data-ttu-id="152aa-298">なし</span><span class="sxs-lookup"><span data-stu-id="152aa-298">None</span></span>                              |
| <span data-ttu-id="152aa-299">限定されたユーザーのみがビジネス イベントのセキュリティを管理できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-299">Only certain users must be able to manage business events security.</span></span>                                                                            | <span data-ttu-id="152aa-300">**ビジネス イベント カタログのセキュリティの管理**</span><span class="sxs-lookup"><span data-stu-id="152aa-300">**Maintain business events catalog security**</span></span> | <span data-ttu-id="152aa-301">なし</span><span class="sxs-lookup"><span data-stu-id="152aa-301">None</span></span>                              |

<span data-ttu-id="152aa-302">これらの権限を必要な職務に追加して、対応するロールに適切なアクセス レベルを付与できます。</span><span class="sxs-lookup"><span data-stu-id="152aa-302">These privileges can be added to the required duties to grant corresponding roles appropriate access levels.</span></span>

### <a name="enabling-role-based-security-for-business-events"></a><span data-ttu-id="152aa-303">ビジネス イベントのロールベース セキュリティを有効化</span><span class="sxs-lookup"><span data-stu-id="152aa-303">Enabling role-based security for business events</span></span>

<span data-ttu-id="152aa-304">機能管理からビジネス イベントのロールベース セキュリティを有効化する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-304">Role-based security for business events must be enabled via Feature management.</span></span>

1.   <span data-ttu-id="152aa-305">**システム管理 \> 機能管理** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="152aa-305">Go to **System administration \> Feature management**.</span></span>

2.   <span data-ttu-id="152aa-306">**ビジネス イベント カタログのセキュリティ** 機能を選択します。</span><span class="sxs-lookup"><span data-stu-id="152aa-306">Select the **Business events catalog security** feature.</span></span>

3.   <span data-ttu-id="152aa-307">機能を有効化します。</span><span class="sxs-lookup"><span data-stu-id="152aa-307">Enable the feature.</span></span>

4.   <span data-ttu-id="152aa-308">**システム管理 \> 設定 \> ビジネス イベント \> ビジネスイベントカタログ** からビジネス イベント カタログに移動します。</span><span class="sxs-lookup"><span data-stu-id="152aa-308">Go to the business events catalog via **System administration \> Set up \> Business events \> Business events catalog.**</span></span>

5.   <span data-ttu-id="152aa-309">カタログの **セキュリティ** タブでは、ビジネス イベントを 1 つ以上のロールにマップする必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-309">The **Security** tab in the catalog is where a business event must be mapped to one or more roles.</span></span> <span data-ttu-id="152aa-310">必要に応じてコンフィギュレーションを完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-310">You must complete the configuration as required.</span></span>

6.   <span data-ttu-id="152aa-311">上部のナビゲーション ウィンドウの **セキュリティ** メニューで **有効化**メニュー ボタンを選択してセキュリティを有効にします。</span><span class="sxs-lookup"><span data-stu-id="152aa-311">Enable security by selecting the **Enable** menu button on the **Security** menu on the top navigation pane.</span></span> <span data-ttu-id="152aa-312">情報メッセージはセキュリティが有効か無効かを確認します。</span><span class="sxs-lookup"><span data-stu-id="152aa-312">An informational message will confirm if security is enabled or disabled.</span></span>

7.  <span data-ttu-id="152aa-313">情報メッセージに記載されているセキュリティに基づいて、適切な権限または職務権限を追加するために必要なセキュリティ ロールを変更します。</span><span class="sxs-lookup"><span data-stu-id="152aa-313">Modify the necessary security role to add the appropriate privilege or the duty based on security noted in the informational message.</span></span>

### <a name="subscribe-to-business-events-from-service"></a><span data-ttu-id="152aa-314">サービスからビジネス イベントの登録</span><span class="sxs-lookup"><span data-stu-id="152aa-314">Subscribe to business events from service</span></span>

<span data-ttu-id="152aa-315">ロールを介して権限 **サービスからビジネスイベントを購読** にアクセスできるユーザーは、ロールに割り当てられたビジネス イベントのみを表示およびサブスクライブできます。これについては以下で説明します。</span><span class="sxs-lookup"><span data-stu-id="152aa-315">Users having access to the privilege **Subscribe to business events from service** via their roles will be able to only see and subscribe to business events that have been assigned to their roles, which is described below.</span></span> <span data-ttu-id="152aa-316">存在する場合にロール ベースのセキュリティの一部として行われる組織の割り当ては、ユーザーがロールを介してアクセスできる組織のビジネス イベントのみにサブスクライブ可能にすることでビジネス イベントのコンテキストで尊重されます。</span><span class="sxs-lookup"><span data-stu-id="152aa-316">The organizational assignments that are done, if any, as part of role-based security is honored in the context of business events by letting users to only subscribe to business events in the organizations to which they have access to via their roles.</span></span> <span data-ttu-id="152aa-317">この動作は、Power Automate や Logic Apps からサービス呼び出しを使用すると効果的です。</span><span class="sxs-lookup"><span data-stu-id="152aa-317">This behavior is effective using any service calls like from Power Automate or Logic Apps.</span></span>

### <a name="backward-compatibility"></a><span data-ttu-id="152aa-318">下位互換性</span><span class="sxs-lookup"><span data-stu-id="152aa-318">Backward compatibility</span></span>

<span data-ttu-id="152aa-319">プラットフォーム更新プログラム 29 より前のバージョンとビジネス イベントの下位互換性を確保するには、次の動作を理解する必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-319">To ensure backward compatibility of business events with versions prior to Platform update 29, the following behavior must be understood.</span></span>

-   <span data-ttu-id="152aa-320">ビジネス イベントのロールベースのセキュリティは既定で無効になります。</span><span class="sxs-lookup"><span data-stu-id="152aa-320">Role-based security for business events will be disabled by default.</span></span>

-   <span data-ttu-id="152aa-321">この機能が機能管理で有効でも、ロールベースのセキュリティは機能しません。</span><span class="sxs-lookup"><span data-stu-id="152aa-321">Even if the feature is enabled in Feature management, role-based security will not take effect.</span></span>

-   <span data-ttu-id="152aa-322">ロールベースのセキュリティは **セキュリティ** メニューを介してビジネス イベント カタログで明示的に有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="152aa-322">Role-based security must be explicitly enabled in the business events catalog via the **Security** menu.</span></span>

-   <span data-ttu-id="152aa-323">ロールベースのセキュリティが完全に有効化された後ではじめてセキュリティが効力を発揮します。</span><span class="sxs-lookup"><span data-stu-id="152aa-323">After role-based security is enabled completely, security will be enforced henceforth.</span></span> <span data-ttu-id="152aa-324">これは、管理者ロールを持つユーザーは動作の変化に気付かないことを意味します。</span><span class="sxs-lookup"><span data-stu-id="152aa-324">This will mean that any user with administration role will not notice any change in behavior.</span></span> <span data-ttu-id="152aa-325">ただし、管理者以外のユーザーに対しては、ビジネス イベント カタログのセキュリティ構成でロールが割り当てられたビジネス イベントのみが表示されるか、もしくはロールがビジネス イベントに割り当てられていないためビジネス イベントが表示されません。</span><span class="sxs-lookup"><span data-stu-id="152aa-325">However, any non-admin users will either only see business events to which their roles were assigned to in the business events catalog security configuration or they will not see any business events because their roles were not assigned to any business events.</span></span>


> [!NOTE]
> <span data-ttu-id="152aa-326">機能を中断しないためには、ビジネス イベントでセキュリティを有効にする前に、前述の下位互換性の動作を理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="152aa-326">To ensure uninterrupted functionality, it is important to understand the backward-compatibility behavior described above before you enable security on business events.</span></span>
