---
title: 財務諸表の高度な形式オプション
description: 財務報告レポートを作成する場合は、追加の形式機能が使用できます。これには分析コードのフィルター、列とレポート単位への制限、ノン プリンティング行、計算の IF/THEN/ELSE 明細書が含まれます。
author: ryansandness
manager: AnnBe
ms.date: 04/26/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: FinancialReports
audience: Application User
ms.reviewer: kfend
ms.custom: 106571
ms.assetid: 895b5127-01d6-4495-b127-343387b743aa
ms.search.region: Global
ms.author: aolson
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.openlocfilehash: 3508099dfa3c6671da8dddc9061f737a97e825ce
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/05/2020
ms.locfileid: "4683166"
---
# <a name="advanced-formatting-options-in-financial-reporting"></a>財務諸表の高度な形式オプション

[!include [banner](../includes/banner.md)]

財務報告レポートを作成する場合は、追加の形式機能が使用できます。これには分析コードのフィルター、列とレポート単位への制限、ノン プリンティング行、計算の IF/THEN/ELSE 明細書が含まれます。

次の表は、レポートをデザインするときに使用できる高度な形式機能を説明します。

| 機能                   | 説明 |
|----------------------------|-------------|
| 分析コード フィルター           | 特定のデータセットにアクセスするには、行定義と列定義で分析コードを使用できます。 多くのレポートの行の書式設定のナチュラル区分のみ使用します。 ただし、行は分析コード値を含むように変更できます。 列定義の分析コード フィルタは特定の分析コード値にアクセスするために使用されます。 |
| [レポート単位の制限] | 特定のレポート単位にリンクされている情報のみを表示するように、レポートの行を設定できます。 |
| ノンプリンティング (NP) 行     | ノンプリンティング行は、多くのレポートで役立ちます。 値を取得するために複数の計算が必要な場合、これらの計算は、印刷レポートで非表示にすることができます。 ノンプリンティングの行は、レポート デザインのトラブルシューティングや高度な配置セルにも役立ちます。 |
| [列の制限]         | 行定義の列の制限は、レポートのある行にのみ関連する値を非表示にするために役立ちます。 行で比率計算を実行するときに、列の制限は、それらの数値が適用されない場合に合計列または他の列が印刷されることを防ぎます。 |
| [段区切り]               | 行定義で段区切りを追加して、レポート情報を並べて表示できます。 1 つの行定義で複数の段区切りを追加することができ、列のヘッダーは段区切り後の各列の上部に繰り返されます。 レポートのコメントは、段区切りの間に表示されます。 |
| [IF/THEN/ELSE] 明細書     | 行定義または列定義で計算を変更できます。 |
| 分析コード値には単一引用符 ('') およびアンパサンド (&) を使用します。 | レポート デザインにはアンパサンド記号を含む分析コード値を使用できます。 |

## <a name="advanced-cell-placement"></a>[高度な配置セル]

[高度な配置セル]、または *強制* には、特定のセルへの特定の値の配置が含まれます。 たとえば、強制は、キャッシュ フロー明細書の正しい残高を移動する場合などによく使用されます。 たとえば、強制を次を目的で使用できます。

- Microsoft Excel から特定のセルに値を移動します。
- 特定の値をレポートにハード コーティングします。
- 前のセルの値をコピーし、-1 でその値を掛けて符号を変更します。

> [!NOTE]
> 多くの場合、列の計算を行の計算の前に実行するには、レポート定義をコンフィギュレーションする必要があります。 このコンフィギュレーションを完了するには、次の手順に従います。
>
> 1. [レポート デザイナー] で、レポート定義を開きます。
> 2. **設定** タブの **計算優先順位** で、**最初に列の計算、それから行の計算を実行** を選択します。

## <a name="designing-the-report"></a>[レポートのデザイン]

レポートをデザインするとき、値が意図したとおりに引込まれるようにすべての詳細行を作成する必要があります。 その後、最終的な値を含む詳細を非表示にするよう **NP**、(印刷なし) 形式が上書きされます。

> [!IMPORTANT]
> 行定義で **CAL** 形式コードを使用する場合、トランザクションの詳細にドリルダウンすることはできません。

強制の場合、フォーミュラは、次の形式を使用します : &lt;出荷先の列&gt;=&lt;列の生成&gt;。&lt;行コード&gt; カンマとスペースで行の追加の配置を分割します。 例を次に示します : D=C.190、E=C.100

## <a name="examples-of-advanced-formatting-options"></a>[高度な形式オプションの例]

次の例は、基本的なキャッシュ フロー レポート (例 1)、および統計レポート (例 2) を強制するための行定義および列定義の書式設定の方法を説明します。

### <a name="example-1-basic-forcing"></a>例1: [基本の強制]

次の表に、基本の強制を使用する行定義の例を表示します。

| 行コード |           説明            | 形式コード | 関連するフォーミュラ/行または単位 |        行のモディファイアー        | 財務分析コードへのリンク |
|----------|----------------------------------|-------------|-----------------------------|----------------------------|------------------------------|
| 100      | 期間の開始時の現金 (NP) |             |                             | 勘定のモディファイアー = \[/BB\] | + 区分 2 = \[1100\]         |
| 130      | 期間の開始時の現金      | CAL         | C=C.100、F=D.100             |                            |                              |
| 160      |                                  |             |                             |                            |                              |
| 190      |                                  |             |                             |                            |                              |

> [!NOTE]
> プレゼンテーション目的で、空の列は前の表から削除されました。[形式の上書き]、[通常残高]、[印刷コントロール]、[列の制限] 列は表示されません。

次の表に、行で基本の強制を使用する列定義の例を表示します。

|           書式設定             | A   | B    | 貸方        | 借方      | E      | F    |
|------------------------------|-----|------|----------|--------|--------|------|
| ヘッダー 1                     |     |      |          |        |        |      |
| ヘッダー 2                     | A   | B    | 貸方        | 借方      | E      | F    |
| ヘッダー 3                     |     |      |          |        |        |      |
| 列タイプ                  | ROW | DESC | FD       | FD     | FD     | CALC |
| 帳簿のコード / 属性カテゴリ |     |      | 実際   | 実際 | 実際 |      |
| 会計年度                  |     |      | 基準     | 基準   | 基準   |      |
| 期間                       |     |      | 基準     | 基準   | 基準   |      |
| [対象となる期間]              |     |      | 定期処理 | YTD/BB | YTD    |      |
| フォーミュラ                      |     |      |          |        |        | E-D  |
| 列の幅                 | 5   | 30   | 14       | 14     | 14     | 14   |

### <a name="example-2-statistical-reports"></a>例 2: [統計レポート]

次の表に、統計レポートに対して基本の強制を使用する行定義の例を表示します。

| 行コード | 説明               | コードの書式設定 | 関連するフォーミュラ/行または単位     | 形式の上書き      | 通常残高 | 財務分析コードへのリンク               |
|----------|---------------------------|-------------|---------------------------------|----------------------|----------------|--------------------------------------------|
| 50       | 統計情報   | REM         |                                 |                      |                |                                            |
| 100      | 人数 - 米国            | CAL         | 4                               | \#\#\#0.;($\#\#\#0.) |                |                                            |
| 115      | 人数 - 国際 | CAL         | 11                              | \#\#\#0.;($\#\#\#0.) |                |                                            |
| 130      |                           |             |                                 |                      |                |                                            |
| 190      | 米国の売上                  |             |                                 |                      | 貸方              | + 区分 2 = \[41\*\]、区分 3 = \[00\]    |
| 220      | 外国の売上       |             |                                 |                      | 貸方              | + 区分 2 = \[41\*\]、区分 3 = \[01:99\] |
| 250      |                           |             |                                 |                      |                |                                            |
| 280      |                           |             |                                 |                      |                |                                            |
| 310      | 米国の売上                  | CAL         | D=C.190、E=C.100、F= (C.100/C.190) |                      |                |                                            |
| 340      | 外国の売上       | CAL         | D=C.220、E=C115、F= (C.220/C.115)  |                      |                |                                            |

> [!NOTE]
> プレゼンテーション目的で、空の列は前の表から削除されました。[印刷コントロール]、[列の制限]、および [行のモディファイアー] 列は表示されません。

次の表に、統計レポートに対して基本の強制を使用する列定義の例を表示します。

|    書式設定                    | A   | B    | 貸方      | 借方            | E     | F            |
|------------------------------|-----|------|--------|--------------|-------|--------------|
| ヘッダー 1                     | A   | B    | 貸方      | 借方            | E     | F            |
| ヘッダー 2                     | -   | -    | YTD    | 年間の売上 | スタッフ | 個人別 $ |
| ヘッダー 3                     |     |      |        |              |       |              |
| 列タイプ                  | 行 | DESC | FD     | CALC         | CALC  | CALC         |
| 帳簿のコード / 属性カテゴリ |     |      | 実際 |              |       |              |
| 会計年度                  |     |      | 基準   |              |       |              |
| 期間                       |     |      | 基準   |              |       |              |
| 対象となる期間              |     |      | YTD    |              |       |              |
| フォーミュラ                      |     |      |        |              |       | E-D          |
| 列の幅                 | 5   | 30   | 14     | 14           | 14    | 14           |

## <a name="restricting-a-row-to-a-specific-reporting-unit"></a>特定のレポート単位に行を制限

レポートの行が特定のレポート単位に制限されている場合、指定されたレポート単位の関連データのみを表示し、レポート ツリーの他のレポート単位のデータは無視します。 たとえば、特定の部門の合計営業経費の詳細を提供する行を作成できます。 レポートにレポート ツリーと自然な勘定以上を含む行定義の両方が含まれるとき、レポートは重複したデータを含む場合があります。 たとえば、組織の 6 つの部門を一覧にするレポート ツリーがあり、行の勘定と部門の特定の組み合わせを一覧にする行定義があるとします。 レポートを生成すると、その部門がツリーにあるものと一致しない場合でも、勘定と部門の特定の組み合わせがレポート ツリーのすべてのレベルで印刷されます。 この動作は、通常レポート定義により排除されるものを、行が上書きするため発生します。 データの重複を回避できる一つの方法は、特定のレポート単位に行を制限することです。

> [!NOTE]
> 行が分析コードを含み、その行をレポートの子単位に制限する場合、行の金額はその子単位と親単位に含まれますが、重複は発生しません。

### <a name="restrict-a-row-to-a-reporting-unit"></a>[レポート単位に行を制限]

1. レポート デザイナーで **列定義** をクリックし、変更する行定義を選択します。
2. 適切な **関連するフォーミュラ/行または単位** セルをダブルクリックします。
3. **レポート ユニットの選択** ダイアログ ボックスの **レポート ツリー** フィールドで、レポート定義で割り当てられたツリーを選択します。
4. レポート単位を選択し、**OK** をクリックします。 制限は、行定義のセルに表示されます。
5. 制限された行の **財務分析コードへのリンク** 列のセルをダブルクリックし、財務データ システムへのリンクを入力します。

## <a name="selecting-print-control-in-a-row-definition"></a>行定義で印刷コントロールを選択

**印刷コントロール** セルを使用して、列ごとに印刷コントロール コードを指定できます。

### <a name="add-print-control-codes-to-a-report-row"></a>レポート行に印刷コントロール コードを追加

1. レポート デザイナーで、変更する列定義を開きます。
2. **印刷コントロール** セルをダブルクリックします。
3. 複数コードを選択するには、**印刷コントロール** ダイアログ ボックスで、印刷コントロール コードを選択、またはCtrl キーを押しながら選択します。 **印刷コントロール** セルに、直接印刷コントロール コードを入力することもできます。 コンマを使用して複数の印刷コントロール コードを区切ります。
4. 条件付印刷オプションを選択します。
5. **OK** をクリックします

### <a name="regular-print-control-codes"></a>通常の印刷コントロール コード

次の表に、行定義に対する通常の印刷コントロール コードを説明します。

| 印刷コントロール コード | 印刷コントロール コードの解釈         | 説明 |
|--------------------|--------------------------------------------------|-------------|
| NP                 | ノンプリンティング行                                 | 行の金額をレポートに印刷しないようにし、計算から金額を除外します。 計算にノン プリンティングの列を含めるには、計算式の列を直接参照してください。 たとえば、次の計算にノン プリンティング行 240 が含まれます : **230+240+250**。 ただし、次の計算にノン プリンティング行 240 は含まれません : **230:250**。 |
| CS                 | 通貨記号 ; この行で通貨の形式を使用 | すべての非割合の金額に通貨記号を含めます。 割合値は、通貨記号を受け入れません。 |
| XD                 | 勘定の詳細レポートの行を抑制            | 勘定の詳細レポートおよびトランザクションの詳細レポートの勘定の表示を抑制します。 この印刷コントロールは、行に勘定の詳細レポートまたはトランザクションの詳細レポートに記載できない複数の勘定が含まれる場合に便利です。 |
| X0                 | すべてゼロの場合行を抑制                        | 行のすべてのセルが空白であるか、ゼロである場合、レポートから行を除外します。 この印刷コントロールは、残高ゼロを抑制するオプションがレポート定義で選択されていない場合にのみ意味があります。 |
| B0                 | ゼロ列を空白のままにする                         | 金額ゼロを含む行の列を空のままにします。 |
| XR                 | ロールアップの抑制                                  | ロールアップを抑制します。 レポートがレポート ツリーを使用する場合、この行の金額は、後続の親ノードにロールアップされません。 |
| SR                 | 丸めの抑制                                | この行の金額が丸められることを防止します。 |
| XT                 | トランザクションの詳細レポートの行を抑制        | トランザクションの詳細レポートのトランザクションの表示を抑制します。 この印刷コントロールは、行にトランザクションの詳細レポートに記載できない複数の勘定が含まれる場合に便利です。 |

### <a name="conditional-print-control-codes"></a>条件付印刷コントロール コード

次の表で、行定義に対する条件付印刷コントロール コードについて説明します。

| 印刷コントロール コード | 説明                                  |
|--------------------|----------------------------------------------|
| (なし)             | 条件付印刷選択をクリアします。       |
| DR                 | この行の借方残高のみを印刷します。  |
| CR                 | この行の貸方残高のみを印刷します。 |

## <a name="column-restriction-cell-in-a-row-definition"></a>列定義の [列制限] セル

行定義の **列の制限** セルには複数の目的があります。 行タイプに応じて、**列の制限** セルを使用して、次の機能の 1 つを指定します :

- セルは特定の列に行金額の印刷を制限できます。 この機能は、表形式の貸借対照表を作成する場合に便利です。
- セルは、並べ替える金額の列を指定できます。

## <a name="using-a-calculation-formula-in-a-row-definition"></a>行定義の計算式を使用

行定義の計算式には **+**、**-**、**\**、*/** 演算子、 **IF/THEN/ELSE** ステートメントを含めることができます。 また、計算には、個々のセルと絶対金額 (フォーミュラに含まれる実際の数値) を含めることができます。 式には、最大 1,024 文字まで入力できます。 計算は、**財務分析コードへのリンク** (FD) タイプのセルを含む行には適用できません。 ただし、連続した行の計算を含め、その行の印刷を抑制し、計算行を合計することができます。

### <a name="operators-in-a-calculation-formula"></a>計算式の演算子

計算式は行の合計式より複雑な演算子を使用します。 ただし、金額を乗算 (\*) および除算 (/) には **\**と*/** 演算子を追加の演算子と組み合わせて使用できます。 行定義で列を使用する場合を除き、計算式で範囲または合計を使うには、行コードの前でアット マーク (@) を使用する必要があります。 たとえば、行 100 の金額を行 330 の金額に追加する場合、行の合計式 **100+330** または、計算式 **@100+@330** を使用できます。

> [!NOTE]
> 計算式で使用するすべての行コードの前にアット マーク (@) を使用する必要があります。 それ以外の場合、数値は絶対額として読み取られます。 たとえば、**@100+330** の式は行 100 の金額に USD 330 を追加します。 計算式の列を参照する場合に、アット マーク (@) は必要ではありません。

### <a name="create-a-calculation-formula"></a>計算式の作成

1. レポート デザイナーで **列定義** をクリックして変更する行定義を開きます。
2. **形式コード** セルをダブルクリックし、**CAL** を選択します 。
3. **関連するフォーミュラ / 行 / 単位** セルで、計算式を入力します。

### <a name="example-of-a-calculation-formula-for-specific-rows"></a>特定の行の計算式の例

この例では、計算式 **@100+@330** で、行 100 の金額が行 330 の金額に加算されます。 行の合計の式 **340+370** では行 370 の金額に 行 340 の金額を追加します。 (行 370 の金額が計算式の金額です。)

| [行コード] | 説明                 | [コードの書式設定] | [関連するフォーミュラ / 行 / 単位] | 印刷コントロール | 行の変更要因 | [財務分析コードへのリンク] |
|----------|-----------------------------|-------------|----------------------------|---------------|--------------|------------------------------|
| 340      | 期間の開始時の現金 |             |                            | NP            | BB           | +アカウント=\[1100:1110\]       |
| 370      | 年度の開始時の現金   | CAL         | @100+@330                  | NP            |              |                              |
| 400      | 期間の開始時の現金 | TOT         | 340+370                    |               |              |                              |

行定義の行に **CAL** の形式コードがあり、**関連するフォーミュラ / 行 /単位** セルに計算式を入力する場合、レポートに関連付けられた列と行の文字も入力する必要があります。 たとえば、**A.120** を入力して、列 A、行 120 を表します。 または、アット マーク (@) を使用して、すべての列を表すことができます。 たとえば **@120** を入力して、行 120 のすべての列を表します。 列の文字またはアット マーク (@) がない計算式は実数とみなされます。

> [!NOTE]
> ラベル行コードを使用して行を参照する場合、文字列とラベルの区切りとしてピリオド (.) を使用する必要があります (たとえば **A.GROSS\_MARGIN/A.SALES** など)。 アット マーク (@) を使用する場合、区切り記号は必要ではありません (たとえば、 **\@GROSS\_MARGIN/@SALES**)。

### <a name="example-of-a-calculation-formula-for-a-specific-column"></a>特定の列の計算式の例

この例で、計算式 **E=C.340** は、列 C のセル、行 340 の計算が列 E にのみ実行されることを意味します。

> [!NOTE]
> 計算式の列を参照する場合に、アット マーク (@) は必要ではありません。

| [行コード] | 説明                 | [コードの書式設定] | [関連するフォーミュラ / 行 / 単位] | 印刷コントロール | 行の変更要因 | [財務分析コードへのリンク] |
|----------|-----------------------------|-------------|----------------------------|---------------|--------------|------------------------------|
| 340      | 期間の開始時の現金 |             |                            | NP            | BB           | +アカウント=\[1100:1110\]       |
| 370      | [年の開始時の現金]   | CAL         | E=C.340                    | NP            |              |                              |
| 400      | 期間の開始時の現金 | TOT         | 340+370                    |               |              |                              |

### <a name="modifying-a-number-in-selected-columns"></a>選択した列の数値の変更

特定の行の 1 つの列の数値または計算を変更して、かつレポートの他の列に影響を及ぼしたくない場合、行定義の **形式コード** で **CAL** (計算) を指定できます。

- すべてのレポート **FD** 列で計算を実行するには、列の割り当てを入力しないでください。
- 特定の列に式を制限するには、列の文字、等号 (**=**)、および式を入力します。
- 複数の列を指定できます。 特定の列の配置を含むアット マーク (@) を使用すると、アット マーク (@) は行に関連付けられます。
- 1 つの行に複数の列の式を入力できます。 コンマを使用してフォーミュラを区切ります。

### <a name="calculation-examples"></a>計算の例

| 計算            | 作成されたアクション                                                                                                   |
|------------------------|--------------------------------------------------------------------------------------------------------------------------|
| @130\*.75              | すべての列で、行 130 の値に 0.75 が乗算されます。 結果は、すべての列で現在の行に書き入れられます。 |
| B=@130\*.75            | 同じ計算は、列 B でのみ実行されます。                                                                      |
| A,B,C= (@100/@130) \*.75 | A=(A.100/A.130)\*.75 B=(B.100/B.130)\*.75 C=(C.100/C.130)\*.75                                                           |

### <a name="ifthenelse-statements-in-a-row-definition"></a>行定義の [IF/THEN/ELSE] 明細書

**IF/THEN/ELSE** 明細書は、有効な計算に追加され、**CAL** 形式で使用できます。 **関連するフォーミュラ / 行 / 単位** 列のセルに **IF/THEN/ELSE** 計算式を入力します。 **IF/THEN/ELSE** 計算式は次の形式を使用します : IF &lt;true/false ステートメント&gt; THEN &lt;式&gt; ELSE &lt;式&gt; ステートメントの **ELSE &lt;式&gt;** の部分はオプションです。

#### <a name="if-statements"></a>[IF] 明細書

**IF** 明細書に続く明細書は true または false として評価できる明細書です。 **IF** 明細書に続く明細書は簡単な評価を含む場合、または複数の式を含めることができる複雑な明細書である場合があります。 次にいくつか例を挙げます。

- **IF A.200&gt;0** (簡単な評価)
- **IF A.200&gt;0 AND A.200&lt;10,000** (複雑なステートメント)
- **IF A.200&gt;10000 OR ((A.340/B.1200)\*2 &lt;1200)** (複数の式を含む複雑なステートメント)

**IF** 明細書の **期間** は、レポートの期間数を表すものです。 この用語は、通常は年間累計の平均を計算するために使用されます。 たとえば、7 YTD 期間のレポートを実行すると、**B.150/Periods** 明細書は、列 B の行 150 の値を 7 で除算することを意味します。

#### <a name="then-and-else-formulas"></a>[THEN] および [ELSE] フォーミュラ

**THEN** および **ELSE** 式は、非常に簡単な値の割り当てから複雑な式までの有効な計算の場合があります。 たとえば、**IF A.200&gt;0 THEN A=B.200** ステートメントは、「行 200 の列 A のセルの値が 0 (ゼロ) 以上の場合、行 200 の列 B のセルの値を現在の行の列 A に挿入します」という意味です。 前の **IF/THEN** 明細書は、現在の行の 1 つの列に値を挿入します。 ただし、true/false 評価またはすべての列を表す式で、アット マーク (@) を使用できます。 次のセクションで説明されている他の例を次に示します :

- **IF A.200 &gt;0 THEN B.200** : セル A.200 の値がプラスの場合、セル B.200 の値は現在の行のすべての列に入力されます。
- **IF A.200 &gt;0 THEN @200**: セル A.200 の値がプラスの場合、行 200 の各列の値は現在の行の対応する列に入力されます。
- **IF @200 &gt;0 THEN @200**: 現在の列の行 200 の値がプラスの場合、行 200 の値は現在の行の同じ列に入力されます。

### <a name="restricting-a-calculation-to-a-reporting-unit-in-a-row-definition"></a>行定義のレポート単位に計算を制限

結果の金額が上位レベルの単位までロールアップしないようにレポート ツリーの単一のレポート単位に計算を制限するには、行定義の **関連する式/行/単位** セルの **\@Unit** コードを使用できます。 **\@Unit** コードはレポート ツリー **単位名** の列 B に一覧表示されます。 **\@Unit** コードを使用する場合、値はロールアップしませんが、計算はレポート ツリーのすべてのレベルで評価されます。

> [!NOTE]
> この機能を使用するには、レポート ツリーが行定義と関連付けられている必要があります。

計算行は計算行または財務データ行を参照できます。 計算は、行定義の **関連するフォーミュラ / 行 / 単位** のセルおよび財務データ タイプ制限に記録されます。 計算は、**IF @Unit** 構成で始まる条件付計算を使用する必要があります。 次に例を示します : [IF @Unit(SALES) THEN @100 ELSE 0] この計算は、レポートのすべての列の行 100 の金額を含みます。ただし販売単位のみです。 複数の単位が [販売] という名前の場合は、金額は、各単位に表示されます。 また、行 100 は、財務データ行の場合があり、ノンプリンティングとして定義できます。 この場合、ツリーのすべての単位に金額が表示されることが阻止されます。 列 H など、レポートのその列のみに値を印刷するよう列制限を使用することにより、レポートの単一の列に金額を制限することもできます。 明細書 **IF** 明細書に **OR** の組み合わせを含める ことができます。 例を次に示します : [IF @Unit(SALES) OR @Unit(SALESWEST) THEN 5 ELSE @100] 次の方法の 1 つで、計算タイプの制限に単位を指定できます :

- 一致する単位を含むする単位の名前を入力します。 たとえば **IF @Unit(SALES)** は、レポート ツリーに複数の販売単位である場合、[SALES] という名前のすべての単位の計算を有効にします。
- 特定の会社の特定の単位に計算を制限するには、会社および単位の名前を入力します。 たとえば、**IF @Unit(ACME:SALES)** と入力して、[ACME] 会社の [販売] 単位に計算を制限します。
- レポート ツリーから完全な階層コードを入力して、特定の単位に計算を制限します。 たとえば、**@UNIT (SUMMARY^ACME^WEST COAST^SALES)** と入力します。

> [!NOTE]
> 完全な階層コードを検索するには、レポート ツリー定義を右クリックし、**レポート ユニット識別子 (H-code) のコピー** を選択します。

#### <a name="restrict-a-calculation-to-a-reporting-unit"></a>レポート ユニットに計算を制限

1. レポート デザイナーで、**行の定義** をクリックし、変更する行定義を開きます。
2. **形式コード** セルをダブルクリックし、**CAL** を選択します 。
3. **関連するフォーミュラ / 行 / 単位** セルをクリックし、**IF @Unit** 構造で始まる条件付計算を入力します。

### <a name="ifthenelse-statements-in-a-column-definition"></a>列定義の [IF/THEN/ELSE] 明細書

**IF/THEN/ELSE** 明細書は、どの計算も他の列の結果に依存させることができます。 他の列を参照することはできますが、**IF** 明細書のレポート セルは参照できません。 すべての計算を列全体に適用する必要があります。 たとえば、**IF B&gt;100 THEN B ELSE C\*1.25** ステートメントは、列 B の金額が 100 より多い場合、列 B の値を **CALC** 列に挿入します。 列 B の金額が 100 を超えない場合は、列 C の値を 1.25 で乗算し、結果を **CALC** 列に入力します」 という意味です。 常に true または false として評価できるロジック明細書を使用して、**IF** 明細書に従います。 **THEN** および **ELSE** 明細書の両方に使用するフォーミュラは、任意の数の列の参照を含み、また、これらのフォーミュラを必要に応じて複雑にすることができます。

> [!NOTE]
> 他の列には計算の結果を入力できません。 結果は式を含む列にする必要があります。

#### <a name="use-single-quotes-and-an-ampersand-for-dimension-values-in-a-row-column-or-tree"></a>行、列、またはツリーの分析コード値には単一引用符およびアンパサンドを使用します。

アンパサンドを含む分析コード値を使用してレポートを設計できます。

任意の **財務分析コードにリンク** のフィールド内に、**'P&L'** のような値を入力します。 分析コード値の両側に単一引用符 (' ') を含めることは、(&) アンパサンド記号を含めるなど、リテラル値を使用していることを示します。


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]