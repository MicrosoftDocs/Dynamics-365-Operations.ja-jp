---
title: 1 つのモデル ルートに対する複数の派生マッピングの管理
description: このトピックでは、1 つのモデル ルートに対して構成された複数の派生マッピングを管理する方法について説明します。
author: NickSelin
manager: AnnBe
ms.date: 01/04/2021
ms.topic: business-process
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, ERModelMappingTable
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: bb4fcda42361b0f14e37027d21739dfc42b44cb1
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/09/2021
ms.locfileid: "5565494"
---
# <a name="manage-several-derived-mappings-for-a-single-model-root"></a><span data-ttu-id="9bb76-103">1 つのモデル ルートに対する複数の派生マッピングの管理</span><span class="sxs-lookup"><span data-stu-id="9bb76-103">Manage several derived mappings for a single model root</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="9bb76-104">[電子申告 (ER)](general-electronic-reporting.md) データ [モデル](general-electronic-reporting.md#data-model-and-model-mapping-components) コンポーネントは、発信ドキュメントを生成するデータ ソースとして、すべての構成済 ER [形式](general-electronic-reporting.md#FormatComponentOutbound) コンポーネントで使用されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-104">An [Electronic reporting (ER)](general-electronic-reporting.md) data [model](general-electronic-reporting.md#data-model-and-model-mapping-components) component is used in every configured ER [format](general-electronic-reporting.md#FormatComponentOutbound) component as the data source to generate outbound documents.</span></span> <span data-ttu-id="9bb76-105">1 つのビジネス ドメインを記述するには、多数のルート定義を持つデータ モデル コンポーネントを構成します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-105">To describe a single business domain, configure a data model component that has many root definitions.</span></span> 

<span data-ttu-id="9bb76-106">すべてのルート定義では、特定のレポート目的に最も適した方法で、そのドメインのデータを表すことができます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-106">Every root definition lets you represent data of that domain in the way that is best suited to specific reporting purposes.</span></span> <span data-ttu-id="9bb76-107">すべてのルート定義に対して、ER [モデル マッピング](general-electronic-reporting.md#data-model-and-model-mapping-components) コンポーネントを、データ モデルの Microsoft Dynamics 365 Finance 固有の実装として構成できます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-107">For every root definition, you can configure an ER [model mapping](general-electronic-reporting.md#data-model-and-model-mapping-components) component as the Microsoft Dynamics 365 Finance–specific implementation of your data model.</span></span> <span data-ttu-id="9bb76-108">この方法で、実行時にデータ モデルがどのように入力されるのかについて説明します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-108">In this way, you describe how your data model will be filled in at runtime.</span></span>

<span data-ttu-id="9bb76-109">ER モデル マッピング コンポーネントは、ER データ モデル [構成](general-electronic-reporting.md#Configuration) および ER モデル マッピング構成内に配置することができます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-109">ER model mapping components can reside in ER data model [configurations](general-electronic-reporting.md#Configuration) and ER model mapping configurations.</span></span> <span data-ttu-id="9bb76-110">1 つの ER 構成には、多数のマッピング コンポーネントを含めることができ、それぞれが 1 つのルート定義用に構成されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-110">A single ER configuration can contain many mapping components, each of which is configured for a single root definition.</span></span> <span data-ttu-id="9bb76-111">また、1 つの ER 構成には、1 つのルート定義用に構成されたマッピング コンポーネントを 1 つだけ含めることができます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-111">Alternatively, a single ER configuration can contain just one mapping component that is configured for a single root definition.</span></span>

<span data-ttu-id="9bb76-112">多くの構成プロバイダーは、同じ ER データ モデルに対して ER モデル マッピング構成を提供する場合があります。</span><span class="sxs-lookup"><span data-stu-id="9bb76-112">Many configuration providers might offer ER model mapping configurations for the same ER data model.</span></span> <span data-ttu-id="9bb76-113">これらのモデル マッピング構成には、さまざまなルート定義のマッピング コンポーネントが含まれる場合があります。</span><span class="sxs-lookup"><span data-stu-id="9bb76-113">Those model mapping configurations might contain mapping components for different root definitions.</span></span> <span data-ttu-id="9bb76-114">1 つの [プロバイダー](general-electronic-reporting.md#Provider) が提供する 1 つのルート定義に対してモデル マッピングを使用し、別のプロバイダーが提供する別のルート定義にモデル マッピングを使用できます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-114">You might use a model mapping for one root definition that is offered by one [provider](general-electronic-reporting.md#Provider) and use a model mapping for another root definition that is offered by another provider.</span></span>

<span data-ttu-id="9bb76-115">このトピックの手順では、ER データ モデルが同じルート定義に対して構成された異なるモデル マッピング構成を含む場合に、ERデータ モデルの複数の ER モデル マッピング構成を管理する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-115">The procedures in this topic explain how to manage multiple ER model mapping configurations of an ER data model when they contain different model mapping components configured for the same root definition.</span></span> 

<span data-ttu-id="9bb76-116">このトピックの手順を実行するには、システム管理者ロールまたは電子申告開発者ロールに割り当てられている必要があります。</span><span class="sxs-lookup"><span data-stu-id="9bb76-116">To complete the procedures in this topic, you must be assigned to the System administrator or Electronic reporting developer role.</span></span>

<span data-ttu-id="9bb76-117">次の手順はすべて、USMF 会社で実行できます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-117">All the following procedures can be done in the USMF company.</span></span> <span data-ttu-id="9bb76-118">コーディングは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="9bb76-118">No coding is required.</span></span>

## <a name="configure-the-er-framework"></a><span data-ttu-id="9bb76-119"> ER フレームワークを構成する</span><span class="sxs-lookup"><span data-stu-id="9bb76-119">Configure the ER framework</span></span>

<span data-ttu-id="9bb76-120">電子申告開発者ロールのユーザーとして、ER フレームワークを使用する前に、ER パラメーターの [最小セットを構成](er-quick-start2-customize-report.md#ConfigureFramework) して、ビジネス ドキュメントを生成します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-120">As a user in the Electronic reporting developer role, [configure the minimal set](er-quick-start2-customize-report.md#ConfigureFramework) of ER parameters before you use the ER framework to generate business documents.</span></span>

## <a name="import-the-standard-er-format-configurations"></a><span data-ttu-id="9bb76-121"> 標準 ER 形式コンフィギュレーションをインポート</span><span class="sxs-lookup"><span data-stu-id="9bb76-121">Import the standard ER format configurations</span></span>

<span data-ttu-id="9bb76-122">Finance の現在のインスタンスに標準的な ER 構成を追加するには、そのインスタンスに構成された ER リポジトリからインポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="9bb76-122">To add the standard ER configurations to your current instance of Finance, you must import them from the ER repository that was configured for that instance.</span></span> <span data-ttu-id="9bb76-123">[ER 構成をコンフィギュレーション サービスのグローバル リポジトリからダウンロードする](er-download-configurations-global-repo.md) の手順に従って、次の ER 形式の構成をインポートします:</span><span class="sxs-lookup"><span data-stu-id="9bb76-123">Follow the steps in [Download ER configurations from the Global repository of Configuration service](er-download-configurations-global-repo.md) to import the following ER format configurations:</span></span>

- <span data-ttu-id="9bb76-124">**自由書式の請求書 (Excel)**、バージョン 220.106</span><span class="sxs-lookup"><span data-stu-id="9bb76-124">**Free text invoice (Excel)**, version 220.106</span></span>
- <span data-ttu-id="9bb76-125">**プロジェクト請求書 (Excel)**、バージョン 226.27</span><span class="sxs-lookup"><span data-stu-id="9bb76-125">**Project invoice (Excel)**, version 226.27</span></span>

## <a name="review-the-imported-er-configurations"></a><span data-ttu-id="9bb76-126"> インポートされた ER 構成のレビュー</span><span class="sxs-lookup"><span data-stu-id="9bb76-126">Review the imported ER configurations</span></span>

1. <span data-ttu-id="9bb76-127">**組織管理** \> **ワークスペース** \> **電子申告** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-127">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="9bb76-128">**ローカライズ構成** ページの、**構成** セクションで、**レポート構成** タイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-128">On the **Localization configurations** page, in the **Configurations** section, select the **Reporting configurations** tile.</span></span>
3. <span data-ttu-id="9bb76-129">**構成** ページにある左ペインの構成ツリーで、**請求書モデル** を展開します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-129">On the **Configurations** page, in the configuration tree in the left pane, expand **Invoice model**.</span></span>

    ![構成ページでインポートされた構成を確認する](./media/er-multiple-model-mappings-image1.png)

4. <span data-ttu-id="9bb76-131">**自由書式の請求書 (Excel)** 形式を確認する:</span><span class="sxs-lookup"><span data-stu-id="9bb76-131">Review the **Free text invoice (Excel)** format:</span></span>

    1. <span data-ttu-id="9bb76-132">左ペインの構成ツリーで、**自由書式の請求書 (Excel)** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-132">In the configuration tree in the left pane, select **Free text invoice (Excel)**.</span></span>
    2. <span data-ttu-id="9bb76-133">アクション ウィンドウで、**デザイナー** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-133">On the Action Pane, select **Designer**.</span></span>
    3. <span data-ttu-id="9bb76-134">**形式デザイナー** ページの **マッピング** タブにあるデータ ソースの一覧で、**モデル** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-134">On the **Format designer** page, on the **Mapping** tab, in the data sources list, select **Model**.</span></span>
    4. <span data-ttu-id="9bb76-135">**表示** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-135">Select **View**.</span></span>
    
       <span data-ttu-id="9bb76-136">現在の ER 形式は、**請求書モデル** の **InvoiceCustomer** ルート定義を使用するように構成されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-136">Thecurrent ER format is configured to use the **InvoiceCustomer** root definition of **Invoice model**.</span></span> <span data-ttu-id="9bb76-137">この形式を実行して **モデル** データ ソースが呼び出される場合、**InvoiceCustomer** ルート定義に対して構成されたモデル マッピングを使用して、アプリケーション データにアクセスし、データ モデルに入力します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-137">When this format is run, and the **Model** data source is called, the model mapping that is configured for the **InvoiceCustomer** root definition is used to access application data and fill in the data model.</span></span>

        ![形式デザイナー ページでモデル データ ソースを確認する](./media/er-multiple-model-mappings-image2.png)

    6. <span data-ttu-id="9bb76-139">**形式デザイナー** ページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-139">Close the **Format designer** page.</span></span>

5. <span data-ttu-id="9bb76-140">**請求書モデル マッピング** 構成の内容を確認します:</span><span class="sxs-lookup"><span data-stu-id="9bb76-140">Review the content of the **Invoice model mapping** configuration:</span></span>

    1. <span data-ttu-id="9bb76-141">左ペインの構成ツリーで、**請求書モデル マッピング** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-141">In the configuration tree in the left pane, select **Invoice model mapping**.</span></span>
    2. <span data-ttu-id="9bb76-142">アクション ウィンドウで、**デザイナー** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-142">On the Action Pane, select **Designer**.</span></span>
    3. <span data-ttu-id="9bb76-143">**モデルからデータ ソースへのマッピング** ページで、現在の ER モデル マッピング構成に、複数のモデル マッピング コンポーネントが含まれていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-143">On the **Model to datasource mapping** page, notice that the current ER model mapping configuration contains several model mapping components:</span></span>

        + <span data-ttu-id="9bb76-144">**顧客請求書** モデル マッピングは、**請求書モデル** の **InvoiceCustomer** ルート定義に対して構成されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-144">The **Customer Invoice** model mapping is configured for the **InvoiceCustomer** root definition of **Invoice model**.</span></span> <span data-ttu-id="9bb76-145">したがって、**自由書式の請求書 (Excel)** ER 形式を実行するときに、この ER 構成の **顧客請求書** モデル マッピングを選択して、アプリケーション データにアクセスし、データ モデルに入力することができます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-145">Therefore, when the **Free text invoice (Excel)** ER format is run, the **Customer Invoice** model mapping of this ER configuration can be chosen to access application data and fill in the data model.</span></span>
        + <span data-ttu-id="9bb76-146">**プロジェクト請求書** モデル マッピングは、**請求書モデル** の **InvoiceProject** ルート定義に対して構成されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-146">The **Project Invoice** model mapping is configured for the **InvoiceProject** root definition of **Invoice model**.</span></span> <span data-ttu-id="9bb76-147">したがって、**プロジェクト請求書 (Excel)** ER 形式を実行するときに、この ER 構成の **プロジェクト請求書** モデル マッピングを選択して、アプリケーション データにアクセスし、データ モデルに入力することができます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-147">Therefore, when the **Project invoice (Excel)** ER format is run, the **Project Invoice** model mapping of this ER configuration can be chosen to access application data and fill in the data model.</span></span>

        ![モデルからデータ ソースへのマッピング ページでの請求書 モデル マッピング](./media/er-multiple-model-mappings-image3.png)

    4. <span data-ttu-id="9bb76-149">**モデルからデータ ソースへのマッピング** ページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-149">Close the **Model to datasource mapping** page.</span></span>
    5. <span data-ttu-id="9bb76-150">**バージョン** クイックタブで、**削除** を選択して、この ER 構成のバージョン 240.175 より後のバージョンをすべて削除します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-150">On the **Versions** FastTab, select **Delete** to delete all versions of this ER configuration that are later than version 240.175.</span></span>

6. <span data-ttu-id="9bb76-151">**プロジェクト請求書モデル マッピング (RDP)** 構成の内容を確認します:</span><span class="sxs-lookup"><span data-stu-id="9bb76-151">Review the content of the **Project invoice model mapping (RDP)** configuration:</span></span>

    1. <span data-ttu-id="9bb76-152">左ペインの構成ツリーで、**プロジェクト請求書モデル マッピング (RDP)** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-152">In the configuration tree in the left pane, select **Project invoice model mapping (RDP)**.</span></span>
    2. <span data-ttu-id="9bb76-153">アクション ウィンドウで、**デザイナー** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-153">On the Action Pane, select **Designer**.</span></span>
    3. <span data-ttu-id="9bb76-154">**モデルからデータ ソースへのマッピング** ページで、現在の ER モデル マッピング構成に **InvoiceProject** モデル マッピングが含まれており、このモデル マッピングが **請求書モデル** の **InvoiceProject** ルート定義に対して構成されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-154">On the **Model to datasource mapping** page, notice that the current ER model mapping configuration contains the **InvoiceProject** model mapping, and that this model mapping is configured for the **InvoiceProject** root definition of **Invoice model**.</span></span> <span data-ttu-id="9bb76-155">**プロジェクト請求書 (Excel)** ER 形式を実行するときに、この ER 構成の **InvoiceProject** モデル マッピングを選択して、アプリケーション データにアクセスし、データ モデルに入力します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-155">When the **Project invoice (Excel)** ER format is run, select the **InvoiceProject** model mapping of this ER configuration to access application data and fill in the data model.</span></span>

        ![モデルからデータ ソースへのマッピング ページでのプロジェクト請求書モデル マッピング](./media/er-multiple-model-mappings-image4.png)

    4. <span data-ttu-id="9bb76-157">**モデルからデータ ソースへのマッピング** ページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-157">Close the **Model to datasource mapping** page.</span></span>
    5. <span data-ttu-id="9bb76-158">**バージョン** クイックタブで、**削除** を選択して、この ER 構成のバージョン 226.35 より後のバージョンをすべて削除します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-158">On the **Versions** FastTab, select **Delete** to delete all versions of this ER configuration that are later than version 226.35.</span></span>

## <a name="customize-the-imported-er-configurations"></a><span data-ttu-id="9bb76-159">インポートされた ER 構成のカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="9bb76-159">Customize the imported ER configurations</span></span>

<span data-ttu-id="9bb76-160">このセクションでは、Microsoft によって提供されるモデル マッピングを [カスタマイズ](er-quick-start3-customize-report.md#customize-the-model-mapping-configuration) する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-160">This section explains how to [customize](er-quick-start3-customize-report.md#customize-the-model-mapping-configuration) the model mappings that are provided by Microsoft.</span></span> <span data-ttu-id="9bb76-161">たとえば、カスタム ロジックを実装したり、不足しているバインドを追加するために、カスタマイズが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="9bb76-161">For example, customization might be required to implement your custom logic or add missing bindings.</span></span>

### <a name="customize-the-invoice-model-mapping-configuration"></a><span data-ttu-id="9bb76-162">請求書モデル マッピング構成のカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="9bb76-162">Customize the Invoice model mapping configuration</span></span>

1. <span data-ttu-id="9bb76-163">**構成** ページにある左ペインの構成ツリーで、**請求書モデル マッピング** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-163">On the **Configurations** page, in the configuration tree in the left pane, select **Invoice model mapping**.</span></span>
2. <span data-ttu-id="9bb76-164">アクション ウィンドウで、**構成の作成** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-164">On the Action Pane, select **Create configuration**.</span></span>
3. <span data-ttu-id="9bb76-165">**構成の作成** ドロップダウン ダイアログ ボックスの **新規** フィールドで、**名前から取得: 請求書モデル マッピング、Microsoft** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-165">In the **Create configuration** drop-down dialog box, in the **New** field, select **Derive from Name: Invoice model mapping, Microsoft**.</span></span>
4. <span data-ttu-id="9bb76-166">**名前** フィールドに、**請求書モデル マッピング Litware** と入力します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-166">In the **Name** field, enter **Invoice model mapping Litware**.</span></span>
5. <span data-ttu-id="9bb76-167">**構成の作成** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-167">Select **Create configuration**.</span></span>
6. <span data-ttu-id="9bb76-168">派生マッピングの [下書き](general-electronic-reporting.md#component-versioning) バージョンを、実行時に使用可能として [マーク](er-quick-start2-customize-report.md#MarkFormatRunnable) します:</span><span class="sxs-lookup"><span data-stu-id="9bb76-168">[Mark](er-quick-start2-customize-report.md#MarkFormatRunnable) the [draft](general-electronic-reporting.md#component-versioning) version of the derived mapping as available for use at runtime:</span></span>

    1. <span data-ttu-id="9bb76-169">アクション ペインの **構成** タブにある **詳細設定** グループで、**ユーザー パラメーター** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-169">On the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
    2. <span data-ttu-id="9bb76-170">**ユーザー パラメーター** ダイアログ ボックスで、**実行設定** オプションを **はい** に設定し、**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-170">In the **User parameters** dialog box, set the **Run settings** option to **Yes**, and then select **OK**.</span></span>
    3. <span data-ttu-id="9bb76-171">**編集** を選択し、必要に応じてページを編集可能にします。</span><span class="sxs-lookup"><span data-stu-id="9bb76-171">Select **Edit** to make the page editable, as required.</span></span>
    4. <span data-ttu-id="9bb76-172">構成ツリーで現在選択されている **請求書モデル マッピング Litware** 構成について、**ドラフトの実行** オプションを **はい** に設定します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-172">For the **Invoice model mapping Litware** configuration that is currently selected in the configuration tree, set the **Run Draft** option to **Yes**.</span></span>

7. <span data-ttu-id="9bb76-173">アクション ペインで、**デザイナー** を選択して、この構成のモデル マッピングを確認します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-173">On the Action Pane, select **Designer** to review the model mappings of this configuration.</span></span>

    ![モデルからデータ ソースへのマッピング ページで請求書モデル マッピングを確認する](./media/er-multiple-model-mappings-image5.png)

    > [!TIP]
    > <span data-ttu-id="9bb76-175">これで、デザイナー内でこの ER 構成の ER モデル マッピング コンポーネントを開き、カスタム ロジックを構成できます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-175">You can now open any of the ER model mapping components of this ER configuration in the designer to configure your custom logic.</span></span> <span data-ttu-id="9bb76-176">詳細については、[モデル マッピングの構成をカスタマイズする](er-quick-start3-customize-report.md#customize-the-model-mapping-configuration) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9bb76-176">For more information, see [Customize the model mapping configuration](er-quick-start3-customize-report.md#customize-the-model-mapping-configuration).</span></span>

8. <span data-ttu-id="9bb76-177">**モデルからデータ ソースへのマッピング** ページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-177">Close the **Model to datasource mapping** page.</span></span>

<span data-ttu-id="9bb76-178">これで、**請求書モデル マッピング** と **請求書モデル マッピング Litware** 構成が作成され、各構成には、**InvoiceCustomer** ルート定義用に構成されたモデル マッピングがあります。</span><span class="sxs-lookup"><span data-stu-id="9bb76-178">You now have **Invoice model mapping** and **Invoice model mapping Litware** configurations, each of which has a model mapping that is configured for the **InvoiceCustomer** root definition.</span></span> <span data-ttu-id="9bb76-179">**InvoiceCustomer** ルート定義を持つモデル データ ソースを含む **自由書式の請求書 (Excel)** 形式など、任意の ER 形式で使用される既定のモデル マッピングとして、モデル マッピングのいずれかを明示的に割り当てます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-179">Explicitly assign one of the model mappings as the default model mapping that is used by any of the ER formats, such as the **Free text invoice (Excel)** format that contains a model data source that has the **InvoiceCustomer** root definition.</span></span> <span data-ttu-id="9bb76-180">それ以外の場合、ER 形式のいずれかを実行、編集、または検証すると、次の例外がスローされ、既定のモデル マッピングが明示的に割り当てられていないことが通知されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-180">Otherwise, when you run, edit, or validate one of the ER formats, the following exception is thrown to notify you that no default model mapping has been explicitly assigned:</span></span>
 
> <span data-ttu-id="9bb76-181">構成 \<configuration names separated by commas\> 内の '\<model name\> (\<root descriptor\>)' データ モデルに複数のモデル マッピングが存在します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-181">More than one model mapping exists for the '\<model name\> (\<root descriptor\>)' data model in the configurations \<configuration names separated by commas\>.</span></span> <span data-ttu-id="9bb76-182">構成の 1 つを既定として設定します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-182">Set one of the configurations as default.</span></span>

![構成ページで編集用の形式を開く](./media/er-multiple-model-mappings-image6.gif)

### <a name="customize-the-project-invoice-model-mapping-rdp-configuration"></a><span data-ttu-id="9bb76-184">プロジェクト請求書モデル マッピング (RDP) 構成のカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="9bb76-184">Customize the Project invoice model mapping (RDP) configuration</span></span>

1. <span data-ttu-id="9bb76-185">**構成** ページにある左ペインの構成ツリーで、**プロジェクト請求書モデル マッピング (RDP)** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-185">On the **Configurations** page, in the configuration tree in the left pane, select **Project invoice model mapping (RDP)**.</span></span>
2. <span data-ttu-id="9bb76-186">アクション ウィンドウで、**構成の作成** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-186">On the Action Pane, select **Create configuration**.</span></span>
3. <span data-ttu-id="9bb76-187">**構成の作成** ダイアログ ボックスの **新規** フィールドで、**名前から取得: プロジェクト請求書モデル マッピング (RDP)、Microsoft** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-187">In the **Create configuration** dialog box, in the **New** field, select **Derive from Name: Project invoice model mapping (RDP), Microsoft**.</span></span>
4. <span data-ttu-id="9bb76-188">**名前** フィールドに、**プロジェクト請求書モデル マッピング Litware** と入力します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-188">In the **Name** field, enter **Project invoice model mapping Litware**.</span></span>
5. <span data-ttu-id="9bb76-189">**構成の作成** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-189">Select **Create configuration**.</span></span>
6. <span data-ttu-id="9bb76-190">構成ツリーで現在選択されている **プロジェクト請求書モデル マッピング Litware** 構成について、**ドラフトの実行** オプションを **はい** に設定します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-190">For the **Project invoice model mapping Litware** configuration that is currently selected in the configuration tree, set the **Run Draft** option to **Yes**.</span></span>
7. <span data-ttu-id="9bb76-191">アクション ペインで、**デザイナー** を選択して、この構成のモデル マッピングを確認します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-191">On the Action Pane, select **Designer** to review the model mappings of this configuration.</span></span>

    ![モデルからデータ ソースへのマッピング ページでカスタマイズされたプロジェクト請求書モデル マッピングを確認する](./media/er-multiple-model-mappings-image7.png)

8. <span data-ttu-id="9bb76-193">**モデルからデータ ソースへのマッピング** ページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-193">Close the **Model to datasource mapping** page.</span></span>

<span data-ttu-id="9bb76-194">これで、**請求書モデル マッピング**、**プロジェクト請求書モデル マッピング (RDP)** および **プロジェクト請求書モデル マッピング、Litware** の構成ができました。</span><span class="sxs-lookup"><span data-stu-id="9bb76-194">You now have **Invoice model mapping**, **Project invoice model mapping (RDP)**, and **Project invoice model mapping Litware** configurations.</span></span> <span data-ttu-id="9bb76-195">これらの各構成には、**InvoiceProject** ルート定義用に構成されたモデル マッピングがあります。</span><span class="sxs-lookup"><span data-stu-id="9bb76-195">Each of these configurations has a model mapping configured for the **InvoiceProject** root definition.</span></span> <span data-ttu-id="9bb76-196">モデル マッピングの 1 つを、任意の ER 形式で使用される既定のモデル マッピングとして明示的に割り当てます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-196">Explicitly assign one of the model mappings as the default model mapping that is used by any of the ER formats.</span></span> <span data-ttu-id="9bb76-197">たとえば、**InvoiceProject** ルート定義を持つモデル データ ソースを含む **プロジェクト請求書 (Excel)** 形式を使用します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-197">For example, use the **Project invoice (Excel)** format that contains a model data source that has the **InvoiceProject** root definition.</span></span> <span data-ttu-id="9bb76-198">それ以外の場合、ER 形式のいずれかを実行または編集すると、例外がスローされ、既定のモデル マッピングが明示的に割り当てられていないことが通知されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-198">Otherwise, when you run or edit one of the ER formats, an exception is thrown to notify you that no default model mapping has been explicitly assigned.</span></span>

## <a name="select-the-derived-invoice-model-mapping-litware-configuration-as-the-configuration-that-contains-default-model-mappings"></a><span data-ttu-id="9bb76-199">既定のモデル マッピングを含む構成として、派生した請求書モデル マッピング Litware 構成を選択します</span><span class="sxs-lookup"><span data-stu-id="9bb76-199">Select the derived Invoice model mapping Litware configuration as the configuration that contains default model mappings</span></span>

1. <span data-ttu-id="9bb76-200">**構成** ページにある左ペインの構成ツリーで、**請求書モデル マッピング Litware** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-200">On the **Configurations** page, in the configuration tree in the left pane, select **Invoice model mapping Litware**.</span></span>
2. <span data-ttu-id="9bb76-201">**モデル マッピングの既定値** オプションを **はい** に設定します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-201">Set the **Default for model mapping** option to **Yes**.</span></span>

    ![構成ページでモデル マッピングを既定のモデル マッピングとして設定する](./media/er-multiple-model-mappings-image8.png)

    <span data-ttu-id="9bb76-203">この設定により、**顧客請求書コピー** モデル マッピングが、**自由書式の請求書 (Excel)** を実行するとき、または編集あるいは検証するときに使用されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-203">Because of this setting, the **Customer Invoice Copy** model mapping is used when you run the **Free text invoice (Excel)**, or when you edit or validate it.</span></span> <span data-ttu-id="9bb76-204">**請求書モデル マッピング** 構成からの **顧客請求書** モデル マッピングは無視されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-204">The **Customer invoice** model mapping from the **Invoice model mapping** configuration is ignored.</span></span>

    <span data-ttu-id="9bb76-205">これで、形式デザイナーで確認のために **自由書式の請求書 (Excel)** を開くことができます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-205">You can now open the **Free text invoice (Excel)** format for review in the format designer.</span></span>

## <a name="select-the-derived-project-invoice-model-mapping-litware-configuration-as-the-configuration-that-contains-default-model-mappings"></a><span data-ttu-id="9bb76-206">既定のモデル マッピングを含む構成として、派生したプロジェクト請求書モデル マッピング Litware 構成を選択します</span><span class="sxs-lookup"><span data-stu-id="9bb76-206">Select the derived Project invoice model mapping Litware configuration as the configuration that contains default model mappings</span></span>

1. <span data-ttu-id="9bb76-207">**構成** ページにある左ペインの構成ツリーで、**プロジェクト請求書モデル マッピング Litware** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-207">On the **Configurations** page, in the configuration tree in the left pane, select **Project invoice model mapping Litware**.</span></span>
2. <span data-ttu-id="9bb76-208">**モデル マッピングの既定値** オプションを **はい** に設定します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-208">Set the **Default for model mapping** option to **Yes**.</span></span>

    <span data-ttu-id="9bb76-209">この場合、前のセクションの **請求書モデル マッピング Litware** 構成で説明した場合とは異なり、**プロジェクト請求書モデル マッピング Litware** 構成から **InvoiceProject コピー** モデル マッピングの使用を開始することはできません。</span><span class="sxs-lookup"><span data-stu-id="9bb76-209">In this case, unlike the case that is described for the **Invoice model mapping Litware** configuration in the previous section, you can't start to use the **InvoiceProject Copy** model mapping from the **Project invoice model mapping Litware** configuration.</span></span> <span data-ttu-id="9bb76-210">**InvoiceProject** ルート定義のモデル マッピングを含む 2 つの構成は、現在、既定の構成としてマークされています。</span><span class="sxs-lookup"><span data-stu-id="9bb76-210">Two configurations that contain a model mapping for the **InvoiceProject** root definition are currently marked as the default configuration.</span></span> <span data-ttu-id="9bb76-211">したがって、使用の優先順位は等しくなります。</span><span class="sxs-lookup"><span data-stu-id="9bb76-211">Therefore, they have equal priority for use.</span></span> <span data-ttu-id="9bb76-212">この問題を解決するには、この手順の残りのステップを実行します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-212">To resolve this issue, complete the remaining steps of this procedure.</span></span>

3. <span data-ttu-id="9bb76-213">左ペインの構成ツリーで、**請求書モデル マッピング Litware** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-213">In the configuration tree in the left pane, select **Invoice model mapping Litware**.</span></span>
4. <span data-ttu-id="9bb76-214">アクション ウィンドウで、**デザイナー** を選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-214">On the Action Pane, select **Designer**.</span></span>
5. <span data-ttu-id="9bb76-215">**モデルからデータ ソースへのマッピング** ページで、**編集** を選択して、必要に応じてページを編集可能にします。</span><span class="sxs-lookup"><span data-stu-id="9bb76-215">On the **Model to datasource mapping** page, select **Edit** to make the page editable, as required.</span></span>
6. <span data-ttu-id="9bb76-216">**プロジェクト請求書コピー** モデル マッピングを選択し、その **削除済** チェック ボックスを選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-216">Select the **Project Invoice Copy** model mapping, and then select the **Is deleted** check box for it.</span></span>

    ![モデルからデータ ソースへのマッピング ページでモデル マッピングを仮想的に削除するように設定する](./media/er-multiple-model-mappings-image9.png)

    <span data-ttu-id="9bb76-218">この設定により、**請求書モデル マッピング Litware** 構成は、**InvoiceProject** ルート定義にモデル マッピングを持たないものとして処理されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-218">Because of this setting, the **Invoice model mapping Litware** configuration is treated as though it has no model mapping for the **InvoiceProject** root definition.</span></span> <span data-ttu-id="9bb76-219">**InvoiceProject コピー** モデル マッピングは既定で発行されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-219">The **InvoiceProject Copy** model mapping issued by default.</span></span> <span data-ttu-id="9bb76-220">このモデル マッピングを含む構成 **プロジェクト請求書モデル マッピング Litware** は、既定の構成としてマークされます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-220">The configuration, **Project invoice model mapping Litware**, which contains this model mapping, is marked as the default configuration.</span></span> <span data-ttu-id="9bb76-221">既定としてマークされているため、**プロジェクト請求書モデル マッピング (RDP)** 構成からの **InvoiceProject** モデル マッピングよりも優先順位が高くなります。</span><span class="sxs-lookup"><span data-stu-id="9bb76-221">Because it is marked as default, it has a higher priority than the **InvoiceProject** model mapping from the **Project invoice model mapping (RDP)** configuration.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="9bb76-222">その他の考慮事項</span><span class="sxs-lookup"><span data-stu-id="9bb76-222">Other considerations</span></span>

<span data-ttu-id="9bb76-223">**プロジェクト請求書モデル マッピング Litware** 構成の **InvoiceProject コピー** モデル マッピングは、**ReportDataProvider** データ ソースを使用するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="9bb76-223">The **InvoiceProject Copy** model mapping of the **Project invoice model mapping Litware** configuration is designed to use the **ReportDataProvider** data source.</span></span> <span data-ttu-id="9bb76-224">データ ソースは、**PsaProjInvoiceDP** アプリケーション クラスを参照する *オブジェクト* タイプの 一部です。</span><span class="sxs-lookup"><span data-stu-id="9bb76-224">The data source is part of the *Object* type that refers to the **PsaProjInvoiceDP** application class.</span></span> <span data-ttu-id="9bb76-225">このクラスは、印刷管理フレームワークのプロジェクト請求書 SQL Server レポート サービス (SSRS) レポートのデータ プロバイダーとして実装されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-225">This class is implemented as the data provider for the project invoice SQL Server Reporting Services (SSRS) report of the Print management framework.</span></span> <span data-ttu-id="9bb76-226">ER [統合ポイント](er-apis-app10-0-11.md#api-to-run-a-format-mapping-for-the-generation-of-outbound-documents) としてこのデータ ソースを選択します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-226">Select this data source as the ER [integration point](er-apis-app10-0-11.md#api-to-run-a-format-mapping-for-the-generation-of-outbound-documents).</span></span> <span data-ttu-id="9bb76-227">印刷管理レポートに対する現在の ER 実装では、この設定が考慮されます。</span><span class="sxs-lookup"><span data-stu-id="9bb76-227">The current ER implementation for Print management reports takes this setting into account.</span></span> <span data-ttu-id="9bb76-228">詳細については、**ERPrintMgmtDataProviderReport** アプリケーション クラスのソース コードを確認してください。</span><span class="sxs-lookup"><span data-stu-id="9bb76-228">For more details, review the source code of the **ERPrintMgmtDataProviderReport** application class.</span></span> <span data-ttu-id="9bb76-229">実行時に、**ReportDataProvider** データ ソースをモデル マッピング統合ポイントとして割り当てると、Finance はこのマッピング コンポーネントを **プロジェクト請求書モデル マッピング (RDP)** 構成からの **InvoiceProject** マッピング コンポーネントよりも高い優先順位で処理します。</span><span class="sxs-lookup"><span data-stu-id="9bb76-229">At runtime, the assignment of the **ReportDataProvider** data source as the model mapping integration point forces Finance to treat this mapping component with a higher priority than the **InvoiceProject** mapping component from the **Project invoice model mapping (RDP)** configuration.</span></span>

## <a name="see-also"></a><span data-ttu-id="9bb76-230">参照</span><span class="sxs-lookup"><span data-stu-id="9bb76-230">See also</span></span>

- [<span data-ttu-id="9bb76-231">個別の電子申告コンフィギュレーションで電子申告モデル マッピングを管理する</span><span class="sxs-lookup"><span data-stu-id="9bb76-231">Manage ER model mapping in separate ER configurations</span></span>](./tasks/er-manage-model-mapping-configurations-july-2017.md)
- [<span data-ttu-id="9bb76-232">国のコンテキスト依存電子申告モデル マッピングを構成する</span><span class="sxs-lookup"><span data-stu-id="9bb76-232">Configure country context dependent ER model mappings</span></span>](er-country-dependent-model-mapping.md)
- [<span data-ttu-id="9bb76-233">電子申告のフレームワーク API の変更点</span><span class="sxs-lookup"><span data-stu-id="9bb76-233">Electronic reporting framework API changes</span></span>](er-apis-app10-0-11.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]