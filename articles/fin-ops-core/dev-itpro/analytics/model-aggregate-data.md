---
title: データの集計モデル
description: このチュートリアルでは、集計データをモデリングするプロセスについて説明します。
author: MilindaV2
ms.date: 12/18/2017
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Developer
ms.reviewer: kfend
ms.custom: 10234
ms.assetid: b91f6ad9-31dc-4717-82bf-5fd2a466c100
ms.search.region: Global
ms.author: milindav
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 6f19b6a36c02e651c44e7c3618b741f96ab3d2e0
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/31/2021
ms.locfileid: "5748003"
---
# <a name="model-aggregate-data"></a><span data-ttu-id="78a0a-103">データの集計モデル</span><span class="sxs-lookup"><span data-stu-id="78a0a-103">Model aggregate data</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="78a0a-104">このチュートリアルでは、集計データをモデリングするプロセスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-104">This tutorial will walk you through the process of modeling aggregate data.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="78a0a-105">前提条件</span><span class="sxs-lookup"><span data-stu-id="78a0a-105">Prerequisites</span></span>

<span data-ttu-id="78a0a-106">このチュートリアルでは、リモート デスクトップを使用して環境にアクセスし、管理者としてプロビジョニングする必要があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-106">This tutorial requires you to access the environment using Remote Desktop, and be provisioned as an administrator.</span></span> <span data-ttu-id="78a0a-107">詳細については、 [開発環境の配置とアクセス](../dev-tools/access-instances.md) というトピックを参照してください。</span><span class="sxs-lookup"><span data-stu-id="78a0a-107">For more information, see the topic named [Deploy and access development environments](../dev-tools/access-instances.md).</span></span>

## <a name="key-concepts"></a><span data-ttu-id="78a0a-108">重要な概念</span><span class="sxs-lookup"><span data-stu-id="78a0a-108">Key concepts</span></span>
- <span data-ttu-id="78a0a-109">**集計の測定** は、以前のバージョンの **分析視点** および **キューブ** と同様に、集計データをモデル化して使用することができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-109">**Aggregate measurements**, similar to **perspectives** and **Cubes** from earlier versions, enable you to model and consume aggregate data.</span></span>
- <span data-ttu-id="78a0a-110">**主要業績評価指標 (KPI)** は、現在の状態と照らし合わせて組織のパフォーマンスを追跡する分析コントロールの形式です。</span><span class="sxs-lookup"><span data-stu-id="78a0a-110">**Key Performance Indicators (KPIs)** are a form of analytic controls that track organizational performance against the current status.</span></span> <span data-ttu-id="78a0a-111">KPI は、**ワークスペース** または **ダッシュボード** でタイルとして表されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-111">KPIs are represented as tiles in a **workspace** or the **dashboard**.</span></span> <span data-ttu-id="78a0a-112">このチュートリアルでは、Visual Studio で KPI をモデル化します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-112">In this tutorial, you will model a KPI in Visual Studio.</span></span>
- <span data-ttu-id="78a0a-113">Visual Studio でモデル化される KPI は、クライアントで変更できます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-113">KPIs that are modeled in Visual Studio can be modified in the client.</span></span> <span data-ttu-id="78a0a-114">また、ユーザーは、クライアントを使用して新しい KPI をモデル化することもできます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-114">A user also has the ability to model new KPIs using the client.</span></span>
- <span data-ttu-id="78a0a-115">**ワークスペース** は、特定のサブジェクト領域固有の概要ページです。</span><span class="sxs-lookup"><span data-stu-id="78a0a-115">A **workspace** is an overview page that is specific to a particular subject area.</span></span> <span data-ttu-id="78a0a-116">ワークスペースはすべてのユーザーに共通です。</span><span class="sxs-lookup"><span data-stu-id="78a0a-116">Workspaces are common to all users.</span></span>
- <span data-ttu-id="78a0a-117">**ダッシュボード** は、ユーザーごとの既定のホーム ページです。</span><span class="sxs-lookup"><span data-stu-id="78a0a-117">The **dashboard** is the default home page for each user.</span></span>
- <span data-ttu-id="78a0a-118">**タイル** ワークスペースまたはダッシュ ボードに固定できる、セキュリティ保護可能なオブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="78a0a-118">**Tiles** are securable objects that can be pinned to a workspace or the dashboard.</span></span> <span data-ttu-id="78a0a-119">ダッシュボードまたはワークスペースに表示される KPI と集計データは、メニュー項目を使用してセキュリティで保護することができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-119">KPIs and aggregate data that are shown on the dashboard, or a workspace, can be secured by using menu items.</span></span>
- <span data-ttu-id="78a0a-120">集計データはグラフやその他のコントロールの作成に使用できます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-120">Aggregate data can be consumed in building charts and other controls.</span></span> <span data-ttu-id="78a0a-121">モデル駆動方式を使用して、集計の測定と集計分析コードを直接参照することによって、データ エンティティを作成できます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-121">Using the model driven approach, you have the ability to create data entities by directly referencing aggregate measurements and aggregate dimensions.</span></span> <span data-ttu-id="78a0a-122">これらのエンティティは、**データ エンティティの集計** と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-122">These entities are referred to as **Aggregate data entities**.</span></span> <span data-ttu-id="78a0a-123">集計データ エンティティはレポート用に使用される読み取り専用データ エンティティです。</span><span class="sxs-lookup"><span data-stu-id="78a0a-123">Aggregate data entities are read-only data entities used for reporting purposes.</span></span>
- <span data-ttu-id="78a0a-124">**集計のプログラミング モデル** により、開発者は、X++ または C\# コードのいずれかを使用してプログラムを使用して集計データを使用できます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-124">**The aggregate programming model** enables a developer to consume aggregate data programmatically using either X++ or C\# code.</span></span> <span data-ttu-id="78a0a-125">集計プログラミング モデルを使用して取得されたデータは、フォーム内のデータ ソースとして使用できます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-125">Data retrieved using the aggregate programming model can be used as a data source in forms.</span></span>
- <span data-ttu-id="78a0a-126">**メソッドの式** は、開発者が集計データを使用して豊富な式を構築できるようにします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-126">**Method expressions** enable a developer to build rich expressions using aggregate data.</span></span> <span data-ttu-id="78a0a-127">メソッドの式は、X++ クラスです。</span><span class="sxs-lookup"><span data-stu-id="78a0a-127">Method expressions are an X++ class.</span></span> <span data-ttu-id="78a0a-128">KPI はメソッドの式によってモデル化でき、MDX 式を構築する必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-128">KPIs can be modeled using method expressions, thereby eliminating the need to build MDX expressions.</span></span>
- <span data-ttu-id="78a0a-129">**コンテキスト BI** は、ユーザー体験の一部として必要な洞察を提供することを指します。ユーザーは、当面のタスクを達成するだけでなく、1 日の間に非常に生産的な洞察を得ることができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-129">**Contextual BI** refers to providing required insights as part of the user experience such that the user has relevant insights to not only achieve the task at hand, but be highly-productive during the course of the day.</span></span>
- <span data-ttu-id="78a0a-130">**組み込み型 BI** は、ユーザー エクスペリエンス内に埋め込まれた分析コンテンツを示します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-130">**Embedded BI** refers to analytic content being embedded within the user experience.</span></span> <span data-ttu-id="78a0a-131">コンテキスト BI および組み込み BI チームは密接に関連しています。</span><span class="sxs-lookup"><span data-stu-id="78a0a-131">Contextual BI and embedded BI teams are closely related.</span></span> <span data-ttu-id="78a0a-132">コンテキスト BI は、分析コンテキストのコンテキストがデータまたはタスクを中心に展開する追加された概念を意味します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-132">Contextual BI implies the added notion that the context of analytic context revolves around the data or the task.</span></span>
- <span data-ttu-id="78a0a-133">**セルフ サービス BI** ユーザーが既存のものを微調整したり、または新しくレポート、KPI、ダッシュボードなどの分析コンテンツを作成できるように参照します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-133">**Self-service BI** refers to enabling a user to tweak existing and/or create new analytic content such as reports, KPIs, and dashboards.</span></span>

## <a name="set-up"></a><span data-ttu-id="78a0a-134">設定</span><span class="sxs-lookup"><span data-stu-id="78a0a-134">Set up</span></span>
<span data-ttu-id="78a0a-135">これが作業している最初のチュートリアルである場合は、ローカル VM で実行している場合、管理者ユーザーを構成していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-135">If this is the first tutorial you are working on, make sure you have configured the administrator user if you are running on a local VM.</span></span>

### <a name="import-the-tutorial-project"></a><span data-ttu-id="78a0a-136">チュートリアル プロジェクトのインポート</span><span class="sxs-lookup"><span data-stu-id="78a0a-136">Import the tutorial project</span></span>

<span data-ttu-id="78a0a-137">フリート管理チュートリアル プロジェクトを既にインポートした場合は、次のセクションに進みます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-137">If you have already imported the Fleet management tutorial project, skip to the next section.</span></span> <span data-ttu-id="78a0a-138">Visual Studio の **Dynamics 365** メニューで、**プロジェクトのインポート** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-138">In Visual Studio, on the **Dynamics 365** menu, click **Import Project**.</span></span>

1. <span data-ttu-id="78a0a-139">フリート管理のサンプルを <https://github.com/Microsoft/FMLab> からダウンロードし、**c:\\** に保存してから解凍します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-139">Download the Fleet Management sample from <https://github.com/Microsoft/FMLab>, save it to **c:\\**, and unzip it.</span></span>
2. <span data-ttu-id="78a0a-140">**プロジェクトのインポート** ウィンドウで、**ファイル名** テキスト ボックスの隣にある、省略記号ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-140">In the **Import Project** window, next to the **Filename** text box, click the ellipsis button.</span></span>
3. <span data-ttu-id="78a0a-141">**インポートするファイルの選択** ウィンドウで、**FMLab** フォルダーの場所を参照して **FMTutorialDataModel.axpp** をクリックしてから **開く** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-141">In the **Select the file to import** window, browse to the location of the **FMLab** folder, click **FMTutorialDataModel.axpp**, and then click **Open**.</span></span>
4. <span data-ttu-id="78a0a-142">**プロジェクト ファイルの場所** テキスト ボックスに、**C:\\FMLab** と入力します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-142">In the **Project file location** text box, enter **C:\\FMLab**.</span></span>
5. <span data-ttu-id="78a0a-143">**要素の上書き** チェック ボックスをオンにし、**OK** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-143">Select the **Overwrite Elements** check box, and then click **OK**.</span></span>

### <a name="open-the-tutorial-project"></a><span data-ttu-id="78a0a-144">チュートリアル プロジェクトを開く</span><span class="sxs-lookup"><span data-stu-id="78a0a-144">Open the tutorial project</span></span>

1. <span data-ttu-id="78a0a-145">Visual Studio で、**FMTutorial** プロジェクトを開きます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-145">In Visual Studio, open the **FMTutorial** project.</span></span> <span data-ttu-id="78a0a-146">**ファイル** メニューで、**開く** をポイントし、**プロジェクト/ソリューション** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-146">On the **File** menu, point to **Open**, and then click **Project/Solution**.</span></span>
2. <span data-ttu-id="78a0a-147">**プロジェクトを開く** ダイアログ ボックスで、C:\\FMLab\\FMTutorial を参照してから FMTutorial をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-147">In the **Open Project** dialog box, browse to C:\\FMLab\\FMTutorial, and then click FMTutorial.</span></span> <span data-ttu-id="78a0a-148">**開く** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-148">Click **Open**.</span></span> <span data-ttu-id="78a0a-149">**FMTutorial** プロジェクトが **ソリューション エクスプローラー** に表示されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-149">The **FMTutorial** project appears in **Solution Explorer**.</span></span>
3. <span data-ttu-id="78a0a-150">フリート管理チュートリアルのデータを読み込むには、FMTDataHelper クラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-150">Use the FMTDataHelper class to load data for the Fleet Management tutorial.</span></span> <span data-ttu-id="78a0a-151">**ソリューション エクスプローラー** の FMTutorial プロジェクトで **クラス** を展開します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-151">In **Solution Explorer**, in the FMTutorial project, expand **Classes**.</span></span> <span data-ttu-id="78a0a-152">**FMTDataHelper** を右クリックし、**スタートアップ オブジェクトとして設定** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-152">Right-click **FMTDataHelper**, and then click **Set as Startup Object**.</span></span>
4. <span data-ttu-id="78a0a-153">**ビルド** メニューで、**ソリューションの再構築** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-153">On the **Build** menu, click **Rebuild Solution**.</span></span> <span data-ttu-id="78a0a-154">インポートされたアーティファクトのタイムスタンプを更新するには、リビルドを使用します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-154">You use the rebuild to update the timestamps of the imported artifacts.</span></span> <span data-ttu-id="78a0a-155">**出力** ウィンドウでビルドの進行状況を表示できます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-155">You can view the build progress in the **Output** window.</span></span>
5. <span data-ttu-id="78a0a-156">Ctrl+F5 キーを押してプロジェクトを実行し、データを読み込みます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-156">Press Ctrl+F5 to run the project and load the data.</span></span>

## <a name="model-an-aggregate-measurement-for-rental-charges"></a><span data-ttu-id="78a0a-157">レンタル料金の集計の測定をモデルします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-157">Model an aggregate measurement for rental charges</span></span>
<span data-ttu-id="78a0a-158">ユーザーが追加情報を求める場合、1 つまたは複数の新しいレポートを要求されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-158">Often, when a user asks for additional information, you get a request for one or more new reports.</span></span> <span data-ttu-id="78a0a-159">レンタカー会社の管理者が電話をかけ、レポートを依頼した場合を考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="78a0a-159">Imagine that the manager of a rental car company has called and asked for a report.</span></span> <span data-ttu-id="78a0a-160">マネージャーは、レンタル業務を行う方法に関心を持っています。</span><span class="sxs-lookup"><span data-stu-id="78a0a-160">The manager is interested in finding out how the rental business is performing.</span></span> <span data-ttu-id="78a0a-161">マネージャーは、月別のレンタル収益を示すレポートを必要としています。</span><span class="sxs-lookup"><span data-stu-id="78a0a-161">The manager wants a report that shows rental revenue by month.</span></span> <span data-ttu-id="78a0a-162">マネージャーがレンタル収益の詳細に関心を持っていることがすぐ分かるでしょう。</span><span class="sxs-lookup"><span data-stu-id="78a0a-162">You soon find out that the manager is interested in a breakdown of rental revenues.</span></span> <span data-ttu-id="78a0a-163">マネージャーは、基本レンタル料ではなく、追加サービス (車のシート、GPS、燃料補給など) を販売した場合に、レンタル収益高くなるかどうかを知りたいと思っています。</span><span class="sxs-lookup"><span data-stu-id="78a0a-163">The manager wants to know whether the rental revenue is high in cases where they have sold additional services, for example, car seats, GPS, re-fueling, as opposed to the base rental charge.</span></span> <span data-ttu-id="78a0a-164">結論からいうと、マネージャーが最初のレポートを望んだのは、特定の顧客グループが収益を上げていると思っていたからです。</span><span class="sxs-lookup"><span data-stu-id="78a0a-164">As it turns out, the manager suspects that specific customer groups are driving revenue up, and this is why the manager wanted the report in the first place.</span></span> <span data-ttu-id="78a0a-165">マネージャーは、レポートに顧客グループを追加すると主張しています。</span><span class="sxs-lookup"><span data-stu-id="78a0a-165">The manager insists on adding Customer group to the report.</span></span> <span data-ttu-id="78a0a-166">収益はレンタル数と関連して考慮する必要があるため、いくつかの大規模な法人レンタルの解析を歪曲させたくはありません。</span><span class="sxs-lookup"><span data-stu-id="78a0a-166">Because the revenue must be considered in relation to the number of rentals, the manager doesn’t want a few large corporate rentals to skew her analysis.</span></span> <span data-ttu-id="78a0a-167">両者は収益とともにレンタル数を表示する必要があることに同意します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-167">You both agree that the number of rentals needs to be shown along with revenue.</span></span> <span data-ttu-id="78a0a-168">この要件を行列を使用して業務上の質問のセットとして表現することができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-168">We could represent this requirement as a set of business questions using a matrix.</span></span> <span data-ttu-id="78a0a-169">行は、**メジャー** (または数値) を示し、列は **分析コード** (またはスライサー) を示します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-169">Rows indicate the **measures** (or numbers) and the columns indicate the **dimensions** (or slicers).</span></span> <span data-ttu-id="78a0a-170">測定および分析コード間で交差する「X」は、測定が分析コードによって「グループ化」される必要があることを示します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-170">An "X" in the intersection between a measure and a dimension indicates that the measure needs to be "grouped by" the dimension.</span></span>

|                       | <span data-ttu-id="78a0a-171">レンタル日付</span><span class="sxs-lookup"><span data-stu-id="78a0a-171">Rental date</span></span> | <span data-ttu-id="78a0a-172">顧客グループ</span><span class="sxs-lookup"><span data-stu-id="78a0a-172">Customer group</span></span> | <span data-ttu-id="78a0a-173">レンタル料金のタイプ</span><span class="sxs-lookup"><span data-stu-id="78a0a-173">Rental charge type</span></span> |
|-----------------------|-------------|----------------|--------------------|
| <span data-ttu-id="78a0a-174">**収益**</span><span class="sxs-lookup"><span data-stu-id="78a0a-174">**Revenue**</span></span>           | <span data-ttu-id="78a0a-175">x</span><span class="sxs-lookup"><span data-stu-id="78a0a-175">X</span></span>           | <span data-ttu-id="78a0a-176">x</span><span class="sxs-lookup"><span data-stu-id="78a0a-176">X</span></span>              | <span data-ttu-id="78a0a-177">x</span><span class="sxs-lookup"><span data-stu-id="78a0a-177">X</span></span>                  |
| <span data-ttu-id="78a0a-178">**レンタルの数**</span><span class="sxs-lookup"><span data-stu-id="78a0a-178">**Number of rentals**</span></span> | <span data-ttu-id="78a0a-179">x</span><span class="sxs-lookup"><span data-stu-id="78a0a-179">X</span></span>           | <span data-ttu-id="78a0a-180">x</span><span class="sxs-lookup"><span data-stu-id="78a0a-180">X</span></span>              | <span data-ttu-id="78a0a-181">x</span><span class="sxs-lookup"><span data-stu-id="78a0a-181">X</span></span>                  |

<span data-ttu-id="78a0a-182">次に、この業務上の質問に回答する集計の測定をモデル化します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-182">Next, we will model an aggregate measurement to answer this business question.</span></span>

### <a name="add-a-measure-group-for-rental-charges-by-using-an-existing-view"></a><span data-ttu-id="78a0a-183">既存のビューを使用してレンタル料金のメジャー グループを追加します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-183">Add a measure group for rental charges by using an existing view</span></span>

<span data-ttu-id="78a0a-184">このセクションでは、既存の集計測定に新しいメジャー グループを追加します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-184">In this section you will add a new measure group to an existing aggregate measurement.</span></span>

1. <span data-ttu-id="78a0a-185">**ソリューション エクスプローラー** でプロジェクトの **分析** フォルダーを展開してから、集計の測定 **FMTAggregateMeasurement** をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-185">In **Solution Explorer**, expand the **Analytics** folder of the project, and then double-click the aggregate measurement, **FMTAggregateMeasurement**.</span></span> <span data-ttu-id="78a0a-186">集計の測定はデザイナーで起動されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-186">The aggregate measurement will be launched in the designer.</span></span> <span data-ttu-id="78a0a-187">既存の集計の測定に、車両の在庫やレンタルの詳細に関連する 2 つのメジャー グループが含まれていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-187">Notice that the existing aggregate measurement contains two measure groups related to vehicle inventory and rental details.</span></span> <span data-ttu-id="78a0a-188">レンタル料金に関連する新しいメジャー グループを作成します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-188">You will create a new measure group related to rental charges.</span></span>

    <span data-ttu-id="78a0a-189">[![AOT の集計メジャー](./media/fmtaggregatemeasurement.png)](./media/fmtaggregatemeasurement.png)</span><span class="sxs-lookup"><span data-stu-id="78a0a-189">[![Aggregate measures in the AOT](./media/fmtaggregatemeasurement.png)](./media/fmtaggregatemeasurement.png)</span></span>

2. <span data-ttu-id="78a0a-190">**ソリューション エクスプローラー** でプロジェクトの **表示** フォルダーを展開してから、**FMTRentalChargeExtendedView** の表示を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-190">In **Solution Explorer**, expand the **Views** folder of the project, and then select the **FMTRentalChargeExtendedView** view.</span></span>
3. <span data-ttu-id="78a0a-191">**FMTRentalChargeExtendedView** をデザイナーの **FMTAggregateMeasurement** 集計測定のルート ノードにドラッグ アンド ドロップします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-191">Drag-and-drop the **FMTRentalChargeExtendedView** into the root node of the **FMTAggregateMeasurement** aggregate measurement in the designer.</span></span> <span data-ttu-id="78a0a-192">新しいメジャー グループが作成され、プロパティの値が次のように適用されたことに注意します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-192">Notice that a new measure group is created and the values of properties have been applied as follows.</span></span>

    | <span data-ttu-id="78a0a-193">プロパティ</span><span class="sxs-lookup"><span data-stu-id="78a0a-193">Property</span></span> | <span data-ttu-id="78a0a-194">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-194">Value</span></span>                      |
    |----------|----------------------------|
    | <span data-ttu-id="78a0a-195">氏名</span><span class="sxs-lookup"><span data-stu-id="78a0a-195">Name</span></span>     | <span data-ttu-id="78a0a-196">FMRentalChargeExtendedView</span><span class="sxs-lookup"><span data-stu-id="78a0a-196">FMRentalChargeExtendedView</span></span> |
    | <span data-ttu-id="78a0a-197">テーブル</span><span class="sxs-lookup"><span data-stu-id="78a0a-197">Table</span></span>    | <span data-ttu-id="78a0a-198">FMRentalChargeExtendedView</span><span class="sxs-lookup"><span data-stu-id="78a0a-198">FMRentalChargeExtendedView</span></span> |

4. <span data-ttu-id="78a0a-199">**ソリューション エクスプローラー** で、**FMRentalChargeExtendedView** の表示をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-199">In **Solution Explorer**, double-click the **FMRentalChargeExtendedView** view.</span></span> <span data-ttu-id="78a0a-200">デザイナー フォームが開いたら、**フィールド** ノードを展開します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-200">When the designer form opens, expand the **Fields** node.</span></span>
5. <span data-ttu-id="78a0a-201">**ExtendedAmount** および **RentalID** フィールドを選択した後、2 つのフィールドを **FMRentalChargeExtendedView** と呼ばれる新たに作成された **FMAggregateMeasurement** メジャー グループの **Measures** ノードにドラッグ アンド ドロップします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-201">Select the **ExtendedAmount** and **RentalID** fields, and then drag-and-drop the two fields onto the **Measures** node of the newly created **FMAggregateMeasurement** measure group called **FMRentalChargeExtendedView**.</span></span> <span data-ttu-id="78a0a-202">フィールドをドラッグする際、**FMAggregateMeasurement** タブにカーソルを置き、**メジャー** ノードにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-202">As you drag the fields, hover your cursor over the **FMAggregateMeasurement** tab to access the **Measures** node.</span></span> <span data-ttu-id="78a0a-203">既定では、フィールドをドラッグ アンド ドロップするときに、メジャーのカウントが必要と見なされます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-203">By default, when you drag-and-drop the fields, the system assumes that you want counts of the measures.</span></span> <span data-ttu-id="78a0a-204">この場合、次のように **ExtendedAmount** および **RentalId** 測定値の既定のプロパティを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-204">In this case, you need to modify default properties for the **ExtendedAmount** and **RentalId** measures as follows:</span></span>

    | <span data-ttu-id="78a0a-205">プロパティ (ExtendedAmount)</span><span class="sxs-lookup"><span data-stu-id="78a0a-205">Property (ExtendedAmount)</span></span> | <span data-ttu-id="78a0a-206">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-206">Value</span></span>                               |
    |---------------------------|-------------------------------------|
    | <span data-ttu-id="78a0a-207">既定の集計</span><span class="sxs-lookup"><span data-stu-id="78a0a-207">Default Aggregate</span></span>         | <span data-ttu-id="78a0a-208">**SUM**</span><span class="sxs-lookup"><span data-stu-id="78a0a-208">**Sum**</span></span>                             |
    | <span data-ttu-id="78a0a-209">フィールド</span><span class="sxs-lookup"><span data-stu-id="78a0a-209">Field</span></span>                     | <span data-ttu-id="78a0a-210">ExtendedAmount (変更の必要なし)</span><span class="sxs-lookup"><span data-stu-id="78a0a-210">ExtendedAmount (no change required)</span></span> |
    | <span data-ttu-id="78a0a-211">氏名</span><span class="sxs-lookup"><span data-stu-id="78a0a-211">Name</span></span>                      | <span data-ttu-id="78a0a-212">収益</span><span class="sxs-lookup"><span data-stu-id="78a0a-212">Revenue</span></span>                             |

    | <span data-ttu-id="78a0a-213">プロパティ (RentalId)</span><span class="sxs-lookup"><span data-stu-id="78a0a-213">Property (RentalId)</span></span> | <span data-ttu-id="78a0a-214">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-214">Value</span></span>                         |
    |---------------------|-------------------------------|
    | <span data-ttu-id="78a0a-215">既定の集計</span><span class="sxs-lookup"><span data-stu-id="78a0a-215">Default Aggregate</span></span>   | <span data-ttu-id="78a0a-216">**DistinctCount**</span><span class="sxs-lookup"><span data-stu-id="78a0a-216">**DistinctCount**</span></span>             |
    | <span data-ttu-id="78a0a-217">フィールド</span><span class="sxs-lookup"><span data-stu-id="78a0a-217">Field</span></span>               | <span data-ttu-id="78a0a-218">RentalId (変更の必要なし)</span><span class="sxs-lookup"><span data-stu-id="78a0a-218">RentalId (no change required)</span></span> |
    | <span data-ttu-id="78a0a-219">氏名</span><span class="sxs-lookup"><span data-stu-id="78a0a-219">Name</span></span>                | <span data-ttu-id="78a0a-220">NumRentals</span><span class="sxs-lookup"><span data-stu-id="78a0a-220">NumRentals</span></span>                    |

6. <span data-ttu-id="78a0a-221">次に、既存の測定単位をコピーして、**レンタルあたりの収益** を計算する別の測定単位を作成してみましょう。</span><span class="sxs-lookup"><span data-stu-id="78a0a-221">Next let's create another measure which calculates **Revenue per Rental** by copying an existing measure.</span></span> <span data-ttu-id="78a0a-222">**TotalRevenue** 測定を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-222">Select the **TotalRevenue** measure.</span></span> <span data-ttu-id="78a0a-223">右クリックし、**コンテキスト** メニューから **コピー** を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-223">Right-click and select **Copy** from the **Context** menu.</span></span>
7. <span data-ttu-id="78a0a-224">**FMRentalDetails** メジャー グループを選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-224">Select the **FMRentalDetails** measure group.</span></span> <span data-ttu-id="78a0a-225">右クリックし、貼り付けを選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-225">Right-click and select paste.</span></span> <span data-ttu-id="78a0a-226">新たに作成された測定の名前を **RevenuePerRental** に変更します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-226">Rename the newly created measure to **RevenuePerRental**.</span></span> <span data-ttu-id="78a0a-227">集計関数を **Average** に変更します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-227">Modify the aggregation function to **Average**.</span></span>

### <a name="model-an-aggregate-dimension-charge-type"></a><span data-ttu-id="78a0a-228">集計分析コード料金のタイプをモデル化します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-228">Model an aggregate dimension charge type</span></span>

<span data-ttu-id="78a0a-229">さまざまな料金のタイプによってレンタル収益を分析するには、料金タイプごとに収益をスライスする必要があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-229">To analyze rental revenue by the different charge types, you need to be able to slice revenue by the charge type.</span></span> <span data-ttu-id="78a0a-230">このためには、最初に管理タイプ分析コードをモデル化します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-230">For this purpose, you will first model a charge type dimension.</span></span>

1. <span data-ttu-id="78a0a-231">**ソリューション エクスプローラー** の **FMTutorial** で **分析** を右クリックして、**追加** をポイントしてから **新しい項目** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-231">In **Solution Explorer**, under **FMTutorial**, right-click **Analytics**, point to **Add**, and then click **New Item**.</span></span>
2. <span data-ttu-id="78a0a-232">項目の一覧から **Dynamics 365 コンポーネント** &gt; **分析** &gt; **分析コードの集計** を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-232">Select **Dynamics 365 Artifacts** &gt; **Analytics** &gt; **Aggregate Dimension** from the list of items.</span></span>
3. <span data-ttu-id="78a0a-233">**名前** プロパティで、**FMTChargeType** と入力します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-233">In the **Name** property, enter **FMTChargeType**.</span></span> <span data-ttu-id="78a0a-234">これは、作成される集計分析コードの名前です。</span><span class="sxs-lookup"><span data-stu-id="78a0a-234">This is the name of the aggregate dimension that will be created.</span></span> <span data-ttu-id="78a0a-235">この名前は一意でなければなりません。</span><span class="sxs-lookup"><span data-stu-id="78a0a-235">This name must be unique.</span></span> <span data-ttu-id="78a0a-236">**追加** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-236">Click **Add**.</span></span> <span data-ttu-id="78a0a-237">新しい分析コードは、Visual Studio に表示されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-237">The new dimension will appear in Visual Studio.</span></span>
4. <span data-ttu-id="78a0a-238">**アプリケーション エクスプローラー** で、**AOT** を展開して **データ モデル** &gt; **テーブル** とクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-238">In **Application Explorer**, expand the **AOT** and click **Data Model** &gt; **Tables**.</span></span> <span data-ttu-id="78a0a-239">**FMTChargeType** テーブルを **Application Explorer** からデザイナーで新しく作成された **FMTChargeType** 分析コードのルート ノードにドラッグ アンド ドロップします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-239">Drag-and-drop the **FMTChargeType** table from **Application Explorer** onto the root node of the newly created **FMTChargeType** dimension in the designer.</span></span> <span data-ttu-id="78a0a-240">分析コードの属性と対応するキーがテーブルの AutoReport フィールド グループを使用して追加されたことに注意します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-240">Notice that dimension attributes and corresponding keys have been added using the AutoReport field group of the table.</span></span>
5. <span data-ttu-id="78a0a-241">新しい分析コードの **属性** ノードを展開します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-241">Expand the **Attributes** node of the new dimension.</span></span> <span data-ttu-id="78a0a-242">いくつかの属性は既定で作成されていることに注意します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-242">Notice that several attributes have been created for you by default.</span></span> <span data-ttu-id="78a0a-243">また、テーブルの一意のインデックスに基づいて分析コード キーが作成されました。</span><span class="sxs-lookup"><span data-stu-id="78a0a-243">The system has also created a dimension key based on unique indexes of the table.</span></span> <span data-ttu-id="78a0a-244">**フィールド** ノードにドラッグ アンド ドロップすることにより、さらにフィールドを追加することができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-244">You can add additional fields by dragging and dropping them into the **Fields** node.</span></span>

    <span data-ttu-id="78a0a-245">[![FMTChargeType の属性リスト](./media/fmtchargetype.png)](./media/fmtchargetype.png)</span><span class="sxs-lookup"><span data-stu-id="78a0a-245">[![Attribute list for FMTChargeType](./media/fmtchargetype.png)](./media/fmtchargetype.png)</span></span>

6. <span data-ttu-id="78a0a-246">新しい分析コードを保存します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-246">Save the new dimension.</span></span>
7. <span data-ttu-id="78a0a-247">MDX 予約ワードを回避するためにフィールド名の説明を変更するように求める警告が表示される場合があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-247">You may get a warning asking you to rename the field name Description to avoid the MDX reserved word.</span></span> <span data-ttu-id="78a0a-248">集約分析コードは、集計測定で SSAS に配置されない場合がありますが、今後 SSAS に配置される集計測定でこの分析コードが使用される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-248">Even though the aggregate dimension may not be deployed to SSAS in this aggregate measurement, it's possible that this dimension may be used by an aggregate measurement deployed to SSAS in the future.</span></span> <span data-ttu-id="78a0a-249">将来の潜在的な問題を避けるために、フィールド名 **Description** の名前を **ChargeDescription** に変更します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-249">To avoid potential issues in the future, rename the field name **Description** to **ChargeDescription**.</span></span>

### <a name="model-dimension-references-for-customer-profile-and-charge-type-dimensions"></a><span data-ttu-id="78a0a-250">顧客プロファイルの分析コードの参照と料金のタイプの分析コードのモデル化</span><span class="sxs-lookup"><span data-stu-id="78a0a-250">Model dimension references for customer profile and charge type dimensions</span></span>

<span data-ttu-id="78a0a-251">次に、新規および既存の分析コードに分析コードの参照を作成して、収益を顧客および料金のタイプでスライスできるようにします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-251">Next, create dimension references to new and existing dimensions so that revenue can be sliced by customer as well as charge type.</span></span>

1. <span data-ttu-id="78a0a-252">**ソリューション エクスプローラー** で、**FMTAggregateMeasurement** をダブルクリックするか、開いている場合はデザイナーに移動します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-252">In **Solution Explorer**, double-click **FMTAggregateMeasurement** or, if you have it open, navigate to it in the designer.</span></span>
2. <span data-ttu-id="78a0a-253">**ソリューション エクスプローラー** で、分析コード **FMTChargeType** および **FMTCustomerProfile** を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-253">In **Solution Explorer**, select the dimensions **FMTChargeType** and **FMTCustomerProfile**.</span></span>
3. <span data-ttu-id="78a0a-254">**FMTRentalChargeExtendedView** 測定グループの **分析コード** ノードにドラッグ アンド ドロップします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-254">Drag-and-drop them into the **Dimensions** node of the **FMTRentalChargeExtendedView** measure group.</span></span> <span data-ttu-id="78a0a-255">分析コードの参照が関係とともに作成されていることに注意します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-255">Notice that dimension references have been created along with relations.</span></span>
4. <span data-ttu-id="78a0a-256">**FMTAggregateMeasurement** の変更を保存します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-256">Save changes to **FMTAggregateMeasurement**.</span></span> <span data-ttu-id="78a0a-257">分析コードの関係のプロパティ シートを確認して、**テーブル関係の使用** プロパティが **はい** に設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-257">Review the property sheet for the dimension relation and notice that the **Use Table relations** property is set to **Yes**.</span></span> <span data-ttu-id="78a0a-258">ドラッグ アンド ドロップ操作によって、メジャー グループ分析コード **FMTRentalChargeExtendedView** および **FMTChargeType**、**FMTCustomerProfile** の間に関係が作成されたことに注意します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-258">Notice that the drag-and-drop operation created relationships between the measure group dimensions **FMTRentalChargeExtendedView** and **FMTChargeType**, **FMTCustomerProfile**.</span></span> <span data-ttu-id="78a0a-259">分析コードの関係のプロパティ シートを確認して、**テーブル関係の使用** プロパティが **はい** に設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-259">Review the property sheet for the dimension relation and notice that the **Use Table relations** property is set to **Yes**.</span></span>

    <span data-ttu-id="78a0a-260">[![分析コード FMTChargeType のプロパティ ウィンドウ](./media/fmtchargetype2.png)](./media/fmtchargetype2.png)</span><span class="sxs-lookup"><span data-stu-id="78a0a-260">[![Properties window for Dimension FMTChargeType](./media/fmtchargetype2.png)](./media/fmtchargetype2.png)</span></span>

    > [!NOTE]
    > <span data-ttu-id="78a0a-261">プラットフォーム更新プログラム 1611 以降では、**UseTableRelations** プロパティが削除されました。</span><span class="sxs-lookup"><span data-stu-id="78a0a-261">In platform update 1611 and later, **UseTableRelations** property has been removed.</span></span> <span data-ttu-id="78a0a-262">新しい分析コード参照が作成されるとき、既存のリレーションシップが既定値に設定されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-262">When a new dimension reference is created, system will default existing relationships.</span></span> <span data-ttu-id="78a0a-263">既定に設定されているリレーションシップ フィールドを変更することにより、明示的リレーションシップの提供を継続することができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-263">You can continue to provide an explicit relationship by changing the relationship field that was defaulted.</span></span> <span data-ttu-id="78a0a-264">明示的な関係を提供することは、**UseTableRelationship** を **No** に設定することと同じです。</span><span class="sxs-lookup"><span data-stu-id="78a0a-264">Providing an explicit relationship is equal to setting **UseTableRelationship** to **No**.</span></span>

5. <span data-ttu-id="78a0a-265">**FMTCustomerProfile** 分析コードの分析コード関係ノードを展開します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-265">Expand the Dimension relations node for the **FMTCustomerProfile** dimension.</span></span> <span data-ttu-id="78a0a-266">**UseTableRelations** プロパティが **いいえ** に設定されていることに注意します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-266">Notice that the **UseTableRelations** property is set to **No**.</span></span> <span data-ttu-id="78a0a-267">この場合、システムはメジャー グループおよび分析コードの間に適切な関係を発見できませんでした。</span><span class="sxs-lookup"><span data-stu-id="78a0a-267">In this case, the system has not been able to find a suitable relationship between the Measure group and dimension.</span></span> <span data-ttu-id="78a0a-268">手動で指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-268">You will need to specify one manually.</span></span>
6. <span data-ttu-id="78a0a-269">未処理の場合は、**FMTCustomerProfile** 分析コードの参照を展開します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-269">Expand the **FMTCustomerProfile** dimension reference if you have not done so already.</span></span> <span data-ttu-id="78a0a-270">ノード **FMTCustomerExtendedView** を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-270">Select the node **FMTCustomerExtendedView**.</span></span> <span data-ttu-id="78a0a-271">右クリックし、プロパティ シートを参照してください。</span><span class="sxs-lookup"><span data-stu-id="78a0a-271">Right-click and see the property sheet.</span></span>
7. <span data-ttu-id="78a0a-272">プロパティ **DimensionAttribute** の値として **CustomerID** を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-272">Select **CustomerID** as the value for property **DimensionAttribute**.</span></span> <span data-ttu-id="78a0a-273">以下に表示された関係を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-273">Select the relationship shown below.</span></span> <span data-ttu-id="78a0a-274">プロパティ値 **RelatedField** に **顧客** を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-274">Select **Customer** for the property value **RelatedField**.</span></span>
8. <span data-ttu-id="78a0a-275">**FMTAggregateMeasurement** の変更を保存します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-275">Save changes to **FMTAggregateMeasurement**.</span></span>

    <span data-ttu-id="78a0a-276">[![DimensionRelationConstraint のプロパティ ウィンドウ](./media/fmt4.png)](./media/fmt4.png)</span><span class="sxs-lookup"><span data-stu-id="78a0a-276">[![Properties window for DimensionRelationConstraint](./media/fmt4.png)](./media/fmt4.png)</span></span>

9. <span data-ttu-id="78a0a-277">このシナリオでは、システムが関係を検出できなかったため、関係を指定しました。</span><span class="sxs-lookup"><span data-stu-id="78a0a-277">In this scenario, we specified a relationship because the system was unable to find one.</span></span> <span data-ttu-id="78a0a-278">**テーブル関係プロパティを使用する** を **いいえ** に設定してシステムの選択をオーバーライドする場合、異なるリレーションシップを指定することもできました。</span><span class="sxs-lookup"><span data-stu-id="78a0a-278">You could also specify a different relationship if you want to override the system choice by setting **Use Table Relations property** to **No**.</span></span>

### <a name="model-dimension-references-for-the-date-dimensions-rental-start-date-and-transaction-date"></a><span data-ttu-id="78a0a-279">日付分析コードのレンタルの開始日とトランザクションの日付の分析コードの参照のモデル化</span><span class="sxs-lookup"><span data-stu-id="78a0a-279">Model dimension references for the date dimension's rental start date and transaction date</span></span>

<span data-ttu-id="78a0a-280">分析の目的で、レンタルの開始日までにスライスを有効にすると仮定しますが、会計処理のために、各請求のトランザクションの日付にスライスを有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-280">Assume that for analysis purposes, you want to enable slicing by the start date of the rental; but for accounting purposes, you want to enable slicing by the transaction date for each of the charges.</span></span> <span data-ttu-id="78a0a-281">これを行うには、レンタル料金測定値グループを 2つ の日付の分析コードに関連付ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-281">To do this, you need to associate the rental charges measure group with two date dimensions.</span></span> <span data-ttu-id="78a0a-282">BI では、このパターンは **ロール プレイの分析コード** と知られています。</span><span class="sxs-lookup"><span data-stu-id="78a0a-282">In the BI world, this pattern is known as **Role Playing dimensions**.</span></span> <span data-ttu-id="78a0a-283">既定では、メジャー グループに日付分析コードが追加されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-283">By default, a date dimension is added to the measure group.</span></span> <span data-ttu-id="78a0a-284">必要に応じて、既定の名前を適切に変更して新しい日付分析コードを追加することができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-284">You can rename the default name appropriately and add new date dimensions as required.</span></span>

1. <span data-ttu-id="78a0a-285">**FMTRentalChargeExtendedView** 測定グループの **分析コード** ノードを展開します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-285">Expand the **Dimensions** node of the **FMTRentalChargeExtendedView** measure group.</span></span> <span data-ttu-id="78a0a-286">**Date\_** 分析コードが既に分析コードのスライサーとして含まれていることに注意します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-286">Notice that the **Date\_** dimension has already been included as dimension slicers.</span></span>

    > [!NOTE]
    > <span data-ttu-id="78a0a-287">メジャー グループをモデル化するために使用されるテーブルまたはビューが会社固有のテーブル、たとえば、キーの一部として DATAAREAID を含む場合、既定では、**会社** 分析コードの関係が作成されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-287">If the table or the view used to model the measure group is a Company-specific table, for example it contains DATAAREAID as part of the key), a **Company** dimension relation will be created by default.</span></span> <span data-ttu-id="78a0a-288">この場合、使用したビューは会社固有のものではありません。</span><span class="sxs-lookup"><span data-stu-id="78a0a-288">In this case, the view we used is not a company specific one.</span></span>

    <span data-ttu-id="78a0a-289">[![AOT の分析コードの一覧](./media/fmt5.png)](./media/fmt5.png)</span><span class="sxs-lookup"><span data-stu-id="78a0a-289">[![List of dimensions in the AOT](./media/fmt5.png)](./media/fmt5.png)</span></span>

2. <span data-ttu-id="78a0a-290">**日付** 分析コードを選択し、次のプロパティを指定します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-290">Select the **Date** dimension and specify the following properties.</span></span>

    | <span data-ttu-id="78a0a-291">プロパティ</span><span class="sxs-lookup"><span data-stu-id="78a0a-291">Property</span></span>            | <span data-ttu-id="78a0a-292">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-292">Value</span></span>                                        |
    |---------------------|----------------------------------------------|
    | <span data-ttu-id="78a0a-293">氏名</span><span class="sxs-lookup"><span data-stu-id="78a0a-293">Name</span></span>                | <span data-ttu-id="78a0a-294">RentalStartDate</span><span class="sxs-lookup"><span data-stu-id="78a0a-294">RentalStartDate</span></span>                              |
    | <span data-ttu-id="78a0a-295">テーブル リレーションの使用</span><span class="sxs-lookup"><span data-stu-id="78a0a-295">Use Table Relations</span></span> | <span data-ttu-id="78a0a-296">いいえ (これは既定値です – 変更する必要はありません)</span><span class="sxs-lookup"><span data-stu-id="78a0a-296">No (This is the default – no need to change)</span></span> |

3. <span data-ttu-id="78a0a-297">テーブル関係を定義します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-297">Define the table relationship.</span></span> <span data-ttu-id="78a0a-298">**RentalStartDate** を展開し、その後 **日付** ノードを展開します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-298">Expand **RentalStartDate**, and then expand the **Date** node.</span></span>
4. <span data-ttu-id="78a0a-299">表示された関係を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-299">Select the Relationship shown.</span></span> <span data-ttu-id="78a0a-300">右クリックし、プロパティ シートを選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-300">Right-click and select the property sheet.</span></span> <span data-ttu-id="78a0a-301">**Related field** プロパティの値として **StartDate** を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-301">Select **StartDate** for the value of **Related field** property.</span></span>
5. <span data-ttu-id="78a0a-302">定義した関係は、次のスクリーン ショットのようになります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-302">The relationship you defined should look like the following screenshot.</span></span>

    ![BIDateDimensionsView.Date==FMTRentalChargeExtendedView.StartDate](./media/fmt6.png)

6. <span data-ttu-id="78a0a-304">次に、TransactionDate 分析コード別のメジャーのスライスを有効にします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-304">Next, enable slicing of measures by the TransactionDate dimension.</span></span> <span data-ttu-id="78a0a-305">TransactionDate は日付分析コードでもあるため、日付分析コードに別の参照を追加し、トランザクション日付を含む対応するフィールドに関連付けます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-305">TransactionDate is also a date dimension, so you will add another reference to the date dimension and associate that with the corresponding field that contains the transaction date.</span></span> <span data-ttu-id="78a0a-306">複数の日付分析コードがスライサーとして使用されるとき、各日付分析コードは **ロールプレイング日付分析コード** と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-306">When more than one date dimension is used as a slicer, each date dimension is known as a **Role playing date dimension**.</span></span>
7. <span data-ttu-id="78a0a-307">**FMTRentalChargeExtendedView** メジャー グループで、**分析コード** ノードを右クリックし、**新しい分析コード** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-307">Under the **FMTRentalChargeExtendedView** measure group, right-click the **Dimensions** node, and then click **New Dimension**.</span></span> <span data-ttu-id="78a0a-308">新しい分析コードが分析コード参照のリストに追加されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-308">A new dimension will be added to the list of dimension references.</span></span>
8. <span data-ttu-id="78a0a-309">新しい分析コード参照の次のプロパティを指定します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-309">Specify the following properties for the new dimension reference.</span></span>

    | <span data-ttu-id="78a0a-310">プロパティ</span><span class="sxs-lookup"><span data-stu-id="78a0a-310">Property</span></span>            | <span data-ttu-id="78a0a-311">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-311">Value</span></span> |
    |---------------------|-------|
    | <span data-ttu-id="78a0a-312">分析コード名</span><span class="sxs-lookup"><span data-stu-id="78a0a-312">Dimension Name</span></span>      | <span data-ttu-id="78a0a-313">日\_</span><span class="sxs-lookup"><span data-stu-id="78a0a-313">Date\_</span></span><blockquote>[!NOTE] <span data-ttu-id="78a0a-314">間違った順序で分析コードの名前を選択した場合は、既に設定したその他の値がリセットされます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-314">If you select the Dimension Name in the wrong order, it will reset the other values you already set.</span></span></blockquote> |
    |  <span data-ttu-id="78a0a-315">氏名</span><span class="sxs-lookup"><span data-stu-id="78a0a-315">Name</span></span>               | <span data-ttu-id="78a0a-316">TransactionDate</span><span class="sxs-lookup"><span data-stu-id="78a0a-316">TransactionDate</span></span> |
    | <span data-ttu-id="78a0a-317">テーブル リレーションの使用</span><span class="sxs-lookup"><span data-stu-id="78a0a-317">Use table relations</span></span> | <span data-ttu-id="78a0a-318">無</span><span class="sxs-lookup"><span data-stu-id="78a0a-318">No</span></span> |
    | <span data-ttu-id="78a0a-319">タグ</span><span class="sxs-lookup"><span data-stu-id="78a0a-319">Tags</span></span>                | <span data-ttu-id="78a0a-320">RolePlayingDate。フリート</span><span class="sxs-lookup"><span data-stu-id="78a0a-320">RolePlayingDate; Fleet</span></span> |

    <span data-ttu-id="78a0a-321">**Tags** と呼ばれる新しいプロパティに注目してください。</span><span class="sxs-lookup"><span data-stu-id="78a0a-321">Notice the new property called **Tags**.</span></span> <span data-ttu-id="78a0a-322">このプロパティを使用すると、Visual studio 環境内のコードとメタデータ内のパターンを検出できます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-322">This property enables the discovery of patterns within code and metadata from within the Visual studio environment.</span></span> <span data-ttu-id="78a0a-323">任意のタグの番号を入力することができます。これらはホット キーまたは Visual Studio の **Dynamics 365** メニューを使用して検索することができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-323">You can enter any number of tags and they can be searched using the hot keys or the **Dynamics 365** menu in Visual Studio.</span></span>

9. <span data-ttu-id="78a0a-324">テーブル関係を定義します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-324">Define the table relationship.</span></span> <span data-ttu-id="78a0a-325">**TransactionDate** を右クリックし、**新しい関係** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-325">Right-click **TransactionDate**, and then click **New Relation**.</span></span> <span data-ttu-id="78a0a-326">この時点で、DimensionsRelation のプロパティを指定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="78a0a-326">You do not need to specify any properties in the DimensionsRelation at this point.</span></span>
10. <span data-ttu-id="78a0a-327">**BIDateDimensionValue** を展開し、次に **リレーションシップ** **制約** を選びます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-327">Expand **BIDateDimensionValue**, and then select the **Relationship** **Constraint**.</span></span> <span data-ttu-id="78a0a-328">右クリックし、プロパティ シートを選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-328">Right-click and select the property sheet.</span></span>
11. <span data-ttu-id="78a0a-329">BIDateDimensionsView 関係制約の次のプロパティを指定します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-329">Specify the following properties for the BIDateDimensionsView relation constraint.</span></span>

    | <span data-ttu-id="78a0a-330">プロパティ</span><span class="sxs-lookup"><span data-stu-id="78a0a-330">Property</span></span>      | <span data-ttu-id="78a0a-331">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-331">Value</span></span>    |
    |---------------|----------|
    | <span data-ttu-id="78a0a-332">フィールド</span><span class="sxs-lookup"><span data-stu-id="78a0a-332">Field</span></span>         | <span data-ttu-id="78a0a-333">日</span><span class="sxs-lookup"><span data-stu-id="78a0a-333">Date</span></span>     |
    | <span data-ttu-id="78a0a-334">関連フィールド</span><span class="sxs-lookup"><span data-stu-id="78a0a-334">Related Field</span></span> | <span data-ttu-id="78a0a-335">TranDate</span><span class="sxs-lookup"><span data-stu-id="78a0a-335">TranDate</span></span> |

    <span data-ttu-id="78a0a-336">定義した関係は、次のスクリーン ショットのようになります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-336">The relationship you defined should look like the following screenshot.</span></span>

    <span data-ttu-id="78a0a-337">[![FMTRentalChargeExtendedView のリレーションシップ](./media/fmy7.png)](./media/fmy7.png)</span><span class="sxs-lookup"><span data-stu-id="78a0a-337">[![Relationships for FMTRentalChargeExtendedView](./media/fmy7.png)](./media/fmy7.png)</span></span>

12. <span data-ttu-id="78a0a-338">集計測定を保存します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-338">Save the aggregate measurement.</span></span>

### <a name="deploy-the-newly-generated-aggregate-measurement"></a><span data-ttu-id="78a0a-339">新たに生成され集計の測定を配置する</span><span class="sxs-lookup"><span data-stu-id="78a0a-339">Deploy the newly generated aggregate measurement</span></span>

<span data-ttu-id="78a0a-340">集計の測定のモデリングが完了したので、集計の測定を配置して KPI の構築と視覚化を続行できます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-340">Now that you have completed modeling the aggregate measurement, you can deploy the aggregate measurement and continue with building KPIs and visualizations.</span></span> <span data-ttu-id="78a0a-341">以下のように配置には 2 つの選択肢があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-341">You have 2 deployment choices as shown below.</span></span>

| <span data-ttu-id="78a0a-342">オプション</span><span class="sxs-lookup"><span data-stu-id="78a0a-342">Option</span></span>                | <span data-ttu-id="78a0a-343">注意事項</span><span class="sxs-lookup"><span data-stu-id="78a0a-343">Considerations</span></span> |
|-----------------------|----------------|
| <span data-ttu-id="78a0a-344">メモリ内リアルタイム</span><span class="sxs-lookup"><span data-stu-id="78a0a-344">In-memory real-time</span></span>   | <span data-ttu-id="78a0a-345">このオプションは、SQL Server データベースのメモリ内縦棒ストア インデックスを利用して、集計の測定を展開します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-345">This option will leverage the In-memory Column store indexes of SQL Server database to deploy Aggregate Measurements.</span></span> <span data-ttu-id="78a0a-346">このオプションは、**リアルタイム分析** が必要なクライアント内の埋め込み分析に集計の測定を使用する場合に推奨されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-346">This option is recommended when the Aggregate measurement is used for embedded analytics within the client where you need **real-time analytics**.</span></span> <span data-ttu-id="78a0a-347">リアルタイム分析の概念の概要については、[分析、集計測定、および KPI モデリング](analytics.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="78a0a-347">For an overview of concepts on real-time analytics, see [Analytics, aggregate measurements, and KPI modeling](analytics.md).</span></span> |
| <span data-ttu-id="78a0a-348">エンティティ格納のステージ</span><span class="sxs-lookup"><span data-stu-id="78a0a-348">Stage in Entity Store</span></span> | <span data-ttu-id="78a0a-349">このオプションは、**near real-time PowerBI reporting** を有効にする運用データストアであるエンティティ ストアを利用します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-349">This option leverages Entity store, the operational data store that enables **near real-time PowerBI reporting**.</span></span> <span data-ttu-id="78a0a-350">このオプションを選択する場合は、集計測定をエンティティ店舗に配置でき、データを定期的に更新するためにスケジューリングできます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-350">If you choose this option, Aggregate measurement can be deployed to Entity store and you can schedule the data to be refreshed periodically.</span></span> <span data-ttu-id="78a0a-351">このアプローチの概要については、このブログ投稿を参照してください: [https://blogs.msdn.microsoft.com/dynamicsaxbi/2016/06/09/power-bi-integration-with-entity-store-in-dynamics-ax-7-may-update/](https://blogs.msdn.microsoft.com/dynamicsaxbi/2016/06/09/power-bi-integration-with-entity-store-in-dynamics-ax-7-may-update/)</span><span class="sxs-lookup"><span data-stu-id="78a0a-351">For an overview of this approach, refer to the blog post here: [https://blogs.msdn.microsoft.com/dynamicsaxbi/2016/06/09/power-bi-integration-with-entity-store-in-dynamics-ax-7-may-update/](https://blogs.msdn.microsoft.com/dynamicsaxbi/2016/06/09/power-bi-integration-with-entity-store-in-dynamics-ax-7-may-update/)</span></span> |

> [!NOTE]
> <span data-ttu-id="78a0a-352">集計測定をモデル化する場合、**SSAS キューブ** オプションは、サポートされなくなりました。</span><span class="sxs-lookup"><span data-stu-id="78a0a-352">**SSAS Cube** option is no longer supported when modeling aggregate measurements.</span></span>

1. <span data-ttu-id="78a0a-353">**FMTAggregateMeasurement** ノードを選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-353">Select the **FMTAggregateMeasurement** node.</span></span> <span data-ttu-id="78a0a-354">右クリックし、**プロパティ** を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-354">Right-click and select **Properties**.</span></span> <span data-ttu-id="78a0a-355">プロパティ **Usage** の値として **InMemoryRealTime** を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-355">Select **InMemoryRealTime** as the value for the property **Usage**.</span></span>

    <span data-ttu-id="78a0a-356">[![プロパティ ウィンドウで選択された使用状況と SSASCube](./media/fmt9.png)](./media/fmt9.png)</span><span class="sxs-lookup"><span data-stu-id="78a0a-356">[![Usage and SSASCube selected in Properties window](./media/fmt9.png)](./media/fmt9.png)</span></span>

2. <span data-ttu-id="78a0a-357">InMemoryRealTime 集計モデルは、非集合縦棒ストア インデックス (NCCI) 技術を使用して SQL Server に配置されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-357">InMemoryRealTime aggregate models are deployed to SQL Server using Non-Clustered Column Store Index (NCCI) technology.</span></span> <span data-ttu-id="78a0a-358">NCCI は、分析および運用のワークロードを SQL Server データベースから供給できるメモリ内テクノロジーです。</span><span class="sxs-lookup"><span data-stu-id="78a0a-358">NCCIs is an in-memory technology that enables analytical and operational workloads to be served from SQL server database.</span></span> <span data-ttu-id="78a0a-359">NCCI インデックスは、他のインデックスのようなテーブルで定義することができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-359">NCCI indexes can be defined on tables similar to any other index.</span></span> <span data-ttu-id="78a0a-360">NCCI インデックスは手動で定義することができますが、フレームワークにはインデックスの要件を分析して必要に応じて基になるテーブルに追加する機能があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-360">While NCCI indexes can be defined manually, framework has the ability to analyze index requirements and add them to underlying tables where necessary.</span></span>
3. <span data-ttu-id="78a0a-361">ソリューション エクスプローラーで **FMAggregateMeasurement** を右クリックし、**列ストア インデックス オプション** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-361">Right-click **FMAggregateMeasurement** in Solution Explorer, and then click **Add Column store indices option**.</span></span> <span data-ttu-id="78a0a-362">複数の新しいインデックスがシステムによって追加されていることが分かります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-362">You will notice several new indexes being added by the system.</span></span>
4. <span data-ttu-id="78a0a-363">プロジェクトを保存してビルドします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-363">Save and build the project.</span></span>
5. <span data-ttu-id="78a0a-364">InMemoryRealTime 集計モデルは、モデルがリアルタイムで照会されるためデータの処理を必要としません。</span><span class="sxs-lookup"><span data-stu-id="78a0a-364">InMemoryRealTime aggregate models do not require data processing as the models are queried real-time.</span></span> <span data-ttu-id="78a0a-365">ビルドと共にデータベースの同期が無効の場合は手動でデータベースを同期します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-365">If you have not enabled database synchronization along with the build, manually synchronize the database.</span></span>

## <a name="model-a-kpi-to-show-revenue-per-rental"></a><span data-ttu-id="78a0a-366">KPI をモデル化してレンタルあたりの収益を表示する</span><span class="sxs-lookup"><span data-stu-id="78a0a-366">Model a KPI to show revenue per rental</span></span>
### <a name="model-a-kpi-in-visual-studio"></a><span data-ttu-id="78a0a-367">Visual Studio での KPI のモデル化</span><span class="sxs-lookup"><span data-stu-id="78a0a-367">Model a KPI in Visual Studio</span></span>

<span data-ttu-id="78a0a-368">上で定義した集計の測定を使用して Visual Studio で KPI の定義をモデル化します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-368">Model a KPI definition in Visual Studio by using the aggregate measurement you defined above.</span></span>

1. <span data-ttu-id="78a0a-369">**ソリューション エクスプローラー** で、**FMTutorial** を右クリックして **追加** をポイントしてから **新しい項目** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-369">In **Solution Explorer**, right-click **FMTutorial**, point to **Add**, and then click **New Item**.</span></span>
2. <span data-ttu-id="78a0a-370">**Dynamics 365コンポーネント** &gt; **分析** &gt; **主要業績評価指標** を選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-370">Select **Dynamics 365 Artifacts** &gt; **Analytics** &gt; **Key Performance Indicator**.</span></span> <span data-ttu-id="78a0a-371">KPI の名前として FMTRevenuePerRental と入力し、**追加** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-371">Enter FMTRevenuePerRental as the name of the KPI, and then click **Add**.</span></span> <span data-ttu-id="78a0a-372">名前は、KPI 間で一意でなければなりません。</span><span class="sxs-lookup"><span data-stu-id="78a0a-372">The name must be unique across KPIs.</span></span> <span data-ttu-id="78a0a-373">KPI が作成されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-373">The KPI is created.</span></span>
3. <span data-ttu-id="78a0a-374">**FMTRevenuePerRental** を選択し、**測定** を指定します。その他のプロパティは既定値のままにします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-374">Select **FMTRevenuePerRental**, and specify the **Measurement** Leave the default values for the other properties.</span></span>

    | <span data-ttu-id="78a0a-375">プロパティ</span><span class="sxs-lookup"><span data-stu-id="78a0a-375">Property</span></span>              | <span data-ttu-id="78a0a-376">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-376">Value</span></span>                   |
    |-----------------------|-------------------------|
    | <span data-ttu-id="78a0a-377">測定</span><span class="sxs-lookup"><span data-stu-id="78a0a-377">Measurement</span></span>           | <span data-ttu-id="78a0a-378">FMTAggregateMeasurement</span><span class="sxs-lookup"><span data-stu-id="78a0a-378">FMTAggregateMeasurement</span></span> |
    | <span data-ttu-id="78a0a-379">無効なしきい値</span><span class="sxs-lookup"><span data-stu-id="78a0a-379">Bad Threshold</span></span>         | <span data-ttu-id="78a0a-380">0</span><span class="sxs-lookup"><span data-stu-id="78a0a-380">0</span></span>                       |
    | <span data-ttu-id="78a0a-381">有効なしきい値</span><span class="sxs-lookup"><span data-stu-id="78a0a-381">Good Threshold</span></span>        | <span data-ttu-id="78a0a-382">0</span><span class="sxs-lookup"><span data-stu-id="78a0a-382">0</span></span>                       |
    | <span data-ttu-id="78a0a-383">スコアリング パターン</span><span class="sxs-lookup"><span data-stu-id="78a0a-383">Scoring Pattern</span></span>       | <span data-ttu-id="78a0a-384">MoreIsBetter</span><span class="sxs-lookup"><span data-stu-id="78a0a-384">MoreIsBetter</span></span>            |
    | <span data-ttu-id="78a0a-385">目標の表示</span><span class="sxs-lookup"><span data-stu-id="78a0a-385">Show Goal</span></span>             | <span data-ttu-id="78a0a-386">有</span><span class="sxs-lookup"><span data-stu-id="78a0a-386">Yes</span></span>                     |
    | <span data-ttu-id="78a0a-387">ステータスと傾向を表示</span><span class="sxs-lookup"><span data-stu-id="78a0a-387">Show Status and Trend</span></span> | <span data-ttu-id="78a0a-388">有</span><span class="sxs-lookup"><span data-stu-id="78a0a-388">Yes</span></span>                     |
    | <span data-ttu-id="78a0a-389">しきい値タイプ</span><span class="sxs-lookup"><span data-stu-id="78a0a-389">Threshold Type</span></span>        | <span data-ttu-id="78a0a-390">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-390">Value</span></span>                   |

4. <span data-ttu-id="78a0a-391">KPI 値の式を定義します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-391">Define the expression for the KPI value.</span></span> <span data-ttu-id="78a0a-392">**FMTRevenuePerRental** で **値** を選択し、次のプロパティを指定します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-392">Under **FMTRevenuePerRental**, select **Value**, and specify the following properties.</span></span>

    > [!NOTE]
    > <span data-ttu-id="78a0a-393">値はテーブルに表示されている順序で入力する必要があります。</span><span class="sxs-lookup"><span data-stu-id="78a0a-393">The values must be entered in the order they appear in the table:</span></span>

    | <span data-ttu-id="78a0a-394">プロパティ</span><span class="sxs-lookup"><span data-stu-id="78a0a-394">Property</span></span>      | <span data-ttu-id="78a0a-395">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-395">Value</span></span>                       |
    |---------------|-----------------------------|
    | <span data-ttu-id="78a0a-396">Value タイプ</span><span class="sxs-lookup"><span data-stu-id="78a0a-396">Value Type</span></span>    | <span data-ttu-id="78a0a-397">BasedOnMeasure</span><span class="sxs-lookup"><span data-stu-id="78a0a-397">BasedOnMeasure</span></span>              |
    | <span data-ttu-id="78a0a-398">メジャー グループ</span><span class="sxs-lookup"><span data-stu-id="78a0a-398">Measure Group</span></span> | <span data-ttu-id="78a0a-399">FMTRentalChargeExtendedView</span><span class="sxs-lookup"><span data-stu-id="78a0a-399">FMTRentalChargeExtendedView</span></span> |
    | <span data-ttu-id="78a0a-400">基準</span><span class="sxs-lookup"><span data-stu-id="78a0a-400">Measure</span></span>       | <span data-ttu-id="78a0a-401">RevenuePerRental</span><span class="sxs-lookup"><span data-stu-id="78a0a-401">RevenuePerRental</span></span>            |

5. <span data-ttu-id="78a0a-402">KPI 目標の式を定義します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-402">Define the expression for the KPI Goal.</span></span> <span data-ttu-id="78a0a-403">**目標** を選択し、次のプロパティを指定します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-403">Select **Goal**, and specify the following properties.</span></span>

    | <span data-ttu-id="78a0a-404">プロパティ</span><span class="sxs-lookup"><span data-stu-id="78a0a-404">Property</span></span>  | <span data-ttu-id="78a0a-405">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-405">Value</span></span>        |
    |-----------|--------------|
    | <span data-ttu-id="78a0a-406">目標タイプ</span><span class="sxs-lookup"><span data-stu-id="78a0a-406">Goal Type</span></span> | <span data-ttu-id="78a0a-407">BasedOnValue</span><span class="sxs-lookup"><span data-stu-id="78a0a-407">BasedOnValue</span></span> |
    | <span data-ttu-id="78a0a-408">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-408">Value</span></span>     | <span data-ttu-id="78a0a-409">250</span><span class="sxs-lookup"><span data-stu-id="78a0a-409">250</span></span>          |

    > [!NOTE]
    > <span data-ttu-id="78a0a-410">集計測定に基づく目標を定義することもできます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-410">You could have defined a goal based on an aggregate measure as well.</span></span> <span data-ttu-id="78a0a-411">この場合、目標として番号を定義します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-411">In this case, we will define a number as the goal.</span></span>

6. <span data-ttu-id="78a0a-412">KPI 定義を保存します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-412">Save the KPI definition.</span></span>

### <a name="preview-kpi-in-client"></a><span data-ttu-id="78a0a-413">クライアントで KPI をプレビュー</span><span class="sxs-lookup"><span data-stu-id="78a0a-413">Preview KPI in client</span></span>

<span data-ttu-id="78a0a-414">次に、クライアントで KPI 定義をプレビューします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-414">Next you will preview the KPI definition in the client.</span></span>

1. <span data-ttu-id="78a0a-415">**FMTutorial** を右クリックし、**再ビルド** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-415">Right-click **FMTutorial**, and then click **Re-Build**.</span></span> <span data-ttu-id="78a0a-416">ビルドの完了時に、**同期...データベース** オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-416">On completion of the build, select the **Synchronize ... database** option.</span></span>
2. <span data-ttu-id="78a0a-417">Internet Explorer を開き、Rainier インスタンスの基本 URL に移動します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-417">Open Internet Explorer, and navigate to your Rainier instance base URL.</span></span>
3. <span data-ttu-id="78a0a-418">**アプリのリンク** &gt; **フリート管理** &gt; **ワークスペース** &gt; **予約管理** の **Reservation Management workspace** に移動します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-418">Navigate to the **Reservation Management workspace** under **App links** &gt; **Fleet Management** &gt; **Workspaces** &gt; **Reservation Management**.</span></span>
4. <span data-ttu-id="78a0a-419">**総収益** KPI タイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-419">Select the KPI tile **Total Revenue**.</span></span> <span data-ttu-id="78a0a-420">**収益合計** KPI の KPI に関する詳細ページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-420">KPI details page for T **otal Revenue** KPI will be displayed.</span></span>
5. <span data-ttu-id="78a0a-421">新しく定義した KPI に移動するには、左上の **リストを表示** アイコンを選択します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-421">To navigate to the newly defined KPI, select the **Show list** icon on top left.</span></span> <span data-ttu-id="78a0a-422">表示される KPI のリストから **FMTRevenuePerRental** を選択します</span><span class="sxs-lookup"><span data-stu-id="78a0a-422">From the list of KPIs shown, select **FMTRevenuePerRental**.</span></span>

    <span data-ttu-id="78a0a-423">新しい KPI の KPI に関する詳細ページ **FMTRevenuePerRental** が表示されることに注意します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-423">Notice that the KPI details page for the new KPI, **FMTRevenuePerRental** is shown.</span></span> <span data-ttu-id="78a0a-424">トレン グラフは定義しませんでしたが、開発者が定義した限定されたメタデータに基づいて一連のグラフが作成されました。</span><span class="sxs-lookup"><span data-stu-id="78a0a-424">Even though we did not define trend charts, the system created a set of charts based on the limited metadata defined by the developer.</span></span> <span data-ttu-id="78a0a-425">ユーザーは、KPI 定義を変更して、クライアントに新しい定義を作成することができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-425">Users have the ability to modify KPI definitions and create new ones in the client.</span></span> <span data-ttu-id="78a0a-426">次に、新たに定義された KPI を変更します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-426">Next, you will modify the newly defined KPI.</span></span>

6. <span data-ttu-id="78a0a-427">この機能を示すために、KPI 目標を変更することができます。</span><span class="sxs-lookup"><span data-stu-id="78a0a-427">To demonstrate this capability, you can change the KPI Goal.</span></span> <span data-ttu-id="78a0a-428">左上の **編集** ボタンをクリックし、目標値として 900 を入力します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-428">Click the **Edit** button on top left, and enter 900 as the Goal Value.</span></span>
7. <span data-ttu-id="78a0a-429">次のようにしきい値のプロパティを変更します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-429">Modify the threshold properties as follows:</span></span>

    |  <span data-ttu-id="78a0a-430">プロパティ</span><span class="sxs-lookup"><span data-stu-id="78a0a-430">Property</span></span>          | <span data-ttu-id="78a0a-431">先頭値</span><span class="sxs-lookup"><span data-stu-id="78a0a-431">Value</span></span>      |
    |--------------------|------------|
    | <span data-ttu-id="78a0a-432">しきい値タイプ</span><span class="sxs-lookup"><span data-stu-id="78a0a-432">Threshold Type</span></span>     | <span data-ttu-id="78a0a-433">パーセンテージ</span><span class="sxs-lookup"><span data-stu-id="78a0a-433">Percentage</span></span> |
    | <span data-ttu-id="78a0a-434">次の値未満の場合に赤</span><span class="sxs-lookup"><span data-stu-id="78a0a-434">Red if less than</span></span>   | <span data-ttu-id="78a0a-435">90</span><span class="sxs-lookup"><span data-stu-id="78a0a-435">90</span></span>         |
    | <span data-ttu-id="78a0a-436">次の値を超えた場合に緑</span><span class="sxs-lookup"><span data-stu-id="78a0a-436">Green if more than</span></span> | <span data-ttu-id="78a0a-437">110</span><span class="sxs-lookup"><span data-stu-id="78a0a-437">110</span></span>        |

8. <span data-ttu-id="78a0a-438">変更を保存するには、左下の **保存** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="78a0a-438">Click **Save** on the bottom left to save changes.</span></span> <span data-ttu-id="78a0a-439">KPI の状態の色が表示される KPI タイルで変更されたことに注意します。</span><span class="sxs-lookup"><span data-stu-id="78a0a-439">Notice that the KPI status color has changed in the KPI tile shown.</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]