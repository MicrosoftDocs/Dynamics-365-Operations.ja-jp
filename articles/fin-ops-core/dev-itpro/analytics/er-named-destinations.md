---
title: 印刷管理レコード固有の ER 送信先を構成する
description: この記事では、送信ドキュメントを生成するように構成された電子申告 (ER) 形式に対して、印刷管理レコード固有の送信先を構成する方法について説明します。
author: kfend
ms.date: 08/03/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: filatovm
ms.search.validFrom: 2021-08-01
ms.dyn365.ops.version: 10.0.21
ms.custom: 97423
ms.assetid: f3055a27-717a-4c94-a912-f269a1288be6
ms.search.form: ERSolutionTable, ERFormatDestinationTable
ms.openlocfilehash: 7c92d580f6adebdba12b7964a42fd4752e9c9205
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/12/2022
ms.locfileid: "9285064"
---
# <a name="configure-print-management-record-specific-er-destinations"></a>印刷管理レコード固有の ER 送信先を構成する

[!include [banner](../includes/banner.md)]

この記事では、システム管理者または売掛金勘定係のロールを持つユーザーが次のタスクを実行する方法について説明します。

- 自由形式の請求書を生成する ER ソリューションのための名前付き[電子申告 (ER)](general-electronic-reporting.md) 送信先を構成します。
- ER 送信先を 1 つの[印刷管理](document-reporting-services.md) レコードに割り当てます。

USMF 社を例に使用して、これらの手順について解説します。 コーディングは必要ありません。

## <a name="introduction"></a>概要

送信ドキュメントを生成するために使用する ER [形式](general-electronic-reporting.md) [構成](general-electronic-reporting.md#Configuration) のファイル出力コンポーネントの各フォルダーに対して、[送信先](electronic-reporting-destinations.md) を構成できます。 このタイプの ER 形式を実行し、適切なアクセス権を持つ場合、実行時に構成した送信先設定を変更することもできます。

Microsoft Dynamics 365 Finance **バージョン 10.0.17 以降** では、ER 形式に対してアクション コードを[設定](er-apis-app10-0-17.md) してユーザーがその ER 形式を実行する際に行うアクションを指定することができます。 たとえば、**売掛金勘定** モジュールでは、印刷管理の設定で、自由書式の請求書などの特定のビジネス ドキュメントを生成する ER 形式を選択できます。 **表示** を選択して請求書をプレビューするか、**印刷** を選択してプリンタに送信できます。 実行時に実行中の ER 形式に対してアクションが渡される場合、[ユーザー アクションごとに異なる ER 送信先を構成](er-action-dependent-destinations.md) できます。

Finance の **バージョン 10.0.21 以降** では、名前付き送信先を ER 形式に[設定](er-apis-app10-0-21.md) し、その ER 形式を実行するときに処理される印刷管理レコードに割り当てることができます。 たとえば、**売掛金勘定** モジュールの印刷管理設定で、次のアクションを実行する **元の** アクションを構成します。

- ER フォーマットを実行します。
- 生成された請求書を電子メールで送信します。
- レコードの **コピー** を構成して、同じ形式を実行します。
- 請求書のコピーをネットワーク プリンターに印刷します。

この場合、実行中の ER 形式に対して異なる ER 送信先を構成し、異なる印刷管理レコードの送信先を選択する必要があります。

## <a name="prerequisites"></a>必要条件

始める前に、[機能管理](../../fin-ops/get-started/feature-management/feature-management-overview.md#the-feature-management-workspace) ワークスペースで **印刷管理品目ごとに ER 送信先を設定する許可** 機能を有効にする必要があります。 また、ソース コードを変更して、現在の Finance インスタンスで名前付き ER 送信先をコンフィギュレーションし、[新しい](er-apis-app10-0-21.md) ER API を有効にする必要があります。

また、**自由書式の請求書 (Excel)** の ER コンフィギュレーションを Finance インスタンスに[インポート](er-download-configurations-global-repo.md) する必要があります。

## <a name="configure-a-new-er-destination"></a>新しい ER 送信先の構成

1. **売掛金勘定** \> **請求書** \> **すべての自由書式の請求書** に移動します。
2. 顧客アカウント **US-001** の請求書を選択します。
3. **自由書式の請求書** ページの、**請求書** タブにある **印刷管理** グループで、**印刷管理** を選択します。
4. **印刷管理設定** ページで、**モジュール- 売掛金勘定** \> **ドキュメント** \> **自由書式の請求書** の順に展開し、**元の** レコードを選択してから次の手順を実行します。

    1.  選択したレコードの現在の設定を確認します。
        -   既定の SSRS レポート **FreeTextInvoice.Report** は、**レポートの形式** フィールドで選択します。
        -   **\<Default\>** 名は **送信先** フィールドに表示され、割り当てられた SSRS レポートのためのカスタム送信先がないことを示しています。 
    2.  **レポート形式** フィールドで、**自由書式の請求書 (Excel)** ER 形式構成を選択します。
        -   **送信先** フィールドの名前は、**送信先名** に変更されます。
        -   **\<No named destination\>** 名は **送信先名** フィールドに表示され、割り当てられた ER 形式のための名前付き送信先がないことを示しています。
    3.  **送信先名** フィールドの右側の矢印を選択します。    
    4. **電子申告の名前付き送信先** ページの **名前** フィールドに、**主送信先** と入力します。
    5. **保存** を選択します。
    6. **ファイル送信先** クイック タブで、**レポート** コンポーネントの **電子メール** 送信先を[構成](er-destination-type-email.md) します。
    7. **電子申告の名前付き送信先** ページを閉じます。
    8. **印刷管理設定** ページの **送信先名** フィールドで、**主送信先** を選択します。

    ![選択した ER 形式に対する名前付き ER 送信先の設定と、印刷管理設定ページの構成済み印刷管理レコードへの割り当て](./media/er-named-destinations-01.gif)

    これで、名前付きの ER 送信先 **主送信先** を **自由書式の請求書 (Excel)** 形式に構成し、**モジュール- 売掛金勘定** \> **ドキュメント** \> **自由書式の請求書** の下の **元の** 印刷管理レコードに割り当てました。

5. **モジュール- 売掛金勘定** \> **Account - US-001** \> **自由書式の請求書** を展開し、**元の** レコードを選択してから次の手順を実行します。

    1. レコードを選択したままで (または右クリックして)、**上書き** を選択します。
    2. **送信先名** フィールドの右側の矢印を選択します。
    3. **電子申告の名前付き送信先** ページのアクション ウィンドウで、**新規** を選択します。
    4. **名前** フィールドに、**US-001 送信先** と入力します。
    5. **ファイル送信先** クイック タブで、**レポート** コンポーネントの **プリンター** 送信先を[構成](er-destination-type-print.md) します。
    6. **電子申告の名前付き送信先** ページを閉じます。
    7. **印刷管理設定** ページの **送信先名** フィールドで、**US-001 送信先** を選択します。

    ![選択した ER 形式に対する名前付き ER 送信先の構成と、印刷管理設定ページの構成済み印刷管理レコードへの割り当て](./media/er-named-destinations-02.gif)

    これで、名前付きの ER 送信先 **US-001 送信先** を **自由書式の請求書 (Excel)** 形式に構成し、**モジュール- 売掛金勘定** \> **Account - US-001** \> **自由書式の請求書** の下の **元の** 印刷管理レコードに割り当てました。

これで、自由書式の請求書が処理される際に、**自由書式の請求書 (Excel)** ER 形式が実行され、次のいずれかのイベントが発生します。

- 自由書式の請求書が US-001 以外の顧客向けである場合、生成されたドキュメントは電子メールで送信されます。
- 自由形式の請求書が US-001 の顧客向けである場合、生成されたドキュメントは印刷されます。

> [!NOTE]
> 実行時に処理される印刷管理レコードに名前付き送信先が定義されていない場合、既定の ER 送信先は、実行中の ER 形式で使用できる場合に使用されます。

> [!IMPORTANT]
> **電子申告送信先** ページ (**組織管理** \> **電子申告** \> **電子申告送信先**) で、少なくとも 1 つの名前付き送信先が構成されている ER 形式を選択した場合、名前付き送信先の存在が通知されます。
>
> ![電子申告送信先ページで選択した ER 形式に対して構成されている名前付き送信先の存在に関する通知](./media/er-named-destinations-03.png)
>
> 既定の送信先を削除すると、すべての名前付き送信先も削除されます。 名前付き送信先が印刷管理レコード用に選択された場合、名前付き送信先の選択がキャンセルされます。

## <a name="copy-an-existing-er-destination-as-a-new-named-destination"></a>既存の ER 送信先を新しい名前付き送信先としてコピー

ER 形式で既定の名前付き ER 送信先を使用できる場合、新しい ER 送信先のテンプレートとして使用できます。 既定の送信先に基づいて新しい ER 送信先を作成するには、**電子申告の名前付き送信先** の **既定からコピー** を選択します。 新しい送信先は **既定** になります。 このステップは、必要に応じて何回でも繰り返し実行できます。

新しい名前付き送信先のテンプレートとして既存の名前付き送信先を選択できます。 選択した名前付き送信先に基づいて新しい ER 送信先を作成するには、**電子申告の名前付き送信先** の **コピー** を選択します。 新しい送信先の名前は、選択した名前付き送信先と同じですが、接尾語「Copy」が追加されます。 このステップは、必要に応じて何回でも繰り返し実行できます。

## <a name="security-considerations"></a>セキュリティ上の注意事項

名前付き ER の送信先は、このタスクを実行する [アクセス許可](../sysadmin/role-based-security.md#permissions) がある場合にのみ、**印刷管理の設定** ページで設定できます。 **電子申告形式の送信先を構成する**[職務権限](../sysadmin/role-based-security.md#duties) が [セキュリティ ロール](../sysadmin/role-based-security.md#security-roles) の 1 つに割り当てられている場合、アクセス許可が付与されます。 詳細については、[セキュリティ上の注意事項](electronic-reporting-destinations.md#security-considerations) を参照してください。

## <a name="additional-resources"></a>追加リソース

[電子申告 (ER) の概要](general-electronic-reporting.md)

[電子申告 (ER) の送信先](electronic-reporting-destinations.md)

[Application update 10.0.17 での電子申告フレームワーク API の変更](er-apis-app10-0-17.md)

[Application update 10.0.21 での電子申告フレームワーク API の変更](er-apis-app10-0-21.md)

[コードを変更して名前付き送信先を構成し使用するユーザーを有効にする](er-api-named-destinations.md)

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
