---
title: 国コンテキスト依存の ER モデル マッピングのコンフィギュレーション
description: このトピックでは、使用を制御する法人の国/地域コンテキストによって異なる、ER モデル マッピングを設定する方法について説明します。
author: NickSelin
ms.date: 11/11/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.2
ms.openlocfilehash: 64963348ef2cf850477d03fcb9a40d3a167c715bea86eca1d756f01f54472d5a
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/05/2021
ms.locfileid: "6718554"
---
# <a name="configure-country-context-dependent-er-model-mappings"></a>国コンテキスト依存の ER モデル マッピングのコンフィギュレーション

[!include[banner](../includes/banner.md)]

電子申告 (ER) モデル マッピングをコンフィギュレーションして、一般的な ER データ モデルを実装しますが、Dynamics 365 Finance に固有のものにすることができます。 このトピックでは、ER データ モデルに複数の ER モデル マッピングを設計して、異なる国/地域コンテキストがある会社から実行される対応する ER 形式によってどのように使用されるかを制御する方法について説明します。

## <a name="prerequisites"></a>必要条件

このトピックの例を完了するには、次のアクセスが必要です:

- 次のいずれかのロールに対応する財務にアクセスします。
    - 電子申告開発者
    - 電子申告機能コンサルタント
    - システム管理者

- 次のいずれかの役割で、Finance と同じテナントに対してプロビジョニングされている規制コンフィギュレーション サービス (RCS) のインスタンスにアクセスします。
    - 電子申告開発者
    - 電子申告機能コンサルタント
    - システム管理者

このトピックの一部の手順では、ER 形式を実行する必要があります。 場合によっては、ER 形式の実行が、現在ログインしている会社の国/地域コンテキストによって影響を受けることがあります。 必要な国/地域コンテキストを RCS で使用できる会社の場合は、現在の RCS インスタンスで ER 形式を実行できます。 それ以外の場合は、ER データ モデルを使用して ER モデル マッピングと ER 形式コンフィギュレーションの完成版を Finance インスタンスにアップロードし、その Finance インスタンスで ER 形式を実行する必要があります。 RCS に格納されているコンフィギュレーションを Finance インスタンスにインポートする方法については、[コンフィギュレーションを RCS からインポートする](rcs-download-configurations.md) を参照してください。

## <a name="single-model-mapping-case"></a>単一モデルのマッピング ケース

このトピックの[付録 1](#appendix1) の手順に従って、必要な ER コンポーネントを設計します。 これで、**エントリ ポイント 1** 定義のモデル マッピングを含む **マッピング (一般)** モデル マッピング コンフィギュレーションが完成しました。

![ER コンフィギュレーション ページ。](./media/RCS-Context-specific-mapping-Tree.PNG)

### <a name="run-the-configured-format"></a>構成された形式の実行

1.  **バージョン** クイック タブの **構成ページ** で、**実行** を選択します。
2.  **OK** を選択します。

Web ブラウザーで、実行した ER 形式によって生成されたテキスト ファイルをダウンロードすることができます。 この形式は **エントリ ポイント 1** の定義を使用するようにコンフィギュレーションされているため、この定義のマッピングを含む基本モデルで現在使用できるモデル マッピングは 1 つのみです。実行される ER 形式では、**マッピング (一般)** コンフィギュレーションの **マッピング (一般)** モデル マッピングがデータソースとして使用されています。 このため、ダウンロードしたファイルには、**一般的な機能 1** テキストが含まれています。

## <a name="multiple-shared-model-mappings-case"></a>複数の共有モデルのマッピング ケース

このトピックの[付録 2](#appendix2) の手順に従って、必要な ER コンポーネントを設計します。 これで、それぞれに **エントリ ポイント 1** 定義を含む、**マッピング (一般)** および **マッピング (一般) カスタム** モデル マッピング コンフィギュレーションが完成しました。

![ER コンフィギュレーション ページ。](./media/RCS-Context-specific-mapping-TreeCustom.PNG)

### <a name="run-the-configured-format"></a>構成された形式の実行

1.  **コンフィギュレーション** ページのコンフィギュレーション ツリーで、**マッピングを知るための形式** を選択します。
2.  **バージョン** クイック タブで、**実行** を選択します。
3.  **OK** を選択します。

選択した ER 形式の実行が失敗することを確認します。 **マッピング (一般)** および **マッピング (一般) カスタム** モデル マッピング コンフィギュレーションの、**マッピングを知るためのモデル** モデルおよび **エントリ ポイント 1** 定義に、複数のモデル マッピングが存在することを通知するエラー メッセージが表示されます。 また、そのメッセージは、これらのコンフィギュレーションのいずれかを既定のコンフィギュレーションとして選択することをお勧めします。

![ER コンフィギュレーション ページ。](./media/RCS-Context-specific-mapping-FormatRunCustomFailed.PNG)

### <a name="define-a-default-mapping-configuration"></a>既定のマッピング コンフィギュレーションの定義

次の手順に従って、**マッピング (一般) カスタム** モデル マッピング コンフィギュレーションを既定のコンフィギュレーションとして定義します。これにより、そのマッピングを **マッピングを知るための形式** ER 形式のデータ ソースとして使用できます。

1.  **コンフィギュレーション** ページのコンフィギュレーション ツリーで、**マッピング (一般) カスタム** を選択します。
2.  必要に応じて、**編集** を選択し、現在のページを編集できるようにします。
3.  **モデル マッピングの既定値** オプションを **はい** に設定します。
4.  **保存** を選択します。

![ER コンフィギュレーション ページ。](./media/RCS-Context-specific-mapping-MappingsCustomDefault.PNG)

### <a name="run-the-configured-format"></a>構成された形式の実行

1.  **コンフィギュレーション** ページのコンフィギュレーション ツリーで、**マッピングを知るための形式** を選択します。
2.  **バージョン** クイック タブで、**実行** を選択します。
3.  **OK** を選択します。

選択した ER 形式の実行が成功することを確認します。 Web ブラウザーで、実行した ER 形式によって生成されたテキスト ファイルをダウンロードすることができます。 この形式は **エントリ ポイント 1** の定義を使用するようにコンフィギュレーションされているため、**マッピング (一般) カスタム** モデル マッピング コンフィギュレーションが既定のコンフィギュレーションとして選択されます。実行される ER 形式では、**マッピング (一般) カスタム** コンフィギュレーションの **マッピング (一般) コピー** モデル マッピングがデータ ソースとして使用されます。 このため、ダウンロードしたファイルには、**一般的な機能 1 カスタム** テキストが含まれています。

> [!NOTE]
> 現在ログインしている会社を変更し、この ER 形式を再度実行すると、既定の ER モデル マッピング コンフィギュレーションには会社に依存する制限が含まれないので、生成されたファイルで同じコンテンツを取得できます。

## <a name="multiple-mixed-model-mappings-case"></a>複数の混合モデルのマッピング ケース

このトピックの[付録 3](#appendix3) の手順に従って、必要な ER コンポーネントを設計します。 これで、**エントリ ポイント 1** 定義のモデル マッピングを含む、**マッピング (一般)**、**マッピング (一般) カスタム**、および **マッピング (FR) モデル マッピング** コンフィギュレーションが完成しました。

**マッピング (FR)** モデル マッピング コンフィギュレーションのバージョン 1 が、フランスの国/地域のコンテキストがある Finance の会社で実行される、**マッピングを知るためのモデル** モデルの ER 形式にのみ適用されるようにコンフィギュレーションされていることに注意してください。

![ER コンフィギュレーション ページ。](./media/RCS-Context-specific-mapping-TreeFR.PNG)

### <a name="run-the-configured-format"></a>構成された形式の実行

1.  会社を **FRSI** に変更します。
2.  **コンフィギュレーション** ページのコンフィギュレーション ツリーで、**マッピングを知るための形式** を選択します。
3.  **バージョン** クイック タブで、**実行** を選択します。
4.  **OK** を選択します。

選択した ER 形式の実行が成功することを確認します。 Web ブラウザーで、実行した ER 形式によって生成されたテキスト ファイルをダウンロードすることができます。 この形式は **エントリ ポイント 1** の定義を使用するようにコンフィギュレーションされているため、**マッピング (一般) カスタム** モデル マッピング コンフィギュレーションが既定のコンフィギュレーションとして選択されます。実行される ER 形式では、**マッピング (一般) カスタム** コンフィギュレーションの **マッピング (一般) コピー** モデル マッピングがデータ ソースとして使用されます。 このため、ダウンロードしたファイルには、**一般的な機能 1 カスタム** テキストが含まれています。

### <a name="define-the-france-specific-mapping-configuration-as-the-default-configuration"></a>既定のコンフィギュレーションとしての、フランス固有のマッピング コンフィギュレーションの定義

次の手順に従って、既定のコンフィギュレーションとして、カスタム **マッピング (FR)** モデル マッピング コンフィギュレーションを定義します。 このマッピングはフランスに固有であるため、**ISO 国 / 地域コード** フィールドで、**FR** の国コードが指定されているすべてのモデル マッピング コンフィギュレーションの既定のマッピングが考慮されます。

1.  **コンフィギュレーション** ページのコンフィギュレーション ツリーで、**マッピング (FR)** を選択します。
2.  必要に応じて、**編集** を選択し、現在のページを編集できるようにします。
3.  **モデル マッピングの既定値** オプションを **はい** に設定します。
4.  **保存** を選択します。

![ER コンフィギュレーション ページ。](./media/RCS-Context-specific-mapping-TreeFRDefault.PNG)

### <a name="run-the-configured-format"></a>構成された形式の実行

1.  **コンフィギュレーション** ページのコンフィギュレーション ツリーで、**マッピングを知るための形式** を選択します。
2.  **バージョン** クイック タブで、**実行** を選択します。
3.  **OK** を選択します。

選択した ER 形式の実行が成功することを確認します。 Web ブラウザーで、実行した ER 形式によって生成されたテキスト ファイルをダウンロードすることができます。 この形式は **エントリ ポイント 1** の定義を使用するようにコンフィギュレーションされているため、**マッピング (FR)** モデル マッピング コンフィギュレーションが既定のコンフィギュレーションとして選択されます。実行される ER 形式では、**マッピング (FR)** コンフィギュレーションの **マッピング (FR) コピー** モデル マッピングがデータ ソースとして使用されます。 このため、ダウンロードしたファイルには、**FR 機能 1** テキストが含まれています。

> [!NOTE]
> 現在ログインしている会社を変更し、この ER 形式を再度実行した場合、出力は、選択した会社の国/地域のコンテキストによって異なります。

## <a name="other-model-mapping-cases"></a>他のモデルのマッピング ケース

既に説明したように、ER 形式を実行するためのモデル マッピングの選択は、次のように機能します。

- ER 形式によって使用されるモデル マッピング定義 (このトピックの例では **エントリ ポイント 1**) を指定します。
- 指定された定義のあるマッピングと、コンフィギュレーションされた国/地域のコンテキスト制限を満たすマッピング コンフィギュレーションのすべてが、ER 形式を実行するために使用される可能性があります (このトピックの例では、**マッピング (一般)**、**マッピング (一般) カスタム**、および **マッピング (FR)**)。
- 国/地域コンテキストの制限のある既定のモデル マッピングは、選択の優先順位が最も高くなります (このトピックの例では **マッピング (FR)**)。
- 国/地域コンテキストの制限のない既定のモデル マッピングは、選択の優先順位が次に高くなります (このトピックの例では **マッピング (一般) カスタム**)。
- 国/地域コンテキストの制限があるモデル マッピングは、国/地域コンテキストの制限のないモデル マッピングよりも選択の優先順位が高くなります。

次の表に、モデル マッピング設定が可能なすべてのケースの、モデル マッピング選択の結果についての情報を示します。

- 列 1 は、国/地域コンテキストの制限のない最初のモデル マッピング (共有 **マッピング (一般)** マッピングなど) が存在するかどうかを示し、存在する場合、**モデル マッピングの既定値** オプションが **はい** に設定されます。
- 列 2 は、国/地域コンテキストの制限のない 2 番目のモデル マッピング (共有 **マッピング (一般) カスタム** マッピングなど) が存在するかどうかを示し、存在する場合、**モデル マッピングの既定値** オプションが **はい** に設定されます。
- 列 3 は、国/地域 A のコンテキストの制限のある最初のモデル マッピング (フランス固有の **マッピング (FR)** マッピングなど) が存在するかどうかを示し、存在する場合、**モデル マッピングの既定値** オプションが **はい** に設定されます。
- 列 4 は、国/地域 A のコンテキストの制限のある 2 番目のモデル マッピングが存在するかどうかを示し、存在する場合、**モデル マッピングの既定値** オプションが **はい** に設定されます。
- 列 5 は、国/地域 A のコンテキストのある会社の管理下で ER 形式を実行するためのモデル マッピング選択の結果を示します。
- 列 6 は、国/地域 B のコンテキストのある会社の管理下で ER 形式を実行するためのモデル マッピング選択の結果を示します。

この表では、プラス記号 (+) はER 形式 (Finance または RCS) を実行するために使用される Microsoft Azure サービスの現在のインスタンスにモデル マッピング コンフィギュレーションが存在することを示します。

| ケース | 国/地域コンテキストがないモデル マッピング 1 (MM1) | 国/地域コンテキストがないモデル マッピング 2 (MM2) | 国/地域 A のコンテキストがあるモデル マッピング 1 (MM1A) | 国/地域 A のコンテキストがあるモデル マッピング 2 (MM2A) | 国/地域 A コンテキストのある会社の管理下で実行する | 国/地域 B コンテキストのある会社の管理下で実行する |
|---------|---------|---------|---------|---------|---------------------------|----------------------------|
|         |     1   |     2   |    3    |    4    |           5               |            6               |
|     1   |         |         |         |         | エラー (マッピングがありません)   | エラー (マッピングがありません)    |
|     2   |     +   |         |         |         | MM1                       | MM1                        |
|     3   |     +   |     +   |         |         | エラー (複数のマッピング) | エラー (複数のマッピング)  |
|     4   |     +   |         |    +    |         | MM1A                      | MM1                        |
|     5   |     +   |         |    +    |    +    | エラー (複数のマッピング) | MM1                        |
|     6   |     +   | 既定 |    +    |    +    | MM2                       | MM2                        |
|     7   |     +   |         | 既定 |         | MM1A                      | MM1                        |
|     8   |     +   |         | 既定 |    +    | MM1A                      | MM1                        |
|     9   |     +   |         | 既定 | 既定 | エラー (複数のマッピング) | MM1                        |
|    10   | 既定 |         |         |         | MM1                       | MM1                        |
|    11   | 既定 |    +    |         |         | MM1                       | MM1                        |
|    12   | 既定 |         |    +    |         | MM1                       | MM1                        |
|    13   | 既定 | 既定 |         |         | エラー (複数のマッピング) | エラー (複数のマッピング)  |
|    14   | 既定 |         | 既定 |         | MM1A                      | MM1                        |
|    15   | 既定 |         | 既定 | 既定 | MM1A                      | MM2A                       |
|    16   |         |         |    +    |    +    | MM1A                      | MM2A                       |
|    17   |         |         | 既定 | 既定 | MM1A                      | MM2A                       |

## <a name="learn-what-mapping-was-used-in-the-execution-of-an-er-format"></a>ER 形式の実行に使用されたマッピングについて

### <a name="configure-er-user-parameters"></a>ER ユーザー パラメーターのコンフィギュレーション

1.  **構成** ページのアクション ウィンドウの **コンフィギュレーション** タブで、**ユーザー パラメーター** を選択します。
2.  **デバッグモードで実行する** オプションを **はい** に設定します。
4.  **OK** を選択します。

### <a name="run-the-configured-format"></a>構成された形式の実行

1.  **コンフィギュレーション** ページのコンフィギュレーション ツリーで、**マッピングを知るための形式** を選択します。
2.  **バージョン** クイック タブで、**実行** を選択します。
3.  **OK** を選択します。

### <a name="review-the-er-debug-log"></a>ER デバッグ ログを確認する

1.  ナビゲーション ウィンドウで、**モジュール \> 組織の管理 \> 電子申告 \> 構成デバッグ ログ** へ移動します。
2.  **このページを再読み込みする** ボタンを選択します。

![ER 実行ログ ページ。](./media/RCS-Context-specific-mapping-DebugLog.PNG)

実行される ER 形式の ER デバッグ ログに新しいレコードが追加されていることを確認します。 このレコードの **レベル** フィールドは **情報** に設定されているので、レコードは情報になります。 形式コンポーネント フィールドは、**マッピング コンフィギュレーション** に設定されているので、(**コンフィギュレーション名** フィールドで選択された) **マッピングを知るための形式** ER 形式 の実行中に使用されたモデル マッピングについての通知が表示されます。 **生成されたテキスト** フィールドの内容は、**マッピング (FR)** コンフィグレーションの **マッピング (FR)** が、このレポートの実行に使用されたことを通知します。

## <a name="appendix-1"></a><a name="appendix1"></a>付録 1

### <a name="configure-a-sample-data-model"></a>サンプル データ モデルのコンフィギュレーション

RCS インスタンスにサインインする。

この例では、サンプル会社 Litware, Inc. 用に、コンフィギュレーションを作成します。これらの手順を完了するには、まず、RCS で、手順 [コンフィギュレーション プロバイダーの作成および有効なプロバイダーとしてのマーク付け](tasks/er-configuration-provider-mark-it-active-2016-11.md) にあるステップを完了する必要があります。

#### <a name="create-an-er-data-model-configuration"></a>ER データ モデル コンフィギュレーションの作成

1.  既定のダッシュボードで、**電子申告** を選択します。
2.  **コンフィギュレーションをレポートする** タイルを選択します。
3.  **コンフィギュレーション** ページで、**コンフィギュレーションの作成** を選択します。
4.  **名前** フィールドのドロップダウン ダイアログ ボックスに、**マッピングを知るためのモデル** を入力します。
5.  **コンフィギュレーションの作成** を選択します。
6.  **コンポーネントのコンフィギュレーション** クイック タブを選択します。

この ER コンフィギュレーションのドラフト バージョン 1 を編集する準備ができていることを確認します。 このバージョンには、データ モデル コンポーネントが含まれています。

#### <a name="design-a-sample-data-model"></a>サンプル データ モデルのデザイン

1.  **コンフィギュレーション** ページで、**デザイナー** を選択します。
2.  **新規** を選択します。
3.  ドロップダウン ダイアログボックスの **名前** フィールドに **エントリ ポイント 1** を入力します。
4.  **追加** を選択します。
5.  **新規** を選択します。
6.  **名前** フィールドのドロップダウン ダイアログ ボックスに、**機能説明** を入力します。
7.  **追加** を選択します。
8.  **新規** を選択します。
9.  **新しいノード** フィールド グループのドロップダウン ダイアログ ボックスで、**モデル ルート** を選択します。
10. **名前** フィールドに、**エントリ ポイント 2** を入力します。
11. **エントリ ポイント 2** を選択します。
12. **追加** を選択します。
13. **新規** を選択します。
14. **名前** フィールドのドロップダウン ダイアログ ボックスに、**機能説明** を入力します。
15. **追加** を選択します。

    ![ER データ モデル デザイナーのページ。](./media/RCS-Context-specific-mapping-Model.PNG)

16. **保存** を選択します。
17. ページを閉じます。

#### <a name="complete-the-modified-version-of-the-model-configuration"></a>モデル コンフィギュレーションの変更されたバージョンを完了する

1.  **バージョン** クイック タブの **コンフィギュレーション** ページで、**ステータスの変更** を選択します。

    > 設計されたモデル コンフィギュレーションのステータスを **ドラフト** から **完了** に変更し、必要なモデル マッピングと形式を設計するために使用できるようにします。

2.  **完了** を選択します。
3.  **OK** を選択します。

作成したコンフィギュレーションが完了したバージョン 1 として保存されることに注意してください。

### <a name="configure-a-sample-model-mapping"></a>サンプル モデル マッピングのコンフィギュレーション

#### <a name="create-an-er-model-mapping-configuration"></a>ER モデル マッピング コンフィギュレーションを作成する

1.  **コンフィギュレーション** ページで、**コンフィギュレーションの作成** を選択します。
2.  ドロップダウン ダイアログ ボックスにある **新しい** フィールド グループで、**マッピングを知るためのモデル データ モデルに基づくモデル マッピング** を選択します。
3.  **名前** フィールドに、**マッピング (一般)** を入力します。
4.  **データ モデル定義** フィールドで、**エントリ ポイント 1** を選択します。
5.  **コンフィギュレーションの作成** を選択します。

この ER コンフィギュレーションのドラフト バージョン 1 を編集する準備ができていることを確認します。 このバージョンには、モデル マッピング コンポーネントが含まれています。

#### <a name="design-a-sample-model-mapping"></a>サンプル モデル マッピングのデザイン

1.  **構成** ページで、**デザイナー** を選択します。

    **モデルへ** 方向タイプのモデル マッピングが、**エントリポイント 1** 定義の、このコンポーネントに自動的に追加されていることに注意してください。
    
2.  追加したモデル マッピングの編集を開始するには、**デザイナー** を選択します。
3.  **データ モデル** セクションで、**編集** を選択します。
4.  **式** フィールドに、**一般的な機能 1** を入力します。
5.  **保存** を選択します。
6.  **フォーミュラ デザイナー** ページを閉じます。

    ![ER モデル マッピング デザイナーのページ。](./media/RCS-Context-specific-mapping-Mapping1.PNG)

7.  **保存** を選択します。
8.  **モデル マッピング デザイナー** ページを閉じます。
9.  **新規** を選択します。
10. **定義** フィールドで、**エントリ ポイント 2** を選択します。
11. **名前** フィールドに、**マッピング (一般) 2** を入力します。
12. **デザイナー** をクリックします。
13. **データ モデル** セクションで、**編集** を選択します。
14. **式** フィールドに、**一般的な機能 2** を入力します。
15. **保存** を選択します。
16. **フォーミュラ デザイナー** ページを閉じます。

    ![ER モデル マッピング デザイナーのページ。](./media/RCS-Context-specific-mapping-Mapping2.PNG)

17. **保存** を選択します。
18. **モデル マッピング デザイナー** ページを閉じます。

    ![ER モデル マッピング ページ。](./media/RCS-Context-specific-mapping-Mappings.PNG)

19. **モデル マッピング** ページを閉じます。

#### <a name="complete-the-modified-version-of-the-model-mapping-configuration"></a>モデル マッピング コンフィギュレーションの変更されたバージョンを完了する

1.  **バージョン** クイック タブの **コンフィギュレーション** ページで、**ステータスの変更** を選択します。

    > 設計されたモデル マッピング コンフィギュレーションのステータスを **ドラフト** から **完了** に変更し、ER 形式で使用できるようにします。

2.  **完了** を選択します。
3.  **OK** を選択します。

作成したコンフィギュレーションが完了したバージョン 1 として保存されることに注意してください。

### <a name="configure-a-sample-format"></a>サンプル形式のコンフィギュレーション

#### <a name="create-an-er-format-configuration"></a>ER 形式コンフィギュレーションを作成する

1.  **コンフィギュレーション** ページのコンフィギュレーション ツリーで、**マッピングを知るためのモデル** を選択します。
2.  **コンフィギュレーションの作成** を選択します。
3.  ドロップダウン ダイアログ ボックスにある **新しい** フィールド グループで、**マッピングを知るためのモデル データ モデルに基づく形式** を選択します。
4.  **名前** フィールドに、**マッピングを知るための形式** を入力します。
5.  **データ モデル定義** フィールドで、**エントリ ポイント 1** を選択します。
6.  **コンフィギュレーションの作成** を選択します。

この ER コンフィギュレーションのドラフト バージョン 1 を編集する準備ができていることを確認します。 このバージョンには、形式コンポーネントが含まれています。

#### <a name="design-a-sample-format"></a>サンプル形式のデザイン

1.  **構成** ページで、**デザイナー** を選択します。
2.  **ルートの追加** を選択します。
3.  **テキスト** グループで、**文字列** 項目を選択します。
4.  **OK** を選択します。

#### <a name="bind-format-elements-to-a-data-source"></a>形式要素をデータソースにバインドする

1.  **形式デザイナー** ページの **マッピング** タブで、モデル データソースを展開します。
2.  **機能説明** フィールドを選択します。
3.  **バインド** を選択します。

    ![ER 形式デザイナーのページ。](./media/RCS-Context-specific-mapping-Format.PNG)

4.  **保存** を選択します。
5.  ページを閉じます。

## <a name="appendix-2"></a><a name="appendix2"></a>付録 2

### <a name="configure-a-sample-model-mapping-for-general-customization"></a>一般的なカスタマイズのために、サンプル モデル マッピングをコンフィギュレーションする

必要に応じて、コンフィギュレーション プロバイダー (パートナー) から提供されたモデル マッピングをカスタマイズし、カスタマイズされたバージョンを ER 形式のデータソースとして使用することもできます。 この場合、既存のモデル マッピングに必要な変更を加えるには、カスタム ER モデル マッピング コンフィギュレーションを作成する必要があります。 この付録の手順では、**マッピング (一般)** モデル マッピングを例として使用します。

#### <a name="create-an-er-model-mapping-configuration"></a>ER モデル マッピング コンフィギュレーションを作成する

1.  **コンフィギュレーション** ページのコンフィギュレーション ツリーで、**マッピング (一般)** を選択します。
2.  **コンフィギュレーションの作成** を選択します。
3.  ドロップダウン ダイアログボックスの **新規** フィールド グループで、**名称から取得: マッピング (一般)、Litware, Inc.** を選択します。
4.  **名前** フィールドに、**マッピング (一般) カスタム** を入力します。
5.  **コンフィギュレーションの作成** を選択します。

この ER コンフィギュレーションのドラフト バージョン 1 を編集する準備ができていることを確認します。

#### <a name="design-a-sample-model-mapping"></a>サンプル モデル マッピングのデザイン

1.  **構成** ページで、**デザイナー** を選択します。

    > 基本コンフィギュレーションのモデル マッピングがこのコンフィギュレーションに自動的にコピーされていることを確認してください。

2.  **マッピング (一般) コピー** マッピングを選択します。
3.  **デザイナー** をクリックします。
4.  **データ モデル** セクションで、**編集** を選択します。
5.  **式** フィールドに、**一般的な機能 1 カスタム** を入力します。
6.  **保存** を選択します。
7.  ページを閉じます。

    ![ER モデル マッピング デザイナーのページ。](./media/RCS-Context-specific-mapping-Mapping1Custom.PNG)

8.  **保存** を選択します。
9.  ページを閉じます。
10. **マッピング (一般) 2 コピー** マッピングを選択します。
11. **デザイナー** をクリックします。
12. **データ モデル** セクションで、**編集** を選択します。
13. **式** フィールドに、**一般的な機能 2 カスタム** を入力します。
14. **保存** を選択します。
15. ページを閉じます。

    ![ER モデル マッピング デザイナーのページ。](./media/RCS-Context-specific-mapping-Mapping2Custom.PNG)

16. **保存** を選択します。
17. ページを閉じます。

    ![ER モデル マッピング ページ。](./media/RCS-Context-specific-mapping-MappingsCustom.PNG)

18. ページを閉じます。

#### <a name="complete-the-modified-version-of-the-model-mapping-configuration"></a>モデル マッピング コンフィギュレーションの変更されたバージョンを完了する

1.  **バージョン** クイック タブの **コンフィギュレーション** ページで、**ステータスの変更** を選択します。

    > 設計されたモデル マッピング コンフィギュレーションのステータスを **ドラフト** から **完了** に変更し、ER 形式で使用できるようにします。

2.  **完了** を選択します。
3.  **OK** を選択します。

作成したコンフィギュレーションが完了したバージョン 1 として保存されることに注意してください。

## <a name="appendix-3"></a><a name="appendix3"></a>付録 3

### <a name="configure-a-sample-model-mapping-for-countryregion-specific-customization"></a>国/地域固有のカスタマイズのために、サンプル モデル マッピングをコンフィギュレーションする

一部の ER 形式については、データの準備に関する国/地域固有の要件が存在する場合があります。 この場合、ER モデル マッピング コンフィギュレーションを個別に管理し、これらの国や地域固有の要件の実装を、一般的な実装から分離することができます。 この付録の手順では、**マッピングを知るための形式** ER 形式とフランス固有の要件を例として使用します。

#### <a name="create-an-er-model-mapping-configuration"></a>ER モデル マッピング コンフィギュレーションを作成する

最初に、新しい ER モデル マッピング コンフィギュレーションを作成して、国/地域固有の要件を実装します。 カスタム ER モデル マッピング コンフィギュレーションをベースとして使用します。

1.  **コンフィギュレーション** ページのコンフィギュレーション ツリーで、**マッピング (一般) カスタム** を選択します。
2.  **コンフィギュレーションの作成** を選択します。
3.  ドロップダウン ダイアログボックスの **新規** フィールド グループで、**名称から取得: マッピング (一般)、Litware, Inc.** を選択します。
4.  **名前** フィールドに、**マッピング (FR)** を入力します。
5.  **コンフィギュレーションの作成** を選択します。

この ER コンフィギュレーションのドラフト バージョン 1 を編集する準備ができていることを確認します。

#### <a name="design-a-sample-model-mapping"></a>サンプル モデル マッピングのデザイン

1.  **構成** ページで、**デザイナー** を選択します。

    > 基本コンフィギュレーションのモデル マッピングがこのコンフィギュレーションに自動的にコピーされていることを確認してください。

2.  **マッピング (一般) コピー コピー** マッピングを選択します。
3.  **マッピング (FR)** の名前を変更します。
4.  **デザイナー** をクリックします。
5.  **データ モデル** セクションで、**編集** を選択します。
6.  **式** フィールドに、**FR 機能 1** を入力します。
7.  **保存** を選択します。
8.  ページを閉じます。

    ![ER モデル マッピング デザイナーのページ。](./media/RCS-Context-specific-mapping-Mapping1FR.PNG)

9.  **保存** を選択します。
10. ページを閉じます。
11. **マッピング (一般) 2 コピー コピー** マッピングを選択します。
12. **マッピング (FR) 2** の名前を変更します。
13. **デザイナー** をクリックします。
14. **データ モデル** セクションで、**編集** を選択します。
15. **式** フィールドに、**FR 機能 2** を入力します。
16. **保存** を選択します。
17. ページを閉じます。

    ![ER モデル マッピング デザイナーのページ。](./media/RCS-Context-specific-mapping-Mapping2FR.PNG)

18. **保存** を選択します。
19. ページを閉じます。

    ![ER モデル マッピング ページ。](./media/RCS-Context-specific-mapping-MappingsFR.PNG)

20. ページを閉じます。

#### <a name="specify-countryregion-context-restrictions-for-use"></a>使用する国/地域のコンテキスト制限の指定

1.  **ISO 国/地域コード** クイックタブの **コンフィギュレーション** ページで、**新規** を選択します。
2.  **ISO** フィールドで、**FR** を選択します。
3.  **保存** を選択します。

ER 形式を実行するには、Finance の特定の会社にログインする必要があります。 したがって、この会社を ER 形式の実行と、基本 ER データ モデルの正しい ER モデル マッピングの選択を管理する当事者と見なすことができます。 **FR** 国コードを追加することにより、このモデル マッピングが、フランスの国/地域コンテキストのある会社の管理下で実行される場合にのみ、基本データ モデルの ER 形式に、このモデル マッピングを選択できるように指定します。

ER モデル マッピング コンフィギュレーションの 1 つのバージョンに複数の国/地域コードを追加できます。 これにより、そのモデル マッピング コンフィギュレーションに存在するモデル マッピングを、異なる国/地域コンテキストのある会社の管理下で実行される ER 形式に使用できます。

国/地域コードの一覧は ER モデル マッピング コンフィギュレーションの各バージョンに対して指定されており、バージョンによって異なる場合があることに注意してください。

#### <a name="complete-the-modified-version-of-the-model-mapping-configuration"></a>モデル マッピング コンフィギュレーションの変更されたバージョンを完了する

1.  **バージョン** クイック タブの **コンフィギュレーション** ページで、**ステータスの変更** を選択します。

    > 設計されたモデル マッピング コンフィギュレーションのステータスを **ドラフト** から **完了** に変更し、ER 形式で使用できるようにします。

2.  **完了** を選択します。
3.  **OK** を選択します。

作成したコンフィギュレーションが完了したバージョン 1 として保存されることに注意してください。

## <a name="additional-resources"></a>追加リソース

[電子申告 (ER) の概要](general-electronic-reporting.md)

[個別の ER コンフィギュレーションで ER モデル マッピングを管理する](./tasks/er-manage-model-mapping-configurations-july-2017.md)

[国/地域コンテキストの適用](../lcs-solutions/apply-country-context.md)

## <a name="frequently-asked-questions"></a>よく寄せられる質問

#### <a name="i-configured-two-shared-er-model-mapping-configurations-in-rcs-and-marked-one-of-them-as-the-default-model-mapping-configuration-i-successfully-ran-an-er-format-that-was-created-for-the-same-base-er-data-model-configuration-to-test-model-mappings-i-then-imported-the-whole-er-solution-er-data-model-two-er-model-mapping-configurations-and-er-format-configuration-into-finance-why-do-i-receive-an-error-message-when-i-try-to-run-the-same-er-format-in-finance"></a>RCS で 2 つの共有 ER モデル マッピング コンフィギュレーションをコンフィギュレーションし、そのうちの 1 つを既定のモデル マッピングのコンフィギュレーションとしてマークしました。 同じ基本 ER データ モデル コンフィギュレーションに対して作成された ER 形式を、テスト モデル マッピングに対して正常に実行しました。 次に、ER ソリューション全体 (ER データ モデル、2 つの ER マッピング コンフィギュレーション、および ER 形式コンフィギュレーション) を Finance にインポートしました。 Finance で同じ ER 形式を実行しようとすると、エラーメッセージが表示されるのはなぜですか。
既定のモデル マッピングの設定は、環境に固有です。 RCS でコンフィギュレーションされていますが、Finance にはエクスポートされていません。 この ER 形式を正常に実行するには、ER モデル マッピングのコンフィギュレーションのいずれかを、Finance の既定のモデル マッピング コンフィギュレーションとしてマークする必要があります。

#### <a name="i-configured-one-model-mapping-as-a-shared-model-mapping-and-completed-the-draft-version-of-it-i-then-added-a-new-model-mapping-configuration-for-same-data-model-and-configured-it-as-french-specific-why-is-the-shared-model-mapping-selected-when-i-run-an-er-format-even-though-this-er-format-uses-the-correct-root-definition-and-execution-is-done-under-the-control-of-the-company-that-has-french-countryregion-context"></a>1 つのモデル マッピングを共有モデル マッピングとしてコンフィギュレーションし、それをドラフト バージョンにしました。 次に、同じデータ モデルに対して新しいモデル マッピング コンフィギュレーションを追加し、フランス固有のモデルをコンフィギュレーションしました。 この ER 形式では正しいルート定義が使用されており、フランスの国/地域コンテキストのある会社の管理下で実行が行われているのに、ER 形式を実行すると共有モデル マッピングが選択されるのはなぜですか。
共有モデル マッピング コンフィギュレーションが既定のモデル マッピング コンフィギュレーションとしてマークされていないことを確認してください。 それ以外の場合は、マッピングの選択時に優先順位が高くなります。 また、ER 形式の実行中にマッピングが選択されている場合は、フランス固有のモデル マッピング コンフィギュレーションが考慮されていることを確認してください。 ER モデル マッピング コンフィギュレーションは、次の条件のうち少なくとも 1 つを満たす場合にのみ選択できます。
- ER モデル マッピング コンフィギュレーションの少なくとも 1 つのバージョンが **完了** しているか、**共有** ステータスになっています。 この場合は、バージョン番号が最も大きいバージョンが ER 形式の実行に使用されます。
- ER モデル マッピング コンフィギュレーションの **ドラフトの実行** オプションがオンになっています。 この場合は、**ドラフト** 状態のバージョンが ER 形式の実行に使用されます。
> **ドラフトの実行** オプションは、**実行設定** のユーザーパラメータがオンになっている場合に、各 ER モデル マッピング コンフィギュレーションの **コンフィギュレーション** ページで使用できるようになります。


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]