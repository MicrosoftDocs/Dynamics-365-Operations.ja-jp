---
title: 電子申告 (ER) コンフィギュレーション ライフサイクルの管理
description: この記事では、Dynamics 365 Finance の電子申告 (ER) 構成のライフ サイクルを管理する方法について説明します。
author: NickSelin
ms.date: 07/23/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERMappedFormatDesigner, ERModelMappingDesigner, ERModelMappingTable, ERSolutionImport, ERSolutionTable, ERVendorTable, ERWorkspace
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 58801
ms.assetid: 35ad19ea-185d-4fce-b9cb-f94584b14f75
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 0220fa03283119471b3d1f78a23a04ed4036264e
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/03/2022
ms.locfileid: "8906800"
---
# <a name="manage-the-electronic-reporting-er-configuration-lifecycle"></a>電子申告 (ER) コンフィギュレーション ライフサイクルの管理

[!include [banner](../includes/banner.md)]

この記事では、Dynamics 365 Finance の電子申告 (ER) 構成のライフ サイクルを管理する方法について説明します。

## <a name="overview"></a>概要

電子申告 (ER) は、法律の要件および国固有の電子ドキュメントをサポートするエンジンです。 一般に、ER は、各電子ドキュメントに関して次のタスクの実行を想定しています。 詳細については、[電子申告 (ER) の概要](general-electronic-reporting.md) を参照してください。

- 電子ドキュメントのテンプレートを設計します:

    - ドキュメントに表示できるデータのソースを識別します:

        - データ テーブル、データ エンティティ、クラスなど基になるデータ。
        - 実行日および時刻、タイム ゾーンなどプロセス固有のプロパティ。
        - 実行時にエンドユーザーが指定するユーザー入力パラメーター。

    - 必要なドキュメントの要素、および最終ドキュメントの形式を指定するトポロジを定義します。
    - データソース経由でドキュメントの形式コンポーネントにバインドされ、定義されたドキュメント要素に選択したデータ ソースから要求されるデータ フローのコンフィギュレーションを行い、プロセスの制御ロジックを指定します。

- 他のインスタンスでテンプレートが使用できるようにします。

    - 作成したドキュメント テンプレートを ER のコンフィギュレーションに変換し、現在のアプリケーション インスタンスからコンフィギュレーションをローカルまたは Lifecycle Services (LCS) に保存できる XML パッケージとしてエクスポートします。
    - ER コンフィギュレーションをアプリケーション ドキュメント テンプレートに変換します。
    - ローカルまたは LCS に保存されている XML パッケージを、現在のインスタンスにインポートします。

- 電子ドキュメント テンプレートをカスタマイズします:

    - LCS からテンプレートを ER コンフィギュレーションとして現在のインスタンスに取り込みます。
    - 基本バージョンを参照しながら、カスタム バージョンの ER コンフィギュレーションを設計します。

- アプリケーションで使用できるように、特定の業務プロセスを含むテンプレートを連結します。

    - 設定をコンフィギュレーションし、プロセスに関連したパラメーターでそのコンフィギュレーションを参照して、アプリケーションで ER コンフィギュレーションの使用を開始できるようにします。 たとえば、特定の買掛金勘定の支払方法の ER コンフィギュレーションを参照して、請求書の処理についての電子支払メッセージを生成します。

- 特定の業務プロセスでテンプレートを使用します:

    - 特定の業務プロセスで ER コンフィギュレーションを実行します。 たとえば、ER コンフィギュレーションを参照する支払方法が選択された場合の請求書の処理についての電子支払メッセージの生成。

## <a name="concepts"></a>概念
次のロールおよび関連活動が、ER コンフィギュレーション ライフサイクルに関連付けられます。

| 役割                                       | 活動                                                      | 説明 |
|--------------------------------------------|-----------------------------------------------------------------|-------------|
| 電子申告機能コンサルタント | ER コンポーネントを作成および管理します (モデル、形式)。           | ER のドメイン固有のデータ モデルを設計し、電子ドキュメントの必須のテンプレートを作成し、それらを結合するビジネス ユーザー。 |
| 電子申告開発者             | データ モデルのマップを作成および管理します。                          | 必要な財務データ ソースを選択し、ER のドメイン固有のデータ モデルに結合する専門家。 |
| 会計監修者                      | ER のコンポーネントを参照するプロセス関連の設定を構成します。 | たとえば、特定の買掛金勘定支払方法で使用して請求書処理用に電子支払メッセージを生成する ER のコンフィギュレーション設定を許可する **会計監修者** のロール。 |
| 買掛金勘定支払係            | 特定の業務プロセスで ER コンポーネントを使用します。                | たとえば、特定の支払方法に対して構成されている ER 形式に基づいて請求書処理用に電子支払のメッセージが生成されるようにするのを許可する **買掛金勘定支払の担当者** ロール。 |

## <a name="er-configuration-development-lifecycle"></a>ER コンフィギュレーションの開発ライフサイクル
ER に関連する次の理由から、個別の Finance and Operations インスタンスとしての開発環境で、ER コンフィギュレーションを作成することをお勧めします:

- **電子申告開発者** ロールまたは **電子申告機能コンサルタント** ロールのユーザーは、テスト目的でコンフィギュレーションを編集し、実行できます。 このシナリオでは、インスタンスで使用する業務データと業績について有害なおそれがあるテーブルおよびクラス メソッドが呼び出されることがあります。
- ER コンフィギュレーションの ER データ ソースとしてのクラスおよびテーブル メソッドの使用は、エントリ ポイントおよび記録された会社の内容によって制限されません。 **電子申告開発者** ロールまたは **電子申告機能コンサルタント** ロールのユーザーは、機密情報にアクセスできます。

開発環境で設計された ER コンフィギュレーションは、コンフィギュレーション評価 (適切な統合プロセス、結果の正確性、パフォーマンス)、およびロールにおけるアクセス権の正確性、職務分掌など品質保証のために、テスト環境に [アップロード](#data-persistence-consideration) できます。 ER コンフィギュレーションの交換を可能にする機能は、この目的に使用できます。 認定された ER コンフィギュレーションは、LCS にアップロードしてサービスのサブスクライバーと共有するか、または内部で使用する実稼働環境に [インポート](#data-persistence-consideration) することができます。

![ER コンフィギュレーション ライフサイクル。](./media/ger-configuration-lifecycle.png)

## <a name="data-persistence-consideration"></a> データ持続性の考慮事項

ER [コンフィギュレーション](general-electronic-reporting.md#Configuration) のさまざまな [バージョン](general-electronic-reporting.md#component-versioning) を Finance インスタンスに個別に [インポート](tasks/er-import-configuration-lifecycle-services.md) できます。 新しいバージョンの ER コンフィギュレーションをインポートするとき、システムはこのコンフィギュレーションのドラフト バージョンのコンテンツを制御します。

- インポートされたバージョンが、現在の Finance インスタンスにおけるこのコンフィギュレーションの最も新しいバージョンより低い場合、そのコンフィギュレーションのドラフト バージョンのコンテンツは変更されないままです。
- インポートされたバージョンが、現在の Finance インスタンスにおけるこのコンフィギュレーションのその他のバージョンより新しい場合、インポートされたバージョンのコンテンツはこのコンフィギュレーションのドラフト バージョンにコピーされ、最後に完了したバージョンの編集を続行できます。

このコンフィギュレーションが現在有効化されているコンフィギュレーション [プロバイダー](general-electronic-reporting.md#Provider) によって所有されている場合、このコンフィギュレーションのドラフト バージョンは、**コンフィギュレーション** ページの **バージョン** クイックタブに表示されます (**組織管理** > **電子申告** > **コンフィギュレーション**)。 関連する ER デザイナーを使用して、コンフィギュレーションのドラフト バージョンを選択し、そのコンテンツを [変更](er-quick-start2-customize-report.md#ConfigureDerivedFormat) することができます。 ER コンフィギュレーションのドラフト バージョンを編集した場合、そのコンテンツは現在の Finance インスタンスにおけるこのコンフィギュレーションの最も新しいバージョンのコンテンツとは一致しなくなります。 変更が失われるのを回避するために、システムは、このコンフィギュレーションのバージョンが現在の Finance インスタンスにおけるこのコンフィギュレーションの最も新しいバージョンよりも新しいため、インポートを続行できないというエラーを表示します。 これが発生した場合、たとえば形式コンフィギュレーション **X** を使用しているときは、**形式 'X' バージョンは完了していません** というエラーが表示されます。

ドラフト バージョンで導入した変更を元に戻すには、**バージョン** クイックタブで Finance の ER コンフィギュレーションの最も新しい完了または共有バージョンを選択し、**このバージョンを取得** オプションを選択します。 選択したバージョンのコンテンツがドラフト バージョンにコピーされます。

## <a name="applicability-consideration"></a>適用上の考慮事項

ER 構成の新しいバージョンを設計するときに、他のソフトウェア コンポーネントへの[依存関係](tasks/er-define-dependency-er-configurations-from-other-components-july-2017.md)を定義できます。 この手順は、ER リポジトリまたは外部 XML ファイルからのこの構成のバージョンのダウンロードを制御し、バージョンをさらに使用するための前提条件と見なされます。 ER 構成の新しいバージョンをインポートしようとすると、システムは構成された前提条件を使用して、バージョンをインポートできるかどうかを制御します。

場合によっては、新しいバージョンの ER 構成をインポートするときに、システムが構成済みの前提条件を無視するように要求することがあります。 インポート中にシステムに前提条件を無視させるには、次の手順に従います。

1. **組織管理** \> **電子申告** \> **構成** の順に移動します。
2. **構成** ページ、アクション ウィンドウ、**構成** タブ、**詳細設定** グループで、**ユーザー パラメーター** を選択します。
3. **インポート時に製品アップデートとバージョン前提条件のチェックをスキップする** オプションを **はい** に設定します。

    > [!NOTE]
    > このパラメーターはユーザーに固有のものまたは会社固有のものであることに注意してください。

## <a name="additional-resources"></a>追加リソース

[電子申告 (ER) の概要](general-electronic-reporting.md)

[他のコンポーネントに対する電子申告コンフィギュレーションの依存関係を定義する](tasks/er-define-dependency-er-configurations-from-other-components-july-2017.md)

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
