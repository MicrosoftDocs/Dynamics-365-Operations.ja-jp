---
title: 自分のデータベースの持ち込み (BYOD)
description: このトピックでは、エンティティを 独自の Azure SQL データベースにエクスポートする方法について説明します。
author: Sunil-Garg
ms.date: 04/20/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: kfend
ms.search.region: Global
ms.author: sunilg
ms.search.validFrom: 2016-08-30
ms.dyn365.ops.version: Platform update 2
ms.openlocfilehash: f6886d12933943b7908dc283555a541b24577e6a
ms.sourcegitcommit: 9283caad2d0636f98579c995784abec19fda2e3f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/22/2021
ms.locfileid: "5935897"
---
# <a name="bring-your-own-database-byod"></a><span data-ttu-id="0b0fd-103">自分のデータベースの持ち込み (BYOD)</span><span class="sxs-lookup"><span data-stu-id="0b0fd-103">Bring your own database (BYOD)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="0b0fd-104">このトピックでは、管理者がアプリケーションからのデータ エンティティを自分の Microsoft Azure SQL データベースにエクスポートする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-104">This topic explains how administrators can export data entities from the application into their own Microsoft Azure SQL database.</span></span> <span data-ttu-id="0b0fd-105">この機能は、*自分のデータベースの持ち込み* (BYOD) とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-105">This feature is also known as *bring your own database* (BYOD).</span></span> <span data-ttu-id="0b0fd-106">BYOD 機能は、Microsoft Dynamics AX でプラットフォーム更新プログラム 2 (2016 年 8 月) によってリリースされました。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-106">The BYOD feature was released in Microsoft Dynamics AX with platform update 2 (August 2016).</span></span> <span data-ttu-id="0b0fd-107">マイナーな改良およびバグ修正は、後続のプラットフォーム更新プログラムに含まれています。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-107">Minor improvements and bug fixes have been included in subsequent platform updates.</span></span>

<span data-ttu-id="0b0fd-108">BYOD 機能により、管理者は、独自のデータベースを構成し、アプリケーションで使用できる 1 つまたは複数のデータ エンティティをデータベースにエクスポートできます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-108">The BYOD feature lets administrators configure their own database, and then export one or more data entities that are available in the application into the database.</span></span> <span data-ttu-id="0b0fd-109">(現時点では、1,700 以上のデータ エンティティが使用可能です。) 具体的には、この機能により次のタスクを実行できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-109">(Currently, more than 1,700 data entities are available.) Specifically, this feature lets you complete these tasks:</span></span>

- <span data-ttu-id="0b0fd-110">エンティティ データをエクスポートできる 1 つ以上の SQL データベースを定義します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-110">Define one or more SQL databases that you can export entity data into.</span></span>
- <span data-ttu-id="0b0fd-111">すべてのレコード (*完全にプッシュ*) または変更または削除されたレコードのみ (*差分プッシュ*) を、エキスポートします。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-111">Export either all the records (*full push*) or only the records that have changed or been deleted (*incremental push*).</span></span>
- <span data-ttu-id="0b0fd-112">定期的なエクスポートを有効にするには、バッチ フレームワークの豊富なスケジューリング機能を使用します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-112">Use the rich scheduling capabilities of the batch framework to enable periodic exports.</span></span>
- <span data-ttu-id="0b0fd-113">トランザクション SQL (T-SQL) を使用してエンティティ データベースにアクセスし、さらにテーブルを追加してデータベースを拡張します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-113">Access the entity database by using Transact-SQL (T-SQL), and even extend the database by adding more tables.</span></span>

## <a name="entity-store-or-byod"></a><span data-ttu-id="0b0fd-114">エンティティ格納または BYOD か</span><span class="sxs-lookup"><span data-stu-id="0b0fd-114">Entity store or BYOD?</span></span>

<span data-ttu-id="0b0fd-115">[Microsoft Power BI 統合についてのブログ記事](/archive/blogs/dynamicsaxbi/power-bi-integration-with-entity-store-in-dynamics-ax-7-may-update) のシリーズに従った場合、エンティティ格納に精通できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-115">If you followed the series of [blog posts about Microsoft Power BI integration](/archive/blogs/dynamicsaxbi/power-bi-integration-with-entity-store-in-dynamics-ax-7-may-update), you will be familiar with Entity store.</span></span> <span data-ttu-id="0b0fd-116">エンティティ格納は運用データ ウェアハウスです。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-116">Entity store is the operational data warehouse.</span></span> <span data-ttu-id="0b0fd-117">エンティティ格納では、Power BI の実稼働レポートの組み込み統合を提供します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-117">Entity store provides built-in integration of operational reports with Power BI.</span></span> <span data-ttu-id="0b0fd-118">既製のレポートと分析ワークスペースでエンティティ格納を使用します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-118">Ready-made reports and analytical workspaces use Entity store.</span></span> <span data-ttu-id="0b0fd-119">アプリケーションの環境のデータを使用して Power BI レポートを作成する場合は、エンティティ格納を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-119">If you write Power BI reports by using data in your application environment, you should use Entity store.</span></span>

<span data-ttu-id="0b0fd-120">ただし、次のシナリオでは BYOD 機能をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-120">However, the BYOD feature is recommended for the following scenarios:</span></span>

- <span data-ttu-id="0b0fd-121">データを独自のデータ ウェアハウスにエクスポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-121">You must export data into your own data warehouse.</span></span>
- <span data-ttu-id="0b0fd-122">Power BI 以外の分析ツールを使用し、これらのツールはデータに対して T-SQL アクセスを必要とします。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-122">You use analytical tools other than Power BI, and those tools require T-SQL access to data.</span></span>
- <span data-ttu-id="0b0fd-123">他のシステムとのバッチ統合を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-123">You must perform batch integration with other systems.</span></span>

> [!NOTE]
> <span data-ttu-id="0b0fd-124">アプリケーションは、生産データベースへの T-SQL 接続を許可しません。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-124">The application doesn't allow T-SQL connections to the production database.</span></span> <span data-ttu-id="0b0fd-125">Finance and Operations の以前のバージョンをアップグレードする場合、データベースへの直接的な T-SQL アクセスを必要とする統合ソリューションがある場合は、BYOD は推奨するアップグレード パスになります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-125">If you're upgrading from a previous version of Finance and Operations, and you have integration solutions that require direct T-SQL access to the database, BYOD is the recommended upgrade path.</span></span>

<span data-ttu-id="0b0fd-126">エンティティ格納または BYOD のいずれかを使用できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-126">You can use either Entity store or BYOD.</span></span> <span data-ttu-id="0b0fd-127">使用可能な既定の業務レポートは、埋め込み Power BI とエンティティ格納を利用します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-127">The default operational reports that are available take advantage of embedded Power BI and Entity store.</span></span> <span data-ttu-id="0b0fd-128">最初の選択として、既定の業務レポートを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-128">We recommend that you use our default operational reports as your first choice.</span></span> <span data-ttu-id="0b0fd-129">また、要件に合わせて、既成のオペレーション レポートを拡張することができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-129">You can also extend the ready-made operational reports to meet your requirements.</span></span> <span data-ttu-id="0b0fd-130">BYOD を必要に応じて利用する補足的なオプションと見なす必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-130">You should consider BYOD a complementary option that you use as you require.</span></span>

## <a name="creating-a-sql-database"></a><span data-ttu-id="0b0fd-131">SQL データベースを作成しています</span><span class="sxs-lookup"><span data-stu-id="0b0fd-131">Creating a SQL database</span></span>

<span data-ttu-id="0b0fd-132">エンティティのエクスポート オプションをコンフィギュレーションして BYOD 機能を使用する前に、Azure ポータルを使用して SQL データベースを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-132">Before you can configure the entity export option and use the BYOD feature, you must create a SQL database by using Azure portal.</span></span>

<span data-ttu-id="0b0fd-133">1 ボックス開発環境では、ローカルの Microsoft SQL Server データベースでデータベースを作成できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-133">For one-box development environments, you can create a database in the local Microsoft SQL Server database.</span></span> <span data-ttu-id="0b0fd-134">ただし、このデータベースは、開発およびテスト目的でのみ使用される必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-134">However, this database should be used only for development and testing purposes.</span></span> <span data-ttu-id="0b0fd-135">実稼働環境については、Azure SQL データベースを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-135">For production environments, you must create an Azure SQL database.</span></span>

<span data-ttu-id="0b0fd-136">また、データベースにサインインするには、SQL ユーザー アカウントを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-136">You should also create a SQL user account for sign-in to the database.</span></span> <span data-ttu-id="0b0fd-137">サーバー名、データベース名、および SQL ユーザー ID とパスワードを記述します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-137">Write down the server name, database name, and the SQL user ID and password.</span></span> <span data-ttu-id="0b0fd-138">この情報は、次のセクションで、エンティティのエクスポート オプションをコンフィギュレーションするときに使用します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-138">You will use this information when you configure the entity export option in the next section.</span></span>

<span data-ttu-id="0b0fd-139">ビジネス インテリジェンス (BI) ツールとの統合に BYOD 機能を使用している場合、クラスター化された縦棒ストア インデックス (CCI) の使用を検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-139">If you're using the BYOD feature for integration with a business intelligence (BI) tool, you should consider using clustered columnstore indexes (CCIs).</span></span> <span data-ttu-id="0b0fd-140">CCI は、分析およびレポートのワークロードで一般的な読取りクエリのパフォーマンスを向上させるメモリ内インデックスです。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-140">CCIs are in-memory indexes that improve the performance of read queries that are typical in analytical and reporting workloads.</span></span>

> [!NOTE]
> <span data-ttu-id="0b0fd-141">BYOD データベースは、Finance and Operations アプリからアクセスできる必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-141">Your BYOD database must be accessible to Finance and Operations apps.</span></span> <span data-ttu-id="0b0fd-142">BYOD にアクセスできない問題が発生した場合は、BYOD のファイアウォール規則が適切に構成されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-142">If you encounter issues where you are unable access to access BYOD, you must ensure firewall rules in your BYOD are configured appropriately.</span></span>
> 
> <span data-ttu-id="0b0fd-143">Azure SQL データベースのパフォーマンス層の使用が推奨されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-143">The use of a performance tier for the Azure SQL database is recommended.</span></span> <span data-ttu-id="0b0fd-144">層の詳細については 、[SQL Azure層](https://docs.microsoft.com/azure/azure-sql/database/service-tiers-dtu) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-144">For more information about tiers, see [SQL Azure tiers](https://docs.microsoft.com/azure/azure-sql/database/service-tiers-dtu).</span></span>

## <a name="configuring-the-entity-export-option"></a><span data-ttu-id="0b0fd-145">エンティティのエクスポート オプションのコンフィギュレーション</span><span class="sxs-lookup"><span data-stu-id="0b0fd-145">Configuring the entity export option</span></span>

1. <span data-ttu-id="0b0fd-146">クライアントを起動し、**データ管理** ワークスペースで、**データベースへのエンティティ エクスポートの構成** タイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-146">Start the client, and then, in the **Data management** workspace, select the **Configure Entity export to database** tile.</span></span>
2. <span data-ttu-id="0b0fd-147">いくつかのデータベースを構成した場合、一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-147">If you've configured any databases, a list is shown.</span></span> <span data-ttu-id="0b0fd-148">それ以外の場合、新しいデータベースをコンフィギュレーションする必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-148">Otherwise, you must configure a new database.</span></span> <span data-ttu-id="0b0fd-149">この場合、**新規** を選択して、新しいデータベースに一意の名前と説明を入力します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-149">In this case, select **New**, and then enter a unique name and a description for the new database.</span></span> <span data-ttu-id="0b0fd-150">複数のデータベースにエンティティをエクスポートできることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-150">Note that you can export entities into multiple databases.</span></span>
3. <span data-ttu-id="0b0fd-151">次の形式で、接続文字列を入力します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-151">Enter the connection string in the following format:</span></span>

    <span data-ttu-id="0b0fd-152">データ ソース =&lt; 論理サーバー名 &gt;、1433。最初のカタログ =&lt; DB名 &gt;。統合セキュリティ = False。ユーザー ID =&lt; SQL ユーザー ID &gt; 。パスワード =&lt; パスワード &gt;</span><span class="sxs-lookup"><span data-stu-id="0b0fd-152">Data Source=&lt;logical server name&gt;,1433; Initial Catalog=&lt;your DB name&gt;; Integrated Security=False; User ID=&lt;SQL user ID&gt;; Password=&lt;password&gt;</span></span>

    <span data-ttu-id="0b0fd-153">この接続文字列では、論理サーバー名を **nnnn.database.windows.net** のようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-153">In this connection string, the logical server name should resemble **nnnn.database.windows.net**.</span></span> <span data-ttu-id="0b0fd-154">Azure ポータル内の論理サーバー名を検索できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-154">You should be able to find the logical server name in Azure portal.</span></span> <span data-ttu-id="0b0fd-155">次の図は、接続文字列の例を示します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-155">The following illustration shows an example of a connection string.</span></span>

    ![新しいレコード ページの接続文字列](media/NewRecord.png)
    
    
> [!NOTE]
> <span data-ttu-id="0b0fd-157">上記の画像に表示されている既定の拡張子フィールドは、BYOD には適用されません。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-157">The default extension field shown in the image above does not apply to BYOD.</span></span>

4. <span data-ttu-id="0b0fd-158">**検証** を選択し、接続が正常に行われたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-158">Select **Validate**, and make sure that the connection is successful.</span></span>

    - <span data-ttu-id="0b0fd-159">**クラスター化された縦棒ストア インデックスを作成** オプションは、コピーされるエンティティの CCI を定義することで選択したクエリの出力先データベースを最適化します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-159">The **Create clustered column store indexes** option optimizes the destination database for selected queries by defining CCIs for entities that are copied.</span></span> <span data-ttu-id="0b0fd-160">ただし、CCI は現在 SQL プレミアム データベースでのみサポートされています。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-160">However, CCIs are currently supported only on SQL premium databases.</span></span> <span data-ttu-id="0b0fd-161">したがって、このオプションを有効にするには、SQL プレミアム データベースを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-161">Therefore, to enable this option, you must create a SQL premium database.</span></span>
    - <span data-ttu-id="0b0fd-162">**ターゲット データベースでトリガーを有効にする** オプションは、ターゲット データベースで SQL トリガーを有効にするためにエクスポート ジョブを設定します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-162">The **Enable triggers in target database** option sets export jobs to enable SQL triggers in the target database.</span></span> <span data-ttu-id="0b0fd-163">このオプションを使用すると、レコードを挿入した後に開始する必要がある操作を調整するために、ダウンストリーム プロセスをトリガーにフックできます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-163">This option lets you hook downstream processes into the trigger to orchestrate actions that must be started after records have been inserted.</span></span> <span data-ttu-id="0b0fd-164">1 つのトリガーは一括挿入の操作ごとにサポートされています。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-164">One trigger is supported per bulk insert operation.</span></span> <span data-ttu-id="0b0fd-165">一括挿入のサイズは、データ管理フレームワークの **最大挿入コミット サイズ** パラメーターによって決まります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-165">The size of the bulk insert is determined by the **Maximum insert commit size** parameter in the Data management framework.</span></span>

<span data-ttu-id="0b0fd-166">BYOD からデータを読み取るレポート システムのシナリオでは、同期の実行中に、レポート システムが BYOD から一貫したデータを取得することを確認するという課題が常にあります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-166">For scenarios in which reporting systems read data from BYOD, there is always the challenge of ensuring that the reporting systems get consistent data from BYOD while the sync is in progress.</span></span> <span data-ttu-id="0b0fd-167">BYOD プロセスで作成されたステージング テーブルから報告システムが直接読み取りしないようにすることにより、この結果を達成することができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-167">You can achieve this result by not having the reporting systems read directly from the staging tables created by the BYOD process.</span></span> <span data-ttu-id="0b0fd-168">ステージング テーブルは、データがインスタンスから同期されている間データを保持するため、常に変化します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-168">The staging tables hold the data while data is being synced from the instance and hence will be constantly changing.</span></span> <span data-ttu-id="0b0fd-169">SQL トリガー機能を使用して、データ同期が完了した時点を判断し、下流のレポーティング システムに通知します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-169">Use the SQL trigger feature to determine when the data sync has been completed, and then hydrate the downstream reporting systems.</span></span>

<span data-ttu-id="0b0fd-170">検証に合格すると、次の図に示すように、エンティティのエクスポートに向けてコンフィギュレーションされたデータベースがデータベースのリストに表示されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-170">When the validation is passed, the database that you configured for entity export appears in lists of databases, as shown in the following illustration.</span></span>

![エンティティ エクスポートのデータベース](media/e3bcecdb0ff1532d890915903b378c60.png)

<span data-ttu-id="0b0fd-172">メニュー上で **公開** オプションを選択することにより、1 つまたは複数のエンティティを新しいデータベースに公開することができるようになりました。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-172">You can now publish one or more entities to the new database by selecting the **Publish** option on the menu.</span></span>

### <a name="publishing-the-entity-schema-to-the-database"></a><span data-ttu-id="0b0fd-173">エンティティ スキーマをデータベースに公開</span><span class="sxs-lookup"><span data-stu-id="0b0fd-173">Publishing the entity schema to the database</span></span>

<span data-ttu-id="0b0fd-174">**発行** ページは、いくつかのシナリオを有効にします。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-174">The **Publish** page enables several scenarios:</span></span>

- <span data-ttu-id="0b0fd-175">データベースに新しいエンティティを公開します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-175">Publish new entities to the database.</span></span>
- <span data-ttu-id="0b0fd-176">以前に公開されたエンティティをデータベースから削除します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-176">Delete previously published entities from the database.</span></span> <span data-ttu-id="0b0fd-177">(たとえば、スキーマを再作成することができます。)</span><span class="sxs-lookup"><span data-stu-id="0b0fd-177">(For example, you might want to re-create the schema.)</span></span>
- <span data-ttu-id="0b0fd-178">公開されたエンティティをエンティティ スキーマと比較します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-178">Compare published entities with the entity schema.</span></span> <span data-ttu-id="0b0fd-179">(たとえば、新しいフィールドを後で追加する場合、フィールドをデータベース スキーマと比較できます。)</span><span class="sxs-lookup"><span data-stu-id="0b0fd-179">(For example, if new fields are added later, you can compare the fields with your database schema.)</span></span>
- <span data-ttu-id="0b0fd-180">データの差分更新を可能にする変更追跡機能をコンフィギュレーションします。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-180">Configure change tracking functionality that enables incremental updates of your data.</span></span>

<span data-ttu-id="0b0fd-181">次のセクションでは、各オプションについて説明します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-181">The following sections discuss each option.</span></span>

#### <a name="publish"></a><span data-ttu-id="0b0fd-182">パブリッシュ</span><span class="sxs-lookup"><span data-stu-id="0b0fd-182">Publish</span></span>

<span data-ttu-id="0b0fd-183">**発行** オプションは、ターゲット データベースにエンティティ データベース スキーマを定義します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-183">The **Publish** option defines the entity database schema on the destination database.</span></span> <span data-ttu-id="0b0fd-184">1 つまたは複数のエンティティを選択してから、**公開** オプションを選択すると、バッチ ジョブが開始します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-184">When you select one or more entities, and then select the **Publish** option, a batch job is started.</span></span> <span data-ttu-id="0b0fd-185">このジョブは、出力先データベースにエンティティを作成します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-185">This job creates the entities in the destination database.</span></span> <span data-ttu-id="0b0fd-186">データベース定義ジョブが完了すると、メッセージが表示されます。このメッセージには、右上のベル記号を使用してアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-186">When the database definition job is completed, you receive a message, which you can access by using the bell symbol in the upper right.</span></span>

<span data-ttu-id="0b0fd-187">実際のデータの更新は、データをエクスポートするときに実行されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-187">The actual data update occurs when you export data.</span></span> <span data-ttu-id="0b0fd-188">この時点では、スキーマを作成するだけです。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-188">At this point, you're just creating the schema.</span></span>

#### <a name="drop-entity"></a><span data-ttu-id="0b0fd-189">エンティティの削除</span><span class="sxs-lookup"><span data-stu-id="0b0fd-189">Drop entity</span></span>

<span data-ttu-id="0b0fd-190">**エンティティを削除** オプションは、出力先のデータベースからデータとエンティティ定義を削除します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-190">The **Drop entity** option deletes the data and the entity definition from the destination database.</span></span>

#### <a name="compare-source-names"></a><span data-ttu-id="0b0fd-191">ソース名の比較</span><span class="sxs-lookup"><span data-stu-id="0b0fd-191">Compare source names</span></span>

<span data-ttu-id="0b0fd-192">**ソース名を比較** オプションでは、出力先のエンティティ スキーマをアプリケーション内のエンティティ スキーマと比較することができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-192">The **Compare source names** option lets you compare the entity schema in the destination with the entity schema in the application.</span></span> <span data-ttu-id="0b0fd-193">このオプションは、バージョン管理に使用されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-193">This option is used for version management.</span></span> <span data-ttu-id="0b0fd-194">また、出力先テーブルから不要な列を削除するためにこのオプションを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-194">You can also use this option to remove any unwanted columns from the destination table.</span></span>

#### <a name="configure-change-tracking"></a><span data-ttu-id="0b0fd-195">変更追跡のコンフィギュレーション</span><span class="sxs-lookup"><span data-stu-id="0b0fd-195">Configure change tracking</span></span>

<span data-ttu-id="0b0fd-196">変更の追跡は、SQL Server および SQL データベースで提供される機能です。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-196">Change tracking is a feature that is provided in SQL Server and SQL Database.</span></span> <span data-ttu-id="0b0fd-197">変更追跡を使用すると、データベースでテーブルに加えられた変更 (削除を含む) を追跡できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-197">Change tracking enables the database to track changes including deletes that are made on tables.</span></span> <span data-ttu-id="0b0fd-198">変更の追跡を使用して、トランザクションとしてテーブルに加えられた変更を識別します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-198">The system uses change tracking to identify changes that are made to tables as transactions.</span></span> <span data-ttu-id="0b0fd-199">ただし、アプリケーションはデータ エンティティ レベルで変更を追跡する必要があるため、この機能が動作するための SQL 変更追跡の上に追加のロジックがあります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-199">However, because the application must track changes at the data entity level, there is additional logic on top of SQL change tracking to make this functionality work.</span></span> <span data-ttu-id="0b0fd-200">変更追跡を有効にする手順については、このセクションで後述します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-200">The steps to enable change tracking are explained later in this section.</span></span>

<span data-ttu-id="0b0fd-201">**発行** ページの **変更の追跡** オプションでは、基になるエンティティの変更の追跡方法を設定できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-201">The **Change tracking** option on the **Publish** page lets you configure how changes are tracked on the underlying entity.</span></span>

![基礎となるエンティティの変更追跡](media/8918ed89bcc966252727af5a1b75e0fb.png)

<span data-ttu-id="0b0fd-203">次のテーブルでは、使用可能な変更追跡オプションについて説明します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-203">The following table describes the change tracking options that are available.</span></span>

| <span data-ttu-id="0b0fd-204">オプション</span><span class="sxs-lookup"><span data-stu-id="0b0fd-204">Option</span></span>               | <span data-ttu-id="0b0fd-205">説明</span><span class="sxs-lookup"><span data-stu-id="0b0fd-205">Description</span></span> |
|----------------------|-------------|
| <span data-ttu-id="0b0fd-206">プライマリ テーブルの有効化</span><span class="sxs-lookup"><span data-stu-id="0b0fd-206">Enable primary table</span></span> | <span data-ttu-id="0b0fd-207">エンティティは複数のテーブルで構成されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-207">An entity consists of several tables.</span></span> <span data-ttu-id="0b0fd-208">エンティティの主テーブルに加えられたすべての変更を追跡するには、このオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-208">Select this option to track all changes that are made to the primary table of the entity.</span></span> <span data-ttu-id="0b0fd-209">プライマリ テーブルに変更を加えると、対応するレコードが出力先データベースに挿入されるか、またはそのデータベース内で更新されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-209">When changes are made to the primary table, the corresponding record is inserted into or updated in the destination database.</span></span> <span data-ttu-id="0b0fd-210">エンティティ全体からのデータは出力先テーブルに書き込まれますが、プライマリ テーブルが変更された場合にのみ、システムの挿入または更新オプションがトリガーされます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-210">Although data from the whole entity is written to the destination table, the system triggers the insert or update option only when the primary table is modified.</span></span> |
| <span data-ttu-id="0b0fd-211">エンティティ全体の有効化</span><span class="sxs-lookup"><span data-stu-id="0b0fd-211">Enable entire entity</span></span> | <span data-ttu-id="0b0fd-212">エンティティのすべての変更を追跡するには、このオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-212">Select this option to track all changes to the entity.</span></span> <span data-ttu-id="0b0fd-213">(これらの変更は、エンティティを構成するすべてのテーブルへの変更を含みます。) エンティティへの変更を加えるときに、対応する更新が宛先に対して行われます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-213">(These changes include changes to all the tables that make up the entity.) When changes are made to the entity, corresponding updates are made to the destination.</span></span> |
| <span data-ttu-id="0b0fd-214">カスタム クエリの有効化</span><span class="sxs-lookup"><span data-stu-id="0b0fd-214">Enable custom query</span></span>  | <span data-ttu-id="0b0fd-215">このオプションを使用すると、開発者は、システムが変更を評価するために実行するカスタム クエリを提供できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-215">This option lets a developer provide a custom query that the system runs to evaluate changes.</span></span> <span data-ttu-id="0b0fd-216">このオプションは、選択したフィールドのセットのみから変更を追跡するという複雑な要件がある場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-216">This option is useful when you have a complex requirement to track changes from only a selected set of fields.</span></span> <span data-ttu-id="0b0fd-217">エクスポートされるエンティティが入れ子になったビューの階層を使用して構築されたときも、このオプションを選択することができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-217">You can also select this option when the entities that will be exported were built by using a hierarchy of nested views.</span></span> <span data-ttu-id="0b0fd-218">詳細については、 [エンティティへの変更の追跡を有効化する](../data-entities/entity-change-track.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-218">For more information, see [Enable change tracking for entities](../data-entities/entity-change-track.md).</span></span> |

<span data-ttu-id="0b0fd-219">変更追跡を使用するには、データ管理で上に示すように **変更追跡** オプションを有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-219">To use change tracking, you must enable the **Change tracking** option as shown above in data management.</span></span> <span data-ttu-id="0b0fd-220">このアクションは、**データ管理 > データ エンティティ** に移動し、**データ エンティティ** リスト ページで使用できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-220">This action is available on the **Data entities** list page, by going to **Data management > Data entities**.</span></span> <span data-ttu-id="0b0fd-221">データ エンティティで変更追跡を有効にするには、エンティティを選択し、上のオプションのいずれかから選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-221">You need to select an entity and select from one of the options listed above to enable change tracking on the data entity.</span></span>

<span data-ttu-id="0b0fd-222">出力先のデータベースに存在するエンティティを再発行する場合、システムでは、既存のデータが新しい操作が原因で削除されることを警告されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-222">If you republish an entity that exists in the destination database, the system warns you that existing data will be deleted because of the new operation.</span></span>

<span data-ttu-id="0b0fd-223">発行操作を確認すると、システムがスキーマをデータベースに発行し、その操作が完了すると通知を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-223">When you confirm the publish operation, the system publishes the schema to the database, and you're notified when the operation is completed.</span></span>

<span data-ttu-id="0b0fd-224">**公開** ページで **公開済のみを表示** オプションを選択することにより、指定した出力先データベースに公開されたエンティティのみを表示できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-224">By selecting the **Show published only** option on the **Publish** page, you can show only the entities that were published to a given destination database.</span></span> <span data-ttu-id="0b0fd-225">発行機能は、データベース内のエンティティ スキーマを作成します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-225">The Publish function creates the entity schema in the database.</span></span> <span data-ttu-id="0b0fd-226">データベースに移動して、対応するインデックスとともに、作成されたテーブル スキーマを表示することができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-226">You can navigate to the database and see the table schemas that were created, together with corresponding indexes.</span></span>

> [!NOTE]
> <span data-ttu-id="0b0fd-227">現在、データベースに複合エンティティをエクスポートするのに BYOD を使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-227">Currently, you can't use BYOD to export composite entities into a database.</span></span> <span data-ttu-id="0b0fd-228">複合エンティティの各エンティティをエクスポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-228">You must export each entity in the composite entity.</span></span>

## <a name="exporting-data-into-your-database"></a><span data-ttu-id="0b0fd-229">データベースへのエクスポート データ</span><span class="sxs-lookup"><span data-stu-id="0b0fd-229">Exporting data into your database</span></span>

<span data-ttu-id="0b0fd-230">エンティティが宛先データベースに公開された後、**データ管理** ワークスペースのエクスポート機能を使用してデータを移動することができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-230">After entities are published to the destination database, you can use the Export function in the **Data management** workspace to move data.</span></span> <span data-ttu-id="0b0fd-231">エクスポート関数を使用すると、1 つまたは複数のエンティティが含まれるデータ移動ジョブを定義できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-231">The Export function lets you define a Data movement job that contains one or more entities.</span></span>

<span data-ttu-id="0b0fd-232">**エクスポート** ページを使用すると、データをコンマ区切り値 (CSV) ファイルなどの多くのターゲット データ書式にエクスポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-232">You can use the **Export** page to export data into many target data formats, such as a comma-separated values (CSV) file.</span></span> <span data-ttu-id="0b0fd-233">このページは、別の宛先として SQL データベースもサポートしています。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-233">This page also supports SQL databases as another destination.</span></span>

![ページをエクスポート](media/091eb0da74bf94c620c3785bca92b41e.png)

<span data-ttu-id="0b0fd-235">複数のエンティティを持つデータ プロジェクトを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-235">You can create a data project that has multiple entities.</span></span> <span data-ttu-id="0b0fd-236">バッチ フレームワークを使用することにより、このデータ プロジェクトの実行をスケジュールすることができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-236">You can schedule this data project to run by using the batch framework.</span></span> <span data-ttu-id="0b0fd-237">また、**バッチ処理でのエクスポート** オプションを選択することにより、データ エクスポート ジョブを定期的に実行するようにスケジュールします。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-237">You also schedule the data export job to run on a periodic basis by selecting the **Export in batch** option.</span></span>

<span data-ttu-id="0b0fd-238">同じジョブを使用してすべての会社からデータをエクスポートすることもできます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-238">The same job can also be used to export data from all companies.</span></span> <span data-ttu-id="0b0fd-239">プラットフォーム更新プログラム 27 以前では、この機能はフライト DMFEnableAllCompanyExport を有効にすることで有効化することができます。これについては、 [データ管理の概要](../data-entities/data-entities-data-packages.md) で解説しています。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-239">In prior to Platform update 27, this feature can be enabled by enabling the flight DMFEnableAllCompanyExport as explained in [Data management overview](../data-entities/data-entities-data-packages.md).</span></span> <span data-ttu-id="0b0fd-240">プラットフォーム更新プログラム 27 以降では、この機能はデータ管理フレームワークのパラメーターで有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-240">Starting in Platform update 27, this feature can be enabled in data management framework parameters.</span></span> <span data-ttu-id="0b0fd-241">この機能を有効にすると、データプロジェクトにエンティティを追加する際に新しいオプションが表示されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-241">After the feature is enabled, a new option will appear when adding an entity to a data project.</span></span> <span data-ttu-id="0b0fd-242">このオプションを有効にすると、すべての会社から特定のエンティティのデータをエクスポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-242">This option can be enabled to export data from all companies for the specific entity.</span></span> <span data-ttu-id="0b0fd-243">ジョブは順次、各会社からデータをエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-243">The job will export data from each of company in a sequential manner.</span></span> <span data-ttu-id="0b0fd-244">この動作は、パフォーマンスやその他の課題のために、異なる会社からのデータの並列エクスポートを許可することで変更され、ソリューションの信頼性が低下しました。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-244">This behavior was changed from allowing parallel export of data from different companies due to performance and other challenges, which made the solution less reliable.</span></span>

> [!NOTE]
> <span data-ttu-id="0b0fd-245">BYOD 用のエクスポート プロジェクト に複数の エンティティ を追加する場合は、BYOD エクスポート の全体的な信頼性が損なわれないように注意して実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-245">Adding multiple entities to an export project for BYOD must be done carefully to ensure the overall reliability of the BYOD export is not compromised.</span></span> <span data-ttu-id="0b0fd-246">同じプロジェクトに追加する エンティティ の数を決定する場合は、異なるパラメータを考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-246">Different parameters must be taken into consideration when deciding the number of entities that are added to the same project.</span></span> <span data-ttu-id="0b0fd-247">これらのパラメータには、エンティティの複雑度、予想されるエンティティごとのデータ量、ジョブレベルでのエクスポート完了までの全体的な時間が含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-247">Some of these parameters should be the degree of complexity of the entities, data volume per entity that is expected, and the overall time for export to complete at the job level.</span></span> <span data-ttu-id="0b0fd-248">大量の エンティティ を追加することは避ける必要があるため、より少ないエンティティ数で複数のジョブを作成することを推奨します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-248">Adding hundreds of entities must be avoided, therefore creating multiple jobs with smaller number of entities is recommended.</span></span>
>
> <span data-ttu-id="0b0fd-249">BYOD のために **管理 > 定期的なデータ ジョブの管理** で定期的なエクスポートを使用することはお勧めしません。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-249">Use of recurring exports in **Manage > Manage recurring data jobs** for BYOD is discouraged.</span></span> <span data-ttu-id="0b0fd-250">**バッチ処理でのエクスポート** オプションを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-250">You must use the **Export in batch** option.</span></span>

### <a name="incremental-export"></a><span data-ttu-id="0b0fd-251">差分エクスポート</span><span class="sxs-lookup"><span data-stu-id="0b0fd-251">Incremental export</span></span>
<span data-ttu-id="0b0fd-252">データ エクスポートのエンティティを追加するとき、増分エクスポート (増分プッシュとも呼ばれます) またはフル プッシュをするかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-252">When you add an entity for data export, you can select to do an incremental export (which is also known as incremental push) or a full push.</span></span> <span data-ttu-id="0b0fd-253">作業する増分プッシュについては、このトピックで前述されているように、データベースで **変更追跡** オプションを有効にし、適切な変更追跡オプションを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-253">For incremental push to work, you must enable the **Change tracking** option in the database and specify an appropriate change tracking option, as described earlier in this topic.</span></span>

>[!NOTE]
> <span data-ttu-id="0b0fd-254">完全なプッシュは、エンティティからすべての既存のレコードを削除し、選択したエンティティから現在のレコードのセットを挿入します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-254">A full push deletes all existing records from an entity and then inserts the current set of records from the selected entity.</span></span>

<span data-ttu-id="0b0fd-255">広域増分プッシュを選択した場合、最初のプッシュは常に完全なプッシュになります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-255">If you select an incremental push, the first push is always going to be a full push.</span></span> <span data-ttu-id="0b0fd-256">これは、後続の変更を追跡できるようにするために、SQL でどのレコードが「追跡済み」であるかを知る必要があるためです。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-256">This is because SQL needs to know which records have been 'tracked' in order to be able to track subsequent changes.</span></span> <span data-ttu-id="0b0fd-257">新しいレコードが挿入される、またはレコードが追加または削除されるたびに、対応する変更が宛先エンティティに反映されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-257">Whenever a new record is inserted, or a record is added or deleted, the corresponding change will be reflected in the destination entity.</span></span>

<span data-ttu-id="0b0fd-258">最初のプッシュは常にフルプッシュであるため、変更の追跡を有効にしていない場合、明示的なフルプッシュを行うことは推奨しません。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-258">Because the first push is always a full push, we do not recommend that you do an explicit full push before you enable change tracking.</span></span>

<span data-ttu-id="0b0fd-259">最初に変更トラッキングを有効にし、増分プッシュでエクスポート ジョブをスケジュールすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-259">We recommend that you first enable change tracking and schedule a export job with incremental push.</span></span> <span data-ttu-id="0b0fd-260">これにより、最初の完全プッシュと後続の差分エクスポートが処理されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-260">This will take care of the first full push and the subsequent incremental exports.</span></span>

### <a name="timeouts"></a><span data-ttu-id="0b0fd-261">タイムアウト</span><span class="sxs-lookup"><span data-stu-id="0b0fd-261">Timeouts</span></span>
<span data-ttu-id="0b0fd-262">BYOD エクスポートの既定のタイムアウトは、切り捨て操作では 10 分、実際の一括挿入操作には 1 時間に設定されています。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-262">The default timeouts for BYOD exports are set to ten minutes for truncation operations and one hour for actual bulk insert operations.</span></span> <span data-ttu-id="0b0fd-263">ボリュームが多い場合、これらのタイムアウト設定が十分でなく、更新する必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-263">When volumes are high, these timeout settings may not be sufficient and must be updated.</span></span> <span data-ttu-id="0b0fd-264">プラットフォーム更新 18 のリリース以降では、**データ管理** > **フレームワーク パラメーター** > **自分のデータベースの持ち込み** に移動することで、タイムアウト設定を更新できます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-264">Starting with the release of Platform update 18, you can update the timeout settings by navigating to **Data management** > **Framework parameters** > **Bring your own database**.</span></span> <span data-ttu-id="0b0fd-265">タイムアウトは会社ごとに固有の設定となるため、会社ごとに個別に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-265">These timeouts are company specific and must be set separately for each company.</span></span>

### <a name="known-limitations"></a><span data-ttu-id="0b0fd-266">既知の制限</span><span class="sxs-lookup"><span data-stu-id="0b0fd-266">Known limitations</span></span>

<span data-ttu-id="0b0fd-267">BYOD 機能には、次の制限があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-267">The BYOD feature has the following limitations.</span></span>

#### <a name="there-should-be-no-active-locks-on-your-database-during-synchronization"></a><span data-ttu-id="0b0fd-268">同期中、データベースにアクティブなロックが存在してはいけません</span><span class="sxs-lookup"><span data-stu-id="0b0fd-268">There should be no active locks on your database during synchronization</span></span>
<span data-ttu-id="0b0fd-269">BYOD は独自のデータベースであるため、データが同期されているときは Azure SQL データベースにアクティブなロックがないことを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-269">Because BYOD is your own database, you must ensure that there are no active locks on your Azure SQL database when data is being synced.</span></span> <span data-ttu-id="0b0fd-270">同期中にデータベースにアクティブなロックがあると、書き込み速度が低下したり Azure SQL データベースへのエクスポートの完全な失敗につながる可能性もあります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-270">Having active locks on your database during synchronization can result in slow writes or even failure to export to your Azure SQL database.</span></span>

#### <a name="you-cant-export-composite-entities-into-your-own-database"></a><span data-ttu-id="0b0fd-271">独自のデータベースに複合エンティティをエクスポートすることはできません。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-271">You can't export composite entities into your own database</span></span>

<span data-ttu-id="0b0fd-272">現在、複合エンティティがサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-272">Currently, composite entities aren't supported.</span></span> <span data-ttu-id="0b0fd-273">複合エンティティを構成する個々のエンティティをエクスポートする必要がありますが、これは同じデータプロジェクト内で行うことができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-273">You must export individual entities that make up the composite entity which can be done in the same data project.</span></span>

#### <a name="entities-that-dont-have-unique-keys-cant-be-exported-by-using-incremental-push"></a><span data-ttu-id="0b0fd-274">固有キーを持たないエンティティは、増分プッシュを使用してエクスポートすることは不可能</span><span class="sxs-lookup"><span data-stu-id="0b0fd-274">Entities that don't have unique keys can't be exported by using incremental push</span></span>

<span data-ttu-id="0b0fd-275">この制限は特に、数個の既製エンティティからレコードを段階的にエクスポートする場合に直面する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-275">You might face this limitation especially when you try to incrementally export records from a few ready-made entities.</span></span> <span data-ttu-id="0b0fd-276">これらのエンティティはデータをインポートできるように設計されているため、固有のキーはありません。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-276">Because these entities were designed to enable the import of data, they don't have a unique key.</span></span> <span data-ttu-id="0b0fd-277">ただし、変更追跡を、固有のキーがあるエンティティに対してのみ有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-277">However, you can enable change tracking only for entities that have a unique key.</span></span> <span data-ttu-id="0b0fd-278">したがって、増分プッシュには制限があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-278">Therefore, there is a limitation on incremental push.</span></span> <span data-ttu-id="0b0fd-279">1 つの回避策は、必要なエンティティを拡張し、固有のキーを定義することです。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-279">One workaround is to extend the required entity and define a unique key.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="0b0fd-280">トラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="0b0fd-280">Troubleshooting</span></span>

### <a name="incremental-push-not-working-correctly"></a><span data-ttu-id="0b0fd-281">増分プッシュが正常に機能しません</span><span class="sxs-lookup"><span data-stu-id="0b0fd-281">Incremental push not working correctly</span></span>

<span data-ttu-id="0b0fd-282">**問題**- あるエンティティに対して完全プッシュが発生すると、SELECT ステートメントにより BYOD に大量のレコードが表示される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-282">**Issue** - When a full push occurs for some entity then a large set of records can be seen in BYOD using a select statement.</span></span> <span data-ttu-id="0b0fd-283">ただし、増分プッシュの結果は BYOD のレコード数個だけになります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-283">However, an incremental push results in only a few records in BYOD.</span></span> <span data-ttu-id="0b0fd-284">増分プッシュによってすべてのレコードが削除され、BYOD で変更されたレコードのみが追加されます。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-284">It seems as if the incremental push deleted all the records and added only the changed records in BYOD.</span></span> 

<span data-ttu-id="0b0fd-285">**ソリューション**- このような場合、質問のエンティティの変更追跡を無効にしてから再度有効にすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-285">**Solution** - In cases like this it is recommended to disable and re-enable change tracking for the entity in question.</span></span> <span data-ttu-id="0b0fd-286">SQL変更追跡テーブルの状態が、予期された状態になっていない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-286">The state of the SQL change tracking tables might not be in the expected state.</span></span> <span data-ttu-id="0b0fd-287">また、同じテーブル (DMF、MR、Retail) をカバーする他の増分エクスポートがないことを確認してください。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-287">Also verify that there are no other incremental exports that cover the same tables (DMF, MR, Retail).</span></span>

### <a name="ssis-error-code-dts_e_oledberror--an-ole-db-error-has-occurred-error-code-0x80004005"></a><span data-ttu-id="0b0fd-288">SSIS Error Code DTS_E_OLEDBERROR.</span><span class="sxs-lookup"><span data-stu-id="0b0fd-288">SSIS Error Code DTS_E_OLEDBERROR.</span></span>  <span data-ttu-id="0b0fd-289">OLE DB エラーが発生しました。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-289">An OLE DB error has occurred.</span></span> <span data-ttu-id="0b0fd-290">エラー コード: 0x80004005</span><span class="sxs-lookup"><span data-stu-id="0b0fd-290">Error code: 0x80004005</span></span>

<span data-ttu-id="0b0fd-291">**問題** - BYOD へのエクスポートが失敗し、次のような SSIS 例外が発生します。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-291">**Issue** - Export to BYOD fails with an SSIS exception shown below.</span></span>

```Console
An OLE DB error has occurred. Error code: 0x80004005.

An OLE DB record is available. Source: "Microsoft SQL Server Native Client 11.0"  Hresult: 0x80004005  Description: "Communication link failure".

An OLE DB record is available. Source: "Microsoft SQL Server Native Client 11.0"  Hresult: 0x80004005  Description: "TCP Provider: An existing connection was forcibly closed by the remote host.

Failed to open a fastload rowset for <entityStaging>. Check that the object exists in the database.

OLE DB Destination failed the pre-execute phase and returned error code 0xC0202040.
```

<span data-ttu-id="0b0fd-292">**解決策** - AZURE SQL BYOD サーバーの接続ポリシーがプロキシに設定されている場合に、この問題が発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-292">**Solution** - This can occur if the connection policy on the Azure SQL BYOD server is set to Proxy.</span></span> <span data-ttu-id="0b0fd-293">[SQL DB 接続アーキテクチャ](/azure/sql-database/sql-database-connectivity-architecture) の説明に従って、これを「リダイレクト」に変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0b0fd-293">This must be changed to 'Redirect' as explained in [SQL DB Connectivity Architecture](/azure/sql-database/sql-database-connectivity-architecture)</span></span>



[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
