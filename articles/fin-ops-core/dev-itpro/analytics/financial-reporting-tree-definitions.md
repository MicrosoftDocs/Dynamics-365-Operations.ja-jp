---
title: 財務諸表のレポート ツリー定義
description: この記事では、レポート ツリー定義について説明します。 レポート ツリー定義は、組織の構造を定義するレポート コンポーネントです。
author: ShylaThompson
manager: AnnBe
ms.date: 10/07/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: FinancialReports
audience: Application User
ms.reviewer: kfend
ms.custom: 57592
ms.assetid: 747faa47-9a23-4277-bc11-8d0a1267c3a4
ms.search.region: Global
ms.author: aolson
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
ms.openlocfilehash: 17f749863af3c37658935d5065cf053d0a165c1e
ms.sourcegitcommit: 5192cfaedfd861faea63d8954d7bcc500608a225
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/30/2021
ms.locfileid: "5093904"
---
# <a name="reporting-tree-definitions-in-financial-reports"></a>財務諸表のレポート ツリー定義

[!include [banner](../includes/banner.md)]

この記事では、レポート ツリー定義に関する情報を示します。 レポート ツリー定義は、組織の構造と階層の定義に役立つレポート コンポーネント、または構成要素です。

財務諸表は、業務構造が変更されても変更を加えることが容易になるように柔軟なレポートをサポートします。 レポートは、さまざまなコンポーネント、または構成要素から構築されます。 これらの構成要素の 1 つは、レポート ツリー定義です。 レポート ツリー定義では、組織の構造と階層を定義します。 これは、財務データの分析コード関係に基づいた相互分析コード階層構造です。 ツリー内のすべてのユニットに対するレポート単位レベルおよび集計レベルでの情報を提供します。 レポート ツリー定義は、複数の会社が使用できる構成要素グループを作成するために、列定義およびレポート定義と組み合わせることができます。 レポート単位が組織図の各ボックスに対して使用されます。 レポート ユニットは財務データからの個々の部門である場合があります。また、他のレポート ユニットの情報を連結する上位レベルのサマリー ユニットである場合もあります。 レポート ツリーを含むレポート定義では、各レポート単位および集計レベルに対して 1 つのレポートが生成されます。 これらのレポートはすべて、レポート定義が行定義からのレポート ツリーを使用するよう指定していない場合、レポート定義で指定された行と列定義を使用します。 行および列の定義は、財務報告の設計と機能の重要なコンポーネントです。 レポート ツリーは、コンポーネントのワット数を増やし、事業構造の変化に応じて柔軟なレポートをサポートしています。 レポート ツリーに基づいていない財務諸表は財務諸表機能の一部のみ使用します。 同じ行と列定義を含む複数のレポート ツリー定義を使用して、さまざまな方法で組織のデータを表示できます。

## <a name="reporting-tree-best-practices"></a>レポート ツリーのベスト プラクティス
レポート ツリーを作成する前に、次のベスト プラクティスを検討してください。

- 最初に、自分の法人または会社が必要な、レポート分析コードを特定します。
- 構造の設定方法を考慮してから、企業の組織図を振り出します。 組織図は、レポート ユニットを一つ以上のレポート ツリーにグループ化する方法を視覚化するのに役立ちます。
- 財務データで定義された部門やプロジェクトなどの使用可能な最下位詳細レベルから開始します。 高レベルの部門または地域の表示に必要な数のボックスを詳細レベルに追加します。 各ボックスは作成したレポート ツリーの潜在的なレポート単位を表します。
- また、ツリーを構築する最善の方法を考慮する必要があります。 レポート ツリーを生成するために自動構築プロセスを使用することができますし、手動でレポート ツリーを作成することもできます。 自分のツリーをデザインする前に、両方の方法を理解することが重要です。
- 財務データのシステムで定義されているレポート単位を使用して、レポート ツリー定義にレポート単位を追加できます。

## <a name="create-multiple-reporting-trees"></a>[ 複数のレポート ツリーの作成]
さまざまな方法で組織のデータを表示するレポート ツリーをいくつでも作成できます。 各レポート ツリーには、任意の部門およびサマリー ユニットの組み合わせを含めることができます。 レポート定義には、一度に 1 つのレポート ツリーにのみリンクを含めることができます。 レポート単位構造の並べ替えによって、異なるレポート ツリーを作成できます。 レポート ツリーごとに、同じ行と列の定義を使用できます。 この方法で、異なる財務レポートのレイアウトをすばやく作成できます。 複数のレポート ツリーを作成すると、さまざまな方法で、会社の工程を分析、提示する一連の財務諸表を毎月印刷できます。 詳細については、この記事の最後にあるレポート単位構造の例を参照してください。

## <a name="create-a-reporting-tree-definition"></a>[レポート ツリー定義の作成]
レポート ツリー定義は次の表で説明されている列を含みます。

| [レポート ツリー列] | 説明 |
|-----------------------|-------------|
| 法人               | レポート単位に対する会社名。 通常、集計レベルにのみ割り当てられる **\@ANY** 値によって、レポート ツリーがすべての会社で使用できます。 すべての子分岐には、割り当てられている会社があります。 |
| 単位名             | グラフィック レポート ツリーで、このレポート単位を識別するコード。 一貫しており、ユーザーが容易に理解できる固有のコーディング システムを確立してください。 |
| [単位の説明]      | レポート単位のタイトルは **UnitDesc** をコードとして、レポート定義の **ヘッダーとフッター** タブに入力すると、レポート ヘッダーまたはフッターに表示されます。 タイトルは **UnitDesc** を、行定義の **説明** セルに入力すると、レポート行の説明に表示されます。 |
| 分析コード            | レポート単位は、財務データから情報を直接引出します。 これは、勘定および関連するセグメントの論理的な配置と長さを定義します。 すべてのレポート単位の行はこの列に分析コードが必要になります。 (たとえば、その単位に直接関連している経費に対してなど) 集計単位の行に分析コードを配置することもできます。 集計単位の行に分析コードを入力する場合、親単位で使用される勘定を子単位では使用できません。 そうしないと、勘定が重複する可能性があります。 |
| [行定義]       | レポート単位に対する行定義の名前。 同じ行定義はレポート ツリーの各ユニットで使用されます。 レポートを生成すると、この行定義は、各レポート ユニットで使用されます。 行定義には、複数の財務分析コード リンクを含めることができます。 レポート ツリーで行定義が指定されている場合、レポート定義の **レポート** タブの **レポート ツリーから行定義を使用** チェック ボックスをオンにします。 |
| [行のリンク]              | レポート ユニットで使用する行リンク。 行リンクは、行定義にリンクさせる財務分析コードを識別するために行定義で定義されます。 |
| [外部リンク]         | このレポート ユニットで使用する行リンク。 行のリンクは、リンクさせるレポートを識別するために、行定義に対して定義されます。 |
| [外部ファイル]         | データを引っ張る財務諸表のワークシートのファイル パス。 |
| [ページ オプション]          | この列は、レポートを表示または印刷するときにレポート単位の詳細を非表示にするかどうかを制御します。 |
| [ロールアップ %]              | 親単位に割り当てられるレポート単位の割合。 この列に入力した割合は、行の値が親レポートに追加される前に、行定義の各行に適用されます。 たとえば、子単位が 2 つの部門間で均等に分割される必要がある場合、各行の金額は部門レポートに追加される前に 50 パーセント乗算されます。 1 つのレポート単位が 2 つの親単位を持つことはできません。 レポート単位から 2 つの親単位に金額を配賦するには、同じ分析コードの別のレポート単位を作成し、追加の 50 パーセントをロールアップします。 割合全体を小数点なしで入力します。 たとえば、**25** は、親に対して 25% の配賦を表します。 小数点 (**.25**) が含まれている場合、0.25% が親に配賦されます。 1 パーセントより小さい割合を使用するには、レポート定義の **ロールアップを許可 &lt;1%** オプションを使用します。 このオプションは、**レポートの設定** のダイアログ ボックスの **追加オプション** タブにあります。 レポート定義の **設定** タブの **他** ボタンからこのダイアログ ボックスにアクセスできます。 |
| [単位のセキュリティ]         | レポート単位の情報にアクセスできるユーザーおよびグループを制限します。 |
| [追加テキスト]       | レポートに含まれるテキスト。 |

レポート ツリー定義を作成するには、次の手順に従います。

1. レポート デザイナーを開きます。
2. **ファイル** &gt; **新規** &gt; **レポート ツリー定義** をクリックします。
3. **編集** &gt; **分析コードからレポート単位の挿入** をクリックします。
4. **分析コードからレポート単位を挿入** ダイアログ ボックスで、レポート ツリーに含める分析コードのチェックボックスをオンにします。 **分析コードからレポート単位を挿入** ダイアログ ボックスは、次のセクションが含まれます。

    | 項                          | 説明 |
    |----------------------------------|-------------|
    | [分析コード区分のレポート] | セグメントの数と長さを変更するには **セグメントの分割** と **セグメントの結合** ボタンを使用します。<blockquote>[!NOTE] 自分が分割したセグメントのみを結合できます。 複数の分析コードを組み合わせるには、分析コード値でワイルドカード文字を使用します。</blockquote> |
    | [含む / 文字の位置]       | このセクションでは、財務データで定義された分析コードを一覧表示し、各分析コードに対して、最も長い定義済の値の文字数を表示します。 レポート ツリー階層に分析コードを含める場合は、その分析コードのチェック ボックスをオンにします。 |
    | 区分階層および範囲     | このセクションでは、分析コード階層を表示します。 リストの分析コードを移動して、レポートの順序を変更できます。 **移動元分析コード** と **移動先分析コード** フィールドで各分析コード内の値の範囲を指定できます。 範囲を指定しない場合、すべての分析コード値がレポート ツリーに挿入されます。<blockquote>[!NOTE] 複数の分析コードを使用している場合、転記された分析コードの組み合わせのみが結果で返されます。</blockquote> |

    **分析コードからレポート単位の挿入** ダイアログ ボックスの例を示すスクリーン ショットについては、この記事で後述する "分析コードからレポート単位を挿入ダイアログ ボックスの例" セクションを参照してください。

5. (たとえば、1 つの区分を 2 つの短い区分に分けるなど) 追加の区分を作成するには、**文字の位置** フィールドで正しい場所をクリックし、**区分を分割** をクリックします。
6. 2 つの区分を 1 つの区分に結合するには、区分ボックスのどちらかをクリックして結合させ、**区分の結合** をクリックします。
7. 階層は、分析コードの相互へのレポート方法および各分析コードの範囲を定義します。 分析コード階層を変更するには、**区分の階層と範囲** 領域で移動する分析コードを選択し、**上へ移動** または **下へ移動** をクリックします。
8. 新しいレポート ツリーに追加する分析コード値の範囲を指定するには、**区分の階層および範囲** 領域で、次の手順に従います :

    1. その分析コードの **移動元分析コード** フィールドで、範囲の最初の値を入力します。
    2. **移動先分析コード** フィールドで、範囲の最後の値を入力します。

9. **セグメントの階層と範囲** 領域の各分析コードに対して、ステップ 7 ～ 8 を繰り返します。
10. レポート単位が新しいレポート ツリーにもたらされる方法を定義したら、**OK** をクリックします。
11. **ファイル** &gt; **保存** をクリックしてレポート ツリーに保存します。 レポート ツリーの固有の名前と説明を入力し、**OK** をクリックします。

### <a name="open-an-existing-reporting-tree-definition"></a>既存のレポート ツリー定義を開く

1. [レポート デザイナー] で、ナビゲーション ウィンドウの **レポート ツリーの定義** をクリックします。
2. このレポート ツリーの一覧で名前をダブルクリックして、開きます。
3. レポート ツリーに関連付けられる構成要素を表示するには、レポート ツリー定義を右クリックし、**関連付け** を選択します。

### <a name="roll-up-data-in-a-reporting-tree"></a>レポート ツリーのロールアップ データ

レポート ツリーを使用すると、親レポート単位のレベルで子レポート単位の金額を集計できます。 この集計はデータのロールアップと呼ばれるものです。 レポート ツリーで親単位に金額をロールアップするのに、次のルールが使用されます :

- レポート ツリーでは、単一レベルのツリーである場合を除き、子単位は分析コードを含める必要があります。 親単位は通常、レポート ツリーに分析コードは含まれません。

    > [!NOTE]
    > 子単位および親単位の両方に分析コードを指定すると、レポートのデータの重複が発生する場合があります。

- レポート ツリーで分析コードを含むレポート単位は、行および列の定義に使用される分析コードに対応します。 分析コードの組み合わせが、その単位に返される金額を決定します。 たとえば、この記事で後述する例 2 では、行 6 および 7 はそれぞれ、部門 00 と 01 にのみ値を返します。
- レポート ツリーで分析コードを含まない親レポート単位の金額は、子単位のレポートから決定され、特定の親単位に金額をロールアップします。 例えば、親単位 (データ ロールアップの例の例 2 の [Contoso USA] を参照) に、2 つの子単位 (022 と 023) があり、分析コードが含まれていない場合、子および親それぞれに対してレポートが生成されます。 親の合計は、2 つの子の合計金額です。

### <a name="manage-reporting-units"></a>[レポート単位の管理]

各レポート ツリー定義は、固有のビューで表示されます。 親子階層を表示するグラフィック表示や、各レポート単位に対して特定の情報を表示するワークシートのビューがあります。 グラフィック表示やワークシートのビューは関連付けられます。 1 つのビューでレポート単位を選択すると、他のビューでも選択されます。 財務データの分析コード関係に基づいた相互分析コード階層を構築できます。 レポート ツリー定義を作成すると、部門の損益計算書または連結集計損益計算書のいずれの生成に関係なく同じ行定義を複数回使用できます。 行定義に対して定義された分析コードは、組織の業績のさまざまな概要を提供するために、レポート ツリー定義の分析コードと組み合わせることができます。

### <a name="reporting-unit-structure"></a>[ レポート単位の構造]

次のレポート単位のタイプが、財務諸表で使用されます。

- 詳細単位は、財務データ、Excel ワークシート、別の財務諸表のワークシートから情報を直接引き出します。
- 集計単位は、下位レベルの単位からデータを集計します。

親単位は詳細単位から集計情報を集計する集計単位です。 集計単位は、詳細単位および集計単位の両方にできます。 したがって、集計単位は下位レベルの単位、財務データ、または、Excel ワークシートから情報を引き出すことができます。 親単位は、より高いレベルの親単位の子単位にできます。 レポートの子単位は、財務データまたは Excel ワークシートからの情報を直接引っ張る詳細単位です。 レポートの子単位は、中間集計単位にもできます。 つまり、下位レベルの単位の親単位となり、上位レベルの集計単位の子単位にもできます。 レポート単位に対しての最も一般的なシナリオでは、親単位は **分析コード** 列の空白のセルを含み、子単位は特定のまたはワイルドカードの分析コード組み合わせへのリンクを含みます。

### <a name="organize-reporting-units"></a>[ レポート単位の整理]

グラフィカル表示でレポート単位を移動することによって、レポート ツリー定義の組織構造を並べ替えられます。 また、レポート ツリーでレポート単位を上位レベルに引き上げたり、それらを下位レベルに下げたりできます。

1. [レポート デザイナー] で、変更するレポート ツリー定義を開きます。
2. レポート定義のグラフィック表示で、レポート単位を選択します。
3. 単位を新しい位置にドラッグします。 または、単位を右クリックし、**レポート単位の引き上げ** または **レポート単位の引き下げ** を選択します。
4. **ファイル** &gt; **保存** をクリックして変更を保存します。

### <a name="add-text-about-a-reporting-unit"></a>[ レポート単位についてテキストを追加]

追加のテキスト エントリは、レポート ツリー定義に情報を追加する、最大 255 文字の静的テキスト文字列です。 たとえば、追加のテキストに、会社の簡単な説明を設定できます。 レポート定義の各レポート単位に対して、最大 10 個の追加のテキスト エントリを作成できます。 追加のテキストはテキストが割り当てられているレポート単位のレポートに表示されます。 行定義の **説明** 列、およびレポート定義の **ヘッダーとフッター** タブからテキスト エントリを追加することができます。

1. [レポート デザイナー] で、変更するレポート ツリー定義を開きます。
2. レポート単位行に対する **追加テキスト** セルをダブルクリックします。
3. **追加のテキスト** ダイアログ ボックスの最初の空の行にテキストを入力します。 **追加のテキスト** ダイアログ ボックスの職位に関係なく、テキストを含む最初の行が [単位テキスト 1] として参照されます。
4. このレポート単位にさらにテキスト エントリを追加するには、空の行にテキストを入力します。
5. **OK** をクリックします

### <a name="remove-additional-text-from-a-reporting-unit"></a>レポート単位から追加のテキストを削除

1. レポート デザイナーで、変更するレポート ツリー定義を開きます。
2. レポート ユニット行の **追加テキスト** セルをダブルクリックします。
3. **追加のテキスト** ダイアログ ボックスで、削除するエントリを選択し、**クリア** をクリックします。 または、エントリを右クリックして **切り取り** を選択します。
4. **OK** をクリックします

### <a name="restrict-access-to-a-reporting-unit"></a>レポート単位へのアクセスを制限

特定のユーザーとグループがレポート単位にアクセスすることを防ぐことができます。 レポート単位のレポートの子単位に適用するための制限を定義することもできます。

1. [レポート デザイナー] で、変更するレポート ツリー定義を開きます。
2. アクセスを制限するレポート ユニット行の **単位のセキュリティ** セルをダブルクリックします。
3. **単位のセキュリティ** ダイアログ ボックスで、**ユーザーとグループ** をクリックします。
4. レポート単位へのアクセス権を持つユーザーまたはグループを選択して、**OK** をクリックします。
5. レポートの子単位へのアクセスを制限するには、**レポートの子単位のセキュリティを追加** チェック ボックスを選択します。
6. **OK** をクリックします

### <a name="remove-access-to-a-reporting-unit"></a>レポート単位へのアクセスを削除

1. [レポート デザイナー] で、変更するレポート ツリー定義を開きます。
2. アクセスを削除するレポート単位の行の **単位のセキュリティ** セルをダブルクリックします。
3. **単位のセキュリティ** ダイアログ ボックスで名前を選択し、**削除** をクリックします。
4. **OK** をクリックします

### <a name="link-to-reports"></a>レポートへのリンク

行定義の **レポート** 列を作成して、レポートに含めるレポートの指定した後は、リンクされている列およびレポートに関する情報を含むレポート ツリーを更新する必要があります。 レポートは、レポート ツリーのどの単位にもインポートできます。

### <a name="identify-the-report-in-a-reporting-tree"></a>レポート ツリーのレポートの識別

1. [レポート デザイナー] で、変更するレポート ツリー定義を開きます。
2. 同じ行定義をレポート ツリーのすべての単位で使用するため、**行の定義** 列では、セルの情報は選択した行の情報に基づきます。 **行の定義** セルをダブルクリックし、レポートに関する情報を含む行定義を選択します。
3. レポート単位の **ワークシートのリンク** で、レポートに対応するリンク名を選択します。
4. レポート単位の **ブックまたはレポートのパス** セルで、レポートの名前を入力、または、レポートを参照して選択します。
5. レポートでワークシートを指定するには、**ワークシート名** セルで、ワークシートの名前を入力します。
6. レポートからデータを取得するレポートの各単位に対して手順 3 ~ 5 を繰り返します。 レポートに誤ったデータが表示されるのを防ぐために、正しいレポートの名前がレポート ツリーに対応する単位に表示されることを確認します。

## <a name="examples"></a>例
### <a name="reporting-unit-structure--example-1"></a>[レポート単位の構造 – 例 1]

次のレポート ツリーのレポート単位構造は次のとおりです。

- Contoso 日本のレポート単位は、Contoso 日本の販売、Contoso 日本のコンサルティングの子単位の親単位です。
- Contoso 日本の販売部門課単位は、Contoso 日本単位の子単位と、国内販売および自動販売単位の親単位の両方です。
- 最下位レベルの詳細レポート単位 (国内販売、自動販売、クライアント サービス、および工程) は、財務データの部門を表します。 これらのレポート単位は、ダイアグラムの影付き領域にあります。
- 上位レベルの集計単位は、詳細単位から情報を集計します。

[![ContosoEntertainmentSummaryReportStructure](./media/contosoentertainmentsummaryreportstructure.png)](./media/contosoentertainmentsummaryreportstructure.png)

### <a name="reporting-unit-structure--example-2"></a>[レポート単位の構造 – 例 2]

次の図では、レポート ツリーに業務機能で分割された組織構造が含まれています。

[![contoso 全単位の集計](./media/summaryofallunitscontoso.png)](./media/summaryofallunitscontoso.png)

### <a name="example-of-the-insert-reporting-units-from-dimensions-dialog-box"></a>[分析コードからレポート単位を挿入] ダイアログ ボックスの例

次の図は、**分析コードからレポート単位を挿入** ダイアログ ボックスの例を示しています。 この例では、事業単位、原価部門、および部門の組み合わせの結果を返します。

[![InsertReportingUnits](./media/insertreportingunits.png)](./media/insertreportingunits.png)

最終的なレポート ツリー定義は事業単位、原価部門、部門別に並べ替えられます。 5 番目のレポート単位の分析コードは、**事業単位 = \[001\]、原価部門 =\[\]、部門 = \[022\]** で、事業単位 001 と部門 022 に対して固有のアカウントのレポート単位を識別します。

[![ReportingTree](./media/reportingtree-1024x646.png)](./media/reportingtree.png)

### <a name="examples-of-data-roll-up"></a>データ ロールアップの例

次の例では、ロールアップされたデータに対してレポート ツリー定義で使用される可能な情報を示します。

#### <a name="example-1"></a>例 1

[![MutliCompanyRollUp](./media/mutlicompanyrollup.png)](./media/mutlicompanyrollup.png)

#### <a name="example-2"></a>例 2

[![CrossCompanyDepartmentRollUp](./media/crosscompanydepartmentrollup.png)](./media/crosscompanydepartmentrollup.png)

## <a name="additional-resources"></a>その他のリソース

[財務報告](financial-reporting-intro.md)
