---
title: 外部の CSV ファイルからデータをインポートするための ER コンフィギュレーションの設計
description: この手順を使用して、外部ファイルから CSV 形式で Finance and Operations アプリにデータをインポートできるように電子申告コンフィギュレーションを設計します。
author: NickSelin
ms.date: 12/12/2017
ms.topic: business-process
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: 05beb15413362aea557fb80fb471c10e1f832184
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/31/2021
ms.locfileid: "5752535"
---
# <a name="design-er-configurations-to-import-data-from-external-csv-files"></a><span data-ttu-id="c124d-103">外部の CSV ファイルからデータをインポートするための ER コンフィギュレーションの設計</span><span class="sxs-lookup"><span data-stu-id="c124d-103">Design ER configurations to import data from external CSV files</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="c124d-104">この手順を使用して、外部ファイルから CSV 形式でアプリケーションにデータをインポートできるように電子申告 (ER) コンフィギュレーションを設計します。</span><span class="sxs-lookup"><span data-stu-id="c124d-104">Use this procedure to design Electronic reporting (ER) configurations to import data in to the application from an external file in CSV format.</span></span> <span data-ttu-id="c124d-105">この手順では、サンプル会社 Litware, Inc. 用に、必要な ER の構成を作成します。これらのステップを完了するには、まず手順 「ER 構成プロバイダを作成し、アクティブとしてマークする」 に記載のステップを完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c124d-105">In this procedure, you will create the required ER configurations for the sample company, Litware, Inc. To complete these steps, you must first complete the steps in the procedure, "ER Create a configuration provider and mark it as active."</span></span>

<span data-ttu-id="c124d-106">この手順は、「システム管理者」または「電子レポート開発者」ロールが割り当てられているユーザー用に作成されています。</span><span class="sxs-lookup"><span data-stu-id="c124d-106">This procedure is created for users with the assigned role of System administrator or Electronic reporting developer.</span></span> <span data-ttu-id="c124d-107">これらのステップは、USMF データ セットを使用して完了することができます。</span><span class="sxs-lookup"><span data-stu-id="c124d-107">These steps can be completed using the USMF data set.</span></span>

<span data-ttu-id="c124d-108">以下のファイルをローカルにダウンロードして保存する必要もあります: [Dynamics 365 Finance 電子レポートの例](https://go.microsoft.com/fwlink/?linkid=862266): 1099model.xml、1099formatcsv.xml、1099entriescsv.csv。</span><span class="sxs-lookup"><span data-stu-id="c124d-108">You must also download and save the following files locally: [Dynamics 365 Finance Electronic Reporting Examples](https://go.microsoft.com/fwlink/?linkid=862266): 1099model.xml, 1099formatcsv.xml, 1099entriescsv.csv.</span></span>

1. <span data-ttu-id="c124d-109">[組織管理] > [ワークスペース] > [電子申告] の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="c124d-109">Go to Organization administration > Workspaces > Electronic reporting.</span></span>
    * <span data-ttu-id="c124d-110">アプリケーションのテーブルに、XML、TXT、または CSV 形式の外部ファイルをインポートするプロセスを構成できます。</span><span class="sxs-lookup"><span data-stu-id="c124d-110">You can configure a process to import external files in XML, TXT, or CSV format to tables in the application.</span></span> <span data-ttu-id="c124d-111">まず、ビジネス観点から、インポートされたデータを表す抽象データ モデルを作成する必要があります: ER データ モデルの構成が作成されます。</span><span class="sxs-lookup"><span data-stu-id="c124d-111">First, you must create an abstract data model to represent the imported data, from a business standpoint – an ER data model configuration is created for that.</span></span> <span data-ttu-id="c124d-112">次に、ファイルから抽象データ モデルにデータをポートする方法として、設計されたデータ モデルにマップするインポートされたファイルの構造を定義します: ER 形式の構成が作成されます。</span><span class="sxs-lookup"><span data-stu-id="c124d-112">Next, define a structure of the imported file that maps to the designed data model as the way to port data from the file to the abstract data model – an ER format configuration is created for that.</span></span> <span data-ttu-id="c124d-113">次に、インポートされたファイルのデータと保持されている抽象データ モデルを使用してアプリケーション テーブルまたはデータ エンティティーを更新する方法を記述する、新しいモデル マッピングを使用し、ER データ モデル構成を拡張する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c124d-113">Then, the ER data model configuration must be extended with a new model mapping that describes how the data from the imported file and the persisted data from the abstract data model is used to update the application tables or data entities.</span></span>
    * <span data-ttu-id="c124d-114">以下の手順では、外部から追跡されたベンダーの取引を後で1099のフォームのベンダーの決済で使用する目的で、外部の CSV ファイルからインポートする方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="c124d-114">The following steps show how externally tracked vendors' transactions are imported from the external CSV file for later use in the vendor's settlement for 1099's forms.</span></span>
    * <span data-ttu-id="c124d-115">サンプル会社 Litware, Inc. のコンフィギュレーション プロバイダーが使用可能であり、アクティブとしてマークされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="c124d-115">Verify that the configuration provider for sample company, Litware, Inc. is available and marked as active.</span></span> <span data-ttu-id="c124d-116">この構成プロバイダーが表示されない場合は、「構成プロバイダを作成し、アクティブとしてマークする」 に記載の手順を完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c124d-116">If you don't see this configuration provider, you must first complete the steps in the procedure, "Create a configuration provider and mark it as active".</span></span>
2. <span data-ttu-id="c124d-117">[コンフィギュレーションをレポートする] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-117">Click Reporting configurations.</span></span>
3. <span data-ttu-id="c124d-118">[1099 Payments model] フィルタを適用します。</span><span class="sxs-lookup"><span data-stu-id="c124d-118">Apply the '1099 Payments model' filter.</span></span> <span data-ttu-id="c124d-119">手順 「ER 電子レポート用に外部ファイルからデータをインポートするために必要な設定を作成する」 を既に完了しており、 [1099 支払モデル] の構成を構成ツリーで利用できる場合は、次の下位タスクのすべての手順をスキップしてください 。</span><span class="sxs-lookup"><span data-stu-id="c124d-119">If you already completed the procedure," ER Create required configurations to import data from an external file for electronic reporting", and the '1099 Payments model' configuration is available in the configuration tree, skip all of the steps in the next sub-task.</span></span>

## <a name="add-a-new-er-model-configuration"></a><span data-ttu-id="c124d-120">新しい ER モデル コンフィギュレーションの追加</span><span class="sxs-lookup"><span data-stu-id="c124d-120">Add a new ER model configuration</span></span>

1. <span data-ttu-id="c124d-121">データのインポートをサポートする新しいモデルを作成する代わりに、既にダウンロードしてある 1099model.xml ファイルをロードします。</span><span class="sxs-lookup"><span data-stu-id="c124d-121">Instead of creating a new model to support data import, load the 1099model.xml file that you previously downloaded.</span></span> <span data-ttu-id="c124d-122">このファイルには、仕入先のトランザクションのカスタム データ モデルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="c124d-122">This file contains the custom data model of vendors' transactions.</span></span> <span data-ttu-id="c124d-123">このデータ モデルは、必要なデータ コンポーネントに既にマップされています。</span><span class="sxs-lookup"><span data-stu-id="c124d-123">This data model is already mapped to the necessary data components.</span></span>
2. <span data-ttu-id="c124d-124">[交換] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-124">Click Exchange.</span></span>
3. <span data-ttu-id="c124d-125">[XML ファイルから読み込む] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-125">Click Load from XML file.</span></span>
4. <span data-ttu-id="c124d-126">[参照] をクリックし、以前ダウンロードした 1099model.xml ファイルに移動します。</span><span class="sxs-lookup"><span data-stu-id="c124d-126">Click Browse and navigate to the 1099model.xml file that you previously downloaded.</span></span>
5. <span data-ttu-id="c124d-127">[OK] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-127">Click OK.</span></span>

## <a name="add-a-new-er-format-configuration-that-supports-data-import"></a><span data-ttu-id="c124d-128">データのインポートをサポートする新しい ER 書式のコンフィギュレーションの追加</span><span class="sxs-lookup"><span data-stu-id="c124d-128">Add a new ER format configuration that supports data import</span></span>

1. <span data-ttu-id="c124d-129">ツリーで、[1099 Payments model] を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-129">In the tree, select '1099 Payments model'.</span></span>
2. <span data-ttu-id="c124d-130">[コンフィギュレーションの作成] をクリックすると、ドロップ ダイアログが開きます。</span><span class="sxs-lookup"><span data-stu-id="c124d-130">Click Create configuration to open the drop dialog.</span></span>
3. <span data-ttu-id="c124d-131">[新規] フィールドで、「1099 Payments model のデータ モデルに基づいた書式」と入力します。</span><span class="sxs-lookup"><span data-stu-id="c124d-131">In the New field, enter 'Format based on data model 1099 Payments model'.</span></span>
4. <span data-ttu-id="c124d-132">[データのインポートのサポート] フィールドで [はい] を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-132">Select Yes in the Supports data import field.</span></span>
5. <span data-ttu-id="c124d-133">ESC キーを押してこのページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="c124d-133">Press ESC key to close this page.</span></span>
    * <span data-ttu-id="c124d-134">データのインポートをサポートするために、新しい ER 書式を作成する代わりに既にダウンロードしてあるファイル 1099formatcsv.xml をロードします。</span><span class="sxs-lookup"><span data-stu-id="c124d-134">Instead of creating a new ER format to support data import, load the 1099formatcsv.xml file that you previously downloaded.</span></span> <span data-ttu-id="c124d-135">このファイルには、入力される CSV ファイルの構造を定義する必須のERフォーマットと、この構造と仕入先の取引のデータ モデルのマッピングが含まれています。</span><span class="sxs-lookup"><span data-stu-id="c124d-135">This file contains the required ER format that defines the structure of the incoming CSV file and the mapping of this structure to the data model of the vendors' transactions.</span></span>
6. <span data-ttu-id="c124d-136">[交換] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-136">Click Exchange.</span></span>
7. <span data-ttu-id="c124d-137">[XML ファイルから読み込む] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-137">Click Load from XML file.</span></span>
    * <span data-ttu-id="c124d-138">[参照] をクリックし、以前ダウンロードした 1099formatcsv.xml ファイルに移動します。</span><span class="sxs-lookup"><span data-stu-id="c124d-138">Click Browse and navigate to the 1099formatcsv.xml file that you previously downloaded.</span></span>
8. <span data-ttu-id="c124d-139">[OK] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-139">Click OK.</span></span>
9. <span data-ttu-id="c124d-140">ツリーで、[1099 Payments model] を展開します。</span><span class="sxs-lookup"><span data-stu-id="c124d-140">In the tree, expand '1099 Payments model'.</span></span>
10. <span data-ttu-id="c124d-141">ツリーで、[1099 Payments model\For importing vendors' transactions (CSV)] を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-141">In the tree, select '1099 Payments model\For importing vendors' transactions (CSV)'.</span></span>

## <a name="review-format-settings"></a><span data-ttu-id="c124d-142">書式設定の確認</span><span class="sxs-lookup"><span data-stu-id="c124d-142">Review format settings</span></span>

1. <span data-ttu-id="c124d-143">[デザイナー] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-143">Click Designer.</span></span>
2. <span data-ttu-id="c124d-144">[展開] / [折りたたみ] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-144">Click Expand/collapse.</span></span>
3. <span data-ttu-id="c124d-145">[詳細の表示] をオンに切り替えます。</span><span class="sxs-lookup"><span data-stu-id="c124d-145">Toggle 'Show details' on.</span></span>
    * <span data-ttu-id="c124d-146">設計された形式は、CSV 形式の外部ファイルの予想構造を表します。</span><span class="sxs-lookup"><span data-stu-id="c124d-146">The designed format represents the expected structure of the external file in CSV format.</span></span>
4. <span data-ttu-id="c124d-147">ツリーで、[受取: ファイル\ルート: 順番] を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-147">In the tree, select 'Incoming: File\Root: Sequence'.</span></span>
    * <span data-ttu-id="c124d-148">ルート要素がシーケンス タイプの場合、「特殊文字」 フィールドで 「New line - Windows (CR LF)」 オプションが選択されています。</span><span class="sxs-lookup"><span data-stu-id="c124d-148">For the Root element of the type SEQUENCE, the option 'New line - Windows (CR LF)' has been selected in the 'Special characters' field.</span></span> <span data-ttu-id="c124d-149">この設定に基づいて、解析ファイル内の各明細行を別々のレコードとみなす必要があります。</span><span class="sxs-lookup"><span data-stu-id="c124d-149">Based on this setting, each line in the parsing file must be considered as a separate record.</span></span>
5. <span data-ttu-id="c124d-150">ツリーで、`Incoming: File\Root: Sequence\Line: Sequence 1..*` を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-150">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..*`.</span></span>
    * <span data-ttu-id="c124d-151">ルート\明細行の要素がシーケンス タイプの場合、[多様性] フィールドで 「1 つ、多数」が選択されています。</span><span class="sxs-lookup"><span data-stu-id="c124d-151">For the Root\Line element of the type SEQUENCE, the option 'One many' has been selected in the 'Multiplicity' field.</span></span> <span data-ttu-id="c124d-152">この設定に基づいて、解析ファイルに少なくとも 1 つの明細行が表示されます。</span><span class="sxs-lookup"><span data-stu-id="c124d-152">Based on this setting, at least one line will be presented in the parsing file.</span></span>
6. <span data-ttu-id="c124d-153">ツリーで、`Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case` を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-153">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case`.</span></span>
    * <span data-ttu-id="c124d-154">CASE タイプのルート\明細行\タイプ要素は、ルート\明細行順序の入れ子になった要素として追加されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-154">Note that the Root\Line\Types element of the type CASE has been added as the nested element of the Root\Line sequence.</span></span> <span data-ttu-id="c124d-155">この CASE 要素には 3 つの入れ子になった順序要素が含まれているため、この設定では解析ファイルで 3 種類の明細行を満たすと想定しています。</span><span class="sxs-lookup"><span data-stu-id="c124d-155">Because this CASE element contains 3 nested sequence elements, this setting assumes that we expect to meet 3 different types of line in the parsing file.</span></span>
7. <span data-ttu-id="c124d-156">ツリーで、`Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Header: Sequence 1..1` を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-156">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Header: Sequence 1..1`.</span></span>
    * <span data-ttu-id="c124d-157">順番タイプのルート\明細行\タイプ\ヘッダー要素には、固定された文字列値として定義されている値の、入れ子になった文字列要素が含まれています。</span><span class="sxs-lookup"><span data-stu-id="c124d-157">The Root\Line\Types\Header element of the type SEQUENCE contains the nested STRING element the value of which has been defined as the fixed string value.</span></span> <span data-ttu-id="c124d-158">この順序は、解析ファイルのヘッダー行を解析します。</span><span class="sxs-lookup"><span data-stu-id="c124d-158">This sequence will parse the header line of the parsing file.</span></span>
8. <span data-ttu-id="c124d-159">ツリーで、`Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)` を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-159">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)`.</span></span>
    * <span data-ttu-id="c124d-160">順番タイプのルート\明細行\タイプ\レコード要素は、トランザクション明細行を解析するように構成されています。</span><span class="sxs-lookup"><span data-stu-id="c124d-160">The Root\Line\Types\Record element of the type SEQUENCE, has been configured to parse the transaction lines.</span></span> <span data-ttu-id="c124d-161">「区切り記号」の文字オプションにカンマとが設定されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-161">Note that the 'Custom delimiter' character option has been configured as a comma.</span></span> <span data-ttu-id="c124d-162">つまり、解析ファイル内のこの明細行のタイプでは、フィールド区切り記号としてカンマが使用されることを意味します。</span><span class="sxs-lookup"><span data-stu-id="c124d-162">This means that the comma will be used as a fields' separator for this type of line in the parsing file.</span></span>
    * <span data-ttu-id="c124d-163">分割されたフィールドとしてト取引の明細行を解析する目的で、異なるデータ タイプの複数の入れ子になった要素が、ルート\明細行\タイプ\レコード要素に追加されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-163">Note that several nested elements of different data types have been added for the Root\Line\Types\Record element for parsing the transaction's lines as separated fields.</span></span> <span data-ttu-id="c124d-164">「見積申請」のオプションが [なし] として構成されていることに留意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-164">Note that the 'Quotation application' option has been configured as 'None'.</span></span> <span data-ttu-id="c124d-165">つまり、解析ファイルでは、このタイプのすべてのフィールドには囲まれた文字が含まれていないと見なされます。</span><span class="sxs-lookup"><span data-stu-id="c124d-165">This means that in the parsing file, all fields of this type will be considered as having no enclosed characters.</span></span>
9. <span data-ttu-id="c124d-166">ツリーで、`Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\TransactionDate: DateTime` を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-166">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\TransactionDate: DateTime`.</span></span>
    * <span data-ttu-id="c124d-167">たとえば、DATETIME タイプのルート\明細行\タイプ\レコード\TransactionDate 要素は、取引日付と時間の値を M/d/yyyy の形式で解析ファイルから取得するように構成されています。</span><span class="sxs-lookup"><span data-stu-id="c124d-167">For example, the Root\Line\Types\Record\TransactionDate element of the type DATETIME has been configured to get the transaction's date and time value from the parsing file in the 'M/d/yyyy' format.</span></span>
10. <span data-ttu-id="c124d-168">ツリーで、`Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\CountryCode: String 0..1` を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-168">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\CountryCode: String 0..1`.</span></span>
    * <span data-ttu-id="c124d-169">[ルート\明細行\タイプ\レコード\CountryCode] の文字列タイプの要素は、[多様性] フィールドで 「ゼロ、1 つ」 オプションとして構成されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-169">Note that Root\Line\Types\Record\CountryCode element of the type STRING has been configured as having the option 'Zero one' in the 'Multiplicity' field.</span></span> <span data-ttu-id="c124d-170">この設定では、オプションとして解析明細行で CountryCode フィールドの値が考慮されます。</span><span class="sxs-lookup"><span data-stu-id="c124d-170">This setting considers the value of the CountryCode field in the parsing line as optional.</span></span>
11. <span data-ttu-id="c124d-171">ツリーで、`Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\Remark: Sequence 1..1 (,)` を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-171">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\Remark: Sequence 1..1 (,)`.</span></span>
    * <span data-ttu-id="c124d-172">[ルート\明細行\タイプ\レコード\注釈] のシーケンス タイプの要素は、[見積申請] のフィールドに 「すべて」オプション、および [見積マーク] フィールドに二重引用符文字を保持するよう構成されています。</span><span class="sxs-lookup"><span data-stu-id="c124d-172">Note that Root\Line\Types\Record\Remark element of the type SEQUENCE has been configured as having the option 'All' in the 'Quotation application' field and double quotes character in the 'Quotation mark' field.</span></span> <span data-ttu-id="c124d-173">これは、解析ファイル内のこのタイプの行のすべてのフィールド (入れ子になった要素によって説明: 文字列型のテキスト) は二重引用符で囲まれているとみなされることを意味します。</span><span class="sxs-lookup"><span data-stu-id="c124d-173">It means that all fields of this type of lines in the parsing file (described by the nested elements: Text of the STRING type) will be considered as enclosed in double quotes characters.</span></span>
12. <span data-ttu-id="c124d-174">ツリーで、`Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Unparsed: Sequence 1..1` を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-174">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Unparsed: Sequence 1..1`.</span></span>
    * <span data-ttu-id="c124d-175">順番タイプのルート\明細行\タイプ\の解析されていない要素は、上記の親 CASE 要素で説明された構造と一致しない構造のトランザクション明細行を解析するために構成されています。</span><span class="sxs-lookup"><span data-stu-id="c124d-175">The Root\Line\Types\Unparsed element of the type SEQUENCE has been configured to parse the transaction lines for the structure which does not match the structure described above in the parent CASE element.</span></span>

## <a name="review-the-setting-of-the-format-mapping-to-the-data-model"></a><span data-ttu-id="c124d-176">データ モデルに対する書式マッピングの設定の確認</span><span class="sxs-lookup"><span data-stu-id="c124d-176">Review the setting of the format mapping to the data model</span></span>

1. <span data-ttu-id="c124d-177">[形式をモデルにマップ] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-177">Click Map format to model.</span></span>
    * <span data-ttu-id="c124d-178">モデル マッピング 「CSV 形式からのモデルへのマッピング」 には、受信した CSV ファイルからデータモデルへのデータ転送の流れを記述しています。</span><span class="sxs-lookup"><span data-stu-id="c124d-178">The model mapping 'Mapping to model from CSV format' describes the data flow of the data transfer from the incoming CSV file to the data model.</span></span>
2. <span data-ttu-id="c124d-179">[デザイナー] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-179">Click Designer.</span></span>
3. <span data-ttu-id="c124d-180">ツリーで、「形式」を展開します。</span><span class="sxs-lookup"><span data-stu-id="c124d-180">In the tree, expand 'format'.</span></span>
    * <span data-ttu-id="c124d-181">設計された形式が、ここではデータ ソース コンポーネントとして示されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-181">Note that the designed format is presented here as a data source component.</span></span>
4. <span data-ttu-id="c124d-182">ツリーで、[形式\収入: ファイル (収入)] を展開します。</span><span class="sxs-lookup"><span data-stu-id="c124d-182">In the tree, expand 'format\Incoming: File(Incoming)'.</span></span>
5. <span data-ttu-id="c124d-183">ツリーで、[形式\受取: ファイル (受取)\ルート: 順番 (ルート)] を展開します。</span><span class="sxs-lookup"><span data-stu-id="c124d-183">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)'.</span></span>
6. <span data-ttu-id="c124d-184">ツリーで、`format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)` を展開します。</span><span class="sxs-lookup"><span data-stu-id="c124d-184">In the tree, expand `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)`.</span></span>
7. <span data-ttu-id="c124d-185">ツリーで、`format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)` を展開します。</span><span class="sxs-lookup"><span data-stu-id="c124d-185">In the tree, expand `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)`.</span></span>
8. <span data-ttu-id="c124d-186">ツリーで、`format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)` を展開します。</span><span class="sxs-lookup"><span data-stu-id="c124d-186">In the tree, expand `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)`.</span></span>
9. <span data-ttu-id="c124d-187">ツリーで、`format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data` を展開します。</span><span class="sxs-lookup"><span data-stu-id="c124d-187">In the tree, expand `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data`.</span></span>
10. <span data-ttu-id="c124d-188">ツリーで、`format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\CountryCode: String 0..1 (CountryCode)` を展開します。</span><span class="sxs-lookup"><span data-stu-id="c124d-188">In the tree, expand `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\CountryCode: String 0..1 (CountryCode)`.</span></span>
11. <span data-ttu-id="c124d-189">ツリーで、`format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\TransactionDate: DateTime(TransactionDate)` を選択します。</span><span class="sxs-lookup"><span data-stu-id="c124d-189">In the tree, select `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\TransactionDate: DateTime(TransactionDate)`.</span></span>
    * <span data-ttu-id="c124d-190">TransactionDate や CountryCode などの必須、あるいは任意の書式要素は、定義された 「書式」 データ ソース コンポーネントでは異なって見えることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-190">Note that the required and optional format elements, such as TransactionDate and CountryCode, look different in the predefined 'format' data source component.</span></span>
12. <span data-ttu-id="c124d-191">ツリーで、[トランザクション = $both''] を展開します。</span><span class="sxs-lookup"><span data-stu-id="c124d-191">In the tree, expand 'Transactions = '$both''.</span></span>
    * <span data-ttu-id="c124d-192">インポート ファイルの構造を定義する書式の要素が、データ モデルの要素にバインドされることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-192">Note that the elements of the format that defines the structure of the imported file are bound to the elements of the data model.</span></span> <span data-ttu-id="c124d-193">これらのバインドに基づき、インポートされた CSV ファイルの内容は、実行時に既存のデータ モデル内に格納されます。</span><span class="sxs-lookup"><span data-stu-id="c124d-193">Based on these bindings, the content of the imported CSV file will be stored at run-time in the existing data model.</span></span> <span data-ttu-id="c124d-194">CountryRegion 要素のバインディングに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-194">Pay attention to the binding of the CountryRegion element.</span></span> <span data-ttu-id="c124d-195">国コード値が指定されていない受信ファイルの取引要素については、、既定の国コードである 「USA」 がデータモデルに自動入力されます。</span><span class="sxs-lookup"><span data-stu-id="c124d-195">For any transaction element in the incoming file that does not have a country code value specified, the default country code 'USA' will be populated in the data model.</span></span>
13. <span data-ttu-id="c124d-196">[詳細を表示する] をオンに切り替えます。</span><span class="sxs-lookup"><span data-stu-id="c124d-196">Toggle on 'Show details'.</span></span>
14. <span data-ttu-id="c124d-197">[検証] タブをクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-197">Click the Validations tab.</span></span>
15. <span data-ttu-id="c124d-198">[検索] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-198">Click Search.</span></span>
16. <span data-ttu-id="c124d-199">[検索] フィールドに、「仕入先」を入力します。</span><span class="sxs-lookup"><span data-stu-id="c124d-199">In the Find field, type 'vend'.</span></span>
17. <span data-ttu-id="c124d-200">[次を検索] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-200">Click Find next.</span></span>
    * <span data-ttu-id="c124d-201">この書式マッピングには、ビジネス観点からインポートされたデータの正確性を検証する、ユーザー定義のロジックが含まれる場合があります。</span><span class="sxs-lookup"><span data-stu-id="c124d-201">This format mapping may contain user-defined logic to validate the accuracy of the imported data from a business standpoint.</span></span> <span data-ttu-id="c124d-202">例えば、設定に基づいて、インポートファイルの中で、ヘッダー行の構造と取引行の構造が一致しない行については、ファイル内の取引のシーケンス番号を示す警告メッセージが情報ログに生成され、ユーザに通知されます。</span><span class="sxs-lookup"><span data-stu-id="c124d-202">For example, based on the setting, for any line in the importing file the structure of which does not match neither the structure of the header line nor transaction line, a warning message will be generated in the Info log informing the user about this case, indicating the transaction's sequence number in the file.</span></span>
18. <span data-ttu-id="c124d-203">ページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="c124d-203">Close the page.</span></span>

## <a name="run-the-format-mapping"></a><span data-ttu-id="c124d-204">形式マッピングの実行</span><span class="sxs-lookup"><span data-stu-id="c124d-204">Run the format mapping</span></span>

<span data-ttu-id="c124d-205">テストのために、以前にダウンロードした 1099entriescsv.csv ファイルを使用して形式マッピングを実行します。</span><span class="sxs-lookup"><span data-stu-id="c124d-205">For testing purposes, execute the format mapping using the 1099entriescsv.csv file that you previously downloaded.</span></span> <span data-ttu-id="c124d-206">生成された出力は選択された CSV ファイルからインポートされ、実際のインポート時にカスタム データ モデルに読み込まれるデータが表示されます。</span><span class="sxs-lookup"><span data-stu-id="c124d-206">The generated output will present data that will be imported from the selected CSV file and populated to the custom data model at real import.</span></span>

1. <span data-ttu-id="c124d-207">[実行] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-207">Click Run.</span></span>
    * <span data-ttu-id="c124d-208">[参照] をクリックし、以前ダウンロードした 1099entriescsv.csv ファイルに移動します。</span><span class="sxs-lookup"><span data-stu-id="c124d-208">Click Browse and navigate to the 1099entriescsv.csv file that you previously downloaded.</span></span>
2. <span data-ttu-id="c124d-209">[OK] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c124d-209">Click OK.</span></span>
    * <span data-ttu-id="c124d-210">受理できない明細行に関する警告メッセージに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-210">Note the warning messages about lines that are not accepted.</span></span> <span data-ttu-id="c124d-211">7 行目に二重引用符でトランザクション コメント テキストが含まれていないときに、4 行目には許容されない形式で表示される収入値が含まれます。</span><span class="sxs-lookup"><span data-stu-id="c124d-211">Line 4 contains the income value that is presented in the non-acceptable format while line 7 does not contain the transaction remark text in double quotes.</span></span>
    * <span data-ttu-id="c124d-212">選択ファイルからインポートされてデータ モデルにポートされたデータを表すXML 書式の出力を確認します。</span><span class="sxs-lookup"><span data-stu-id="c124d-212">Review the output in XML format that represents the data that has been imported from the selected file and ported to the data model.</span></span> <span data-ttu-id="c124d-213">インポートされた CSV ファイルのすべての 7 つの行が処理されたことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c124d-213">Note that all 7 lines of the imported CSV file were processed.</span></span> <span data-ttu-id="c124d-214">フィールドのタイトル行 1 はスキップされ、4 つの取引は正しく解析され、2 つの取引は無効であると認識されます。</span><span class="sxs-lookup"><span data-stu-id="c124d-214">The containing fields' titles line 1 were skipped, 4 transactions were properly parsed, and 2 transactions were recognized as not valid.</span></span>
3. <span data-ttu-id="c124d-215">ページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="c124d-215">Close the page.</span></span>
4. <span data-ttu-id="c124d-216">ページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="c124d-216">Close the page.</span></span>


[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]