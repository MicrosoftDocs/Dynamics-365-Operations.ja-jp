---
title: ER 形式の新しい基準バージョンを採用してその形式をアップグレードする
description: この記事では、電子申告 (ER) 形式の構成を管理する方法について説明します。
author: NickSelin
ms.date: 08/29/2018
ms.topic: business-process
ms.prod: ''
ms.technology: ''
ms.search.form: ERWorkspace, ERVendorPart, ERSolutionTable, ERSolutionCreateDropDialog, EROperationDesigner, ERComponentTypeDropDialog
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: 6c4c2a0954c8554da0b4c859d837ab6ca4839b36
ms.sourcegitcommit: 6781fc47606b266873385b901c302819ab211b82
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/02/2022
ms.locfileid: "9111931"
---
# <a name="er-upgrade-your-format-by-adopting-a-new-base-version-of-that-format"></a>ER 形式の新しい基準バージョンを採用してその形式をアップグレードする

[!include [banner](../../includes/banner.md)]

次のステップでは、システム管理者または電子申告開発者のロールに割り当てられているユーザーが、電子申告 (ER) の形式のコンフィギュレーションを維持管理する方法について説明します。 この手順では、コンフィギュレーション プロバイダー (CP) から受領した形式を基にカスタム バージョンの形式を作成する方法を説明します。 また、その形式の新しい基準バージョンの採用方法についても説明します。

これらのステップを完了するには、まず 「構成プロバイダーを作成し、有効としてマークする 」 に記載の手順、および 「作成済みの形式を使用して支払用の電子ドキュメントを生成する」 に記載の手順を実行する必要があります。 これらのステップは GBSI 会社で実行できます。

## <a name="select-format-configuration-for-customization"></a>カスタマイズする形式のコンフィギュレーションを選択
1. [組織管理] > [ワークスペース] > [電子申告] の順に移動します。

    この例では、サンプル会社 Litware, Inc. (https://www.litware.com) が特定の国に対する電子支払の形式コンフィギュレーションをサポートするコンフィギュレーション プロバイダーとして機能します。    サンプル会社 Proseware, Inc. (http://www.proseware.com) は、Liteware, Inc. が提供した形式コンフィギュレーションの消費者として機能します。 Proseware, Inc. はその国の特定の地域の形式を使用します。  
2. [コンフィギュレーションをレポートする] をクリックします。
3. [フィルターの表示] をクリックします。
4. 「名前」フィールドで「次の値で始まる」フィルター演算子を使用して、値「BACS (英国企業)」でフィルターを適用します。
  
    選択された形式のコンフィギュレーション BACS (英国企業) は、プロバイダーである Litware, Inc. が所有しています。  

5. [フィルターの表示] をクリックします。
6. 一覧で、目的のレコードを見つけ、選択します。

    [完了] 状態の形式のバージョンは、カスタマイズ用に Proseware Inc. で使用されます 。  

## <a name="create-a-new-configuration-for-your-custom-format-of-electronic-document"></a>電子ドキュメントのカスタム形式の新規コンフィギュレーションを作成
Proseware、Inc. は、自身のサービスの定期売買に従って電子支払ドキュメントを生成するための初期形式が含まれている BACS (英国企業) コンフィギュレーションの バージョン 1.1 を受領済です。 Proseware, Inc. は、これを自身の国の標準として使い始めようとしますが、特定の地域の要件をサポートするためのカスタマイズが必要です。 Proseware, Inc. は、その新しいバージョン (新しい国固有の要件をサポートするための変更を含む) が Litware, Inc. からリリースされ次第、カスタム形式をアップグレードする能力も維持したいと考えています。さらに、このアップグレードを最低限の費用で実行したいと考えています。  

これを実現するため Proseware, Inc. は、基準として Litware, Inc. のコンフィギュレーション BACS (英国企業) を使用してコンフィギュレーションを作成する必要があります。  

1. ページを閉じます。
2. Proseware, Inc を選択して 有効なプロバイダーとします。
3. [有効に設定] をクリックします。
4. [コンフィギュレーションをレポートする] をクリックします。
5. ツリーで、「支払 (単純化モデル)」を展開します。
6. ツリーで、「支払 (単純化モデル)」 \BACS (英国の企業) を選択します。

    Litware, Inc. から BACS (英国企業) 構成を選択します。Proseware, Inc. は、バージョン 1.1 をカスタム バージョンの基準として使用します。  

7. [コンフィギュレーションの作成] をクリックすると、ドロップ ダイアログが開きます。

    これにより、カスタムの支払形式用の新しいコンフィギュレーションを作成することができます。  

8. [新規] フィールドに「Derive from Name: BACS (英国の企業)、Litware, Inc.」と入力します。

    [派生] オプションを選択して、カスタム バージョンを作成する基準として BACS (英国企業) の使用を確認します。  

9. [名前] フィールドに、「BACS (英国関税)」と入力します。
10. [説明] フィールドに、「BACS の仕入先支払 (英国関税) 」を入力します。

    ここでは、有効なコンフィギュレーション プロバイダー (Proseware, Inc.) が自動的に入力されます。 このプロバイダーはこのコンフィギュレーションを管理できます。 他のプロバイダーはこのコンフィギュレーションを使用できますが、管理できません。  

11. [コンフィギュレーションの作成] をクリックします。

## <a name="customize-your-format-for-the-electronic-document"></a>電子ドキュメントの形式のカスタマイズ
1. [デザイナー] をクリックします。
2. [展開] / [折りたたみ] をクリックします。
3. [展開] / [折りたたみ] をクリックします。
4. ツリーで、「Xml\Message\Payments\Item\Vendor\Bank」を選択します。
5. [追加] をクリックしてドロップ ダイアログを開きます。
6. ツリーで、[XML\Element] を選択します。
7. [名前] フィールドに、「IBAN」と入力します。
8. [OK] をクリックします。
9. ツリーで、「Xml\Message\Payments\Item\Vendor\Bank\IBAN」を選択します。
10. [追加] をクリックしてドロップ ダイアログを開きます。
11. ツリーで、[Text\String] を選択します。
12. [OK] をクリックします。
13. ツリーで、「Xml\Message\Payments\Item\Vendor\Name\String」を選択します。
14. [最大の長さ] フィールドに「60」を入力します。
15. [マッピング] タブをクリックします。
16. ツリーで、[model] を展開します。
17. ツリーで、[model\Payments] を展開します。
18. ツリーで、[model\Payments\Creditor] を展開します。
19. ツリーで、[model\Payments\Creditor\Account] を展開します。
20. ツリーで、「model\Payments\Creditor\Account\IBAN」を選択します。
21. ツリーで、「Xml\Message\Payments\Item = model.Payments\Vendor\Bank\IBAN\String」を選択します。
22. [バインド] をクリックします。
23. [保存] をクリックします。

## <a name="validate-the-customized-format"></a>カスタマイズされた形式の検証
1. [検証] をクリックします。

    すべてのバインディングに問題がないことを確認するために、カスタマイズされた形式レイアウトおよびデータ マッピングの変更を検証します。  

2. ページを閉じます。

## <a name="change-the-status-of-the-current-version-of-the-custom-format-configuration"></a>カスタム形式のコンフィギュレーションの現行バージョンの状態を変更
支払ドキュメントの生成に使用できるように、指定の形式のコンフィギュレーションの状態を [ドラフト] から [完了] に変更します。  

1. [状態の変更] をクリックします。

    選択したコンフィギュレーションの現在のバージョンが [ドラフト] 状態であることに注意してください。  

2. [完了] をクリックします。
3. [説明] フィールドに値を入力します。
4. [OK] をクリックします。
5. 一覧で、目的のレコードを見つけ、選択します。

    作成したコンフィギュレーションが完了したバージョン 1.1.1 として保存されることに注意してください。 これは、BACS の関税 (英国企業の関税) 形式のバージョン 1 であることを意味します。これは BACS (英国企業) 形式のバージョン 1、および支払 (単純化モデル) データ モデルのバージョン 1 に基づきます。  

## <a name="test-the-customized-format-to-generate-payment-files"></a>カスタマイズされた形式の支払ファイル生成テストの実行
財務と運用アプリの並列セッションの「作成済みの形式を使用して支払用の電子ドキュメントを生成する」の手順内のステップを実行します。 電子支払方法のパラメーターで BACS (英国関税) 形式を選択します。 作成した支払ファイルに、地域要件に対応した IBAN コードを表す最新の XML ノードが含まれていることを確認します。  

## <a name="update-the-existing-country-specific-configuration"></a>既存の国固有のコンフィギュレーションの更新
電子ドキュメントの形式を管理するために、Litware, Inc. は BACS (英国の企業) コンフィギュレーションを更新し、新しい国要件を採用する必要があります。 これは後に、Proseware, Inc. を含むサービスのサブスクライバーに提供される、このコンフィギュレーションの新しいバージョンに取り入れられます。  

実際のサービス提供に関連するプロセスにおいては、BACS（イギリスの架空の企業） のそれぞれの新たなバージョンを、Litware, Inc. 構成の LCS レポジトリからインポートできます。 本手順では、サービス プロバイダーに代わり BACS (英国の企業) を更新してこれをシミュレーションします。  

1. ページを閉じます。
2. Litware, Inc. の選択 プロバイダー
3. [有効に設定] をクリックします。
4. [コンフィギュレーションをレポートする] をクリックします。
5. ツリーで、「支払 (単純化モデル)」を展開します。
6. ツリーで、「支払 (単純化モデル)」 \BACS (英国の企業) を選択します。

    Litware、Inc. が所有する プロバイダー BACKS (英国企業) のドラフト バージョンは、国固有の新しい要件をサポートする変更点を取り入れるため選択されます。  

## <a name="localize-the-base-format-of-the-electronic-document"></a>電子ドキュメントの基準形式のローカライズ
Litware, Inc. によりサポートされる国固有の新しい要件があると想定します。  

- 各支払取引における債権者の銀行の SWIFT コードの値。
- 生成ファイルでの仕入先名のテキストの長さは 100 文字以内に制限されます。  
- 国固有の新しい要件  
- 必要な変更を取り入れるため、必要なコンフィギュレーションのドラフト バージョンを選択します。  


1. [デザイナー] をクリックします。
2. [展開] / [折りたたみ] をクリックします。
3. [展開] / [折りたたみ] をクリックします。
4. ツリーで、「Xml\Message\Payments\Item\Vendor\Bank」を選択します。
5. [追加] をクリックしてドロップ ダイアログを開きます。
6. ツリーで、[XML\Element] を選択します。
7. [名前] フィールドに、「SWIFT」と入力します。
8. [OK] をクリックします。
9. ツリーで、「Xml\Message\Payments\Item\Vendor\Bank\SWIFT」を選択します。
10. [追加] をクリックしてドロップ ダイアログを開きます。
11. ツリーで、[Text\String] を選択します。
12. [OK] をクリックします。
13. ツリーで、「Xml\Message\Payments\Item\Vendor\Name\String」を選択します。
14. [最大の長さ] フィールドに「100」を入力します。
15. [マッピング] タブをクリックします。
16. ツリーで、[model] を展開します。
17. ツリーで、[model\Payments] を展開します。
18. ツリーで、[model\Payments\Creditor] を展開します。
19. ツリーで、[model\Payments\Creditor\Agent] を展開します。
20. ツリーで、「model\Payments\Creditor\Agent\SWIFT」を選択します。
21. ツリーで、「Xml\Message\Payments\Item = model.Payments\Vendor\Bank\SWIFT\String」を選択します。
22. [バインド] をクリックします。
23. [保存] をクリックします。

## <a name="validate-the-localized-format"></a>ローカライズされた形式の検証
1. [検証] をクリックします。
2. ページを閉じます。

## <a name="change-the-status-of-the-current-version-of-the-base-format-configuration"></a>基準形式のコンフィギュレーションの現行バージョンの状態を変更
支払ドキュメントの生成および、そこから派生する形式のコンフィギュレーションの更新に使用できるよう、更新された基準形式のコンフィギュレーションの状態を [ドラフト] から [完了] に変更します。  

1. [状態の変更] をクリックします。

    選択したコンフィギュレーションの現在のバージョンが [ドラフト] 状態であることに注意してください。  

2. [完了] をクリックします。
3. [説明] フィールドに値を入力します。
4. [OK] をクリックします。
5. 一覧で、目的のレコードを見つけ、選択します。

## <a name="change-the-base-version-for-the-custom-format-configuration"></a>カスタム形式のコンフィギュレーションの基準バージョンの変更

Proseware, Inc. は最近発表された国固有の要件に従った電子支払ドキュメントの生成に使用できる BACS (英国の企業) コンフィギュレーションの新しいバージョン 1.2 が使用できることを通知されています。 Proseware, Inc. は国の標準としてこの使用を開始することを考えています。  

これを実現するには、Proseware, Inc. はカスタム コンフィギュレーション BACS (英国関税) の基準コンフィギュレーション バージョンを変更する必要があります。 BACS (英国の企業) のバージョン 1.1 の代わりに 1.2 を使用します。  

1. [組織管理] > [ワークスペース] > [電子申告] の順に移動します。
2. Proseware, Inc. プロバイダーを選択し、有効なプロバイダーとしてマーク付けします。
3. [有効に設定] をクリックします。
4. [コンフィギュレーションをレポートする] をクリックします。
5. ツリーで、「支払 (単純化モデル)」を展開します。
6. ツリーで、「支払 (単純化モデル)」 \BACS (英国の企業)」を展開します。
7. ツリーで、「支払 (単純化モデル)\BACS (英国の企業)\BACS (英国関税)」を選択します。

    Proseware, Inc. が所有する BACS (英国関税) コンフィギュレーションを選択します。  

    必要な変更を取り入れるため、選択したコンフィギュレーションのドラフト バージョンを使用します。  

8. [再ベース] をクリックします。

    コンフィギュレーションを更新する新しい基準として適用されるよう、基準コンフィギュレーションの新しいバージョン 1.2 を選択します。  

9. [OK] をクリックします。

    カスタム バージョンをマージすると、自動的にマージできない一部のフォーマット変更を表す新しいベース バージョンとの間で競合が検出されることに注意してください。  

## <a name="resolve-rebase-conflicts"></a>再ベースの競合の解決
1. [デザイナー] をクリックします。
    
    仕入先名のテキストの長さ制限の変更を自動的に解決できないことに注意してください。 したがって、これは競合の一覧に表示されます。 タイプの更新の各競合に対して、次のオプションが使用できます: - 前の基準値を適用して (グリッド上部にあるボタンを使用)、前の基準バージョンの値 (このケースでは 0) を用いる。  - 基準値を適用して (グリッド上部にあるボタンを使用)、新しいバージョンの値 (このケースでは 100) を用いる。  - 独自 (カスタム) の値 (ここでは 60) を保持します。  [基準値の適用] をクリックし、仕入先名のテキストの長さに国固有の 100 文字の制限を適用します。  

    Proseware, Inc. および Litware, Inc. には、 管理形式に自動的にマージされる関連コンポーネントを含む IBAN および SWIFT コードを使用したこの形式のカスタムおよびローカル バージョンがあることに注意してください。  

2. [基準値の適用] をクリックします。

    [基準値の適用] をクリックして仕入先名の国固有の 100 文字の制限を適用します。  

3. [保存] をクリックします。

    形式を保存すると、競合の一覧から解決済の競合が削除されます。  

4. ページを閉じます。

## <a name="change-the-status-of-the-new-version-of-the-custom-format-configuration"></a>カスタム形式のコンフィギュレーションの新規バージョンの状態を変更
1. [状態の変更] をクリックします。

    更新されたカスタム形式のコンフィギュレーションの状態を [ドラフト] から [完了] に変更します。 この結果、支払ドキュメントの生成に形式のコンフィギュレーションを使用することができます。 選択したコンフィギュレーションの現在のバージョンが [ドラフト] 状態であることに注意してください。  

2. [完了] をクリックします。
3. [説明] フィールドに値を入力します。
4. [OK] をクリックします。

    作成したコンフィギュレーションが完了済のバージョン 1.2.2 として保存されていることに注意してください: 支払 (単純化モデル) データ モデルのバージョン 1 に基づく基準 BACS (英国関税) 形式のバージョン 2 に基づく基準 BACS (英国の企業) 形式のバージョン 2。  

## <a name="test-the-customized-format-for-payment-files-generation"></a>カスタマイズされた形式の支払ファイル生成テストの実行
財務と運用アプリの並列セッションの「作成済みの形式を使用して支払用の電子ドキュメントを生成する」の手順内のステップを実行します。 電子支払方法のパラメーターで作成した 「BACS (英国関税)」 形式を選択します。 Proseware, Inc. が最近導入した、地域要件に対応した IBAN 口座コードを表す XML ノードが作成した支払ファイルに含まれていることを確認します。 ファイルには Litware, Inc. が最近導入した、国要件に沿った SWIFT 銀行コードを表す XML ノードも含まれている必要があります。  



[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]
