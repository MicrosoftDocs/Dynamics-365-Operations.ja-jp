---
title: 電子申告のコンポーネント
description: この記事では、電子申告 (ER) コンポーネントについて説明します。
author: kfend
ms.date: 09/28/2021
ms.topic: overview
ms.prod: ''
ms.technology: ''
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.region: global
ms.author: filatovm
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.custom: 58941
ms.assetid: 5d51b6a6-ad12-4af9-a66d-a1eb820ae57f
ms.search.form: ERWorkspace
ms.openlocfilehash: 4851374ca4943a84d35f063e0ee65b537ec3b6cd
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/12/2022
ms.locfileid: "9285034"
---
# <a name="electronic-reporting-components"></a>電子申告のコンポーネント

[!include [banner](../includes/banner.md)]

電子レポート (ER) は、次のタイプのコンポーネントをサポートしています。

- データ モデル
- モデル マッピング
- 書式設定
- メタデータ

## <a name="data-model-component"></a>データ モデル コンポーネント

データ モデルのコンポーネントは、データ構造の抽象的な表現です。 特定のビジネス ドメイン領域に対して、当該ドメインの報告要件を満たすために十分な詳細が記載されています。 データ モデルのコンポーネントは、次の部分で構成されます。

- **データ モデル** – ドメイン固有のビジネス エンティティのセットと、それらのエンティティ間の関係を階層的に定義したものです。
- **モデル マッピング** – 選択されたアプリケーション データソースは、実行時にデータ モデル コンポーネントにビジネス データを入力するためのデータ フローとルールを指定するデータ モデルの個々の要素にリンクされます。

データ モデルの業種エンティティはコンテナー (またはレコード) で表されます。 事業エンティティのプロパティはデータ項目 (またはフィールド) として表されます。 各データ項目には固有の名前、ラベル、説明、および値があります。 各データ項目の値は、文字列、整数、実数、日付、列挙 (enum)、ブール値として認識されるように設計されています。 また、データ品目は別のレコードまたはレコード リストになる場合があります。

1 つのデータ モデルのコンポーネントは、ドメイン固有のビジネス エンティティの複数階層を含む場合があります。 さらに実行時に、特定のレポート固有のデータ フローをサポートするモデル マッピングを含む場合もあります。 階層はモデル マッピングのルートとして選択された １ つのレコードによって区別されます。 たとえば、支払いのドメイン エリアのデータ モデルは、次のマッピングをサポートする場合があります。


- 会社 \> 仕入先 \> AP ドメインの支払いトランザクション
- 顧客 \> 会社 \> AR ドメインの支払いトランザクション

会社や支払いのトランザクションなどのビジネス エンティティが設計されるのは、一度だけです。 異なるマッピングでは、必要に応じて再利用できます。

## <a name="model-mapping-component"></a>モデル マッピング コンポーネント

モデル マッピングは、アプリケーションのデータ ソースをデータ モデルの個々の要素にリンクし、実行時にデータ フローとデータ モデル コンポーネントへのビジネス データの入力ルールを指定します。

電子ドキュメントの送信をサポートするモデル マッピングには、次の機能があります。

- 異なるデータ型をデータ モデルのデータ ソースとして使用できます。 これらのデータ型には、テーブル、データ エンティティ、メソッド、enum などがあります。
- 実行時にデータを指定する必要がある場合にデータ モデルのデータ ソースとして定義できるユーザー入力パラメーターをサポートします。
- 必要なグループへのデータ変換をサポートします。 フィルター、並べ替え、データ集計、Microsoft Excel のような式を使用してデザインされた、論理計算されたフィールドの追加をすることもできます。 詳細については、[電子申告 (ER) の式デザイナー](general-electronic-reporting-formula-designer.md) を参照してください。

電子ドキュメントの受信をサポートするモデル マッピングには、次の機能があります。

- さまざまな更新可能なデータの要素をターゲットとして使用できます。 これらのデータ要素には、テーブル、データ エンティティおよびビューが含まれます。 電子ドキュメントからの入力データでデータを更新できます。 複数のターゲットは、1 つのモデル マッピングに使用できます。
- 実行時にデータを指定する必要がある場合にデータ モデルのデータ ソースとして定義できるユーザー入力パラメーターをサポートします。

データ モデル コンポーネントは、ビジネス ドメインごとに設計され、レポート用の統合データ ソースとして使用されます。 統合データ ソースにより、レポートがデータ ソースの物理的な実装から分離されます。 このコンポーネントは、ドメイン固有のビジネス コンセプトと機能性を、レポート フォーマットの初期設計とその後のメンテナンスをより効率的にするフォームで表します。

## <a name="format-component"></a>形式コンポーネント

### <a name="format-components-for-outgoing-electronic-documents"></a>送信する電子ドキュメントの形式のコンポーネント

形式のコンポーネントは、実行時に生成されるレポート出力のスキームです。 スキームは、次の要素で構成されます。

- 実行時に生成される、送信する電子ドキュメントの構造およびコンテンツを定義する形式です。
- 一連のユーザー入力パラメーターおよび選択されたモデル マッピングを使用するドメイン固有のデータ モデルとしてのデータ ソース。
- データ フローおよび形式出力生成のルールを実行時に指定する、形式の個々の要素を持つ形式データ ソースのバインディングの組み合わせとしての形式マッピングです。
- フォーマット検証とは、実行中のコンテキストに応じて、実行時にレポートの生成を制御する構成可能なルールのセットです。 たとえば、仕入先の支払の出力生成を停止し、銀行口座番号など、選択した仕入先の特定の属性が表示されない時に例外をスローするルールがある可能性があります。

形式のコンポーネントには、次の関数がサポートされています。

- テキスト、XML、Microsoft Word 文書またはワークシートなどの、異なる形式の個々のファイルとしてのレポート出力を作成します
- 複数のファイルを別々に作成して、ZIPファイルにカプセル化します

形式のコンポーネントにより、レポート出力に使用できる特定のファイルを添付できます。

- OPENXML ワークシート形式の出力のテンプレートとして使用できるワークシートを含む Excel ワークブック
- Microsoft Word 文書形式の出力のテンプレートとして使用できる文書を含む Word ファイル
- 事前定義されたファイルとしての形式出力に組み込める他のファイル

次の図は、データがこれらの形式にどのようにフローするかを示します。

[![送信する形式コンポーネントのデータ フロー](./media/ER-overview-02.png)](./media/ER-overview-02.png)

1 つの ER 書式設定コンフィギュレーションを実行し、送信する電子ドキュメントを生成するには、書式設定コンフィギュレーションのマッピングを識別する必要があります。

#### <a name="format-components-for-incoming-electronic-documents"></a>受信する電子ドキュメントの形式のコンポーネント
形式のコンポーネントは、実行時にインポートされる受信ドキュメントのスキームです。 スキームは、次の要素で構成されます。

- 実行時にインポートされるデータを含む、受信した電子ドキュメントの構造およびコンテンツを定義する形式。 形式のコンポーネントは、テキストや XML などのさまざまな形式で受信ドキュメントを解析するのに使用されます。
- マッピング形式は、個々の形式要素をドメイン固有のデータ モデル要素に結び付けます。 実行時に、データ モデル内の要素は、データ フローおよび受信ドキュメントからデータをインポートするためのルールを指定し、データ モデルにデータを格納します。
- 実行中のコンテキスト次第で、実行時のデータ インポートを制御するコンフィギュレーション可能なルールの組み合わせとしての形式の検証。 たとえば、仕入先の支払がある口座取引明細書のデータ インポートを停止したり、仕入先 ID コードなど、特定の仕入先の属性が表示されない時に例外をスローするルールがある可能性があります。

次の図は、データがこれらの形式にどのようにフローするかを示します。

[![受信する形式コンポーネントのデータ フロー](./media/ER-overview-03.png)](./media/ER-overview-03.png)

受信する電子ドキュメントからデータをインポートする 1 つの ER 書式設定のコンフィギュレーションを実行するには、書式設定のコンフィギュレーションの必要なマッピング、およびモデル マッピングの統合ポイントも識別する必要があります。 受信したドキュメントの異なるタイプに対する異なる形式と組み合わせて、同じモデル マッピングおよび宛先を使用できます。


## <a name="component-versioning"></a>コンポーネントのバージョン管理

バージョン管理は ER のコンポーネントのためにサポートされます。 次のワークフローが ER コンポーネントの変更の管理のために提供されています:

1. 最初に作成されたバージョンは、**ドラフト** バージョンとしてマークされています。 このバージョンは編集することができ、テストの実行に使用できます。
2. **ドラフト** バージョンは **完了** バージョンに変換できます。 このバージョンは、ローカルのレポート プロセスで使用できます。
3. **完了** バージョンは **共有** バージョンに変換できます。 このバージョンは、Microsoft Dynamics Lifecycle Services (LCS) に公開され、グローバル レポート プロセスで使用することができます。
4. **共用** バージョンは **中止** バージョンに変換できます。 このバージョンは削除できます。

**完了** または **共有** のいずれかのステータスを持つバージョンはその他のデータ交換に使用できます。 以下のアクションは、これらのステータスを持つコンポーネントで実行されます。

- コンポーネントは、XML 形式でシリアル化でき、XML 形式のファイルとしてエクスポートされます。
- コンポーネントは XML ファイルから再シリアル化でき、ER コンポーネントの新しいバージョンとしてアプリケーションにインポートできます。

詳細については、[新しいデータ モデル構成をインポートする](er-quick-start1-new-solution.md#ImportDataModel) および [派生形式の完了したバージョンをエクスポートする](er-calculated-field-type.md#export-completed-version-of-a-derived-format) を参照してください。

### <a name="draft-versions-at-runtime"></a>実行時のドラフト バージョン

ER フレームワークの個人用ユーザー パラメータで、ER 構成のドラフト バージョンを実行時に使用するかどうかを指定できるオプションを有効にできます。 ER 構成で **ドラフトの実行** オプションを使用可能にする方法については、[カスタム形式を実行可能としてマーク](er-quick-start2-customize-report.md#MarkFormatRunnable) を参照してください。

> [!NOTE]
> ER ユーザー パラメーターは、会社固有およびユーザ固有です。

### <a name="draft-format-versions-at-runtime"></a>実行時のドラフト形式のバージョン

既定では、ER ソリューションを実行すると、その形式コンポーネントのドラフト バージョンは無視されます。 代わりに、**ドラフト** 以外のステータスの関連バージョンだけが使用されます。 場合によっては、ER が実行時に ER 形式の構成のドラフト バージョンを使用するように強制する可能性があります。 たとえば、ドラフト バージョンに必要な変更を加えた後、そのドラフト バージョンを使用してテストの実行を行うことができます。 これにより、変更の正確性を検証できます。 ドラフト形式のバージョンの使用を開始するには、関連する ER 構成の **ドラフトの実行** オプションを **はい** に [設定](er-quick-start2-customize-report.md#MarkFormatRunnable) する必要があります。

### <a name="draft-model-mapping-versions-at-runtime"></a>実行時のモデル マッピングのドラフト バージョン

既定では、ER ソリューションを実行すると、そのモデル マッピング コンポーネントのドラフト バージョンが常に使用されます。 場合によっては、ER が実行時に ER モデル マッピング構成のドラフト バージョンを無視するように強制する可能性があります。 **バージョン 10.0.29** 以降では、**ER モデル マッピングの "ドラフトの実行" オプションを常に考慮する** 機能を有効にして、実行時に使用されるモデル マッピング バージョンを制御できます。 この機能を有効にすると、次の動作が発生します:

- モデル マッピング構成で **ドラフトの実行** オプションを **いいえ** に設定すると、その構成のドラフト以外の最新バージョンが実行時に使用されます。 現在の Finance インスタンスで構成を使用できない場合、例外がスローされます。
- モデル マッピング構成で **ドラフトの実行** オプションを **はい** に設定すると、その構成のドラフト バージョンが実行時に使用されます。

## <a name="component-date-effectivity"></a>コンポーネントの日付の有効性

ER 形式コンポーネントのバージョンは日付が有効です。 ER 形式コンポーネントの "有効開始" 日を設定し、コンポーネントがレポート プロセスに対して有効になる日付を指定できます。 コンポーネントが実行に有効かどうかを定義するために、アプリケーション セッションの日付が使用されます。 複数のバージョンが特定の日付に対して有効な場合、レポート プロセスでは最新バージョンが使用されます。

## <a name="component-access"></a>コンポーネントのアクセス

実行時の ER 形式およびモデル マッピングのコンポーネントへのアクセスは、国際標準化機構 (ISO) の国/地域コードの設定によって異なります。 形式またはモデル マッピングの構成の選択したバージョンでこの設定が空白の場合、実行時にどの会社からでも形式またはモデル マッピングのコンポーネントにアクセスできます。 設定に ISO 国/地域コードが含まれている場合、形式またはモデル マッピングのコンポーネントは、形式コンポーネントの ISO 国/地域コードのいずれかにプライマリ アドレスが定義されている企業からのみ利用できます。

形式またはモデル マッピングのコンポーネントの異なるバージョンでは、ISO 国/地域コード設定が異なる場合があります。

詳細については、[国のコンテキスト依存 ER モデル マッピングを構成する](er-country-dependent-model-mapping.md) を参照してください。

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]

