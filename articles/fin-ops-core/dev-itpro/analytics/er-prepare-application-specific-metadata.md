---
title: RCS および ER のアプリケーション固有のメタデータを準備する
description: このトピックでは、Regulatory configuration service (RCS) および電子レポート (ER) のアプリケーション固有のメタデータを準備する方法について説明します。
author: NickSelin
manager: AnnBe
ms.date: 04/04/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERWorkspace
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.region: global
ms.author: nselin
ms.search.validFrom: ''
ms.dyn365.ops.version: ''
ms.openlocfilehash: f15b78d3ed5b4df47540f9f89cc69c0b535a7241
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/05/2020
ms.locfileid: "4680197"
---
# <a name="prepare-application-specific-metadata-for-rcs-and-er"></a>RCS および ER のアプリケーション固有のメタデータを準備する

[!include[banner](../includes/banner.md)]

このトピックでは、次のタスクの例について説明します。

- [RCS で使用できるアプリケーション メタデータを準備する](#prepare-application-metadata-that-can-be-used-in-rcs)
- [ER コンフィギュレーションを使用してアプリケーション メタデータにアクセスする](#access-application-metadata-by-using-an-er-configuration)
- [接続されているアプリケーションを使用してアプリケーション メタデータにアクセスする](#access-application-metadata-by-using-connected-applications)

## <a name="prepare-application-metadata-that-can-be-used-in-rcs"></a>RCS で使用できるアプリケーション メタデータを準備する

次の手順では、**システム管理者** または **電子報告開発者** のロールを持つユーザーが、Regulatory Configuration Service (RCS) の ER モデル マッピング コンフィギュレーションを設計するためのアプリケーションのメタデータを含む、新しい電子レポート (ER) コンフィギュレーションを作成する方法について説明します。 この例で作成されたサンプル ER モデル マッピング コンフィギュレーションは、対外貿易トランザクションにアクセスするために使用されます。

この例では、RCS を使用して、対外貿易ビジネスのドメインからの情報を含む電子ドキュメントを生成するアプリケーションの ER ソリューションを設計します。 ER データ モデルと必要なデータ ソース間のマッピングを指定するには、RCS でアプリケーションのメタデータにアクセスできる必要があります。 そのため、ER ソリューション設計プロセスの一部として、選択したビジネス ドメインに対する生成 ER レポートに現在必要とされるすべてのメタデータを含む、新しい ER メタデータ コンフィギュレーションを構成する必要があります。

> [!NOTE]
> この例では、サンプル会社 Litware, Inc. のコンフィギュレーションを作成します。これらの手順はすべての会社で実行することができます。

1. **組織管理  \> ワークスペース \> 電子申告** の順に移動します。
2. サンプル会社 Litware, Inc. のコンフィギュレーション プロバイダーが使用可能であり、**アクティブ** としてマークされていることを確認します。 このコンフィギュレーション プロバイダーが表示されない場合は、[コンフィギュレーション プロバイダーの作成および有効なプロバイダーとしてのマーク付け](tasks/er-configuration-provider-mark-it-active-2016-11.md)という手順を完了する必要があります。 
3. **メタデータ コンフィギュレーション** を選択します。
4. **コンフィギュレーションの作成** を選択します。
5. ドロップダウン ダイアログ ボックスの **名前** フィールドに名前を入力します。 この例では、**対外貿易メタデータ** と入力します。
6. **コンフィギュレーションの作成** を選択します。
7. **デザイナー** をクリックします。
8. **追加** を選択します。

    > [!NOTE]
    > アプリケーション全体に対して、または選択したモデル、モジュールに対して、すべてのメタデータを選択することができます。 どちらの場合も、レコードのテーブル、列挙体、および拡張データ型 (EDTs) のメタデータが自動的に追加されることに注意してください。 メタデータの追加のタイプが必要な場合、手動で追加する必要があります。

    対外貿易トランザクションに関連付けられたメタデータをいくつか追加し、手動でメタデータ項目を選択する必要があります。

9. **データソースを追加 \> テーブル レコード** を選択します。
10. **名前** フィールドにある **イントラスタット** の値をフィルタ処理します。
11. **イントラスタット** テーブル レコードを選択します。
12. **OK** を選択します。

    イントラスタットのレコード テーブルに関するメタデータ情報を追加する必要があります。

13. ツリーで、**テーブル レコード イントラスタット\> \>リレーション \> イントラスタットコモディティ (テーブル レコード EcoResCategory)** を選択します。
14. **メタデータの追加** を選択します。

    > [!NOTE]
    > 選択したレコード テーブルに必要な関係に関するメタデータは、手動で追加する必要があります。

15. **データソースの追加** を選択します。
16. **列挙** を選択します。
17. **名前** フィールドにある **IntrastatDirection** の値をフィルタ処理します。
18. **IntrastatDirection** の列挙レコードを選択します。
19. **OK** を選択します。
20. **保存** を選択します。
21. ページを閉じます。
22. メタデータ コンフィギュレーションのドラフト バージョンの完了

    1. **ステータスの変更 \> 完了** を選択します。
    2. **OK** を選択します。
    3. 完了したバージョン 1 を選択します。

23. 完了したバージョンのメタデータ コンフィギュレーションをアプリケーションから XML ファイルとしてエクスポートする

    1. **交換 \> XML ファイルとしてエクスポート** を選択します。
    2. **OK** を選択します。

作成した ER メタデータ コンフィギュレーションは、**対外貿易メタデータ .xml** ファイルとして保存されます。 これをRCSにインポートすることで、対外貿易ビジネス ドメインのメタデータのソースとして使用できるようになります。 この情報に基づいて、アプリケーション メタデータと ER データ モデルとの間のマッピングを指定することができます。

## <a name="access-application-metadata-by-using-an-er-configuration"></a>ER コンフィギュレーションを使用してアプリケーション メタデータにアクセスする

次の手順は、**システム管理者** または **電子レポート開発者** のロールを持つ RCS ユーザーが、アプリケーションのメタデータを使用して新しい ER モデル マッピングをデザインする方法について説明しています。 アプリケーション メタデータには、対外貿易トランザクションにアクセスするためのサンプル メタデータ セットを含む ER メタデータ コンフィギュレーションを使用してアクセスされます。

これを完了する前に、ます次の手順を完了する必要があります。

- [コンフィギュレーション プロバイダーを作成し、有効としてマークする](tasks/er-configuration-provider-mark-it-active-2016-11.md)
- [RCS で使用できるアプリケーション メタデータを準備する](#prepare-application-metadata-that-can-be-used-in-rcs)

1. **すべてのワークスペース \> 電子申告** の順に移動します。
2. サンプル会社 Litware, Inc. のコンフィギュレーション プロバイダーが使用可能であり、**アクティブ** としてマークされていることを確認します。 このコンフィギュレーション プロバイダーが表示されない場合は、[コンフィギュレーション プロバイダーの作成および有効なプロバイダーとしてのマーク付け](tasks/er-configuration-provider-mark-it-active-2016-11.md)という手順を完了する必要があります。 
3. アプリケーションのメタデータを含む ER メタデータ コンフィギュレーションをインポートします。これは対外貿易ビジネス ドメインのための電子ドキュメントを生成するようコンフィギュレーションされています。 このトピックの前の部分 [RCS で使用できるアプリケーション メタデータを準備する](#prepare-application-metadata-that-can-be-used-in-rcs)の手順で ER メタデータ コンフィギュレーションを作成し、XML ファイルとしてエクスポートしました。

    1. **メタデータ コンフィギュレーション** を選択します。
    2. **交換** を選択します。
    3. **XML ファイルから読み込む** を選択します。
    4. 参照し、**対外貿易メタデータ .xml** ファイルを選択します。
    5. **OK** を選択します。
    6. ページを閉じます。

4. データ モデル コンフィギュレーションの作成

    1. **コンフィギュレーションをレポートする** を選択します。
    2. **コンフィギュレーションの作成** を選択します。
    3. ドロップ ダウン ダイアログ ボックスの **名前** フィールドに、**対外貿易モデル** と入力します。
    4. **コンフィギュレーションの作成** を選択します。
    5. **デザイナー** をクリックします。
    6. **新規** を選択すると、ドロップ ダイアログが開きます。

        1. **名前** フィールドに、**ルート** と入力します。
        2. **追加** を選択します。
    
    7. **新規** を選択すると、ドロップ ダイアログが開きます。

        1. **名前** フィールドに、**トランザクション** と入力します。
        2. **品目タイプ** フィールドで、**レコード リスト** を選択します。
        3. **追加** を選択します。
 
    8. **新規** を選択すると、ドロップ ダイアログが開きます。

        1. **名前** フィールドに、**コモディティ コード** と入力します。
        2. **品目タイプ** フィールドで、**文字列** を選択します。
        3. **追加** を選択します。

    9. **新規** を選択すると、ドロップ ダイアログが開きます。

        1. 名前フィールドに、**請求金額** と入力します。
        2. **品目タイプ** フィールドで、**実数** を選択します。
        3. **追加** を選択します。

    10. **新規** を選択すると、ドロップ ダイアログが開きます。

        1. **名前** フィールドに、**日付** と入力します。
        2. **品目タイプ** フィールドで、**日付** を選択します。
        3. **追加** を選択します。
 
    11. **追加 \> ルート参照** を選択します。
    12. **OK** を選択します。
    13. **保存** を選択します。
    14. ページを閉じます。
    15. **ステータスの変更 \> 完了** を選択します。
    16. **OK** を選択します。

5. モデル マッピング コンフィギュレーションの作成

    1. **コンフィギュレーションの作成** を選択します。
    2. ドロップ ダウン ダイアログ ボックスの **新規** フィールドに、**データ モデル対外貿易モデルに基づいたモデル マッピング** と入力します。
    3. **名前** フィールドに、**対外貿易マッピング** と入力します。
    4. **コンフィギュレーションの作成** を選択します。
    5. **必要条件** のクイック タブで、**編集** を選択します。
    6. **新規** を選択します。
    7. **必要条件のコンポーネント タイプ** フィールドで、**コンフィギュレーション** を選択します。
    8. **対外貿易メタデータ** コンフィギュレーションを選択します。
    9. **保存** を選択します。 参照が **対外貿易メタデータ** コンフィギュレーションのバージョン 1 に追加されていることに注意してください。 このコンフィギュレーションのアプリケーション メタデータは、このモデル マッピングをデザインするときに提供されます。
    10. ページを閉じます。
    11. **デザイナー** をクリックします。
    12. **デザイナー** をクリックします。
    13. ツリーで、**Dynamics 365 for Operations \> テーブル レコード** を選択します。
    14. **ルートの追加** を選択します。
    15. **名前** フィールドに、**イントラスタット** と入力します。
    16. **イントラスタット** テーブル レコードを選択します。
    17. **OK** を選択します。

        > [!NOTE]
        > 現在使用されているメタデータ セットに追加されたテーブルは 2 つだけなので、2 つのテーブルのみが提供されています。

    18. **バインド** を選択します。
    19. ツリーで、**イントラスタット \> AmountMST** を選択します。
    20. ツリーで、**トランザクション = イントラスタット \> 請求金額** を選択します。
    21. **バインド** を選択します。
    22. ツリーで、**イントラスタット \> TransDate** を選択します。
    23. ツリーで、**トランザクション = イントラスタット \> 日付** を選択します。
    24. **バインド** を選択します。
    25. ツリーで、**イントラスタット \> \>リレーション \> イントラスタットコモディティ \> コード** を選択します。
    26. ツリーで、**トランザクション = イントラスタット \> コモディティ コード** を選択します。
    27. **バインド** を選択します。
    28. **検証** を選択します。

        > [!NOTE]
        > 検証が完了した後、参照された ER メタデータ コンフィギュレーションのアプリケーション メタデータの詳細を使用して説明されているデータ ソース項目に、データ モデルの要素が正常にバインドされました。

    29. **保存** を選択します。

必要に応じて、アプリケーションで既存のメタデータ セットを拡張することができます。 その後、新しい完了版の ER メタデータ コンフィギュレーションをエクスポートし、それを RCS にインポートして、インポートされたメタデータ コンフィギュレーションの新しいバージョンを参照してコンフィギュレーション済みモデル マッピングの前提条件を更新することができます。

> [!NOTE]
> アプリケーション メタデータに関する情報を取得するこの方法は、ローカルに展開されたアプリケーションで利用できる唯一の方法です (ローカル ビジネス データ \[LBD\]、またはオンプレミスの場合、配置モデルはアプリケーションに使用されます)。

## <a name="access-application-metadata-by-using-connected-applications"></a>接続されているアプリケーションを使用してアプリケーション メタデータにアクセスする

次の手順は、**システム管理者** または **電子レポート開発者** のロールを持つ RCS ユーザーが、アプリケーションのメタデータを使用して新しい ER モデル マッピングをデザインする方法について説明しています。 アプリケーションのメタデータは、RCS 接続されたアプリケーションを使用してオンラインでアクセスできます。 サンプル ER モデルマッピングは、対外貿易トランザクションにアクセスするようにコンフィギュレーションされます。

この手順を完了するには、まず RCS にある [コンフィギュレーション プロバイダーの作成および有効なプロバイダーとしてのマーク付け](tasks/er-configuration-provider-mark-it-active-2016-11.md) の手順を完了する必要があります。 このトピックの前の部分にある [ER コンフィギュレーションを使用してアプリケーション メタデータにアクセスする](#access-application-metadata-by-using-an-er-configuration)の手順をまだ完了していない場合は、[Dynamics 365 for Finance and Operations 8.1 電子レポート タスク ガイド](https://go.microsoft.com/fwlink/?linkid=2082739)のページに移動し、次の ER コンフィギュレーション ファイルを事前にダウンロードし、ローカルに保存してください : **対外貿易メタデータ .xml**、**対外貿易モデル .xml**、および **対外貿易マッピング .xml**


### <a name="get-required-er-configurations"></a>必要な ER コンフィギュレーションの取得

このトピックの前の部分にある [ER コンフィギュレーションを使用したアプリケーション メタデータへのアクセス](#access-application-metadata-by-using-an-er-configuration)手順を既に完了している場合、現在の RCS インスタンスに必要なすべての ER コンフィギュレーション (対外貿易メタデータ、モデルおよびマッピングのコンフィギュレーション) は、既に存在しています。 その場合は、この手順をスキップできます。

1. **すべてのワークスペース \> 電子申告** の順に移動します。
2. **コンフィギュレーションをレポートする** を選択します。
3. **対外貿易メタデータ .xml**、**対外貿易モデル .xml**、**対外貿易マッピング .xml** コンフィギュレーション ファイルを読み込み、それぞれについて、次の一連の手順を繰り返します。

    1. **交換** を選択します。
    2. **XML ファイルから読み込む** を選択します。
    3. **参照** を選択し、ファイルを選択します。
    4. **OK** を選択します。

### <a name="register-the-connection-with-the-application"></a>アプリケーションとの接続を登録する

1. **すべてのワークスペース \> 電子申告** の順に移動します。
2. **接続アプリケーション** を選択します。
3. コンフィギュレーションされたアプリケーションが Microsoft Azure に基づいており、RCS ユーザーが一般にアクセスできることを確認してください。 現在の RCS ユーザーは、アプリケーションのメタデータにアクセスする権限を与えるロールで、このアプリケーションのユーザーとして登録されているコンフィギュレーションされたアプリケーションにアクセスできる必要があります。
4. **新規** を選択します。
5. **名前** フィールドに、接続されたアプリケーションの名前として **MyConnectedApp** と入力します。
6. **アプリケーション** フィールドに、アプリケーションの URL を指定します。
7. **テナント** フィールドに、アプリケーションのプロバイダーを指定します。
8. **保存** を選択します。 
9. コンフィギュレーションされたアプリケーションへの接続を確認するときは、**リモート アプリケーションへの接続** ページで、**ここを選択して、選択したリモート アプリケーションに接続する** のリンクを選択します。 
10. **接続の確認** を選択し、コンフィギュレーションされたアプリケーションへのアクセスを検証します。
11. **閉じる** を選択します。

この手順を完了して接続検証に成功すると、コンフィギュレーションされたアプリケーションのバージョンとテナントの詳細が、現在のグリッドで更新されます。

### <a name="review-the-existing-model-mapping-configuration"></a>既存のモデル マッピング コンフィギュレーションを確認する

1. **すべてのワークスペース \> 電子申告** の順に移動します。
2. **コンフィギュレーションをレポートする** を選択します。
3. ツリーで、**対外貿易モデル \> 対外貿易マッピング** を選択します。
4. **必要条件** のクイック タブを選択します。

    > [!NOTE]
    > 現在、このマッピングはメタデータのコンフィギュレーションを参照しています。 このコンフィギュレーションのアプリケーション メタデータは、このモデル マッピングをデザインするときに提供されます。

4. **デザイナー** をクリックします。
5. **デザイナー** をクリックします。
6. ツリーで、**Dynamics 365 for Operations \> テーブル レコード** を選択します。
7. **ルートの追加** を選択します。
8. **テーブル** フィールドで、値を入力または選択します。

    > [!NOTE]
    > 現在、このマッピングはメタデータのコンフィギュレーションを参照しています。 このコンフィギュレーションのアプリケーション メタデータは、このモデル マッピングをデザインするときに提供されます。

9. **キャンセル** を選択します。

### <a name="assign-the-connected-application-to-a-model-mapping"></a>接続されたアプリケーションをモデル マッピングに割り当てる

1. **編集** を選択します。
2. **接続されたアプリケーション フィールド** で、**MyConnectedApp** アプリケーションを選択します。

    > [!NOTE]
    > このマッピングは、選択した接続アプリケーションのメタデータを参照します。 マッピングがメタデータ コンフィギュレーションと接続されたアプリケーションを同時に参照する場合、接続されたアプリケーションのメタデータが使用されます。

3. **デザイナー** をクリックします。
4. **デザイナー** をクリックします。
5. ツリーで、**Dynamics 365 for Operations \> テーブル レコード** を選択します。
6. **ルートの追加** を選択します。
7. **テーブル** フィールドで、値を入力または選択します。

    > [!NOTE]
    > この時点で、マッピングは、割り当てられた接続アプリケーションのすべてのメタデータを使用するため、2 つ以上のアプリケーション テーブルが提供されました。

8. **キャンセル** を選択します。
9. **検証** を選択します。

これで、このマッピングに割り当てられた接続アプリケーションのメタデータの詳細を使用して、説明されているデータ ソース項目にデータ モデルの要素が正常にバインドされました。

異なるバージョンのアプリケーションのメタデータを使用してこのモデル マッピングを評価する必要がある場合は、接続されている別のアプリケーションを登録しモデル マッピングに割り当て、新しいメタデータに対してそれを検証します。

## <a name="additional-resources"></a>追加リソース

または、アプリケーションの **RCS で使用できるアプリケーション メタデータを準備する** タスク ガイド、**ER コンフィギュレーションを使用してアプリケーション メタデータにアクセスする** および RCS の **接続されているアプリケーションを使用してアプリケーション メタデータにアクセスする** タスク ガイドを再生することができます。 これらのタスク ガイドは、[Dynamics 365 for Finance and Operations 8.1 電子レポート タスク ガイド](https://go.microsoft.com/fwlink/?linkid=2082739)のページからダウンロードできます。


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]