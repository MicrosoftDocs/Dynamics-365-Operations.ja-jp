---
title: Azure Data Lake サービス (プレビュー) へのエクスポートによって生成されるビジネス イベント
description: この記事では、財務と運用アプリの Data Lake アドインによって生成されるビジネス イベントについて説明します。
author: MilindaV2
ms.date: 03/11/2022
ms.topic: overview
audience: Developer, IT Pro
ms.reviewer: sericks
ms.search.region: Global
ms.author: milindav
ms.search.validFrom: ''
ms.search.form: ''
ms.dyn365.ops.version: ''
ms.openlocfilehash: 4352f6a09d1d5f6cbcff32b8b04b8b4dbd89edbe
ms.sourcegitcommit: 3289478a05040910f356baf1995ce0523d347368
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/01/2022
ms.locfileid: "9109530"
---
# <a name="business-events-generated-by-the-export-to-azure-data-lake-service-preview"></a>Azure Data Lake サービス (プレビュー) へのエクスポートによって生成されるビジネス イベント

[!include [banner](../includes/banner.md)]

> [!NOTE]
> プレビューにある機能です。 顧客が早期にアクセスしてフィードバックを提供できるよう、この機能が使用できます。
>
> プレビュー機能は、機能が限定または制限されていて、運用上の用途を目的としていないことがあり、選択された地理的な地域でのみ使用できることがあります。 コンテンツおよび機能は、変更されることがあります。
>
> プレビュー機能を有効にすることにより、[追加使用条件](../../fin-ops/get-started/public-preview-terms.md)に同意します。

## <a name="what-are-business-events"></a>ビジネス イベントとは何ですか?

ビジネス イベントは、ビジネス プロセス中に何か興味のあることが起こる際、Microsoft Dynamics 365 アプリケーションによって生成されます。 また、Dataverse と Microsoft Power Platform、Dynamics 365 プロダクトの根底にあるプラットフォームを使用することで生成されます。 外部アプリケーションでは、ビジネス イベントの消費およびアクションのトリガーが可能です。 ビジネス イベントについては、[Microsoft Dataverse ビジネス イベント](/powerapps/developer/data-platform/business-events) を参照してください。

データ転送のアクティビティが完了されたか、または問題が発生した場合、Data Lake サービスへのエクスポートはビジネス イベントを生成します。 これらのイベントに応答する自動アクションを作成できます。 たとえば、変更されたデータ行を Data Lake から別の場所に連続的にコピーする自動データ パイプラインがある場合、テーブルが無効または再有効化された場合に特別なアクションが必要になる場合があります。 変更された行を処理する代わりに、応答して完全なコピー操作をトリガーすることができます。

ビジネス イベントをリッスンし、ビジネス イベントが発生した場合に応答する自動トリガーを作成できます。 これらのトリガーが *ビジネス アクション* として開始する自動アクションを参照します。 すべてのビジネス イベントをリッスンする必要はありません。 自分に関連するビジネス イベントをリッスンし反応できます。

## <a name="business-events-that-the-export-to-data-lake-service-generates"></a>Data Lake サービスへのエクスポートが生成するビジネス イベント

Data Lake サービスへのエクスポートがいくつかのビジネス イベントを生成します。 この機能は現在プレビュー中であり、プレビュー中にすべてのイベントが生成される訳ではありません。

- **初期化完了** – このイベントは、選択したテーブルの初期化が完了したかどうかを示します。 アクティブにするテーブルを選択すると、システムは Data Lake 内のデータの初期コピーを作成します。 **準リアルタイムの変更 (プレビュー)** 機能を有効にしていない場合は、システムによって Data Lake 内のデータが定期的に初期化されます。 格納データベースなどの Finance and Operation アプリでサービス オプションが発生する場合、システムが自動的に選択したテーブルを初期化します。 これらのシナリオでは、システムがイベント **初期化完了** イベントを生成します。 環境で複数のテーブルが有効になっている場合、初期化が各テーブルで完了すると複数のビジネス イベントが発生します。
- **メタデータの変更** – このイベントは、テーブル メタデータが変更されたかどうかを示します。 たとえば、テーブルに新しい列が追加された場合や、(まれに) 列が削除された場合です。 各テーブルに対してメタデータ変更ごとに 1 つのイベントを受け取ります。 メタデータの変更 (*スキーマ ドリフト* と呼ばれる状況) に対応できないダウンストリーム データ パイプラインがある場合、これらのイベントを使用して変更を検出し、ダウンストリーム パイプラインを変更できます。
- **無効** – このイベントは、以前に有効なテーブルが無効になった状態を示します。 テーブルが無効な場合、財務と運用アプリで変更されたデータは、Data Lake で更新されません。
- **有効** – このイベントは、以前に無効なテーブルが再有効になった状態を示します。 テーブルを再度有効化すると、システムは Data Lake のデータを再度初期化します。 その後、**初期化の完了** イベントが発生する可能性があります。
- **エラー** – このイベントでは、Data Lake サービスへのエクスポートがデータ レイクのデータへの更新を一時停止した状態を示します。
- **レイク スイッチ** – このイベントでは、システム管理者が Data Lake の位置を変更した状態を示します。

    > [!NOTE]
    > このイベントはまだ実装されていません。

## <a name="enable-business-events"></a>ビジネス イベントの有効化

財務と運用アプリの Data Lake アドインへのエクスポートを使用している場合、ビジネス イベントはすでに環境内で有効になっています。 システムがビジネス イベントを生成するときにアクションを実行するには、**Data Lake への Dynamics 365 Export** ソリューションを Microsoft Power Platform 環境にインストールする必用があります。

**Data Lake への Dynamics 365 Export** ソリューションをインストールするには、Power Platform 管理センターを開きます。 Microsoft Power Platform 環境の管理者になる必要があります。 ソリューションを検索し、**インストール** を選択します。

> [!NOTE]
> Data Lake サービスへのエクスポートで紹介されているビジネス イベントは、プレビュー中です。 アプリケーションをインストールすることを選択する場合は、[補助使用条件](../../fin-ops/get-started/public-preview-terms.md) に同意します。

## <a name="create-a-business-action"></a>ビジネス アクションの作成

Power Automate、Logic Apps などの Azure メッセージング サービス、および数々のサード パーティのツールを使用して、アクションを作成できます。 簡単にするために、このセクションでは Power Automate Dataverse コネクタの[動作が開始された (プレビュー)](/connectors/commondataserviceforapps/#when-an-action-is-performed-(preview)) トリガーを使用して、ビジネス アクションの作成方法を説明します。

各ビジネス イベントは、そのイベントによって影響を受けるテーブルを識別するのに役立つイベント メッセージを提供します。 イベント メッセージは、ビジネス アクションに渡すパラメータと考えて表示できます。 次の表に、ビジネス イベントとイベント メッセージ スキーマを示します。

| ビジネス イベント                    | Description                                      | イベント メッセージ (パラメーター)            |
|-----------------------------------|--------------------------------------------------|---------------------------------------|
| 完了の初期化 (プレビュー)     | システムによって、テーブルのフル コピーが完了しました。 | TableName: 文字列、FolderPath: 文字列 |
| メタデータの変更 (プレビュー)        | テーブル メタデータが変更された。                      | TableName: 文字列                     |
| 無効化 (プレビュー)             | テーブルが無効化されました。                    | TableName: 文字列                     |
| 有効化 (プレビュー)               | テーブルが有効化されました。                      | TableName: 文字列                     |
| エラー (プレビュー)                   | エラーが原因でサービスが一時停止しました。      | TableName: 文字列、StatusCode: int    |
| レイク スイッチ (まだ実装されてません) | Data Lake の場所が変更されました。         |                                       |

Microsoft Power Automate を使用してビジネス アクションを作成するには、次の手順に従います。

1. Power Apps メーカー ポータルで、**フロー** を選択して、Power Automate ポータルを開きます。
2. **自分のフロー** を選び、**新しいフロー** を選択します。
3. **自動化されたクラウド フロー** を選び、**アクションの実行時 (プレビュー)** を選択します。

    ![自動化されたクラウド フローの作成。](./media/NewAutomatedCloudFlow.png)

4. カタログとして **Dynamics 365 財務と運用 Data Lake にエクスポート** を選択し、カテゴリとして **データのエクスポート** を選択します。
5. **テーブル名** フィールドを終了し、**(none)** を設定します。 このパラメータは、Data Lake サービスへのエクスポートには適用できません。
6. いずれかのビジネス イベントが解雇された場合、アクションを作成することもできます。 **アクション名** フィールドで、前のテーブルからビジネス イベントの 1 つを選択します。 たとえば、サービスでエラーが発生した場合にアクションを実行したいので、**エラー** を選択します。
7. 新しい手順の追加。 Power Automate で使用できるいずれかの手順を実装できます。 この例では、メールを送信する手順を追加します。 メール メッセージを作成するときに、テーブル名などのパラメータを選択できます。

    ![ビジネス アクションの作成。](./media/WhenActionisPerformed.png)

8. フローを保存します。 テーブルのステータスがエラーの場合は、メールを受け取る必要があります。

## <a name="any-questions-feedback"></a>ご質問、フィードバックはありますか?

この機能と他の機能についても積極的に取り組んでいます。 製品チームや他の顧客やパートナーに連絡して質問を行いますか? 製品チームに直接フィードバックを提供しますか? その場合、[プレビュー Yammer グループ](https://www.yammer.com/dynamicsaxfeedbackprograms/#/threads/inGroup?type=in_group&feedId=32768909312&view=all) に参加できます。 毎週の「営業時間」のオンライン ミーティングに参加し、Yammerオンライン フォーラムを使用して連絡を取り合い、質問することができます。

