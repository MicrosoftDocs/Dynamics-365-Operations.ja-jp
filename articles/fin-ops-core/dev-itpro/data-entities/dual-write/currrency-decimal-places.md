---
title: デュアル書き込みの通貨データ タイプの移行
description: このトピックでは、デュアル書き込みでサポートされている通貨の小数点以下の桁数を変更する方法について説明します。
author: RamaKrishnamoorthy
ms.date: 04/06/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2020-04-06
ms.openlocfilehash: 073f89b5ae44e20d1d2e854341afaa176f9b6280
ms.sourcegitcommit: c08a9d19eed1df03f32442ddb65a2adf1473d3b6
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/06/2021
ms.locfileid: "6350938"
---
# <a name="currency-data-type-migration-for-dual-write"></a>デュアル書き込みの通貨データ タイプの移行

[!include [banner](../../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

サポートされている通貨値の小数位の数は、最大 10 個まで増やすことができます。 既定の制限は、小数点以下 4 桁です。 小数点以下の桁数を増やすことで、デュアル書き込みを使用してデータを同期する場合にデータが失われないようにすることができます。 小数桁数の増加は、オプトインの変更になります。 それを実装するには、Microsoft に支援を依頼する必要があります。

小数点以下の桁数を変更するプロセスには、次の 2 つのステップがあります。

1. Microsoft からの移行を要求します。
2. Dataverse の小数点以下の変化桁数。

この Finance and Operations アプリと Dataverse は、通貨値の小数点以下の桁数が同じであることをサポートする必要があります。 これを行わないと、この情報がアプリ間で同期されている場合にデータが失われる可能性があります。 移行プロセスでは、通貨と為替レートの値の格納方法が再設定されますが、データは変更されません。 移行が完了した後、通貨コードと価格の小数桁数を増やすことができ、ユーザーが入力および表示するデータの小数点以下の精度を高めることができます。

移行はオプションです。 小数点以下の桁数を増やすことをお勧めする場合は、移行を検討することをお勧めします。 小数点が 4 桁以上の値を必要としない組織では、移行する必要はありません。

## <a name="requesting-migration-from-microsoft"></a>Microsoft からの移行の要求

Dataverse での既存の通貨列の保管では、4 桁以上の小数点以下の桁数はサポートされません。 したがって、移行プロセス中に、データベースの新しい内部列に通貨の値がコピーされます。 このプロセスは、すべてのデータが移行されるまで継続して実行されます。 移行が終了すると、内部的には古い記憶域タイプが新しい記憶域タイプに置き換えられますが、データ値は変更されません。 通貨列では、10 桁までの小数位をサポートできます。 移行プロセス中は、Dataverse を中断せずに引き続き使用することができます。

同時に、為替レートが変更され、現在の 10 回の制限ではなく 12 桁までの小数位をサポートするようになります。 この変更は、小数点以下の桁数が Finance and Operations アプリと Dataverse の両方で同じになるようにする必要があります。

移行によってデータが変更されることはありません。 通貨列と為替レート列を変換すると、管理者は、各取引通貨および価格の小数点以下の桁数を指定して、通貨列の小数位を最大 10 桁使用するようにシステムを構成できます。

### <a name="request-a-migration"></a>移行の要求

この機能を使用できるようにするには、**CDSExpandDecimal@microsoft.com** にメールをして、次の情報を含める必要があります。

+ **件名:** \<organizationID\> の 10 進数サポートを有効にする要求
+ **本文:** 自分の組織 \<organizationID\> に対して拡張 10 進数サポートを有効にしたいと考えています。

次の手順については、Microsoft の担当者が 2 ~ 3 営業日以内に連絡を差し上げます。

移行を要求するときには、次の詳細を把握し、それに応じて計画する必要があります。

+ データを移行するために必要な時間は、システムのデータ量によって異なります。 大規模なデータベースの移行には数日間かかる場合があります。
+ 移行の実行中は、インデックスに追加の領域が必要になるので、データベースのサイズは一時的に増加します。 この追加領域の大部分は、移行の完了時に解放されます。
+ 移行プロセス中にエラーが発生して移行の完了を妨げる場合は、Microsoft サポートに警告が発生するので、サポート スタッフがそのように介入できます。 ただし、移行中にエラーが発生した場合でも、Dataverse はそのまま通常使用できるようになります。
+ 移行プロセスを元に戻すことはできません。

## <a name="changing-the-number-of-decimal-places"></a>小数点以下の桁数を変更する

移行が完了した後に、Dataverse は小数点以下の桁数が多い数値を保存できます。 管理者は、特定の通貨コードと価格設定に使用する小数位の数を選択できます。 Microsoft Power Apps、Power BI、Power Automate のユーザーは、より多くの小数点以下がある数字を表示して使用できます。

この変更を行うには、Power Apps の次の設定を更新する必要があります。

+ **システム設定: 価格決定の通貨の精度** - **システム全体の価格決定に使用される通貨の有効桁数を設定** 列は、**価格決定の精度** が選択された場合に、通貨が組織に対してどのように動作するかを定義します。
+ **業務管理: 通貨** - **通貨の精度** 列では、特定の通貨での小数点以下の桁数を独自に指定できます。 組織全体の設定にはフォールバックがあります。

次に、いくつか制限を示します。

+ テーブルで通貨列を構成することはできません。
+ **価格決定** と **トランザクションの通貨** レベルでは、小数点以下 4 桁以上を指定できます。

### <a name="system-settings-currency-precision-for-pricing"></a>システム設定: 価格決定の通貨の精度

移行が完了した後、管理者は通貨の有効桁数を設定できます。 **設定 \>管理** に移動して、**システム設定** を選択します。 その後、**全般** タブで、次の図に示すように、**システム全体の価格決定に使用される通貨桁数を設定** 列の値を変更します。

![通貨のシステム設定。](media/currency-system-settings.png)

### <a name="business-management-currencies"></a>業務管理: 通貨

特定の通貨の通貨の有効桁数と、価格決定に使用される通貨の桁数が異なる場合は、この通貨を変更することができます。 **設定\>業務管理** に移動して、**通貨** を選択して、通貨を選択して変更します。 次の図に示すように、**通貨桁数** 列を目的の小数点以下の桁数に設定します。

![特定のロケールの通貨設定。](media/specific-currency.png)

### <a name="tables-currency-column"></a>テーブル: 通貨列

特定の通貨列に対して構成可能な小数位の数は 4 つに制限されます。


[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]