---
title: Azure Data Lake の Finance and Operations アプリ データ
description: このトピックでは、Data Lakeを実装した Finance and Operations アプリ環境の設定方法を説明します。
author: MilindaV2
manager: AnnBe
ms.date: 01/04/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: kfend
ms.custom: 96283
ms.assetid: ''
ms.search.region: Global
ms.author: milindav
ms.search.validFrom: 2020-03-01
ms.dyn365.ops.version: Platform Update 34
ms.openlocfilehash: d654fda361b837df698a72163933c3e2d7455192
ms.sourcegitcommit: 316200579dd5b04ad76f276a2ed6b0f55fa8c812
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/05/2021
ms.locfileid: "4826434"
---
# <a name="finance-and-operations-apps-data-in-azure-data-lake"></a>Azure Data Lake の Finance and Operations アプリ データ

[!include [banner](../includes/banner.md)]

> [!NOTE]
> 制限されたプレビューでの **Azure Data Lake へのエクスポート** 機能は、Finance and Operations アプリで対応しているすべての地域および環境では使用できない場合があります。 Lifecycle Services (LCS)、または Finance and Operations アプリで **Azure Data Lake へのエクスポート** の機能が見つからない場合は、ご利用の環境でこの機能を使用できません。 
>
> 現在、プレビューは終了しています。 数か月後に、いくつかの地域で追加の環境を有効にします。 プレビューに参加したい顧客からの要求を承諾しています。 今後のプレビューに参加する場合は、[アンケートを完了します](https://aka.ms/FnODataLakePreviewSurvey)。 参加の準備ができ次第、ご連絡いたします。 [アンケートを完了](https://aka.ms/FnODataLakePreviewSurvey) すると、Yammer に参加することもできます。 Yammer グループを使用して、機能を理解するのに役立つ質問をお伝えすることができます。  
>
> 環境でこの機能が有効になるまで、[GitHub ツール](https://github.com/microsoft/Dynamics-365-FastTrack-Implementation-Assets/blob/master/Analytics/AzureDataFactoryARMTemplates/SQLToADLSFullExport/ReadmeV2.md) を使用して機能の実装をプロトタイプ/計画するためのオプションがあります。 このツールを使用すると、機能によってエクスポートされたのと同じ形式で、サンドボックス環境のデータをストレージ アカウントにエクスポートすることができます。 
>
> 現時点では、**Azure Data Lake へのエクスポート** 機能は、Tier 1 (開発者) 環境では使用できません。 この機能を有効化するには、クラウド ベースの Tier 2 またはそれ以上の環境が必要です。
>
> Data Lakeで集計測定を使用できるようにするには、[エンティティ ストアを Data Lake として使用可能とする](entity-store-data-lake.md)で説明されている方法でこの機能を引き続き使用します。
 
 
**Azure Data lake にエクスポート** 機能を使用すると、アプリケーションのデータをご利用の Azure Data lake (Gen 2) の Finance and Operations アプリにコピーできます。 このシステムでは、含めるテーブルやエンティティを選択できます。 必要なデータを選択した後、システムが初期コピーを行います。 システムは、変更、削除、追加を適用することで、選択したデータを最新の状態に保ちます。 Finance and Operations アプリのインスタンスのデータを変更後、data lake でデータが使用可能になるまでには数分を要する場合があります。 

この機能を使用するには、**Data Lake へのエクスポート** を構成する必要があります。 詳細については、[Azure Data Lake へのエクスポートの構成](configure-export-data-lake.md)を参照してください。


## <a name="turn-on-the-export-data-to-azure-data-lake-feature"></a>Azure Data Lake へのデータのエクスポート機能を有効にします

管理者は事前に、**Azure Data Lake へのエクスポート**  機能を有効化しておく必要があります。 これを行うには、**機能の管理** ワークスペースにアクセスし、**Azure Data Lake にデータをエクスポート** 機能を選択し、**有効化** を選択してください。

この機能を有効化すると、**システムの管理** の配下に **Azure Data Lake にエクスポートする** オプションが表示されます。

## <a name="select-data"></a>データの選択

> [!NOTE]
> この機能 **Azure Data Lake へのエクスポート** がご利用中の環境内の **機能管理** モジュールで使用できない場合、環境にサインインし、ブラウザのアドレスに以下の URL を追加してください: &mi=DataFeedsDefinitionWorkspace たとえば、https://ax123456.cloud.test.dynamics.com/?cmp=USMF&mi=DataFeedsDefinitionWorkspace。


Data Lake にステージングする必要のあるテーブルとエンティティを選択することができます 。

1. ご利用の環境で、**システム管理** \> **Azure Data Lake にエクスポートする** へと移動します。
2. **Data Lake にエクスポートするデータフィードの構成** を選択します。
3. **テーブルの選択** タブの、**Data Lake に対するデータフィードの構成** ページで、 Data Lake にステージングするデータ テーブルを選択します。 テーブルは、表示名またはシステム名で検索できます。 テーブルが既に同期されているかどうかを確認することもできます。 
4. 完了後に、**テーブルの追加** を選択し、選択したテーブルを Data Lake に追加します。

    ![テーブルの選択](./media/Export-Tables-toData-lake-unselectedv2.png)

5. **データフィードの有効化** を選択し 、**OK** を選択します。 テーブルを追加する際に、このテーブルの状態が **初期化中** と表示される場合があります。 これは、データの初期コピーを作成していることを意味します。 初期コピーが完了すると、状態が **実行中** に変更されます

エラーが発生した場合は、状態が **無効** と表示されます。 **実行中** の状態を確認する際に、データ レイクのデータを使用でき ます。 **初期化** または **無効化** 状態の間にデータ レイクデータを使用している場合は、一部のデータが表示されないことがあります。 

必要な特定のテーブルについて詳しくない場合は、エンティティを使用してテーブルを選択することができます。 エンティティはデータの抽象度が高く、複数のテーブルを含む場合があります。 エンティティを選択することで、それを構成するテーブルも選択することになります。
    
7. **使用するエンティティの選択** タブでエンティティを選択し、**エンティティを使用してテーブルを追加する** を選択します。

    ![エンティティを使用したテーブルの選択](./media/Export-Entities-toData-lake-unselectedv2.png)
    
    テーブルを選択する方法を問わず、Data Lake ではテーブルがステージングされます。

## <a name="monitor-the-tables-in-data-lake"></a>Data Lake のテーブルを監視する

システムが Data Lake でデータの更新を維持するため、データのエクスポートの監視や、スケジュールを設定する必要はありません。 **Data Lake に対するデータフィードの構成** ページの **アクティブ** タブで、進行中のデータ エクスポートの状態を確認することができます。

![テーブルの監視の進行状況](./media/Export-Tables-toData-lake-monitorv2.png)

## <a name="troubleshooting-common-issues-and-errors"></a>一般的な問題とエラーに対するトラブルシューティング

### <a name="export-to-data-lake-feature-is-not-available-in-your-region-andor-your-environment-at-this-time"></a>Data Lake へのエクスポート機能が表示されない場合は、この機能がご利用の環境や地域で対応していないことを意味します
この機能は、Tier 1 (開発者) 環境では使用できません。 バージョン 10.0.13、またはそれ以上のプラットフォーム更新プログラムを含むサンドボックス環境 (Tier 2 またはそれ以降) が必要です。

この機能はプレビューが制限されており、Finance and Operations アプリが利用可能となっている Azure の地域や、ご利用の環境によっては利用できない場合があります。 今後のプレビューに参加する場合は、[アンケートを完了します](https://aka.ms/FnODataLakePreviewSurvey)。 参加の準備ができ次第、ご連絡いたします。 アンケートを完了すると、Yammer グループに参加することもできます。 Yammer グループを使用して、機能を理解するのに役立つ質問をお伝えすることができます。 この機能をご利用頂けるよう対応いたします。

### <a name="export-to-data-lake-feature-is-currently-being-installed-for-your-environment-please-check-back-later"></a>Data Lake へのエクスポート機能は、ご利用の環境にインストールされています。 後でもう一度ご確認ください。
この機能を使用するには、Data Lake へのエクスポートを構成する必要があります。 詳細については、[Azure Data Lake へのエクスポートの構成](configure-export-data-lake.md)を参照してください。

### <a name="export-to-data-lake-add-in-is-not-installed"></a>Data Lake アドインへのエクスポート機能がインストールされていません。 
Dynamics Lifecycle Services (LCS) を使用してこのアドインをインストールする場合は、管理者に問い合わせてください。 この機能を使用するには、Data Lake へのエクスポートを構成する必要があります。 詳細については、[Azure Data Lake へのエクスポートの構成](configure-export-data-lake.md)を参照してください。

### <a name="export-to-data-lake-feature-failed-to-install-in-dynamics-life-cycle-services-lcs"></a>Data Lake へのエクスポート機能は、Dynamics Life Cycle Services (LCS) へのインストールに失敗しました。 
Data Lake アドインへのエクスポート機能を再インストールするには、管理者に問い合わせてください。 問題が解消しない場合は、サポートにお問い合わせください。 Data Lake へのエクスポート機能を構成した際に、エラーが表示される場合があります。 または、ご利用の環境の変更がされている場合は、構成後に Data Lake にアクセスした際にエラーが発生する場合があります。 詳細については、[Azure Data Lake へのエクスポートの構成](configure-export-data-lake.md)を参照してください。

### <a name="export-to-data-lake-feature-is-temporarily-unavailable-please-check-back-later"></a>Data Lake へのエクスポート機能は、一時的に使用できなくなります。 後でもう一度ご確認ください。
このエラーが長時間継続するする場合は、サポートに連絡してください。  

### <a name="status-codes-with-extended-errors"></a>拡張エラーを含むステータス コード
Data Lake へのエクスポートに追加したテーブルでエラーが発生すると、ステータス列にエラー コードが表示される場合があります。 次のエラー コードは、エラーの原因と問題の修正方法を示します。

**エラー ステータス コード 4xx は、テーブルに関する問題を示します** 

| エラー コード | 出庫                                                                  | 次のステップ                                                                                                                                                                                                                                                                                                                                                                     |
|------------|-----------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 400        | 追加したテーブルには RecID フィールドが含まれていません。                   | RecID フィールドは、システムによりテーブル データをインデックス化するために使用されます。 RecID フィールドを含まないテーブルは、Data Lake に追加できません。 この問題が Finance and Operations アプリのテーブルからの問題である場合は 、Microsoft サポートにお問い合わせください。 このテーブルがパートナーまたは ISV によって開発された場合は、RecID フィールドを含めるよう、開発者にお問い合わせください。                                  |
| 401        | 追加したテーブルがデータベースにありません。 | 追加したテーブルがデータベースで使用できなくなり、システムはレイクでデータの更新を続行できません。 ソフトウェアまたはデータベースの更新が原因で、このテーブルが削除された可能性があります。 データベース管理者または開発者にお問い合わせください。 このテーブルがパートナーまたは ISV によって開発された場合は、開発者にお問い合わせください。                 |
| 402        | RecID フィールドがインデックス化されません。                                            | システムにより、テーブルに含まれる RecID フィールドがインデックスの一部ではないことが検出されました。 これにより Data Lake の更新でのパフォーマンスが低下し、更新が Data Lake に反映されるのに時間がかかる可能性があります。 この問題が Finance and Operations アプリのテーブルからの問題である場合は 、Microsoft サポートにお問い合わせください。 このテーブルがパートナーまたは ISV によって開発された場合は、開発者にお問い合わせください。 |

**エラー ステータス コード 5xx は、データのエクスポート中にシステム エラーが発生することを示します** エラーが原因で、システムによるデータのエクスポートが一時停止しました – レイクに存在するデータは、エラーが解決されるまで更新されません。 テーブルを無効化および有効化して、これにより問題が解決されるかどうか確認してください。 テーブルを無効化および有効化すると、システムが完全なコピーを取ってレイク内のデータが再初期化される場合があることに注意してください。 それでも問題が解消しない場合は、テーブル名とエラー コードを手元に用意して Microsoft サポートにお問い合わせください。

**エラー ステータス コード 8xx と 9xx は、テーブルまたはデータベース構造の追加後の変更を示します**

| エラー コード | 出庫                                                                                 | 次のステップ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|------------|---------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 800        | データ テーブルのスキーマに変更があります。                                            | 変更したデータをレイクに追加すると、システムによってテーブル構造の変更が検出されます。 この変更は通常、ソフトウェアの更新またはデータベースの変更によるものです。 たとえば、新しいフィールドがテーブルに追加されたり、フィールドが変更または削除された場合、レイクで更新されたデータは既存のデータと同じ形式でない可能性があります。 エラーが原因で、システムでのデータのエクスポートが一時停止しました。 問題が解決されるまで、レイクに存在するデータは更新されません。 テーブルを無効化および有効化して、問題が解決されるかどうか確認してください。 |
| 801        | 変更データ キャプチャ機能に問題があります。 | Data Lake へのエクスポート機能は、変更データ キャプチャ機能を使用します。 Finance and Operations アプリ データベースで変更データ キャプチャ機能が無効になっているため、変更データはエクスポートできません。 これはデータベースのメンテナンス操作によって発生する場合があります。 テーブルを無効化および有効化して、問題が解決されるかどうか確認してください。 問題が解消しない場合は、Microsoft サポート にお問い合わせください。                                                                                                                                                                                          |
| 802        | テーブル用変更データ キャプチャ機能に問題があります。                      | Data Lake へのエクスポート機能は、変更データ キャプチャ機能を使用します。 Finance and Operations アプリ データベースで変更データ キャプチャ機能がこのテーブルに対して有効になっていないため、変更データはエクスポートできません。 これはデータベースのメンテナンス操作によって発生する場合があります。 テーブルを無効化および有効化して、問題が解決されるかどうか確認してください。                                                                                                                                                                         |
| 900        | 環境での変更データ キャプチャ機能に問題があります。               | Data Lake へのエクスポート機能は、変更データ キャプチャ機能を使用します。 Finance and Operations アプリ データベースで変更データ キャプチャ機能がこのテーブルに対して有効になっていないため、変更データはエクスポートできません。 これはデータベースのメンテナンス操作によって発生する場合があります。 テーブルを無効化および有効化して、問題が解決されるかどうか確認してください。 問題が解消しない場合は、Microsoft サポート にお問い合わせください。                                                                                                                                                                        |


> [!NOTE]
> テーブルを無効化および有効化すると、システムが完全なコピーを作成してレイク内のデータが再初期化される場合があります。 これが大きなテーブルの場合、初期化プロセスに時間がかかる可能性があります。 今後システムは、テーブル構造の変更を反映するため、レイク内のデータの更新を自動的に行う可能性があります。 

