---
title: Azure Data Lake へのエクスポートの構成
description: このトピックでは、Azure Data Lake へのエクスポートの構成に関する情報を説明します。
author: MilindaV2
manager: AnnBe
ms.date: 09/24/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Operations
ms.custom: 96283
ms.assetid: ''
ms.search.region: Global
ms.author: milindav
ms.search.validFrom: 2020-03-03
ms.dyn365.ops.version: Platform Update 33
ms.openlocfilehash: 7d494f3f0566890c80e8edf593020f765f850fe2
ms.sourcegitcommit: 599ce9d0d84ac2195856d1e6cb703036fb09b253
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/24/2020
ms.locfileid: "3887725"
---
# <a name="configure-export-to-azure-data-lake"></a><span data-ttu-id="8ad6e-103">Azure Data Lake へのエクスポートのコンフィギュレーション</span><span class="sxs-lookup"><span data-stu-id="8ad6e-103">Configure export to Azure Data Lake</span></span>

[!include [banner](../includes/banner.md)]

> [!NOTE]
> <span data-ttu-id="8ad6e-104">制限されたプレビューでの **Azure Data Lake へのエクスポート**機能は、Finance and Operations アプリで対応しているすべての地域および環境では使用できない場合があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-104">The **Export to Azure Data Lake** feature is in limited preview and may not be available in all regions and environments supported by Finance and Operations apps.</span></span> <span data-ttu-id="8ad6e-105">Lifecycle Services (LCS)、または Finance and Operations アプリで **Azure Data Lake へのエクスポート**の機能が見つからない場合は、ご利用の環境でこの機能を使用できません。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-105">If you are unable to find the **Export to Azure Data Lake** functionality in Lifecycle Services (LCS) or your Finance and Operations apps, this feature is not currently available in your environment.</span></span> 
>
> <span data-ttu-id="8ad6e-106">現在、プレビューは終了しています。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-106">Currently, previews are closed.</span></span> <span data-ttu-id="8ad6e-107">数か月後に、いくつかの地域で追加の環境を有効にします。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-107">In the coming months we will enable additional environments in several regions.</span></span> <span data-ttu-id="8ad6e-108">プレビューに参加したい顧客からの要求を承諾しています。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-108">We are accepting requests from customers who would like to join the preview.</span></span> <span data-ttu-id="8ad6e-109">今後のプレビューに参加する場合は、[アンケートを完了します](https://aka.ms/FnODataLakePreviewSurvey)。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-109">If you would like to join a future preview, [complete the survey](https://aka.ms/FnODataLakePreviewSurvey).</span></span> <span data-ttu-id="8ad6e-110">参加の準備ができ次第、ご連絡いたします。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-110">We will contact you when we are ready to include you.</span></span> <span data-ttu-id="8ad6e-111">[アンケートを完了](https://aka.ms/FnODataLakePreviewSurvey) すると、Yammer に参加することもできます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-111">You can also join a Yammer group by [completing the survey](https://aka.ms/FnODataLakePreviewSurvey).</span></span> <span data-ttu-id="8ad6e-112">Yammer グループを使用して、機能を理解するのに役立つ質問をお伝えすることができます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-112">You can use the Yammer group to stay in contact and ask questions that will help you understand the feature.</span></span>  
>
> <span data-ttu-id="8ad6e-113">環境でこの機能が有効になるまで、[GitHub ツール](https://github.com/microsoft/Dynamics-365-FastTrack-Implementation-Assets/blob/master/Analytics/AzureDataFactoryARMTemplates/SQLToADLSFullExport/ReadmeV2.md) を使用して機能の実装をプロトタイプ/計画するためのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-113">Until the feature is enabled in your environment, you have the option to prototype/plan the feature implementation using [GitHub tools](https://github.com/microsoft/Dynamics-365-FastTrack-Implementation-Assets/blob/master/Analytics/AzureDataFactoryARMTemplates/SQLToADLSFullExport/ReadmeV2.md).</span></span> <span data-ttu-id="8ad6e-114">このツールを使用すると、機能によってエクスポートされたのと同じ形式で、サンドボックス環境のデータをストレージ アカウントにエクスポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-114">The tools will enable you to export data from your sandbox environment into a storage account in the same format as exported by the feature.</span></span> 
>
> <span data-ttu-id="8ad6e-115">現時点では、**Azure Data Lake へのエクスポート**機能は、Tier 1 (開発者) 環境では使用できません。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-115">At this time, **Export to Azure Data Lake** feature is not available in Tier-1 (developer) environments.</span></span> <span data-ttu-id="8ad6e-116">この機能を有効化するには、クラウド ベースの Tier 2 またはそれ以上の環境が必要です。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-116">You need a cloud-based Tier-2 or higher environment to enable this feature.</span></span>
>
> <span data-ttu-id="8ad6e-117">Data Lakeで集計測定を使用できるようにするには、[エンティティ ストアを Data Lake として使用可能とする](entity-store-data-lake.md)で説明されている方法でこの機能を引き続き使用します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-117">To make aggregate measurements available in a data lake, continue to use the feature in the manner that is described in [Make entity store available as a Data Lake](entity-store-data-lake.md).</span></span>

<span data-ttu-id="8ad6e-118">Data Lake へのエクスポートを構成するには、ご利用の Azure サブスクリプションにストレージ アカウントを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-118">To configure the export to Data Lake, you must create a storage account in your own Azure subscription.</span></span> <span data-ttu-id="8ad6e-119">このストレージ アカウントはデータの格納に使用されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-119">This storage account will be used to store data.</span></span> <span data-ttu-id="8ad6e-120">続いて、ストレージ アカウントのルートへのアクセスを許可するAzure Active Directory (Azure AD) のアプリケーション ID を作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-120">Next, you must create an Azure Active Directory (Azure AD) application ID that grants access to the root of your storage account.</span></span> <span data-ttu-id="8ad6e-121">Dynamics 365 Finance 、または Operations app は、Azure AD アプリケーションを使用してストレージへのアクセスや、フォルダ構造の作成や、データの書き込みを行います。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-121">Your Dynamics 365 Finance or Operations app will use the Azure AD application to gain access to storage, create the folder structure, and write data.</span></span> <span data-ttu-id="8ad6e-122">サブスクリプションにキー コンテナーを作成し、ストレージ アカウントの名前、アプリケーション ID、アプリケーションのシークレットを保存します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-122">Create a key vault in your subscription and store the names of the storage account, application ID, and the application secrets.</span></span> <span data-ttu-id="8ad6e-123">Azure portal でリソースを作成するアクセス許可がない場合は、組織内でこのアクセス許可を持つユーザーの支援が必要となります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-123">If you don't have permission to create resources in Azure portal, you will need assistance from someone in your organization with required permissions.</span></span>

<span data-ttu-id="8ad6e-124">Azure portal で行われる手順は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-124">The steps, which take place in the Azure portal, are as follows:</span></span> 

1. [<span data-ttu-id="8ad6e-125">サブスクリプションに Data Lake ストレージ (Gen2 アカウント) を作成します</span><span class="sxs-lookup"><span data-stu-id="8ad6e-125">Create a Data Lake Storage (Gen2 account) in your subscription</span></span>](#createsubscription)
2. [<span data-ttu-id="8ad6e-126">キー コンテナーとストレージ アカウントを含むシークレットの作成</span><span class="sxs-lookup"><span data-stu-id="8ad6e-126">Create a key vault and a secret that contain the storage account</span></span>](#createkeyvault)
3. [<span data-ttu-id="8ad6e-127">Azure Active Directory でアプリケーションを作成する</span><span class="sxs-lookup"><span data-stu-id="8ad6e-127">Create an application in Azure Active Directory</span></span>](#createapplication) 
4. [<span data-ttu-id="8ad6e-128">キー コンテナーにシークレットを追加する</span><span class="sxs-lookup"><span data-stu-id="8ad6e-128">Add secrets to the key vault</span></span>](#addsecrets)
5. [<span data-ttu-id="8ad6e-129">キー コンテナーのシークレットを読み取るためにアプリケーションを許可する</span><span class="sxs-lookup"><span data-stu-id="8ad6e-129">Authorize the application to read secrets in the key vault</span></span>](#authorize)
6. [<span data-ttu-id="8ad6e-130">アプリケーションにアクセス制御ロールを付与する</span><span class="sxs-lookup"><span data-stu-id="8ad6e-130">Grant access control roles to applications</span></span>](#grantaccess)

    > [!NOTE]
    > <span data-ttu-id="8ad6e-131">Azure portal で作業する場合は、後続の手順に対して複数の値を保存するように指示されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-131">When you are working in the Azure portal, you will be instructed to save several values for subsequent steps.</span></span> <span data-ttu-id="8ad6e-132">また、これらの値の一部は、Lifecycle Services (LCS) を使用して Finance and Operations アプリに提供されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-132">You will also provide some of these values to your Finance and Operations apps by using Lifecycle Services (LCS).</span></span> <span data-ttu-id="8ad6e-133">これを行うには、LCS への管理者アクセス権が必要です。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-133">You will need Administrator access to LCS in order to do this.</span></span>

7. [<span data-ttu-id="8ad6e-134">LCS の Data Lake アドインへのエクスポートのインストール</span><span class="sxs-lookup"><span data-stu-id="8ad6e-134">Install the Export to Data Lake add-in in LCS</span></span>](#installaddin)

## <a name="create-a-data-lake-storage-gen2-account-in-your-subscription"></a><a name="createsubscription"></a><span data-ttu-id="8ad6e-135">サブスクリプションに Data Lake ストレージ（Gen2）を作成します</span><span class="sxs-lookup"><span data-stu-id="8ad6e-135">Create a Data Lake Storage (Gen2) account in your subscription</span></span>

<span data-ttu-id="8ad6e-136">Data Lake ストレージ アカウントは、Finance and Operations アプリのデータを格納する目的で使用されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-136">The Data Lake Storage account will be used to store data from your Finance and Operations apps.</span></span> <span data-ttu-id="8ad6e-137">ストレージ アカウントを手動で作成するには、Azure サブスクリプションへの管理者権限を持つユーザーである必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-137">To manually create a storage account, you must have administrative rights to your organization's Azure subscription.</span></span> <span data-ttu-id="8ad6e-138">ストレージ アカウントを作成するには、次の手順を完了してください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-138">To create a storage account, complete the following steps.</span></span>

1. <span data-ttu-id="8ad6e-139">Azure portalで、**新しいリソースの作成** を選択し、**ストレージアカウント (blob、ファイル、テーブル、キュー)** を検索して選択し ます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-139">In the Azure portal, select **Create new resource**, and then search for and select **Storage account – blob, file, table, queue**.</span></span>
2. <span data-ttu-id="8ad6e-140">**ストレージ アカウントを作成** ダイアログ ボックスで、次のパラメーター フィールドの値を指定します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-140">In the **Create storage account** dialog box, provide values for the following parameter fields:</span></span>

    - <span data-ttu-id="8ad6e-141">**場所:** 環境があるデータ センターを選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-141">**Location:** Select the data center where your environment is located.</span></span> <span data-ttu-id="8ad6e-142">選択したデータ センターが異なる Azure リージョンにある場合は、データ移動コストが発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-142">If the data center that you select is in a different Azure region, you may incur additional data movement costs.</span></span> <span data-ttu-id="8ad6e-143">Microsoft Power BI やデータ ウェアハウスが別の地域にある場合は、地域間でのストレージ移動にはレプリケーションを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-143">If your Microsoft Power BI or your data warehouse is in a different region, you can use replication to move storage between regions.</span></span>
    - <span data-ttu-id="8ad6e-144">**パフォーマンス**: **標準**を選択することを推奨します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-144">**Performance**: We recommend you select **Standard**.</span></span>
    - <span data-ttu-id="8ad6e-145">**アカウントの種類**: 必ず**Storage V2** を選択してください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-145">**Account kind**: You must select **StorageV2**.</span></span> <span data-ttu-id="8ad6e-146">**詳細オプション** ダイアログ ボックスに、**Data Lake ストレージ Gen2** オプションが表示されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-146">In the **Advanced options** dialog box, you will see the option, **Data Lake storage Gen2**.</span></span>

3. <span data-ttu-id="8ad6e-147">**詳細タブ**で、 **Data Lake storage Gen2** \> **階層の名前空間** を選択し、**有効化** を選択し ます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-147">On the **Advanced tab**, select **Data Lake storage Gen2** \> **Hierarchical namespaces**, and then select **Enabled**.</span></span> <span data-ttu-id="8ad6e-148">このオプションを無効にすると、Power BI データフローや AI Builder などのサービスを使用して Finance and Operations アプリが書き込んだデータを使用できなくなる場合があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-148">If you disable this option, you may not be able to consume data that is written by Finance and Operations apps with services such as Power BI data flows and AI builder.</span></span>
4. <span data-ttu-id="8ad6e-149">**確認して作成** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-149">Select **Review and create**.</span></span> <span data-ttu-id="8ad6e-150">デプロイの完了後は、新たなリソースが Azure ポータルに表示されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-150">When the deployment is complete, the new resource will be shown in the Azure portal.</span></span>
5. <span data-ttu-id="8ad6e-151">作成したストレージ アカウントから、次の情報をコピーして保持します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-151">Copy and keep the following information from the storage account that you created:</span></span>

    <span data-ttu-id="8ad6e-152">i.</span><span class="sxs-lookup"><span data-stu-id="8ad6e-152">i.</span></span> <span data-ttu-id="8ad6e-153">Azure portal で、作成したストレージ アカウントを選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-153">In the Azure portal, select the storage account you created.</span></span> <span data-ttu-id="8ad6e-154">ストレージ<a name="storageaccount"></a>アカウント名をコピーして保存し ます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-154">Copy and save the <a name="storageaccount"></a>storage account name.</span></span>
    
    <span data-ttu-id="8ad6e-155">ii.</span><span class="sxs-lookup"><span data-stu-id="8ad6e-155">ii.</span></span> <span data-ttu-id="8ad6e-156">左のナビゲーション ウィンドウで、**設定**\>**アクセスキー** を選択し、キー 1 またはキー 2 から**接続文字列**をコピーします。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-156">On the left navigation pane, select **Settings** \> **Access keys**, and copy the **Connection string** from Key 1 or Key 2.</span></span>
        

## <a name="create-a-key-vault-and-a-secret-that-contains-the-storage-account"></a><span data-ttu-id="8ad6e-157">キー コンテナーとストレージ<a name="createkeyvault"></a>アカウントを含むシークレットの作成</span><span class="sxs-lookup"><span data-stu-id="8ad6e-157"><a name="createkeyvault"></a>Create a key vault and a secret that contains the storage account</span></span>

<span data-ttu-id="8ad6e-158">キーボルトは、ストレージ アカウント名などの詳細情報を Finance and Operations アプリに共有する安全な手段です 。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-158">A key vault is a secure way to share details such as storage account name to your Finance and Operations apps.</span></span> <span data-ttu-id="8ad6e-159">キー コンテナーとシークレットを作成するには、次の手順を完了してください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-159">Complete the following steps to create a key vault and a secret.</span></span>

1. <span data-ttu-id="8ad6e-160">Azure portalで、**新しいリソースの作成** を選択し、**キー コンテナー** を検索して選択し ます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-160">In the Azure portal, select **Create a new resource** and then search for and select, **Key Vault**.</span></span>
2. <span data-ttu-id="8ad6e-161"> **場所** フィールドの、 **キー コンテナー** ダイアログ ボックスで、環境が存在するデータ センターを選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-161">In the **Create key vault** dialog box, in the **Location** field, select the datacenter where your environment is located.</span></span>
3. <span data-ttu-id="8ad6e-162">キー コンテナーの作成後は、一覧から選択し、左側のナビゲーション ウィンドウで **概要** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-162">After the key vault is created, select it from the list, and on the left navigation pane, select **Overview**.</span></span> 
4. <span data-ttu-id="8ad6e-163"><a name="dnsname"></a>**DNS名**フィールドに値を保存します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-163">Save the value in the <a name="dnsname"></a>**DNS name** field.</span></span> <span data-ttu-id="8ad6e-164">後に、この値を使用します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-164">You will need this value later.</span></span>
5. <span data-ttu-id="8ad6e-165">左のナビゲーション ウィンドウで、 **ソークレット** > **生成/インポート**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-165">In the left navigation pane, select **Secrets** > **Generate/Import**.</span></span>
6. <span data-ttu-id="8ad6e-166"> **シークレットを作成する** ダイアログ ボックスの  **アップロード オプション** フィールドで、 **手動** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-166">In the **Create a secret** dialog box, in the **Upload options** field, select **Manual**.</span></span>
7. <span data-ttu-id="8ad6e-167">シークレットの名前を入力します (例 : **storage-account-name**) 。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-167">Enter a name for the secret, for example **storage-account-name**.</span></span> <span data-ttu-id="8ad6e-168">この名前は後述の手順で使用するたま、名前をメモしておいてください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-168">Make a note of the name because you will have to provide it later.</span></span>
8. <span data-ttu-id="8ad6e-169">**値**フィールドに、前述の手順でで取得したストレージ アカウント名を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-169">In the **Value** field, enter the storage account name that you obtained in the previous procedure.</span></span>
9. <span data-ttu-id="8ad6e-170"> **有効化** を選択し、 **作成**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-170">Select **Enabled**, and then select **Create**.</span></span> <span data-ttu-id="8ad6e-171">シークレットが作成され、キー コンテナーに追加されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-171">The secret is created and added to the key vault.</span></span>

## <a name="create-an-application-in-azure-active-directory"></a><a name="createapplication"></a><span data-ttu-id="8ad6e-172">Azure Active Directory でアプリケーションを作成する</span><span class="sxs-lookup"><span data-stu-id="8ad6e-172">Create an application in Azure Active Directory</span></span>

1. <span data-ttu-id="8ad6e-173">Azure ポータルで、 **Azure Active Directory** を選択し、 **アプリケーションの登録**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-173">In the Azure portal, select **Azure Active Directory**, and then select **App registrations**.</span></span>
2. <span data-ttu-id="8ad6e-174"> **新しいアプリケーションの登録** を選択し、以下の情報を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-174">Select **New registration**, and enter the following information:</span></span> 

    -  <span data-ttu-id="8ad6e-175">**名前 :** アプリの名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-175">**Name:** Enter a name for the app.</span></span>
    -   <span data-ttu-id="8ad6e-176">**対応しているアカウントのタイプ** : 適切なオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-176">**Supported Account types**: Choose the appropriate option.</span></span>

3. <span data-ttu-id="8ad6e-177">アプリケーションの作成後は、これを選択し、<a name="appid"></a>アプリケーション (クライアント) IDをページの先頭に保存します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-177">After the application is created, select it and then copy and save the <a name="appid"></a>Application (client) ID at the top of the page.</span></span> <span data-ttu-id="8ad6e-178">これは後で必要になります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-178">You will need this later.</span></span>
4. <span data-ttu-id="8ad6e-179">左のナビゲーション ウィンドウで、**API のアクセス許可**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-179">On the left navigation pane, select **API permissions**.</span></span>
5. <span data-ttu-id="8ad6e-180">**アクセス許可の追加** を選択し、**API アクセス許可の要求** ダイアログ ボックスで、**Azure キー コンテナー** を選択し ます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-180">Select **Add a permission**, and in the **Request API permissions** dialog box, select **Azure Key vault**.</span></span>
6. <span data-ttu-id="8ad6e-181">**委任されたアクセス許可** を選択し 、**user_impersonation** を選択します。続いて**アクセス許可の追加**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-181">Select **Delegated permissions**, select **user_impersonation**, and then select **Add permissions**.</span></span>
7. <span data-ttu-id="8ad6e-182">左のナビゲーションウィンドウで、**証明書とシークレット** を選択し、 **新たなクライアント シークレット** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-182">On the left navigation pane, select **Certificates & secrets**, and then select **New client secret**.</span></span> 
8. <span data-ttu-id="8ad6e-183">**説明**フィールドに名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-183">In the **Description** field, enter a name.</span></span>
9. <span data-ttu-id="8ad6e-184">**有効期限** フィールドで、オプションを選択し、**追加** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-184">In the **Expires** field, select an option, and then select **Add**.</span></span> <span data-ttu-id="8ad6e-185">システムがシークレットを生成します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-185">The system will generate a secret.</span></span> <span data-ttu-id="8ad6e-186">表示されるシークレットは、1 - 2 分で削除されるため、シークレットを迅速にコピーしてください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-186">Immediately copy the secret to the clipboard, as it will disappear within one or two minutes.</span></span> <span data-ttu-id="8ad6e-187"><a name="secret"></a>後でキー コンテナーを設定する際に、このシークレットの値を入力する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-187">You will have to <a name="secret"></a>provide this secret value when you set up the key vault later.</span></span>

## <a name="add-secrets-to-the-key-vault"></a><a name="addsecrets"></a><span data-ttu-id="8ad6e-188">キー コンテナーにシークレットを追加する</span><span class="sxs-lookup"><span data-stu-id="8ad6e-188">Add secrets to the key vault</span></span>

<span data-ttu-id="8ad6e-189">キーコンテナーに3つのシークレットを作成し、前述の手順で保存した値を追加します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-189">You are going to create three secrets in the Key vault and then add the values saved from previous steps.</span></span> <span data-ttu-id="8ad6e-190">それぞれのシークレットに対して、前述の手順で保存したシークレット名を入力し、値を入力する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-190">For each of the secrets, you will need to provide a secret name and provide the value you saved from earlier steps.</span></span>

| <a name="suggest"></a><span data-ttu-id="8ad6e-191">**推奨されるシークレット名**</span><span class="sxs-lookup"><span data-stu-id="8ad6e-191">**Suggested secret name**</span></span> | <span data-ttu-id="8ad6e-192">**シークレット値 (前述の手順で保存した値)**</span><span class="sxs-lookup"><span data-stu-id="8ad6e-192">**Secret value (what you saved earlier)**</span></span>                                |
|---------------------------|---------------------------------------------------------------------------|
| <span data-ttu-id="8ad6e-193">アプリ ID</span><span class="sxs-lookup"><span data-stu-id="8ad6e-193">app-id</span></span>                    | <span data-ttu-id="8ad6e-194">[作成済みの](#appid)アプリケーション オブジェクトの ID。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-194">The ID of the application [created earlier](#appid).</span></span>                             |
| <span data-ttu-id="8ad6e-195">アプリのシークレット</span><span class="sxs-lookup"><span data-stu-id="8ad6e-195">app-secret</span></span>                | <span data-ttu-id="8ad6e-196">前述の手順で入力した[クライアント シークレット](#secret)です。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-196">The [client secret](#secret) specified earlier.</span></span>                                 |
| <span data-ttu-id="8ad6e-197">storage-account-name</span><span class="sxs-lookup"><span data-stu-id="8ad6e-197">storage-account-name</span></span>      | <span data-ttu-id="8ad6e-198">上記手順で作成した[ストレージアカウントの名前](#storageaccount)です。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-198">The name of the [storage account](#storageaccount) created earlier.</span></span> |

<span data-ttu-id="8ad6e-199">それぞれのシークレットごとに 1 回ずつ、以下の手順を 3 回実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-199">You will need to complete the following steps three times, once for each secret.</span></span>

1. <span data-ttu-id="8ad6e-200">Azure portalで、上記手順で作成したキー コンテナーに移動し、左側のナビゲーション ウィンドウで **シークレット** を選択し ます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-200">In the Azure portal, go to the key vault you created earlier and on the left navigation pane, select **Secrets**.</span></span>
2. <span data-ttu-id="8ad6e-201">**生成/インポート**を選択し、**シークレットの作成**ダイアログ ボックスの、 **アップロード オプション** フィールドで**手動**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-201">Select **Generate/Import**, and in the **Create a secret** dialog box, in the **Upload options** field, select **Manual**.</span></span>
3. <span data-ttu-id="8ad6e-202">シークレットの名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-202">Enter a name for the secret.</span></span> <span data-ttu-id="8ad6e-203">このセクション冒頭の「推奨される名前」の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-203">See the table in the introduction of this section for suggested names.</span></span>
4. <span data-ttu-id="8ad6e-204">**値**フィールドに、対応するシークレットの値をコピーして貼り付け ます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-204">Copy and paste the corresponding secret value in the **Value** field.</span></span>
6. <span data-ttu-id="8ad6e-205">**有効** を選択し、**作成**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-205">Select **Enabled**, and then select **Create**.</span></span> 

<span data-ttu-id="8ad6e-206">シークレットの一覧に作成されたシークレットが表示されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-206">You will notice the secret created in the list of secrets.</span></span>

## <a name="authorize-the-application-to-read-secrets-in-the-key-vault"></a><a name="authorize"></a><span data-ttu-id="8ad6e-207">キー コンテナーのシークレットを読み取るためにアプリケーションを許可する</span><span class="sxs-lookup"><span data-stu-id="8ad6e-207">Authorize the application to read secrets in the key vault</span></span>

1. <span data-ttu-id="8ad6e-208">**Azure ポータルl**で、作成済のキー コンテナーを開きます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-208">In **Azure portal**, open the key vault that you created earlier.</span></span>
2. <span data-ttu-id="8ad6e-209">左の [ナビゲート] ページで、**アクセス ポリシー > 新規ポリシーの追加** を選択して、新規ポリシーを作成します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-209">On the left navigation page, select **Access policies > Add Access Policy** to create a new policy.</span></span> 
3. <span data-ttu-id="8ad6e-210">**アクセスポリシーの追加**  ダイアログの **プリンシパルの選択** フィールドで、前の手順で作成した [アプリケーションの名前](#appid)を検索します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-210">On the **Add access policy** dialog, in the **Select principal** field, search for the [name of the application](#appid) you created earlier.</span></span>
4. <span data-ttu-id="8ad6e-211">プリンシパルの一覧でアプリケーションを見つけたら、このアプリケーションを選択し、**選択** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-211">When you find your application in the list of principals, select the application, and then click **Select**.</span></span>
5. <span data-ttu-id="8ad6e-212">**キーのアクセス許可**と**シークレットのアクセス許可** フィールドで、**取得** と **リスト**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-212">In the **Key permissions** and **Secret permissions** fields, select **Get** and **List**.</span></span>  
6. <span data-ttu-id="8ad6e-213">**アクセスポリシーの追加** ダイアログ ボックスで、**追加**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-213">In the **Add access policy** dialog box, select **Add**.</span></span>
7. <span data-ttu-id="8ad6e-214">左のナビゲート ウィンドウ、**アクセス ポリシー > 新規ポリシーの追加** を選択して、新規ポリシーを作成します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-214">On the left navigation pane, select **Access policies > Add Access Policy** to create a new policy.</span></span> 
8. <span data-ttu-id="8ad6e-215">**アクセスポリシーの追加** ダイアログの **プリンシパルの選択** フィールドで、**Microsoft Dynamics ERP マイクロサービス**を検索して選択し、**選択** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-215">On the **Add access policy** dialog, in the **Select principal** field, locate and select the application, **Microsoft Dynamics ERP Microservices**, and then click **Select**.</span></span> 

> [!NOTE]
> <span data-ttu-id="8ad6e-216">**Microsoft Dynamics ERP マイクロサービス**が見つからない場合は、このドキュメントの後半の[トラブルシューティング セクション](#troubleshooting)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-216">If you can't find **Microsoft Dynamics ERP Microservices**, see the [troubleshooting section](#troubleshooting) at the end of this document.</span></span>

9. <span data-ttu-id="8ad6e-217">**キーのアクセス許可**と**シークレットのアクセス許可** フィールドで、**取得** と **リスト**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-217">In the **Key permissions**  and **Secret permissions** fields, select **Get** and **List**.</span></span>  
10. <span data-ttu-id="8ad6e-218">**アクセスポリシー** ダイアログ ボックスで、**追加**を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-218">In the **Access policy** dialog, select **Add**.</span></span>

<span data-ttu-id="8ad6e-219">以下のように、キー コンテナーへのアクセス権を持つ2つのアプリケーションが表示されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-219">You should see two applications with access to your key vault as shown below.</span></span>

| <span data-ttu-id="8ad6e-220">応募</span><span class="sxs-lookup"><span data-stu-id="8ad6e-220">Application</span></span>                                                   | <span data-ttu-id="8ad6e-221">キーのアクセス許可</span><span class="sxs-lookup"><span data-stu-id="8ad6e-221">Key permissions</span></span> | <span data-ttu-id="8ad6e-222">シークレットのアクセス許可</span><span class="sxs-lookup"><span data-stu-id="8ad6e-222">Secret permissions</span></span> |
|---------------------------------------------------------------|-----------------|--------------------|
| <span data-ttu-id="8ad6e-223">作成した[新しいアプリケーション](#appid)の表示名</span><span class="sxs-lookup"><span data-stu-id="8ad6e-223">Display name of the [new application](#appid) you created</span></span>  | <span data-ttu-id="8ad6e-224">取得、リスト表示</span><span class="sxs-lookup"><span data-stu-id="8ad6e-224">Get, List</span></span>       | <span data-ttu-id="8ad6e-225">取得、リスト表示</span><span class="sxs-lookup"><span data-stu-id="8ad6e-225">Get, List</span></span>          |
| <span data-ttu-id="8ad6e-226">Microsoft Dynamics ERP マイクロサービス</span><span class="sxs-lookup"><span data-stu-id="8ad6e-226">Microsoft Dynamics ERP Microservices</span></span>                          | <span data-ttu-id="8ad6e-227">取得、リスト表示</span><span class="sxs-lookup"><span data-stu-id="8ad6e-227">Get, List</span></span>       | <span data-ttu-id="8ad6e-228">取得、リスト表示</span><span class="sxs-lookup"><span data-stu-id="8ad6e-228">Get, List</span></span>          |

11.  <span data-ttu-id="8ad6e-229">**保存** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-229">Select **Save**.</span></span>

## <a name="grant-access-control-roles-to-applications"></a><a name="grantaccess"></a><span data-ttu-id="8ad6e-230">アプリケーションにアクセス制御ロールを付与する</span><span class="sxs-lookup"><span data-stu-id="8ad6e-230">Grant access control roles to applications</span></span> 

<span data-ttu-id="8ad6e-231">アプリケーションにストレージ アカウントの読み取り、書き込みのアクセス許可を付与する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-231">You need to grant your application permissions to read and write to the storage account.</span></span> <span data-ttu-id="8ad6e-232">これらのアクセス許可は、Azure AD のロールを使用して付与されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-232">These permissions are granted by using Roles in Azure AD.</span></span>

1. <span data-ttu-id="8ad6e-233">**Azure ポータルl**で、作成済のストレージ アカウントを開きます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-233">In **Azure portal**, open the storage account that you created earlier.</span></span>
2. <span data-ttu-id="8ad6e-234">左側のナビゲーション ウィンドウで、**アクセス制御 (IAM)** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-234">Select **Access Control (IAM)** in the left navigation.</span></span> 
3. <span data-ttu-id="8ad6e-235">**アクセス制御** ページで、**ロールの割り当て** タブを選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-235">On the **Access control** page, select the **Role assignments** tab.</span></span>
4. <span data-ttu-id="8ad6e-236">ページの上部の**追加** を選択し、**ロール割り当ての追加** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-236">Select **Add** at the top of the page, and then select **Add role assignment**.</span></span>
5. <span data-ttu-id="8ad6e-237">**ロール割り当ての追加**ダイアログで、**ロール** フィールドを選択し、**所有者** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-237">In the **Add role assignment** dialog, select the **Role** field, and then select **Owner**.</span></span>

> [!NOTE]
> <span data-ttu-id="8ad6e-238">フィールド対する変更、**Azure AD ユーザー、グループ、サービス プリンシパル**への**アクセス権の割り当て**は行わないでください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-238">Don't make any changes to the fields, **Assign access to** and **Azure AD user, group, or service principal**.</span></span>

6. <span data-ttu-id="8ad6e-239">**選択**フィールドで、前述の手順で登録したアプリケーションを選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-239">In the **Select** field, select the application that you registered earlier.</span></span>
7. <span data-ttu-id="8ad6e-240">**保存** を選択します</span><span class="sxs-lookup"><span data-stu-id="8ad6e-240">Select **Save**</span></span>
8. <span data-ttu-id="8ad6e-241">手順 4-7 を繰り返して、以下の表に記載した残りのロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-241">Add the remaining roles shown in the following table by repeating steps 4 - 7.</span></span>

|   <span data-ttu-id="8ad6e-242">選択するアプリケーション</span><span class="sxs-lookup"><span data-stu-id="8ad6e-242">Application to be selected</span></span>     |     <span data-ttu-id="8ad6e-243">割り当てられるロール</span><span class="sxs-lookup"><span data-stu-id="8ad6e-243">Role to be assigned</span></span>     |
|----------------------------------|-----------------------------|
| <span data-ttu-id="8ad6e-244">既に作成した[アプリケーション](#appid)</span><span class="sxs-lookup"><span data-stu-id="8ad6e-244">[Your application](#appid) you created earlier</span></span> | <span data-ttu-id="8ad6e-245">所有者</span><span class="sxs-lookup"><span data-stu-id="8ad6e-245">Owner</span></span>                       |
| <span data-ttu-id="8ad6e-246">既に作成した[アプリケーション](#appid)</span><span class="sxs-lookup"><span data-stu-id="8ad6e-246">[Your application](#appid) you created earlier</span></span> | <span data-ttu-id="8ad6e-247">貢献者</span><span class="sxs-lookup"><span data-stu-id="8ad6e-247">Contributor</span></span>                 |
| <span data-ttu-id="8ad6e-248">既に作成した[アプリケーション](#appid)</span><span class="sxs-lookup"><span data-stu-id="8ad6e-248">[Your application](#appid) you created earlier</span></span> | <span data-ttu-id="8ad6e-249">ストレージ アカウントの共同作成者</span><span class="sxs-lookup"><span data-stu-id="8ad6e-249">Storage account contributor</span></span> |
| <span data-ttu-id="8ad6e-250">既に作成した[アプリケーション](#appid)</span><span class="sxs-lookup"><span data-stu-id="8ad6e-250">[Your application](#appid) you created earlier</span></span> | <span data-ttu-id="8ad6e-251">ストレージ BLOB データの所有者</span><span class="sxs-lookup"><span data-stu-id="8ad6e-251">Storage blob data owner</span></span>     |
| <span data-ttu-id="8ad6e-252">AI Builder の承認サービス</span><span class="sxs-lookup"><span data-stu-id="8ad6e-252">AI builder authorization service</span></span> | <span data-ttu-id="8ad6e-253">ストレージ BLOB データの読み取り権限を持つユーザー</span><span class="sxs-lookup"><span data-stu-id="8ad6e-253">Storage blob data reader</span></span>    |

## <a name="install-the-export-to-data-lake-add-in-in-lcs"></a><a name="installaddin"></a><span data-ttu-id="8ad6e-254">LCS の Data Lake アドインへにエクスポート機能をインストールする</span><span class="sxs-lookup"><span data-stu-id="8ad6e-254">Install the Export to Data Lake add-in in LCS</span></span> 

<span data-ttu-id="8ad6e-255">Finance and Operations アプリから Data Lake にデータをエクスポートするには、LCS の **Data Lake エクスポートする**アドインをインストールする必要があり ます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-255">Before you can export data to your Data lake from your Finance and Operations apps, you must install the **Export to Data Lake** add-in in LCS.</span></span> <span data-ttu-id="8ad6e-256">このタスクを完了するには、使用する環境の LCS 環境管理者である必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-256">To complete this task, you must be an environment administrator in LCS for the environment that you want to use.</span></span>

<span data-ttu-id="8ad6e-257">これを開始する前に、次の情報を確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-257">You need the following information before you start.</span></span> <span data-ttu-id="8ad6e-258">作業の開始前に、情報を手元に保管しておいてください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-258">Keep the information handy before you begin.</span></span>

| <span data-ttu-id="8ad6e-259">**Data lake アドインへのエクスポートに必要な情報**</span><span class="sxs-lookup"><span data-stu-id="8ad6e-259">**Information you need for Export to Data lake add-in**</span></span>   | <span data-ttu-id="8ad6e-260">**どこにあるか**</span><span class="sxs-lookup"><span data-stu-id="8ad6e-260">**Where can you find it**</span></span>                                                                                                                                                                                                |
|-----------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8ad6e-261">ご利用の Azure AD テナント ID</span><span class="sxs-lookup"><span data-stu-id="8ad6e-261">Your environment Azure AD Tenant ID</span></span>                            | <span data-ttu-id="8ad6e-262">Azure AD テナント ID は Azure ポータルで確認できます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-262">Your Azure AD tenant ID in the Azure portal.</span></span> <span data-ttu-id="8ad6e-263">**Azure ポータル** にログインし、**Azure Active Directory**  サービスを開きます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-263">Sign in to the **Azure portal** and open the **Azure Active Directory** service.</span></span> <span data-ttu-id="8ad6e-264">**プロパティ** ページを開き、**ディレクトリ ID** フィールドの値をコピーします。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-264">Open the **Properties** page and copy the value in the **Directory ID** field.</span></span> |
| <span data-ttu-id="8ad6e-265">キー コンテナーの DNS 名</span><span class="sxs-lookup"><span data-stu-id="8ad6e-265">DNS name of your key vault</span></span>                                | <span data-ttu-id="8ad6e-266">この名前は、あらかじめ保存しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-266">This name should have been previously saved.</span></span> <span data-ttu-id="8ad6e-267">キー コンテナーの [DNS 名](#dnsname) を入力します</span><span class="sxs-lookup"><span data-stu-id="8ad6e-267">Enter the [DNS name](#dnsname) of your key vault</span></span>                                                                                                               |
| <span data-ttu-id="8ad6e-268">ストレージ アカウントの名前を含むシークレット</span><span class="sxs-lookup"><span data-stu-id="8ad6e-268">The secret that contains the name of your storage account</span></span> |  <span data-ttu-id="8ad6e-269">提示された名前を使用した場合は、**storage-account-name**を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-269">If you used the suggested name, enter **storage-account-name**.</span></span> <span data-ttu-id="8ad6e-270">これを使用していない場合は、定義した[シークレット名](#suggest)を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-270">If not, enter the [secret name](#suggest) you defined.</span></span>                                                                                                                                                                                                                         |
| <span data-ttu-id="8ad6e-271">アプリケーション ID を含むシークレット</span><span class="sxs-lookup"><span data-stu-id="8ad6e-271">Secret that contains the Application ID</span></span>                   |  <span data-ttu-id="8ad6e-272">定時された名前を使用した場合は、**app id** を入力してください。これを使用していない場合は、定義した[シークレット名](#suggest)を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-272">If you used the suggested name, enter **app-id**. If not, enter the [secret name](#suggest) you defined.</span></span>                                                                                       |
| <span data-ttu-id="8ad6e-273">アプリケーションのシークレットを含むシークレット</span><span class="sxs-lookup"><span data-stu-id="8ad6e-273">Secret that contains the Application secret</span></span>               |  <span data-ttu-id="8ad6e-274">提示された名前を使用した場合は、**app-secret**を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-274">If you used the suggested name, enter **app-secret**.</span></span> <span data-ttu-id="8ad6e-275">これを使用していない場合は、定義した[シークレット名](#suggest)を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-275">If not, enter the [secret name](#suggest) you defined.</span></span>                                                                                             |

1.  <span data-ttu-id="8ad6e-276">[LCS](https://lcs.dynamics.com) にログインし、ご利用の環境に移動します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-276">Sign in to [LCS](https://lcs.dynamics.com) and navigate to your environment.</span></span>
2.  <span data-ttu-id="8ad6e-277">**環境**ページで、**環境アドイン**タブを選択します。**Data lakeの エクスポート**が一覧に表示される場合は、Data Lake アドインが既にインストールされているため、この手順の残りの部分は省略することができます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-277">On the **Environment** page, select the **Environment add-ins** tab. If **Export Data Lake** appears in the list, the Data Lake add-in is already installed, and you can skip the rest of this procedure.</span></span> <span data-ttu-id="8ad6e-278">これに該当しない場合は、残りの手順を実行してください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-278">Otherwise, complete the remaining steps.</span></span>
3.  <span data-ttu-id="8ad6e-279">**インストールするアドイン**を選択し、ダイアログ ボックスで、一覧から **Data lake にエクスポート** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-279">Select **Install a new add-in**, and in the dialog box, select **Export to Data lake** in the list.</span></span> <span data-ttu-id="8ad6e-280">**Data lake にエクスポート** が表示されない場合は、この機能がご利用の環境で使用できない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-280">If **Export to data lake** isn't listed, the feature might not be available for your environment at this time.</span></span>
4.  <span data-ttu-id="8ad6e-281">**設定のアドイン** ダイアログ ボックスで、必要な情報を入力します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-281">In the **Setup add-in** dialog box, provide the required information.</span></span> <span data-ttu-id="8ad6e-282">質問に答えるには、既にストレージ アカウントが作成されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-282">To answer the questions, you must already have a storage account.</span></span> <span data-ttu-id="8ad6e-283">ストレージ アカウントをまだ持っていない場合は、作成するか、管理者にアカウントの作成代行を依頼してください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-283">If you don't already have a storage account, create one, or ask your admin to create one on your behalf.</span></span>
5.  <span data-ttu-id="8ad6e-284">チェック ボックスをオンにしてサービス条件を承認し、**インストール** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-284">Accept the terms of the offer by selecting the check box, and then select **Install**.</span></span>

<span data-ttu-id="8ad6e-285">システムが、ご利用の環境に Data Lake をインストールし構成します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-285">The system installs and configures the data lake for the environment.</span></span> <span data-ttu-id="8ad6e-286">インストールと構成が完了すると、 **環境** のページに **Azure Data Lake** の一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-286">After installation and configuration are complete, you should see **Azure Data Lake** listed on the **Environment** page.</span></span>

## <a name="troubleshooting-tips"></a><a name="troubleshooting"></a><span data-ttu-id="8ad6e-287">ヒントのトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="8ad6e-287">Troubleshooting tips</span></span>

### <a name="cant-find-microsoft-dynamics-erp-microservices-or-ai-builder-authorization-service"></a><span data-ttu-id="8ad6e-288">Microsoft Dynamics ERP マイクロサービス、または AI Builder の承認サービスが見つかりません</span><span class="sxs-lookup"><span data-stu-id="8ad6e-288">Can’t find Microsoft Dynamics ERP Microservices or AI Builder Authorization Service</span></span>

<span data-ttu-id="8ad6e-289">これらの手順を実行するには、**Azure Active Directory テナント管理者**の権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-289">You will need **Azure Active Directory tenant administrator** rights to perform these steps.</span></span>

1. <span data-ttu-id="8ad6e-290">Azure portal を起動し、Azure Active Directory にアクセスします。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-290">Launch the Azure portal and go to the Azure Active Directory.</span></span>
2. <span data-ttu-id="8ad6e-291">左のメニューバーで、**管理** \> **エンタープライズ アプリケーション** を選択し、以下のアプリケーションを検索します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-291">On the left menu bar, select **Manage** \> **Enterprise Applications** and search for the following applications.</span></span>

| <span data-ttu-id="8ad6e-292">**アプリケーション**</span><span class="sxs-lookup"><span data-stu-id="8ad6e-292">**Application**</span></span>                          | <span data-ttu-id="8ad6e-293">**アプリ ID**</span><span class="sxs-lookup"><span data-stu-id="8ad6e-293">**App ID**</span></span>                           |
|------------------------------------------|--------------------------------------|
| <span data-ttu-id="8ad6e-294">Microsoft Dynamics ERP マイクロサービス</span><span class="sxs-lookup"><span data-stu-id="8ad6e-294">Microsoft Dynamics ERP Microservices</span></span>     | <span data-ttu-id="8ad6e-295">0cdb527f-a8d1-4bf8-9436-b352c68682b2</span><span class="sxs-lookup"><span data-stu-id="8ad6e-295">0cdb527f-a8d1-4bf8-9436-b352c68682b2</span></span> |
| <span data-ttu-id="8ad6e-296">Microsoft Dynamics ERP マイクロサービス CDS</span><span class="sxs-lookup"><span data-stu-id="8ad6e-296">Microsoft Dynamics ERP Microservices CDS</span></span> | <span data-ttu-id="8ad6e-297">703e2651-d3fc-48f5-942c-74274233dba8</span><span class="sxs-lookup"><span data-stu-id="8ad6e-297">703e2651-d3fc-48f5-942c-74274233dba8</span></span> |
| <span data-ttu-id="8ad6e-298">AI Builder の承認サービス</span><span class="sxs-lookup"><span data-stu-id="8ad6e-298">AI Builder Authorization Service</span></span>         | <span data-ttu-id="8ad6e-299">ad40333e-9910-4b61-b281-e3aeeb8c3ef3</span><span class="sxs-lookup"><span data-stu-id="8ad6e-299">ad40333e-9910-4b61-b281-e3aeeb8c3ef3</span></span> |


<span data-ttu-id="8ad6e-300">上記のアプリケーションが見つからない場合は、手順 3-7 を完了してください。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-300">If you are unable to find any of the above applications, complete steps 3 - 7:</span></span>

3. <span data-ttu-id="8ad6e-301">ローカルマシンで、[スタート] メニューを開き、 **PowerShell** を検索します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-301">On your local machine, open the Start menu and search for **PowerShell**.</span></span>
4. <span data-ttu-id="8ad6e-302">**Windows PowerShell** を右クリックし、**管理者として実行** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-302">Right-click **Windows PowerShell** and select **Run as administrator**.</span></span>
5. <span data-ttu-id="8ad6e-303">以下のコマンドを実行して **AzureAD** モジュールをインストールします。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-303">Run the following command to install **AzureAD** module:</span></span>

     >   <span data-ttu-id="8ad6e-304">*Install-Module -Name AzureAD*</span><span class="sxs-lookup"><span data-stu-id="8ad6e-304">*Install-Module -Name AzureAD*</span></span>

  - <span data-ttu-id="8ad6e-305">NuGet プロバイダーを続行する必要がある場合は、**Y** を選択してインストールします。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-305">If NuGet provider is required to continue, select **Y** to install it.</span></span>
  - <span data-ttu-id="8ad6e-306">**信頼できないリポジトリ**のメッセージが表示された場合は、**Y** を選択して続行します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-306">If an **Untrusted repository** message appears, select **Y** to continue.</span></span>

6. <span data-ttu-id="8ad6e-307">追加の必要がある各アプリケーションについては、以下のコマンドを実行してアプリケーションを Azure Active Directory に追加します。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-307">For each application that needs to be added, run the following commands to add the application to the Azure Active Directory.</span></span>

    > <span data-ttu-id="8ad6e-308">Connect-AzureAD New-AzureADServicePrincipal –AppId \<AppId\></span><span class="sxs-lookup"><span data-stu-id="8ad6e-308">Connect-AzureAD New-AzureADServicePrincipal –AppId \<AppId\></span></span>

7. <span data-ttu-id="8ad6e-309">メッセージが表示されたら、管理者で Azure Active Directory にログインします。</span><span class="sxs-lookup"><span data-stu-id="8ad6e-309">Sign in as the Azure Active Directory administrator when prompted.</span></span>
