---
title: 環境計画
description: このトピックでは、プロジェクトの環境を計画するときに考慮する必要があるさまざまな側面の概要を示します。
author: petryo
manager: AnnBe
ms.date: 02/01/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: IT Pro
ms.reviewer: sericks
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: petryo
ms.search.validFrom: 2018-08-01
ms.dyn365.ops.version: Finance and Operations
ms.openlocfilehash: 64117b0a9a51d6f3da34369edecac367d0a0750f
ms.sourcegitcommit: cf0ddcaa3e13b088ba5f6cff5e21a1480e175803
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/01/2021
ms.locfileid: "5097037"
---
# <a name="environment-planning"></a><span data-ttu-id="c0835-103">環境計画</span><span class="sxs-lookup"><span data-stu-id="c0835-103">Environment planning</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="c0835-104">このトピックでは、プロジェクトの環境を計画するときに考慮する必要があるさまざまな側面の概要を示します。</span><span class="sxs-lookup"><span data-stu-id="c0835-104">This topic provides an overview of various aspects that you must consider while you plan for your project's environment.</span></span> <span data-ttu-id="c0835-105">正常なクラウド実装を保証するには、プロジェクトの早い段階で環境について話し合い、計画することは重要です。</span><span class="sxs-lookup"><span data-stu-id="c0835-105">To help guarantee a successful cloud implementation, it's important that you discuss and plan your environment early in the project.</span></span>

## <a name="environment-planning-overview"></a><span data-ttu-id="c0835-106">環境計画の概要</span><span class="sxs-lookup"><span data-stu-id="c0835-106">Environment planning overview</span></span>

<span data-ttu-id="c0835-107">最初に、いくつかの重要な概念を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="c0835-107">To begin, here are a few important concepts:</span></span>

- <span data-ttu-id="c0835-108">**環境の目的**: 環境が存在する理由。</span><span class="sxs-lookup"><span data-stu-id="c0835-108">**Environment purpose** – The reasons why the environment exists.</span></span> <span data-ttu-id="c0835-109">例には、開発、システムのテスト、ユーザー受け入れテスト (UAT)、および工程が含まれます。</span><span class="sxs-lookup"><span data-stu-id="c0835-109">Examples include development, system testing, user acceptance testing (UAT), and operations.</span></span>
- <span data-ttu-id="c0835-110">**環境トポロジ**: 環境と目的の構成。</span><span class="sxs-lookup"><span data-stu-id="c0835-110">**Environment topology** – The composition of the environment and the purpose.</span></span> <span data-ttu-id="c0835-111">例としては、第 1 層環境の **開発** および **ビルドとテスト** があります。</span><span class="sxs-lookup"><span data-stu-id="c0835-111">Examples include **Develop** and **Build and Test** for Tier-1 environments.</span></span>
- <span data-ttu-id="c0835-112">**環境層**: 環境のタイプやカテゴリ。</span><span class="sxs-lookup"><span data-stu-id="c0835-112">**Environment tier** – The type or category of the environment.</span></span> <span data-ttu-id="c0835-113">例には、第 1 層環境と第 2 層環境が含まれます。</span><span class="sxs-lookup"><span data-stu-id="c0835-113">Examples include Tier-1 environments and Tier-2 environments.</span></span>

<span data-ttu-id="c0835-114">さまざまな環境と層の詳細については、[クラウド配置の概要](../../dev-itpro/deployment/cloud-deployment-overview.md)を参照し、[Dynamics 365 の価格設定](https://dynamics.microsoft.com/pricing/)から最新の *Microsoft Dynamics 365 ライセンス ガイド* をダウンロードしてください。</span><span class="sxs-lookup"><span data-stu-id="c0835-114">For more information, about the various environments and tiers, see [Cloud deployment overview](../../dev-itpro/deployment/cloud-deployment-overview.md) and download the latest *Microsoft Dynamics 365 Licensing Guide* from [Dynamics 365 pricing](https://dynamics.microsoft.com/pricing/).</span></span>

### <a name="environment-types"></a><span data-ttu-id="c0835-115">環境タイプ</span><span class="sxs-lookup"><span data-stu-id="c0835-115">Environment types</span></span>

<span data-ttu-id="c0835-116">プロジェクトでは次のタイプの環境を使用できます。</span><span class="sxs-lookup"><span data-stu-id="c0835-116">You can use the following environment types for your project:</span></span>

- <span data-ttu-id="c0835-117">**標準**: この環境は、標準的なオファーに含まれ、Microsoft サブスクリプションで Microsoft が管理します。</span><span class="sxs-lookup"><span data-stu-id="c0835-117">**Standard** – This environment is included in the standard offer and is managed by Microsoft in a Microsoft subscription.</span></span> <span data-ttu-id="c0835-118">標準環境には、製造環境、レベル 2 スタンダード承認テスト環境が含まれます。</span><span class="sxs-lookup"><span data-stu-id="c0835-118">Standard environments include the production environment and a Tier-2 Standard Acceptance Test environment.</span></span>
- <span data-ttu-id="c0835-119">**アドオン**: アドオン環境は、標準的なオファーに加えて、顧客が購入している Microsoft 管理のサブスクリプションにあります。</span><span class="sxs-lookup"><span data-stu-id="c0835-119">**Add-on** – The add-on environments are in a Microsoft-managed subscription that the customer has purchased in addition to the standard offer.</span></span> <span data-ttu-id="c0835-120">たとえば、アドオン環境は、パフォーマンスをテストするための追加のレベル 4 環境の場合があります。</span><span class="sxs-lookup"><span data-stu-id="c0835-120">For example, an add-on environment might be an additional Tier-4 environment for performance testing.</span></span>
- <span data-ttu-id="c0835-121">**クラウド ホスト** - クラウド ホスト環境は、Microsoft Azure サブスクリプションの顧客またはパートナーである顧客またはパートナーによって管理されている追加の環境です。</span><span class="sxs-lookup"><span data-stu-id="c0835-121">**Cloud-hosted** – Cloud-hosted environments are additional environments that are managed by the customer or partner in a customer or partner Microsoft Azure subscription.</span></span> <span data-ttu-id="c0835-122">クラウド ホスト環境には、レベル 1 デモ環境を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="c0835-122">A cloud-hosted environment can include a Tier-1 demo environment.</span></span>
- <span data-ttu-id="c0835-123">**環境イメージ (VHD)** - これら追加のレベル 1 環境は、[Microsoft Dynamics Lifecycle Services (LCS)](https://lcs.dynamics.com/v2) からダウンロードできる仮想ハード ディスク (VHD) を使用してオンプレミスにホストされます。</span><span class="sxs-lookup"><span data-stu-id="c0835-123">**Environment image (VHD)** – These additional Tier-1 environments are hosted on-premises by using a virtual hard disk (VHD) that can be downloaded from [Microsoft Dynamics Lifecycle Services (LCS)](https://lcs.dynamics.com/v2).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c0835-124">*顧客またはパートナーの Azure サブスクリプション* では、評価および開発目的でのみ、顧客またはパートナーが独自の Azure サブスクリプションをもって環境をそのサブスクリプションに配置します。</span><span class="sxs-lookup"><span data-stu-id="c0835-124">In a *customer or partner Azure subscription*, the customer or partner brings its own Azure subscription, and deploys environments to that subscription for evaluation and development purposes only.</span></span> <span data-ttu-id="c0835-125">顧客やパートナーは、Azure サブスクリプションに展開されるリソースに対して支払います。</span><span class="sxs-lookup"><span data-stu-id="c0835-125">The customer or partner pays for the resources that are deployed to its Azure subscription.</span></span> <span data-ttu-id="c0835-126">顧客やパートナーの支払額は、Azure 価格リストに基づきます。</span><span class="sxs-lookup"><span data-stu-id="c0835-126">The amount that the customer or partner pays is based on the Azure price list.</span></span> <span data-ttu-id="c0835-127">対照的に、*Microsoft サブスクリプション* では、顧客がライセンスを購入し、Microsoft によって管理されている Azure サブスクリプションに環境を配置することができます。</span><span class="sxs-lookup"><span data-stu-id="c0835-127">By contrast, in a *Microsoft subscription*, the customer purchases licenses that allow the customer to deploy environments to an Azure subscription that is managed by Microsoft.</span></span> <span data-ttu-id="c0835-128">したがって、顧客に別個の Azure の請求はありません。</span><span class="sxs-lookup"><span data-stu-id="c0835-128">Therefore, the customer has no separate Azure billing.</span></span>

### <a name="tier-1-vs-tier-2-and-higher"></a><span data-ttu-id="c0835-129">レベル 1 とレベル 2 以上の比較</span><span class="sxs-lookup"><span data-stu-id="c0835-129">Tier-1 vs. Tier-2 and higher</span></span>

| <span data-ttu-id="c0835-130">レベル 1</span><span class="sxs-lookup"><span data-stu-id="c0835-130">Tier-1</span></span> | <span data-ttu-id="c0835-131">レベル 2 以上</span><span class="sxs-lookup"><span data-stu-id="c0835-131">Tier-2 and higher</span></span> |
|--------|-------------------|
| <span data-ttu-id="c0835-132">シングルボックス環境</span><span class="sxs-lookup"><span data-stu-id="c0835-132">Single-box environment</span></span> | <span data-ttu-id="c0835-133">マルチボックス環境</span><span class="sxs-lookup"><span data-stu-id="c0835-133">Multi-box environment</span></span> |
| <span data-ttu-id="c0835-134">すべてのコンポーネントは、同じサーバーにインストールされます。</span><span class="sxs-lookup"><span data-stu-id="c0835-134">All components are installed on the same server.</span></span> <span data-ttu-id="c0835-135">これらのコンポーネントには、アプリケーション オブジェクト サーバー (AOS)、データベース、Dynamics 365 Commerce、および Management Reporter が含まれます。</span><span class="sxs-lookup"><span data-stu-id="c0835-135">These components include Application Object Server (AOS), the database, Dynamics 365 Commerce, and Management Reporter.</span></span> | <span data-ttu-id="c0835-136">コンポーネントは、複数のサーバーにインストールされます。</span><span class="sxs-lookup"><span data-stu-id="c0835-136">Components are installed on multiple servers.</span></span> |
| <span data-ttu-id="c0835-137">Microsoft SQL Server で使用</span><span class="sxs-lookup"><span data-stu-id="c0835-137">Microsoft SQL Server is used.</span></span> | <span data-ttu-id="c0835-138">[Azure SQL データベース](https://docs.microsoft.com/azure/sql-database/)が使用されます。</span><span class="sxs-lookup"><span data-stu-id="c0835-138">[Azure SQL Database](https://docs.microsoft.com/azure/sql-database/) is used.</span></span> |
| <span data-ttu-id="c0835-139">この構造は本稼働環境の構造によって異なり、これは開発チームの効率性を最大限に高めることを意図しています。</span><span class="sxs-lookup"><span data-stu-id="c0835-139">The architecture differs from the architecture of the production environment to maximize efficiency and cost of the development team.</span></span> | <span data-ttu-id="c0835-140">アーキテクチャは、実稼働環境のアーキテクチャと同じです。ただし、このような環境はサイズがさまざまで、災害復旧に対応していません。</span><span class="sxs-lookup"><span data-stu-id="c0835-140">The architecture is the same as the architecture of the production environment, even though this type of environment has a different sizing and isn't enabled for disaster recovery.</span></span> |
| <span data-ttu-id="c0835-141">この環境は、クラウドホストとして使用することも、環境イメージ (VHD) として配置することもできます。</span><span class="sxs-lookup"><span data-stu-id="c0835-141">The environment can be cloud-hosted, or it can be deployed as an environment image (VHD).</span></span> | <span data-ttu-id="c0835-142">環境は、標準環境またはアドオン環境としてのみ展開することができます。</span><span class="sxs-lookup"><span data-stu-id="c0835-142">The environment can be deployed only as a standard environment or an add-on environment.</span></span> <span data-ttu-id="c0835-143">クラウド ホストにすることはできません。</span><span class="sxs-lookup"><span data-stu-id="c0835-143">It can't be cloud-hosted.</span></span> |
| <span data-ttu-id="c0835-144">この環境は、UAT またはパフォーマンス テストに適していません。</span><span class="sxs-lookup"><span data-stu-id="c0835-144">The environment isn't suitable for UAT or performance testing.</span></span> | <span data-ttu-id="c0835-145">この環境は、UAT およびパフォーマンス テストに適しています。</span><span class="sxs-lookup"><span data-stu-id="c0835-145">The environment is suitable for UAT and performance testing.</span></span> |

## <a name="standard-cloud-offer"></a><span data-ttu-id="c0835-146">標準クラウド サービス</span><span class="sxs-lookup"><span data-stu-id="c0835-146">Standard cloud offer</span></span>

<span data-ttu-id="c0835-147">標準クラウド サービスには、2 つの環境が含まれます。</span><span class="sxs-lookup"><span data-stu-id="c0835-147">The standard cloud offer includes two environments:</span></span>

- <span data-ttu-id="c0835-148">**レベル 2 環境: 標準承認テスト**: サブスクリプションの期間用に標準承認テスト (UAT) インスタンスが 1 つ用意されています。</span><span class="sxs-lookup"><span data-stu-id="c0835-148">**Tier-2 environment: Standard Acceptance Testing** – One Standard Acceptance Testing (UAT) instance is provided for the duration of the subscription.</span></span> <span data-ttu-id="c0835-149">このインスタンスは、ユーザーが UAT、統合テスト、トレーニングに使用できる非運用環境マルチボックス インスタンスです。</span><span class="sxs-lookup"><span data-stu-id="c0835-149">This instance is a non-production multi-box instance that customers can use for UAT, integration testing, and training.</span></span> <span data-ttu-id="c0835-150">追加のサンドボックス/ステージング インスタンスは、オプションのアドオンとして別途購入することができます。</span><span class="sxs-lookup"><span data-stu-id="c0835-150">Additional sandbox/staging instances can be purchased separately as an optional add-on.</span></span>
- <span data-ttu-id="c0835-151">**実稼働環境**: テナントあたり 1 つの生産インスタンスが用意されています。</span><span class="sxs-lookup"><span data-stu-id="c0835-151">**Production environment** – One production instance is provided per tenant.</span></span> <span data-ttu-id="c0835-152">生産マルチ ボックス インスタンスには、障害復旧と高可用性が含まれています。</span><span class="sxs-lookup"><span data-stu-id="c0835-152">The production multi-box instance includes disaster recovery and high availability.</span></span> <span data-ttu-id="c0835-153">実装が運用段階に近づき、Microsoft Dynamics Lifecycle Services (LCS) 手法の必要なアクティビティと正常な運用評価が完了するとプロビジョニングされます。</span><span class="sxs-lookup"><span data-stu-id="c0835-153">It will be provisioned when the implementation approaches the Operate phase, after the required activities in the Microsoft Dynamics Lifecycle Services (LCS) methodology and a successful go-live assessment are completed.</span></span> <span data-ttu-id="c0835-154">また、いくらかのファイル ストレージとデータベース ストレージはサービスに含まれます。</span><span class="sxs-lookup"><span data-stu-id="c0835-154">Additionally, some file storage and database storage are included in the offer:</span></span>

    - <span data-ttu-id="c0835-155">**ファイル ストレージ:** すべての顧客は、ファイルおよびバイナリ データ用のファイル/Azure blob クラウド ストレージの一定の量を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="c0835-155">**File storage:** Every customer receives a certain amount of file/Azure blob cloud storage for files and binary data.</span></span> <span data-ttu-id="c0835-156">その他のファイル/blob ストレージは購入することができます。</span><span class="sxs-lookup"><span data-stu-id="c0835-156">Additional file/blob storage can be purchased.</span></span>
    - <span data-ttu-id="c0835-157">**データベース ストレージ:** すべてのサブスクリプションには、追加料金なしで顧客ごとに一定の量の Azure SQL データベース ストレージが含まれています。</span><span class="sxs-lookup"><span data-stu-id="c0835-157">**Database storage:** Every subscription includes a certain amount of Azure SQL Database storage per customer at no additional charge.</span></span> <span data-ttu-id="c0835-158">ユーザーとデバイス サービス ライセンスの数が増えると、組織には無償で追加のストレージ容量が提供されます。</span><span class="sxs-lookup"><span data-stu-id="c0835-158">Additional storage capacity is provided at no charge as an organization increases the number of user and device service licenses.</span></span> <span data-ttu-id="c0835-159">さまざまな環境とさまざまな種類のストレージ、および現在含まれている無料のファイルとストレージ容量の詳細については、[Dynamics 365 の価格設定](https://dynamics.microsoft.com/pricing/)から最新の *Microsoft Dynamics 365 ライセンス ガイド* をダウンロードしてください。</span><span class="sxs-lookup"><span data-stu-id="c0835-159">For more information about the various environments and the various types of storage, as well as the currently included free file and storage capacity, download the latest *Microsoft Dynamics 365 Licensing Guide* from [Dynamics 365 pricing](https://dynamics.microsoft.com/pricing/).</span></span>
    
> [!IMPORTANT]
> <span data-ttu-id="c0835-160">Microsoft は、サービスとデータの高い可用性をお約束するとともに、Dynamics 365 ソフトウェアライセンス契約 (SLA) の一環として、サービスのダウンタイムを最小限に抑えることを約束しています。</span><span class="sxs-lookup"><span data-stu-id="c0835-160">Microsoft promises service and data high availability as well as minimal servicing downtime guarantees as part of the Dynamics 365 software license agreement (SLA) for production environments.</span></span> <span data-ttu-id="c0835-161">SLA の対象は、非本番環境には適用されません。</span><span class="sxs-lookup"><span data-stu-id="c0835-161">The SLA goals do not apply to non-production environments.</span></span>

### <a name="provisioning-of-standard-environments"></a><span data-ttu-id="c0835-162">標準環境のプロビジョニング</span><span class="sxs-lookup"><span data-stu-id="c0835-162">Provisioning of standard environments</span></span>

<span data-ttu-id="c0835-163">さまざまな時点で、標準環境がプロビジョニングされます。</span><span class="sxs-lookup"><span data-stu-id="c0835-163">The standard environments are provisioned at different times.</span></span> <span data-ttu-id="c0835-164">次の表は、標準クラウド サービスにおける環境の推奨されるタイミングを示しています。</span><span class="sxs-lookup"><span data-stu-id="c0835-164">The following table shows the suggested timing for the environments in the standard cloud offer.</span></span>

| <span data-ttu-id="c0835-165">環境</span><span class="sxs-lookup"><span data-stu-id="c0835-165">Environment</span></span>                     | <span data-ttu-id="c0835-166">プロビジョニングが行われるタイミング</span><span class="sxs-lookup"><span data-stu-id="c0835-166">When does provisioning occur?</span></span> | <span data-ttu-id="c0835-167">セルフサービスかどうか</span><span class="sxs-lookup"><span data-stu-id="c0835-167">Is it self-service?</span></span> |
|---------------------------------|-------------------------------|---------------------|
| <span data-ttu-id="c0835-168">レベル 2 標準承認テスト</span><span class="sxs-lookup"><span data-stu-id="c0835-168">Tier-2 Standard Acceptance Test</span></span> | <span data-ttu-id="c0835-169">LCS でプロジェクトのオンボードが完了した直後</span><span class="sxs-lookup"><span data-stu-id="c0835-169">Immediately after project onboarding has been completed in LCS</span></span> | <span data-ttu-id="c0835-170">あり</span><span class="sxs-lookup"><span data-stu-id="c0835-170">Yes</span></span> |
| <span data-ttu-id="c0835-171">実稼働</span><span class="sxs-lookup"><span data-stu-id="c0835-171">Production</span></span>                      | <span data-ttu-id="c0835-172">生産システムの準備完了時</span><span class="sxs-lookup"><span data-stu-id="c0835-172">At production system readiness</span></span> | <span data-ttu-id="c0835-173">Go-Live 評価は、LCS で運用配置要求をコンフィギュレーションする前に完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c0835-173">A Go-live assessment must be completed prior to configuring the production deployment request in LCS.</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="c0835-174">常に、**名前のない** アカウントを使用して環境を配置します。</span><span class="sxs-lookup"><span data-stu-id="c0835-174">Always deploy environments by using an **unnamed** account.</span></span> <span data-ttu-id="c0835-175">このアカウントは、`dynadmin@customer.com` または `dynadmin@customer.onmicrosoft.com` など、顧客ドメインからのアカウントである必要があります。</span><span class="sxs-lookup"><span data-stu-id="c0835-175">This account must be from the customer domain, such as `dynadmin@customer.com` or `dynadmin@customer.onmicrosoft.com`.</span></span> <span data-ttu-id="c0835-176">すべての環境で、同じ専用の環境の管理者アカウントを使用することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c0835-176">We strongly recommend using the same dedicated environment admin account on all environments.</span></span>  <span data-ttu-id="c0835-177">ISV ライセンスは、環境の配置に使用されるアカウントのドメインに対して発行される必要があり、異なる環境で `dynadmin@customer.com` および `dynadmin@customer.onmicrosoft.com` 両方を使用すると、ISV ライセンスに問題が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="c0835-177">ISV licenses must be issued to the domain of the account used for environment deployment, therefore using both `dynadmin@customer.com` and `dynadmin@customer.onmicrosoft.com` on different environments can lead to problems with ISV licenses.</span></span> 

### <a name="production-system-readiness"></a><span data-ttu-id="c0835-178">生産システムの準備</span><span class="sxs-lookup"><span data-stu-id="c0835-178">Production system readiness</span></span>

<span data-ttu-id="c0835-179">プロジェクトで初回 Go-Live の準備ができたら、実稼働環境を展開することができます。</span><span class="sxs-lookup"><span data-stu-id="c0835-179">The production environment can be deployed when the project is ready for the initial go-live.</span></span> <span data-ttu-id="c0835-180">詳細については、「[Go-Live の準備](prepare-go-live.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c0835-180">For more information, see [Prepare for go-live](prepare-go-live.md).</span></span>

<span data-ttu-id="c0835-181">生産システムの準備には、次の条件が含まれますがこれに限定されません。</span><span class="sxs-lookup"><span data-stu-id="c0835-181">Production system readiness includes, but isn't limited to, the following conditions:</span></span>

- <span data-ttu-id="c0835-182">最新のサブスクリプション見積もりが有効化されます。これについては [Lifecycle Services (LCS) のサブスクリプション見積もりツール](../../dev-itpro/lifecycle-services/subscription-estimator.md) で解説されています。</span><span class="sxs-lookup"><span data-stu-id="c0835-182">An up-to-date subscription estimate is activated, as described in [Subscription estimator in Lifecycle Services (LCS)](../../dev-itpro/lifecycle-services/subscription-estimator.md).</span></span>
- <span data-ttu-id="c0835-183">コード、構成、およびデータの切替準備が整っている。</span><span class="sxs-lookup"><span data-stu-id="c0835-183">Code, configuration, and data are ready for cutover.</span></span>
- <span data-ttu-id="c0835-184">エンジニアリング プロセスが重要な修正プログラムを管理するために配置されている。</span><span class="sxs-lookup"><span data-stu-id="c0835-184">An engineering process is in place to manage critical fixes.</span></span>
- <span data-ttu-id="c0835-185">顧客は、ソリューションと UAT にサインオフしている。</span><span class="sxs-lookup"><span data-stu-id="c0835-185">The customer has signed off on the solution and UAT.</span></span>
- <span data-ttu-id="c0835-186">切替計画が設定されている。</span><span class="sxs-lookup"><span data-stu-id="c0835-186">A cutover plan is in place.</span></span>

<span data-ttu-id="c0835-187">顧客は、ソリューションをビルドするのではなく **運用** するために実稼働環境を使用する必要がある。</span><span class="sxs-lookup"><span data-stu-id="c0835-187">Customers should use the production environment to **operate** the solution, not build it.</span></span> <span data-ttu-id="c0835-188">実稼働環境が業務の遂行に合ったサイズになっている。</span><span class="sxs-lookup"><span data-stu-id="c0835-188">The production environment is sized to run your business.</span></span> <span data-ttu-id="c0835-189">サイズ決定は、サブスクリプションの見積とパフォーマンス テストの診断データに基づいて行われます。</span><span class="sxs-lookup"><span data-stu-id="c0835-189">The sizing is based on the subscription estimate and diagnostic data from performance testing.</span></span> <span data-ttu-id="c0835-190">展開後、顧客は実稼働環境でモック切替および最終的な一連の検証を行うことができ、その必要があります。</span><span class="sxs-lookup"><span data-stu-id="c0835-190">After deployment, customers can and should do a mock cutover and a final round of validation on the production environment.</span></span> <span data-ttu-id="c0835-191">最終切替の前に、顧客はポイント イン タイム復元を要求し、実稼働環境をクリーンなスナップショット (最大 28 日前) に復元できます。</span><span class="sxs-lookup"><span data-stu-id="c0835-191">Before the final cutover, customers can request a Point in time restore to restore the production environment to a clean snapshot (maximum 28 days in the past).</span></span>

<span data-ttu-id="c0835-192">実稼働環境の適切なデータ センターを選択するには、ビジネスが運営されている地理的な場所から待機時間を検討してください。</span><span class="sxs-lookup"><span data-stu-id="c0835-192">To select the appropriate data center for the production environment, consider the latency from the geographic locations where the business operates.</span></span> <span data-ttu-id="c0835-193">[PsPing](https://docs.microsoft.com/sysinternals/downloads/psping) や [Azure Speed Test](https://azurespeedtest.azurewebsites.net/) などのツールを使って、Azure データ センターの待機時間をテストします。</span><span class="sxs-lookup"><span data-stu-id="c0835-193">Use tools such as [PsPing](https://docs.microsoft.com/sysinternals/downloads/psping) and [Azure Speed Test](https://azurespeedtest.azurewebsites.net/) to test latency to Azure data centers.</span></span>

<span data-ttu-id="c0835-194">次の図は、環境計画プロセスを示しています。</span><span class="sxs-lookup"><span data-stu-id="c0835-194">The following illustrations shows the environment planning process.</span></span>

![環境計画プロセス フロー](./media/environment-planning-1-process-flow.png)

## <a name="additional-environments"></a><span data-ttu-id="c0835-196">追加の環境</span><span class="sxs-lookup"><span data-stu-id="c0835-196">Additional environments</span></span>

<span data-ttu-id="c0835-197">追加の環境は、アドオンとして購入するか、クラウド ホスト環境として展開することができます。</span><span class="sxs-lookup"><span data-stu-id="c0835-197">Additional environments can be purchased as add-ons, or they can be deployed as cloud-hosted environments.</span></span> <span data-ttu-id="c0835-198">次の図は、実装の複雑さに基づく標準および追加の環境の *サンプル* 概要を示しています。</span><span class="sxs-lookup"><span data-stu-id="c0835-198">The following illustration shows a *sample* overview of standard and additional environments, based on the complexity of the implementation.</span></span>

![環境の目的と複雑度](./media/environment-planning-2-purpose-complexity-matrix.png)

> [!IMPORTANT]
> <span data-ttu-id="c0835-200">常に、`dynadmin@customer.com` などの **名前のない** アカウントを使用して環境を配置します。</span><span class="sxs-lookup"><span data-stu-id="c0835-200">Always deploy environments by using an **unnamed** account, such as `dynadmin@customer.com`.</span></span> <span data-ttu-id="c0835-201">環境に、ステータスと保守を担当する所有者を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="c0835-201">Assign the environments an owner who will be responsible for their status and maintenance.</span></span> <span data-ttu-id="c0835-202">すべての環境で、同じ専用の環境の管理者アカウントを使用することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c0835-202">We strongly recommend using the same dedicated environment admin account on all environments.</span></span> <span data-ttu-id="c0835-203">Go-Live 後、新しいリリースで作業する場合、生産をサポートするために追加のレベル 2 以上の環境を取得します。</span><span class="sxs-lookup"><span data-stu-id="c0835-203">After go-live, if you plan to work on new releases, get an additional Tier-2 or higher environment to support production.</span></span>

### <a name="deployment-considerations-for-development-environments"></a><span data-ttu-id="c0835-204">開発環境での配置に関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="c0835-204">Deployment considerations for development environments</span></span>

<span data-ttu-id="c0835-205">開発環境には、次の 2 つの配置オプションがあります。</span><span class="sxs-lookup"><span data-stu-id="c0835-205">For development environments, there are two deployment options:</span></span>

- <span data-ttu-id="c0835-206">**クラウド ホスト**: 環境は、顧客/パートナーにより顧客/パートナーの Azure サブスクリプションで管理されます。</span><span class="sxs-lookup"><span data-stu-id="c0835-206">**Cloud-hosted** – The environments are managed by the customer/partner in a customer/partner Azure subscription.</span></span>
- <span data-ttu-id="c0835-207">**環境イメージ (ダウンロード可能な VHD)**: 環境はオンプレミスにホストされます。</span><span class="sxs-lookup"><span data-stu-id="c0835-207">**Environment image (downloadable VHD)** – The environments are hosted on-premises.</span></span>

> [!NOTE]
> <span data-ttu-id="c0835-208">開発者ごとに 1 つの開発環境を割り当てる必要があります。</span><span class="sxs-lookup"><span data-stu-id="c0835-208">You must allocate one development environment per developer.</span></span>

<span data-ttu-id="c0835-209">次の表では、展開オプションを比較します。</span><span class="sxs-lookup"><span data-stu-id="c0835-209">The following table compares the deployment options.</span></span>

| <span data-ttu-id="c0835-210">能力</span><span class="sxs-lookup"><span data-stu-id="c0835-210">Capability</span></span>                            | <span data-ttu-id="c0835-211">クラウド ホスト</span><span class="sxs-lookup"><span data-stu-id="c0835-211">Cloud-hosted</span></span> | <span data-ttu-id="c0835-212">環境イメージ</span><span class="sxs-lookup"><span data-stu-id="c0835-212">Environment image</span></span> |
|---------------------------------------|--------------|-------------------|
| <span data-ttu-id="c0835-213">パブリック URL</span><span class="sxs-lookup"><span data-stu-id="c0835-213">Public URL</span></span>                            | <span data-ttu-id="c0835-214">✓</span><span class="sxs-lookup"><span data-stu-id="c0835-214">✓</span></span> | <span data-ttu-id="c0835-215">サポートされていません</span><span class="sxs-lookup"><span data-stu-id="c0835-215">Not supported</span></span> |
| <span data-ttu-id="c0835-216">統合開発</span><span class="sxs-lookup"><span data-stu-id="c0835-216">Integration development</span></span>               | <span data-ttu-id="c0835-217">✓</span><span class="sxs-lookup"><span data-stu-id="c0835-217">✓</span></span> | <span data-ttu-id="c0835-218">追加の設定が必要です。</span><span class="sxs-lookup"><span data-stu-id="c0835-218">Extra setup is required.</span></span> <span data-ttu-id="c0835-219">(たとえば、管理者ユーザー プロビジョニング ツールを実行します。)</span><span class="sxs-lookup"><span data-stu-id="c0835-219">(For example, run the admin user provisioning tool.)</span></span> |
| <span data-ttu-id="c0835-220">Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="c0835-220">Azure DevOps</span></span>                          | <span data-ttu-id="c0835-221">✓</span><span class="sxs-lookup"><span data-stu-id="c0835-221">✓</span></span> | <span data-ttu-id="c0835-222">追加の設定が必要です。</span><span class="sxs-lookup"><span data-stu-id="c0835-222">Extra setup is required.</span></span> <span data-ttu-id="c0835-223">(たとえば、コンピューター名を変更します。)</span><span class="sxs-lookup"><span data-stu-id="c0835-223">(For example, rename the computer.)</span></span> |
| <span data-ttu-id="c0835-224">LCS から配置可能なパッケージを適用</span><span class="sxs-lookup"><span data-stu-id="c0835-224">Applying deployable packages from LCS</span></span> | <span data-ttu-id="c0835-225">自動化</span><span class="sxs-lookup"><span data-stu-id="c0835-225">Automated</span></span> | <span data-ttu-id="c0835-226">コマンド ライン Runbook (AxUpdateInstaller.exe ツール)</span><span class="sxs-lookup"><span data-stu-id="c0835-226">Command line runbooks (AxUpdateInstaller.exe tool)</span></span> |
| <span data-ttu-id="c0835-227">LCS からデータ パッケージを展開</span><span class="sxs-lookup"><span data-stu-id="c0835-227">Deploying data packages from LCS</span></span>      | <span data-ttu-id="c0835-228">✓</span><span class="sxs-lookup"><span data-stu-id="c0835-228">✓</span></span> | <span data-ttu-id="c0835-229">サポートされていません</span><span class="sxs-lookup"><span data-stu-id="c0835-229">Not supported</span></span> |
| <span data-ttu-id="c0835-230">管理</span><span class="sxs-lookup"><span data-stu-id="c0835-230">Maintenance</span></span>                           | <span data-ttu-id="c0835-231">お客様/パートナーが管理</span><span class="sxs-lookup"><span data-stu-id="c0835-231">Managed by the customer/partner</span></span> | <span data-ttu-id="c0835-232">お客様/パートナーが管理</span><span class="sxs-lookup"><span data-stu-id="c0835-232">Managed by the customer/partner</span></span> |
| <span data-ttu-id="c0835-233">コスト モデル</span><span class="sxs-lookup"><span data-stu-id="c0835-233">Cost model</span></span>                            | <span data-ttu-id="c0835-234">従量課金制 (環境が 8 時間の場合、8 時間分お支払い。)。</span><span class="sxs-lookup"><span data-stu-id="c0835-234">Pay as you go (If the environment is on for eight hours, you pay for eight hours.).</span></span> <span data-ttu-id="c0835-235">コストは、選択した仮想マシン サイズ、ディスク サイズと設定、およびプレミアム ストレージ設定に基づきます</span><span class="sxs-lookup"><span data-stu-id="c0835-235">Cost is based on selected Virtual Machine size, disk size and settings, and premium storage settings</span></span> | <span data-ttu-id="c0835-236">ハードウェア関連</span><span class="sxs-lookup"><span data-stu-id="c0835-236">Hardware-related</span></span> |
| <span data-ttu-id="c0835-237">制限</span><span class="sxs-lookup"><span data-stu-id="c0835-237">Limitations</span></span>                           | <span data-ttu-id="c0835-238">なし。</span><span class="sxs-lookup"><span data-stu-id="c0835-238">None.</span></span> <span data-ttu-id="c0835-239">VM スペック、ディスク サイズ、およびストレージの設定を完全に制御できます。</span><span class="sxs-lookup"><span data-stu-id="c0835-239">You have full control over VM specs, disk size and storage settings.</span></span> <span data-ttu-id="c0835-240">VM への管理者アクセスがあります。</span><span class="sxs-lookup"><span data-stu-id="c0835-240">You have administrator access to the VM.</span></span> | <span data-ttu-id="c0835-241">None</span><span class="sxs-lookup"><span data-stu-id="c0835-241">None</span></span> |

### <a name="selecting-the-correct-tier-2-or-higher-environment"></a><span data-ttu-id="c0835-242">正しいレベル 2 以上の環境の選択</span><span class="sxs-lookup"><span data-stu-id="c0835-242">Selecting the correct Tier-2 or higher environment</span></span>

<span data-ttu-id="c0835-243">環境の用途によって、正しいレベル 2 以上の環境を選択することが重要です。</span><span class="sxs-lookup"><span data-stu-id="c0835-243">It's important that you select the correct Tier-2 or higher environment, depending on the purpose of the environment.</span></span> <span data-ttu-id="c0835-244">次の図に記載されているガイダンスは、*ベースライン* です。</span><span class="sxs-lookup"><span data-stu-id="c0835-244">The guidance that is provided in the following illustration is a *baseline*.</span></span> <span data-ttu-id="c0835-245">特定のビジネス シナリオと、ユーザーの種類、複雑さ、およびボリュームなどの要因に基づいて、実装パートナーと協力してこのガイドを調整してください。</span><span class="sxs-lookup"><span data-stu-id="c0835-245">You must work with your implementation partner to adjust this guidance, based on your specific business scenarios and factors such as type of users, complexity, and volumes.</span></span>

![環境レベル](./media/environment-planning-3-environment-tiers.png)

<span data-ttu-id="c0835-247">サブスクリプション見積が有効になると、次の図に示すように、LCS で 1 時間あたりのトランザクション明細行を表示できます。</span><span class="sxs-lookup"><span data-stu-id="c0835-247">After a subscription estimate is activated, you can view transaction lines per hour in LCS, as shown in the following illustration.</span></span>

![サブスクリプション見積](./media/environment-planning-4-subscription-estimate.png)

### <a name="purchasing-add-on-environments"></a><span data-ttu-id="c0835-249">アドオン環境の購入</span><span class="sxs-lookup"><span data-stu-id="c0835-249">Purchasing add-on environments</span></span>

<span data-ttu-id="c0835-250">アドオン環境を購入する場合、クラウド ソリューション プロバイダーまたはライセンス サービス再販業者に相談することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c0835-250">If you want to purchase add-on environments, we recommend that you work closely with your Cloud Solution Provider or License Service Reseller.</span></span> <span data-ttu-id="c0835-251">発注してから環境が展開されるまでに発生する可能性のあるリード タイムを考慮してください。</span><span class="sxs-lookup"><span data-stu-id="c0835-251">Consider the potential lead time that occurs between the time when the order is placed and the time when the environment is deployed.</span></span>

<span data-ttu-id="c0835-252">次の図では、アドオン環境を購入するためのプロセスを表示します。</span><span class="sxs-lookup"><span data-stu-id="c0835-252">The following illustration shows the process for purchasing add-on environments.</span></span>

![アドオンの調達](./media/environment-planning-5-procuring-add-on.png)

> [!IMPORTANT]
> <span data-ttu-id="c0835-254">マイクロソフト ボリューム ライセンス契約をお持ちの場合、Microsoft の製品およびサービス契約 (MPSA) ライセンス プログラムを通じて月間ベースでアドオン環境にサブスクライブできます。</span><span class="sxs-lookup"><span data-stu-id="c0835-254">If you have a Microsoft Volume Licensing agreement, you can subscribe to add-on environments on a monthly basis through the Microsoft Products and Services Agreement (MPSA) licensing program.</span></span> <span data-ttu-id="c0835-255">または、Microsoft クラウド ソリューション プロバイダー (CSP) プログラムからサブスクライブすることができます。</span><span class="sxs-lookup"><span data-stu-id="c0835-255">Alternatively, you can subscribe to them through the Microsoft Cloud Solution Provider (CSP) program.</span></span> <span data-ttu-id="c0835-256">さまざまな環境と層の詳細については、[Dynamics 365 の価格設定](https://dynamics.microsoft.com/pricing/)から最新の *Microsoft Dynamics 365 ライセンス ガイド* をダウンロードしてください。</span><span class="sxs-lookup"><span data-stu-id="c0835-256">For more information about the various environments and tiers, download the latest *Microsoft Dynamics 365 Licensing Guide* from [Dynamics 365 pricing](https://dynamics.microsoft.com/pricing/).</span></span>

## <a name="environments-plan"></a><span data-ttu-id="c0835-257">環境計画</span><span class="sxs-lookup"><span data-stu-id="c0835-257">Environments plan</span></span>

<span data-ttu-id="c0835-258">実装の早い段階で環境の計画を作成します。</span><span class="sxs-lookup"><span data-stu-id="c0835-258">Create the environments plan early in your implementation.</span></span>

1. <span data-ttu-id="c0835-259">環境を必要とするプロジェクトの活動を識別します。</span><span class="sxs-lookup"><span data-stu-id="c0835-259">Identify the project activities that require an environment.</span></span> <span data-ttu-id="c0835-260">これらの活動には、カスタマイズの開発や高品質の構成データの保守が含まれますが、これだけではありません。</span><span class="sxs-lookup"><span data-stu-id="c0835-260">These activities include, but aren't limited to, development of customizations and maintenance of golden configuration data.</span></span>
2. <span data-ttu-id="c0835-261">*アクティビティ ライフライクル* を見分けて *環境ライフサイクル* を見分けます。</span><span class="sxs-lookup"><span data-stu-id="c0835-261">Determine the *activities lifecycle* to determine the *environments lifecycle*.</span></span> <span data-ttu-id="c0835-262">この手順で確認する必要がある質問の例を示します。</span><span class="sxs-lookup"><span data-stu-id="c0835-262">Here are some examples of the questions that you should ask during this step:</span></span>

    - <span data-ttu-id="c0835-263">環境に必要なタイミングと長さはどれくらいか?</span><span class="sxs-lookup"><span data-stu-id="c0835-263">When and for how long do you require the environment?</span></span>
    - <span data-ttu-id="c0835-264">Go-Live の後に環境が必要か?</span><span class="sxs-lookup"><span data-stu-id="c0835-264">Do you require the environment before or after go-live?</span></span>

3. <span data-ttu-id="c0835-265">必要な環境の種類とトポロジを決定します。</span><span class="sxs-lookup"><span data-stu-id="c0835-265">Determine the type and topology of the required environments.</span></span>
4. <span data-ttu-id="c0835-266">マトリックスに必要な環境の一覧をまとめています。</span><span class="sxs-lookup"><span data-stu-id="c0835-266">Summarize the list of required environments in a matrix.</span></span>

<span data-ttu-id="c0835-267">環境を識別した後は、アプリケーション ライフサイクル管理 (ALM) フローを構造化するために環境計画を使用できます。</span><span class="sxs-lookup"><span data-stu-id="c0835-267">After you've identified the environments, the environments plan can be used to structure the Application Lifecycle Management (ALM) flows.</span></span> <span data-ttu-id="c0835-268">たとえば、環境計画が完成したら、環境間でのコードおよびデータの構築と移動のためのフローを定義できます。</span><span class="sxs-lookup"><span data-stu-id="c0835-268">For example, after you finalize your environments plan, you can define the flows for building and moving the code and the data across environments.</span></span>
