---
title: 電子メールのコンフィギュレーションと送信
description: 電子メール サブシステムの動作は、管理者コンフィギュレーション、ユーザー コンフィギュレーション、およびユーザーの選択の組み合わせに影響されます。
author: jasongre
ms.date: 07/13/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: SysEmailParameters
audience: IT Pro
ms.reviewer: sericks
ms.custom: 268274
ms.assetid: 194ca8fd-5e20-4464-9c85-08d2b5ff63ca
ms.search.region: Global
ms.author: jasongre
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 0c2f66ef275518ca76000bf6e3cd15e14a713ec3
ms.sourcegitcommit: 1d8b0af5ea5f42916267e311e677d91bad8ad164
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/14/2022
ms.locfileid: "9146940"
---
# <a name="configure-and-send-email"></a>電子メールのコンフィギュレーションと送信

[!include [banner](../includes/banner.md)]

電子メール サブシステムの動作は、管理者コンフィギュレーション、ユーザー コンフィギュレーション、およびユーザーの選択の組み合わせに影響されます。 この記事では、関連情報を見つけやすくするために、管理者のセクションとユーザーのセクションに分かれています。

管理者とユーザーの両方が電子メールのサブシステムの動作を設定します。

## <a name="administrator-email-parameters-page"></a>[管理者] 電子メール パラメーター ページ 

### <a name="configuration-tab"></a>構成タブ
**メール パラメーター** ページで、**構成** タブの次の設定に注意して下さい。

| フィールド                 | 説明 |
|-----------------------|-------------|
| バッチ電子メール プロバイダー  | バッチ方式または非対話型のプロセスで送信される電子メールの送信に使用される電子メール プロバイダーを指定します。 Exchange プロバイダーは、バッチ プロセスに関連付けられているアカウントを使用します。 |
| 添付ファイル サイズの上限 | 電子メール サブシステム経由で送信できる 1 つの電子メールの最大サイズを指定します。 |

**メール履歴** セクションには 2 つの目的があります。 まず、**メール履歴** ページへのエントリ ポイントを提供し、管理者はすべての送信済みメールと、メール送信を防げたエラーを確認することができます。 次に、メール履歴を維持する期間を構成できます。 既定では、メール履歴は過去 30 日間保持されます。 この期間は、**メール履歴の保持日数** をゼロ以外の数字に変更することで調整できます。 値を **0** (ゼロ) に設定すると、既定数と既定の動作が使用されます。

バージョン 10.0.16 では、機能管理でご使用の環境で **電子メール調整** 機能がオンになっている場合、**電子メール調整** セクションが表示されます。 この機能により非対話型の電子メール プロバイダー (バッチ電子メール プロバイダーなど) は 1 分あたりの送信制限に従うことができます。 したがって、システムがプロバイダーが許可する数を超える電子メールを送信しようとした場合に、いくつかのエラーを防ぐのに役立ちます。 具体的に、1 分あたりの送信制限に達したために最初に電子メールを送信できない場合、電子メールの送信試行は最大 1 分間延期されます。 10 回の延期後、1 分あたりの送信制限に達した場合でも、システムは電子メールを送信しようとします。 Microsoft 365 電子メール プロバイダーの送信制限は、[Exchange Online 送信制限](/office365/servicedescriptions/exchange-online-service-description/exchange-online-limits#sending-limits)に応じて自動的に設定されます。 他のすべての電子メール プロバイダーについては、手動での構成が必要です。 **1 分あたりの電子メール送信制限** フィールドを **0** にリセットすることにより、プロバイダーから 1 分あたりの送信制限を削除できます。

### <a name="smtp-settings-tab"></a>SMTP 設定タブ
**電子メール パラメーター** ページの、**SMTP 設定** タブで、次の設定に注意してください。

#### <a name="server-information"></a>サーバー情報
<table>
<thead>  
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
  <tr>
    <td>送信メール サーバー</td>
    <td>目的の Simple Mail Transfer Protocol (SMTP) サーバーのホスト名。
      <ul>
        <li><a href="https://support.office.com/article/Outlook-settings-for-POP-and-IMAP-access-for-Office-365-for-business-or-Microsoft-Exchange-accounts-7fc677eb-2491-4cbc-8153-8e7113525f6c">Microsoft 365 製品</a> (*.onmicrosoft.com アカウントを含む) では、smtp.office365.com を使用します。 (<strong>設定</strong> &gt; <strong>メール</strong> &gt; <strong>POP および IMAP</strong>の outlook.office.com でこの設定を検索します。.)</li>
        <li>Outlook/Hotmail で smtp-mail.outlook.com を使用します。</li>
      </ul>
    </td>
  </tr>
    
  <tr>
    <td>SMTP ポート番号</td>
    <td>通常、セキュリティで保護して送信するためにポート番号は 587 に設定する必要があります。</td>
  </tr>

  <tr>
    <td>SSL が必要です</td>
    <td>安全なトランスポートをを使用するかを決定します。 これは通常、内部またはトラブルシューティングのシナリオを除き、<strong>はい</strong> です。</td>
  </tr>
</tbody>
</table>  
  

#### <a name="authentication"></a>認証

<table>
<thead>  
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
  <tr>
    <td>認証が必要です</td>
    <td>電子メールの送信にユーザー名とパスワードが必要かどうかを指定します。 </td>
  </tr>

  <tr>
    <td><strong>ユーザー名</strong>と<strong>パスワード</strong></td>
    <td>認証が必要な場合は、電子メールを送信する適切なメール アカウントを指定します。 すべてのユーザーは SMTP アカウントを指定し <strong> 送信者 </strong> および <strong> 代理送信 </strong> 許可をし、SMTP で送信する機能を有効にします。 送信者アクセス許可は、Microsoft 365 管理センター (portal.office.com/Admin) にて、<strong>ユーザー</strong> &gt; <strong>有効なユーザー</strong> &gt; <strong>ユーザー</strong> &gt; <strong>メールボックスのアクセス許可を編集</strong> &gt; <strong>このメールボックスから電子メールを送信する</strong>で構成することができます。 詳細については、「<a href="https://support.office.com/article/Enable-sending-email-from-another-user-s-mailbox-in-Office-365-2B828C5F-41AB-4904-97B9-3B63D8129C4E">Microsoft 365 で別のユーザーのメールボックスからの電子メールの送信を有効にする</a>」を参照してください。
    </td>
  </tr>
      
</tbody>

</table>

## <a name="administrator-email-distributor-batch-process"></a>[管理者] 電子メール配布バッチ処理

ユーザーの操作なしに、SMTP 経由でサーバーから直接送信される電子メールは、**電子メール ディストリビューター バッチ** プロセスによって送信されます。 電子メールのキューの処理には、そのバッチ処理を開始する必要があります。 プロセスを開始するには、**電子メール配布バッチ** ウィンドウ (**システム管理**&gt;**定期タスク**&gt;**電子メール処理**&gt;**バッチ**) を開いて、**バッチ処理** をオンにします。

為替プロバイダーを使用している場合、バッチ プロセス (通常は管理者) に関連付けられているユーザー アカウントが送信者になります。

## <a name="administrator-user-email"></a>[管理者] ユーザーの電子メール

各ユーザーの既定の **送信元** アドレスは、**ユーザー** ページの **電子メール** フィールドから取得されます (**システム管理** &gt; **ユーザー** &gt; **ユーザー**)。 管理者は必要に応じて、**オプション** ページの **送信者電子メール** フィールドを使用して、この既定の **送信元** を上書きできます。

## <a name="user-email-provider-selection-section-on-the-options-page"></a>[ユーザー] オプション ページの電子メール プロバイダーの選択セクション

**オプション** ページは、**設定 &gt; ユーザー オプション** から開くことができます。 **電子メール プロバイダーの選択** セクションは、**アカウント** タブにあります。

| フィールド             | 説明 |
|-------------------|-------------|
| 電子メール プロバイダー ID | ユーザーは、電子メールを送信するときに使用する電子メール プロバイダーを選択できます。 ここでオプションを選択することは、**どのように電子メール送信しますか** ダイアログ ボックスで **今後確認しない** をオンにするのと同じです。 空白のオプション **使用する電子メール プロバイダーの入力を求める** を選択すると、メールが送信されるときに **電子メールを送信する方法** ダイアログ ボックスが表示されます。 |
| 送信者の電子メール    | 管理者が電子メールの **ソース** フィールドでユーザーに電子メール アドレスの上書きを提供できるようにします。 既定では、ユーザー アカウントに関連付けられた電子メール エイリアスは新しい電子メールの **ソース** フィールドとして使用されますが、このユーザー オプションの電子メール アドレスによって上書きされます。 SMTP で電子メールを送信するとき、ユーザーは交換または SMTP サーバー上で構成された適切な **送信者** および **代理送信者** アクセス許可を持っている必要があります。<blockquote>[!NOTE] **Send As** および **Send On Behalf Of** 権限は、Microsoft 365 管理センター (portal.office.com/Admin) にて、**ユーザー** &gt; **有効なユーザー** &gt; **ユーザー** &gt; **メール ボックスのアクセス許可を編集** &gt; **このメールボックスから電子メールを送信する** で構成することができます。 詳細については、「[Microsoft 365 で別のユーザーのメールボックスからの電子メールの送信を有効にする](https://support.office.com/article/Enable-sending-email-from-another-user-s-mailbox-in-Office-365-2B828C5F-41AB-4904-97B9-3B63D8129C4E)」を参照してください。</blockquote> |

## <a name="user-how-would-you-like-to-send-email-dialog-box-optional"></a>[ユーザー] 電子メール ダイアログ ボックスをどのように送信しますか (省略可)

電子メールを送信するときは、**電子メールをどのように送信しますか** ダイアログ ボックスが表示され、それに電子メールを送信するために使用可能なオプションが一覧表示されます。

| フィールド                                                                  | 説明 |
|------------------------------------------------------------------------|-------------|
| Outlook などの電子メール アプリケーションを使用します                                      | 生成された電子メール (.eml) を持つを提供します。 |
| Exchange 電子メール サーバーを使用します                                              | テナントに関連付けられている Exchange Online サーバーを使用します。 **Exchange** メール プロバイダーは、現在、オンプレミス環境を含むパブリック クラウドの外部ではサポートされていません。 |
| システムの電子メール クライアントの使用 | **電子メール送信する** 構成ダイアログ ボックスを開いて、結果を電子メールで SMTP 経由で送信します。 |
| 今後このメッセージを表示しない                                                       | このフィールドが選択されていない場合は、次回に電子メールが送信されたときに最後に選択したオプションが使用され、ダイアログ ボックスが表示されません。 |

## <a name="user-send-email-dialog-box-optional"></a>[ユーザー] 電子メール ダイアログ ボックスを送信 (省略可)

**電子メール送信** ダイアログ ボックスが開き、送信される電子メールの内容を編集できます。 次のフィールドの一部は、このウィンドウであらかじめ設定されています。

| フィールド                                                     | 説明 |
|-----------------------------------------------------------|-------------|
| 自                                                      | **オプション** ページの **メール** フィールドから取得されます。 |
| **宛先**、**Cc**、**Bcc**、**件名**、および **本文** | 電子メールの送信を開始したプロセスによって指定された値が取得されます。 これらのフィールドは、必要に応じてユーザーが編集できます。 |
| 添付ファイル リスト                                          | 電子メールの送信を開始したプロセスによって指定されたファイルが添付される場合があります。 このリストは、必要に応じてユーザーが編集できます。 |

電子メールを送信する準備ができたら、**送信** ボタンを使用して SMTP 経由で電子メールが送信されます。

## <a name="usage-scenarios-to-verify-if-email-is-configured-correctly"></a>電子メールが正しく設定されているかどうかを確認するための使用シナリオ

### <a name="send-mail-via-a-local-mail-client"></a>ローカル メール クライアント経由で電子メールを送信

SysEmail フレームワークで有効になっている電子メール ワークフローでは、添付ファイルを含む電子メール メッセージ (.eml files) を生成できます。 これらのメッセージは Microsoft Outlook または他の電子メール クライアント経由で送信することができます。

1. Internet Explorer で、**売掛金勘定** &gt; **顧客** &gt; **すべての顧客** の順に移動します。
2. **US-008 Sparrow Retail** を選択します。
3. **回収** &gt; **顧客残高** &gt; **コレクション** の順にクリックし、**コレクション** ページを開きます。
4. **連絡** &gt; **電子メール** &gt; **連絡先に対する明細書** の順にクリックします。
5. ダイアログ ボックスで既定値を承諾する場合は、**OK** をクリックします。
6. メール オプションの使用を促すメッセージが表示された場合は、**再度確認しない** チェック ボックス (このオプションは **ユーザー オプション** ページから変更できます) をオフにし、**Outlook などの電子メール アプリケーションを使用** を選択し、**OK** をクリックします。
7. コンピューター上で Internet Explorer を使用している場合は、生成される電子メール (.eml) ファイルを開きます。 VM 上で Internet Explorer を使用している場合は、ファイルをコンピューターにコピーし、そのコンピュータでファイルを開きます。
8. **宛先** フィールドの電子メール アドレスと生成されたブック添付ファイルに注意します。

### <a name="send-mail-via-smtp"></a>SMTP 経由でメールを送信

SysEmail フレームワークを介して有効になっている電子メール ワークフローは、簡単な電子メール ダイアログ ボックスで作成し、Simple Mail Transfer Protocol (SMTP) 経由で送信することもできます。

1. **電子メール パラメーター** のページに移動します。
2. **SMTP 設定** をクリックします。
3. **送信メール サーバー** を要求された SMTP サーバーに設定します。

    - [Microsoft 365 製品](https://support.office.com/article/Outlook-settings-for-POP-and-IMAP-access-for-Office-365-for-business-or-Microsoft-Exchange-accounts-7fc677eb-2491-4cbc-8153-8e7113525f6c) (\*.onmicrosoft.com アカウントを含む) では、smtp.office365.com を使用します。 (**設定** &gt; **メール** &gt; **POP および IMAP** で outlook.office.com を通してこの設定を検索します。.)
    - Outlook/Hotmail で smtp-mail.outlook.com を使用します。

4. ユーザー名とパスワードを適切な電子メール アカウントとパスワードに設定します。
5. **SSLRequired** を有効のままにして、**SMTP ポート番号** は **587** に設定したままにします。
6. **保存** をクリックします。
7. Internet Explorer で、**売掛金勘定** &gt; **顧客** &gt; **すべての顧客** の順に移動します。
8. **US-008 Sparrow Retail** を選択します。
9. **回収** &gt; **顧客残高** &gt; **コレクション** の順にクリックし、**コレクション** ページを開きます。
10. **連絡** &gt; **電子メール** &gt; **連絡先に対する明細書** の順にクリックします。
11. ダイアログ ボックスで既定値を承諾する場合は、**OK** をクリックします。
12. メール オプションを使用するように求められたら、**Microsoft Dynamics 365 Finance 電子メール クライアントの使用** を選択し、**OK** をクリックします。
13. テスト メッセージを受信するには、**宛先アドレス** をメール アドレスに変更します。

    SMTP 設定で指定されたアカウントが、電子メール アカウントの **Send As** および **Send On Behalf Of** であることを確認します。 これを確実にするための最も簡単な方法は、電子メール アカウントを SMTP 設定で使用することです。

14. メッセージの件名および本文を入力します。
15. **送信** をクリックします。 メッセージは 1 〜 5 分で配信する必要があります。

## <a name="administrator-workflow-email-notifications"></a>[管理者] ワークフロー電子メール通知

ワークフロー電子メールのコンフィギュレーションは連携して動作する関連設定の集合です。

### <a name="workflow-email-notification-setup"></a>ワークフロー電子メール通知のセットアップ

1. 電子メール設定の確認:

    1. **システム管理** \> **設定** \> **電子メール** \> **電子メール パラメータ** の順に移動します。
    2. SMTP が有効であることを確認します。
    3. SMTP メール サーバーの設定を設定します。

2. 電子メールのバッチ処理が実行されていることを確認します。

    1. **システム管理** \> **定期処理のタスク** \> **電子メールの処理** \> **電子メール ディストリビューター バッチ** の順に移動します。
    2. **バッチ プロセス** オプションを有効にします。
    3. 必要に応じて、電子メール プロセスの再実行を調整します。

        1. **終了日なし** を選択し、メール バッチ処理のすべての反復を調整します。
        2. カウントを調整します。
        3. 必要に応じて毎分実行するように調整します。

3. ワークフロー通知システムの電子メール テンプレートを確認します。

    1. **システム管理** \> **設定** \> **電子メール** \> **システムの電子メール テンプレート** (システム全体のテンプレート) の順に移動します。
    2. **送信者電子メール** フィールドが設定済みで有効であることを確認します。

4. ワークフロー通知組織の電子メール テンプレートを確認します。

    1. **組織管理** \> **設定** \> **組織の電子メール テンプレート** (組織固有のテンプレート) の順に移動します。
    2. **送信者電子メール** フィールドが設定済みで有効であることを確認します。

5. ユーザーが電子メール通知を受信できることを確認します。

    1. **設定** \> **ユーザー オプション** に移動します。
    2. **勘定** タブに移動します。

       1. **メール プロバイダー ID** (SMTP など) を設定します。
       2. また、既定の **送信元** アドレスが現在のユーザーに対して使用されていない場合は、**送信者電子メール** の上書きを設定します。

    3. **ワークフロー** タブに移動します。電子メールで通知を送信するオプションを **はい** に設定します。

6. ワークフロー システムが電子メール通知を送信することを確認します。

    通知する必要があるワークフローごとに、ワークフロー エディターでワークフロー プロパティを開きます。

    1. **基本設定** をクリックします。 ワークフロー通知の電子メール テンプレートを調整します。
    2. **通知** をクリックします。

        1. ユーザーに通知するべきイベントを有効にします。
        2. 有効なイベント通知ごとにワークフロー通知の受信者を設定します。

    3. ユーザーに通知される必要のあるワークフロー承認要素:

        1. **プロパティ** に移動します。
        2. ユーザーに通知するべきイベントを有効にします。
        3. 有効なイベント通知ごとにワークフロー通知の受信者を設定します。

### <a name="workflow-email-notification-testing"></a>ワークフロー電子メール通知のテスト

電子メール通知のテストでは、単に通知をトリガーし、それを確認するだけです。

1. 電子メール通知に対して設定されているワークフローを送信します。
2. ワークフロー履歴をチェックして、ワークフロー作業項目が予定されたユーザーに割り当てられていることを確認します。
3. **システム管理** \> **定期タスク** \> **メール処理** \> **バッチメール送信ステータス** で、保留になっておりメール通知のステータスを確認します。

    電子メールの送信に失敗した場合は、SMTP メール アカウントを開くことができることを確認します。

4. 適切な受信トレイで電子メール通知を確認します。

## <a name="exchange-mail-provider"></a>Exchange メール プロバイダー

**電子メール パラメーター** ページで管理者は対話型の電子メール プロバイダーおよびバッチ電子メール プロバイダーとして **Exchange** を選択できます。 **Exchange** メール プロバイダーは、現在のユーザーの Exchange Online アカウントを使用して電子メールを送信します。 バッチ電子メール プロバイダーとして使用された場合は、バッチ アカウントが使用されます。 追加のコンフィギュレーションは必要ありません。 トラブルシューティングが必要な場合は、現在のユーザーのアカウントにサインインできることと、そのアカウントから目的の受信者に電子メールを送信できることを確認します。

> [!IMPORTANT]
> Exchange メール プロバイダーについて、次を参照してください。 
> -  外部ユーザーにはサポートされていません。これらのユーザーは、そのシステムのテナントで Exchange アカウントを持っていないためです。
> -  Microsoft が管理する環境でのみ使用可能です。

## <a name="troubleshooting"></a>トラブルシューティング

### <a name="common-issues-with-sending-email"></a>電子メール送信に関する一般的な問題

メール設定のトラブルシューティングに役立つ標準プロセスがいくつかあります。 

<table>
  <tr>
    <th id="verify-email-settings">電子メール設定を検証し、テスト電子メールを送信します。</th>
    <td>
      <ol>
        <li><b>システム管理 &gt; 設定 &gt; 電子メール &gt; 電子メール パラメーター</b>の順に移動します。</li>
        <li>SMTP が有効であることを確認します。</li>
        <li>SMTP メール サーバーの設定を確認します。</li>
        <li>アカウントとパスワードが正確であるかことを確認するために、別のウィンドウで SMTP アカウントにログインします。</li>
        <li><b>システム管理 &gt; 設定 &gt; 電子メール &gt; 電子メール パラメーター &gt; テスト電子メール</b>の順に移動して、テスト電子メールを送信します。</li>
      </ol>
    </td>
  </tr>
  <tr>
    <th id="verify-email-batch-process">電子メールのバッチ処理が実行されていることを検証します。</th>
    <td>
      <ol>
        <li><b>システム管理 &gt; 定期処理のタスク &gt; 電子メールの処理 &gt; バッチ</b>の順に移動します。</li>
        <li><b>バッチ処理</b>オプションが<b>はい</b>に設定されていることを確認します。</li>
        <li>電子メール プロセスの再実行を調整します。 <ol>
            <li><b>終了日なし</b> を選択し、メール バッチ処理のすべての反復を調整します。</li>
            <li>必要に応じて回数を調整します。</li>
          </ol>
        </li>
      </ol>
    </td>
  </tr>
  <tr>
    <th id="review-status">バッチ電子メールの状態を確認します。</th>
    <td>
      <ol>
        <li><b>システム管理 &gt; 定期処理のタスク &gt; 電子メールの処理 &gt; バッチ電子メール送信状</b>の順に移動します。</li>
        <li>電子メールが正しいアカウントから送信されていることを確認します。
          <p>アカウントが正しくない場合、必要に応じてユーザー オプション、システム テンプレート、組織テンプレートなどの設定を調整する必要があります。</p>
        </li>
        <li>すべての電子メール ユーザー アカウントに、構成された SMTP アカウントに対して<b>送信者</b>アクセス許可が付与されていることを確認します (この記事の後半にある<a href="#sendas_permissions">すべての電子メール アカウントに適切な送信者アクセス許可があることを確認する</a>を参照してください)。</li>
      </ol>
    </td>
  </tr>
  <tr>
    <th id="review-errors">電子メール履歴ページで任意のエラーを確認します。</th>
    <td>
      <ol>        
        <li><b>システム管理 &gt; 設定 &gt; 電子メール &gt; 電子メール履歴</b>の順に移動します。
          <p><b>電子メール履歴</b>ページでは、管理者がすべての送信済みメールと、送信を防ぐことができたかもしれないメールのエラーも確認することができます。 対話型の電子メールと非対話型/バッチ電子メールの両方が表示されます。</p>
        </li>
        <li><b>メール ステータス</b>値が<b>失敗</b>となっているメールに対しては、<b>エラー詳細</b>タブでエラー メッセージをレビューして、必要な処置を取るべきかどうかを決定します。 これらのエラーのいくつかについては、この記事で後ほど詳しく説明します。</li>
      </ol>
    </td>
  </tr>
  <tr>
    <th id="sendas_permissions">すべての電子メール アカウントに適切な送信アクセス許可があることを確認します。</th>
    <td>Microsoft 365 管理センターで、電子メールの送信に使用されるすべてのユーザー メール アカウントに、構成された SMTP アカウントに対する <b>Send As</b> と <b>Send On Behalf Of</b> アクセス許可があることを確認します。 詳細については、<a href="/microsoft-365/admin/add-users/give-mailbox-permissions-to-another-user">Microsoft 365 の別のユーザーにメールボックスのアクセス許可を与える</a>を参照してください。</td>
  </tr>
  <tr>
    <th id="verify-user-mailboxes">ユーザー メールボックスを確認します。</th>
    <td>影響を受ける (またはすべての) ユーザー メールボックスにサインインして、それらが有効であり、サインインを使用してアクセスできることを確認します。</td>
  </tr>
</table>

 ### <a name="specific-exchange-email-issues"></a>特定の交換メールの問題

-  **<span id="unauthorized-forbidden-error">Exchange 経由で電子メールが送信されると、"(401) 承認されていません"、または "(403) 許可されていません" というエラーが発生します</span>**

    <table>
      <tr>
        <th>説明</th>
        <td>この問題は、Office 365 のメールボックスが無効であるか、または正しく設定されていないことを示す可能性があります。</td>
      </tr>
      <tr>
        <th>固定</th>
        <td><p>この問題を修正するには、指定したユーザーが Office 365 に存在し、適切なアクセス許可を持っていることを確認します。</p>
        <p>影響を受けるユーザーを検索するには、次の手順に従います:</p>
          <ol>
            <li><b>電子メール履歴</b>ページを開きます。</li>
            <li><b>失敗</b>メールのフィルターを<b>メール ステータス</b> フィールドへ追加します。</li>
            <li><b>電子メール送信者</b>フィールドで値を記録します。 このフィールドは、Exchange が Office 365 で有効または正しいアクセス許可を付与されたユーザーではないことを示しているユーザーを表示します。</li> 
          </ol>        
        </td>
      </tr>
    </table>

-  **<span id="404-not-found">Exchange 経由で電子メールが送信されると、"(404) 見つかりません" というエラーが発生します</span>**

    <table>
      <tr>
        <th>説明</th>
        <td>この問題は、Exchange のユーザー アカウントにメールボックスがないことを示します。</td>
      </tr>
      <tr>
        <th>固定</th>
        <td><p>この問題を修正するには、指定したユーザーが Office 365 で存在しており適切なアクセス許可を持っていることを確認するか、有効な Exchange メールボックスがある代替ユーザー アカウントを使用します。</p>
        <p>影響を受けるユーザーを検索するには、次の手順に従います:</p> 
          <ol>
            <li><b>電子メール履歴</b>ページを開きます。</li>
            <li><b>失敗</b>メールのフィルターを<b>メール ステータス</b> フィールドへ追加します。</li>
            <li><b>電子メール送信者</b>フィールドで値を記録します。 このフィールドは、Exchange にメールボックスがないユーザーを表示します。</li> 
          </ol>        
        </td>
      </tr>
    </table>

### <a name="specific-smtp-email-issues"></a>特定の SMTP 電子メールの問題 

電子メールが SMTP を介して送信されたときに引き続き問題が発生する場合は、以下の特定のエラーのいずれかが発生している可能性があります。 そうでない場合は、[SMTPer.net](https://www.smtper.net/) などのツールに SMTP アカウント情報を入力して、SMTP サーバーとアカウントが有効で正しく機能していることを確認します。

-  **<span id="single-label-domain-not-accepted-error">SMTP メールの送信に失敗し、"単一ラベル ドメインの受信者アドレスは受け付けられません" と表示されます</span>**

    <table>
      <tr>
        <th>説明</th>
        <td>受信者が単一ラベル ドメインを使用しているため、電子メールの送信に失敗しましたが、Office 365 では単一ラベル ドメインをサポートしていません。 単一ラベル ドメインとは、.com、.org、.net、.org などの接尾語を含まないドメイン ネーム システム (DNS) のことです。たとえば、contoso は単一ラベル ドメインです。 ただし、contoso.com、contoso.net、contoso.local は単一ラベル ドメインではありません。</td>
      </tr>
      <tr>
        <th>固定</th>
        <td>単一ラベル ドメインではない電子メール受信者の代替アドレスを指定します。</td>
      </tr>
    </table>

-  **<span id="mailbox-full-error">SMTP メールの送信に失敗し、"メールボックスがいっぱいです" と表示されます</span>**

    <table>
      <tr>
        <th>説明</th>
        <td>少なくとも 1 人の受信者のメールボックスがいっぱいなため、メールの送信に失敗しました。 詳細については、<a href="/exchange/troubleshoot/email-delivery/cannot-send-mail-mepf">Office 365 で電子メールが有効なパブリック フォルダーへのメール送信時のエラー (554 5.2.2メールボックスの容量がありません)</a> を参照してください。</td>
      </tr>
      <tr>
        <th>固定</th>
        <td>受信者の代替アドレスを使用するか、または別の方法で受信者に連絡してから再試行してください。</td>
      </tr>
    </table>

-  **<span id="authentication-unsuccessful-error">SMTP メールの送信に失敗し、"要求が認証に成功する基準を満たさなかったため認証に失敗しました" と表示されます</span>**

    <table>
      <tr>
        <th>説明</th>
        <td>SMTP ユーザー アカウントの認証に成功するには追加基準が必要なため、電子メールの送信に失敗しました。 多要素認証 (MFA) が構成されているため、これらの追加基準が必要な場合があります。 ただし、財務と運用アプリは現在のところ MFA をサポートしていません。</td>
      </tr>
      <tr>
        <th>固定</th>
        <td>必要に応じて Office 365 でユーザー アカウントのコンフィギュレーションを調整してから、再試行してください。 詳細については、<a href="/exchange/mail-flow-best-practices/fix-issues-with-printers-scanners-and-lob-applications-that-send-email-using-off#error-authentication-unsuccessful">Microsoft 365 または Office 365 を使用して電子メールを送信するプリンタ、スキャナー、LOB アプリケーションの問題を修正する</a>を参照してください。</td>
      </tr>
    </table>

-  **<span id="smtpclientauthentication-disabled-error">SMTP メールの送信に失敗し、"メールボックスの SmtpClientAuthentication が無効なため認証に失敗しました" と表示されます</span>**

    <table>
      <tr>
        <th>説明</th>
        <td>SMTP ユーザー アカウントの SMTP クライアント認証が無効になっているため、電子メールの送信に失敗しました。</td>
      </tr>
      <tr>
        <th>固定</th>
        <td>Office 365 でユーザー アカウントの SMTP クライアント認証を有効にしてから再試行してください。 詳細については、<a href="https://aka.ms/smtp_auth_disabled">認証付きクライアントSMTP送信を有効または無効にする</a>を参照してください。</td>
      </tr>
    </table>

- **<span id="smtp-emails-fail-to-send-with-if-your-smtp-server-doesnt-support-authentication-please-clear-the-smtp-user-name-and-password">SMTP メールの送信に失敗し、"SMTP サーバーが認証をサポートしていない場合は、SMTP ユーザー名とパスワードをクリアしてください" と表示されます</span>**

    <table>
      <tr>
        <th>説明</th>
        <td>この問題は、Microsoft の推奨事項に従って .NET SMTP メール クライアント (現在は廃止されています) から MailKit への移行に関連しています。 この移行の結果、メール サーバーが認証をサポートしていなかった場合の SMTP ユーザー名とパスワードを処理する方法が変更されました。 以前は、SMTP ユーザー名が提供されてもサーバーが認証をサポートしていなかった場合、.NET SMTP メール クライアントは提供されたユーザー名とパスワードを無視し、認証なしで続行していました。 この動作により、ある顧客は認証されたメール サーバーを使用しているという誤った認識につながっていました。 MailKit では、ユーザー名を指定した場合、認証が必要となります。 この要件によって、認証をサポートしないメール サーバーに対してエラーが発生し、電子メールの送信に失敗します。</td>
      </tr>
      <tr>
        <th>固定</th>
        <td>ユーザーは<b>電子メール パラメーター</b> ページ (<b>システム管理 &gt; 設定 &gt; 電子メール</b>) に移動し、<b>SMTP 設定</b>タブで<b>ユーザー名</b>および<b>パスワード</b> フィールドをクリアする必要があります。</td>
      </tr>
    </table>

-  **<span id="smtp-emails-fail-to-send-with-5757-smtp-error-or-an-indication-that-youre-not-authenticated-or-authentication-is-required">SMTP メールの送信に失敗し、"5.7.57 SMTP" エラー、またはユーザーが認証されていないか、認証が必要というメッセージが表示されます</span>**

    <table>
      <tr>
        <th>説明</th>
        <td>メール サーバーが、SMTP ユーザーの資格情報が無効であることを示しています。</td>
      </tr>
      <tr>
        <th>固定</th>
        <td>SMTP ユーザーの資格情報が正しいか確認します。</td>
      </tr>
    </table>

- **<span id="smtp-emails-fail-to-send-with-microsoftdynamicsaxxppsecuritycryptoencryptionexception-encryption-error-occurred-with-exception">SMTP メールの送信に失敗し、"Microsoft.Dynamics.Ax.Xpp.Security.CryptoEncryptionException: 暗号化エラーが例外で発生しました" と表示されます</span>**

    <table>
      <tr>
        <th>説明</th>
        <td>SMTP パスワードは、単一環境に固有のキーを使用して暗号化されます。 このエラーは通常、環境間でデータベースを移行した後でパスワードを復号化できない場合に発生します。</td>
      </tr>
      <tr>
        <th>固定</th>
        <td><b>電子メール パラメーター</b> ページの <b>SMTP 設定</b>タブで SMTP パスワードをクリアして再入力します。</td>
      </tr>
    </table>

-  **<span id="smtp-emails-fail-to-send-with-client-does-not-have-permissions-to-send-as-this-sender">SMTP メールの送信に失敗し、"クライアントにはこの送信者として送信するアクセス許可がありません" と表示されます</span>**

    <table>
      <tr>
        <th>説明</th>
        <td>この問題は、通常、電子メール アカウントの<b>送信者</b>アクセス許可が正しく設定されていないために発生します。</td>
      </tr>
      <tr>
        <th>固定</th>
        <td>電子メール アカウントに適切な<b>送信者</b>アクセス許可があることを確認します。 詳細については、この記事の前半にある<a href="#sendas_permissions">すべての電子メール アカウントに適切な送信者アクセス許可があることを確認する</a>を参照してください。
      </tr>
    </table>

## <a name="frequently-asked-questions"></a>よく寄せられる質問

### <a name="where-do-workflow-email-templates-come-from"></a>ワークフロー電子メール テンプレートはどこから取得されますか。

ワークフローがシステムレベル (会社固有ではない) または組織レベル (会社固有) のワークフローのいずれであるかによって、電子メール テンプレートは、システム電子メール テンプレートまたは組織の電子メール テンプレートから取得されます。

### <a name="what-email-limits-apply-when-using-exchange-or-smtp"></a>Exchange または SMTP を使用する場合、どのような電子メール制限が適用されますか?  

システムは Exchange や一般的な電子メール クライアントのような SMTP サーバーと通信するため、標準の動作と制限が適用されます。 たとえば、標準の [Exchange Online 送受信制限](/office365/servicedescriptions/exchange-online-service-description/exchange-online-limits)が適用されます。


## <a name="additional-resources"></a>追加リソース

[Office 統合のトラブルシューティング](../../dev-itpro/office-integration/office-integration-troubleshooting.md)

[Office 統合のチュートリアル](../../dev-itpro/office-integration/office-integration-tutorial.md)

[Microsoft Dynamics AX での電子メール機能のコンフィギュレーション [AX 2012]](/dynamicsax-2012/appuser-itpro/configure-email-functionality-in-microsoft-dynamics-ax)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]

