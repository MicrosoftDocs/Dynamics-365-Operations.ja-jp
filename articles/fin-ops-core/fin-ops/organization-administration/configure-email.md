---
title: 電子メールのコンフィギュレーションと送信
description: 電子メール サブシステムの動作は、管理者コンフィギュレーション、ユーザー コンフィギュレーション、およびユーザーの選択の組み合わせに影響されます。
author: ChrisGarty
manager: AnnBe
ms.date: 10/10/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysEmailParameters
audience: IT Pro
ms.reviewer: sericks
ms.search.scope: Core, Operations
ms.custom: 268274
ms.assetid: 194ca8fd-5e20-4464-9c85-08d2b5ff63ca
ms.search.region: Global
ms.author: cgarty
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: bd046cfb3a0a98c4d707c68ffd6b2ae8c00574d1
ms.sourcegitcommit: 57bc7e17682e2edb5e1766496b7a22f4621819dd
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/18/2019
ms.locfileid: "2812423"
---
# <a name="configure-and-send-email"></a>電子メールのコンフィギュレーションと送信

[!include [banner](../includes/banner.md)]

電子メール サブシステムの動作は、管理者コンフィギュレーション、ユーザー コンフィギュレーション、およびユーザーの選択の組み合わせに影響されます。 このトピックでは、関連情報を見つけやすくするために、管理者のセクションとユーザーのセクションに分かれています。

管理者とユーザーの両方が電子メールのサブシステムの動作を設定します。

## <a name="administrator-email-parameters-page"></a>管理者: 電子メール パラメーター ページ

**電子メール パラメーター**ページの、**電子メール プロバイダー**タブで、次の設定に注意してください。

| フィールド                 | 説明 |
|-----------------------|-------------|
| バッチ電子メール プロバイダー  | バッチ方式または非対話型のプロセスで送信される電子メールの送信に使用される電子メール プロバイダーを指定します。 Exchange プロバイダーは、バッチ プロセスに関連付けられているアカウントを使用します。 |
| 添付ファイル サイズの上限 | 電子メール サブシステム経由で送信できる 1 つの電子メールの最大サイズを指定します。 |

**電子メール パラメーター**ページの、**SMTP 設定**タブで、次の設定に注意してください。

<table>
<thead>
<tr>
<th>フィールド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>送信メール サーバー</td>
<td>目的の SMTP サーバーのホスト名。
<ul>
<li><a href="https://support.office.com/article/Outlook-settings-for-POP-and-IMAP-access-for-Office-365-for-business-or-Microsoft-Exchange-accounts-7fc677eb-2491-4cbc-8153-8e7113525f6c">Office 365 製品</a> (*.onmicrosoft.com アカウントを含む) では、smtp.office365.com を使用します。 (<strong>設定</strong> &gt; <strong>メール</strong> &gt; <strong>POP および IMAP</strong>の outlook.office.com でこの設定を検索します。.)</li>
<li>Outlook/Hotmail で smtp-mail.outlook.com を使用します。</li>
</ul>
</td>
</tr>
<tr>
<td>SMTP ポート番号</td>
<td>通常、セキュリティで保護して送信するためにポート番号は 587 に設定する必要があります。</td>
</tr>
<tr>
<td><strong>ユーザー名</strong>と<strong>パスワード</strong></td>
<td>必要に応じて、適切なメール アカウントを使用して電子メールの送信を指定します。 すべてのユーザーは SMTP アカウントを指定し <strong>送信者</strong>および <strong>代理送信</strong>許可をし、Simple Mail Transfer Protocol (SMTP) で送信する機能を有効にします。 Send As 権限は、Office 365 管理センター (portal.office.com/Admin) にて、<strong>ユーザー</strong> &gt; <strong>有効なユーザー</strong> &gt; <strong>ユーザー</strong> &gt; <strong>メールボックスのアクセス許可を編集</strong> &gt; <strong>このメールボックスから電子メールを送信する</strong> で構成することができます。 詳細については、<a href="https://support.office.com/article/Enable-sending-email-from-another-user-s-mailbox-in-Office-365-2B828C5F-41AB-4904-97B9-3B63D8129C4E">Office 365 で別のユーザーのメールボックスからの電子メールの送信を有効にする</a>を参照してください。</td>
</tr>
<tr>
<td>SSL が必須かどうかを指定します</td>
<td>安全なトランスポートをを使用するかを決定します。 これは通常、内部またはトラブルシューティングのシナリオを除き、<strong>はい</strong> です。</td>
</tr>
</tbody>
</table>

## <a name="administrator-email-distributor-batch-process"></a>管理者: 電子メール配布バッチ処理

ユーザーの操作なしに、SMTP 経由でサーバーから直接送信される電子メールは、**電子メール ディストリビューター バッチ**プロセスによって送信されます。 電子メールのキューの処理には、そのバッチ処理を開始する必要があります。 プロセスを開始するには、**電子メール配布バッチ**ウィンドウ (**システム管理**&gt;**定期タスク**&gt;**電子メール処理**&gt;**バッチ**)] を開いて、**バッチ処理** をオンにします。

為替プロバイダーを使用している場合、バッチ プロセス (通常は管理者) に関連付けられているユーザー アカウントが送信者になります。

## <a name="administrator-user-email"></a>管理者ユーザー: ユーザーの電子メール

各ユーザーのデフォルトのメールアドレスは、**ユーザー**ページ (**システム管理**&gt; **ユーザー** &gt; **ユーザー**) の **電子メール** 電子メールフィールドから取得します。 各ユーザーがサインインするために電子メール アドレスを指定する必要がありますが、そのためにフィールドを設定する必要があります。 必要に応じて、この既定値をオーバーライドできます。

## <a name="user-email-provider-selection-section-on-the-options-page"></a>ユーザー: [オプション] ページの電子メール プロバイダーの選択セクション

**オプション** ページは、**設定 &gt; ユーザー オプション** から開くことができます。 **電子メール プロバイダーの選択** セクションは、**アカウント** タブにあります。

| フィールド             | 説明 |
|-------------------|-------------|
| 電子メール プロバイダー ID | ユーザーは、電子メールを送信するときに使用する電子メール プロバイダーを選択できます。 ここでオプションを選択することは、**どのように電子メール送信しますか** ダイアログ ボックスで **今後確認しない** をオンにするのと同じです。 空白のオプション **使用する電子メール プロバイダーの入力を求める** を選択すると、メールが送信されるときに **電子メールを送信する方法** ダイアログ ボックスが表示されます。 |
| 電子メール             | ユーザーが電子メールの**ソース**フィールドの電子メール アドレスの上書きを提供できるようにします。 既定では、ユーザー アカウントに関連付けられた電子メール エイリアスは新しい電子メールの**ソース** フィールドとして使用されますが、このユーザー オプションの電子メール アドレスによって上書きされます。 SMTP で電子メールを送信するとき、ユーザーは適切な **Send As**および **Send On Behalf Of** アクセス許可を Exchange または SMTP サーバー上で構成する必要があります。<blockquote>[!NOTE] **Send As** および **Send On Behalf Of** 権限は、Office 365 管理センター (portal.office.com/Admin) にて、**ユーザー** &gt; **有効なユーザー** &gt; **ユーザー** &gt; **メール ボックスのアクセス許可を編集** &gt; **このメールボックスから電子メールを送信する**で構成することができます。 詳細については、[Office 365 で別のユーザーのメールボックスからの電子メールの送信を有効にする](https://support.office.com/article/Enable-sending-email-from-another-user-s-mailbox-in-Office-365-2B828C5F-41AB-4904-97B9-3B63D8129C4E)を参照してください。</blockquote> |

## <a name="user-optional-how-would-you-like-to-send-email-dialog-box"></a>ユーザー (省略可): 電子メール ダイアログ ボックスをどのように送信しますか

電子メールを送信するときは、**電子メールをどのように送信しますか** ダイアログ ボックスが表示され、それに電子メールを送信するために使用可能なオプションが一覧表示されます。

| フィールド                                                                  | 説明 |
|------------------------------------------------------------------------|-------------|
| Outlook などの電子メール アプリケーションを使用します                                      | 生成された電子メール (.eml) を持つを提供します。 |
| Exchange 電子メール サーバーを使用します                                              | テナントに関連付けられている Exchange Online サーバーを使用します。 電子メールは、Exchange Webサービス (EWS) を使用して送信されます。 オンプレミス Exchange サーバーは、この時点では **Exchange** メール プロバイダーでサポートされていません、 |
| システムの電子メール クライアントの使用 | **電子メール送信する**構成ダイアログ ボックスを開いて、結果を電子メールで SMTP 経由で送信します。 |
| 今後このメッセージを表示しない                                                       | このフィールドが選択されていない場合は、次回に電子メールが送信されたときに最後に選択したオプションが使用され、ダイアログ ボックスが表示されません。 |

## <a name="user-optional-send-email-dialog-box"></a>ユーザー (省略可): 電子メール ダイアログ ボックスを送信

**電子メール送信** ダイアログ ボックスが開き、送信される電子メールの内容を編集できます。 次のフィールドの一部は、このウィンドウであらかじめ設定されています。

| フィールド                                                     | 説明 |
|-----------------------------------------------------------|-------------|
| 自                                                      | **オプション** ページの **メール** フィールドから取得されます。 |
| **宛先**、**Cc**、**Bcc**、**件名**、および**本文** | 電子メールの送信を開始したプロセスによって指定された値が取得されます。 これらのフィールドは、必要に応じてユーザーが編集できます。 |
| 添付ファイル リスト                                          | 電子メールの送信を開始したプロセスによって指定されたファイルが添付される場合があります。 このリストは、必要に応じてユーザーが編集できます。 |

電子メールを送信する準備ができたら、**送信** ボタンを使用して SMTP 経由で電子メールが送信されます。

## <a name="usage-scenarios-to-verify-if-email-is-configured-correctly"></a>電子メールが正しく設定されているかどうかを確認するための使用シナリオ

### <a name="send-mail-via-a-local-mail-client"></a>ローカル メール クライアント経由で電子メールを送信

SysEmail フレームワークで有効になっている電子メール ワークフローでは、添付ファイルを含む電子メール メッセージ (.eml files) を生成できます。 これらのメッセージは Microsoft Outlook または他の電子メール クライアント経由で送信することができます。

1. Internet Explorer で、**売掛金勘定** &gt; **顧客** &gt; **すべての顧客**の順に移動します。
2. **US-008 Sparrow Retail** を選択します。
3. **回収** &gt; **顧客残高** &gt; **コレクション**の順にクリックし、**コレクション** ページを開きます。
4. **連絡** &gt; **電子メール** &gt; **連絡先に対する明細書**の順にクリックします。
5. ダイアログ ボックスで既定値を承諾する場合は、**OK** をクリックします。
6. メール オプションの使用を促すメッセージが表示された場合は、**再度確認しない**チェック ボックス (このオプションは**ユーザー オプション** ページから変更できます) をオフにし、**Outlook などの電子メール アプリケーションを使用**を選択し、**OK** をクリックします。
7. コンピューター上で Internet Explorer を使用している場合は、生成される電子メール (.eml) ファイルを開きます。 VM 上で Internet Explorer を使用している場合は、ファイルをコンピューターにコピーし、そのコンピュータでファイルを開きます。
8. **宛先**フィールドの電子メール アドレスと生成されたブック添付ファイルに注意します。

### <a name="send-mail-via-smtp"></a>SMTP 経由でメールを送信

SysEmail フレームワークを介して有効になっている電子メール ワークフローは、簡単な電子メール ダイアログ ボックスで作成し、Simple Mail Transfer Protocol (SMTP) 経由で送信することもできます。

1. **電子メール パラメーター**のページに移動します。
2. **SMTP 設定**をクリックします。
3. **送信メール サーバー** を要求された SMTP サーバーに設定します。

    - [Office 365 製品](https://support.office.com/article/Outlook-settings-for-POP-and-IMAP-access-for-Office-365-for-business-or-Microsoft-Exchange-accounts-7fc677eb-2491-4cbc-8153-8e7113525f6c) (\*.onmicrosoft.com アカウントを含む) では、smtp.office365.com を使用します。 (**設定** &gt; **メール** &gt; **POP および IMAP**で outlook.office.com を通してこの設定を検索します。.)
    - Outlook/Hotmail で smtp-mail.outlook.com を使用します。

4. ユーザー名とパスワードを適切な電子メール アカウントとパスワードに設定します。
5. **SSLRequired** を有効のままにして、**SMTP ポート番号**は **587** に設定したままにします。
6. **保存** をクリックします。
7. Internet Explorer で、**売掛金勘定** &gt; **顧客** &gt; **すべての顧客**の順に移動します。
8. **US-008 Sparrow Retail** を選択します。
9. **回収** &gt; **顧客残高** &gt; **コレクション**の順にクリックし、**コレクション** ページを開きます。
10. **連絡** &gt; **電子メール** &gt; **連絡先に対する明細書**の順にクリックします。
11. ダイアログ ボックスで既定値を承諾する場合は、**OK** をクリックします。
12. メール オプションを使用するように求められたら、**Microsoft Dynamics 365 for Finance and Operations 電子メール クライアントの使用**を選択し、**OK** をクリックします。
13. テスト メッセージを受信するには、**宛先アドレス**をメール アドレスに変更します。

    SMTP 設定で指定されたアカウントが、電子メール アカウントの **Send As** および **Send On Behalf Of** であることを確認します。 これを確実にするための最も簡単な方法は、電子メール アカウントを SMTP 設定で使用することです。

14. メッセージの件名および本文を入力します。
15. **送信** をクリックします。 メッセージは 1 〜 5 分で配信する必要があります。

## <a name="administrator-workflow-email-notifications"></a>管理者: ワークフロー電子メール通知

ワークフロー電子メールのコンフィギュレーションは連携して動作する関連設定の集合です。

### <a name="workflow-email-notification-setup"></a>ワークフロー電子メール通知のセットアップ

1. 電子メール設定の確認:

    1. **システム管理** \> **設定** \> **電子メール** \> **電子メール パラメータ**の順に移動します。
    2. SMTP が有効であることを確認します。
    3. SMTP メール サーバーの設定を設定します。

2. 電子メールのバッチ処理が実行されていることを確認します。

    1. **システム管理** \> **定期処理のタスク** \> **電子メールの処理** \> **電子メール ディストリビューター バッチ** の順に移動します。
    2. **バッチ プロセス**オプションを有効にします。
    3. 必要に応じて、電子メール プロセスの再実行を調整します。

        1. **終了日なし** を選択し、メール バッチ処理のすべての反復を調整します。
        2. カウントを調整します。
        3. 必要に応じて毎分実行するように調整します。

3. ワークフロー通知システムの電子メール テンプレートを確認します。

    1. **システム管理** \> **設定** \> **電子メール** \> **システムの電子メール テンプレート** (システム全体のテンプレート) の順に移動します。
    2. **送信者電子メール** フィールドが設定済みで有効であることを確認します。

4. ワークフロー通知組織の電子メール テンプレートを確認します。

    1. **組織管理** \> **設定** \> **組織の電子メール テンプレート** (組織固有のテンプレート) の順に移動します。
    2. **送信者電子メール** フィールドが設定済みで有効であることを確認します。

5. ユーザーが電子メール通知を受信できることを確認します。

    1. **設定** \> **ユーザー オプション**に移動します。
    2. **勘定**タブに移動します。

       1. メール プロバイダー ID (SMTP など) を設定します。
       2. 必要に応じて、ユーザー設定の既定になっていなかった場合は、プロバイダーの電子メール アドレスを設定します。

    3. **ワークフロー** タブに移動します。電子メールで通知を送信するオプションを **はい** に設定します。

6. ワークフロー システムが電子メール通知を送信することを確認します。

    通知する必要があるワークフローごとに、ワークフロー エディターでワークフロー プロパティを開きます。

    1. **基本設定**をクリックします。 ワークフロー通知の電子メール テンプレートを調整します。
    2. **通知**をクリックします。

        1. ユーザーに通知するべきイベントを有効にします。
        2. 有効なイベント通知ごとにワークフロー通知の受信者を設定します。

    3. ユーザーに通知される必要のあるワークフロー承認要素:

        1. **プロパティ**に移動します。
        2. ユーザーに通知するべきイベントを有効にします。
        3. 有効なイベント通知ごとにワークフロー通知の受信者を設定します。

### <a name="workflow-email-notification-testing"></a>ワークフロー電子メール通知のテスト

電子メール通知のテストでは、単に通知をトリガーし、それを確認するだけです。

1. 電子メール通知に対して設定されているワークフローを送信します。
2. ワークフロー履歴をチェックして、ワークフロー作業項目が予定されたユーザーに割り当てられていることを確認します。
3. **システム管理** \> **定期処理のタスク** \> **電子メールの処理** \> **電子メール送信ステータス** で、保留中の電子メール通知の状態を確認してください。

    電子メールが送信に失敗した場合は、SMTP メール アカウントを開くことができることを確認します。

4. 適切な受信トレイで電子メール通知を確認します。

## <a name="troubleshoot-email"></a>電子メールのトラブルシューティング

メール設定のトラブルシューティングに役立つ標準的な手順がいくつかあります。

1. 電子メール設定の確認:

    1. **システム管理** \> **設定** \> **電子メール** \> **電子メール パラメータ**の順に移動します。
    2. SMTP が有効であることを確認します。
    3. SMTP メール サーバーの設定を確認します。
    4. アカウントとパスワードが正確であるかことを確認するために、別のウィンドウで SMTP アカウントにログインします。
    5. **システム管理** \> **設定** \> **電子メール** \> **電子メールのパラメータ** \> **テスト電子メール** を使用してテスト電子メールを送信します。

2. 電子メールのバッチ処理が実行されていることを確認します。

    1. **システム管理** \> **定期処理のタスク** \> **電子メールの処理** \> **バッチ**の順に移動します。
    2. **バッチ処理**オプションが**はい**に設定されていることを確認します。
    3. 電子メール プロセスの再実行を調整します。

        1. **終了日なし** を選択し、メール バッチ処理のすべての反復を調整します。
        2. 必要に応じてカウントを調整します。

3. 保留中の電子メールの内容とステータスを確認するには、**システム管理** \> **定期処理のタスク** \> **電子メールの処理** \> **電子メール送信ステータス** の順に移動します。

    1. プラットフォーム更新プログラム 28 より前のリリースを使用している場合は、フォームをパーソナライズして電子メールの差出人を追加し確認しやすくします。 これを行うには、グリッド ヘッダーを右クリックし **列の追加** を選択して **電子メール** を選択して、**挿入** をクリックします。 **電子メール** フィールドがグリッドに追加されていない場合は、**メッセージの表示** を選択してから **電子メール** フィールドを選択して送信者を表示できます。
    2. 電子メールが正しいアカウントから送信されていることを確認します。 アカウントが正しくない場合、必要に応じてユーザー オプション、システム テンプレート、組織テンプレートなどの設定を調整する必要があります。
    3. すべての電子メール ユーザー アカウントに構成された SMTP アカウントの **Send As** へのアクセス許可が付与されていることを確認します (詳細は手順 4 を参照してください)。

4. Office 365 管理センターで、電子メールの送信に使用されるすべてのユーザー メール アカウントに、構成された SMTP アカウントに対する **Send As** と **Send On Behalf Of** アクセス許可があることを確認します。 詳細については、[Office 365 で別のユーザーのメールボックスからの電子メールの送信を有効にする](https://support.office.com/article/Enable-sending-email-from-another-user-s-mailbox-in-Office-365-2B828C5F-41AB-4904-97B9-3B63D8129C4E)を参照してください。
5. 有効かつログインできることを確認するために、すべてのユーザー メールボックスにログインします。
6. **システム管理** \> **設定** \> **電子メール** \> **電子メールのパラメータ** \> **テスト電子メール** を使用してテスト電子メールを送信します。
7. SMTP 設定を別の環境から移行した場合は、パスワード フィールドをクリアしてパスワードを再入力し、フィールドの暗号化が保存された値に悪影響を与えていないことを確認します。
8. SMTP を介して電子メールを送信すると問題が発生する場合は、[SMTPer.net](https://www.smtper.net/) のようなツールに SMTP アカウント情報を入力して SMTP サーバーとアカウントが有効で正しく機能していることを確認します。

## <a name="troubleshoot-the-exchange-mail-provider"></a>Exchange メール プロバイダーのトラブルシューティング

**電子メール パラメーター** ページで管理者は対話型の電子メール プロバイダーおよびバッチ電子メール プロバイダーとして Exchange を選択できます。 Exchange メール プロバイダーは、現在のユーザーの Exchange Online アカウントを使用して電子メールを送信します。 バッチ電子メール プロバイダーとして使用された場合は、バッチ アカウントが使用されます。 追加のコンフィギュレーションは必要ありません。 トラブルシューティングが必要な場合は、現在のユーザーのアカウントにサインインできることと、そのアカウントから目的の受信者に電子メールを送信できることを確認します。

## <a name="other-notes"></a>その他のメモ

システムは Exchange や一般的な電子メール クライアントのような SMTP サーバーと通信するため、標準の動作と制限が適用されます。 たとえば、標準の [Exchange Online 送受信制限](https://technet.microsoft.com/library/exchange-online-limits.aspx#RecipientLimits)が適用されます。

## <a name="additional-resources"></a>追加リソース

[Office 統合のトラブルシューティング](../../dev-itpro/office-integration/office-integration-troubleshooting.md)

[Office 統合のチュートリアル](../../dev-itpro/office-integration/office-integration-tutorial.md)

[Microsoft Dynamics AX での電子メール機能のコンフィギュレーション [AX 2012]](https://technet.microsoft.com/library/aa834374.aspx)
