---
title: 警告ルールの作成
description: このトピックでは、警告に関する情報を提供し、警告ルールを作成して到着日や発生する特定の変更などのイベントについて通知する方法について説明します。
author: tjvass
manager: AnnBe
ms.date: 10/08/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: EventCreateRule
audience: Application user
ms.reviewer: sericks
ms.search.region: Global
ms.author: tjvass
ms.search.validFrom: 2018-3-30
ms.dyn365.ops.version: Platform update 15
ms.openlocfilehash: 3721416ce720167a6f78e26583de84af9c8d086b
ms.sourcegitcommit: b112925c389a460a98c3401cc2c67df7091b066f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/19/2020
ms.locfileid: "4798430"
---
# <a name="create-alert-rules"></a>警告ルールの作成

[!include [banner](../includes/banner.md)]

## <a name="getting-started"></a>はじめに

警告ルールを設定するには、その前に、いつどのような状況の場合に警告を受信するかを決定します。 通知が必要なイベントがわかっているときは、そのイベントを表示するデータのページを見つけます。 イベントは、到来した日付か、または発生した特定の変更のいずれかです。 したがって、日付が指定されたページ、あるいは、変更されるフィールドまたは新しく作成されたレコードを表示するページを見つける必要があります。 この情報が用意されたら、警告ルールを作成できます。

警告ルールの作成時に、警告が発生する前に満たす必要のある基準を定義します。 この基準とは、基本的にイベントが発生した際に特定の条件に適合しているかどうかの照合です。 イベントが発生すると、設定されている条件に従って確認が開始されます。

## <a name="ensure-the-alert-batch-jobs-are-running"></a>警告のバッチジョブが実行されていることの確認

データ変更と期日の警告に対してバッチジョブを実行して、警告条件を処理し、通知を送信する必要があります。 バッチジョブを実行するには、**システム管理** > **定期処理タスク** > **警告** に移動し、**変更に基づく警告** または **期日の警告** に移動します。 長時間バッチジョブを頻繁に実行する必要がある場合は、**定期処理** を選択し、**終了日なし** を **分** の **定期処理パターン** と **1** の **カウント** で設定します。

## <a name="events"></a>イベント

警告ルールを発生するイベントは、到来した日付かまたは発生した特定の変更のいずれかです。 イベントのトリガーは **警告ルールの作成** ダイアログ ボックスの **警告する時期** クイック タブで定義されています。 特定のフィールドで使用できるイベントは選択したトリガーによって異なります。

たとえば **開始日** フィールドの警告ルールを設定する場合は、期日イベントが適切です。 したがって、`is due in` イベント タイプは、そのフィールドで使用できます。 ただし、**原価部門** などのフィールドでは、期日イベントは適切ではありません。 したがって、`is due in` イベント タイプは使用できません。 代わりに、`has changed` イベント タイプを使用できます。

## <a name="event-types"></a>イベントのタイプ

次の 3 つのイベント タイプが存在します。

- **作成タイプのイベントと削除タイプのイベント** – これらのイベントは、レコードが作成または削除されたときに警告を発生します。
- **更新タイプのイベント** – これらのイベントは、特定のフィールドのデータが変更されると警告が発生します。
- **期日タイプのイベント** – これらのイベントは、日付が到来したときに警告を発生します。
    
変更はユーザーによって引き起こされることがあります。 たとえば、ユーザーは発注書の配送日を変更します。 また、変更は、プロセスの一部として発生することがあります。 たとえば、システム内のさまざまなプロセスのライフ サイクルを反映するために、ページの **ステータス** フィールドが変更されます。

## <a name="conditions"></a>条件

**警告ルールの作成** ダイアログ ボックスの **表示する警告** クイック タブで、イベントについての警告をいつ受けるかを制御する条件を使用できます。

たとえば、発注書のステータスが変更されたとき、そのステータスが特定の条件セットを満たす場合にのみ、システムが警告するように指定できます。 特に、発注書のステータスが **受入済** に設定されている場合に警告する必要があります。 このステータスの変更が警告を発生するイベントとなります。

次に、警告の対象となる発注書を決定する必要があります。 たとえば、次のいずれかのオプションを選択できます。 これらのオプションは、警告ルールの条件を定義します。

- **現在の選択したレコード** – 特定の発注書のステータスが **Received** に変更すると警告が発生します。
- **すべてのレコード** – 有効なページ ビューで品目の発注書のステータスが変更されたときに警告が表示されます。 ページに表示される高度なフィルタ処理を使用し、特定のレコードのセットに対するルールを作成することができます。 たとえば、特定の顧客グループ内の顧客のすべての発注書に対して発生した警告を作成できます。
    
## <a name="expiry-of-rule"></a>ルールの有効期限

**警告ルールの作成** ダイアログ ボックスの **表示する警告** クイック タブで、警告ルールを有効にする期間を指定することができます。

## <a name="alert-contents"></a>警告の内容

**警告ルールの作成** ダイアログ ボックスの **警告の対象** クイック タブで、警告メッセージで使用する件名テキストとメッセージ テキストを指定できます。

## <a name="user-id"></a>ユーザー ID

**警告ルールの作成** ダイアログ ボックスの **警告の対象** クイック タブで、ユーザーが警告メッセージを受け取る必要があるかを指定することができます。 既定では、自身のユーザー ID が選択されます。 警告を受信するユーザーを変更する機能は、組織管理者に制限されます。

## <a name="alerts-as-business-events"></a>ビジネス イベントとしての警告

ビジネス イベント フレームワークを使用して、警告を外部に送信できます。 警告を作成する場合は、**組織全体** を **いいえ** に設定し、**外部への送信** を **はい** に設定します。 ビジネス イベントをトリガーする警告が発生したら、Finance and Operations コネクターの **ビジネス イベントが発生した場合** のトリガーを使用して Power Automate に組み込まれたフローをトリガーするか、**ビジネス イベント カタログ** を介してイベントをビジネス イベント エンドポイントに明示的に送信できます。

## <a name="create-an-alert-rule"></a>警告ルールを作成

0. 警告のバッチ ジョブが実行されていることを確認してください (上記を参照)。
1. 監視するデータが含まれているページを開きます。
2. **オプション** タブのアクション ウィンドウの、**共有** グループで、**カスタムルールの作成** を選択します。
3. **警告ルールの作成** ダイアログ ボックスの **フィールド** フィールドで、監視するフィールドを選択します。
4. **イベント** フィールドで、イベントのタイプを選択します。
5. **表示する警告** クイック タブで、希望のオプションを選択します。 警告をビジネス イベントとして送信する場合は、**組織全体** 値を **いいえ** に設定します。
6. 特定の日付で警告ルールを無効にする必要がある場合、**警告の表示期限** クイック タブで終了日を選択します。
7. **件名** フィールドの **警告の対象** クイック タブで、電子メール メッセージの既定の件名ヘッダー情報を受け入れるか、新しい件名を入力します。 テキストは、警告が発生したときに受信する電子メール メッセージの件名のヘッダーになります。 警告をビジネスイベントとして送信する場合は、**外部に送信** を **はい** に設定します。
8. **メッセージ** フィールドにオプションのメッセージを入力します。 テキストは、警告の発生時に受信するメッセージになります。
9. **OK** を選択して、設定を保存し、警告ルールを作成します。

## <a name="limitations-and-workarounds"></a>制限事項と回避策

### <a name="workaround-for-creating-alerts-for-the-secondary-data-sources-of-a-form"></a>フォームのセカンダリ データ ソースに対して警告を作成するための回避策
フォーム上の一部のセカンダリ データ ソースに対して警告を作成することはできません。 たとえば、顧客または仕入先の転記プロファイル フォームで警告を作成するときは、ヘッダー (CustLedger または VendLedger) のフィールドのみが利用可能で、分析コード勘定は利用できません。 この制限の回避策は、**SysTableBrowser** を使用してそのテーブルを基本データ ソースとして開きます。 
1. **SysTableBrowser** フォームでテーブルを開きます。
    ```
        https://<EnvironmentURL>/?cmp=USMF&mi=SysTableBrowser&TableName=<TableName>
    ```
2. SysTableBrowser フォームから警告を作成します。

