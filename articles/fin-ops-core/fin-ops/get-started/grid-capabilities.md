---
title: グリッド機能
description: このトピックでは、グリッド コントロールのいくつかの強力な機能について説明します。 これらの機能にアクセスするには、新しいグリッド機能が有効になっている必要があります。
author: jasongre
manager: AnnBe
ms.date: 08/31/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: DefaultDashboard
audience: Application User, Developer, IT Pro
ms.reviewer: sericks
ms.search.scope: Operations, Core
ms.search.region: Global
ms.author: jasongre
ms.search.validFrom: 2020-02-29
ms.dyn365.ops.version: Platform update 33
ms.openlocfilehash: b4efad8423ab42bf6f7f6e2d1054307c11d31d2c
ms.sourcegitcommit: 241ada0945c72d769eaa70ae35aedbb6a3233fdf
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/02/2020
ms.locfileid: "3760402"
---
# <a name="grid-capabilities"></a>グリッド機能

[!include [banner](../includes/banner.md)]

新しいグリッド コントロールは、ユーザーの生産性を高め、データのより興味深いビューを構築し、データの有意義な洞察を得るために使用できる多くの便利で強力な機能を提供します。 この記事では、次の機能について説明します。 

-  合計の計算
-  システムの前に入力する
-  数式の評価 
-  表形式データのグループ化 (**(プレビュー) グリッド内のグループ化** 機能を使用して個別に有効化)

## <a name="calculating-totals"></a>合計の計算
Finance and Operations アプリでは、ユーザーはグリッドの数値列の下に合計を表示することができます。 これらの合計は、グリッドの下部にあるフッター セクションに表示されます。 

### <a name="showing-the-grid-footer"></a>グリッド フッターの表示
Finance and Operations アプリでは、すべての表形式のグリッドの下部にフッター領域があります。 フッターには、グリッドに表示されるデータに関連する貴重な情報が表示されます。 この情報の例を次に示します。

- テーブルで選択された行の数 (複数のレコードが選択されている場合)
- 構成済の数値列の下の総計
- データセットの行数 

このフッターは、既定では非表示になっていますが、簡単に表示することができます。 グリッドのフッターを表示するには、グリッドの列ヘッダーを右クリックし、**フッターを表示**オプションを選択します。 特定のグリッドに対してフッターをオンにすると、ユーザーがそのフッターを非表示にするまでその設定が保持されますが、これは、列ヘッダーを右クリックして**フッターを非表示**を選択することで実行できます。  **フッターの表示/非表示**アクションの配置は、今後の更新で再配置される予定です。 

### <a name="specifying-columns-with-totals"></a>合計を含む列の指定
現時点では、既定で合計を表示するように列を構成することはできません。 代わりに、この操作は、グリッドで列の幅を調整する場合と同じように、1 回の設定操作と見なされます。 列の合計を表示するように指定すると、その設定は、次にページにアクセスしたときに記録されます。  

合計を表示する列を構成するには、次の 2 つの方法があります。 

- 合計を表示する列を右クリックし、**この列の合計**を選択します。 このアクションにより、次の 3 つのイベントが発生します。

    1. フッターが表示されます。 
    2. この列の合計を表示するための設定が保存されます。 
    3. この列と、合計を表示するために以前に構成した他のすべての列の合計計算が開始されます。 合計を表示するために必要な時間は、合計しているデータセットのサイズによって異なります。

- フッターが表示されたら、合計を表示する列の下部のフッター領域にある**合計の表示**を選択します。 構成された列がない場合は、すべての数値列で**合計の表示**ボタンが使用可能になります。 

    合計に対して少なくとも 1 つの列が構成された後は、**合計の表示**ボタンは、ポイント時またはフォーカス時にのみ使用できます。 **合計を表示する**を選択するアクションによって、この列の合計を表示するための設定が保存されるので、その設定は今後ページにアクセスするときに適用されます。 フッターでは、この状態は列に表示されるダッシュによって示されます。 (または、データセットが十分に小さい場合は、合計がすぐに表示されます。)

特定の列の合計を表示する必要がなくなった場合は、列を右クリックして、**合計を非表示**を選択するか、その列のフッターで**合計を非表示**ボタンを選択します。 この設定は、今後のページへのアクセスのために保存されます。 

### <a name="calculating-totals"></a>合計の計算
フッターが表示され、列がすでに合計に対して構成されているページにアクセスすると、フッターに合計が表示される場合と表示されない場合があります。 動作は、ページ上のデータセットのサイズによって異なります。 データセットが十分小さい場合は、合計が自動的にデータセットの行数と共に表示されます。 合計に対して構成した列の下のフッターにダッシュがある場合、データセットが大きすぎてシステムが合計をすぐに表示できないため、合計を計算するには明示的なアクションが必要です。 このためには、フッターの**計算**ボタンをクリックするか、合計を表示する列を右クリックし、**この列の合計**を選択します。  

計算に時間がかかりすぎる場合は、**キャンセル** ボタンを選択して操作を取り消すことができます。 ただし、データセットが大きすぎて合計を計算できない場合があり (組織によって課される制限)、代わりにデータをさらにフィルタ処理するように通知されます。

データセットの行を更新、削除、または作成すると、合計が自動的に更新されます。  

## <a name="typing-ahead-of-the-system"></a>システムの前に入力する
多くの業務シナリオでは、システムにデータを迅速に入力する機能が非常に重要となります。 新しいグリッド コントロールが導入されるまでは、現在の行のデータしか変更できませんでした。 新しい行の作成、または別の行に切り替える前に、システムが変更を正常に検証するまで待機する必要がありました。 これらの検証が完了するまでの時間を短縮し、ユーザーの生産性を向上させる目的で、新しいグリッドではこの検証処理が非同期になるように調整されています。 そのため、前行の検証が保留されている間に、他の行に移動して変更を行うことができます。 

この新たな動作に対応するために、グリッドが編集モードとなっている場合は、行ステータスの新たな列が行選択列の右側に追加されました。 この列は、次のいずれかのステータスを示します：

- **空白** – 状態の画像がない場合は、その行がシステムによって正常に保存されたことを示します。
- **処理保留中** – この状態は、その行の変更がまだサーバーによって保存されていないが、処理すべき変更のキューに含まれていることを示します。 グリッドの外部でアクションを実行する前に、保留中のすべての変更が処理されるのを待つ必要があります。 さらに、これら行のテキストは、行の未保存状態を示すイタリック体で表示されます。 
- **無効な状態** – この状態は、行の処理中に警告またはメッセージが発生し、システムがその行の変更を保存できなかった可能性があることを示します。 以前のグリッドでは、保存操作が失敗した場合、問題を直ちに修正するために強制的に列に戻されました。 しかし、新しいグリッドでは、検証の問題が発生したことが通知されますが、行内の問題を修正するタイミングはユーザー決めることができます。 問題を修正する準備ができたら、手動でフォーカスを行に戻すことができます。 または、**この問題を修正する** アクションを選択することもできます。 このアクションにより、問題のある行にすぐにフォーカスが戻り、グリッドの内側または外側で編集を行うことができます。 この検証警告が解決されるまで、後続の保留行の処理が停止されることに注意してください。 
- **一時停止** – この状態は、行の検証により、ユーザー入力を必要とするポップアップ ダイアログ ボックスが起動されたために、サーバーの処理が一時停止されたことを示します。 ユーザーが他の行にデータを入力している可能性があるため、ポップアップ ダイアログ ボックスはすぐには表示されません。 代わりに、ユーザーが処理を再開することを選択した際に表示されます。 この状態には、ユーザーに状況を知らせる通知が伴います。 通知には、ポップアップダ イアログ ボックスを表示する **処理の再開** アクションが含まれています。  
    
サーバーが処理している場所より先にユーザーがデータを入力すると、検索の欠如、制御レベルの検証、既定値の入力など、データ入力の操作性が多少低下することが予想されます。 値の検索にドロップダウン リストが必要なユーザーは、サーバーの処理が現在の行まで追いつくまで待機することを推奨します。 コントロール レベルの検証と既定値の入力は、サーバーが当該行の処理をする際にも行われます。   

### <a name="pasting-from-excel"></a>Excel からの貼り付け
ユーザーはこれまでも、 **Excel へとエクスポートする** 機能を利用して、Finance and Operations アプリ内のグリッドから Excel にデータをエクスポートすることができました。 しかし、システムよりも前にデータを入力する機能により、新しいグリッドはExcelからテーブルをコピーして Finance and Operations アプリのグリッドに直接貼り付けることができるようになりました。 貼り付け操作を開始するグリッド セルによって、コピーした表の貼り付けを開始する位置が決まります。 グリッドの内容は、次の 2 つの場合を除き、コピーされたテーブルの内容で上書きされます。

- コピーしたテーブルの列数が、貼り付け位置を起点としたグリッド内の列数を超えた場合、ユーザーに余分な列が無視されたことが通知されます。 
- コピーされたテーブルの行数が、貼り付け位置を起点としたグリッドの行数を超える場合、既存のセルは貼り付けられた内容で上書きされ、コピーされたテーブルの余分な行はグリッドの下部に新たな行として挿入されます。 

## <a name="evaluating-math-expressions"></a>数式の評価
生産性を高めるため、ユーザーはグリッドの数値セルに公式を入力できます。 システム外部のアプリで計算を行う必要はありません。 例えば、**=15\*4** と入力して、**タブ** キーを押してフィールドの外に移動すると、システムによって式が評価され、フィールドの値として **60** が保存されます。

値が式としてシステムで認識されるようにするには、値を等号 (**=**) で開始します。 サポートされている演算子と構文の詳細については、[サポートされている数式記号](http://bugwheels94.github.io/math-expression-evaluator/#supported-maths-symbols) を参照してください。

## <a name="grouping-tabular-data"></a>表形式データのグループ化
[!include [preview banner](../includes/preview-banner.md)]

多くの場合、ビジネス ユーザーは、データのアド ホック分析を実行する必要があります。 これは、Microsoft Excel にデータをエクスポートしてピボット テーブルを使用することで実行できますが、**(プレビュー) グリッド内のグループ化** 機能は、新しいグリッド コントロール機能に依存しており、ユーザーは Finance and Operations アプリ内で表形式データを興味深い方法で整理できます。 この機能によって **合計** 機能を拡張するため、**グループ化** では、グループ レベルで小計を提供することにより、データについて有意義な洞察を得ることができます。

この機能を使用するには、グループ化する列を右クリックし、**この列別にグループ化** を選択します。 このアクションにより、選択した列でデータを並べ替え、グリッドの先頭に新しい **列によるグループ** を追加し、各グループの先頭に "ヘッダー行" を挿入します。 これらのヘッダー行では、各グループについて次の情報が提供されます。 
-  グループのデータ値 
-  列名 (この情報は、複数のグループ化レベルがサポートされている場合に特に役立ちます。)  
-  このグループのデータ行の数
-  合計を表示するように構成された列の小計

[保存されているビュー](saved-views.md) を有効にすると、このグループ化をビューの一部としてパーソナル化によって保存し、次回ページにアクセスするときに素早くアクセスできます。  

別の列で **この列別にグループ化** を選択すると、元のグループ化が置き換えられます。これは、バージョン 10.0.9/プラットフォーム更新プログラム 33 でサポートされるグループ化のレベルが 1 つだけだからです。

グリッドのグループ化を元に戻すには、グループ化列を右クリックして、**グループ化解除** を選択します。  

### <a name="expanding-and-collapsing-groups"></a>グループの展開と折りたたみ
データの最初のグループ化では、すべてのグループが展開されます。 個々のグループを折りたたむことによってデータの集計ビューを作成したり、グループの展開と折りたたみを使用してデータ間の移動を支援できます。 グループを展開したり、折りたたんだりするには、対応するグループ ヘッダー行でシェブロン (>) ボタンを選択します。 個々のグループの展開/折りたたみ状態は、個人用設定には保存され **ない** ことに注意してください。

### <a name="selecting-and-unselecting-rows-at-the-group-level"></a>グループ レベルでの行の選択と選択解除
グリッドの最初の列の上部にあるチェック ボックスをオンにすることにより、グリッド内のすべての行を選択 (または選択解除) できるのと同様に、対応するグループ ヘッダー行のチェック ボックスをオンにすることにより、グループ内のすべての行をすばやく選択 (または選択解除) することができます。 グループ ヘッダー行のチェック ボックスは、すべての行が選択されているか、行が選択されていないか、または選択されている行が一部であるかに関係なく、常にそのグループの行の現在の選択状態を反映します。

### <a name="hiding-column-names"></a>列名の非表示
データをグループ化する場合、既定の動作では、グループ ヘッダー行に列名が表示されます。 バージョン 10.0.14/プラットフォーム更新プログラム 38 以降では、**グリッド オプション** > **グループ列名の非表示** を選択して、グループ ヘッダー行の列名を非表示にすることができます。

## <a name="frequently-asked-questions"></a>よく寄せられる質問
### <a name="how-do-i-enable-the-new-grid-control-in-my-environment"></a>環境で新しいグリッド コントロールを有効有効にするにはどうすればよいですか? 

**10.0.9 / Platform update 33 以降** **新しいグリッド コントロール** 機能は、任意の環境の機能管理で直接使用できます。 他の公開プレビュー機能と同様に、実稼働でこの機能を有効にするには、[補足利用規約](https://go.microsoft.com/fwlink/?linkid=2105274) が適用されます。  

**10.0.8 / Platform update 32 および 10.0.7 / Platform update 31** **新しいグリッド コントロール** 機能は、レベル 1 (開発/テスト) およびレベル 2 (サンドボックス) 環境で有効にして、以下の手順に従って追加のテストとデザイン変更を行うことができます。

1.  **フライトを有効にする** : 次の SQL 明細書を実行します。 

    `INSERT INTO SYSFLIGHTING (FLIGHTNAME, enabled, FLIGHTSERVICEID, PARTITION) VALUES('CLIReactGridEnableFeature', 1, 0, 5637144576);`

2. **IIS をリセット**して、静的なフライティング キャッシュをフラッシュします。 

3.  **機能の検索** : **機能管理** ワークスペースに移動します。 すべての機能の一覧に **新しいグリッド コントロール** が表示されない場合は、**更新プログラムの確認** を選択します。   

4.  **機能の有効化**: 機能の一覧で **新しいグリッド コントロール** 機能を検索し、詳細ウィンドウの **直ちに有効化** を選択します。 ブラウザーの更新が必要であることに注意してください。 

以降のすべてのユーザー セッションは、新しいグリッド コントロールを有効にして開始されます。

## <a name="developer-opting-out-individual-pages-from-using-the-new-grid"></a>[開発者] 新しいグリッドの使用を個々のページからオプトアウトする 
新しいグリッドの利用に問題のあるページを発見した場合、API を使用することで、個々のフォームがレガシー グリッド コントロールを使用しつつも、システムの残りの部分が新しいグリッド コントロールを使用できるようになります。 新しいグリッドから個々のページを除外するには、フォーム `run()` のメソッドに次のコール メソッド `super()` を追加します。

 ```this.forceLegacyGrid();```

この API は、新しいグリッドのコントロールが必須化される、2021年10月のリリースまで受け入れられます。 この API を利用するために必要な問題があれば、Microsoft にご報告ください。 

## <a name="known-issues"></a>既知の問題
このセクションでは、当機能のプレビュー版で発生する、新しいグリッド コントロールにおける既知の問題の一覧を管理しています。  

### <a name="open-issues"></a>未処理の問題
-  **新しいグリッドコントロール**機能を有効にすると、ページによっては既存のグリッド コントロールを引き続き使用できる場合があります。 これは、以下のような場合に発生します :  
    -  複数の列で表示されるページにカードのリストが存在している。
    -  グループ化されたカードのリストがページに存在する。
    -  非反応の拡張可能なコントロールを含むグリッドの列が存在する。

    ユーザーがこれらの状況のいずれかに初めて遭遇した場合、ページの更新を促すメッセージが表示されます。 このメッセージが表示された後は、次の製品バージョンの更新が行われるまで、ページはすべてのユーザーに対して既存のグリッドを使用し続けます。 これらのシナリオの取り扱いを改善し、新たなグリッドを活用できるような対応については、今後のアップデートにて検討していきます。     

### <a name="fixed-as-part-of-10013"></a>10.0.13 の一環として修正済

-  [Bug 470173] 非アクティブな行のチェックボックスは、セル内の空白部分がクリックされたときに切り替わる
-  [Bug 474848] グリッドを使用した拡張プレビューが表示されない
-  [Bug 474851] 参照グループ コントロールのハイパーリンクが機能しない 
-  [Bug 471777] グリッドでフィールドを選択してモバイル アプリを編集、または作成できない
-  [KB 4569441] 複数列のカードのリスト、画像のツールチップ、一部のフィールドにおける表示オプションのレンダリングに関する問題
-  [KB 4575279] 一般仕訳帳で、すべてのマークされた行が削除されない
-  [KB 4575233] 別の行に移動しても表示オプションが復元されない
-  [KB 4571095] 誤って Enter キーを押した場合に製品受領書の転記が発生する (ページの既定のアクションの正しい処理)
-  [KB 4575437] 編集可能なコントロールを持つルックアップが予期せずに終了する
-  [KB 4569418] 配送スケジュールフォームでの重複する明細行が作成される
-  [KB 4575435] マウスポインターがフィールドの近くにない場合でも拡張プレビューが表示される場合がある
-  [KB 4575434] フィールドが変更されている場合にルックアップがフィルタ処理されない
-  [KB 4575430] パスワード フィールドの値がグリッド内でマスク処理されない
-  [KB 4569438] 仕入先取引の決済中に明細行をマークすると、"検証の問題が発生したため処理を停止しました" と表示される
-  [KB 4569434] 法人フォームを更新すると、レコード数が減少する
-  [KB 4575297] グリッドを編集してタブで移動する際に、フォーカスがタスク レコーダー ペインに移動したままとなる
-  [KB 4566773] 伝票取引の照会で、修正取引がマイナスの値として表示されない 
-  [KB 4575288] 簡単なリストで行間の境界線を選択すると、フォーカスがアクティブな行にリセットされる
-  [KB 4575287] 仕訳帳で下矢印を使用して新たな行を作成すると、フォーカスが最初の列に戻らない
-  [KB 4564819] 自由書式の請求書の明細行が削除できなし (データソースが次の設定となっているため ChangeGroupMode=ImplicitInnerOuter)
-  [KB 4563317] 画像にツールチップ/強調プレビューが表示されない

### <a name="fixed-as-part-of-10012"></a>10.0.12 の一環として修正済

- [KB 4558545] テーブル コントロールは、表示項目の内容を更新しません。
- [KB 4558570] レコードを削除した後も、項目がページに表示される。
- [KB 4558572] リスト パネル **ExtendedStyle** に関連付けられたスタイルは適用されません。
- [KB 4558573] 必要な変更がグリッドの外部にある場合、検証エラーを修正できない。
- [KB 4558584] 負の数が正しく表示されない。
- [KB 4560726] リスト ビュー コントロールを使用してリスト間のスワップを実行すると、"予期しないクライアント エラー" が発生します。
- [KB 4562141] グリッド インデックスは、新しいレコードが追加されるとオフになります。
- [KB 4562151] 日付/数値コントロールでは、 タスク レコーダー オプションの **検証** と **コピー** は使用できません。 
- [KB 4562153] [複数選択] チェック ボックスは、リスト/カード グリッドには表示されません。
- [KB 4562646] グリッド内の行を複数選択した後、グリッドの外側をクリックできない場合があります。
- [KB 4562647] セキュリティ ロール グリッドに新しい行を追加した後、**公開** ダイアログ ボックスの最初のコントロールにフォーカスがリセットされます。
- [KB 4563310] 拡張プレビューは、行を変更しても閉じません。
- [KB 4563313] ルックアップで値を選択すると、Internet Explorer で "予期しないクライアント エラー" が発生します。
- [KB 4564557] ルックアップとドロップ ダウンメニューが Internet Explorer で開かない
- [KB 4563324] **個人管理** ワークスペースを開いた後は、ナビゲーションが機能しません。

### <a name="fixed-as-part-of-10011"></a>10.0.11 の一環として修正済

- [問題432458] 一部の子コレクションの先頭に、空の行や重複した行が表示される。
- [KB 4549711] 新しいグリッド コントロールが有効になった後、支払い提案の行を正しく削除できない。
- [KB 4558374] 多態性セレクター ダイアログボックスを必要とするレコードが作成できない。
- [KB 4558375] 新しいグリッドの列にヘルプ テキストが表示されない。
- [KB 4558376] リスト パネルのグリッドが Internet Explorer にて正しい高さで表示されない。
- [KB 4558377]  **SizeToAvailable** の幅を持つコンボ ボックスの列が、一部のページで描画されない。
- [KB 4558378] ドリル スルーで間違ったレコードが開かれる場合がある。
- [KB 4558379] **ReplaceOnLookup**=**No** となっている状態でルックアップを開くとエラーが発生する。
- [KB 4558380] ページの一部が折りたたまれた直後にグリッドの空き領域が埋まらない。
- [KB 4558381] 負の数が正しく表示されない／検証の問題が発生した後、操作が行き詰まる。
- [KB 4558382]予期しないクライアント エラーが発生する。
- [KB 4558383] 最後のレコードを削除しても、グリッドの外側にあるコントロールは更新されません。
- [KB 4558587] 置換フィールドのコンボ ボックスを持つ参照グループに値が表示されない。
- [KB 4562143] 行の変更後にフィールドが更新されない／行の削除後にグリッド処理が停止する。
- [KB 4562645] リモート サーバー管理ツール (RSAT) のテストの実行中にルックアップを開いた場合、例外が発生します。

### <a name="fixed-as-part-of-10010"></a>10.0.10 の一環として修正済

- [問題414301] 新しい行を作成すると、前の行の一部のデータが表示されなくなる。
- [バグ417044] リスト形式のグリッドに空のグリッド メッセージがない。
- [KB 4539058] 一部のグリッド（多くの場合はクイックタブ）が表示されない場合がある（ズームアウトすると表示される）。
- [KB 4549734] マークした列が非表示の場合、アクティブな行がマークされたものとして扱われません。
- [KB 4549796] ビュー モードのグリッドで、値を編集できない。
- [KB 4558367] 行が変更されると、テキストの選択内容が整合しない。
- [KB 4558368] 単一選択のシナリオで、キーボードによる複数選択が可能となる。
- [KB 4558369] 状態を示す画像が、階層グリッドに表示されない。
- [KB 4558370] 新しい行がスクロールして表示されない。
- [KB 4558372] 貼り付けられたコンテンツの列数がグリッドの残り列数を超えると、新しいグリッドが処理モードのままで動かなくなる。
- [KB 4562631] 時刻の値が正確に書式設定されない。

### <a name="quality-update-for-1009platform-update-33"></a>品質更新プログラム 10.0.9／プラットフォーム更新プログラム 33

- [KB 4550367] 時刻の値が正確に書式設定されない。
