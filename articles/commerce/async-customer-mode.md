---
title: 顧客作成モードを非同期化する
description: この記事では、Microsoft Dynamics 365 Commerce の非同期顧客作成モードについて説明します。
author: gvrmohanreddy
ms.date: 08/04/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: gmohanv
ms.search.validFrom: 2021-12-17
ms.openlocfilehash: 1ac1bc842d5d12ece8951ffed18157e6f9b50d14
ms.sourcegitcommit: e0905a3af85d8cdc24a22e0c041cb3a391c036cb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/06/2022
ms.locfileid: "9228726"
---
# <a name="asynchronous-customer-creation-mode"></a>顧客作成モードを非同期化する

[!include [banner](includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

この記事では、Microsoft Dynamics 365 Commerce の非同期顧客作成モードについて説明します。

Commerce には、同期と非同期の 2 つの顧客作成モードがあります。 既定では、顧客は同期的に作成されます。 つまり、これらはリアルタイムに Commerce headquarters に作成されます。 同期の顧客作成モードは、新しい顧客がチャンネルを越えてすぐに検索可能であることが利点です。 ただし、欠点もあります。 Commerce 本社への [Commerce Data Exchange: リアルタイム サービス](dev-itpro/define-retail-channel-communications-cdx.md#realtime-service)呼び出しを生成するため、多数の顧客作成呼び出しが同時に行われると、パフォーマンスに影響を与える可能性があります。

店舗の機能プロファイルで **顧客を非同期モードで作成** オプションが **はい** に設定されている場合 (**小売とコマース \> チャネル設定 \> オンライン ストアの設定 \> 機能プロファイル**)、チャネル データベースに顧客レコードを作成するためにリアルタイム サービス コールは使用されません。 非同期の顧客作成モードは、Commerce 本部のパフォーマンスには影響しません。 一時的なグローバル固有識別子 (GUID) は、すべての新しい同期顧客レコードに割り当てられ、顧客 ID として使用されます。 この GUID は、販売時点管理 (POS) ユーザーには示されません。 代わりに、これらのユーザーには、顧客 ID として **同期を保留中** と表示されます。

> [!IMPORTANT]
> POS がオフラインになると、非同期顧客作成モードが無効になっている場合でも、システムは自動的に顧客を非同期で作成します。 したがって、同期と非同期の顧客作成の間の選択に関わらず、既述のように、Commerce headquarters の管理者は、**P-ジョブ**、**非同期モードからの顧客とビジネス パートナーの同期** ジョブ、および **1010** ジョブの定期的なバッチ ジョブを作成およびスケジュールする必要があります。これにより、非同期顧客がCommerce headquarters で同期顧客に変換されます。

## <a name="async-customer-limitations"></a>非同期顧客の制限

現在、非同期顧客の機能には次の制限があります。

- 新しい顧客 ID をチャネルに同期しない限り、ロイヤルティ カードを非同期顧客に発行することはできません。

## <a name="async-customer-enhancements"></a>非同期顧客の強化

組織が同期顧客作成モードを使用して顧客を管理し、Commerce Headquarters とのリアルタイム通信を減らすために、次の機能拡張が展開され、チャンネルの同期モードと同期モードの間に販売が許可されています。 

| 機能拡張 | Commerce バージョン | 機能の詳細 |
|---|---|---|
| チャンネル データベースから顧客情報を取得した場合のパフォーマンスの向上 | 10.0.20 以降 | パフォーマンスを改善するために、顧客エンティティは小さなエンティティに分割されます。 その後、必要な情報だけがチャンネル データベースから取得されます。 |
| チェック アウト中にアドレスを非同期的に作成する機能 | 10.0.22 以降 | <p>機能スイッチ: **顧客住所の非同期作成の有効化**</p><p>機能の詳細:</p><ul><li>リアルタイムのサービスを Commerce Headquarters に呼び出さずに住所を追加する機能</li><li>レコードID (**RecId** 値) を使用せずにチャンネル データベースのアドレスを一意に識別する 機能</li><li>住所作成のタイムスタンプの追跡</li><li>Commerce Headquarters での住所の同期</li></ul><p>この機能は、同期顧客と非同期顧客の両方に影響します。 非同期で作成したアドレスに加えて、非同期的にアドレスを編集するには、**非同期モードで顧客を編集する** 機能を有効にする必要があります。</p> |
| 同期顧客作成と非同期式の顧客作成の間の間隔を設定できます。 | 10.0.24 以降 | <p>機能スイッチ: **顧客の拡張非同期作成を有効にする**</p><p>機能の詳細 : 顧客を非同期的に作成する一方で、タイトル、既定の顧客からの所属、副次的な連絡先情報 (電話番号やメール アドレス) などの追加情報をキャプチャする機能</p> |
| わかりやすいエラー メッセージ | 10.0.28 以降 | これらの拡張機能は、同期の実行中にユーザーがすぐに情報を編集できない場合に、ユーザー を処理するためのエラー メッセージを改善するのに役立ちます。 これらの拡張機能を有効にするには、Commerce サイト ビルダーの **サイト設定** 拡張機能\> で、**非同期顧客設定** を使用して、特定の UI 要素を変更できません。 |
| 顧客情報を非同期的に編集する機能 | 10.0.29 以降 | <p>機能スイッチ: **非同期モードでの顧客の編集の有効化**</p><p>機能の詳細 : 顧客データを非同期的に編集する機能</p><p>顧客情報の非同期編集に関連する問題に関する一般的な質問への回答については、[非同期顧客作成モードに関するよくあるご質問](async-customer-mode-faq.md) を参照してください。</p> |

### <a name="feature-switch-hierarchy"></a>機能スイッチの階層

機能切り替えの階層により、**非同期モードで顧客を編集する** 機能を有効にする前に、次の機能を有効にする必要があります。 

- **顧客注文および顧客トランザクションのパフォーマンスの向上** - この機能は、Commerce バージョン 10.0.28 リリース以降必須です。 
- **顧客の拡張非同期作成を有効にする**
- **顧客住所の非同期作成の有効化**

一般的なトラブルシューティングの質問への回答については、[非同期顧客作成モードに関するよくあるご質問](async-customer-mode-faq.md) を参照してください。 

前述した機能を有効にした後、Commerce 本部の管理者は、**P ジョブ**、**非同期モードからの顧客とビジネス パートナーの同期** ジョブ、および **1010** ジョブの定期的なバッチ ジョブを作成およびスケジュールする必要があります。これにより、すべての非同期顧客が Commerce 本社で同期顧客に変換されます。

### <a name="customer-creation-in-pos-offline-mode"></a>POS オフライン モードでの顧客作成

前述の通り、POS がオフラインになると、非同期顧客作成モードが無効になっている場合でも、システムは自動的に顧客を非同期で作成します。 したがって、Commerce 本社の管理者は、**P ジョブ**、**非同期モードからの顧客とビジネス パートナーの同期** ジョブ、および **1010** ジョブの定期的なバッチ ジョブを作成およびスケジュールする必要があります。これにより、すべての非同期顧客が Commerce 本社で同期顧客に変換されます。

> [!NOTE]
> **コマース チャネル スキーマ** ページで **共有顧客データ テーブルのフィルター** オプションが **はい** に設定されている場合 (**小売とコマース \> 本社の設定 \> コマース スケジューラ \> チャネル データベース グループ**)、顧客レコードは POS オフライン モードでは作成されません。 詳細については、[オフライン データの除外](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion)を参照してください。

## <a name="additional-resources"></a>追加リソース

[店舗内の顧客管理](customer-mgmt-stores.md)

[非同期顧客を同期顧客に変換する](convert-async-to-sync.md)

[顧客属性](dev-itpro/customer-attributes.md)

[オフライン データの除外](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion)
