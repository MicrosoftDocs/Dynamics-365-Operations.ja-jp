---
title: 分散型注文管理 (DOM)
description: このトピックでは、Dynamics 365 Commerce の分散型注文管理 (DOM) の機能について説明します。
author: josaw1
manager: AnnBe
ms.date: 01/08/2021
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2018-11-15
ms.dyn365.ops.version: ''
ms.openlocfilehash: 9ace77dba534615874e52ba95ee9dc6d71951d9e
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/15/2021
ms.locfileid: "5204331"
---
# <a name="distributed-order-management-dom"></a><span data-ttu-id="6bcc7-103">分散型注文管理 (DOM)</span><span class="sxs-lookup"><span data-stu-id="6bcc7-103">Distributed order management (DOM)</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="6bcc7-104">コマース業のあり方が変化する中で、小売企業は、パーソナライズされた顧客エンゲージメント、オムニチャネルのエクスペリエンス、スムーズなやり取りを実現するために力を尽くしています。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-104">In the new paradigm for commerce operations, retailers strive to provide personalized customer engagement, omni-channel experiences, and frictionless interactions.</span></span> <span data-ttu-id="6bcc7-105">選択肢が非常に多くなっているため、消費者は最も快適に利用できるところで買い物をするようになっています。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-105">Because so many choices are available, consumers will shop wherever they can have the most favorable experience.</span></span> <span data-ttu-id="6bcc7-106">多くの場合、もはや消費者が購入を決定する決め手は、価格と商品ではなくなっています。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-106">In many cases, prices and products are no longer the top deciding factors for consumers.</span></span>

<span data-ttu-id="6bcc7-107">カスタマー エクスペリエンスを向上させるには、すべてのチャネルの在庫をリアルタイムに確認できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-107">To help improve the customer experience, retailers must have visibility into their inventory in real time, across all their channels.</span></span> <span data-ttu-id="6bcc7-108">すべての在庫を 1 か所で包括的に確認できれば、注文のフルフィルメント、配賦、流通の最適化に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-108">A single, holistic view of all the inventory can help optimize order fulfillment, allocation, and distribution.</span></span> <span data-ttu-id="6bcc7-109">そのため、分散型注文管理 (DOM) システムの採用と導入は、小売企業にとって必要不可欠になりつつあります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-109">Therefore, adoption and implementation of a distributed order management (DOM) system are becoming more imperative for retailers.</span></span>

<span data-ttu-id="6bcc7-110">DOM により、複雑にネットワーク化されたシステムやプロセスの全体を通じて、注文のフルフィルメントを最適化できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-110">DOM optimizes order fulfillment across a complex network of systems and processes.</span></span> <span data-ttu-id="6bcc7-111">DOM では、組織全体の在庫を単一のグローバルなビューにまとめることで、インテリジェントに注文を管理できます。それにより、正確に、しかもコスト効率よく注文のフルフィルメントを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-111">It relies on a single, global view of inventory across the whole organization to intelligently manage orders, so that they are fulfilled accurately and in a more cost-effective manner.</span></span> <span data-ttu-id="6bcc7-112">DOM は、小売企業のサプライ チェーンの効率を改善することにより、顧客の期待に応えられるよう支援します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-112">By improving the efficiency of a retailer's supply chain, DOM helps the retailer better meet customer expectations.</span></span>

<span data-ttu-id="6bcc7-113">次の図は、DOM システムにおける販売注文のライフサイクルを示しています。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-113">The following illustration shows the lifecycle of a sales order in a DOM system.</span></span>

<span data-ttu-id="6bcc7-114">![DOM のコンテキストにおける販売注文のライフサイクル](./media/flow.png "DOM のコンテキストにおける販売注文のライフサイクル")</span><span class="sxs-lookup"><span data-stu-id="6bcc7-114">![Sales order lifecycle in the context of DOM](./media/flow.png "Sales order lifecycle in the context of DOM")</span></span>

## <a name="set-up-dom"></a><span data-ttu-id="6bcc7-115">DOM を設定する</span><span class="sxs-lookup"><span data-stu-id="6bcc7-115">Set up DOM</span></span>

1. <span data-ttu-id="6bcc7-116">**システム管理 \> 設定 \> ライセンス コンフィギュレーション** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-116">Go to **System administration \> Setup \> License configuration**.</span></span>
2. <span data-ttu-id="6bcc7-117">**コンフィギュレーション キー** タブで **コマース** ノードを展開し、**配分済み注文の管理** チェック ボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-117">On the **Configuration keys** tab, expand the **Commerce** node, and then select the **Distributed Order Management** check box.</span></span>
3. <span data-ttu-id="6bcc7-118">**Retail と Commerce \> 配分済み注文の管理 \> 設定 \> DOM パラメーター** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-118">Go to **Retail and Commerce \> Distributed order management \> Setup \> DOM parameters**.</span></span>
4. <span data-ttu-id="6bcc7-119">**一般** タブで、次の値を設定します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-119">On the **General** tab, set the following values:</span></span>

    - <span data-ttu-id="6bcc7-120">**配分済み注文の管理を有効化する** – このオプションでは **はい** を設定します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-120">**Enable distributed order management** – Set this option to **Yes**.</span></span>
    - <span data-ttu-id="6bcc7-121">**DOM に対する Bing 地図の使用状況を確認する** – このオプションでは **はい** を設定します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-121">**Confirm Bing Maps usage for DOM** – Set this option to **Yes**.</span></span>


        > [!NOTE]
        > <span data-ttu-id="6bcc7-122">このオプションを **はい** に設定できるのは、**Commerce 共有パラメーター** ページの **Bing 地図** タブにある **Bing 地図を有効化** オプション (**Retail と Commerce \> 本社の設定 \> パラメーター \> マース共有パラメーター** の順にクリックします) も **はい** になっていて、かつ、**Bing 地図キー** に有効なキーが入力されている場合のみです。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-122">You can set this option to **Yes** only if the **Enable Bing Maps** option on the **Bing Maps** tab of the **Commerce shared parameters** page (**Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**) is also set to **Yes**, and if a valid key is entered in the **Bing Maps key** field.</span></span>
        >
        > <span data-ttu-id="6bcc7-123">[Bing 地図開発センター](https://www.bingmapsportal.com/) ポータルでは、Bing 地図のAPI キーへのアクセスを、指定したドメインのセットに制限できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-123">The [Bing Maps Dev Center](https://www.bingmapsportal.com/) portal allows you to restrict access on your Bing Maps API keys to a set of domains that you specify.</span></span> <span data-ttu-id="6bcc7-124">この機能を使用すると、キーが検証されるリファラー値または IP アドレス範囲の厳密なセットを定義できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-124">With this feature, customers can define a strict set of referrer values or IP address ranges that the key will be validated against.</span></span> <span data-ttu-id="6bcc7-125">許可リストからの要求は通常どおり処理されますが、リスト外からの要求にはアクセス拒否の応答が返されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-125">Requests originating from your allow list will process normally, while requests from outside of your list will return an access denied response.</span></span> <span data-ttu-id="6bcc7-126">API キーへのドメイン セキュリティの追加はオプションであり、そのままのキーは引き続き機能します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-126">Adding domain security to your API key is optional and keys left as-is will continue to function.</span></span> <span data-ttu-id="6bcc7-127">キーの許可リストは、他のすべてのキーから独立しており、キーごとに異なるルールを設定できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-127">The allow list for a key is independent from all of your other keys, enabling you to have distinct rules for each of your keys.</span></span> <span data-ttu-id="6bcc7-128">分散型注文管理では、ドメイン参照プロパティの設定はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-128">Distributed Order Management does not support the setting up of domain-referred properties.</span></span>


    - <span data-ttu-id="6bcc7-129">**留保期間 (日)** – DOM 実行で生成されるフルフィルメント計画を、システム内で保持する期間を指定します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-129">**Retention period in days** – Specify how long the fulfillment plans that DOM runs generate are kept in the system.</span></span> <span data-ttu-id="6bcc7-130">**DOM フルフィルメント データ削除ジョブの設定** のバッチ ジョブでは、ここで指定した日数を経過したフルフィルメント計画がすべて削除されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-130">The **DOM fulfillment data deletion job setup** batch job will delete any fulfillment plan that is older than the number of days that you specify here.</span></span>
    - <span data-ttu-id="6bcc7-131">**拒否期間 (日)** – ここで指定した期間を経過すると、否認済の注文明細行を同じ場所に割り当てられるようになります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-131">**Rejection period (in days)** – Specify how much time must pass before a rejected order line can be assigned to the same location.</span></span>

5. <span data-ttu-id="6bcc7-132">**ソルバー** タブで、次の値を設定します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-132">On the **Solver** tab, set the following values:</span></span>

    - <span data-ttu-id="6bcc7-133">**最大自動フルフィルメント試行回数** – DOM エンジンが注文明細行の場所に対する仲介を試行する回数を指定します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-133">**Max auto-fulfillment attempts** – Specify how many times the DOM engine will try to broker an order line to a location.</span></span> <span data-ttu-id="6bcc7-134">指定された試行回数で、DOM エンジンが注文明細行を場所に対して仲介できない場合、注文明細行に例外のフラグが設定されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-134">If the DOM engine can't broker an order line to a location in the specified number of attempts, it will flag the order line as an exception.</span></span> <span data-ttu-id="6bcc7-135">フラグが設定された明細行は、手動でステータスがリセットされない限り、その後の実行ではスキップされます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-135">It will then skip that line in future runs until the status is manually reset.</span></span>
    - <span data-ttu-id="6bcc7-136">**ローカル店舗地域半径** – 値を入力します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-136">**Local store region radius** – Enter a value.</span></span> <span data-ttu-id="6bcc7-137">このフィールドは、場所をどのようにグループ化するか、距離的に同等と見なすかを判断するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-137">This field helps determine how locations are grouped and considered equal in terms of distance.</span></span> <span data-ttu-id="6bcc7-138">たとえば、**100** と入力した場合、フルフィルメントの住所から半径 100 マイル以内の店舗または物流センターは、距離的に同等と見なされます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-138">For example, if you enter **100**, every store or distribution center within a 100-mile radius of the fulfillment address is considered equal in terms of distance.</span></span>
    - <span data-ttu-id="6bcc7-139">**ソルバー タイプ** – 値を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-139">**Solver type** – Select a value.</span></span> <span data-ttu-id="6bcc7-140">Commerce では、**本番ソルバー** と **簡易ソルバー** の 2 種類のソルバー タイプがあります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-140">Two solver types are released with Commerce: **Production Solver** and **Simplified Solver**.</span></span> <span data-ttu-id="6bcc7-141">DOM を実行するすべてのマシン (DOMBatch グループに含まれるすべてのサーバー) で、**本番ソルバー** を選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-141">For all machines that will run DOM (that is, all servers that are part of the DOMBatch group), **Production Solver** must be selected.</span></span> <span data-ttu-id="6bcc7-142">本番ソルバーでは、実稼働環境に既定でライセンスされ、配置される特別なライセンス キーが必要です。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-142">The Production Solver requires the special license key that, by default, is licensed and deployed in production environments.</span></span> <span data-ttu-id="6bcc7-143">非実稼働環境では、このライセンス キーは手動で配置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-143">For non-production environments, this license key must be manually deployed.</span></span> <span data-ttu-id="6bcc7-144">ライセンス キーを手動で配置するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-144">To manually deploy the license key, follow these steps:</span></span>

        1. <span data-ttu-id="6bcc7-145">Microsoft Dynamics Lifecycle Services で、共有アセット ライブラリを開き、アセット タイプとして **モデル** を選択して、**DOM ライセンス** ファイルをダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-145">In Microsoft Dynamics Lifecycle Services, open the Shared asset library, select **Model** as the asset type, and download the **DOM license** file.</span></span>
        1. <span data-ttu-id="6bcc7-146">Microsoft インターネット インフォメーション サービス (IIS) マネージャーを起動して **AOSService Web サイト** を右クリックし、**エクスプローラー** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-146">Start Microsoft Internet Information Services (IIS) Manager, right-click **AOSService website**, and then select **Explore**.</span></span> <span data-ttu-id="6bcc7-147">エクスプローラー ウィンドウで **\<AOS service root\>\\webroot** が開きます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-147">A Windows Explorer window is opened at **\<AOS service root\>\\webroot**.</span></span> <span data-ttu-id="6bcc7-148">\<AOS Service root\> のパスをメモしておいてください。このパスは次の手順で使用します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-148">Make a note of the \<AOS Service root\> path, because you will use it in the next step.</span></span>
        1. <span data-ttu-id="6bcc7-149">**\<AOS Service root\>\\PackagesLocalDirectory\\DOM\\bin** ディレクトリにある構成ファイルをコピーします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-149">Copy the configuration file in the **\<AOS Service root\>\\PackagesLocalDirectory\\DOM\\bin** directory.</span></span>
        1. <span data-ttu-id="6bcc7-150">本社クライアントで、**DOM パラメーター** ページを開きます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-150">Go to the Headquarters client, and open the **DOM parameters** page.</span></span> <span data-ttu-id="6bcc7-151">**ソルバー** タブの **ソルバー タイプ** フィールドで、**本番ソルバー** を選択し、エラー メッセージが表示されないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-151">On the **Solver** tab, in the **Solver type** field, select **Production solver**, and confirm that no error messages appear.</span></span>


        > [!NOTE]
        > <span data-ttu-id="6bcc7-152">簡易ソルバーは、特別なライセンスを配置せずに DOM 機能を試すことができるように、用意されています。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-152">The Simplified Solver is provided so that retailers can try out the DOM feature without having to deploy the special license.</span></span> <span data-ttu-id="6bcc7-153">実稼働環境では、簡易ソルバーを使用しないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-153">Organizations should not use the Simplified Solver in production environments.</span></span>
        >
        > <span data-ttu-id="6bcc7-154">本番ソルバーでは、パフォーマンス (1 回の実行で処理できる注文および注文明細行の数) および結果の収束性 (注文をバッチ処理するとシナリオによっては最適な結果が出ない場合があります) が向上します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-154">The Production Solver improves performance (such as the number of orders and order lines that can be handled in a run) and convergence of results (since a batch of orders might not yield the best result in some scenarios).</span></span> <span data-ttu-id="6bcc7-155">**部分注文** ルールや、**場所の最大数** ルールなどの一部のルールでは、本番ソルバーが必要です。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-155">Some rules like the **Partial orders** rule and the **Maximum number of locations** rule require Production Solver.</span></span>
     
6. <span data-ttu-id="6bcc7-156">**Retail と Commerce \> 配分済み注文の管理 \> 設定 \> DOM パラメーター** の順にクリックして戻ります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-156">Go back to **Retail and Commerce \> Distributed order management \> Setup \> DOM parameters**.</span></span>
7. <span data-ttu-id="6bcc7-157">**番号順序** タブで、さまざまな DOM エンティティに必要な番号順序を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-157">On the **Number sequences** tab, assign the required number sequences to the various DOM entities.</span></span>

    > [!NOTE]
    > <span data-ttu-id="6bcc7-158">エンティティに番号順序を割り当てるには、**番号順序** ページ (**組織管理 \> 番号順序 \> 番号順序** の順にクリックします) で定義しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-158">Before the number sequences can be assigned to the entities, they must be defined on the **Number sequences** page (**Organization administration \> Number sequences \> Number sequences**).</span></span>

8. <span data-ttu-id="6bcc7-159">DOM 機能では、さまざまなタイプの DOM ルールの定義がサポートされており、企業のビジネス ニーズに応じて、複数のルールを構成することができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-159">The DOM feature supports the definition of various types of DOM rules, and organizations can configure multiple rules, depending on their business needs.</span></span> <span data-ttu-id="6bcc7-160">DOM ルールは、場所のグループまたは個々の場所ごと、および、特定の製品カテゴリ、製品、バリアントに対して定義することができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-160">DOM rules can be defined for a group of locations or individual locations, and for a specific product category, product, or variant.</span></span> <span data-ttu-id="6bcc7-161">DOM ルールに使用する必要がある場所のグループを作成するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-161">To create the grouping of locations that must be used for the DOM rules, follow these steps:</span></span>

    1. <span data-ttu-id="6bcc7-162">**Retail と Commerce \> チャネル設定 \> フルフィルメント グループ** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-162">Go to **Retail and Commerce \> Channel setup \> Fulfillment groups**.</span></span>
    2. <span data-ttu-id="6bcc7-163">**新規** を選択し、新しいグループの新しい名前と説明を入力します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-163">Select **New**, and enter a name and description for the new group.</span></span>
    3. <span data-ttu-id="6bcc7-164">**保存** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-164">Select **Save**.</span></span>
    4. <span data-ttu-id="6bcc7-165">**行の追加** を選択して、単一の場所をグループに追加します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-165">Select **Add line** to add a single location to the group.</span></span> <span data-ttu-id="6bcc7-166">または、**行の追加** を選択して、複数の場所を追加します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-166">Alternatively, select **Add lines** to add multiple locations.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="6bcc7-167">Commerce バージョン 10.0.12 とそれ以上のバージョンでは、**フルフィルメント グループ内で、場所を出荷または集荷と指定する機能** が **機能管理** ワークスペースで有効になっている必要があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-167">In Commerce version 10.0.12 and higher, **Ability to specify locations as 'Shipping' or 'Pickup' enabled within Fulfillment group** must be enabled in the **Feature Management** workspace.</span></span>
    >
    > <span data-ttu-id="6bcc7-168">この機能を使用すると、**フルフィルメント グループ** ページに新しいコンフィギュレーションを追加して、倉庫を出荷に使用できるかどうか、倉庫/店舗の組み合わせを出荷、集荷、またはその両方に使用できるかを定義できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-168">This feature add new configurations on the **Fulfillment group** page so you can define if the warehouse can be used for shipping or if the warehouse/store combination can be used for shipping, pickup, or both.</span></span> 
    >
    > <span data-ttu-id="6bcc7-169">機能を有効にすると、POS で集荷または出荷の注文を作成するときに、場所の選択に使用できるオプションが更新されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-169">If you enable the feature, the options available for location selection when you create pickup or shipment orders in POS will be updated.</span></span>
    >
    > <span data-ttu-id="6bcc7-170">この機能を有効にすると、[すべて出荷] または [選択したものを出荷] を選択した場合にも、POS のページが更新されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-170">Enabling the feature also results in updated pages in POS when the "ship all" or "ship selected" operations are selected.</span></span>

9. <span data-ttu-id="6bcc7-171">ルールを定義するには、**Retail と Commerce \> 配分済み注文の管理 \> 設定 \> ルールを管理する** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-171">To define rules, go to **Retail and Commerce \> Distributed order management \> Setup \> Manage rules**.</span></span> <span data-ttu-id="6bcc7-172">次の DOM ルールが現在サポートされています。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-172">The following DOM rules are currently supported:</span></span>

    - <span data-ttu-id="6bcc7-173">**最小在庫ルール** – このルール タイプでは、一定量の製品を注文のフルフィルメント以外の目的で確保しておくことができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-173">**Minimum inventory rule** – This rule type lets organizations "ring fence" a specific quantity of a product for purposes other than order fulfillment.</span></span> <span data-ttu-id="6bcc7-174">たとえば、店舗にある在庫のすべてを、DOM で注文のフルフィルメントに使用されると困る場合があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-174">For example, organizations might not want DOM to consider all the inventory that is available in a store for order fulfillment.</span></span> <span data-ttu-id="6bcc7-175">一定の在庫は、来店する顧客用に確保しておく必要があるためです。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-175">Instead, they might want to reserve some inventory for walk-in customers.</span></span> <span data-ttu-id="6bcc7-176">このルール タイプを使用すると、1 つの場所または場所のグループごとに、製品のカテゴリ、個別の製品、または製品バリアントについて、確保しておく必要がある最小限の在庫を定義できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-176">When this rule type is used, you can define the minimum inventory to keep for a category of products, an individual product, or a product variant per location or group of locations.</span></span>
    - <span data-ttu-id="6bcc7-177">**フルフィルメント場所優先順位ルール** – このルール タイプでは、場所の階層を定義して、DOM エンジンが特定の製品についてフルフィルメント場所を特定する際の優先順位を指定できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-177">**Fulfillment location priority rule** – This rule type lets organizations define a hierarchy of locations to establish the priority that the DOM engine considers when it tries to identify fulfillment locations for specific products.</span></span> <span data-ttu-id="6bcc7-178">優先順位の有効な範囲は 1 ～ 10 で、1 が最も優先度が高く、10 が最も優先度が低くなります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-178">The valid range of priorities is 1 through 10, where 1 is the highest priority and 10 is the lowest priority.</span></span> <span data-ttu-id="6bcc7-179">優先順位の高い場所が、優先順位の低い場所よりも先に検討対象となります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-179">Locations that have higher priority are considered before locations that have lower priority.</span></span> <span data-ttu-id="6bcc7-180">ルールが厳格な制約として定義されている場合、注文は、優先順位が定義されている場所にのみ仲介されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-180">If the rule is defined as a hard constraint rule, orders are brokered only to locations that priorities are defined for.</span></span>
    - <span data-ttu-id="6bcc7-181">**部分注文ルール** – このルールでは、注文または注文明細行の部分的なフルフィルメントを許可するかどうかを定義できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-181">**Partial orders rule** – This rule lets organizations define whether an order or order lines can be partially fulfilled.</span></span> <span data-ttu-id="6bcc7-182">次のパラメーターを使用できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-182">The following parameters are available:</span></span>

        - <span data-ttu-id="6bcc7-183">**部分注文をフルフィルメントしますか。**</span><span class="sxs-lookup"><span data-stu-id="6bcc7-183">**Fulfill partial orders?**</span></span> <span data-ttu-id="6bcc7-184">– このオプションを **はい** に設定すると、注文明細行の数量の一部のみのフルフィルメントが可能になります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-184">– If this option is set to **Yes**, DOM can fulfill only part of the quantity on an order line.</span></span> <span data-ttu-id="6bcc7-185">この部分フルフィルメントは、注文明細行を分割して行われます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-185">This partial fulfillment is achieved by splitting the order line.</span></span>
        - <span data-ttu-id="6bcc7-186">**部分注文をフルフィルメントしますか。**</span><span class="sxs-lookup"><span data-stu-id="6bcc7-186">**Fulfill partial lines?**</span></span> <span data-ttu-id="6bcc7-187">– このオプションを **はい** に設定すると、注文明細行の数量の一部のフルフィルメントが可能になります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-187">– If this option is set to **Yes**, DOM can fulfill a partial quantity of order lines.</span></span> <span data-ttu-id="6bcc7-188">この部分フルフィルメントは、注文明細行を分割して行われます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-188">This partial fulfillment is achieved by splitting the order line.</span></span>
        - <span data-ttu-id="6bcc7-189">**1 つの場所からのみ注文をフルフィルメントしますか** – このオプションを **はい** に設定すると、注文のすべての明細行のフルフィルメントが単一の場所から行われます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-189">**Fulfill order from one location only** – If this option is set to **Yes**, DOM makes sure that all lines on an order are fulfilled from a single location.</span></span>


        <span data-ttu-id="6bcc7-190">次の表は、これらのパラメーターを組み合わせて定義した場合の動作を説明したものです。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-190">The following table explains the behavior when a combination of these parameters is defined.</span></span>

        | <span data-ttu-id="6bcc7-191">組み合わせ番号</span><span class="sxs-lookup"><span data-stu-id="6bcc7-191">Combination number</span></span> | <span data-ttu-id="6bcc7-192">部分注文をフルフィルメント</span><span class="sxs-lookup"><span data-stu-id="6bcc7-192">Fulfill partial orders</span></span> | <span data-ttu-id="6bcc7-193">部分注文をフルフィルメント</span><span class="sxs-lookup"><span data-stu-id="6bcc7-193">Fulfill partial lines</span></span> | <span data-ttu-id="6bcc7-194">1 つの場所からのみ注文をフルフィルメント</span><span class="sxs-lookup"><span data-stu-id="6bcc7-194">Fulfill order from one location only</span></span> | <span data-ttu-id="6bcc7-195">説明</span><span class="sxs-lookup"><span data-stu-id="6bcc7-195">Description</span></span> |
        |------|------------------------|-----------------------|--------------------------------------|-------------|
        | <span data-ttu-id="6bcc7-196">1</span><span class="sxs-lookup"><span data-stu-id="6bcc7-196">1</span></span>    | <span data-ttu-id="6bcc7-197">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-197">Yes</span></span>                    | <span data-ttu-id="6bcc7-198">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-198">Yes</span></span>                   | <span data-ttu-id="6bcc7-199">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-199">Yes</span></span>                                  | <span data-ttu-id="6bcc7-200">注文の一部の明細行のフルフィルメントができ、個々の明細行の部分的なフルフィルメントもできますが、すべての明細行は、DOM が実行されているインスタンスの同じ場所からである必要があります </span><span class="sxs-lookup"><span data-stu-id="6bcc7-200">A few lines of the order can be fulfilled, and individual lines can be partially fulfilled, but all the lines must be from the same location in an instance of the DOM run.</span></span> <span data-ttu-id="6bcc7-201">(この組み合わせは、現在サポートされていません)。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-201">(This combination isn't currently supported.)</span></span> |
        | <span data-ttu-id="6bcc7-202">2</span><span class="sxs-lookup"><span data-stu-id="6bcc7-202">2</span></span>    | <span data-ttu-id="6bcc7-203">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-203">Yes</span></span>                    | <span data-ttu-id="6bcc7-204">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-204">No</span></span>                    | <span data-ttu-id="6bcc7-205">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-205">Yes</span></span>                                  | <span data-ttu-id="6bcc7-206">注文の一部の明細行のフルフィルメントができますが、個々の明細行の部分的なフルフィルメントはできません。フルフィルメントされる明細行はすべて、DOM が実行されているインスタンスの同じ場所からである必要があります。 </span><span class="sxs-lookup"><span data-stu-id="6bcc7-206">A few lines of the order can be fulfilled, but individual lines can't be partially fulfilled, and all the fulfilled lines must be from the same location in an instance of the DOM run.</span></span> <span data-ttu-id="6bcc7-207">(この組み合わせは、現在サポートされていません)。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-207">(This combination isn't currently supported.)</span></span> |
        | <span data-ttu-id="6bcc7-208">3</span><span class="sxs-lookup"><span data-stu-id="6bcc7-208">3</span></span>    | <span data-ttu-id="6bcc7-209">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-209">Yes</span></span>                    | <span data-ttu-id="6bcc7-210">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-210">Yes</span></span>                   | <span data-ttu-id="6bcc7-211">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-211">No</span></span>                                   | <span data-ttu-id="6bcc7-212">注文の一部の明細行のフルフィルメントができ、個々の明細行の部分的なフルフィルメントもできます。各明細行のフルフィルメントは、DOM が実行されているインスタンスの複数の場所から行うことができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-212">A few lines of the order can be fulfilled, individual lines can be partially fulfilled, and each line can be fulfilled from more than one location in an instance of the DOM run.</span></span> |
        | <span data-ttu-id="6bcc7-213">4\*</span><span class="sxs-lookup"><span data-stu-id="6bcc7-213">4\*</span></span>  | <span data-ttu-id="6bcc7-214">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-214">No</span></span>                     | <span data-ttu-id="6bcc7-215">適用できません</span><span class="sxs-lookup"><span data-stu-id="6bcc7-215">Not applicable</span></span>        | <span data-ttu-id="6bcc7-216">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-216">No</span></span>                                   | <span data-ttu-id="6bcc7-217">注文明細行はすべてフルフィルメントする必要があり、個々の明細行を部分的にフルフィルメントすることはできません。各注文明細行は、複数の場所からフルフィルメントすることができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-217">All order lines must be fulfilled, individual lines can't be partially fulfilled, and each order line can be fulfilled from a different location.</span></span> |
        | <span data-ttu-id="6bcc7-218">5\*</span><span class="sxs-lookup"><span data-stu-id="6bcc7-218">5\*</span></span>  | <span data-ttu-id="6bcc7-219">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-219">No</span></span>                     | <span data-ttu-id="6bcc7-220">適用できません</span><span class="sxs-lookup"><span data-stu-id="6bcc7-220">Not applicable</span></span>        | <span data-ttu-id="6bcc7-221">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-221">Yes</span></span>                                  | <span data-ttu-id="6bcc7-222">注文明細行はすべてフルフィルメントする必要があり、個々の明細行を部分的にフルフィルメントすることはできません。すべての注文明細行は、1 つの場所からのみ配送できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-222">All order lines must be fulfilled, individual lines can't be partially fulfilled, and all the order lines can be delivered from one location only.</span></span> |
        | <span data-ttu-id="6bcc7-223">6\*</span><span class="sxs-lookup"><span data-stu-id="6bcc7-223">6\*</span></span>  | <span data-ttu-id="6bcc7-224">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-224">No</span></span>                     | <span data-ttu-id="6bcc7-225">適用できません</span><span class="sxs-lookup"><span data-stu-id="6bcc7-225">Not applicable</span></span>        | <span data-ttu-id="6bcc7-226">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-226">No</span></span>                                   | <span data-ttu-id="6bcc7-227">この組み合わせは、4 の組み合わせと同じように機能します。**部分注文をフルフィルメントしますか** が **いいえ** に設定されている場合、**部分注文をフルフィルメントしますか** を **はい** に設定できないためです。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-227">This combination works like combination 4, because **Fulfill partial lines** can't be set to **Yes** when **Fulfill partial orders** is set to **No**.</span></span> |
        | <span data-ttu-id="6bcc7-228">7\*</span><span class="sxs-lookup"><span data-stu-id="6bcc7-228">7\*</span></span>  | <span data-ttu-id="6bcc7-229">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-229">No</span></span>                     | <span data-ttu-id="6bcc7-230">適用できません</span><span class="sxs-lookup"><span data-stu-id="6bcc7-230">Not applicable</span></span>        | <span data-ttu-id="6bcc7-231">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-231">Yes</span></span>                                  | <span data-ttu-id="6bcc7-232">この組み合わせは、5 の組み合わせと同じように機能します。**部分注文をフルフィルメントしますか** が **いいえ** に設定されている場合、**部分注文をフルフィルメントしますか** を **はい** に設定できないためです。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-232">This combination works like combination 5, because **Fulfill partial lines** can't be **Yes** when **Fulfill partial orders** is **No**.</span></span> |
        | <span data-ttu-id="6bcc7-233">8</span><span class="sxs-lookup"><span data-stu-id="6bcc7-233">8</span></span>    | <span data-ttu-id="6bcc7-234">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-234">Yes</span></span>                    | <span data-ttu-id="6bcc7-235">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-235">No</span></span>                    | <span data-ttu-id="6bcc7-236">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-236">No</span></span>                                   | <span data-ttu-id="6bcc7-237">注文の一部の明細行のフルフィルメントができますが、個々の明細行の部分的なフルフィルメントはできません。さまざまな明細行のフルフィルメントを、DOM が実行されているインスタンスの複数の場所から行うことができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-237">A few lines of the order can be fulfilled, but individual lines can't be partially fulfilled, and the various order lines can be fulfilled from more than one location in an instance of the DOM run.</span></span> |
        | <span data-ttu-id="6bcc7-238">9\*</span><span class="sxs-lookup"><span data-stu-id="6bcc7-238">9\*</span></span>  | <span data-ttu-id="6bcc7-239">いいえ</span><span class="sxs-lookup"><span data-stu-id="6bcc7-239">No</span></span>                     | <span data-ttu-id="6bcc7-240">適用できません</span><span class="sxs-lookup"><span data-stu-id="6bcc7-240">Not applicable</span></span>        | <span data-ttu-id="6bcc7-241">はい</span><span class="sxs-lookup"><span data-stu-id="6bcc7-241">Yes</span></span>                                  | <span data-ttu-id="6bcc7-242">注文明細行はすべてフルフィルメントする必要があり、すべての注文明細行は、1 つの場所からのみフルフィルメントを行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-242">All order lines must be fulfilled, and all the order lines must be fulfilled from one location only.</span></span> |

        <span data-ttu-id="6bcc7-243">\*たとえば、**部分注文をフルフィルメントしますか** が **いいえ** に設定されている場合、**部分注文をフルフィルメントしますか** は、実際の設定にかかわらず、必ず **いいえ** に設定されているものと見なされます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-243">\* If **Fulfill partial orders** is set to **No**, **Fulfill partial lines** is always considered to be set to **No**, regardless of how it's actually set.</span></span>

        > [!NOTE]
        > <span data-ttu-id="6bcc7-244">Retail バージョン 10.0.5 では、パラメーターの **1 か所のみで注文をフルフィルメントする** は、**フルフィルメントする場所の最大化** に変更されました。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-244">In Retail version 10.0.5, the parameter **Fulfill order from one location only** was changed to **Maximum fulfilling locations**.</span></span> <span data-ttu-id="6bcc7-245">1 か所のみでか、可能な限り多くの場所で注文のフルフィルメントを行うかどうかをユーザーが構成できるようにするのではなく、確実な場所 (最大 5 つ) からか、可能な限り多くの場所からフルフィルメントするかをユーザーが指定できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-245">Instead of allowing a user to configure whether orders can be fulfilled from one location only or fulfilled from as many locations as it can be, users can now specify whether the fulfillment can be from a definite set of locations (up to 5) or from as many locations as it can be.</span></span> <span data-ttu-id="6bcc7-246">これにより、注文をフルフィルメントできる場所の数をより柔軟に指定できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-246">This provides more flexibility in terms of how many locations the order can be fulfilled from.</span></span> <span data-ttu-id="6bcc7-247">このルールは、本番ソルバーでのみ有効です。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-247">This rule only works with Production Solver.</span></span> 

   - <span data-ttu-id="6bcc7-248">**オフライン フルフィルメント場所ルール** – このルールでは、場所または場所のグループをオフライン、または DOM から利用不可として指定できます。指定された場所または場所のグループには、フルフィルメントを行うよう注文をこれらの場所に割り当てることはできません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-248">**Offline fulfillment location rule** – This rule lets organizations specify a location or group of locations as offline or unavailable to DOM, so that orders can't be assigned to those locations for fulfillment.</span></span>
    - <span data-ttu-id="6bcc7-249">**最大拒否回数ルール** – このルールにより、組織は拒否のしきい値を定義できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-249">**Maximum rejects rule** – This rule lets organizations define a threshold for rejections.</span></span> <span data-ttu-id="6bcc7-250">このしきい値に達すると、DOM プロセッサは注文または注文明細行に例外のマークを付け、その後の処理から除外します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-250">When the threshold is reached, the DOM processor will mark an order or order line as an exception, and exclude it from further processing.</span></span>

        <span data-ttu-id="6bcc7-251">注文明細行が場所に割り当てられた後、何らかの理由でその場所ではその明細行のフルフィルメントができないことがあるため、場所は割り当てられた注文明細行を拒否することができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-251">After order lines are assigned to a location, the location can reject an assigned order line, because it might not be able to fulfill that line for some reasons.</span></span> <span data-ttu-id="6bcc7-252">拒否された明細行には例外のマークが付けられ、次回の実行時に処理されるように、プールに戻されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-252">Rejected lines are marked as an exception and put back into the pool for processing in the next run.</span></span> <span data-ttu-id="6bcc7-253">次回実行時に、DOM は、拒否された明細行を別の場所に割り当てます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-253">During the next run, DOM will try to assign the rejected line to a different location.</span></span> <span data-ttu-id="6bcc7-254">新しい場所でも、割り当てられた注文明細行を拒否することができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-254">The new location can also reject the assigned order line.</span></span> <span data-ttu-id="6bcc7-255">この割り当てと拒否のサイクルが、複数回発生することもありえます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-255">This cycle of assignment and rejection can occur multiple times.</span></span> <span data-ttu-id="6bcc7-256">この拒否の回数が、定義されているしきい値に達すると、DOM はその注文明細行に永続的な例外のマークを付けます。その明細行は、それ以上割り当てが試行されません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-256">When the rejection count hits the threshold that is defined, DOM will mark the order line as a permanent exception and won't pick the line for assignment again.</span></span> <span data-ttu-id="6bcc7-257">ユーザーがその注文明細行のステータスを手動でリセットした場合に限り、DOM でその注文明細行が再割り当ての対象となります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-257">DOM will consider the order line again for reassignment only if a user manually resets the status of the order line.</span></span>

   - <span data-ttu-id="6bcc7-258">**最大距離ルール** – このルールでは、注文のフルフィルメントを行える、場所または場所のグループの距離の最大値を定義できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-258">**Maximum distance rule** – This rule lets organizations define the maximum distance that a location or group of locations can be to fulfill the order.</span></span> <span data-ttu-id="6bcc7-259">1 つの場所に対して、最大距離ルールが重複して定義されている場合、DOM では、その場所に対して定義されている中で最も値の小さい最大距離が適用されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-259">If overlapping maximum distance rules are defined for a location, DOM will apply the lowest maximum distance that is defined for that location.</span></span>
    - <span data-ttu-id="6bcc7-260">**最大注文数ルール** – このルールでは、場所または場所のグループで 1 カレンダー日に処理できる注文の最大数を定義できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-260">**Maximum orders rule** – This rule lets organizations define the maximum number of orders that a location or group of locations can process during a calendar day.</span></span> <span data-ttu-id="6bcc7-261">ある 1 日に、場所に対して最大数の注文が割り当てられた場合、そのカレンダー日には、その場所に対してそれ以上、注文が割り当てられなくなります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-261">If the maximum number of orders is assigned to a location in a single day, DOM won't assign any more orders to that location for the rest of that calendar day.</span></span>

   <span data-ttu-id="6bcc7-262">以下に、共通の属性をいくつか示します。ここまでに記載したすべての種類のルールで、これらの属性を定義できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-262">Here are some of the common attributes that can be defined for all the preceding rule types:</span></span>

   - <span data-ttu-id="6bcc7-263">**開始日** および **終了日** – どのルールでも、これらのフィールドを使用することで、日付を指定して有効期間を設けることができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-263">**Start date** and **End date** – Every rule can be made date-effective by using the these fields.</span></span>
   - <span data-ttu-id="6bcc7-264">**無効** – このフィールドに **いいえ** の値が設定されているルールのみが、DOM の実行時に考慮されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-264">**Disabled** – Only rules that have a value of **No** for this field are considered in a DOM run.</span></span>
   - <span data-ttu-id="6bcc7-265">**厳格な制約** – ルールが厳格な制約であるか、厳格な制約でないかを指定することができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-265">**Hard constraint** – A rule can be defined as either a hard constraint or not a hard constraint.</span></span> <span data-ttu-id="6bcc7-266">DOM を実行すると、2 回の処理が実行されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-266">Every DOM run goes through two iterations.</span></span> <span data-ttu-id="6bcc7-267">1 周目の処理では、このフィールドの設定にかかわらず、すべてのルールが厳格な制約のルールとして扱われます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-267">In the first iteration, every rule is treated as a hard constraint rule, regardless of the setting of this field.</span></span> <span data-ttu-id="6bcc7-268">つまり、すべてのルールが適用されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-268">In other words, every rule is applied.</span></span> <span data-ttu-id="6bcc7-269">**場所優先順位** のルールのみが唯一の例外となります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-269">The only exception is the **Location priority** rule.</span></span> <span data-ttu-id="6bcc7-270">2 周目の処理では、厳格な制約のルールとして定義されていないルールは削除されます。すべてのルールを適用したときに場所が割り当てられなかった注文または注文明細行に場所が割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-270">In the second iteration, the rules that weren't defined as hard constraint rules are removed, and the order or order lines that weren't assigned to locations when all the rules were applied are assigned to locations.</span></span>

10. <span data-ttu-id="6bcc7-271">フルフィルメント プロファイルは、ルール、法人、販売注文元、配送モードのコレクションをグループ化するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-271">Fulfillment profiles are used to group a collection of rules, legal entities, sales order origins, and modes of delivery.</span></span> <span data-ttu-id="6bcc7-272">1 つのフルフィルメント プロファイルに対して 1 回の DOM が実行されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-272">Every DOM run is for a specific fulfillment profile.</span></span> <span data-ttu-id="6bcc7-273">このようにして、一連の法人に対する、特定の販売注文元および配送モードが設定されている注文についてのルールのセットを定義し、実行することができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-273">In this way, organizations can define and run a set of rules for a set of legal entities, on orders that have specific sales order origins and modes of delivery.</span></span> <span data-ttu-id="6bcc7-274">そのため、販売注文元または配送モードが異なる別のセットについて、別のルールのセットを実行する必要がある場合は、それに応じてフルフィルメント プロファイルを定義することができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-274">Therefore, if different set of rules must be run for different sets of sales order origins or modes of delivery, the fulfillment profiles can be defined accordingly.</span></span> <span data-ttu-id="6bcc7-275">フルフィルメント プロファイルを設定するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-275">To set up fulfillment profiles, follow these steps:</span></span>  

    1. <span data-ttu-id="6bcc7-276">**Retail と Commerce \> 配分済み注文の管理 \> 設定 \> フルフィルメント プロファイル** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-276">Go to **Retail and Commerce \> Distributed order management \> Setup \> Fulfillment profiles**.</span></span>
    2. <span data-ttu-id="6bcc7-277">**新規** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-277">Select **New**.</span></span>
    3. <span data-ttu-id="6bcc7-278">**プロファイル** および **内容** のフィールドに値を入力します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-278">Enter values in the **Profile** and **Description** fields.</span></span>
    4. <span data-ttu-id="6bcc7-279">**結果を自動適用する** オプションを設定します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-279">Set the **Auto apply result** option.</span></span> <span data-ttu-id="6bcc7-280">このオプションを **はい** に設定すると、プロファイルに対する DOM の実行結果が販売注文明細行に自動的に適用されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-280">If you set this option to **Yes**, the results of the DOM run for the profile will be automatically applied to the sales order lines.</span></span> <span data-ttu-id="6bcc7-281">このオプションを **いいえ** に設定すると、結果はフルフィルメント計画にのみ表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-281">If you set it to **No**, the results can only be viewed in the fulfillment plan.</span></span> <span data-ttu-id="6bcc7-282">結果は販売注文明細行に適用されません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-282">They won't be applied to the sales order lines.</span></span>
    5. <span data-ttu-id="6bcc7-283">販売注文元が未定義の注文なども、すべての販売注文元を持つ注文に対して、DOM プロファイルを実行するには、**販売元が指定されていない注文を処理する** オプションを **はい** に設定します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-283">If you want the DOM profile to be run for orders that have every sales order origin, including orders where the sales order origin is undefined, set the **Process orders with empty sales origin** option to **Yes**.</span></span> <span data-ttu-id="6bcc7-284">一部の販売注文元についてのみプロファイルを実行するには、後で説明するように、**販売元** ページでその販売注文元を定義することができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-284">To run the profile for only a few sales order origins, you can define them on the **Sales origins** page, as explained later.</span></span>

    > [!NOTE]
    > <span data-ttu-id="6bcc7-285">Commerce バージョン10.0.12 およびそれ以上のバージョンでは、**フルフィルメント グループをフルフィルメント プロファイルに割り当てる機能** が **機能管理** ワークスペースで有効になっている必要があり ます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-285">In Commerce version 10.0.12 and higher, **Ability to assign Fulfillment group to a Fulfillment Profile** must be enabled in the **Feature Management** workspace.</span></span> 
    >
    > <span data-ttu-id="6bcc7-286">この機能により、単一のフルフィルメント グループに関連付けることができる **フルフィルメント プロファイル** ページに新しいコンフィギュレーションが追加されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-286">This feature adds a new configuration on the **Fulfillment profile** page that can be associated to a single fulfilment group.</span></span> 
    >
    > <span data-ttu-id="6bcc7-287">フルフィルメント グループを選択すると、そのフルフィルメント プロファイルの DOM ルールが、フルフィルメント グループに含まれる "出荷" 倉庫に対して効率的に実行されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-287">If you select the fulfilment group, the DOM rules for that fulfilment profile will efficiently run against the "shipping" warehouses included in the fulfilment group.</span></span> 
    > 
    > <span data-ttu-id="6bcc7-288">この機能を効果的に使用するには、すべての出荷倉庫を含むフルフィルメント グループが 1 つあることを確認し、そのフルフィルメント グループをフルフィルメント プロファイルに関連付けます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-288">To effectively use this feature, ensure that there is one fulfillment group that contains all the shipping warehouses, and then associate that fulfillment group to the fulfillment profile.</span></span>
    
    6. <span data-ttu-id="6bcc7-289">**法人** クイック タブで、**追加** を選択して、法人を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-289">On the **Legal entities** FastTab, select **Add**, and then select a legal entity.</span></span>
    7. <span data-ttu-id="6bcc7-290">**ルール** クイック タブで、**追加** を選択して、プロファイルにリンクするルールを選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-290">On the **Rules** FastTab, select **Add**, and then select the rule to link to the profile.</span></span>
    8. <span data-ttu-id="6bcc7-291">必要なルールがすべてプロファイルに関連付けられるまで、前の 2 つのステップを繰り返します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-291">Repeat the previous two steps until all the required rules are associated with the profile.</span></span>
    9. <span data-ttu-id="6bcc7-292">**保存** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-292">Select **Save**.</span></span>
    10. <span data-ttu-id="6bcc7-293">アクション ペインの **設定** タブで、**配送モード** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-293">On the Action Pane, on the **Setup** tab, select **Modes of delivery**.</span></span>
    11. <span data-ttu-id="6bcc7-294">**配送モード** ページで、**新規** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-294">On the **Modes of delivery** page, select **New**.</span></span>
    12. <span data-ttu-id="6bcc7-295">**法人** フィールドで、法人を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-295">In the **Company** field, select the legal entity.</span></span> <span data-ttu-id="6bcc7-296">法人のリストは、ユーザーが前に追加した法人に限定されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-296">The list of companies is limited to the legal entities that you added earlier.</span></span>
    13. <span data-ttu-id="6bcc7-297">**配送モード** フィールドで、このプロファイルに関連付ける配送モードを選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-297">In the **Mode of delivery** field, select the mode of delivery to associate with this profile.</span></span> <span data-ttu-id="6bcc7-298">1 つの配送モードを複数のアクティブなプロファイルに関連付けることはできません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-298">A mode of delivery can't be associated with multiple active profiles.</span></span>
    14. <span data-ttu-id="6bcc7-299">必要な配送モードがすべてプロファイルに関連付けられるまで、前の 2 つのステップを繰り返します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-299">Repeat the previous two steps until all the required modes of delivery are associated with the profile.</span></span>
    15. <span data-ttu-id="6bcc7-300">**配送モード** ページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-300">Close the **Modes of delivery** page.</span></span>
    16. <span data-ttu-id="6bcc7-301">アクション ペインの **設定** タブで、**販売注文元** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-301">On the Action Pane, on the **Setup** tab, select **Sales order origins**.</span></span>
    17. <span data-ttu-id="6bcc7-302">**販売元** ページで、**新規** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-302">On the **Sales origins** page, select **New**.</span></span>
    18. <span data-ttu-id="6bcc7-303">**法人** フィールドで、法人を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-303">In the **Company** field, select the legal entity.</span></span> <span data-ttu-id="6bcc7-304">法人のリストは、ユーザーが前に追加した法人に限定されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-304">The list of companies is limited to the legal entities that you added earlier.</span></span>
    19. <span data-ttu-id="6bcc7-305">**販売元** フィールドで、このプロファイルに関連付ける販売元を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-305">In the **Sales origin** field, select the sales origin to associate with this profile.</span></span> <span data-ttu-id="6bcc7-306">1 つの販売元を複数のアクティブなプロファイルに関連付けることはできません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-306">A sales origin can't be associated with multiple active profiles.</span></span>
    20. <span data-ttu-id="6bcc7-307">必要な販売元がすべてプロファイルに関連付けられるまで、前の 2 つのステップを繰り返します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-307">Repeat the previous two steps until all the required sales origins are associated with the profile.</span></span>
    21. <span data-ttu-id="6bcc7-308">**販売元** ページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-308">Close the **Sales origins** page.</span></span>
    22. <span data-ttu-id="6bcc7-309">**プロファイルを有効化する** オプションを **はい** に設定します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-309">Set the **Enable profile** option to **Yes**.</span></span> <span data-ttu-id="6bcc7-310">設定にエラーがある場合は、警告メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-310">If there are any errors in the setup, you receive a warning message.</span></span>

## <a name="dom-processing"></a><span data-ttu-id="6bcc7-311">DOM の処理</span><span class="sxs-lookup"><span data-stu-id="6bcc7-311">DOM processing</span></span>

<span data-ttu-id="6bcc7-312">DOM は、バッチ ジョブでのみ実行されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-312">DOM will run only in a batch job.</span></span> <span data-ttu-id="6bcc7-313">DOM の実行用にバッチ ジョブを構成するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-313">To configure the batch job for DOM runs, follow these steps.</span></span>

1. <span data-ttu-id="6bcc7-314">**Retail と Commerce \> 配分済み注文の管理 \> バッチ処理 \> DOM プロセッサ ジョブの設定** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-314">Go to **Retail and Commerce \> Distributed order management \> Batch processing \> DOM processor job setup**.</span></span>
1. <span data-ttu-id="6bcc7-315">**パラメーター** クイック タブの **フルフィルメント プロファイル** フィールドで、DOM を実行する必要があるプロファイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-315">On the **Parameters** FastTab, in the **Fulfillment profile** field, select a profile that DOM must be run for.</span></span>
1. <span data-ttu-id="6bcc7-316">**バックグラウンドで実行** クイック タブの **バッチ グループ** フィールドで、構成済みのバッチ グループを選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-316">On the **Run in the background** FastTab, in the **Batch group** field, select a configured batch group.</span></span>
1. <span data-ttu-id="6bcc7-317">**タスクの説明** フィールドにバッチ ジョブの名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-317">In the **Task description** field, enter a name for the batch job.</span></span>
1. <span data-ttu-id="6bcc7-318">**反復** を選択して、バッチ ジョブの繰り返しを定義します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-318">Select **Recurrence**, and define the recurrence of the batch job.</span></span>
1. <span data-ttu-id="6bcc7-319">**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-319">Select **OK**.</span></span>

<span data-ttu-id="6bcc7-320">処理の際、DOM では、次に示す注文および注文明細行を処理の対象とします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-320">At the time of processing, DOM will consider the order and order lines as described here:</span></span>

- <span data-ttu-id="6bcc7-321">DOM プロファイルで定義されている販売注文元、配送モード、および法人の条件を満たし、次のいずれかの条件も満たす注文明細行:</span><span class="sxs-lookup"><span data-stu-id="6bcc7-321">Order lines that meet the criteria for sales order origins, modes of delivery, and legal entity as defined in the DOM profile, and that also meet any of these criteria:</span></span>

    - <span data-ttu-id="6bcc7-322">コマース チャネルから作成されている。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-322">They are created from commerce channels.</span></span>
    - <span data-ttu-id="6bcc7-323">DOM によって仲介されていない。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-323">They have never been brokered by DOM.</span></span>
    - <span data-ttu-id="6bcc7-324">以前に DOM によって仲介をされているが、例外のマークが付けられ、試行回数の上限のしきい値に達していない。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-324">They have been brokered by DOM before, but they are marked as exceptions and are below the maximum threshold for attempts.</span></span>
    - <span data-ttu-id="6bcc7-325">配送モードが、集荷または電子的方法による納品ではない。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-325">The mode of delivery isn't pick-up or electronic delivery.</span></span>
    - <span data-ttu-id="6bcc7-326">出荷のマークがついていない。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-326">They aren't marked for delivery.</span></span>
    - <span data-ttu-id="6bcc7-327">手動で除外されていない。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-327">They aren't manually excluded.</span></span>

- <span data-ttu-id="6bcc7-328">保留中になっていない注文</span><span class="sxs-lookup"><span data-stu-id="6bcc7-328">Orders that aren't on hold</span></span>

<span data-ttu-id="6bcc7-329">ルール、在庫の制約、最適化の適用後、DOM は、顧客の配送先住所に最も近い場所を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-329">After it applies the rules, inventory constraints, and optimization, DOM picks the location that is closest to the customer's delivery address.</span></span>

<span data-ttu-id="6bcc7-330">![販売注文の基準](./media/ordercriteria.png "販売注文の基準")</span><span class="sxs-lookup"><span data-stu-id="6bcc7-330">![Sales order criteria](./media/ordercriteria.png "Sales order criteria")</span></span>

## <a name="results-of-dom-runs"></a><span data-ttu-id="6bcc7-331">DOM 実行の結果</span><span class="sxs-lookup"><span data-stu-id="6bcc7-331">Results of DOM runs</span></span>

<span data-ttu-id="6bcc7-332">フルフィルメント プロファイルが **結果を自動適用する** に設定されている場合、実行結果は販売注文明細行に自動的に適用され、フルフィルメント計画は別々に確認できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-332">If the fulfillment profile is set to **Auto apply**, the results of the run will be automatically applied to the sales order lines, and the fulfillment plan can be viewed separately.</span></span> <span data-ttu-id="6bcc7-333">ただし、フルフィルメント プロファイルが **結果を自動適用する** に設定されていない場合、実行結果はフルフィルメント計画ビューからのみ確認できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-333">However, if the fulfillment profile isn't set to **Auto apply**, the results of the run can be seen only from the fulfillment plan view.</span></span> 

<span data-ttu-id="6bcc7-334">生成されたフルフィルメント計画をすべて表示するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-334">To view all the fulfillment plans that are generated, follow these steps.</span></span>

1. <span data-ttu-id="6bcc7-335">**Retail と Commerce \> 配分済み注文の管理 \> 配分済み注文の管理** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-335">Go to **Retail and Commerce \> Distributed order management \> Distributed order management**.</span></span>
2. <span data-ttu-id="6bcc7-336">**配分済み注文の管理** ワークスペースで、**フルフィルメント計画** タイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-336">In the **Distributed order management** workspace, select the **Fulfillment Plans** tile.</span></span>
3. <span data-ttu-id="6bcc7-337">フルフィルメント計画を表示するには、関連する注文フルフィルメント計画の ID を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-337">Select the ID of the relevant order fulfillment plan to view the fulfillment plan.</span></span>

    <span data-ttu-id="6bcc7-338">フルフィルメント計画の注文の詳細セクションには、実行に含まれていた元販売注文明細行が表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-338">The order details section of the fulfillment plan shows the original sales order lines that were part of the run.</span></span> <span data-ttu-id="6bcc7-339">注文の詳細セクションには、標準の販売注文明細行フィールドに加え、次の 3 つの DOM 関連のフィールドも含まれます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-339">Besides the standard sales order line fields, the order details section also includes the following three DOM-related fields:</span></span>

    - <span data-ttu-id="6bcc7-340">**フルフィルメント タイプ** – このフィールドは、販売注文明細行が完全に仲介されたか、部分的に仲介されたか、まったく場所に仲介されなかったかを示します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-340">**Fulfillment type** – This field indicates whether the sales order line is fully brokered, partially brokered, or not brokered at all to a location.</span></span>
    - <span data-ttu-id="6bcc7-341">**分割** – このフィールドは、1 つの販売注文明細行が分割され、複数の場所に仲介されたかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-341">**Split** – This field indicates whether one sales order line has been split and brokered to different locations.</span></span>
    - <span data-ttu-id="6bcc7-342">**フルフィルメント場所数** – このフィールドは、1 つの販売注文明細行に対していくつのフルフィルメント明細行が作成されたかを示します (元販売注文明細行が仲介された場所の数に基づきます)。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-342">**Number of fulfillment locations** – This field indicates how many fulfillment lines were created for one sales order line (based on the number of locations that the original sales order line was brokered to).</span></span>

    <span data-ttu-id="6bcc7-343">注文フルフィルメント詳細情報セクションには、元販売注文明細行の他の場所への割り当てと、その数量が表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-343">The order fulfillment details section shows the assignment of the original sales order lines to different locations, together with their quantities.</span></span>

## <a name="order-line-actions-and-statuses"></a><span data-ttu-id="6bcc7-344">注文明細行のアクションとステータス</span><span class="sxs-lookup"><span data-stu-id="6bcc7-344">Order line actions and statuses</span></span>

<span data-ttu-id="6bcc7-345">注文明細行の設定は、次の通りです。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-345">The following describes settings on the order line.</span></span> <span data-ttu-id="6bcc7-346">注文明細行を開くには、**Retail と Commerce \> 顧客 \> すべての販売注文** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-346">To open the order line, go to **Retail and Commerce \> Customers \> All sales orders**.</span></span>
- <span data-ttu-id="6bcc7-347">販売注文明細行の **一般** タブの **DOM 処理から除外する** オプションを **はい** に設定した場合、注文または注文明細行は DOM の処理から除外されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-347">If you set the **Exclude from DOM processing** option on the **General** tab of the sales order line to **Yes**, the order or order line will be excluded from DOM processing.</span></span>
- <span data-ttu-id="6bcc7-348">販売注文明細行の **一般** タブの **DOM 状態** フィールドに設定される値は、次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-348">The **DOM status** field on the **General** tab of the sales order line can be set to one of the following values:</span></span>

    - <span data-ttu-id="6bcc7-349">**なし** – 注文明細行は一度も仲介されていません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-349">**None** – The order line has never been brokered.</span></span>
    - <span data-ttu-id="6bcc7-350">**完了** – 注文明細行は正常に仲介され、場所が割り当てられています。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-350">**Complete** – The order line has been successfully brokered and assigned to a location.</span></span>
    - <span data-ttu-id="6bcc7-351">**例外** – 注文明細行は仲介されましたが、場所が割り当てられていません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-351">**Exception** – The order line has been brokered but can't be assigned to a location.</span></span> <span data-ttu-id="6bcc7-352">例外にはいくつかのサブタイプがあり、DOM ワークスペースから参照できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-352">Exceptions have multiple subtypes that can be viewed from the DOM workspace:</span></span>

        - <span data-ttu-id="6bcc7-353">**利用可能数量なし** – 注文を割り当てられる利用可能在庫が場所にありません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-353">**No quantity available** – There is no available inventory to assign the order to in the locations.</span></span>
        - <span data-ttu-id="6bcc7-354">**最大拒否回数** – 注文明細行が、拒否回数の上限のしきい値に達しています。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-354">**Maximum rejections** – The order line has reached the maximum threshold for rejections.</span></span>
        - <span data-ttu-id="6bcc7-355">**データの変更による競合** – 注文が仲介されてから、販売注文明細行が変更されています。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-355">**Data modification conflict** – The sales order line has been changed since the order was brokered.</span></span> <span data-ttu-id="6bcc7-356">そのため、フルフィルメント計画を注文に適用できません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-356">Therefore, the fulfillment plan can't be applied to the order.</span></span>
        - <span data-ttu-id="6bcc7-357">**注文明細行固有の例外** – 注文明細行に複数の例外があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-357">**Order line specific exception** – There are multiple exceptions on the order line.</span></span>

- <span data-ttu-id="6bcc7-358">販売注文入力の際、DOM を対話モードで実行できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-358">During the sales order entry, DOM can be run in an interactive mode.</span></span> <span data-ttu-id="6bcc7-359">注文明細行を入力する際、製品と数量を指定した後、**明細行の更新** を選択してから、**DOM** の下の **フルフィルメント場所を提案する** を選択できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-359">While you're entering an order line, after you specify the product and quantity, you can select **Update line** and then, under **DOM**, select **Suggest fulfillment location**.</span></span> <span data-ttu-id="6bcc7-360">DOM ルールに基づき、注文明細行の数量のフルフィルメントができる場所のリストを確認できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-360">You then see a list of locations that is based on DOM rules that can fulfill the quantity on the order line.</span></span> <span data-ttu-id="6bcc7-361">このリストは、距離に従って並べ替えられます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-361">This list is sorted by distance.</span></span> <span data-ttu-id="6bcc7-362">場所を選択して、適切なサイトと倉庫を販売注文明細行に設定します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-362">Select a location to set the relevant site and warehouse on the sales order line.</span></span> <span data-ttu-id="6bcc7-363">この機能の実行には、販売明細行の販売元および配送モードに対応する、既存の有効なフルフィルメント プロファイルが存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-363">For this functionality to work, there must be an existing, active fulfillment profile that matches the sales origin and delivery mode on the sales line.</span></span>
- <span data-ttu-id="6bcc7-364">販売注文明細行に対する DOM の実行ログを表示するには、**販売注文明細行** を選択し、**DOM** の下の **DOM ログを表示する** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-364">To view the DOM run logs for a sales order line, select **Sales order line**, and then, under **DOM**, select **View DOM Logs**.</span></span> <span data-ttu-id="6bcc7-365">DOM のログには、DOM の実行で生成されたすべてのイベントとログが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-365">The DOM logs show all the events and logs that were generated by the DOM run.</span></span> <span data-ttu-id="6bcc7-366">このログは、特定の場所が注文明細行に割り当てられた理由や、割り当てにおいてどのルールや制限が適用されたのかを理解するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-366">The logs can help you understand why a specific location was assigned to the order line, and what rules and constraints were considered as a part of the assignment.</span></span> <span data-ttu-id="6bcc7-367">**管理** タブで、販売注文ヘッダーのレベルで DOM ログを表示することもできます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-367">On the **Manage** tab, the DOM logs are also available at the level of the sales order header.</span></span>

## <a name="run-a-clean-up-job-for-dom-fulfillment-plans"></a><span data-ttu-id="6bcc7-368">DOM フルフィルメント計画に対するクリーンアップ ジョブの実行</span><span class="sxs-lookup"><span data-stu-id="6bcc7-368">Run a clean-up job for DOM fulfillment plans</span></span>

<span data-ttu-id="6bcc7-369">DOM 処理が実行されると、フルフィルメント計画が作成されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-369">As DOM processing is run, fulfillment plans are created.</span></span> <span data-ttu-id="6bcc7-370">時間が経過すると、システムで多数のフルフィルメント計画が保持されることになります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-370">Over time, the system will keep numerous fulfillment plans.</span></span> <span data-ttu-id="6bcc7-371">システムで保持するフルフィルメント計画の数を管理するために、**留保期間 (日)** の値をもとに、古くなったフルフィルメント計画を削除するバッチ ジョブを構成することができます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-371">To manage the number of fulfillment plans that the system keeps, you can configure a batch job that deletes older fulfillment plans, based on the **Retention period in days** value.</span></span>

1. <span data-ttu-id="6bcc7-372">**Retail と Commerce \> 配分済み注文の管理 \> バッチ処理 \> DOM フルフィルメント データ削除ジョブの設定** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-372">Go to **Retail and Commerce \> Distributed order management \> Batch processing \> DOM fulfillment data deletion job setup**.</span></span> 
1. <span data-ttu-id="6bcc7-373">**バッチ グループ** フィールドで、構成済みのバッチ グループを選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-373">In the **Batch group** field, select a configured batch group.</span></span>
1. <span data-ttu-id="6bcc7-374">**反復** を選択して、バッチ ジョブの繰り返しを定義します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-374">Select **Recurrence**, and define the recurrence of the batch job.</span></span>
1. <span data-ttu-id="6bcc7-375">**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-375">Select **OK**.</span></span>

## <a name="more-information"></a><span data-ttu-id="6bcc7-376">詳細情報</span><span class="sxs-lookup"><span data-stu-id="6bcc7-376">More information</span></span>

<span data-ttu-id="6bcc7-377">DOM 機能を使用する際には、以下の点について考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-377">Here are some things to consider when you use the DOM feature:</span></span>

- <span data-ttu-id="6bcc7-378">現時点では、DOM では、コマース チャネルから作成された注文のみが処理されます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-378">Currently, DOM looks only at orders that are created from commerce channels.</span></span> <span data-ttu-id="6bcc7-379">**コマース販売** オプション が **はい** になっている場合に、販売注文は小売販売注文と見なされます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-379">Sales orders are identified as sales orders when the **Commerce sale** option is set to **Yes**.</span></span>
- <span data-ttu-id="6bcc7-380">マイクロソフトでは、DOM での高度な倉庫管理機能の使用については、テストを行っていません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-380">Microsoft hasn't tested DOM with advanced warehouse management features.</span></span> <span data-ttu-id="6bcc7-381">お客様およびパートナー様には、関連のある高度な倉庫管理の機能およびプロセスとの互換性が DOM にあるかどうかを、注意して判断していただく必要があります。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-381">Customers and partners must be careful to determine whether DOM is compatible with the advanced warehouse management capabilities and processes that are relevant to them.</span></span>
- <span data-ttu-id="6bcc7-382">DOM は、クラウド バージョンの Commerce でのみ利用できます。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-382">DOM is available only on the cloud version of Commerce.</span></span> <span data-ttu-id="6bcc7-383">オンプレミス配置ではサポートされません。</span><span class="sxs-lookup"><span data-stu-id="6bcc7-383">It isn't supported in on-premises deployments.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]