---
title: 購入ボックス モジュール
description: このトピックでは、購入ボックス モジュールと、Microsoft Dynamics 365 Commerce のサイト ページにそれを追加する方法について説明します。
author: anupamar-ms
manager: annbe
ms.date: 11/11/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Retail, Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.5
ms.openlocfilehash: e86b1881e6829ccc33f36ada453af20c1815a2fa
ms.sourcegitcommit: 57bc7e17682e2edb5e1766496b7a22f4621819dd
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/18/2019
ms.locfileid: "2811144"
---
# <a name="buy-box-module"></a>購入ボックス モジュール

[!include [banner](includes/preview-banner.md)]
[!include [banner](includes/banner.md)]

このトピックでは、購入ボックス モジュールと、Microsoft Dynamics 365 Commerce のサイト ページにそれを追加する方法について説明します。

## <a name="overview"></a>概要

*購入ボックス*という用語は、通常 "折りたたみの上" である製品の詳細ページの領域を指し、製品購買に必要な最も重要な情報すべてをホストします。 ("折りたたみの上" である領域はページが最初に読み込まれたときに表示されるため、ユーザーは下にスクロールして表示する必要はありません。)

購入ボックス モジュールは、製品の詳細ページの購入ボックス領域に表示されるすべてのモジュールをホストするために使用する特別なコンテナーです。

製品の詳細ページの URL には、製品 ID が含まれます。 購買ボックス モジュールの表示に必要なすべての情報は、この製品 ID から派生します。 製品 ID が指定されていない場合、購入ボックス モジュールはページに正しく表示されません。 したがって、商品コンテキストがないページ (ホーム ページまたはマーケティング ページなど) では、購入ボックス モジュールを使用できません。

## <a name="buy-box-module-properties-and-slots"></a>購入ボックス モジュール プロパティおよびスロット 

コンテナーとして、購入ボックス モジュールは、幅などのいくつかの基本的なプロパティを制御します。 幅の設定により、コンテナー内のモジュールがそのコンテナー内に収まる必要があるかどうか、または画面を埋めれるかどうかを決定します。

製品の詳細ページでは、購入ボックスは 2 つの領域に分割されます: 左側にメディア領域、右側にコンテンツ領域。 これらの 2 つの領域は、購入ボックス モジュールでスロットで表されます。 各スロットは、スロットでサポートされる特定のモジュールのみを受け入れるよう事前にコンフィギュレーションされます。 たとえば、**メディア** スロットではメディア ギャラリー モジュールのみがサポートされます。

既定では、メディア領域とコンテンツ領域の列幅の比率は 2:1 です。 ただし、テーマによって列幅が上書きされる場合があります。 さらに、モバイル デバイスでは 2 つの領域が積み重ねられ、一方の領域がもう一方の領域の下に表示されます。

## <a name="modules-that-can-be-used-in-a-buy-box-module"></a>購入用ボックス モジュールで使用できるモジュール

- **メディア ギャラリー** – このモジュールは、製品の詳細ページに製品の画像を表示するために使用されます。 一対多の画像をサポートできます。 サムネイル画像もサポートします。 サムネイル画像は、水平方向 (画像の下の行) または垂直方向 (画像の横の列) のいずれかに配置できます。 メディア ギャラリー モジュールは、購入ボックス モジュールの**メディア** スロットに追加できます。 現在、画像とビデオのみをサポートしています。
- **製品タイトル** – このモジュールでは、製品の詳細ページでの製品のタイトルを表示します。 既定では、**H1** ヘッダー タグが使用されますが、必要に応じてヘッダー タグを変更できます。
- **製品評価** – このモジュールでは、製品に対する顧客の評価に基づいて星評価を表示します。 購入ボックス モジュールは、評価サービスから各製品の製品評価を取得します。
- **製品価格** – このモジュールでは、製品の価格を表示します。 価格には取り消し線価格および割引が含まれます。
- **製品の説明** – このモジュールでは、製品の説明を表示します。
- **製品コンフィギュレーション** – このモジュールでは製品のサイズ、スタイル、および分析コードを表示します。 分析コード セレクターは垂直方向に積み重ねることも、並べて表示することもできます。 製品バリアントが選択されると、購入ボックスの他のプロパティ (製品の説明や画像など) が更新されて、バリアント情報が反映されます。
- **製品数量** – このモジュールは、製品の数量をコンフィギュレーションするために使用されます。 設定によって、カートに追加できる商品またはバリアントの数量が制限されます。
- **カートに追加** – このモジュールは、"カートに追加" アクションを実行するために使用されます。 製品またはバリアントのみをカートに追加できます。 つまり、マスター製品をカートに追加することはできません。 モジュールには、作成者が設定できる**カートに移動**プロパティがあります。 このプロパティが **True** に設定されている場合、"カートに追加" アクションがトリガーされるたびに、ユーザーはカート ページに移動します。 **False** に設定されている場合、品目がカートに追加された後、顧客は商品の詳細ページで引き続き閲覧できます。
- **欲しい物リストに追加** – このモジュールは、顧客の欲しい物リストに品目を追加するために使用します。 製品またはバリアントのみを欲しい物リストに追加できます。 また、顧客はサイトにサインインしている必要があります。 モジュールには、これらの条件が満たされていることを確認するエラー処理ロジックが含まれます。
- **店舗で検索** – このモジュールでは、"オンラインで購入し、店舗で受け取り" フローをトリガーします。
- **店舗で受け取り** – このモジュールでは、品目の受け取り可能な近隣店舗の一覧を表示します。 既定では、このモジュールは顧客の場所から半径 50 マイル以内の店舗を表示します。 ただし、モジュールで検索する半径をカスタマイズできます。 各店舗で、在庫確認機能がオンになっている場合は、在庫確認が行われ、適切な在庫または在庫切れのメッセージが表示されます。
- **Bing Maps による店舗検索** – このモジュールは、店舗で受け取りモジュール内で使用されます。 顧客は、場所を入力することによって店舗を検索できます。 Bing Maps 位置情報アプリケーション プログラミング インターフェイス (API) は指定された場所を緯度と経度に変換するために使用します。 このモジュールを使用すると、顧客の現在の場所に近い店舗だけが表示され、顧客は別の場所を検索することはできません。
- **コンテンツ リッチ ブロック** – このモジュールでは、サイト作成者または小売業者が購入ボックスで宣伝したいメッセージ、たとえば "注文に関する問題については、1-800-FABRIKAM にお問い合わせください" または "$100 以上のご注文で送料無料" などを表示できます。 メッセージは、コンテンツ管理システム (CMS) よって発生します。

## <a name="buy-box-module-settings"></a>購入ボックス モジュール設定

購入ボックス モジュールには、コンフィギュレーション可能な 3 つの設定があります。

- **最大数量** – カートに追加できる各品目の最大数量。 たとえば、小売業者が、単一のトランザクションで販売できるのは各製品 10 個のみと決定する場合があります。
- **在庫確認** – 値が **True** に設定されている場合、購入ボックス モジュールが品目が在庫にあることを確認した後にのみ、品目がカートに追加されます。 この在庫確認は、品目が出荷されるシナリオと、品目を店舗で受け取るシナリオの両方に対して実行されます。 値が **False** に設定されている場合、品目がカートに追加されて注文が行われる前に、在庫確認は実行されません。
- **在庫バッファー** – 在庫はリアルタイムで管理されるため、多くの顧客が注文する場合、正確な在庫数を管理するのが困難な場合があります。 したがって、バッファーは在庫に対して定義できます。 在庫確認が実行されると、在庫がバッファー額を下回る場合、その製品は在庫切れとして処理されます。 したがって、在庫数が完全に同期されないよう、販売が複数のチャンネルを通じて迅速に行われる場合、在庫切れの品目が販売されるリスクは少なくなります。

## <a name="retail-server-interaction"></a>小売サーバー インタラクション

購入ボックス モジュールでは、Retail Server API を使用して製品情報を取得します。 製品の詳細ページの製品 ID は、すべての情報を取得するために使用されます。

## <a name="add-a-buy-box-module-to-a-page"></a>購入ボックス モジュールをページに追加する

新しいページに購入ボックス モジュールを追加して必要なプロパティを設定するには、次の手順を実行します。

1. **購入ボックス フラグメント**という名前のフラグメントを作成し、それに購入ボックス モジュールを追加します。
1. 購入ボックス モジュールの**メディア** スロットで、メディア ギャラリー モジュールを追加します。
1. 購入ボックス モジュールの**コンテンツ** スロットに次のモジュールを追加します: 製品タイトル、製品評価、製品価格、製品の説明、製品コンフィギュレーション、カートに追加、欲しい物リストに追加、店舗で検索。 **コンテンツ** スロット内のモジュールを並べ替えて、目的のレイアウトを実現できます。
1. 店舗で検索モジュールを選択します。 このモジュール内のスロットで、店舗で受け取りモジュールを追加します。
1. 店舗で受け取りモジュール内のスロットで、Bing Maps による店舗検索モジュールを追加します。
1. ページをチェックインしてから公開します。
1. 製品の詳細ページのテンプレートを作成し、**PDP テンプレート**という名前を付けます。
1. 既定のページを追加します。
1. 既定ページの**メイン** スロットで、購入ボックス フラグメントを追加します。
1. テンプレートを保存し、チェック イン後に発行します。
1. 作成したテンプレートを使用して、**PDP ページ**という名前のページを作成します。
1. 新しいページの**メイン** スロットで、購入ボックス フラグメントを追加します。
1. ページを保存してプレビューします。 **?productid=&lt;product id&gt;** クエリ文字列パラメーターをプレビュー ページの URL に追加します。 このようにして、製品コンテキストを使用してプレビュー ページの読み込みと表示を行います。
1. ページをチェックインしてから公開します。 製品の詳細ページに、購入ボックスが表示される必要があります。

## <a name="additional-resources"></a>追加リソース

[スタート キットの概要](starter-kit-overview.md)

[コンテナー モジュール](add-container-module.md)

[カート モジュール](add-cart-module.md)

[チェックアウト モジュール](add-checkout-module.md)

[注文確認モジュール](order-confirmation-module.md)

[ヘッダー モジュール](author-header-module.md)

[フッター モジュール](author-footer-module.md)
