---
title: 在庫バッファーと在庫レベルのコンフィギュレーション
description: このトピックでは、Microsoft Dynamics 365 Commerce サイトで在庫状況のメッセージングを決定する在庫バッファーと在庫レベルをコンフィギュレーションする方法について説明します。
author: boycezhu
manager: annbe
ms.date: 06/01/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.region: global
ms.author: boycez
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.12
ms.openlocfilehash: c519095d174414d6d4a8c86bc171ea62e1c72582
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/15/2021
ms.locfileid: "5012435"
---
# <a name="configure-inventory-buffers-and-inventory-levels"></a>在庫バッファーと在庫レベルのコンフィギュレーション

[!include [banner](includes/banner.md)]

このトピックでは、Microsoft Dynamics 365 Commerce サイトで在庫状況に関するメッセージングを決定する在庫バッファーと在庫レベルをコンフィギュレーションする方法について説明します。

## <a name="overview"></a>概要

Dynamics 365 Commerce Headquarters には、在庫データと、販売時点管理 (POS) アプリケーション、電子商取引店舗、非同期で在庫をプルおよびプッシュするその他のカスタム統合アプリケーションなど、さまざまなチャネルが含まれています。 したがって、Commerce Headquarters の手持在庫ページ、POS ユーザー インターフェイス (UI)、E コマースの在庫状況 API から取得される使用可能な在庫値は、常にリアルタイムで 100% 正確であるとは限りません。

多くの小売業者は、電子商取引店舗で実際の在庫値を表示する代わりに、在庫状況の状態 (例えば、"在庫あり" または "在庫切れ" など) についてメッセージを表示して、顧客に品目が購入可能か、在庫切れの可能性があるかを通知することを希望します。 このアプローチでは、在庫状況のメッセージングを決定する在庫バッファーと在庫レベルを使用可能にしてコンフィギュレーションする必要があります。

## <a name="prerequisite-turn-on-the-inventory-buffers-and-inventory-levels-feature"></a>前提条件: 在庫バッファーと在庫レベル機能を有効する

在庫バッファーと在庫レベルの機能は、Commerce Headquarters の機能管理を通じて制御されます。 機能を有効にするには、次の手順を実行します。

1. **システム管理** \> **ワークスペース** \> **機能管理** の順に移動します。
1. **在庫バッファーと在庫レベルの有効化** 機能を検索し、その行を選択してから、**直ちに有効化** を選択します。

この機能を有効にすると、**Retail と Commerce \> 在庫管理** で在庫レベルを確認できます。

## <a name="create-and-configure-an-inventory-level-profile"></a>在庫レベル プロファイルの作成とコンフィギュレーション

*在庫レベルのプロファイル* は、指定された製品数量の状態が在庫あり、在庫切れ、あるいはその他のカスタム ステータスとみなされるかを決定します。 法人ごとに複数の在庫レベル プロファイルを作成およびコンフィギュレーションできます。 各プロファイルは、一連の在庫レベルで構成され、各レベルは *範囲*、*コード*、および *ラベル* によって定義されます。

- **範囲** – 各範囲は、*開始数量* と *終了数量* によって定義されます。 数量値が、その範囲の開始数量よりも多く、かつ終了数量を超えていない場合は、範囲に含まれます。
- **コード** – コードは、レベルを表す内部の略語です。 在庫 API と直接統合する顧客は、コードを使用して、特定の在庫レベルの追加ロジックを構築できます。 たとえば、在庫レベル コードが **OOS** ("在庫切れ") の場合に、製品の購買機能を無効にすることができます。
- **ラベル** – ラベルは、E コマース サイト上の顧客に在庫レベルを伝える意味のある顧客向けメッセージです。

### <a name="create-an-inventory-level-profile"></a>在庫レベル プロファイルの作成

在庫レベル プロファイルを作成するには、次の手順を実行します。

1. **Retail と Commerce** \> **在庫管理** \> **在庫レベル** に移動します。
1. アクション ペインで、**新規** を選択し、**プロファイル ID** フィールドと **説明** フィールドに値を入力します。
1. **範囲** クイックタブで、**追加** を選択して新しいレベルを追加し、そのレベルの **開始数量**、**終了数量**、**コード**、**ラベル** の各列に値を入力します。 さらにレベルを追加するには、この手順を繰り返します。 必要に応じて、データ グリッドの値を編集したり、**削除** を選択してレベルを削除したりできます。
1. アクション ウィンドウで、**保存** を選択します。

新しいプロファイルが作成されると、2 つの在庫レベルが自動的に初期化されます。

- **OOS** – 範囲の下限が負の無限大である "在庫切れ" レベル。 このレベルで開始数量とコードを編集することはできません。
- **AVAIL** – 範囲の上限が無限大である、"利用可能" レベル。 このレベルで終了数量とコードを編集することはできません。

> [!NOTE]
> プロファイル定義で範囲間にギャップや重複はありません。

アクション ペインの **翻訳** ボタンを使用すると、ラベル メッセージのローカライズされた文字列をコンフィギュレーションできます。 次に、ローカライズされた文字列をチャネルに同期するために、**1110** (**グローバル コンフィギュレーション**) 配送スケジュール ジョブを実行する必要があります。

### <a name="configure-an-inventory-level-profile"></a>在庫レベル プロファイルのコンフィギュレーション

在庫レベルのプロファイルは、製品カテゴリ レベルまたは個々の製品レベルのいずれかで構成できます。 製品に対して在庫レベルのプロファイルがコンフィギュレーションされている場合、在庫レベルは、リンクされたプロファイルで定義されている範囲に基づいて決定されます。 それ以外の場合、"利用可能" 在庫レベルまたは "在庫切れ" 在庫レベルは、製品に正の手持在庫数量があるかどうかに基づいて決定されます。

カテゴリの在庫レベル プロファイルを構成するには、次の手順を実行します。

1. **Retail と Commerce** \> **製品とカテゴリ** \> **Commerce 製品階層** に移動します。
1. 在庫レベル プロファイルを構成するカテゴリを選択します。
1. **製品の販売プロパティ** クイックタブで、法人を選択します。
1. **Commerce の在庫** セクションの **在庫レベル プロファイル** フィールドで、事前定義済の在庫レベル プロファイルのいずれかを選択します。

アクション ペインで **製品の更新** ボタンを使用して、カテゴリの基になる製品にカテゴリ レベルのプロファイルの値を反映できます。 詳細については、[製品カテゴリおよび製品の管理](category-management-product-creation.md) を参照してください。

リリース済み製品の在庫レベル プロファイルを構成するには、次の手順を実行します。

1. **Retail と Commerce** \> **製品とカテゴリ** \> **カテゴリ別リリース済製品** の順に移動します。
1. 製品を選択し、製品の詳細ページを開きます。
1. **販売** クイック タブで、**Commerce の在庫** セクションの **在庫レベル プロファイル** フィールドで、事前定義済の在庫レベル プロファイルのいずれかを選択します。

新しい製品が作成されると、**在庫レベル プロファイル** フィールドは、他の多くの製品レベルの属性と同様に、製品に関連付けられているカテゴリに構成されている値に設定されます。

> [!NOTE]
> 在庫レベル プロファイルは、法人固有の属性です。 同じカテゴリまたは製品の場合、在庫レベル プロファイル値は法人ごとに異なる場合があります。

在庫レベル プロファイルのコンフィギュレーションをチャネルに同期するには、次の手順に従います。

1. **Retail と Commerce** \> **Retail と Commerce IT** \> **配送スケジュール** の順に移動します。
1. **1040** (**製品**) 配送スケジュールを実行します。

## <a name="configure-an-inventory-buffer"></a>在庫バッファーのコンフィギュレーション

*在庫バッファー* は、品目の追加数量を元の数量から減算して見積数量を計算するユーザー定義の値です。 この見積数量は、小売業者が実際の手持在庫よりも多く販売することで製品を過剰に販売しないようにするための安全なバッファを提供します。 在庫バッファーは、製品カテゴリ レベルまたは個々の製品レベルのいずれかで構成できます。 在庫バッファーが指定されていない場合は、既定値 **0** (ゼロ) が使用されます。

カテゴリの在庫バッファーを構成するには、次の手順を実行します。

1. **Retail と Commerce** \> **製品とカテゴリ** \> **Commerce 製品階層** に移動します。
1. 在庫バッファーを構成するカテゴリを選択します。
1. **製品の販売プロパティ** クイックタブで、法人を選択します。
1. **Commerce の在庫** セクションの **在庫バッファー** フィールドに、正の値を入力します。

アクション ペインで **製品の更新** ボタンを使用して、カテゴリの基になる製品にカテゴリ レベルのバッファーの値を反映できます。 詳細については、[製品カテゴリおよび製品の管理](category-management-product-creation.md) を参照してください。

リリース済製品の在庫バッファーを構成するには、次の手順を実行します。

1. **Retail と Commerce** \> **製品とカテゴリ** \> **カテゴリ別リリース済製品** の順に移動します。
1. 製品を選択し、製品の詳細ページを開きます。
1. **販売** クイック タブで、**Commerce の在庫** セクションの **在庫バッファー** フィールドに、正の値を入力します。

新しい製品が作成されると、**在庫バッファー** フィールドは、製品に関連付けられているカテゴリに構成されている値に設定されます。

> [!NOTE]
> 在庫のバッファーと在庫レベルの両方のプロファイルが製品に対して構成されている場合、製品の見積数量 (つまり、元の数量からバッファーの値を差し引いた数量) は、在庫レベルを決定するために範囲計算に使用されます。

在庫バッファーのコンフィギュレーションをチャネルに同期するには、次の手順に従います。

1. **Retail と Commerce** \> **Retail と Commerce IT** \> **配送スケジュール** の順に移動します。
1. **1040** (**製品**) 配送スケジュールを実行します。

## <a name="use-inventory-buffers-and-inventory-levels-in-e-commerce-scenario"></a>Eコマースのシナリオで在庫バッファーと在庫レベルを使用する

Commerce サイト ビルダーでは、Commerce Headquarters の在庫バッファーおよび在庫レベル機能を使用して、E コマース サイトの在庫状況のメッセージングを決定します。 詳細については、[在庫設定を適用する](inventory-settings.md) を参照してください。

別の方法として、サードパーティの電子商取引ソリューションと統合する場合は、**GetEstimatedAvailability** と **GetEstimatedProductWarehouseAvailability** API を使用して、Eコマースのシナリオで製品の在庫状況を表示できます。 これらの API の詳細については、[小売チャンネルの引当可能在庫数量の計算](calculated-inventory-retail-channels.md) を参照してください。

在庫バッファーと在庫レベルの導入により、これらの API は、使用可能な物理値と使用可能な物理値の合計に基づいて決定される在庫レベル コードとラベル メッセージを返すことができます。 この API をさらに構成して、在庫数量がメッセージと共に返されるかどうか、および利用可能な数量を在庫バッファー値によって減少されるかどうかを決定できます。

在庫状態 API の応答を構成するには、次の手順に従います。

1. **Retail と Commerce** \> **Headquarters の設定** \> **パラメーター** \> **Commerce パラメーター** の順に移動します。
1. **店舗在庫** セクションの **在庫** タブにある **E コマース向け製品の使用可能性 API** フィールドで値を選択します。
1. チャンネルに設定を適用するには、**1110** (**グローバル コンフィギュレーション**) 配送スケジュール ジョブを実行します。

## <a name="additional-resources"></a>追加リソース

[製品カテゴリおよび製品の管理](category-management-product-creation.md)

[在庫設定を適用する](inventory-settings.md)

[小売チャンネルの引当可能在庫数量の計算](calculated-inventory-retail-channels.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]