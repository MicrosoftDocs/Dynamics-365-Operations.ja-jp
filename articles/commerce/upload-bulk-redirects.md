---
title: URL リダイレクトの一括アップロード
description: このトピックでは、Microsoft Dynamics 365 Commerce でリダイレクトのコンマ区切り値 (csv) ファイルをアップロードすることによって、URL リダイレクトを一括して実装する方法について説明します。
author: BrianShook
manager: annbe
ms.date: 05/05/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Developer
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: brshoo
ms.search.validFrom: 2020-02-11
ms.dyn365.ops.version: ''
ms.openlocfilehash: 2225ee862fe43197dc23d23f96f47fe327162b4d
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/15/2021
ms.locfileid: "4962897"
---
# <a name="upload-url-redirects-in-bulk"></a>URL リダイレクトの一括アップロード

[!include [banner](includes/banner.md)]

このトピックでは、Microsoft Dynamics 365 Commerce でリダイレクトのコンマ区切り値 (csv) ファイルをアップロードすることによって、URL リダイレクトを一括して実装する方法について説明します。

## <a name="overview"></a>概要

Dynamics 365 Commerce で新しい電子商取引サイトの作成が完了し、稼動する準備ができたら、古いサイトから新しいサイトにドメイン名システム (DNS) スイッチを設定する必要があります。 このスイッチを設定すると、新しいサイトの URL が古いサイトの URL とは異なる可能性があります。 特定の URL の場合は、古い URL を使用するトラフィックを新しい URL にリダイレクトできます。 このようにして、サイトの訪問者が目的の場所にアクセスできるようにすることができます。 リダイレクトすることにより、顧客のリンク切れを防ぐことができます。また、確立された検索エンジン最適化 (SEO) の結果を管理するのに役立ちます。

個々のリンクのリダイレクトを DNS に手動で構成することもできますが、複数のリンクをリダイレクトする必要がある場合は手動による構成を行う方が手間がかかります。 リダイレクト プロセスを効率化するために、Commerce では、サイトの一括リダイレクト マップを含むデータ ファイルをアップロードする機能が用意されています。 Commerce サイト ビルダーのサイト設定では、システム管理者が、URL の一括リダイレクトを処理する CSV ファイルをアップロードして公開することができます。

## <a name="redirect-csv-file"></a>CSV ファイルのリダイレクト

URL リダイレクトを処理するために、Commerce では、単純ですが、特定の CSV ファイルがサポートされています。 このファイルでは、次のスキーマを使用します。

`source URL, target URL, redirect type, case sensitivity`

このスキーマの要素の説明を次に示します。

- **ソース URL** : リダイレクトが必要な元の URL。
- **対象 URL** 元の URL に移動するときにユーザーに対してリダイレクトされる URL。
- **リダイレクト タイプ** : リダイレクトのタイプに応じて、この値を **301** または **302** に設定します。

    - **301** リダイレクト タイプは、恒久的なリダイレクトを表し、最も頻繁に使用されるリダイレクト タイプです。 検索エンジンの最適化 (SEO) のランク付けを保守する必要がある場合は、このオプションをお勧めします。
    - **302** リダイレクト タイプは一時的なリダイレクトを表し、あまり使用されることはありません。 一時メンテナンスまたはその他の非永続的なシナリオにおいてリンクの対象を保守する必要がある場合は、このオプションを使用することをお勧めします。

- **大文字と小文字を区別する** : ソース URL パスが大文字と小文字を区別する場合は、この値を **true** に設定します。 これにより、ソース URL パスに対して大文字と小文字を区別することができます。 大文字と小文字を区別する必要がない場合は、この値を **false** に設定します。 この値を空白のままにすると、規定値の **false** が使用されます。

次の例では、リダイレクトされた CSV ファイルのリダイレクト行セットを示します。

```plaintext
https://www.contoso.com/shop, https://www.fabrikam.com/allstores, 301, true

https://www.contoso.com/news, https://www.fabrikam.com/updates, 301, false

https://www.contoso.com/news, https://www.fabrikam.com/updates, 301
```

> [!IMPORTANT]
> 次のルールに従う必要があります。 それ以外の場合、バルク URL リダイレクトは正常に機能しません。
>
> - **CSV ファイルでヘッダーを使用することはできません** : 最初の行または最上位の行は、最初のリダイレクト行で開始する必要があります。
> - **循環するエントリはありません** : 行内のソース URL を対象 URL として同じ行に使用することはできません。 また、CSV ファイルの別の行または DNS リダイレクトのいずれかで、対象 URL がリンク元 URL としてリンクされている実装を回避する必要があります。
> - **ソースと対象の URL は、有効な URL 形式である必要があります** : スペースまたは無効な文字を URL で使用することはできません。
> - **クエリ文字列 URL はサポートされません** : ソースまたは対象 URL として指定されたクエリ文字列は実行されません。
> - **CSV ファイルは有効な CSV 形式にする必要があります** : CSV ファイルには、コンマ区切り値、リダイレクトごとに1行ずつ、およびファイル形式が有効である必要があります。また、ヘッダーを指定する必要はありません。

## <a name="upload-a-redirect-csv-file"></a>リダイレクト CSV ファイルのアップロード

リダイレクト用の CSV ファイルは、Commerce サイト ビルダーを使用してアップロードできます。 リダイレクト用の CSV ファイルをサイトにアップロードするユーザーは、そのサイトの管理者である必要があります。

リダイレクト CSV ファイルをアップロードするには、次の手順を実行します。

1. Commerce サイトビルダーで、一括 URL リダイレクトを受信するサイトに移動します。
1. **サイト 設定 \> 一般** に移動します。
1. **URL リダイレクト マッピング** で **アップロード** を選択します。
1. ファイル エクスプローラーで、CSV ファイルを検索して選択し、**開く** を選択します。
1. **URL リダイレクト マッピング** で、リダイレクトを有効にするにはこのオプションを **ON** に設定します。
1. コマンド バーで、**保存と発行** を選択し、この変更をコミットします。 リダイレクトが有効になるまで最大 15 分間待ちます。

> [!IMPORTANT]
> 一度に読み込むことができるのはサイトごとに 1 つのバルクリダイレクト CSV ファイルのみです。

## <a name="update-an-uploaded-redirect-csv-file"></a>アップロードされたリダイレクト CSV ファイルの更新

以前にアップロードされたリダイレクト用 CSV ファイルをダウンロードして参照することができます。 また、ファイルをダウンロードした後に、ファイルを編集してからアップロードすることもできます。

アップロードされたリダイレクト CSV ファイルをアップロードするには、次の手順を実行します。

1. Commerce サイトビルダーで、一括 URL リダイレクトを受信するサイトに移動します。
1. **サイト 設定 \> 一般** に移動します。
1. **URL リダイレクト マッピング** で **ダウンロード** を選択します。
1. ファイルをローカル コンピューターに保存します。
1. 必要に応じて CSV ファイルを編集し、保存します。
1. **URL リダイレクト マッピング** で **置換** を選択します。
1. ファイル エクスプローラーで、置換 CSV ファイルを検索して選択し、**開く** を選択します。
1. **URL リダイレクト マッピング** で、リダイレクトを有効にするにはこのオプションを **ON** に設定します。
1. コマンド バーで、**保存と発行** を選択し、この変更をコミットします。 リダイレクトが有効になるまで最大 15 分間待ちます。

## <a name="turn-off-bulk-redirects"></a>一括リダイレクトをオフにする

アップロードされたリダイレクト CSV ファイルでの一括リダイレクトを無効にするには、次の手順を実行します。

1. 有効であるが存在しない、ソースおよび対象 URL (`https://www.com,https://www.com,301`など) を持つ新しいCSVファイル を作成して保存します。
1. Commerce サイトビルダーで、一括 URL リダイレクトを受信するサイトに移動します。
1. **サイト 設定 \> 一般** に移動します。
1. **URL リダイレクト マッピング** で **置換** を選択します。
1. ファイル エクスプローラーで、新しい CSV ファイルを検索して選択し、**開く** を選択します。
1. **URL リダイレクト マッピング** で、リダイレクトを有効にするにはこのオプションを **ON** に設定します。 
1. コマンド バーで、**保存と発行** を選択し、この変更をコミットします。 リダイレクトが機能しなくなるまで最大 15 分間待ちます。

## <a name="additional-resources"></a>追加リソース

[ドメイン名のコンフィギュレーション](configure-your-domain-name.md)

[新しい E コマース テナントの配置](deploy-ecommerce-site.md)

[E コマース サイトの作成](create-ecommerce-site.md)

[オンライン チャンネルと Dynamics 365 Commerce サイトの関連付け](associate-site-online-store.md)

[robots.txt ファイルの管理](manage-robots-txt-files.md)

[Commerce での B2C テナントの設定](set-up-B2C-tenant.md)

[ユーザー ログイン用のカスタム ページの設定](custom-pages-user-logins.md)

[Commerce 環境での複数の B2C テナントのコンフィギュレーション](configure-multi-B2C-tenants.md)

[コンテンツ配信ネットワーク (CDN) のサポートの追加](add-cdn-support.md)

[場所に基づく店舗検出の有効化](enable-store-detection.md)
