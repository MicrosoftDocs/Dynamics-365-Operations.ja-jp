---
title: 顧客注文に対して複数の受け取り配送モードを有効にする
description: このトピックでは、ストアで集配する顧客注文を作成するために使用する Microsoft Dynamics 365 Commerce の機能について説明します。
author: hhainesms
manager: annbe
ms.date: 11/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: global
ms.author: hhaines
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.16
ms.openlocfilehash: 768b20ecc8d15353258c9b3af69b897957d3de60
ms.sourcegitcommit: 597476103bb695e3cbe6d9ffcd7a466400346636
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/20/2020
ms.locfileid: "4594977"
---
# <a name="enable-multiple-pickup-delivery-modes-for-customer-orders"></a><span data-ttu-id="dce91-103">顧客注文に対して複数の受け取り配送モードを有効にする</span><span class="sxs-lookup"><span data-stu-id="dce91-103">Enable multiple pickup delivery modes for customer orders</span></span>

[!include [banner](includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

<span data-ttu-id="dce91-104">Microsoft Dynamics 365 Commerce バージョン 10.0.16 またはそれ以降では、顧客が店舗で集荷する注文を作成するときに、買い物客または販売担当者が選択できる複数の荷渡方法を定義できます。</span><span class="sxs-lookup"><span data-stu-id="dce91-104">In Microsoft Dynamics 365 Commerce version 10.0.16 and later, organizations can define multiple modes of delivery that shoppers or sales associates can choose among when they create an order that will be picked up at a store.</span></span> <span data-ttu-id="dce91-105">このようにして、組織は買い物客に複数の集配オプションを提供できます。</span><span class="sxs-lookup"><span data-stu-id="dce91-105">In this way, organizations can provide multiple pickup options to their shoppers.</span></span> <span data-ttu-id="dce91-106">たとえば、多くの小売業者は、注文に対して、店舗内の集配またはカーブサイド ピックアップのいずれかの選択を行うことになります。</span><span class="sxs-lookup"><span data-stu-id="dce91-106">For example, many retailers now offer shoppers the choice of in-store pickup or curbside pickup for their orders.</span></span> <span data-ttu-id="dce91-107">Commerce では、これらのさまざまな集荷配送モードの構成をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="dce91-107">Commerce supports the configuration of these different pickup delivery modes.</span></span> <span data-ttu-id="dce91-108">ユーザーは、サポートされている任意の Commerce チャネルチャネル (電子商取引、コールセンター、店舗) で顧客注文を作成するときに、それらを利用できます。</span><span class="sxs-lookup"><span data-stu-id="dce91-108">Users can then take advantage of them when they create customer orders in any supported Commerce channel (e-commerce, call center, or store).</span></span>

## <a name="enable-and-configure-pickup-delivery-modes"></a><span data-ttu-id="dce91-109">集荷配送モードの有効化と構成</span><span class="sxs-lookup"><span data-stu-id="dce91-109">Enable and configure pickup delivery modes</span></span>

<span data-ttu-id="dce91-110">この機能を使用するには、Commerce 本社の **機能の管理** ワークスペースで、**複数の集荷配送モードのサポート** 機能を有効にします。</span><span class="sxs-lookup"><span data-stu-id="dce91-110">To use this functionality, turn on the **Support for multiple pickup delivery modes** feature in the **Feature management** workspace in Commerce headquarters.</span></span> <span data-ttu-id="dce91-111">機能を有効にすると、追加の構成が必要になります。</span><span class="sxs-lookup"><span data-stu-id="dce91-111">After you turn on the feature, additional configuration is required.</span></span>

<span data-ttu-id="dce91-112">Commerce バージョン 10.0.15 では、組織は指定された集荷配送モードの配送方法を 1 つだけ定義できます。</span><span class="sxs-lookup"><span data-stu-id="dce91-112">In Commerce version 10.0.15 and earlier, organizations can define only one mode of delivery as the designated pickup delivery mode.</span></span> <span data-ttu-id="dce91-113">この定義は、**Commerce パラメーター** ページで行います。</span><span class="sxs-lookup"><span data-stu-id="dce91-113">This definition is done on the **Commerce parameters** page.</span></span> <span data-ttu-id="dce91-114">バージョン 10.0.16以降では、**複数の集荷配送モードのサポート** 機能をオンにすると、**Commerce パラメーター** ページで集荷配送モードとして以前に定義された配送モードは、集荷配送モードの新しい構成に自動的にコピーされます。</span><span class="sxs-lookup"><span data-stu-id="dce91-114">In version 10.0.16 and later, when you turn on the **Support for multiple pickup delivery modes** feature, the mode of delivery that was previously defined as the pickup delivery mode on the **Commerce parameters** page is automatically copied into the new configuration for pickup delivery modes.</span></span>

![Commerce パラメーター ページの集荷配送モード](media/multiplepickupparameter.png)

<span data-ttu-id="dce91-116">**複数の集荷配送モードのサポート** 機能を有効にした後で、**Commerce パラメーター** ページの **顧客注文** タブの **配送モード** クイック タブの **配送の集荷モード** グリッドで、複数の集荷配送モードを定義できます。</span><span class="sxs-lookup"><span data-stu-id="dce91-116">After you turn on the **Support for multiple pickup delivery modes** feature, you can define multiple pickup delivery modes in the **Pickup mode of delivery** grid on the **Modes of delivery** FastTab on the **Customer orders** tab of the **Commerce parameters** page.</span></span>

<span data-ttu-id="dce91-117">**配送の集荷モードの実行** フィールドおよび **電子的方法による納品** フィールドで、**出荷注文に対する配送モードのみを表示** オプションが、このクイック タブに移動されました。</span><span class="sxs-lookup"><span data-stu-id="dce91-117">The **Carry Out mode of delivery** and **Electronic mode of delivery** fields, and the **Show only carrier mode options for ship orders** option, have been relocated to this FastTab.</span></span>

<span data-ttu-id="dce91-118">追加の集荷配送モードを構成する前に、配送モードを定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dce91-118">Before you configure additional pickup delivery modes, you must define the modes of delivery.</span></span> <span data-ttu-id="dce91-119">Commerce 本社の **配送モード** ページで、集荷配送モードとみなす配送モードを追加します。</span><span class="sxs-lookup"><span data-stu-id="dce91-119">On the **Modes of delivery** page in Commerce headquarters, add the modes of delivery that should be considered pickup delivery modes.</span></span> <span data-ttu-id="dce91-120">すべての構成が完了していることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="dce91-120">Make sure that all configuration is completed.</span></span> <span data-ttu-id="dce91-121">たとえば、配送方法が適切なチャンネルおよび品目にリンクされていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="dce91-121">For example, make sure that the mode of delivery is linked to appropriate channels and items.</span></span> <span data-ttu-id="dce91-122">完了したら、**配送モードの処理** ジョブを実行して、荷渡方法、チャンネル、および品目の間の関係を作成します。</span><span class="sxs-lookup"><span data-stu-id="dce91-122">When you've finished, run the **Process delivery modes** job to create the relationships among the mode of delivery, channels, and items.</span></span> <span data-ttu-id="dce91-123">ジョブの実行が完了したら、Commerce 本社の **配送スケジュール** ページを開き、**1120** の配送ジョブを実行して、関連する Commerce チャネル データベースが新しい配送モードの構成で更新されることを確認します。</span><span class="sxs-lookup"><span data-stu-id="dce91-123">When the job has finished running, open the **Distribution schedule** page in Commerce headquarters, and run the **1120** distribution job to ensure that the relevant Commerce channel databases are updated with your new delivery mode configuration.</span></span>

![カーブサイド ピックアップのための配送方法の構成例](media/pickupmodes.png)

<span data-ttu-id="dce91-125">追加の集荷配送モードを定義したら、**Commerce パラメーター** ページの **配送の集荷モード** グリッドにそれらを追加します。</span><span class="sxs-lookup"><span data-stu-id="dce91-125">After you define the additional pickup delivery modes, add them to the **Pickup mode of delivery** grid on the **Commerce parameters** page.</span></span> <span data-ttu-id="dce91-126">次に、適切な配送ジョブを実行して、構成変更によって関連する Commerce チャネル データベースを更新します。</span><span class="sxs-lookup"><span data-stu-id="dce91-126">Then run the appropriate distribution jobs to update the relevant Commerce channel databases with the configuration change.</span></span>

> [!NOTE]
> <span data-ttu-id="dce91-127">作成する追加の集荷配送モード構成ごとに、**複数の集荷配送モードのサポート** 機能をオンにしたときに **配送の集荷モード** グリッドにコピーされる既存の集荷配送モードとは別に、新しい配送モードを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dce91-127">Apart from the existing pickup delivery mode that is copied to the **Pickup mode of delivery** grid when you turn on the **Support for multiple pickup delivery modes** feature, for every additional pickup delivery mode configuration that you create, you should configure new modes of delivery.</span></span> <span data-ttu-id="dce91-128">配送方法を **配送の集荷モード** グリッドに追加すると、Commerce は、アクティブな未処理の販売注文明細行ですでにそれらが使用されているかどうかを検証します。</span><span class="sxs-lookup"><span data-stu-id="dce91-128">When you add modes of delivery to the **Pickup mode of delivery** grid, Commerce validates whether any active open sales lines already use them.</span></span> <span data-ttu-id="dce91-129">未処理の販売明細行が見つかった場合は、エラー メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="dce91-129">If any open sales lines are found, you receive an error message.</span></span> <span data-ttu-id="dce91-130">配送方法は、それを使用するすべての未処理の販売明細行が決済済 (請求済またはキャンセル済) になるまで、集荷配送モードとは見なされません。</span><span class="sxs-lookup"><span data-stu-id="dce91-130">Modes of delivery aren't considered pickup delivery modes until all open sales lines that use them have been closed (either invoiced or canceled).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="dce91-131">**Commerce パラメーター** ページで複数の集荷配送モードを定義すると、**複数の集荷配送モードのサポート** 機能が必須になり、オフにすることができなくなります。</span><span class="sxs-lookup"><span data-stu-id="dce91-131">After you define more than one pickup delivery mode on the **Commerce parameters** page, the **Support for multiple pickup delivery modes** feature becomes mandatory and can no longer be turned off.</span></span> <span data-ttu-id="dce91-132">この機能をオフにする必要がある場合は、**配送の集荷モード** グリッドから、1 つを除くすべての集荷配送モードを削除します。</span><span class="sxs-lookup"><span data-stu-id="dce91-132">If you must turn off the feature, remove all but one pickup delivery mode from the **Pickup mode of delivery** grid.</span></span> <span data-ttu-id="dce91-133">集荷配送モードを 1 つだけ定義した場合、その機能は必須ではなく、オフにすることができます。</span><span class="sxs-lookup"><span data-stu-id="dce91-133">When only one pickup delivery mode is defined, the feature is longer considered mandatory and can be turned off.</span></span>

### <a name="e-commerce-site-configurations"></a><span data-ttu-id="dce91-134">電子商取引サイトの構成</span><span class="sxs-lookup"><span data-stu-id="dce91-134">E-commerce site configurations</span></span>

<span data-ttu-id="dce91-135">複数の **集荷配送モード** 機能が有効になっている場合、電子商取引ページの次のモジュールに、新しい集荷配送モードが設定されていることが示されます。</span><span class="sxs-lookup"><span data-stu-id="dce91-135">When the **Support for multiple pickup delivery modes** feature is turned on, the following modules on e-commerce pages show the new pickup delivery modes as configured:</span></span>

- <span data-ttu-id="dce91-136">購入ボックス</span><span class="sxs-lookup"><span data-stu-id="dce91-136">Buy box</span></span>
- <span data-ttu-id="dce91-137">店舗セレクター</span><span class="sxs-lookup"><span data-stu-id="dce91-137">Store selector</span></span>
- <span data-ttu-id="dce91-138">カート</span><span class="sxs-lookup"><span data-stu-id="dce91-138">Cart</span></span>
- <span data-ttu-id="dce91-139">集配情報</span><span class="sxs-lookup"><span data-stu-id="dce91-139">Pickup information</span></span>
- <span data-ttu-id="dce91-140">注文確認</span><span class="sxs-lookup"><span data-stu-id="dce91-140">Order confirmation</span></span>
- <span data-ttu-id="dce91-141">注文の詳細</span><span class="sxs-lookup"><span data-stu-id="dce91-141">Order details</span></span>

<span data-ttu-id="dce91-142">集荷配送モードを使用できるようにするために、電子商取引ページに対して追加の手順を実行する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="dce91-142">No additional steps are required on e-commerce pages to make the pickup delivery modes available.</span></span>

## <a name="work-with-multiple-pickup-delivery-modes"></a><span data-ttu-id="dce91-143">複数の集荷配送モードの使用</span><span class="sxs-lookup"><span data-stu-id="dce91-143">Work with multiple pickup delivery modes</span></span>

<span data-ttu-id="dce91-144">1 つのチャンネルに対して複数の集荷配送モードを使用できる場合は、選択された製品の購入時に顧客に提供されるエクスペリエンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="dce91-144">When multiple pickup delivery modes are available for a channel, an enhanced experience is provided to customers when they shop for products that will be picked up.</span></span> 

- <span data-ttu-id="dce91-145">電子商取引のチャンネルでは、買い物客が利用可能な任意の集荷配送モードを選択できます。</span><span class="sxs-lookup"><span data-stu-id="dce91-145">In e-commerce channels, shoppers can select any valid pickup delivery mode that is available.</span></span> <span data-ttu-id="dce91-146">たとえば、小売業者は、2 つの集荷配送モード (店舗内集配とカーブサイド ピックアップの両方) を定義し、両方とも **配送の集荷モード** グリッドで構成されており、その両方が注文フルフィルメントおよび買い物客が現在購入している製品に対して有効になります。</span><span class="sxs-lookup"><span data-stu-id="dce91-146">For example, a retailer defines two pickup delivery modes (in-store pickup and curbside pickup), both are configured in the **Pickup mode of delivery** grid, and both are valid for the order fulfillment channel and the product that a shopper is currently purchasing.</span></span> <span data-ttu-id="dce91-147">この場合、買い物客は好みの集荷配送モードを選択できます。</span><span class="sxs-lookup"><span data-stu-id="dce91-147">In this case, the shopper can select their preferred pickup delivery mode.</span></span> <span data-ttu-id="dce91-148">選択した集荷配送モードは、Commerce 本社で注文が作成されたときに販売注文明細行にリンクされた配送方法になります。</span><span class="sxs-lookup"><span data-stu-id="dce91-148">The selected pickup delivery mode then becomes the mode of delivery that is linked to the sales order line when the order is created in Commerce headquarters.</span></span>

    ![電子商取引の集荷オプションの選択](media/pickupecommerce.png)

- <span data-ttu-id="dce91-150">店舗チャネルでは、販売時点管理 (POS) アプリケーションを介して集荷の顧客注文が作成された場合、販売担当者は、使用可能な集荷配送モードが構成されている場合はその中から選択するように求められます。</span><span class="sxs-lookup"><span data-stu-id="dce91-150">In store channels, if a customer order for pickup is created through the point of sale (POS) application, the sales associate is prompted to choose among the available pickup delivery modes, if any have been configured.</span></span> <span data-ttu-id="dce91-151">チャンネルと品目に対して有効な集荷配送モードが 1 つしかない場合は、それを選択するように求められることはありません。</span><span class="sxs-lookup"><span data-stu-id="dce91-151">If only one valid pickup delivery mode is available for the channel and item, the sales associate isn't prompted to select it.</span></span> <span data-ttu-id="dce91-152">代わりに、利用可能な集荷配送モードが注文明細行に自動的に適用されます。</span><span class="sxs-lookup"><span data-stu-id="dce91-152">Instead, the available pickup delivery mode is automatically applied to the order lines.</span></span>

    ![POS アプリケーションの集荷オプションの選択](media/pickuppos.png)

- <span data-ttu-id="dce91-154">コール センター チャネルでは、ユーザーが集荷注文を作成するときに、コール センター チャネルにリンクされている任意の集荷配送モードを手動で選択できます。</span><span class="sxs-lookup"><span data-stu-id="dce91-154">In call center channels, when users create pickup orders, they can manually select any defined pickup delivery mode that is linked to the call center channel.</span></span> <span data-ttu-id="dce91-155">次に、選択された集荷配送方法を、リンクされている品目が注文済である場合に使用できるかどうかを検証します。</span><span class="sxs-lookup"><span data-stu-id="dce91-155">The system then validates that the selected pickup delivery mode can be used when the item that is being linked to it is ordered.</span></span> <span data-ttu-id="dce91-156">コール センター チャネルで集荷配送モードが選択されている場合は、販売注文明細行を有効な店舗倉庫にリンクする必要があります。</span><span class="sxs-lookup"><span data-stu-id="dce91-156">When a pickup delivery mode is selected in call center channels, the sales order lines must be linked to a valid store warehouse.</span></span> <span data-ttu-id="dce91-157">非店舗倉庫がコールセンターの販売明細行に定義されている場合、その販売明細行に集荷配送モードを設定することはできません。</span><span class="sxs-lookup"><span data-stu-id="dce91-157">If a non-store warehouse is defined on a call center sales line, a pickup delivery mode can't be set on that sales line.</span></span>
- <span data-ttu-id="dce91-158">販売担当者は、POS アプリケーションの **注文の取り消し** または **注文のフルフィルメント** 処理を使用して、集荷の注文または注文明細行の一覧を取得できます。</span><span class="sxs-lookup"><span data-stu-id="dce91-158">Sales associates can use the **Order recall** or **Order fulfillment** operation in the POS application to retrieve a list of orders or order lines for pickup.</span></span> <span data-ttu-id="dce91-159">販売担当者が、事前に定義された検索フィルターを使用して現在の店舗で集荷する注文をすべて表示する場合は、クエリを変更して、任意の集荷配送モードを使用する適格な注文をすべて検索結果に含めることができるようにします。</span><span class="sxs-lookup"><span data-stu-id="dce91-159">If a sales associate uses a predefined search filter to show all orders that will be picked up at the current store, the queries are modified to ensure that the search results include all eligible orders that use any pickup delivery mode.</span></span> <span data-ttu-id="dce91-160">POS ユーザーも既存のフィルターを使用して、注文の一覧を特定の集荷配送モードに絞り込むことができます。</span><span class="sxs-lookup"><span data-stu-id="dce91-160">POS users can also use existing filters to narrow down the list of orders to a specific pickup delivery mode.</span></span> <span data-ttu-id="dce91-161">たとえば、そのユーザーはカーブサイド ピックアップの注文のみを表示できます。</span><span class="sxs-lookup"><span data-stu-id="dce91-161">For example, they can show only orders for curbside pickup.</span></span>

    ![受注の一覧に適用される集配配送モードのフィルター](media/pickuprecallorder.png)

## <a name="considerations-for-distributed-order-management"></a><span data-ttu-id="dce91-163">配分済み注文の管理に関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="dce91-163">Considerations for distributed order management</span></span>

<span data-ttu-id="dce91-164">Commerce の[配分済み注文の管理 (DOM)](https://docs.microsoft.com/dynamics365/commerce/dom)機能は、店舗集配としてマークされている販売明細行を無視します。</span><span class="sxs-lookup"><span data-stu-id="dce91-164">The [distributed order management (DOM)](https://docs.microsoft.com/dynamics365/commerce/dom) features in Commerce ignore any sales lines that are marked for store pickup.</span></span> <span data-ttu-id="dce91-165">これらの機能は、構成済の集荷配送モードにリンクされている販売明細行が DOM ロジックをバイパスし、新しいフルフィルメント倉庫に再割り当てされないように更新されています。</span><span class="sxs-lookup"><span data-stu-id="dce91-165">These features have been updated to ensure that sales lines that are linked to configured pickup delivery modes bypass the DOM logic and won't be reallocated to a new fulfillment warehouse.</span></span>
