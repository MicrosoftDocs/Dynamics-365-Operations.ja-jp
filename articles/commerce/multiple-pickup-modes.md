---
title: 顧客注文に対して複数の受け取り配送モードを有効にする
description: このトピックでは、ストアで集配する顧客注文を作成するために使用する Microsoft Dynamics 365 Commerce の機能について説明します。
author: hhainesms
manager: annbe
ms.date: 11/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.region: global
ms.author: hhaines
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.16
ms.openlocfilehash: c0879343f100fa1fe6e0a4b4fbf085574225e898
ms.sourcegitcommit: bea695707d1e7b4e2713b62405ad0e7a7a893420
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/22/2021
ms.locfileid: "5053416"
---
# <a name="enable-multiple-pickup-delivery-modes-for-customer-orders"></a>顧客注文に対して複数の受け取り配送モードを有効にする

[!include [banner](includes/banner.md)]


Microsoft Dynamics 365 Commerce バージョン 10.0.16 またはそれ以降では、顧客が店舗で集荷する注文を作成するときに、買い物客または販売担当者が選択できる複数の荷渡方法を定義できます。 このようにして、組織は買い物客に複数の集配オプションを提供できます。 たとえば、多くの小売業者は、注文に対して、店舗内の集配またはカーブサイド ピックアップのいずれかの選択を行うことになります。 Commerce では、これらのさまざまな集荷配送モードの構成をサポートしています。 ユーザーは、サポートされている任意の Commerce チャネルチャネル (電子商取引、コールセンター、店舗) で顧客注文を作成するときに、それらを利用できます。

## <a name="enable-and-configure-pickup-delivery-modes"></a>集荷配送モードの有効化と構成

この機能を使用するには、Commerce 本社の **機能の管理** ワークスペースで、**複数の集荷配送モードのサポート** 機能を有効にします。 機能を有効にすると、追加の構成が必要になります。

Commerce バージョン 10.0.15 では、組織は指定された集荷配送モードの配送方法を 1 つだけ定義できます。 この定義は、**Commerce パラメーター** ページで行います。 バージョン 10.0.16以降では、**複数の集荷配送モードのサポート** 機能をオンにすると、**Commerce パラメーター** ページで集荷配送モードとして以前に定義された配送モードは、集荷配送モードの新しい構成に自動的にコピーされます。

![Commerce パラメーター ページの集荷配送モード](media/multiplepickupparameter.png)

**複数の集荷配送モードのサポート** 機能を有効にした後で、**Commerce パラメーター** ページの **顧客注文** タブの **配送モード** クイック タブの **配送の集荷モード** グリッドで、複数の集荷配送モードを定義できます。

**配送の集荷モードの実行** フィールドおよび **電子的方法による納品** フィールドで、**出荷注文に対する配送モードのみを表示** オプションが、このクイック タブに移動されました。

追加の集荷配送モードを構成する前に、配送モードを定義する必要があります。 Commerce 本社の **配送モード** ページで、集荷配送モードとみなす配送モードを追加します。 すべての構成が完了していることを確認してください。 たとえば、配送方法が適切なチャンネルおよび品目にリンクされていることを確認してください。 完了したら、**配送モードの処理** ジョブを実行して、荷渡方法、チャンネル、および品目の間の関係を作成します。 ジョブの実行が完了したら、Commerce 本社の **配送スケジュール** ページを開き、**1120** の配送ジョブを実行して、関連する Commerce チャネル データベースが新しい配送モードの構成で更新されることを確認します。

![カーブサイド ピックアップのための配送方法の構成例](media/pickupmodes.png)

追加の集荷配送モードを定義したら、**Commerce パラメーター** ページの **配送の集荷モード** グリッドにそれらを追加します。 次に、適切な配送ジョブを実行して、構成変更によって関連する Commerce チャネル データベースを更新します。

> [!NOTE]
> 作成する追加の集荷配送モード構成ごとに、**複数の集荷配送モードのサポート** 機能をオンにしたときに **配送の集荷モード** グリッドにコピーされる既存の集荷配送モードとは別に、新しい配送モードを構成する必要があります。 配送方法を **配送の集荷モード** グリッドに追加すると、Commerce は、アクティブな未処理の販売注文明細行ですでにそれらが使用されているかどうかを検証します。 未処理の販売明細行が見つかった場合は、エラー メッセージが表示されます。 配送方法は、それを使用するすべての未処理の販売明細行が決済済 (請求済またはキャンセル済) になるまで、集荷配送モードとは見なされません。

> [!IMPORTANT]
> **Commerce パラメーター** ページで複数の集荷配送モードを定義すると、**複数の集荷配送モードのサポート** 機能が必須になり、オフにすることができなくなります。 この機能をオフにする必要がある場合は、**配送の集荷モード** グリッドから、1 つを除くすべての集荷配送モードを削除します。 集荷配送モードを 1 つだけ定義した場合、その機能は必須ではなく、オフにすることができます。

### <a name="e-commerce-site-configurations"></a>電子商取引サイトの構成

複数の **集荷配送モード** 機能が有効になっている場合、電子商取引ページの次のモジュールに、新しい集荷配送モードが設定されていることが示されます。

- 購入ボックス
- 店舗セレクター
- カート
- 集配情報
- 注文確認
- 注文の詳細

集荷配送モードを使用できるようにするために、電子商取引ページに対して追加の手順を実行する必要はありません。

## <a name="work-with-multiple-pickup-delivery-modes"></a>複数の集荷配送モードの使用

1 つのチャンネルに対して複数の集荷配送モードを使用できる場合は、選択された製品の購入時に顧客に提供されるエクスペリエンスが向上します。 

- 電子商取引のチャンネルでは、買い物客が利用可能な任意の集荷配送モードを選択できます。 たとえば、小売業者は、2 つの集荷配送モード (店舗内集配とカーブサイド ピックアップの両方) を定義し、両方とも **配送の集荷モード** グリッドで構成されており、その両方が注文フルフィルメントおよび買い物客が現在購入している製品に対して有効になります。 この場合、買い物客は好みの集荷配送モードを選択できます。 選択した集荷配送モードは、Commerce 本社で注文が作成されたときに販売注文明細行にリンクされた配送方法になります。

    ![電子商取引の集荷オプションの選択](media/pickupecommerce.png)

- 店舗チャネルでは、販売時点管理 (POS) アプリケーションを介して集荷の顧客注文が作成された場合、販売担当者は、使用可能な集荷配送モードが構成されている場合はその中から選択するように求められます。 チャンネルと品目に対して有効な集荷配送モードが 1 つしかない場合は、それを選択するように求められることはありません。 代わりに、利用可能な集荷配送モードが注文明細行に自動的に適用されます。

    ![POS アプリケーションの集荷オプションの選択](media/pickuppos.png)

- コール センター チャネルでは、ユーザーが集荷注文を作成するときに、コール センター チャネルにリンクされている任意の集荷配送モードを手動で選択できます。 次に、選択された集荷配送方法を、リンクされている品目が注文済である場合に使用できるかどうかを検証します。 コール センター チャネルで集荷配送モードが選択されている場合は、販売注文明細行を有効な店舗倉庫にリンクする必要があります。 非店舗倉庫がコールセンターの販売明細行に定義されている場合、その販売明細行に集荷配送モードを設定することはできません。
- 販売担当者は、POS アプリケーションの **注文の取り消し** または **注文のフルフィルメント** 処理を使用して、集荷の注文または注文明細行の一覧を取得できます。 販売担当者が、事前に定義された検索フィルターを使用して現在の店舗で集荷する注文をすべて表示する場合は、クエリを変更して、任意の集荷配送モードを使用する適格な注文をすべて検索結果に含めることができるようにします。 POS ユーザーも既存のフィルターを使用して、注文の一覧を特定の集荷配送モードに絞り込むことができます。 たとえば、そのユーザーはカーブサイド ピックアップの注文のみを表示できます。

    ![受注の一覧に適用される集配配送モードのフィルター](media/pickuprecallorder.png)

## <a name="considerations-for-distributed-order-management"></a>配分済み注文の管理に関する考慮事項

Commerce の[配分済み注文の管理 (DOM)](https://docs.microsoft.com/dynamics365/commerce/dom)機能は、店舗集配としてマークされている販売明細行を無視します。 これらの機能は、構成済の集荷配送モードにリンクされている販売明細行が DOM ロジックをバイパスし、新しいフルフィルメント倉庫に再割り当てされないように更新されています。


[!INCLUDE[footer-include](../includes/footer-banner.md)]