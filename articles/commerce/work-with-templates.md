---
title: テンプレートの使用
description: このトピックでは、Microsoft Dynamics 365 Commerce でのテンプレートの使用方法について説明します。
author: phinneyridge
manager: annbe
ms.date: 04/14/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Retail, Core, Operations
ms.search.region: Global
ms.search.industry: ''
ms.author: niholman
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.5
ms.openlocfilehash: a3fc4259a76f6edcfaa0b8f6e08292477c6c0835
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/13/2020
ms.locfileid: "4413766"
---
# <a name="work-with-templates"></a>テンプレートの使用


[!include [banner](includes/banner.md)]

このトピックでは、Microsoft Dynamics 365 Commerce でのテンプレートの使用方法について説明します。

## <a name="overview"></a>概要

[テンプレートとレイアウトの概要](templates-layouts-overview.md)で説明したように、テンプレートは、下流の作成者が使用できる一連のオプションを定義します。 テンプレートは企業の Web 作成チームにとってさまざまな理由から役に立ちます。適切なテンプレートを使用することで、次の目標を達成できます。

- 日々のコンテンツ編集者の役割において、作成エクスペリエンスを簡略化します。

    - モジュール オプションをフィルター処理して、特定のページ セクションに関連モジュールのみを表示します。 (たとえば、テンプレートのマーケティング セクションをコンフィギュレーションして、そのコンテキストでは使用しない不適切なモジュールをフィルター処理し、表示されている場合はコンテンツの作成タスクを複雑化します。)
    - 既定のモジュール設定をコンフィギュレーションして、作成の効率を高めます。
    - 既定のページ フラグメントを定義して、作成の効率を高めます。 (たとえば、テンプレートのヘッダーおよびフッター フラグメントは、下流のページすべてで自動的に表示されます。)

- 承認済の一連のモジュール配置およびコンフィギュレーション オプションを定義することで、企業のサイトをブランド イメージに沿ったものに保ちます。

    > [!TIP] 
    > 成功している E コマース サイトには、顧客になじみがあり、反復可能で、ブランドイメージに沿ったユーザー エクスペリエンス (UX) デザイン パターンがあります。 テンプレートを使用すると、サイト全体の一貫性を制御するのに役立ちます。

- 反復可能でプログラムによって定義された、ページ定義およびメタデータを確認して、検索エンジン最適化 (SEO) スコアを向上させます。

> [!NOTE]
> テンプレートはサイト全体の整合性を制御するように設計されていますが、理論的には、一貫性を強要しないようにコンフィギュレーションすることができます。 ブランドとサイトの管理者は、サイトのページの可変性レベルを定義できます。 たとえば、テンプレートを完全に開いたままにすると、コンテンツ作成者が選択したページ デザインを作成できるようになります。 この場合、上記のどの利点も適用されません。

## <a name="modify-a-template"></a>テンプレートの変更

テンプレートは、テンプレート エディターを使用して変更できます。

テンプレート エディターを開くには、次の手順のいずれかに従います。

- サイトのナビゲーション ウィンドウで、**テンプレート** を選択し、変更するテンプレートを選択します。
- 既存のページのページ エディターで、左側のアウトライン ツリーのトップ ノードを選択します。 次に、右のプロパティ ウィンドウで、**テンプレートの編集** を選択します。

左側のアウトライン ツリー ビューには、子レイアウトとページで使用できるモジュール オプションと構造が表示されます。 アウトライン ツリーでモジュールを選択すると、選択したモジュールのテンプレート プロパティが右側のプロパティ ウィンドウに表示されます。 これらのプロパティの一部は、テンプレート編集に固有です。 次のテーブルにこれらのプロパティを示します。

| プロパティ名 | 説明 |
|---|---|
| 最小発生数 | このプロパティは、選択されたモジュールの最小発生数を定義します。 たとえば、値が **1** に設定されている場合、モジュールは下流の作成者に対して必要ですが、値が **0** (ゼロ) に設定されている場合、モジュールはオプションです。 |
| 最大発生数 | このプロパティは、選択されたモジュールの最大発生数を定義します。 たとえば、この値が **1** に設定されている場合、モジュールを追加できるのは 1 回だけです。 |
| 最小モジュール (コンテナー) | 他のモジュールを含むモジュール (つまり、*コンテナーモジュール*) では、このプロパティは子として追加する必要があるモジュール総数の最小数を定義します。 たとえば、カルーセル モジュールでは、値が 1 より大きい数値に設定されている場合があります。 |
| 最大モジュール (コンテナー) | コンテナー モジュールの場合、このプロパティは子として追加する必要があるモジュール総数の最大値を定義します。 たとえば、カルーセル モジュールでは、値が 10 より小さい数値に設定されている場合があります。 |
| ロック済 | **ロック済** のブール コントロールは、すべてのコア モジュール プロパティの横に表示されます。 これにより、テンプレート作成者はテンプレートのモジュール設定をロックできます。 ロック済のモジュールの設定は、子レイアウトまたはページで上書きすることはできません。 このテンプレートを使用するすべてのレイアウトとページで、一括編集可能なプロパティ値になります。 |

## <a name="create-a-new-template"></a>新しいテンプレートを作成

新しいテンプレートを作成するには、次の手順に従います。

1. サイトのナビゲーション ウィンドウで、**テンプレート** を選択し、テンプレート インスペクター ビューを開きます。
1. **新しいテンプレート** を選択します。
1. テンプレート作成ダイアログ ボックスで、テンプレートの名前と説明を入力します。 入力する値は、新しいページを作成するときに作成者に表示されます。 したがって、ページ作成者にとって有用なメタデータを入力します。 たとえば、説明として、**このテンプレートを使用して一般的なマーケティング ページを作成します** と入力します。 このメタデータは、後で編集できます。
1. **OK** をクリックして新しいテンプレートを作成し、テンプレート エディターを開きます。 テンプレート エディターでは、左側にアウトライン ツリー、右側にプロパティ ウィンドウが表示されます。
1. アウトライン ツリーでノードを展開し、**HTML ヘッド** スロットを選択します。
1. このスロットにまだモジュールが存在しない場合は、省略記号ボタン (**...**) をクリックし、**モジュールの追加** を選択します。
1. **モジュールの追加** ダイアログ ボックスで **既定のページの概要** を選択し、**OK** をクリックします。
1. アウトライン ツリーで新しいモジュールを選択し、プロパティ ウィンドウで、テンプレートのすべての子ページに対して自動的にコンフィギュレーションされる既定の設定を入力します。 既定の設定を使用しない場合は、値を空白のままにします。
1. アウトライン ツリーで **本文** スロットを選択し、省略記号ボタンを選択してから、**モジュールの追加** を選択します。
1. ページ コンテナー モジュールを選択し (オプションは 1 つしか存在しない場合があります)、**OK** を選択します。

新しいページ コンテナー モジュールの下に、新しい一連のスロット (**ヘッダー**、**メイン** など) が表示されます。 ここで、このテンプレートからページを作成するときに作成者が利用できるモジュール オプションを、追加およびコンフィギュレーションできます。 既定では、スロットにモジュールを追加しない場合、そのスロットで使用可能なすべてのモジュール タイプがサポートされます。

これで、このテンプレートは技術的に有効になり、保存され、チェック インし、新しいページを作成するために使用することができます。 ただし、次の 3 つのセクションでは、最初にコンフィギュレーションする必要があるその他の既定の設定について説明します。

## <a name="add-a-header-and-a-footer"></a>ヘッダーおよびフッターの追加

サイトに既にヘッダー フラグメントが存在する場合、次の手順に従ってヘッダーとフッターをテンプレートに追加します。

1. アウトライン ツリーで、**本文** スロットとその子ページ モジュールを展開します。
1. **ヘッダー** スロットを選択します。
1. **ヘッダー** スロットの省略記号ボタンを選択し、**フラグメントの追加** を選択します。
1. サイトのヘッダー フラグメントを検索して選択し、**OK** を選択します。

このテンプレートを使用するすべてのページでは、このヘッダー フラグメントが自動的に継承されます。

サイトにヘッダー フラグメントがまだ存在しない場合は、[フラグメントの作成](work-with-fragments.md#create-a-fragment)を参照してフラグメントの作成方法を理解してから、前の手順を実行してください。

## <a name="change-the-template-theme"></a>テンプレート テーマの変更

テンプレートを使用するすべてのページに適用する既定のテーマを設定するには、次の手順に従います。

1. 左側のアウトライン ツリーで、**本文** スロットを展開します。
1. **本文** スロットで、ページのコンテナー モジュールを選択します (たとえば、**既定のページ**)。
1. 右側のプロパティ ウィンドウの **テーマ** フィールドで、テーマを選択します。

既定では、選択したテーマがすべての新しいページで使用されます。 ページがレイアウト レベルまたはページ レベルでこの設定を上書きしないようにするには、**ロック済** ブール コントロールを **True** に設定します。

## <a name="add-a-script-to-a-template"></a>テンプレートへのスクリプトの追加

JavaScript を含む HTML **&lt;スクリプト&gt;** 要素をテンプレートに追加できます。 これにより、ページの HTML ヘッド、本文の開始、および本文の終了セクションに対して、既定のスクリプト動作を指定できます。

作業テンプレートにスクリプトを追加するには、次の手順に従います。

1. 左側にあるアウトライン ツリーで、**&lt;スクリプト&gt;** 要素を追加するスロットを選択します (たとえば、HTML ヘッド、本文の開始、本文の終了など)。
1. スロットの省略記号ボタンを選択し、**モジュールの追加** を選択します。
1. **モジュールの追加** ダイアログ ボックスで、スクリプト モジュールを選択します (たとえば **外部スクリプト** や **インライン スクリプト** など)。
1. 右側のプロパティ ウィンドウの、適切なスクリプト プロパティ コントロール (たとえば **インライン スクリプト** や **スクリプト タグ** など) で、スクリプトを入力します。
1. プロパティ ウィンドウで、コンフィギュレーションするその他のオプション設定を入力します。

> [!TIP]
> 他のテンプレートのスクリプト モジュールを再利用する場合は、それらをフラグメントに変換することができます。 この方法により、作成プロセスを効率化し、更新プロセスを一元化することができます。 スクリプト モジュールをフラグメントに変換する方法については、[既存のモジュール コンフィギュレーションをフラグメントとして保存する](work-with-fragments.md#save-an-existing-module-configuration-as-a-fragment)を参照してください。

## <a name="save-check-in-preview-and-publish-a-template"></a>テンプレートの保存、チェック イン、プレビュー、および公開

テンプレートを保存してチェック インするには、次の手順に従います。

1. テンプレート エディターの上部にある **保存** を選択します。 保存された変更は、チェック インされるまで下流ページに影響しません。
1. **編集完了** を選択します。 下流のワークフローで変更が検出可能になりました。

変更をプレビューするには、テンプレートを使用している既存のページを開くか、テンプレートから新しいページを作成します。

テンプレートの変更をプレビューしたら、次のいずれかの手順に従って、実際のサイトにテンプレートを公開します。

* **テンプレート** に移動し、テンプレートを選択してから、**公開** を選択します。
* レイアウト名を選択してレイアウト エディターを開き、**発行** を選択します。
* 未公開のテンプレートを参照するページを公開します。 テンプレートが自動的に公開されます。

> [!WARNING]
> テンプレートまたはその他のコンテンツ管理システム (CMS) 項目を公開すると、インターネット上で検出可能になります。 ドキュメントまたは資産を公開する準備が整うまで、公開しないでください。 保存およびチェック インされているが、まだ公開されていないドキュメント バージョンは、認証済みのシステム ユーザーだけが検出可能です。

## <a name="additional-resources"></a>追加リソース

[テンプレートとレイアウトの概要](templates-layouts-overview.md)

[プリセット レイアウトの使用](work-with-layouts.md)
