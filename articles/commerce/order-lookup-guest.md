---
title: ゲスト チェックアウトの注文の検索を有効にする
description: このトピックでは、Microsoft Dynamics 365 Commerce でゲスト チェックアウトの注文の検索を有効にする方法について説明します。
author: stuharg
ms.date: 09/01/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: stuharg
ms.search.validFrom: 2021-08-15
ms.dyn365.ops.version: Release 10.0.22
ms.openlocfilehash: 639ee670b83198423425d03dad308306c9eed25c
ms.sourcegitcommit: 1707cf45217db6801df260ff60f4648bd9a4bb68
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/23/2021
ms.locfileid: "7674979"
---
# <a name="enable-order-lookup-for-guest-checkouts"></a>ゲスト チェックアウトの注文の検索を有効にする

[!include [banner](includes/banner.md)]

このトピックでは、Microsoft Dynamics 365 Commerce でゲスト チェックアウトの注文の検索を有効にする方法について説明します。

ゲスト チェックアウトの注文の検索機能を使用すると、顧客はゲスト ユーザーとして購入した注文を検索できます。 注文の検索機能は、顧客が注文製品のフルフィルメントの状態の確認、注文の出荷先住所の確認、製品の再注文、注文の集荷を行う店舗の確認などのアクションを実行するときに役立ちます。

登録ユーザーとして注文を行った顧客は、ログイン時に注文の詳細を確認できますが、ゲスト チェックアウトを使用して注文を行う顧客はできません。 ただし、ゲストチェックアウトの注文の検索機能が有効になっている場合は、顧客がゲストとして行った注文を検索するために使用できるフォームが提供されます。 このフォームでは、顧客はチェックアウト時に指定した注文確認 IDと (オプションで) 電子メール アドレスを入力します。

また、顧客が注文の注文詳細ページに直接移動できるリンクまたはボタンを、どの注文関連のトランザクション電子メールにも含めることができます。 このリンクまたはボタンは、登録ユーザーとゲスト ユーザーのどちらから行われた注文に対しても機能します。

## <a name="turn-on-necessary-features-in-commerce-headquarters"></a>Commerce 本社で必要な機能を有効にする

ゲスト チェックアウトの注文の検索を有効にするには、Commerce 本社の **ワークスペース \> 機能管理** で次の機能を有効にする必要があります。

| フィーチャー | 使用方法 |
|---------|---------|
| Retail 匿名ユーザーの検索順序の詳細の選択機能 | この機能により、Commerce パラメータでユーザー インターフェイスが公開され、非認証ユーザーに対して注文検索 API を有効にし、個人データの表示方法を設定することができます。 |
| より強力なチャネル参照 ID の生成を有効にする | この機能により、より安全な 12 文字のチャネル参照 ID (注文確認 ID) が生成され、注文の検索時にクエリ文字列に渡されます。 |
| チャネルにわたり一貫性のあるチャネル参照 ID 形式を生成する | この機能により、eコマース サイト、小売販売時点管理 (POS)、またはコール センターから行われた注文に対して安全なチャンネル参照 ID が生成されます。 この機能を有効にする前に、**より強力なチャネル参照 ID の生成を有効にする** が有効になっている必要があります。 |

**Retail 匿名ユーザーの検索順序の詳細の選択機能** を有効にした後、認証されていない注文の検索をサポートする API を Commerce 本社で有効にする必要があります。 **Retail と Commerce \> 本社の設定 \> パラメーター \> 顧客注文** の順にクリックします。 次の図に示すように、**顧客注文** ページの **注文検索** クイック タブで、**認証されていない注文の検索を有効にする** オプションを **はい** に設定します。

## <a name="manage-the-display-of-personal-data"></a>個人データの表示を管理する

Commerce 本社の **顧客注文** ページにある **注文検索** クイック タブには、**ゲスト注文の検索に個人データを含める** フィールドが含まれており、個人情報が顧客に表示されるかどうかを制御できます。 この個人情報には、顧客の出荷先住所と、顧客のクレジット カード番号の末尾 4 桁が含まれます。 既定では、非認証の注文の検索が有効なとき、個人情報は顧客に対して表示されません。 次の表では、使用可能なオプションについて説明します。

| オプション | 結果 |
|--------|--------|
| 表示しない | 既定値。 注文検索に個人情報は表示されません。 サインインした登録ユーザーが、サインイン中に作成した注文を検索すると、自分の個人情報を見ることができます。 |
| ゲスト注文のみ | 顧客がゲストとして作成した注文の個人情報が注文検索で表示されます。 登録ユーザーが注文を作成した場合は、ユーザーは個人情報を見るためにサインインする必要があります。 |
| すべての注文 | すべての注文検索に個人情報が表示されます。 |

> [!NOTE]
> これらのオプションにより、顧客の住所や顧客のクレジット カード番号の末尾 4 桁などの個人データをいつ匿名ゲスト ユーザーに表示するかが決定されます。 登録顧客のプライバシーを保護するために、**ゲスト注文のみ** オプションを選択することをお勧めします。 ただし、最も安全なオプションは **表示しない** です。

**ゲスト注文の検索に個人データを含める** フィールドの値を変更した後、**Retail と Commerce \> Retail および Commerce IT \> 配送スケジュール** にアクセスして、Commerce 本社でジョブ 1070 (**チャネル コンフィギュレーション**) を実行する必要があります。

## <a name="configure-the-order-lookup-module"></a>注文検索モジュールを構成する

Commerce モジュール ライブラリの注文検索モジュールは、ゲスト ユーザーが注文の検索に使用するフォームの表示に使用されます。 注文検索モジュールは、顧客のサインインが必要ないページの本文スロットに含めることができます。 モジュールの構成方法については、[注文検索モジュール](order-lookup-module.md)を参照してください。

## <a name="additional-resources"></a>追加リソース

[注文検索モジュール](order-lookup-module.md)

[電子メール通知プロファイルの設定](email-notification-profiles.md)

[!INCLUDE[footer-include](../includes/footer-banner.md)]
