---
title: レシート番号のリセット
description: このトピックでは、目的の日付 (たとえば、会計年度や暦年) のさまざまなアクションに使用されるレシート番号をリセットする方法について説明します。
author: ShalabhjainMSFT
ms.date: 10/06/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail, Commerce
ms.author: asharchw
ms.search.validFrom: 2020-01-14
ms.dyn365.ops.version: Application update 10.0.9
ms.openlocfilehash: cabce32a43e55f3a3f19bc2d78547d9bab0d89a2
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/31/2021
ms.locfileid: "5792052"
---
# <a name="reset-receipt-numbers"></a><span data-ttu-id="1a557-103">レシート番号のリセット</span><span class="sxs-lookup"><span data-stu-id="1a557-103">Reset receipt numbers</span></span> 

[!include [banner](includes/banner.md)]

> [!NOTE]
> <span data-ttu-id="1a557-104">この機能を使用する前に、機能プロファイル内のすべての入庫タイプに対して **独立したシーケンス** プロパティを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1a557-104">We require that you select the **Independent sequence** property for all receipt types in the functionality profile before using this feature.</span></span> <span data-ttu-id="1a557-105">また、POSが使用されているデバイスのシステム タイムゾーンは、対応する店舗タイムゾーンと一致している必要があります。</span><span class="sxs-lookup"><span data-stu-id="1a557-105">Also, the system time zone of the device, where the POS is being used, should match the corresponding store time zone.</span></span> <span data-ttu-id="1a557-106">このような制限により、今後のリリースでは、これらの問題を修正するための作業を行う間は、実稼働でこの機能を使用しないことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="1a557-106">Due to these limitations, we recommend that you do not use this feature in production while we work to fix these issues in a future release.</span></span> 

<span data-ttu-id="1a557-107">小売業者は、現金売りトランザクション、返品トランザクション、顧客注文、見積、支払など店舗のさまざまなアクションに対するレシート番号を生成します。</span><span class="sxs-lookup"><span data-stu-id="1a557-107">Retailers generate receipt numbers for various actions in the store, such as cash and carry transactions, return transactions, customer orders, quotations, and payments.</span></span> <span data-ttu-id="1a557-108">小売業者は独自のレシート形式を定義していますが、一部の国や地域ではこれらのレシート形式に制限を課す規制があります。</span><span class="sxs-lookup"><span data-stu-id="1a557-108">Although retailers define their own receipt formats, some countries or regions have regulations that put restrictions on these receipt formats.</span></span> <span data-ttu-id="1a557-109">たとえば、これらの規制はレシートの文字数を制限する、連続するレシート番号を要求する、一部の特殊文字を制限する、年初にレシート番号をリセットするなどの制限を課す可能性があります。</span><span class="sxs-lookup"><span data-stu-id="1a557-109">For example, these regulations might limit the number of characters on the receipt, require consecutive receipt numbers, restrict some special characters, or require a reset of receipt numbers at the beginning of the year.</span></span> <span data-ttu-id="1a557-110">Microsoft Dynamics 365 Commerce では、レシート番号管理のプロセスが非常に柔軟になり、小売業者が規制要件を満たすのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="1a557-110">Microsoft Dynamics 365 Commerce makes the process of managing receipt numbers very flexible, to help retailers meet regulatory requirements.</span></span> <span data-ttu-id="1a557-111">このトピックでは、レシート番号をリセットする機能の使用方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="1a557-111">This topic explains how to use the functionality for resetting receipt numbers.</span></span>

<span data-ttu-id="1a557-112">コマースでは、レシート形式には英数字を使用できます。</span><span class="sxs-lookup"><span data-stu-id="1a557-112">In Commerce, receipt formats can be alphanumeric.</span></span> <span data-ttu-id="1a557-113">静的コンテンツおよび動的コンテンツの両方を入れることができます。</span><span class="sxs-lookup"><span data-stu-id="1a557-113">You can put both static content and dynamic content in them.</span></span> <span data-ttu-id="1a557-114">静的コンテンツには英文字、数字、および特殊文字が含まれます。</span><span class="sxs-lookup"><span data-stu-id="1a557-114">Static content includes alphabetic character, numbers, and special characters.</span></span> <span data-ttu-id="1a557-115">動的コンテンツには、店舗番号、ターミナル番号、日付、月、年、および自動で増加する番号順序などの情報を表す 1 文字以上が含まれます。</span><span class="sxs-lookup"><span data-stu-id="1a557-115">Dynamic content includes one or more characters that represent information such as the store number, terminal number, date, month, year, and number sequences that are automatically incremented.</span></span> <span data-ttu-id="1a557-116">この形式は、機能プロファイルの **レシート番号** セクションで定義されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-116">The formats are defined in the **Receipt numbering** section of the functionality profile.</span></span> <span data-ttu-id="1a557-117">次の表では、動的コンテンツを表す文字について説明します。</span><span class="sxs-lookup"><span data-stu-id="1a557-117">The following table describes the characters that represent the dynamic content.</span></span>

| <span data-ttu-id="1a557-118">文字</span><span class="sxs-lookup"><span data-stu-id="1a557-118">Characters</span></span> | <span data-ttu-id="1a557-119">説明</span><span class="sxs-lookup"><span data-stu-id="1a557-119">Description</span></span> |
|------------|-------------|
| <span data-ttu-id="1a557-120">S</span><span class="sxs-lookup"><span data-stu-id="1a557-120">S</span></span>          | <span data-ttu-id="1a557-121">この文字 **S** は店舗番号に使用されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-121">The character **S** is used for the store number.</span></span> <span data-ttu-id="1a557-122">たとえば、店舗の番号が HOUSTON1 の場合、形式 **SSS** はレシートで "ON1" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-122">For example, if a store is numbered HOUSTON1, the format **SSS** shows "ON1" on the receipt.</span></span> <span data-ttu-id="1a557-123">形式 **SSSSS** は、レシートで "STON1" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-123">The format **SSSSS** shows "STON1" on the receipt.</span></span> |
| <span data-ttu-id="1a557-124">T</span><span class="sxs-lookup"><span data-stu-id="1a557-124">T</span></span>          | <span data-ttu-id="1a557-125">この文字 **T** はターミナル番号に使用されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-125">The character **T** is used for the terminal number.</span></span> <span data-ttu-id="1a557-126">たとえば、ターミナルの番号が 0001 の場合、形式 **TTTT** はレシートで "0001" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-126">For example, if a terminal is numbered 0001, the format **TTTT** shows "0001" on the receipt.</span></span> |
| <span data-ttu-id="1a557-127">貸方</span><span class="sxs-lookup"><span data-stu-id="1a557-127">C</span></span>          | <span data-ttu-id="1a557-128">この文字 **C** はスタッフ ID 番号に使用されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-128">The character **C** is used for the staff ID number.</span></span> <span data-ttu-id="1a557-129">たとえば、スタッフ メンバーに 000160 の ID がある場合、形式 **CCCC** はレシートで "0160" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-129">For example, if a staff member has an ID of 000160, the format **CCCC** shows "0160" on the receipt.</span></span> |
| <span data-ttu-id="1a557-130">ddd</span><span class="sxs-lookup"><span data-stu-id="1a557-130">ddd</span></span>        | <span data-ttu-id="1a557-131">文字 **ddd** は、1 ～ 366 の年間の通算日に対応します。</span><span class="sxs-lookup"><span data-stu-id="1a557-131">The characters **ddd** correspond to the day of the year, from 1 through 366.</span></span> <span data-ttu-id="1a557-132">たとえば、1 月 15 日の形式 **ddd** は、レシートで "015" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-132">For example, on January 15, the format **ddd** shows "015" on the receipt.</span></span> |
| <span data-ttu-id="1a557-133">MM</span><span class="sxs-lookup"><span data-stu-id="1a557-133">MM</span></span>         | <span data-ttu-id="1a557-134">文字 **MM** は 2 桁の月に使用されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-134">The characters **MM** are used for the two-digit month.</span></span> <span data-ttu-id="1a557-135">たとえば、1 月の形式 **MM** は、レシートで "01" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-135">For example, in January, the format **MM** show "01" on the receipt.</span></span> |
| <span data-ttu-id="1a557-136">DD</span><span class="sxs-lookup"><span data-stu-id="1a557-136">DD</span></span>         | <span data-ttu-id="1a557-137">文字 **DD** は 2 桁の日に使用されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-137">The characters **DD** are used for the two-digit day of the month.</span></span> <span data-ttu-id="1a557-138">たとえば、1 月 15 日の形式 **DD** は、レシートで "15" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-138">For example, on January 15, the format **DD** shows "15" on the receipt.</span></span> |
| <span data-ttu-id="1a557-139">YY</span><span class="sxs-lookup"><span data-stu-id="1a557-139">YY</span></span>         | <span data-ttu-id="1a557-140">文字 **YY** は 2 桁の年に使用されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-140">The characters **YY** are used for the two-digit year.</span></span> <span data-ttu-id="1a557-141">たとえば、2020 年の任意の月の形式  **YY** は、レシートで "20" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-141">For example, in any month during the year 2020, the format **YY** shows "20" on the receipt.</span></span> |
| \#         | <span data-ttu-id="1a557-142">番号記号 (**\#**) は連番に使用されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-142">A number sign (**\#**) is used for sequential numbering.</span></span> <span data-ttu-id="1a557-143">たとえば、形式 **####** は、レシートで "0001"、"0002"、"0003"、などと表示されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-143">For example, the format **####** shows "0001," "0002," "0003," and so on, on the receipt.</span></span> |

<span data-ttu-id="1a557-144">特定の日付におけるレシートの連番をリセットできます。</span><span class="sxs-lookup"><span data-stu-id="1a557-144">You can reset the sequential numbering of the receipt on a specific date.</span></span> <span data-ttu-id="1a557-145">その後、選択したリセット日付の午前 12 時 00 分以降に発生した最初のトランザクションに対して、レシートの番号順序が 1 にリセットされます。</span><span class="sxs-lookup"><span data-stu-id="1a557-145">Then, for the first transaction that occurs after 12:00 AM on the selected reset date, the system resets the receipt's number sequence to 1.</span></span> <span data-ttu-id="1a557-146">リセットを 1 回だけ実行するか、またはリセットを毎年繰り返すかを指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="1a557-146">You can also specify whether the reset occurs only one time, or whether it recurs every year.</span></span> <span data-ttu-id="1a557-147">年間定期処理が指定されている場合、リセットは小売業者がその停止を選択するまで、毎年自動的に発生します。</span><span class="sxs-lookup"><span data-stu-id="1a557-147">If yearly recurrence is specified, the reset automatically occurs every year until the retailer chooses to stop it.</span></span> 

<span data-ttu-id="1a557-148">リセットを有効にするには、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="1a557-148">To turn on the reset, follow these steps.</span></span>

1. <span data-ttu-id="1a557-149">**Retail とコマース \> チャネル設定 \> POS 設定 \> POS プロファイル \> 機能プロファイル** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="1a557-149">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span>
1. <span data-ttu-id="1a557-150">**レシート番号** クイック タブで、**番号のリセット日付をリセットする** を選択します。</span><span class="sxs-lookup"><span data-stu-id="1a557-150">On the **Receipt numbering** FastTab, select **Reset number reset date**.</span></span>
1. <span data-ttu-id="1a557-151">ドロップダウン ダイアログ ボックスの、**日付のリセット** フィールドで、リセットが行われる必要がある将来の日付を選択します。</span><span class="sxs-lookup"><span data-stu-id="1a557-151">In the drop-down dialog box, in the **Reset date** field, select a future date when the reset should occur.</span></span>
1. <span data-ttu-id="1a557-152">**レシート タイプのリセット** フィールドで、**1 回のみ** または **年 1 回** を選択します。</span><span class="sxs-lookup"><span data-stu-id="1a557-152">In the **Reset receipt type** field, select **One time only** or **Yearly**.</span></span>
1. <span data-ttu-id="1a557-153">**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="1a557-153">Select **OK**.</span></span>

<span data-ttu-id="1a557-154">![レシートのリセット日付の選択](media/Enable_receipt_reset.png "レシートのリセット日付の選択")</span><span class="sxs-lookup"><span data-stu-id="1a557-154">![Selecting a receipt reset date](media/Enable_receipt_reset.png "Selecting a receipt reset date")</span></span>

<span data-ttu-id="1a557-155">日付を選択したら、**次のレシート番号リセット日付** 列に表示されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-155">After you select a date, it appears in the **Next receipt number reset date** column.</span></span> <span data-ttu-id="1a557-156">リセット日付は、すべてのレシート トランザクション タイプに適用可能です。</span><span class="sxs-lookup"><span data-stu-id="1a557-156">The reset date is applicable to all receipt transaction types.</span></span> <span data-ttu-id="1a557-157">したがって、レシートの番号順序はすべてのレシート タイプに対してリセットされます。</span><span class="sxs-lookup"><span data-stu-id="1a557-157">Therefore, the receipt number sequence will be reset for all receipt types.</span></span>

<span data-ttu-id="1a557-158">リセット日付が来ると、各タイプの最初のトランザクションに対してレシート番号がリセットされます。</span><span class="sxs-lookup"><span data-stu-id="1a557-158">When the reset date arrives, the receipt number is reset for the first transaction of each type.</span></span> <span data-ttu-id="1a557-159">さらに機能プロファイルでは、リセット日付は **次のレシート番号リセット日付** 列から **現在のレシート番号のリセット日付** 列に移動します。</span><span class="sxs-lookup"><span data-stu-id="1a557-159">In addition, in the functionality profile, the reset date is moved from the **Next receipt number reset date** column to the **Current receipt number reset date** column.</span></span> <span data-ttu-id="1a557-160">この変更は、レジスターがリセット日付に使用されない場合、次回レジスターが使用 *される* 時にレシート番号がリセットされることを示します。</span><span class="sxs-lookup"><span data-stu-id="1a557-160">This change indicates that if a register isn't used on the reset date, the receipt number will be reset the next time that the register *is* used.</span></span> <span data-ttu-id="1a557-161">たとえば、2019 年 12 月 3 日に、リセット日付として **2020 年 1 月 1 日** を選択します。</span><span class="sxs-lookup"><span data-stu-id="1a557-161">For example, on December 3, 2019, you select **January 1, 2020**, as the reset date.</span></span> <span data-ttu-id="1a557-162">1 月 1 日、レジスターが最初のトランザクションを行うと、レシート番号がリセットされます。</span><span class="sxs-lookup"><span data-stu-id="1a557-162">On January 1, when the registers make their first transaction, the receipt number are reset.</span></span> <span data-ttu-id="1a557-163">ただし、1 つのレジスターは 1 2 月と 1 月中全く使用されず、2 月に使用を開始します。</span><span class="sxs-lookup"><span data-stu-id="1a557-163">However, one register isn't used at all during December and January, but then starts to be used in February.</span></span> <span data-ttu-id="1a557-164">この場合、リセット アクションが定義されているため、レジスターが 2 月に最初のトランザクションを行うときに、そのレジスターのレシート番号がリセットされます。</span><span class="sxs-lookup"><span data-stu-id="1a557-164">In this case, because a reset action was defined, the receipt number for that register will be reset when the register makes its first transaction in February.</span></span>

<span data-ttu-id="1a557-165">**リセット日付をクリアする** 機能を使用して、将来のリセット日付をクリアできます。</span><span class="sxs-lookup"><span data-stu-id="1a557-165">You can use the **Clear reset date** functionality to clear future reset dates.</span></span> <span data-ttu-id="1a557-166">ただし、リセット日付が過去に実行された場合は、元に戻すことはできません。</span><span class="sxs-lookup"><span data-stu-id="1a557-166">However, if the reset date occurred in the past, it can't be undone.</span></span> <span data-ttu-id="1a557-167">したがって、リセットがまだ実行されていないすべてのレジスターに対して、引き続きリセットが実行されます。</span><span class="sxs-lookup"><span data-stu-id="1a557-167">Therefore, the reset will still occur for all registers where the reset hasn't yet occurred.</span></span>

> [!NOTE]
> <span data-ttu-id="1a557-168">選択するリセット日付、およびとレシート形式に応じて、レシート番号が重複している場合があります。</span><span class="sxs-lookup"><span data-stu-id="1a557-168">Depending on the reset date that you select, and the receipt format, you might have duplicate receipt numbers.</span></span> <span data-ttu-id="1a557-169">販売時点管理 (POS) システムではこれらの状況を処理できますが、販売担当者が重複するレシートから選択する必要があるため、返品の処理にかかる時間が増加します。</span><span class="sxs-lookup"><span data-stu-id="1a557-169">Although the point of sale (POS) system can handle these situations, they increase the amount of time that is required to process returns, because sales associates must select among the duplicate receipts.</span></span> <span data-ttu-id="1a557-170">重複するレシートが計画された結果ではない場合、データ クリーンアップに関連するその他の問題が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="1a557-170">Other complications that are related to data cleanup can occur if the duplicate receipts weren't a planned consequence.</span></span> <span data-ttu-id="1a557-171">したがって、動的な日付文字 (たとえば、**ddd**、**MM**、**DD**、および **YY**) を使用して、リセット後のレシート番号の重複を防ぐようお勧めします。</span><span class="sxs-lookup"><span data-stu-id="1a557-171">Therefore, we recommend that you use dynamic date characters (for example, **ddd**, **MM**, **DD**, and **YY**) to help prevent duplicate receipt numbers after a reset.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]