---
title: レシート番号のリセット
description: このトピックでは、目的の日付 (たとえば、会計年度や暦年) のさまざまなアクションに使用されるレシート番号をリセットする方法について説明します。
author: ShalabhjainMSFT
ms.date: 10/06/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail, Commerce
ms.author: asharchw
ms.search.validFrom: 2020-01-14
ms.dyn365.ops.version: Application update 10.0.9
ms.openlocfilehash: 855c39f15db6de8fac1f0cd4667eec485c70542b9aebde0d7085e2703f4609bb
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/05/2021
ms.locfileid: "6733872"
---
# <a name="reset-receipt-numbers"></a>レシート番号のリセット 

[!include [banner](includes/banner.md)]

> [!NOTE]
> この機能を使用する前に、機能プロファイル内のすべての入庫タイプに対して **独立したシーケンス** プロパティを選択する必要があります。 また、POSが使用されているデバイスのシステム タイムゾーンは、対応する店舗タイムゾーンと一致している必要があります。 このような制限により、今後のリリースでは、これらの問題を修正するための作業を行う間は、実稼働でこの機能を使用しないことをお勧めします。 

小売業者は、現金売りトランザクション、返品トランザクション、顧客注文、見積、支払など店舗のさまざまなアクションに対するレシート番号を生成します。 小売業者は独自のレシート形式を定義していますが、一部の国や地域ではこれらのレシート形式に制限を課す規制があります。 たとえば、これらの規制はレシートの文字数を制限する、連続するレシート番号を要求する、一部の特殊文字を制限する、年初にレシート番号をリセットするなどの制限を課す可能性があります。 Microsoft Dynamics 365 Commerce では、レシート番号管理のプロセスが非常に柔軟になり、小売業者が規制要件を満たすのに役立ちます。 このトピックでは、レシート番号をリセットする機能の使用方法について説明します。

コマースでは、レシート形式には英数字を使用できます。 静的コンテンツおよび動的コンテンツの両方を入れることができます。 静的コンテンツには英文字、数字、および特殊文字が含まれます。 動的コンテンツには、店舗番号、ターミナル番号、日付、月、年、および自動で増加する番号順序などの情報を表す 1 文字以上が含まれます。 この形式は、機能プロファイルの **レシート番号** セクションで定義されます。 次の表では、動的コンテンツを表す文字について説明します。

| 文字 | 説明 |
|------------|-------------|
| S          | この文字 **S** は店舗番号に使用されます。 たとえば、店舗の番号が HOUSTON1 の場合、形式 **SSS** はレシートで "ON1" と表示されます。 形式 **SSSSS** は、レシートで "STON1" と表示されます。 |
| T          | この文字 **T** はターミナル番号に使用されます。 たとえば、ターミナルの番号が 0001 の場合、形式 **TTTT** はレシートで "0001" と表示されます。 |
| 貸方          | この文字 **C** はスタッフ ID 番号に使用されます。 たとえば、スタッフ メンバーに 000160 の ID がある場合、形式 **CCCC** はレシートで "0160" と表示されます。 |
| ddd        | 文字 **ddd** は、1 ～ 366 の年間の通算日に対応します。 たとえば、1 月 15 日の形式 **ddd** は、レシートで "015" と表示されます。 |
| MM         | 文字 **MM** は 2 桁の月に使用されます。 たとえば、1 月の形式 **MM** は、レシートで "01" と表示されます。 |
| DD         | 文字 **DD** は 2 桁の日に使用されます。 たとえば、1 月 15 日の形式 **DD** は、レシートで "15" と表示されます。 |
| YY         | 文字 **YY** は 2 桁の年に使用されます。 たとえば、2020 年の任意の月の形式  **YY** は、レシートで "20" と表示されます。 |
| \#         | 番号記号 (**\#**) は連番に使用されます。 たとえば、形式 **####** は、レシートで "0001"、"0002"、"0003"、などと表示されます。 |

特定の日付におけるレシートの連番をリセットできます。 その後、選択したリセット日付の午前 12 時 00 分以降に発生した最初のトランザクションに対して、レシートの番号順序が 1 にリセットされます。 リセットを 1 回だけ実行するか、またはリセットを毎年繰り返すかを指定することもできます。 年間定期処理が指定されている場合、リセットは小売業者がその停止を選択するまで、毎年自動的に発生します。 

リセットを有効にするには、次の手順に従います。

1. **Retail とコマース \> チャネル設定 \> POS 設定 \> POS プロファイル \> 機能プロファイル** の順に移動します。
1. **レシート番号** クイック タブで、**番号のリセット日付をリセットする** を選択します。
1. ドロップダウン ダイアログ ボックスの、**日付のリセット** フィールドで、リセットが行われる必要がある将来の日付を選択します。
1. **レシート タイプのリセット** フィールドで、**1 回のみ** または **年 1 回** を選択します。
1. **OK** を選択します。

![レシートのリセット日付の選択。](media/Enable_receipt_reset.png "レシートのリセット日付の選択")

日付を選択したら、**次のレシート番号リセット日付** 列に表示されます。 リセット日付は、すべてのレシート トランザクション タイプに適用可能です。 したがって、レシートの番号順序はすべてのレシート タイプに対してリセットされます。

リセット日付が来ると、各タイプの最初のトランザクションに対してレシート番号がリセットされます。 さらに機能プロファイルでは、リセット日付は **次のレシート番号リセット日付** 列から **現在のレシート番号のリセット日付** 列に移動します。 この変更は、レジスターがリセット日付に使用されない場合、次回レジスターが使用 *される* 時にレシート番号がリセットされることを示します。 たとえば、2019 年 12 月 3 日に、リセット日付として **2020 年 1 月 1 日** を選択します。 1 月 1 日、レジスターが最初のトランザクションを行うと、レシート番号がリセットされます。 ただし、1 つのレジスターは 1 2 月と 1 月中全く使用されず、2 月に使用を開始します。 この場合、リセット アクションが定義されているため、レジスターが 2 月に最初のトランザクションを行うときに、そのレジスターのレシート番号がリセットされます。

**リセット日付をクリアする** 機能を使用して、将来のリセット日付をクリアできます。 ただし、リセット日付が過去に実行された場合は、元に戻すことはできません。 したがって、リセットがまだ実行されていないすべてのレジスターに対して、引き続きリセットが実行されます。

> [!NOTE]
> 選択するリセット日付、およびとレシート形式に応じて、レシート番号が重複している場合があります。 販売時点管理 (POS) システムではこれらの状況を処理できますが、販売担当者が重複するレシートから選択する必要があるため、返品の処理にかかる時間が増加します。 重複するレシートが計画された結果ではない場合、データ クリーンアップに関連するその他の問題が発生する可能性があります。 したがって、動的な日付文字 (たとえば、**ddd**、**MM**、**DD**、および **YY**) を使用して、リセット後のレシート番号の重複を防ぐようお勧めします。


[!INCLUDE[footer-include](../includes/footer-banner.md)]