---
title: 製品に対する複数の小売割引の適用
description: このトピックでは、製品に複数の割引を適用できる場合に考慮されるすべての要素を確認します。
author: shajain
manager: AnnBe
ms.date: 12/31/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: ''
audience: IT Pro
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: 16181
ms.assetid: b1b57734-1406-4ed6-8e28-21c705ee17e2
ms.search.region: global
ms.search.industry: Retail
ms.author: shajain
ms.search.validFrom: 2018-10-23
ms.dyn365.ops.version: AX 8.1.0, Retail October 2018 update
ms.openlocfilehash: ae716d1323b7f28c15e53d89b311bad405156ab4
ms.sourcegitcommit: 81a647904dd305c4be2e4b683689f128548a872d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/01/2020
ms.locfileid: "3004563"
---
# <a name="apply-multiple-retail-discounts-to-a-product"></a><span data-ttu-id="32237-103">製品に対する複数の小売割引の適用</span><span class="sxs-lookup"><span data-stu-id="32237-103">Apply multiple Retail discounts to a product</span></span>

[!include [banner](includes/banner.md)]

## <a name="overview"></a><span data-ttu-id="32237-104">概要</span><span class="sxs-lookup"><span data-stu-id="32237-104">Overview</span></span>

<span data-ttu-id="32237-105">このトピックでは、製品に複数の割引を適用できる場合に考慮されるすべての要素を確認します。</span><span class="sxs-lookup"><span data-stu-id="32237-105">This topic reviews all the factors considered when multiple discounts can be applied to a product.</span></span> <span data-ttu-id="32237-106">このシナリオでは、コマース 価格決定エンジンは、製品の合計割引金額を最大化するため、できるだけ多くの割引を適用します。</span><span class="sxs-lookup"><span data-stu-id="32237-106">In this scenario, the commerce pricing engine applies as many discounts as it can, to maximize the total discount amount on a product.</span></span> <span data-ttu-id="32237-107">複数のオプションは、割引が適用される順序に影響します。</span><span class="sxs-lookup"><span data-stu-id="32237-107">Multiple options affect the order in which the discounts are applied.</span></span> <span data-ttu-id="32237-108">このトピック全体で、割引の適用順序と割引の排他性に設定がいつ影響を与えるかが明記されています。</span><span class="sxs-lookup"><span data-stu-id="32237-108">Throughout this topic it's noted when a setting affects the order of discount application and exclusivity of a discount.</span></span> <span data-ttu-id="32237-109">次の設定は、製品に複数の割引が適用されている場合はそれがどのように処理されるかに影響します。</span><span class="sxs-lookup"><span data-stu-id="32237-109">The following settings affect how multiple discounts, applicable on a product, are processed.</span></span>

- <span data-ttu-id="32237-110">**割引の同時実行管理モデル**</span><span class="sxs-lookup"><span data-stu-id="32237-110">**Discount concurrency control model**</span></span>
- <span data-ttu-id="32237-111">**価格決定優先順位**</span><span class="sxs-lookup"><span data-stu-id="32237-111">**Pricing Priority**</span></span>
- <span data-ttu-id="32237-112">**割引タイプ** (**シンプル**、**組み合わせ**、**数量**、**しきい値**)</span><span class="sxs-lookup"><span data-stu-id="32237-112">**Discount type** (**Simple**, **Mix and Match**, **Quantity**, and **Threshold**)</span></span>
- <span data-ttu-id="32237-113">**割引の同時実行モード** (**排他的**、**最良価格**、および**組み入れ**)</span><span class="sxs-lookup"><span data-stu-id="32237-113">**Discount concurrency mode** (**Exclusive**, **Best price**, and **Compound**)</span></span>
- <span data-ttu-id="32237-114">**複数発生モード** (**優先順位の高い小売業者** に設定されている場合) (組み合わせ最安値割引の場合のみ)</span><span class="sxs-lookup"><span data-stu-id="32237-114">**Multiple occurrences mode**, when it's set to **Favor retailer** (for mix-and-match least-expensive discounts only)</span></span>

<span data-ttu-id="32237-115">**割引の同時実行管理モデル**については、以下で詳細を説明します。ただし、他のプロパティは、[小売割引](retail-discounts-overview.md)で説明します。</span><span class="sxs-lookup"><span data-stu-id="32237-115">The **Discount concurrency control model** is described below in detail; however, the rest of the properties are covered in [Retail discounts](retail-discounts-overview.md).</span></span>

## <a name="discount-concurrency-control-model"></a><span data-ttu-id="32237-116">割引の同時実行管理モデル</span><span class="sxs-lookup"><span data-stu-id="32237-116">Discount concurrency control model</span></span>

<span data-ttu-id="32237-117">割引の同時実行管理モデルでは、トランザクションの商品に複数の割引が適用されるタイミングおよび方法が変更されます。</span><span class="sxs-lookup"><span data-stu-id="32237-117">The discount concurrency control model changes when and how multiple discounts are applied to products in a transaction.</span></span> <span data-ttu-id="32237-118">**コマース パラメーター** ページにある**割引**タブの**最良価格および組み入れ同時実行管理モデル** オプションは、各割引の**割引同時実行モード**とは異なります。</span><span class="sxs-lookup"><span data-stu-id="32237-118">The **Best price and compound concurrency control model** option on the **Discounts** tab on the **Commerce parameters** page is different from the **Discount concurrency mode** property on each discount.</span></span>

<span data-ttu-id="32237-119">アプリの以前のバージョンでは、割引の**割引タイプ**、**割引同時実行モード**、および**価格決定優先順位** (使用する場合) プロパティに基づいて複数の割引を適用する方法は 1 つのみでした。</span><span class="sxs-lookup"><span data-stu-id="32237-119">In earlier versions of the app, there was only one way to apply multiple discounts based on the **discount type**, **discount concurrency mode**, and **pricing priority** (if used) properties of discounts.</span></span> <span data-ttu-id="32237-120">ここでは、割引同時実行管理モデル設定が、すべての割引がどのように競合してまとめられるかに影響します。</span><span class="sxs-lookup"><span data-stu-id="32237-120">Now, the discount concurrency control model setting affects how all discounts compete and compound together.</span></span>

### <a name="background-on-why-this-change-was-made"></a><span data-ttu-id="32237-121">この変更が行われた理由に関する背景情報</span><span class="sxs-lookup"><span data-stu-id="32237-121">Background on why this change was made</span></span>

<span data-ttu-id="32237-122">アプリの以前のバージョンでは、価格エンジンでカスタム ビジネス ロジックをオーバーレイすることで、価格エンジンを直接カスタマイズすることができました。</span><span class="sxs-lookup"><span data-stu-id="32237-122">In previous versions of the app, you could directly customize the price engine by overlaying their custom business logic in the price engine.</span></span> <span data-ttu-id="32237-123">オンライン サービスへの移行により、およびアプリケーション全体のライフ サイクル管理を向上させるため、Dynamics 365 アプリケーションがシールされ、オーバーレイ カスタマイズが許容されなくなりました。</span><span class="sxs-lookup"><span data-stu-id="32237-123">With the transition to an online service and to improve overall application lifecycle management, the Dynamics 365 application has been sealed and overlaying customizations are no longer allowed.</span></span> <span data-ttu-id="32237-124">最も一般的であった同じ種類のカスタマイズを有効にするため、新しい拡張ポイントが追加されました。</span><span class="sxs-lookup"><span data-stu-id="32237-124">New extensibility points have been added to enable the same types of customizations that were the most common.</span></span> <span data-ttu-id="32237-125">ほとんどの割引カスタマイズは、次のカテゴリのいずれかに該当します。</span><span class="sxs-lookup"><span data-stu-id="32237-125">Most discount customizations are in one of the following categories.</span></span>

- <span data-ttu-id="32237-126">**既存の割引のマイナーな変更:** たとえば、開始日と終了日を割引ヘッダーから割引行に移動しました。</span><span class="sxs-lookup"><span data-stu-id="32237-126">**Minor changes to existing discounts:** For example, moving the start date and end date from the discount header to the discount lines.</span></span>
- <span data-ttu-id="32237-127">**新しい割引タイプ:** 場合によっては、会社は新しい種類の割引を導入する必要があります。</span><span class="sxs-lookup"><span data-stu-id="32237-127">**New discount types:** In some cases, companies need to introduce a new type of discount.</span></span> <span data-ttu-id="32237-128">たとえば、単純割引の場合、合計割引金額に上限を設定します。</span><span class="sxs-lookup"><span data-stu-id="32237-128">For example, capping the total discount amount for a simple discount.</span></span>
- <span data-ttu-id="32237-129">**複数の割引が適用されるタイミングと方法 (フロー) の変更:** たとえば、すべての組み合わせ割引を数量または単純割引の上に適用しながら、数量および単純割引を最良価格と競合させるか、店舗固有および顧客固有割引を最良価格と競合させ、勝利した割引をロイヤルティ プログラム割引と組み入れられます。</span><span class="sxs-lookup"><span data-stu-id="32237-129">**Changing the when and how (the flow) of multiple discounts being applied:** For example, having all mix and match discounts applied on top of quantity or simple discounts while still having quantity and simple discounts compete for best price or having store-specific and customer-specific discounts compete for best price and then compound the winning discount with loyalty program discounts.</span></span>

<span data-ttu-id="32237-130">最初の 2 つの種類のカスタマイズは、このようなシナリオを可能にする価格エンジン内で新しい機能拡張モデルを提供することにより処理されます。</span><span class="sxs-lookup"><span data-stu-id="32237-130">The first two types of customizations are handled by providing a new extensibility model within the price engine that enables these scenarios.</span></span> <span data-ttu-id="32237-131">ただし、カスタマイズの 3 番目のタイプに対応するためこの設定を導入することによってシステムの機能を拡張しました。</span><span class="sxs-lookup"><span data-stu-id="32237-131">However, to address the third type of customization we expanded the functional capabilities of the system by introducing this setting.</span></span> <span data-ttu-id="32237-132">割引の同時実行モードと価格優先順位は既に、割引適用の順序に対する大きな柔軟性をユーザーに与えていました。</span><span class="sxs-lookup"><span data-stu-id="32237-132">A discount's concurrency mode and pricing priority already gave the user significant flexibility over the order of discount application.</span></span> <span data-ttu-id="32237-133">割引の同時実行モードと価格決定の優先順位の対話方法に影響を与える新しいコンフィギュレーション設定を導入することによって、すべての割引順序カスタマイズがカバーされ、結果として同時実行モデルのオプションが生まれます。</span><span class="sxs-lookup"><span data-stu-id="32237-133">By introducing a new configuration setting that affects how a discount's concurrency mode and pricing priority interact, all discount ordering customization is covered, which results in the concurrency model option.</span></span>

### <a name="best-price-and-compound-within-priority-never-compound-across-priorities"></a><span data-ttu-id="32237-134">優先順位内のみの最良価格と組み入れ、優先順位間で組み入れない</span><span class="sxs-lookup"><span data-stu-id="32237-134">Best price and compound within priority, never compound across priorities</span></span>

<span data-ttu-id="32237-135">これは既定値であり、複数の割引が処理される従来の方法です。</span><span class="sxs-lookup"><span data-stu-id="32237-135">This is the default and is the legacy way in which multiple discounts are processed.</span></span> <span data-ttu-id="32237-136">このオプションを選択すると、同じ価格優先順序内のすべての組み入れ割引が組み合わされ、組み入れられた結果は、同じ価格決定優先順位内の最良価格割引と競合します。</span><span class="sxs-lookup"><span data-stu-id="32237-136">When this option is selected, all compound discounts within the same pricing priority are combined, and the combined result competes with any best price discounts in the same pricing priority.</span></span> <span data-ttu-id="32237-137">製品に割引が適用されると、価格決定優先順位が低いですべての割引が無視されます。</span><span class="sxs-lookup"><span data-stu-id="32237-137">After a discount is applied to a product, all discounts at lower pricing priorities are ignored.</span></span>

### <a name="best-price-only-within-priority-always-compound-across-priority"></a><span data-ttu-id="32237-138">優先順位内のみの最良価格、常に優先順位間で組み入れ</span><span class="sxs-lookup"><span data-stu-id="32237-138">Best price only within priority, always compound across priority</span></span>

<span data-ttu-id="32237-139">これは、複数の割引を処理する新しい方法です。</span><span class="sxs-lookup"><span data-stu-id="32237-139">This is the new way multiple discounts can be processed.</span></span> <span data-ttu-id="32237-140">このオプションが選択されると、**割引同時実行モード** が **最良価格** および **組み入れ** に設定された割引がすべて、1 つの価格決定優先順位内で "最良価格" として扱われます。</span><span class="sxs-lookup"><span data-stu-id="32237-140">When this option is selected, discounts with **Discount concurrency mode** set to **Best price** and **Compound** are all treated as "best price" within a single pricing priority.</span></span> <span data-ttu-id="32237-141">適用されると、優先順位内の最良価格割引が、価格決定優先順位が低い最良および組み入れ割引と組み入れられます。</span><span class="sxs-lookup"><span data-stu-id="32237-141">When applied, the best price discount within a priority, is compounded with the best price and compound discounts at lower pricing priorities.</span></span> <span data-ttu-id="32237-142">この同時実行管理モデルでは、価格決定優先順位ごとに 1 つの割引のみ製品に適用することができます、その 1 つの割引が最良価格または組み入れ割引の場合、価格決定優先順位の低い追加のすべての最良価格または組み入れ割引と組み入れられます。</span><span class="sxs-lookup"><span data-stu-id="32237-142">In this concurrency control model, only a single discount can be applied to a product per pricing priority, and if that single discount is a best price or compound discount, then it will compound with all additional best price or compound discounts at lower pricing priorities.</span></span>

### <a name="examples"></a><span data-ttu-id="32237-143">例</span><span class="sxs-lookup"><span data-stu-id="32237-143">Examples</span></span>

<span data-ttu-id="32237-144">次の例では、価格決定エンジンが、別の同時実行管理モデルの割引のプールを処理する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="32237-144">The following examples show how the pricing engine processes a pool of discounts for different concurrency control models.</span></span>

#### <a name="example-1"></a><span data-ttu-id="32237-145">例 1</span><span class="sxs-lookup"><span data-stu-id="32237-145">Example 1</span></span>

<span data-ttu-id="32237-146">最初のシナリオでは、**優先順位内のみの最良価格と組み入れ、優先順位間で組み入れない** が割引同時実行管理モデルとして選択されています。</span><span class="sxs-lookup"><span data-stu-id="32237-146">In the first scenario, **Best price and compound within priority, never compound across priorities** is selected as the discount concurrency control model.</span></span> <span data-ttu-id="32237-147">2 つの価格決定優先順位があります。各価格決定優先順位には、割引タイプごとに 1 つの割引があります。たとえば、**単純**、**組み合わせ**、**数量**、および **しきい値** です。</span><span class="sxs-lookup"><span data-stu-id="32237-147">There are two pricing priorities, and for each pricing priority, there is one discount of each discount type, for example **Simple**, **Mix and Match**, **Quantity**, and **Threshold**.</span></span> <span data-ttu-id="32237-148">5 と 10 の 2 つの優先順位に割引があり、すべての製品に両方の優先順位の複数の割引があると仮定します。</span><span class="sxs-lookup"><span data-stu-id="32237-148">Let's assume there are discounts at two priorities 5 and 10 and all products have multiple discounts at both these priorities.</span></span> <span data-ttu-id="32237-149">考えられる価格決定優先順位の管理グループは、価格グループと、製品に適用可能な割引によって決定されます。</span><span class="sxs-lookup"><span data-stu-id="32237-149">The pool of possible pricing priorities is determined by the price groups and discounts that can be applied to the product.</span></span>

1. <span data-ttu-id="32237-150">割引同時実行管理モデルが選択されていることを考えると、製品ごとに、価格エンジンは次に、製品に適用される割引の最も高い価格決定優先度を考慮します。</span><span class="sxs-lookup"><span data-stu-id="32237-150">Given that a discount concurrency control model is selected, for each product, the pricing engine next considers the highest pricing priority of the discounts that are applicable on the product.</span></span> <span data-ttu-id="32237-151">したがって、価格決定エンジンは、優先順位が 10 の単純、数量、および組み合わせ割引を評価し、適用します。</span><span class="sxs-lookup"><span data-stu-id="32237-151">Thus, the pricing engine evaluates and applies the simple, quantity, and mix-and-match discounts with priority 10.</span></span>

    > [!NOTE]
    > <span data-ttu-id="32237-152">ただし、しきい値割引がまだ評価されません。その名前が示すように、他のすべての割引を適用した後、トランザクションの金額に対して評価されるためです。</span><span class="sxs-lookup"><span data-stu-id="32237-152">Threshold discounts are not evaluated yet because, as indicated by their name, they will be evaluated against the transaction amount, after all the other discounts have been applied.</span></span>

    <span data-ttu-id="32237-153">次の図では、さまざまな優先順位の間で価格決定アルゴリズムが割引をループする様子の簡単なビューを示します。</span><span class="sxs-lookup"><span data-stu-id="32237-153">The following image shows a concise view of how the pricing algorithm loops through the discounts across various priorities.</span></span> <span data-ttu-id="32237-154">次の図は、両方の割引同時実行管理モデルに適用されますが、価格決定アルゴリズムがの優先順位の異なる割引を処理する方法に違いがあることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="32237-154">Note that this diagram applies for both the discount concurrency control models, but the difference is in the way in which the pricing algorithm treats discounts at different priorities.</span></span> <span data-ttu-id="32237-155">この違いは、以下の例を使用して詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="32237-155">This difference is elaborated using the following example.</span></span>

    <span data-ttu-id="32237-156">![簡略化された価格決定ロジック](./media/Simplified-pricing-logic.png "簡略化された価格決定ロジック")</span><span class="sxs-lookup"><span data-stu-id="32237-156">![Simplified pricing logic](./media/Simplified-pricing-logic.png "Simplified pricing logic")</span></span>

2. <span data-ttu-id="32237-157">優先順位 10 内で、価格決定エンジンはまず、同時実行モードが**排他的**に設定されている割引を考慮します。</span><span class="sxs-lookup"><span data-stu-id="32237-157">Within priority 10, the pricing engine first considers the discounts that have the concurrency mode set to **Exclusive**.</span></span> <span data-ttu-id="32237-158">複数の排他割引が製品に適用される場合、最適な排他割引が適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-158">If there is more than one exclusive discount applicable to the product, then the best exclusive discount is applied.</span></span> <span data-ttu-id="32237-159">製品は、排他割引を引き受け、どの優先順位でもこの製品に他の割引を適用することはできません。</span><span class="sxs-lookup"><span data-stu-id="32237-159">When a product gets an exclusive discount, no other discounts can be applied to this product at any priority.</span></span>

    > [!NOTE]
    > <span data-ttu-id="32237-160">**複数発生モード** プロパティが **優先順位の高い小売業者** に設定された組み合わせ最安値割引は、このステップでは処理されません。</span><span class="sxs-lookup"><span data-stu-id="32237-160">Mix-and-match, least-expensive discounts that have the **Multiple occurrences mode** property set to **Favor retailer** are skipped in this step.</span></span> <span data-ttu-id="32237-161">価格決定優先順位が 10 のすべての **排他** 割引 (**単純**、**数量**、**組み合わせ**) が適用されうと、排他組み合わせの **優先順位が高い小売業者** 割引が、価格決定優先順位 10 で、割引が適用されていない製品に適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-161">After all the **Exclusive** discounts (**Simple**, **Quantity**, **Mix and Match**) at pricing priority 10 have been applied, then the exclusive mix-and-match **Favor retailer** discounts, at pricing priority 10, are applied to any undiscounted products.</span></span>

3. <span data-ttu-id="32237-162">優先順位 10 内で、価格決定エンジンは次に、割引同時実行モードが**最良価格**および**組み入れ**に設定されている割引を考慮します。</span><span class="sxs-lookup"><span data-stu-id="32237-162">Within priority 10, the pricing engine then considers the discounts that have the discount concurrency mode set to **Best price** and **Compound**.</span></span> <span data-ttu-id="32237-163">複数の **組み入れ** 割引が製品に適用されている場合、それらは組み入れられ、結果の合計割引金額は他の **最良価格** 割引と競合します。</span><span class="sxs-lookup"><span data-stu-id="32237-163">If multiple **Compound** discounts apply to a product, then they are compounded, and the resulting total discount amount competes against the other **Best price** discounts.</span></span> <span data-ttu-id="32237-164">**最良価格**割引のいずれか、または**組み入れ**割引のの組み合わせは、顧客にとって最もメリットなる割引に応じて、製品に適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-164">Either one of the **Best price** discounts or the combination of **Compound** discounts gets applied to the product, depending on which discount gives the most benefit to the customer.</span></span> <span data-ttu-id="32237-165">前の手順と同様、**複数発生モード** プロパティが **優先順位の高い小売業者** に設定された組み合わせ最安値割引は、このステップでは処理されません。</span><span class="sxs-lookup"><span data-stu-id="32237-165">Like the previous step, mix-and-match least-expensive discounts that have the **Multiple occurrences mode** property set to **Favor retailer** are skipped in this step.</span></span> <span data-ttu-id="32237-166">価格決定優先順位が 10 のすべての **最良価格** および **組み入れ** 割引が適用されると、**最良価格** および **組み入れ** 組み合わせの **優先順位の高い小売業者** 割引が互いに評価され、適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-166">Once all the **Best price** and **Compound** discounts at pricing priority 10 have been applied, then **Best price** and **Compound** mix-and-match **Favor retailer** discounts are evaluated against each other and gets applied.</span></span> <span data-ttu-id="32237-167">**最良価格** 割引は、割引が適用されない製品にのみ適用されますが、**組み入れ** 割引は、割引が適用されない製品と、同じ価格決定優先順位の別の **組み入れ** 割引によって割引された製品に適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-167">A **Best price** discount applies only to undiscounted products, but a **Compound** discount applies to undiscounted products and products that are discounted with another **Compound** discounts at the same pricing priority.</span></span>
4. <span data-ttu-id="32237-168">割引同時実行管理モードは **優先順位内のみの最良価格と組み入れ、優先順位間で組み入れない** に設定されているため、製品に適用される価格決定優先順位 5 の単純、数量、および組み合わせ割引は、適用される割引と競合しません。</span><span class="sxs-lookup"><span data-stu-id="32237-168">Because the discount concurrency control mode is set to **Best price and compound within priority, never compound across priorities** so the simple, quantity, and mix-and-match discounts applicable to the product, at pricing priority 5 do not compete with the applied discounts.</span></span> <span data-ttu-id="32237-169">この時点で、製品に関して、最も高い優先順位のすべての単純、数量、および組み合わせ割引が評価されました。</span><span class="sxs-lookup"><span data-stu-id="32237-169">At this point, for a product, all the simple, quantity, and mix-and-match discounts at the highest priority have been evaluated.</span></span>
5. <span data-ttu-id="32237-170">次に、優先順位 10 内で、価格決定エンジンは、同時実行モードが**排他的**に設定されているしきい値割引を考慮します。</span><span class="sxs-lookup"><span data-stu-id="32237-170">Next, within priority 10, the pricing engine evaluates threshold discounts that have the concurrency mode set to **Exclusive**.</span></span> <span data-ttu-id="32237-171">**排他**しきい値割引は、既に割引が適用されている製品には適用できないため、しきい値金額は、割引を適用しない製品でのみ適用され、評価されます。</span><span class="sxs-lookup"><span data-stu-id="32237-171">An **Exclusive** threshold discount can't be applied to a product that already has a discount applied, so a threshold amount is applied and evaluated only on the undiscounted products.</span></span> <span data-ttu-id="32237-172">これらの割引のうち複数がトランザクションに適用される場合は、割引が競合し、最大割引が適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-172">If more than one of these discounts apply to the transaction, the discounts compete, and the largest discount is applied.</span></span>
6. <span data-ttu-id="32237-173">次に、優先順位 10 内で、価格決定エンジンは、同時実行モードが**最良価格**および**組み入れ**に設定されているしきい値割引を考慮します。</span><span class="sxs-lookup"><span data-stu-id="32237-173">Next, within priority 10, the pricing engine evaluates threshold discounts that have the concurrency mode set to **Best price** and **Compound**.</span></span> <span data-ttu-id="32237-174">価格決定エンジンは、価格決定の優先順位 10 でしきい値割引を評価し、適用します。</span><span class="sxs-lookup"><span data-stu-id="32237-174">The pricing engine evaluates and applies threshold discounts at pricing priority 10.</span></span> <span data-ttu-id="32237-175">**組み入れ**しきい値割引は、他の**組み入れ**しきい値割引と組み入れられ、同じ価格決定の優先順位内の他の**最良価格**割引と競合します。</span><span class="sxs-lookup"><span data-stu-id="32237-175">**Compound** threshold discounts are compounded with other **Compound** threshold discounts and compete against the other **Best price** discounts within the same pricing priority.</span></span> <span data-ttu-id="32237-176">**最良価格**しきい値割引は、割引が適用されない製品にのみ適用されますが、**組み入れ**しきい値割引は、割引が適用されない製品と、別の **組み入れ** (**単純**、**数量**、**組み合わせ**) 割引によって割引された製品に適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-176">A **Best price** threshold discount applies only to undiscounted products, but a **Compound** threshold discount applies to undiscounted products and products that are discounted with another **Compound** (**Simple**, **Quantity**, and **Mix and Match**) discount.</span></span>

    > [!NOTE]
    > <span data-ttu-id="32237-177">より高い優先順位 (たとえば、11 に設定されている) しきい値割引があり、その他のすべての割引タイプの優先順位が 10 と 5 である場合、しきい値割引は 11 の優先順位で評価され、優先順位が 10 の単純、数量、組み合わせと組み入れられます。</span><span class="sxs-lookup"><span data-stu-id="32237-177">If there were threshold discounts set at a higher priority, for example if it's set to 11, and all the other discount types were at priority 10 and 5, then the threshold discounts would have evaluated at priority 11 and then compounded with the simple, quantity, and mix and match discounts at priority 10.</span></span> <span data-ttu-id="32237-178">これは、単純、数量、および組み合わえ割引は最も高い優先順位内で評価され、しきい値割引は最も高い優先順位内で評価されてから組み入れられるために重要です。</span><span class="sxs-lookup"><span data-stu-id="32237-178">This is important because simple, quantity, and mix and match discounts are evaluated within their highest priority and the threshold discounts are evaluated within their highest priority and then compounded.</span></span> <span data-ttu-id="32237-179">優先順位の低いしきい値割引は無視されます。</span><span class="sxs-lookup"><span data-stu-id="32237-179">Any threshold discounts at the lower priority are ignored.</span></span>

<span data-ttu-id="32237-180">この時点で、優先順位が最も高いすべての割引が評価されました。</span><span class="sxs-lookup"><span data-stu-id="32237-180">At this point, all the discounts at the highest priorities have been evaluated.</span></span>

<span data-ttu-id="32237-181">上のロジックは次の図で示されています。この図では、さまざまな優先順位の間で価格決定アルゴリズムが割引をループする様子の詳細なビューを示します。</span><span class="sxs-lookup"><span data-stu-id="32237-181">The above logic is showcased in the following image, which shows the detailed view of how the pricing algorithm loops through the discounts across various priorities.</span></span> <span data-ttu-id="32237-182">次の図は、両方の割引同時実行管理モデルに適用されますが、価格決定アルゴリズムがの優先順位の異なる割引を処理する方法に違いがあることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="32237-182">Note that this diagram applies for both the discount concurrency control models, but the difference is in the way in which the pricing algorithm treats discounts at different priorities.</span></span>

<span data-ttu-id="32237-183">![詳細な価格決定ロジック](./media/Detailed-pricing-logic.png "詳細な価格決定ロジック")</span><span class="sxs-lookup"><span data-stu-id="32237-183">![Detailed pricing logic](./media/Detailed-pricing-logic.png "Detailed pricing logic")</span></span>

<span data-ttu-id="32237-184">この例では、次の設定を仮定します。</span><span class="sxs-lookup"><span data-stu-id="32237-184">In this example, let's assume the following setup.</span></span>

<span data-ttu-id="32237-185">**製品情報**</span><span class="sxs-lookup"><span data-stu-id="32237-185">**Product information**</span></span>

| <span data-ttu-id="32237-186">製品 \#</span><span class="sxs-lookup"><span data-stu-id="32237-186">Product \#</span></span> | <span data-ttu-id="32237-187">製品価格</span><span class="sxs-lookup"><span data-stu-id="32237-187">Product price</span></span> |
|---|---|
| <span data-ttu-id="32237-188">製品 1</span><span class="sxs-lookup"><span data-stu-id="32237-188">Prod1</span></span> | <span data-ttu-id="32237-189">10 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-189">$10</span></span> |
| <span data-ttu-id="32237-190">製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-190">Prod2</span></span> | <span data-ttu-id="32237-191">20 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-191">$20</span></span> |
| <span data-ttu-id="32237-192">製品 3</span><span class="sxs-lookup"><span data-stu-id="32237-192">Prod3</span></span> | <span data-ttu-id="32237-193">10 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-193">$10</span></span> |

<span data-ttu-id="32237-194">**割引設定**</span><span class="sxs-lookup"><span data-stu-id="32237-194">**Discount setup**</span></span>

| <span data-ttu-id="32237-195">割引 \#</span><span class="sxs-lookup"><span data-stu-id="32237-195">Discount \#</span></span> | <span data-ttu-id="32237-196">割引同時実行</span><span class="sxs-lookup"><span data-stu-id="32237-196">Discount concurrency</span></span> | <span data-ttu-id="32237-197">優先順位</span><span class="sxs-lookup"><span data-stu-id="32237-197">Priority</span></span> | <span data-ttu-id="32237-198">割引金額</span><span class="sxs-lookup"><span data-stu-id="32237-198">Discount amount</span></span> | <span data-ttu-id="32237-199">割引のタイプ</span><span class="sxs-lookup"><span data-stu-id="32237-199">Discount type</span></span> | <span data-ttu-id="32237-200">製品に適用可能</span><span class="sxs-lookup"><span data-stu-id="32237-200">Applicable on products</span></span> |
|---|---|---|---|---|---|
| <span data-ttu-id="32237-201">BP1</span><span class="sxs-lookup"><span data-stu-id="32237-201">BP1</span></span> | <span data-ttu-id="32237-202">最良価格</span><span class="sxs-lookup"><span data-stu-id="32237-202">Best price</span></span> | <span data-ttu-id="32237-203">10</span><span class="sxs-lookup"><span data-stu-id="32237-203">10</span></span> | <span data-ttu-id="32237-204">15%</span><span class="sxs-lookup"><span data-stu-id="32237-204">15%</span></span> | <span data-ttu-id="32237-205">単純、数量、または組み合わせ</span><span class="sxs-lookup"><span data-stu-id="32237-205">Simple, Quantity, or Mix and Match</span></span> | <span data-ttu-id="32237-206">製品 1、製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-206">Prod1, Prod2</span></span> |
| <span data-ttu-id="32237-207">BP2</span><span class="sxs-lookup"><span data-stu-id="32237-207">BP2</span></span> | <span data-ttu-id="32237-208">最良価格</span><span class="sxs-lookup"><span data-stu-id="32237-208">Best price</span></span> | <span data-ttu-id="32237-209">5</span><span class="sxs-lookup"><span data-stu-id="32237-209">5</span></span> | <span data-ttu-id="32237-210">20%</span><span class="sxs-lookup"><span data-stu-id="32237-210">20%</span></span> | <span data-ttu-id="32237-211">単純、数量、または組み合わせ</span><span class="sxs-lookup"><span data-stu-id="32237-211">Simple, Quantity, or Mix and Match</span></span> | <span data-ttu-id="32237-212">すべての製品</span><span class="sxs-lookup"><span data-stu-id="32237-212">All products</span></span> |
| <span data-ttu-id="32237-213">C1</span><span class="sxs-lookup"><span data-stu-id="32237-213">C1</span></span> | <span data-ttu-id="32237-214">組み入れ</span><span class="sxs-lookup"><span data-stu-id="32237-214">Compound</span></span> | <span data-ttu-id="32237-215">10</span><span class="sxs-lookup"><span data-stu-id="32237-215">10</span></span> | <span data-ttu-id="32237-216">$1</span><span class="sxs-lookup"><span data-stu-id="32237-216">$1</span></span> | <span data-ttu-id="32237-217">単純、数量、または組み合わせ</span><span class="sxs-lookup"><span data-stu-id="32237-217">Simple, Quantity, or Mix and Match</span></span> | <span data-ttu-id="32237-218">製品 1、製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-218">Prod1, Prod2</span></span> |
| <span data-ttu-id="32237-219">C2</span><span class="sxs-lookup"><span data-stu-id="32237-219">C2</span></span> | <span data-ttu-id="32237-220">組み入れ</span><span class="sxs-lookup"><span data-stu-id="32237-220">Compound</span></span> | <span data-ttu-id="32237-221">10</span><span class="sxs-lookup"><span data-stu-id="32237-221">10</span></span> | <span data-ttu-id="32237-222">10%</span><span class="sxs-lookup"><span data-stu-id="32237-222">10%</span></span> | <span data-ttu-id="32237-223">単純、数量、または組み合わせ</span><span class="sxs-lookup"><span data-stu-id="32237-223">Simple, Quantity, or Mix and Match</span></span> | <span data-ttu-id="32237-224">製品 1、製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-224">Prod1, Prod2</span></span> |
| <span data-ttu-id="32237-225">C3</span><span class="sxs-lookup"><span data-stu-id="32237-225">C3</span></span> | <span data-ttu-id="32237-226">組み入れ</span><span class="sxs-lookup"><span data-stu-id="32237-226">Compound</span></span> | <span data-ttu-id="32237-227">5</span><span class="sxs-lookup"><span data-stu-id="32237-227">5</span></span> | <span data-ttu-id="32237-228">25%</span><span class="sxs-lookup"><span data-stu-id="32237-228">25%</span></span> | <span data-ttu-id="32237-229">単純、数量、または組み合わせ</span><span class="sxs-lookup"><span data-stu-id="32237-229">Simple, Quantity, or Mix and Match</span></span> | <span data-ttu-id="32237-230">すべての製品</span><span class="sxs-lookup"><span data-stu-id="32237-230">All products</span></span> |
| <span data-ttu-id="32237-231">C4</span><span class="sxs-lookup"><span data-stu-id="32237-231">C4</span></span> | <span data-ttu-id="32237-232">組み入れ</span><span class="sxs-lookup"><span data-stu-id="32237-232">Compound</span></span> | <span data-ttu-id="32237-233">5</span><span class="sxs-lookup"><span data-stu-id="32237-233">5</span></span> | <span data-ttu-id="32237-234">10%</span><span class="sxs-lookup"><span data-stu-id="32237-234">10%</span></span> | <span data-ttu-id="32237-235">しきい値のみ</span><span class="sxs-lookup"><span data-stu-id="32237-235">Threshold only</span></span> | <span data-ttu-id="32237-236">すべての製品</span><span class="sxs-lookup"><span data-stu-id="32237-236">All products</span></span> |

<span data-ttu-id="32237-237">**手順 1:** 製品ごとに、単純、数量、または組み合わせ割引が存在する最も高い優先順位を決定します。</span><span class="sxs-lookup"><span data-stu-id="32237-237">**Step 1:** For each product, determine the highest priority where a Simple, Quantity or Mix and Match discount exists.</span></span> <span data-ttu-id="32237-238">この場合、製品 1 の優先順位が 10、製品 2 が 10 の優先順位、製品 3 が 5 の優先順位です。</span><span class="sxs-lookup"><span data-stu-id="32237-238">In this case, for prod1 it is priority 10, for prod2 it is priority 10 and for prod3 it is priority 5.</span></span>

<span data-ttu-id="32237-239">**手順 2:** 製品ごとに、個々の製品に適用される最大の優先順位で、割引同時実行が **排他** に設定された**単純**、**数量**、または**組み合わせ**割引を検索します。</span><span class="sxs-lookup"><span data-stu-id="32237-239">**Step 2:** For each product, find **Simple**, **Quantity**, or **Mix and Match** discounts, with discount concurrency as **Exclusive**, at the highest priority applicable to individual products.</span></span> <span data-ttu-id="32237-240">この場合、優先順位 10 の製品 1 と製品 2 には何もなく、同様に、優先順位 5 の製品 3 には何もありません。</span><span class="sxs-lookup"><span data-stu-id="32237-240">In this case, there are none for prod1 and prod2 at priority 10 and similarly, there are none for prod3 at priority 5.</span></span>

<span data-ttu-id="32237-241">**手順 3:** 製品ごとに、個々の製品に適用される最大の優先順位で、割引同時実行が **最良価格** および **組み入れ** に設定された**単純**、**数量**、または**組み合わせ**割引を検索します。</span><span class="sxs-lookup"><span data-stu-id="32237-241">**Step 3:** For each product, evaluate **Simple**, **Quantity**, or **Mix and Match** discounts, with discount concurrency as **Best price** and **Compound**, at the highest priority applicable to individual products.</span></span> <span data-ttu-id="32237-242">次の表に、これを示します。</span><span class="sxs-lookup"><span data-stu-id="32237-242">The following table illustrates this.</span></span>

> [!NOTE]
> <span data-ttu-id="32237-243">2 つのアスタリスク (\*\*) は、製品に適用される割引を示します。</span><span class="sxs-lookup"><span data-stu-id="32237-243">Two asterisks (\*\*) indicate the discount that gets applied to a product.</span></span>

| <span data-ttu-id="32237-244">トランザクションの数量</span><span class="sxs-lookup"><span data-stu-id="32237-244">Transaction quantity</span></span> | <span data-ttu-id="32237-245">品目</span><span class="sxs-lookup"><span data-stu-id="32237-245">Product</span></span> | <span data-ttu-id="32237-246">価額</span><span class="sxs-lookup"><span data-stu-id="32237-246">Price</span></span> | <span data-ttu-id="32237-247">優先順位 10 (C1 + C2)</span><span class="sxs-lookup"><span data-stu-id="32237-247">Priority 10 (C1 + C2)</span></span> | <span data-ttu-id="32237-248">優先順位 10 (BP1)</span><span class="sxs-lookup"><span data-stu-id="32237-248">Priority 10 (BP1)</span></span> | <span data-ttu-id="32237-249">優先順位 5 (C3)</span><span class="sxs-lookup"><span data-stu-id="32237-249">Priority 5 (C3)</span></span> | <span data-ttu-id="32237-250">優先順位 5 (BP2)</span><span class="sxs-lookup"><span data-stu-id="32237-250">Priority 5 (BP2)</span></span> | <span data-ttu-id="32237-251">小計</span><span class="sxs-lookup"><span data-stu-id="32237-251">Total</span></span> | <span data-ttu-id="32237-252">説明</span><span class="sxs-lookup"><span data-stu-id="32237-252">Explanation</span></span> |
|---|---|---|---|---|---|---|---|---|
| <span data-ttu-id="32237-253">1</span><span class="sxs-lookup"><span data-stu-id="32237-253">1</span></span> | <span data-ttu-id="32237-254">製品 1</span><span class="sxs-lookup"><span data-stu-id="32237-254">Prod1</span></span> | <span data-ttu-id="32237-255">10 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-255">$10</span></span> | <span data-ttu-id="32237-256">1.90 ドル\*\*</span><span class="sxs-lookup"><span data-stu-id="32237-256">$1.90\*\*</span></span> | <span data-ttu-id="32237-257">1.50 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-257">$1.50</span></span> | <span data-ttu-id="32237-258">(NA)</span><span class="sxs-lookup"><span data-stu-id="32237-258">(NA)</span></span> | <span data-ttu-id="32237-259">(NA)</span><span class="sxs-lookup"><span data-stu-id="32237-259">(NA)</span></span> | <span data-ttu-id="32237-260">$10 – 1.90 = $8.1</span><span class="sxs-lookup"><span data-stu-id="32237-260">$10 – 1.90 = $8.1</span></span> | <span data-ttu-id="32237-261">組み入れ割引の組み合わせが最良価格割引を超えるので、C1 と C2 は製品に適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-261">Because the combination of compound discounts is more than the best price discount, C1 and C2 are applied on the product.</span></span> <span data-ttu-id="32237-262">優先順位の低い割引 (5 など) は無視されます。</span><span class="sxs-lookup"><span data-stu-id="32237-262">The discounts at lower priority, such as 5, are ignored.</span></span> |
| <span data-ttu-id="32237-263">1</span><span class="sxs-lookup"><span data-stu-id="32237-263">1</span></span> | <span data-ttu-id="32237-264">製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-264">Prod2</span></span> | <span data-ttu-id="32237-265">20 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-265">$20</span></span> | <span data-ttu-id="32237-266">2.90 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-266">$2.90</span></span> | <span data-ttu-id="32237-267">3 ドル\*\*</span><span class="sxs-lookup"><span data-stu-id="32237-267">$3\*\*</span></span> | <span data-ttu-id="32237-268">(NA)</span><span class="sxs-lookup"><span data-stu-id="32237-268">(NA)</span></span> | <span data-ttu-id="32237-269">(NA)</span><span class="sxs-lookup"><span data-stu-id="32237-269">(NA)</span></span> | <span data-ttu-id="32237-270">$20 – 3 = $17.00</span><span class="sxs-lookup"><span data-stu-id="32237-270">$20 – 3 = $17.00</span></span> | <span data-ttu-id="32237-271">最良価格割引が組み入れ割引の組み合わせを超えるので、BP1 は製品に適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-271">Because the best price discount is more than the combination of compound discounts, BP1 is applied on the product.</span></span> <span data-ttu-id="32237-272">優先順位の低い割引 (5 など) は無視されます。</span><span class="sxs-lookup"><span data-stu-id="32237-272">The discounts at lower priority, such as 5, are ignored.</span></span> |
| <span data-ttu-id="32237-273">1</span><span class="sxs-lookup"><span data-stu-id="32237-273">1</span></span> | <span data-ttu-id="32237-274">製品 3</span><span class="sxs-lookup"><span data-stu-id="32237-274">Prod3</span></span> | <span data-ttu-id="32237-275">10 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-275">$10</span></span> | | | <span data-ttu-id="32237-276">2.50 ドル\*\*</span><span class="sxs-lookup"><span data-stu-id="32237-276">$2.50\*\*</span></span> | <span data-ttu-id="32237-277">2.0 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-277">$2.0</span></span> | <span data-ttu-id="32237-278">$10 – 2.50 = $7.5</span><span class="sxs-lookup"><span data-stu-id="32237-278">$10 – 2.50 = $7.5</span></span> | <span data-ttu-id="32237-279">5 の優先順位は、この製品に適用される最上位の優先順位です。</span><span class="sxs-lookup"><span data-stu-id="32237-279">Priority 5 is highest applicable priority for this product.</span></span> <span data-ttu-id="32237-280">組み入れ割引が最良価格割引を超えるので、C3 は製品に適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-280">The compound discount is more than the best price discount, so C3 is applied on the product.</span></span> |

<span data-ttu-id="32237-281">**手順 4:** 最も高い優先順位の個々の製品に適用される **しきい値** 割引を評価します。</span><span class="sxs-lookup"><span data-stu-id="32237-281">**Step 4:** Evaluate **Threshold** discounts applicable to the individual products at the highest priority.</span></span> <span data-ttu-id="32237-282">この例では、すべての製品の優先順位が 5 です。</span><span class="sxs-lookup"><span data-stu-id="32237-282">For this example, it is priority 5 for all the products.</span></span>

| <span data-ttu-id="32237-283">トランザクションの数量</span><span class="sxs-lookup"><span data-stu-id="32237-283">Transaction quantity</span></span> | <span data-ttu-id="32237-284">品目</span><span class="sxs-lookup"><span data-stu-id="32237-284">Product</span></span> | <span data-ttu-id="32237-285">適用される割引</span><span class="sxs-lookup"><span data-stu-id="32237-285">Discount applied</span></span> | <span data-ttu-id="32237-286">割引価格</span><span class="sxs-lookup"><span data-stu-id="32237-286">Discounted price</span></span> | <span data-ttu-id="32237-287">優先順位 5 (C4)</span><span class="sxs-lookup"><span data-stu-id="32237-287">Priority 5 (C4)</span></span> | <span data-ttu-id="32237-288">請求額</span><span class="sxs-lookup"><span data-stu-id="32237-288">Amount due</span></span> | <span data-ttu-id="32237-289">説明</span><span class="sxs-lookup"><span data-stu-id="32237-289">Explanation</span></span> |
|---|---|---|---|---|---|---|
| <span data-ttu-id="32237-290">1</span><span class="sxs-lookup"><span data-stu-id="32237-290">1</span></span> | <span data-ttu-id="32237-291">製品 1</span><span class="sxs-lookup"><span data-stu-id="32237-291">Prod1</span></span> | <span data-ttu-id="32237-292">C1、C2</span><span class="sxs-lookup"><span data-stu-id="32237-292">C1, C2</span></span> | <span data-ttu-id="32237-293">8.1 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-293">$8.1</span></span> | <span data-ttu-id="32237-294">$0.81\*\*</span><span class="sxs-lookup"><span data-stu-id="32237-294">$0.81\*\*</span></span> | <span data-ttu-id="32237-295">8.1 – 0.81 = $7.29</span><span class="sxs-lookup"><span data-stu-id="32237-295">8.1 – 0.81 = $7.29</span></span> | <span data-ttu-id="32237-296">しきい値割引の場合、優先順位 5 は、この製品に適用される最上位の優先順位であるため、適用される割引の割引同時実行モードが **組み入れ** である場合、5 の優先順位で適用されるしきい値割引はすべて、適用される割引と組み入れられます。</span><span class="sxs-lookup"><span data-stu-id="32237-296">For Threshold discounts, Priority 5 is the highest applicable priority for this product, so any applicable threshold discounts at priority 5 will be compounded with the applied discounts, if the applied discounts are of discount concurrency mode **Compound**.</span></span> <span data-ttu-id="32237-297">製品 1 には組み入れ割引のみあるため、組み入れしきい値割引を組み入れることができます。</span><span class="sxs-lookup"><span data-stu-id="32237-297">Because Prod1 has compound discounts only, the compound threshold discounts can be compounded.</span></span> |
| <span data-ttu-id="32237-298">1</span><span class="sxs-lookup"><span data-stu-id="32237-298">1</span></span> | <span data-ttu-id="32237-299">製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-299">Prod2</span></span> | <span data-ttu-id="32237-300">BP1</span><span class="sxs-lookup"><span data-stu-id="32237-300">BP1</span></span> | <span data-ttu-id="32237-301">17 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-301">$17</span></span> | <span data-ttu-id="32237-302">(NA)</span><span class="sxs-lookup"><span data-stu-id="32237-302">(NA)</span></span> | <span data-ttu-id="32237-303">17 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-303">$17</span></span> | <span data-ttu-id="32237-304">しきい値割引の場合、優先順位 5 は、この製品に適用される最上位の優先順位であるため、適用される割引の割引同時実行モードが **組み入れ** である場合、5 の優先順位で適用されるしきい値割引はすべて、適用される割引と組み入れられます。</span><span class="sxs-lookup"><span data-stu-id="32237-304">For Threshold discounts, Priority 5 is the highest applicable priority for this product, so any applicable threshold discounts at priority 5 will be compounded with the applied discounts if the applied discounts are of discount concurrency mode **Compound**.</span></span> <span data-ttu-id="32237-305">製品 2 には、"最良価格" 割引があるため、この製品に他の割引を適用することはできません。</span><span class="sxs-lookup"><span data-stu-id="32237-305">Because Prod2 has a "Best price" discount, other discounts CANNOT be applied to this product.</span></span>|
| <span data-ttu-id="32237-306">1</span><span class="sxs-lookup"><span data-stu-id="32237-306">1</span></span> | <span data-ttu-id="32237-307">製品 3</span><span class="sxs-lookup"><span data-stu-id="32237-307">Prod3</span></span> | <span data-ttu-id="32237-308">C3</span><span class="sxs-lookup"><span data-stu-id="32237-308">C3</span></span> | <span data-ttu-id="32237-309">7.5 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-309">$7.5</span></span> | <span data-ttu-id="32237-310">$0.75\*\*</span><span class="sxs-lookup"><span data-stu-id="32237-310">$0.75\*\*</span></span> | <span data-ttu-id="32237-311">7.5 – 0.75 = $6.75</span><span class="sxs-lookup"><span data-stu-id="32237-311">7.5 – 0.75 = $6.75</span></span> | <span data-ttu-id="32237-312">しきい値割引の場合、優先順位 5 は、この製品に適用される最上位の優先順位であるため、適用される割引の割引同時実行モードが **組み入れ** である場合、5 の優先順位で適用されるしきい値割引はすべて、適用される割引と組み入れられます。</span><span class="sxs-lookup"><span data-stu-id="32237-312">For Threshold discounts, Priority 5 is highest applicable priority for this product, so any applicable threshold discounts at priority 5 will be compounded with the applied discounts, if the applied discounts are of discount concurrency mode **Compound**.</span></span> <span data-ttu-id="32237-313">製品 3 には組み入れ割引のみあるため、組み入れしきい値割引を組み入れることができます。</span><span class="sxs-lookup"><span data-stu-id="32237-313">Because Prod3 has compound discounts only, the compound threshold discounts can be compounded.</span></span> |

<span data-ttu-id="32237-314">最終合計金額は、製品 1 が 7.29、製品 2 が 17、製品 3 は 6.75 です。</span><span class="sxs-lookup"><span data-stu-id="32237-314">The final amount due for Prod1 is 7.29, Prod 2 is 17, and Prod 3 is 6.75.</span></span>

#### <a name="example-2"></a><span data-ttu-id="32237-315">例 2</span><span class="sxs-lookup"><span data-stu-id="32237-315">Example 2</span></span>

<span data-ttu-id="32237-316">2 番目のシナリオでは、**優先順位内のみの最良価格、常に優先順位間で組み入れ** が割引同時実行管理モデルとして選択されていますが、割引の残りの部分はそのままです。</span><span class="sxs-lookup"><span data-stu-id="32237-316">In the second scenario, **Best price only within priority, always compound across priorities** is selected as the discount concurrency control model while rest of the discounts remain as is.</span></span>

1. <span data-ttu-id="32237-317">**割引同時実行管理モデル**が選択されていることを考えると、製品ごとに、価格エンジンは次に、製品に適用される割引の最も高い価格決定優先度を考慮します。</span><span class="sxs-lookup"><span data-stu-id="32237-317">Given that **Discount concurrency control model** is selected, for each product the pricing engine next considers the highest pricing priority of the discounts that are applicable on a product.</span></span> <span data-ttu-id="32237-318">製品に、複数の優先順位から割引を適用できる場合、それぞれ個別に降順で評価されます。</span><span class="sxs-lookup"><span data-stu-id="32237-318">If, for a product, discounts from more than one priority are applicable, then each is evaluated independently, and in descending order.</span></span> <span data-ttu-id="32237-319">したがって、価格決定エンジンはまず、優先順位が 10 の単純、数量、および組み合わせ割引を評価および適用してから、優先順位 5 の割引に進みます。</span><span class="sxs-lookup"><span data-stu-id="32237-319">Thus, the pricing engine first evaluates and applies the simple, quantity, and mix-and-match discounts with priority 10 followed by the discounts at priority 5.</span></span>

    > [!NOTE]
    > <span data-ttu-id="32237-320">前の割引同時実行管理モデルと同様、**しきい値**割引はまだ評価されません。</span><span class="sxs-lookup"><span data-stu-id="32237-320">Like the previous discount concurrency control model, the **Threshold** discounts are not evaluated yet.</span></span>

2. <span data-ttu-id="32237-321">優先順位 10 内で、価格決定エンジンはまず、同時実行モードが**排他的**に設定されている割引を考慮します。</span><span class="sxs-lookup"><span data-stu-id="32237-321">Within priority 10, the pricing engine first considers the discounts that have the concurrency mode set to **Exclusive**.</span></span> <span data-ttu-id="32237-322">複数の排他割引が製品に適用される場合、最適な排他割引が適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-322">If there is more than one exclusive discount applicable to the product, then the best exclusive discount is applied.</span></span> <span data-ttu-id="32237-323">製品は、排他割引を引き受け、どの優先順位でもこの製品に他の割引を適用することはできません。</span><span class="sxs-lookup"><span data-stu-id="32237-323">When a product gets an exclusive discount, no other discounts can be applied to this product at any priority.</span></span>

    > [!NOTE]
    > <span data-ttu-id="32237-324">**複数発生モード** プロパティが **優先順位の高い小売業者** に設定された組み合わせ最安値割引は、このステップでは処理されません。</span><span class="sxs-lookup"><span data-stu-id="32237-324">Mix-and-match, least-expensive discounts that have the **Multiple occurrences mode** property set to **Favor retailer** are skipped in this step.</span></span> <span data-ttu-id="32237-325">価格決定優先順位が 10 のすべての **排他** 割引 (**単純**、**数量**、**組み合わせ**) が適用されうと、**排他**組み合わせの **優先順位が高い小売業者** 割引が、価格決定優先順位 10 で、割引が適用されていない製品に適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-325">After all the **Exclusive** discounts (**Simple**, **Quantity** and **Mix and Match**) at pricing priority 10 have been applied, then the **Exclusive** mix-and-match **Favor retailer** discounts, at pricing priority 10, are applied to any undiscounted products.</span></span>

3. <span data-ttu-id="32237-326">優先順位 10 内で、価格決定エンジンは次に、割引同時実行モードが**最良価格**および**組み入れ**に設定されている割引を考慮します。</span><span class="sxs-lookup"><span data-stu-id="32237-326">Within priority 10, the pricing engine then considers the discounts that have the discount concurrency mode set to **Best price** and **Compound**.</span></span> <span data-ttu-id="32237-327">前述のように、この割同時実行管理モデルは、**割引同時実行モード** が **最良価格** および **組み入れ** に設定された割引がすべて、1 つの価格決定優先順位内で "最良価格" として扱われます。</span><span class="sxs-lookup"><span data-stu-id="32237-327">As stated before, for this discount concurrency control model, discounts with **Discount concurrency mode** set to **Best price** and **Compound** are all treated as "best price"; within a single pricing priority.</span></span> <span data-ttu-id="32237-328">したがって、複数の**組み入れ**および**最良価格**割引が製品に適用される場合、これらすべての割引は最良価格と競合し、1 つの優先順位内の最良割引のみ勝利します。</span><span class="sxs-lookup"><span data-stu-id="32237-328">So, if multiple **Compound** and **Best price** discounts apply to a product, then all these discounts compete for best price and only the best discount wins within a priority.</span></span> <span data-ttu-id="32237-329">前の手順と同様、**複数発生モード** プロパティが **優先順位の高い小売業者** に設定された組み合わせ最安値割引は、このステップでは処理されません。</span><span class="sxs-lookup"><span data-stu-id="32237-329">Like the previous step, mix-and-match least-expensive discounts that have the **Multiple occurrences mode** property set to **Favor retailer** are skipped in this step.</span></span> <span data-ttu-id="32237-330">価格決定優先順位が 10 のすべての **最良価格** および **組み入れ** 割引が適用されると、**最良価格** および **組み入れ** 組み合わせの **優先順位の高い小売業者** 割引が互いに評価され、適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-330">When all the **Best price** and **Compound** discounts at pricing priority 10 have been applied, then **Best price** and **Compound** mix-and-match **Favor retailer** discounts are evaluated against each other and applied.</span></span> <span data-ttu-id="32237-331">**最良価格**および**組み入れ**がどちらも最良価格として扱われるため、特定の優先順位の 1 つの割引だけが製品ごとに適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-331">Because both **Best price** and **Compound** are treated as best price, only one discount can be applied per product at a given priority.</span></span>
4. <span data-ttu-id="32237-332">価格決定エンジンは、優先順位が 5 のすべての単純、数量、および組み合わせ割引に対して手順 1 ～ 3 を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="32237-332">The pricing engine repeats the steps 1 through 3 for any simple, quantity, and mix-and-match discounts at pricing priority 5.</span></span>

    > [!NOTE]
    > <span data-ttu-id="32237-333">価格決定エンジンは、トランザクションに適用される価格決定優先順位ごとに手順 1 ～ 3 を 1 回だけ完了します。</span><span class="sxs-lookup"><span data-stu-id="32237-333">The pricing engine completes steps 1 through 3, one time, for every pricing priority that applies to the transaction.</span></span> <span data-ttu-id="32237-334">したがって、ビジネスの要件に応じて、価格決定の優先順位を最小限にすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="32237-334">Therefore, we recommend that you keep the number of pricing priorities to a minimum, based on your business requirements.</span></span>

    <span data-ttu-id="32237-335">この時点で、あらゆる優先順位のすべての単純、数量、および組み合わせ割引が評価され、適用されました。</span><span class="sxs-lookup"><span data-stu-id="32237-335">At this point, all the simple, quantity, and mix-and-match discounts at all priorities have been evaluated and applied.</span></span>

5. <span data-ttu-id="32237-336">次に、優先順位 10 内で、小売価格決定エンジンは、同時実行モードが **排他的** に設定されているしきい値割引を考慮します。</span><span class="sxs-lookup"><span data-stu-id="32237-336">Next, within priority 10, the retail pricing engine evaluates threshold discounts that have the concurrency mode set to **Exclusive**.</span></span> <span data-ttu-id="32237-337">**排他**しきい値割引は、既に割引が適用されている製品には適用できないため、しきい値金額は、割引を適用しない製品でのみ適用され、評価されます。</span><span class="sxs-lookup"><span data-stu-id="32237-337">An **Exclusive** threshold discount can't be applied to a product that already has a discount applied, so a threshold amount is applied and evaluated only on undiscounted products.</span></span> <span data-ttu-id="32237-338">これらの割引のうち複数がトランザクションに適用される場合は、割引が競合し、最大割引が適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-338">If more than one of these discounts apply to the transaction, the discounts compete, and the largest discount is applied.</span></span>
6. <span data-ttu-id="32237-339">次に、優先順位 10 内で、価格決定エンジンは、同時実行モードが**最良価格**および**組み入れ**に設定されているしきい値割引を考慮します。</span><span class="sxs-lookup"><span data-stu-id="32237-339">Next, within priority 10, the pricing engine evaluates threshold discounts that have the concurrency mode set to **Best price** and **Compound**.</span></span> <span data-ttu-id="32237-340">**最良価格**および**組み入れ**はすべて "最良価格" として扱われるため、これらの割引は最適な割引と競合します。</span><span class="sxs-lookup"><span data-stu-id="32237-340">Because **Best price** and **Compound** are all treated as "best price", these discounts compete for the best discount.</span></span> <span data-ttu-id="32237-341">優先順位 10 で既に適用される他の割引タイプがないそれらの製品に、選択したしきい値割引が適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-341">The selected threshold discount gets applied to those products which do not have any other types of discounts already applied at priority 10.</span></span> <span data-ttu-id="32237-342">他の割引がある場合、しきい値割引は適用されません。最良価格および組み入れ割引の両方が最良価格として扱われ、この割引同時実行管理では優先順位ごとに 1 つの割引のみ許容されるためです。</span><span class="sxs-lookup"><span data-stu-id="32237-342">If there are other discounts, then the threshold discount is not applied because both Best price and Compound discounts are treated as Best price, and only one discount per priority is allowed with this discount concurrency control.</span></span>

    > [!NOTE]
    > <span data-ttu-id="32237-343">より高い優先順位 (たとえば、11 に設定されている) しきい値割引があり、その他のすべての割引タイプの優先順位が 10 と 5 である場合、しきい値割引は 11 の優先順位で評価され、最適なしきい値割引は優先順位 11 で適用されます (低い優先順位で適用された**排他**割引 (**単純**、**数量**、または**組み合わせ**) はないと仮定)。</span><span class="sxs-lookup"><span data-stu-id="32237-343">If there were threshold discounts set at a higher priority, for example, it's set to 11 and all the other discount types were at priority 10 and 5, then the threshold discounts would have evaluated at priority 11 and the best threshold discount would have been applied at priority 11 (assuming there is no **Exclusive** discount (**Simple**, **Quantity**, or **Mix and Match**) applied at a lower priority).</span></span>

7. <span data-ttu-id="32237-344">価格決定エンジンは、価格決定の優先順位 5 でしきい値割引の手順 5 と 6 を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="32237-344">The pricing engine repeats the steps 5 and 6 for threshold discounts at pricing priority 5.</span></span>

<span data-ttu-id="32237-345">前と同じ例を使ってみましょう。</span><span class="sxs-lookup"><span data-stu-id="32237-345">Let's use the same example as before.</span></span>

<span data-ttu-id="32237-346">**製品情報**</span><span class="sxs-lookup"><span data-stu-id="32237-346">**Product information**</span></span>

| <span data-ttu-id="32237-347">製品 \#</span><span class="sxs-lookup"><span data-stu-id="32237-347">Product \#</span></span> | <span data-ttu-id="32237-348">製品価格</span><span class="sxs-lookup"><span data-stu-id="32237-348">Product price</span></span> |
|---|---|
| <span data-ttu-id="32237-349">製品 1</span><span class="sxs-lookup"><span data-stu-id="32237-349">Prod1</span></span> | <span data-ttu-id="32237-350">10 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-350">$10</span></span> |
| <span data-ttu-id="32237-351">製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-351">Prod2</span></span> | <span data-ttu-id="32237-352">20 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-352">$20</span></span> |
| <span data-ttu-id="32237-353">製品 3</span><span class="sxs-lookup"><span data-stu-id="32237-353">Prod3</span></span> | <span data-ttu-id="32237-354">10 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-354">$10</span></span> |

<span data-ttu-id="32237-355">**割引設定**</span><span class="sxs-lookup"><span data-stu-id="32237-355">**Discount setup**</span></span>

| <span data-ttu-id="32237-356">割引 \#</span><span class="sxs-lookup"><span data-stu-id="32237-356">Discount \#</span></span> | <span data-ttu-id="32237-357">割引同時実行</span><span class="sxs-lookup"><span data-stu-id="32237-357">Discount concurrency</span></span> | <span data-ttu-id="32237-358">優先順位</span><span class="sxs-lookup"><span data-stu-id="32237-358">Priority</span></span> | <span data-ttu-id="32237-359">割引金額</span><span class="sxs-lookup"><span data-stu-id="32237-359">Discount amount</span></span> | <span data-ttu-id="32237-360">割引のタイプ</span><span class="sxs-lookup"><span data-stu-id="32237-360">Discount type</span></span> | <span data-ttu-id="32237-361">製品に適用可能</span><span class="sxs-lookup"><span data-stu-id="32237-361">Applicable on products</span></span> |
|---|---|---|---|---|---|
| <span data-ttu-id="32237-362">BP1</span><span class="sxs-lookup"><span data-stu-id="32237-362">BP1</span></span> | <span data-ttu-id="32237-363">最良価格</span><span class="sxs-lookup"><span data-stu-id="32237-363">Best price</span></span> | <span data-ttu-id="32237-364">10</span><span class="sxs-lookup"><span data-stu-id="32237-364">10</span></span> | <span data-ttu-id="32237-365">15%</span><span class="sxs-lookup"><span data-stu-id="32237-365">15%</span></span> | <span data-ttu-id="32237-366">単純、数量、または組み合わせ</span><span class="sxs-lookup"><span data-stu-id="32237-366">Simple, Quantity, or Mix and Match</span></span> | <span data-ttu-id="32237-367">製品 1、製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-367">Prod1, Prod2</span></span> |
| <span data-ttu-id="32237-368">BP2</span><span class="sxs-lookup"><span data-stu-id="32237-368">BP2</span></span> | <span data-ttu-id="32237-369">最良価格</span><span class="sxs-lookup"><span data-stu-id="32237-369">Best price</span></span> | <span data-ttu-id="32237-370">5</span><span class="sxs-lookup"><span data-stu-id="32237-370">5</span></span> | <span data-ttu-id="32237-371">20%</span><span class="sxs-lookup"><span data-stu-id="32237-371">20%</span></span> | <span data-ttu-id="32237-372">単純、数量、または組み合わせ</span><span class="sxs-lookup"><span data-stu-id="32237-372">Simple, Quantity, or Mix and Match</span></span> | <span data-ttu-id="32237-373">すべての製品</span><span class="sxs-lookup"><span data-stu-id="32237-373">All products</span></span> |
| <span data-ttu-id="32237-374">C1</span><span class="sxs-lookup"><span data-stu-id="32237-374">C1</span></span> | <span data-ttu-id="32237-375">組み入れ</span><span class="sxs-lookup"><span data-stu-id="32237-375">Compound</span></span> | <span data-ttu-id="32237-376">10</span><span class="sxs-lookup"><span data-stu-id="32237-376">10</span></span> | <span data-ttu-id="32237-377">$1</span><span class="sxs-lookup"><span data-stu-id="32237-377">$1</span></span> | <span data-ttu-id="32237-378">単純、数量、または組み合わせ</span><span class="sxs-lookup"><span data-stu-id="32237-378">Simple, Quantity, or Mix and Match</span></span> | <span data-ttu-id="32237-379">製品 1、製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-379">Prod1, Prod2</span></span> |
| <span data-ttu-id="32237-380">C2</span><span class="sxs-lookup"><span data-stu-id="32237-380">C2</span></span> | <span data-ttu-id="32237-381">組み入れ</span><span class="sxs-lookup"><span data-stu-id="32237-381">Compound</span></span> | <span data-ttu-id="32237-382">10</span><span class="sxs-lookup"><span data-stu-id="32237-382">10</span></span> | <span data-ttu-id="32237-383">10%</span><span class="sxs-lookup"><span data-stu-id="32237-383">10%</span></span> | <span data-ttu-id="32237-384">単純、数量、または組み合わせ</span><span class="sxs-lookup"><span data-stu-id="32237-384">Simple, Quantity, or Mix and Match</span></span> | <span data-ttu-id="32237-385">製品 1、製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-385">Prod1, Prod2</span></span> |
| <span data-ttu-id="32237-386">C3</span><span class="sxs-lookup"><span data-stu-id="32237-386">C3</span></span> | <span data-ttu-id="32237-387">組み入れ</span><span class="sxs-lookup"><span data-stu-id="32237-387">Compound</span></span> | <span data-ttu-id="32237-388">5</span><span class="sxs-lookup"><span data-stu-id="32237-388">5</span></span> | <span data-ttu-id="32237-389">25%</span><span class="sxs-lookup"><span data-stu-id="32237-389">25%</span></span> | <span data-ttu-id="32237-390">単純、数量、または組み合わせ</span><span class="sxs-lookup"><span data-stu-id="32237-390">Simple, Quantity, or Mix and Match</span></span> | <span data-ttu-id="32237-391">すべての製品</span><span class="sxs-lookup"><span data-stu-id="32237-391">All products</span></span> |
| <span data-ttu-id="32237-392">C4</span><span class="sxs-lookup"><span data-stu-id="32237-392">C4</span></span> | <span data-ttu-id="32237-393">組み入れ</span><span class="sxs-lookup"><span data-stu-id="32237-393">Compound</span></span> | <span data-ttu-id="32237-394">5</span><span class="sxs-lookup"><span data-stu-id="32237-394">5</span></span> | <span data-ttu-id="32237-395">10%</span><span class="sxs-lookup"><span data-stu-id="32237-395">10%</span></span> | <span data-ttu-id="32237-396">しきい値のみ</span><span class="sxs-lookup"><span data-stu-id="32237-396">Threshold only</span></span> | <span data-ttu-id="32237-397">すべての製品</span><span class="sxs-lookup"><span data-stu-id="32237-397">All products</span></span> |

<span data-ttu-id="32237-398">**手順 1:** 製品ごとに、**単純**、**数量**、または**組み合わせ**割引が存在する最も高い優先順位を決定します。</span><span class="sxs-lookup"><span data-stu-id="32237-398">**Step 1:** For each product, determine the highest priority where a **Simple**, **Quantity**, or **Mix and Match** discount exists.</span></span> <span data-ttu-id="32237-399">この場合、製品 1 の優先順位が 10、製品 2 が 10 の優先順位、製品 3 が 5 の優先順位です</span><span class="sxs-lookup"><span data-stu-id="32237-399">In this case, for prod1 it is priority 10, for prod2 it is priority 10, and for prod3 it is priority 5.</span></span>

<span data-ttu-id="32237-400">**手順 2:** 製品ごとに、個々の製品に適用される最大の優先順位で、割引同時実行が **排他** に設定された**単純**、**数量**、または**組み合わせ**割引を検索します。</span><span class="sxs-lookup"><span data-stu-id="32237-400">**Step 2:** For each product, find **Simple**, **Quantity**, or **Mix and Match** discounts, with discount concurrency as **Exclusive**, at the highest priority applicable to individual products.</span></span> <span data-ttu-id="32237-401">この場合、優先順位 10 の製品 1 と製品 2 には何もなく、優先順位 5 の製品 3 には何もありません。</span><span class="sxs-lookup"><span data-stu-id="32237-401">In this case, there are none for prod1 and prod2 at priority 10 and there are none for prod3 at priority 5.</span></span>

<span data-ttu-id="32237-402">**手順 3:** 製品ごとに、個々の製品に適用される最大の優先順位で、割引同時実行が **最良価格** および **組み入れ** に設定された**単純**、**数量**、または**組み合わせ**割引を検索します。</span><span class="sxs-lookup"><span data-stu-id="32237-402">**Step 3:** For each product, evaluate **Simple**, **Quantity**, or **Mix and Match** discounts, with discount concurrency as **Best price** and **Compound**, at the highest priority applicable to individual products.</span></span> <span data-ttu-id="32237-403">この後の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="32237-403">See the table below.</span></span>

> [!NOTE]
> <span data-ttu-id="32237-404">2 つのアスタリスク (\*\*) は、製品に適用される割引を示します。</span><span class="sxs-lookup"><span data-stu-id="32237-404">Two asterisks (\*\*) indicate the discount that gets applied to a product.</span></span>

| <span data-ttu-id="32237-405">トランザクションの数量</span><span class="sxs-lookup"><span data-stu-id="32237-405">Transaction quantity</span></span> | <span data-ttu-id="32237-406">品目</span><span class="sxs-lookup"><span data-stu-id="32237-406">Product</span></span> | <span data-ttu-id="32237-407">価額</span><span class="sxs-lookup"><span data-stu-id="32237-407">Price</span></span> | <span data-ttu-id="32237-408">優先順位 10 (C1)</span><span class="sxs-lookup"><span data-stu-id="32237-408">Priority 10 (C1)</span></span> | <span data-ttu-id="32237-409">優先順位 10 (C2)</span><span class="sxs-lookup"><span data-stu-id="32237-409">Priority 10 (C2)</span></span> | <span data-ttu-id="32237-410">優先順位 10 (BP1)</span><span class="sxs-lookup"><span data-stu-id="32237-410">Priority 10 (BP1)</span></span> | <span data-ttu-id="32237-411">小計</span><span class="sxs-lookup"><span data-stu-id="32237-411">Total</span></span> | <span data-ttu-id="32237-412">説明</span><span class="sxs-lookup"><span data-stu-id="32237-412">Explanation</span></span> |
|---|---|---|---|---|---|---|---|
| <span data-ttu-id="32237-413">1</span><span class="sxs-lookup"><span data-stu-id="32237-413">1</span></span> | <span data-ttu-id="32237-414">製品 1</span><span class="sxs-lookup"><span data-stu-id="32237-414">Prod1</span></span> | <span data-ttu-id="32237-415">10 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-415">$10</span></span> | <span data-ttu-id="32237-416">$1</span><span class="sxs-lookup"><span data-stu-id="32237-416">$1</span></span> | <span data-ttu-id="32237-417">$1</span><span class="sxs-lookup"><span data-stu-id="32237-417">$1</span></span> | <span data-ttu-id="32237-418">1.50 ドル\*\*</span><span class="sxs-lookup"><span data-stu-id="32237-418">$1.50\*\*</span></span> | <span data-ttu-id="32237-419">$10 – 1.50 = $8.50</span><span class="sxs-lookup"><span data-stu-id="32237-419">$10 – 1.50 = $8.50</span></span> | <span data-ttu-id="32237-420">組み入れ割引は、この割引同時実行管理モデルの割引の "最良価格" として扱われるため、組み入れ割引は結合されません。</span><span class="sxs-lookup"><span data-stu-id="32237-420">Because the compound discounts are treated as the "Best price" for discounts for this discount concurrency control model, the compound discounts will not combine.</span></span> <span data-ttu-id="32237-421">むしろ、すべて最適な割引と競合します。</span><span class="sxs-lookup"><span data-stu-id="32237-421">Rather they all compete for the best discount.</span></span> <span data-ttu-id="32237-422">BP1 は優先順位を最上位にするため、BP1 は 10 の優先順位で適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-422">Because BP1 gives the highest discount, BP1 gets applied at priority 10.</span></span> |
| <span data-ttu-id="32237-423">1</span><span class="sxs-lookup"><span data-stu-id="32237-423">1</span></span> | <span data-ttu-id="32237-424">製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-424">Prod2</span></span> | <span data-ttu-id="32237-425">20 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-425">$20</span></span> | <span data-ttu-id="32237-426">$1</span><span class="sxs-lookup"><span data-stu-id="32237-426">$1</span></span> | <span data-ttu-id="32237-427">2 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-427">$2</span></span> | <span data-ttu-id="32237-428">3 ドル\*\*</span><span class="sxs-lookup"><span data-stu-id="32237-428">$3\*\*</span></span> | <span data-ttu-id="32237-429">$20 – 3 = $17.00</span><span class="sxs-lookup"><span data-stu-id="32237-429">$20 – 3 = $17.00</span></span> | <span data-ttu-id="32237-430">上と同じ。</span><span class="sxs-lookup"><span data-stu-id="32237-430">Same as above.</span></span> <span data-ttu-id="32237-431">BP1 は優先順位を最上位にするため、BP1 は 10 の優先順位で適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-431">Because BP1 gives the highest discount, BP1 gets applied at priority 10.</span></span> |
| <span data-ttu-id="32237-432">1</span><span class="sxs-lookup"><span data-stu-id="32237-432">1</span></span> | <span data-ttu-id="32237-433">製品 3</span><span class="sxs-lookup"><span data-stu-id="32237-433">Prod3</span></span> | <span data-ttu-id="32237-434">10 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-434">$10</span></span> | | | | <span data-ttu-id="32237-435">10 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-435">$10</span></span> | <span data-ttu-id="32237-436">10 の優先順位では割引が適用されません。</span><span class="sxs-lookup"><span data-stu-id="32237-436">No discounts applicable at priority 10.</span></span> |

<span data-ttu-id="32237-437">**手順 4:** 製品ごとに、**単純**、**数量**、または**組み合わせ**割引が存在する次に高い優先順位を決定します。</span><span class="sxs-lookup"><span data-stu-id="32237-437">**Step 4:** For each product, determine the next highest priority where a **Simple**, **Quantity**, or **Mix and Match** discount exists.</span></span> <span data-ttu-id="32237-438">この場合では、3 つの製品すべてで優先順位が 5 です。</span><span class="sxs-lookup"><span data-stu-id="32237-438">In this case, it is priority 5 for all three products.</span></span>

<span data-ttu-id="32237-439">**手順 5:** 優先順位 5 で、割引同時実行モードが**排他**に設定されている**単純**、**数量**、または**組み合わせ**割引を検索します。</span><span class="sxs-lookup"><span data-stu-id="32237-439">**Step 5:** At priority 5, find **Simple**, **Quantity**, or **Mix and Match** discounts with discount concurrency mode as **Exclusive**.</span></span> <span data-ttu-id="32237-440">この場合は、何もありません。</span><span class="sxs-lookup"><span data-stu-id="32237-440">In this case, none.</span></span>

> [!NOTE]
> <span data-ttu-id="32237-441">排他割引が 5 の優先順位に存在していた場合、排他割引は、それより高い優先順位で適用された他の割引と共存することができないため、無視されました。</span><span class="sxs-lookup"><span data-stu-id="32237-441">If an exclusive discount existed at priority 5, then it would have been ignored as exclusive discounts cannot co-exist with other discounts which have been applied at a higher priority</span></span>

<span data-ttu-id="32237-442">**手順 6:** 優先順位 5 で、**単純**、**数量**、または**組み合わせ**割引を評価します。</span><span class="sxs-lookup"><span data-stu-id="32237-442">**Step 6:** At priority 5, evaluate **Simple**, **Quantity**, or **Mix and Match** discounts.</span></span> <span data-ttu-id="32237-443">次の表に、これを示します。</span><span class="sxs-lookup"><span data-stu-id="32237-443">The following table illustrates this.</span></span>

| <span data-ttu-id="32237-444">トランザクションの数量</span><span class="sxs-lookup"><span data-stu-id="32237-444">Transaction quantity</span></span> | <span data-ttu-id="32237-445">品目</span><span class="sxs-lookup"><span data-stu-id="32237-445">Product</span></span> | <span data-ttu-id="32237-446">割引価格</span><span class="sxs-lookup"><span data-stu-id="32237-446">Discounted Price</span></span> | <span data-ttu-id="32237-447">優先順位 5 (C3)</span><span class="sxs-lookup"><span data-stu-id="32237-447">Priority 5 (C3)</span></span> | <span data-ttu-id="32237-448">優先順位 5 (BP2)</span><span class="sxs-lookup"><span data-stu-id="32237-448">Priority 5 (BP2)</span></span> | <span data-ttu-id="32237-449">小計</span><span class="sxs-lookup"><span data-stu-id="32237-449">Total</span></span> | <span data-ttu-id="32237-450">説明</span><span class="sxs-lookup"><span data-stu-id="32237-450">Explanation</span></span> |
|---|---|---|---|---|---|---|
| <span data-ttu-id="32237-451">1</span><span class="sxs-lookup"><span data-stu-id="32237-451">1</span></span> | <span data-ttu-id="32237-452">製品 1</span><span class="sxs-lookup"><span data-stu-id="32237-452">Prod1</span></span> | <span data-ttu-id="32237-453">8.50 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-453">$8.50</span></span> | <span data-ttu-id="32237-454">2.13 ドル\*\*</span><span class="sxs-lookup"><span data-stu-id="32237-454">$2.13\*\*</span></span> | <span data-ttu-id="32237-455">1.7 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-455">$1.7</span></span> | <span data-ttu-id="32237-456">$8.50 – 2.13 = $6.37</span><span class="sxs-lookup"><span data-stu-id="32237-456">$8.50 – 2.13 = $6.37</span></span> | <span data-ttu-id="32237-457">優先順位間で割引が組み入れられるため、優先順位が 5 の割引は、優先順位 10 で適用された割引で組み入れられます。</span><span class="sxs-lookup"><span data-stu-id="32237-457">Because the discounts across priorities are compounded, the discounts at priority 5 are compounded on the discounts applied at priority 10.</span></span> <span data-ttu-id="32237-458">C3 は優先順位を最上位にするため、C3 は 5 の優先順位で適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-458">C3 gives the highest discount so C3 gets applied at priority 5.</span></span> |
| <span data-ttu-id="32237-459">1</span><span class="sxs-lookup"><span data-stu-id="32237-459">1</span></span> | <span data-ttu-id="32237-460">製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-460">Prod2</span></span> | <span data-ttu-id="32237-461">17 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-461">$17</span></span> | <span data-ttu-id="32237-462">4.25 ドル\*\*</span><span class="sxs-lookup"><span data-stu-id="32237-462">$4.25\*\*</span></span> | <span data-ttu-id="32237-463">3.40 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-463">$3.40</span></span> | <span data-ttu-id="32237-464">$17.00 – 4.25 = $12.75</span><span class="sxs-lookup"><span data-stu-id="32237-464">$17.00 – 4.25 = $12.75</span></span> | <span data-ttu-id="32237-465">上と同じ。</span><span class="sxs-lookup"><span data-stu-id="32237-465">Same as above.</span></span> <span data-ttu-id="32237-466">C3 は優先順位を最上位にするため、C3 は 5 の優先順位で適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-466">Because C3 gives the highest discount, C3 gets applied at priority 5.</span></span> |
| <span data-ttu-id="32237-467">1</span><span class="sxs-lookup"><span data-stu-id="32237-467">1</span></span> | <span data-ttu-id="32237-468">製品 3</span><span class="sxs-lookup"><span data-stu-id="32237-468">Prod3</span></span> | <span data-ttu-id="32237-469">10 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-469">$10</span></span> | <span data-ttu-id="32237-470">2.5 ドル\*\*</span><span class="sxs-lookup"><span data-stu-id="32237-470">$2.5\*\*</span></span> | <span data-ttu-id="32237-471">2.0 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-471">$2.0</span></span> | <span data-ttu-id="32237-472">$10 – 2.5 = $7.5</span><span class="sxs-lookup"><span data-stu-id="32237-472">$10 – 2.5 = $7.5</span></span> | <span data-ttu-id="32237-473">上と同じ。</span><span class="sxs-lookup"><span data-stu-id="32237-473">Same as above.</span></span> <span data-ttu-id="32237-474">C3 は優先順位を最上位にするため、C3 は 5 の優先順位で適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-474">Because C3 gives the highest discount, C3 gets applied at priority 5.</span></span> |

<span data-ttu-id="32237-475">**手順 7:** **しきい値**割引を評価します。</span><span class="sxs-lookup"><span data-stu-id="32237-475">**Step 7:** Evaluate **Threshold** discounts.</span></span>

| <span data-ttu-id="32237-476">トランザクションの数量</span><span class="sxs-lookup"><span data-stu-id="32237-476">Transaction quantity</span></span> | <span data-ttu-id="32237-477">品目</span><span class="sxs-lookup"><span data-stu-id="32237-477">Product</span></span> | <span data-ttu-id="32237-478">優先順位 10 で適用された割引</span><span class="sxs-lookup"><span data-stu-id="32237-478">Discount applied at priority 10</span></span> | <span data-ttu-id="32237-479">優先順位 5 で適用された割引</span><span class="sxs-lookup"><span data-stu-id="32237-479">Discount applied at priority 5</span></span> | <span data-ttu-id="32237-480">割引価格</span><span class="sxs-lookup"><span data-stu-id="32237-480">Discounted price</span></span> | <span data-ttu-id="32237-481">優先順位 5 (C4)</span><span class="sxs-lookup"><span data-stu-id="32237-481">Priority 5 (C4)</span></span> | <span data-ttu-id="32237-482">未払金額</span><span class="sxs-lookup"><span data-stu-id="32237-482">Amount due</span></span> | <span data-ttu-id="32237-483">説明</span><span class="sxs-lookup"><span data-stu-id="32237-483">Explanation</span></span> |
|---|---|---|---|---|---|---|---|
| <span data-ttu-id="32237-484">1</span><span class="sxs-lookup"><span data-stu-id="32237-484">1</span></span> | <span data-ttu-id="32237-485">製品 1</span><span class="sxs-lookup"><span data-stu-id="32237-485">Prod1</span></span> | <span data-ttu-id="32237-486">BP1</span><span class="sxs-lookup"><span data-stu-id="32237-486">BP1</span></span> | <span data-ttu-id="32237-487">C3</span><span class="sxs-lookup"><span data-stu-id="32237-487">C3</span></span> | <span data-ttu-id="32237-488">6.37 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-488">$6.37</span></span> | <span data-ttu-id="32237-489">(NA)</span><span class="sxs-lookup"><span data-stu-id="32237-489">(NA)</span></span> | <span data-ttu-id="32237-490">6.37 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-490">$6.37</span></span> | <span data-ttu-id="32237-491">しきい値割引の場合、5 の優先順位は、この製品に適用される最上位の優先順位です。</span><span class="sxs-lookup"><span data-stu-id="32237-491">For Threshold discounts, Priority 5 is highest applicable priority for this product.</span></span> <span data-ttu-id="32237-492">優先順位 5 のしきい値割引は、優先順位 5 で適用されるその他の割引がない場合にのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="32237-492">But the threshold discount at priority 5 will only get applied if there is no other discount applied at the priority 5.</span></span> <span data-ttu-id="32237-493">これは、最良価格および組み入れ割引の両方が "最良価格" として扱われ、この割引同時実行管理では優先順位ごとに 1 つの割引のみ許容されるためです。</span><span class="sxs-lookup"><span data-stu-id="32237-493">This is because both best price and compound discounts are treated as "Best price" and only one discount per priority is allowed with this discount concurrency control.</span></span> <span data-ttu-id="32237-494">そのため、しきい値割引は無視されます。</span><span class="sxs-lookup"><span data-stu-id="32237-494">So, the threshold discount is ignored.</span></span> |
| <span data-ttu-id="32237-495">1</span><span class="sxs-lookup"><span data-stu-id="32237-495">1</span></span> | <span data-ttu-id="32237-496">製品 2</span><span class="sxs-lookup"><span data-stu-id="32237-496">Prod2</span></span> | <span data-ttu-id="32237-497">BP1</span><span class="sxs-lookup"><span data-stu-id="32237-497">BP1</span></span> | <span data-ttu-id="32237-498">C3</span><span class="sxs-lookup"><span data-stu-id="32237-498">C3</span></span> | <span data-ttu-id="32237-499">12.75 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-499">$12.75</span></span> | <span data-ttu-id="32237-500">(NA)</span><span class="sxs-lookup"><span data-stu-id="32237-500">(NA)</span></span> | <span data-ttu-id="32237-501">12.75 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-501">$12.75</span></span> | <span data-ttu-id="32237-502">上と同じ</span><span class="sxs-lookup"><span data-stu-id="32237-502">Same as above</span></span> |
| <span data-ttu-id="32237-503">1</span><span class="sxs-lookup"><span data-stu-id="32237-503">1</span></span> | <span data-ttu-id="32237-504">製品 3</span><span class="sxs-lookup"><span data-stu-id="32237-504">Prod3</span></span> | | <span data-ttu-id="32237-505">C3</span><span class="sxs-lookup"><span data-stu-id="32237-505">C3</span></span> | <span data-ttu-id="32237-506">7.5 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-506">$7.5</span></span> | <span data-ttu-id="32237-507">(NA)</span><span class="sxs-lookup"><span data-stu-id="32237-507">(NA)</span></span> | <span data-ttu-id="32237-508">7.5 ドル</span><span class="sxs-lookup"><span data-stu-id="32237-508">$7.5</span></span> | <span data-ttu-id="32237-509">上と同じ</span><span class="sxs-lookup"><span data-stu-id="32237-509">Same as above</span></span> |

<span data-ttu-id="32237-510">最終合計金額は、製品 1 が 6.37、製品 2 が 12.75、製品 3 は 7.5 です。</span><span class="sxs-lookup"><span data-stu-id="32237-510">The final amount due for prod1 is 6.37, Prod 2 is 12.75, and Prod 3 is 7.5.</span></span>

> [!NOTE]
> <span data-ttu-id="32237-511">同じ割引設定の場合、選択された割引同時実行管理モデルによって結果は大幅に異なります。</span><span class="sxs-lookup"><span data-stu-id="32237-511">For the same discount setting, the results vastly differ depending on which discount concurrency control model is selected.</span></span>
