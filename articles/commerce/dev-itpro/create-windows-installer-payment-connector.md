---
title: 支払コネクタ用の Windows インストーラーの作成
description: このトピックでは、支払コネクタの Windows インストーラーを作成する方法を説明します。
author: sericks007
manager: AnnBe
ms.date: 05/07/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Developer
ms.reviewer: rhaertle
ms.search.scope: Operations, Retail
ms.custom: 141573
ms.assetid: 045bb979-989f-4f72-9eb1-6b963680b65e
ms.search.region: Global
ms.author: yabinl
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: 1bd2673b9ceb34e46ad1049c743df2ebdc1175f6
ms.sourcegitcommit: 81a647904dd305c4be2e4b683689f128548a872d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/01/2020
ms.locfileid: "3004589"
---
# <a name="create-windows-installers-for-payment-connectors"></a><span data-ttu-id="3b398-103">支払コネクタ用の Windows インストーラーの作成</span><span class="sxs-lookup"><span data-stu-id="3b398-103">Create Windows installers for payment connectors</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="3b398-104">このトピックでは、支払コネクタの Windows インストーラーを作成する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="3b398-104">This topic describes how to create a Windows installer for a payment connector.</span></span> <span data-ttu-id="3b398-105">このトピックは、支払いコネクタをパッケージ化する方法を説明するために、MasterCard や Visa などの支払コネクタ プロバイダで作業する開発者を対象にしています。支払コネクタは特定顧客向けに作業する実装パートナーと共有できます。</span><span class="sxs-lookup"><span data-stu-id="3b398-105">This topic is targeted at developers working for or with a payment connector provider, for example, MasterCard or Visa, to describe how to package a payment connector, which can then be shared with implementation partners working for specific customers.</span></span> 

<span data-ttu-id="3b398-106">開発環境で支払いコネクタを実装してテストした後、生産の配置のため小売業者 IT プロフェッショナルに支払コネクタまたは付加価値再販業者 (VAR) を転送するインストーラーを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3b398-106">After you've implemented and tested your payment connector in the development environment, you must create an installer to transfer the payment connector to a retailer IT professional or a value-added reseller (VAR) for production deployment.</span></span> <span data-ttu-id="3b398-107">詳細については、[支払ターミナルのためのエンド・ツー・エンドの支払統合を作成する](end-to-end-payment-extension.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3b398-107">For more information, see [Create an end-to-end payment integration for a payment terminal](end-to-end-payment-extension.md).</span></span>

## <a name="windows-installer"></a><span data-ttu-id="3b398-108">Windows インストーラー</span><span class="sxs-lookup"><span data-stu-id="3b398-108">Windows Installer</span></span>
<span data-ttu-id="3b398-109">Microsoft Windows インストーラー (MSI) は、Microsoft Windows 用のアプリケーションおよび構成サービスです。</span><span class="sxs-lookup"><span data-stu-id="3b398-109">Microsoft Windows Installer (MSI) is the application and configuration service for Microsoft Windows.</span></span> <span data-ttu-id="3b398-110">支払コネクタを配置するために必要なすべてのファイルが含まれるインストーラーを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3b398-110">You must create an installer that contains all the files that are required in order to deploy a payment connector.</span></span> <span data-ttu-id="3b398-111">インストーラー自体は支払コネクタを配置しません。</span><span class="sxs-lookup"><span data-stu-id="3b398-111">The installer itself doesn't deploy the payment connector.</span></span> <span data-ttu-id="3b398-112">指定したフォルダーにコネクタ ファイルを解凍してコピーするだけです。</span><span class="sxs-lookup"><span data-stu-id="3b398-112">It just unzips and copies the connector files to a designated folder.</span></span> <span data-ttu-id="3b398-113">このトピックの次のセクションでは、そのフォルダーの内容を定義します。</span><span class="sxs-lookup"><span data-stu-id="3b398-113">The next section of this topic defines the contents of that folder.</span></span> <span data-ttu-id="3b398-114">インストールを続行する前に顧客がユーザー契約の受け入れを要求するように、インストーラーを構成することができます。</span><span class="sxs-lookup"><span data-stu-id="3b398-114">You can configure the installer to require that customers accept a user agreement before they can continue with the installation.</span></span> <span data-ttu-id="3b398-115">また、インストーラーに対して優先する形式を選択することができます。</span><span class="sxs-lookup"><span data-stu-id="3b398-115">You can also choose your preferred format for the installer.</span></span> <span data-ttu-id="3b398-116">たとえば、.exe ファイルを持つことができます。</span><span class="sxs-lookup"><span data-stu-id="3b398-116">For example, you can have an .exe file.</span></span>

## <a name="installer-contents"></a><span data-ttu-id="3b398-117">インストーラーの内容</span><span class="sxs-lookup"><span data-stu-id="3b398-117">Installer contents</span></span>
<span data-ttu-id="3b398-118">インストーラーは、次の構造で必要なファイルをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="3b398-118">The installer must install the required files in the following structure:</span></span>

> [!Note]
> <span data-ttu-id="3b398-119">これらのフォルダーは **...\RetailSDK\PaymentExternals** で検索することができます。</span><span class="sxs-lookup"><span data-stu-id="3b398-119">You can find these folders in **...\RetailSDK\PaymentExternals**.</span></span>

-   <span data-ttu-id="3b398-120">**PaymentExternals** – このフォルダには、最大 3 つのサブフォルダーが含まれます。</span><span class="sxs-lookup"><span data-stu-id="3b398-120">**PaymentExternals** – This folder contains up to three subfolders:</span></span>
    -   <span data-ttu-id="3b398-121">**IPaymentDevice Assemblies** – このフォルダーには、IPaymentDevice インターフェイスを実装するアセンブリとその依存アセンブリが含まれています。</span><span class="sxs-lookup"><span data-stu-id="3b398-121">**IPaymentDevice Assemblies** – This folder contains the assembly that implements the IPaymentDevice interface and its dependent assemblies.</span></span> <span data-ttu-id="3b398-122">これらのアセンブリは、VeriFone MX925 などの決済端末デバイスと通信するために、ハードウェア ステーションおよび Retail Modern POS で使用されます。</span><span class="sxs-lookup"><span data-stu-id="3b398-122">These assemblies are used in Hardware station and Retail Modern POS to communicate with payment terminal devices, such as VeriFone MX925.</span></span> <span data-ttu-id="3b398-123">支払のターミナル デバイスをサポートしていない場合は、このフォルダを省略できます。</span><span class="sxs-lookup"><span data-stu-id="3b398-123">If you don’t support a payment terminal device, you can omit this folder.</span></span>
    -   <span data-ttu-id="3b398-124">**IPaymentProcessor Assemblies** – このフォルダーには、IPaymentProcesor インターフェイスを実装するアセンブリとその依存アセンブリが含まれています。</span><span class="sxs-lookup"><span data-stu-id="3b398-124">**IPaymentProcessor Assemblies** – This folder contains the assembly that implements the IPaymentProcesor interface and its dependent assemblies.</span></span>
    -   <span data-ttu-id="3b398-125">**支払 Web ファイル** – このフォルダには、支払受け入れページを有効にするために必要なコールバック HTML/JavaScript/CSS ファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="3b398-125">**Payment Web Files** – This folder contains the callback HTML/JavaScript/CSS files that are required in order to enable the payment accepting page.</span></span> <span data-ttu-id="3b398-126">支払い受諾ウェブ アプリケーションが Microsoft の導入ガイドに従っている場合、これらの支払いウェブ ファイルは必須ではなく、このフォルダを省略することができます。</span><span class="sxs-lookup"><span data-stu-id="3b398-126">If the payment accepting web app follows the Microsoft implementation guide, these payment web files aren't required, and you can omit this folder.</span></span> <span data-ttu-id="3b398-127">場合によっては、支払受け入れページでは、コールバック ページをホスト アプリケーション サーバーに配置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3b398-127">In some cases, the payment accepting page requires that a callback page be deployed to the host application server.</span></span> <span data-ttu-id="3b398-128">その場合、コールバック ページのフォルダーを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="3b398-128">In that case, you must include a folder for the callback page:</span></span>
        -   <span data-ttu-id="3b398-129">**&lt;支払\_コネクタ\_名&gt;** - 異なる支払コネクタからのファイルの競合を避けるためには、支払い Web ファイルをサブフォルダ内に配置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3b398-129">**&lt;Payment\_Connector\_Name&gt;** – To avoid file conflicts from different payment connectors, the payment web files must be placed inside subfolders.</span></span> <span data-ttu-id="3b398-130">サブフォルダーの名前としてコネクタ名を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="3b398-130">We recommend that you use the connector name as the name of the subfolder.</span></span>
-   <span data-ttu-id="3b398-131">**その他のユーティリティ ツール** – 決済端末装置用の構成ユーティリティなど、他のユーティリティツールがある場合は、ここに含めることができます。</span><span class="sxs-lookup"><span data-stu-id="3b398-131">**Other utility tools** – If you have other utility tools, such as a configuration utility for a payment terminal device, you can include them here.</span></span> <span data-ttu-id="3b398-132">支払のターミナル デバイスをサポートしていない場合は、これらのフォルダを省略できます。</span><span class="sxs-lookup"><span data-stu-id="3b398-132">If you don’t support any payment terminal devices, you can omit these files.</span></span> <span data-ttu-id="3b398-133">ユーティリティー ツールは、支払のターミナル デバイスとのみ対話するように設計する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3b398-133">The utility tool should be designed to interact only with the payment terminal devices.</span></span> <span data-ttu-id="3b398-134">ハードウェア ステーションまたは Modern POS 内のものを操作しないようにします。</span><span class="sxs-lookup"><span data-stu-id="3b398-134">It should not interact with anything in Hardware station or Modern POS.</span></span> <span data-ttu-id="3b398-135">ハードウェア ステーションおよび Modern POS は支払コネクタ フォルダーからファイルと共にパッケージ化されます。</span><span class="sxs-lookup"><span data-stu-id="3b398-135">Hardware station and Modern POS will be packaged together with files from the Payment Connector folder.</span></span>
-   <span data-ttu-id="3b398-136">**README.txt** – このファイルには、フォルダの内容と、含まれているユーティリティの使用方法が記載されています。</span><span class="sxs-lookup"><span data-stu-id="3b398-136">**README.txt** – This file describes the contents of the folder and how to use any utilities that are included.</span></span> <span data-ttu-id="3b398-137">このファイルには、Cloud POS web.config および Modern POS package.appxmanifest ファイルに必要な支払いページの URL も含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="3b398-137">The file must also include the payment page URLs that are required in the Cloud POS web.config and Modern POS package.appxmanifest files.</span></span> <span data-ttu-id="3b398-138">支払ターミナル デバイスをサポートする場合、このファイルには、IPaymentDevice インターフェイスを実装しているアセンブリの名前も記述する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3b398-138">If you support any payment terminal devices, the file must also mention the name of the assembly that implements the IPaymentDevice interface.</span></span> <span data-ttu-id="3b398-139">アセンブリは、ハードウェア ステーション .config ファイルに登録されます。</span><span class="sxs-lookup"><span data-stu-id="3b398-139">The assembly will be registered in the Hardware Station .config file.</span></span>

<span data-ttu-id="3b398-140">次の図は、TestConnector という名前のコネクタのファイル構造を示しています。</span><span class="sxs-lookup"><span data-stu-id="3b398-140">The following illustration shows the file structure for a connector that is named TestConnector.</span></span> 

<span data-ttu-id="3b398-141">[![TestConnector のファイル構造](./media/paymentconnectorinstaller.png)](./media/paymentconnectorinstaller.png)</span><span class="sxs-lookup"><span data-stu-id="3b398-141">[![File structure for TestConnector](./media/paymentconnectorinstaller.png)](./media/paymentconnectorinstaller.png)</span></span>



