---
title: 顧客のレシートにプロセッサのクレジット カードのレシートを埋め込む
description: この記事では、決済処理業者からのクレジット カードのレシートを Microsoft Dynamics 365 Commerce の顧客の項目別取引レシートに埋め込む方法について説明します。
author: josaw1
ms.date: 12/03/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: IT Pro
ms.reviewer: josaw
ms.search.region: Global
ms.author: josaw
ms.search.validFrom: 04-31-2020
ms.dyn365.ops.version: AX 7.0.1
ms.custom: 141393
ms.assetid: e23e944c-15de-459d-bcc5-ea03615ebf4c
ms.search.industry: Retail
ms.openlocfilehash: 40d0fcea38da5f364df906e01effad6ac22e6ea9
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/12/2022
ms.locfileid: "9273535"
---
# <a name="embed-processor-credit-card-receipts-in-customer-receipts"></a>顧客のレシートにプロセッサのクレジット カードのレシートを埋め込む

[!include [banner](../includes/banner.md)]

この記事では、決済処理業者からのクレジット カードのレシートを Microsoft Dynamics 365 Commerce の顧客の項目別取引レシートに埋め込む方法について説明します。 この機能は、Commerce バージョン 10.0.8 リリース以降で使用できます。

Dynamics 365 Retail バージョン 10.0.7 およびそれ以前のバージョンでは、顧客のクレジット カードのレシートからいくつかの要素を顧客の項目別の取引レシートに埋め込むことができます。 ただし、決済処理業者から取得した実際のレシートを含めることはできません。 このソリューションは、すべての小売業者が受け入れられるものではありませんでした。なぜなら、顧客のクレジット カードのレシートに設定可能なレシート フィールドには、現地の法定要件で規定されているすべての詳細が含まれているとは限らなかったからです。

## <a name="key-terms"></a>重要な用語

| 相談 | Description |
|---|---|
| 顧客のレシート | 販売時点管理 (Point of Sale) でのキャッシュ アンド キャリー取引の際に発生するレシート。 |
| 顧客のクレジット カード レシート | クレジットカードの支払またはトランザクションで使用されるその他の電子支払のレコードとして印刷されるクレジットカード レシート。 |

## <a name="prerequisites"></a>必要条件

次の項目は、決済処理業者のクレジットカードのレシートを顧客のレシートに組み込むために必要です。

- 支払ソフトウェア開発キット (SDK) に準拠して実装される支払コネクタ
- プリンターとつながっている POS

## <a name="set-up-receipts"></a>レシートの設定

1. POSで、"レシートの形式" を検索して **レシートの形式** ページを開きます。
2. POS で使用する **顧客のクレジットカード レシート** 形式のレシートを選択します。 デモ データを使用している場合は、レシート形式に **3\_P** を選択し、**印刷の動作** フィールドを **印刷しない** に設定します。
3. **デザイナー** を設定し、レシート デザイナーを開きます。
4. レシートの形式からすべてのフィールドを削除します。

    レシートのセクションを編集するには、まず、レシート デザイナーの左ウィンドウの下部で、当該セクションを選択する必要があります。 次に、[選択済] セクションで目的のレシートの変数を選択します。 最後に、選択した変数を削除するには **、Alt + D** のキーボード ショートカットを使用します。

5. 左ウィンドウの下部にある **ヘッダー** セクションを選択し、**EFTメッセージ** のレシートの変数をヘッダーにドラッグします。

    ![カード所有者のレシートのヘッダーにおける EFT メッセージ変数。](media/Cardholders.png)

6. **保存** を選択します。
7. レシート デザイナーがまだ開いている場合は、左上隅にある **形式の選択** を選択してレシート セレクターを開きます。
8. レシート セレクターで、 POS で使用する **レシート** の形式を選択します。 デモ データを使用している場合は、レシート形式に **1\_p**  を選択します。
9. レシート デザイナーで、左ウィンドウの **下部** にあるフッター セクションを選択し、**カード支払/入金明細** のレシート変数をフッターにドラッグします。

    > [!NOTE]
    > クレジット カードのレシートが正しく印刷されない場合は、**カードの支払/入金詳細** フィールドを左側まで移動し、フィールドの長さを 55 文字以上に増やします。

    ![顧客のレシートのフッターにおけるカードの支払/入金詳細の変数。](media/customersreceipt.png)

10. **保存** を選択します。
11. **1090** 配送スケジュールを使用して、変更をPOSに同期します。
12. POS のシフトを閉じ、新しいシフトを開きます。
13. クレジットカード取引を実行して、決済処理業者のクレジット カード レシートが顧客のレシートに埋め込まれていることを確認します。

    ![クレジット カード情報が記載された顧客のレシート。](media/receipt_w_cc.png)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
