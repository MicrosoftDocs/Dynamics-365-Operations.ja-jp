---
title: オンライン ストア公開アーキテクチャ
description: このトピックには、コマース モジュールから Microsoft SharePoint 2013 製品内のオンライン ストアにチャネルおよびカタログを公開する方法を開発者およびシステム管理者が理解するための概念的情報が含まれています。 発行プロセスを理解することで、オンライン ストアの開発、管理、トラブルシューティングに役立ちます。
author: robinarh
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Developer
ms.reviewer: rhaertle
ms.custom: 72124
ms.assetid: c9ab2a6c-ea19-4c21-a2d9-35a8d516b48b
ms.search.region: Global
ms.author: meeram
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: 5ee14f4f18958130a9236b418488f9858dc4597e
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/05/2020
ms.locfileid: "4681490"
---
# <a name="online-store-publishing-architecture"></a>オンライン ストア公開アーキテクチャ

[!include [banner](../includes/banner.md)]

このトピックには、コマース モジュールから Microsoft SharePoint 2013 製品内のオンライン ストアにチャネルおよびカタログを公開する方法を開発者およびシステム管理者が理解するための概念的情報が含まれています。 発行プロセスを理解することで、オンライン ストアの開発、管理、トラブルシューティングに役立ちます。

<a name="publish-an-online-store-channel"></a>オンライン ストア チャネルの公開
-------------------------------------

コマース オンライン ストア チャネルを公開するとき、Microsoft Dynamics 365 Commerce と SharePoint 間でオンライン ストアの基本構造をレプリケートします。 **コマース** モジュールでオンライン ストア チャネルの基本構造を作成します。 オンライン ストア チャネルを公開する前に、以下の設定タスクを実行する必要があります。

1.  組織階層にオンライン ストアを追加します。
2.  オンライン ストアを作成し、プロパティをコンフィギュレーションします。
3.  サイトのカテゴリ階層をコンフィギュレーションします。

これらの手順を完了した後は、オンライン ストアに製品スキーマを公開する準備ができます。

1.  **オンライン ストア** ページからオンライン ストアを作成して公開します。 状態は、**ドラフト** から **処理中** に変更されました。
2.  Finances and Operations は、カテゴリ階層 (コマース階層) およびプロパティのスナップショットを取得します。
3.  Commerce Data Exchange: Async Server はコマース店舗データベース内のオンライン ストア、階層、およびプロパティについての情報を読み取り、Commerce Runtime (CRT) に情報を送信します。
4.  Async Server はチャネル データベースのテーブルを同期します。
5.  コマース公開ジョブは、CRT アプリケーション プログラミング インターフェイス (API) から実行され、オンライン ストアで作成したサイトの階層を作成します。
6.  Commerce Data Exchange: Real-time Service は、CRT API から公開ジョブ アクションの状態を受け取り、状態を公開します。 状態は、**公開済** または **エラー** のいずれかになります。

チャンネルを公開する特定の手順については、[オンライン ストアの設定](https://msdn.microsoft.com/jj682095) を参照してください。 チャンネルを公開した後は、カタログを公開できます。

## <a name="publish-an-online-store-catalog"></a>オンライン ストア カタログの公開
製品カタログを使用すると、オンライン ストアで提供する製品を識別できます。 カタログを作成するときは、製品が提供されるオンライン ストアを識別し、製品を追加し、販売促進の詳細の追加によって製品の提供を強化します。 カタログが承認された後、オンライン ストアで製品を使用できるようにカタログを公開します。 製品カタログを発行する前に、以下の設定タスクを実行する必要があります。

1.  製品を設定し、階層、品揃え、およびバリアントを構成します。
2.  製品カタログを設定し、属性グループおよびワークフローを構成します。

これらの手順を完了した後は、オンライン ストア カタログを公開する準備ができます。

1.  Finances and Operations は、コマース データベース内の製品テーブルを読み取ります。
2.  Async Server はチャネル データベースのすべての製品を同期します。
3.  CRT/パブリッシュ コネクターは、*一覧* を作成します。 一覧は、特定の時点におけるチャネルの製品のインスタンスです。 たとえば、「ジーンズ」という名前の製品があり、この製品には「赤」という名前のバリアントがあります。 この場合、システムは「赤いジーンズ」の一覧を作成します。
4.  システムは、リスティングに新しい属性が追加されたかどうかを判断します。 新しい属性が追加された場合 (例えば、一覧表示「赤いジーンズ」には、**テクスチャ** という名前の新しい属性が含まれ、この属性がチャンネル レベルで **組み込まれている** とマークされている場合)、システムではカスタム サイト内の列が作成されます。 また、リスト アイテムの新しいルールが作成され、「赤いジーンズ」リストの新しい行が作成され、SharePoint でプロセスが完了します。
5.  CRT では、一覧の公開状況を記録します。
6.  Async Server は、一覧の公開ステータスを他のすべての公開ステータスと同期します。 状態は、**公開済** または **エラー** のいずれかになります。

