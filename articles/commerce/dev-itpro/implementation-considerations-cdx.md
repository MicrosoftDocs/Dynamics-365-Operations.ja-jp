---
title: Commerce Data Exchange 実装ガイダンス
description: このトピックでは、実装のヒントや総合的なガイダンスを含む、Commerce Data Exchange の概要を示します。
author: jashanno
ms.date: 05/11/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailTerminalTable, RetailDevice
audience: IT Pro
ms.reviewer: sericks
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail
ms.author: jashanno
ms.search.validFrom: 2020-08-31
ms.dyn365.ops.version: 10.0.12
ms.openlocfilehash: 88a09c28477a36c5581956e4c2f82db3c54258c0
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/11/2021
ms.locfileid: "6022534"
---
# <a name="commerce-data-exchange-implementation-guidance"></a><span data-ttu-id="8753c-103">Commerce Data Exchange 実装ガイダンス</span><span class="sxs-lookup"><span data-stu-id="8753c-103">Commerce Data Exchange implementation guidance</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="8753c-104">このトピックは、Microsoft Dynamics 365 Commerce 環境に、データ同期 (Commerce Data Exchange、\[CDX\]) に関連する機能を実装するユーザーを対象としています。</span><span class="sxs-lookup"><span data-stu-id="8753c-104">This topic is intended for people who implement functionality that is related to data synchronization (Commerce Data Exchange, \[CDX\]) in a Microsoft Dynamics 365 Commerce environment.</span></span> <span data-ttu-id="8753c-105">ページ、設定、コンフィギュレーション、ベスト プラクティスなど、実装を計画する際に考慮すべき概要、実装のヒント、総合的なガイダンスを示します。</span><span class="sxs-lookup"><span data-stu-id="8753c-105">It gives an overview, implementation tips, and overall guidance that you should consider as you plan your implementation, in regard to pages, setup, configuration, best practices, and more.</span></span>

## <a name="overview"></a><span data-ttu-id="8753c-106">概要</span><span class="sxs-lookup"><span data-stu-id="8753c-106">Overview</span></span>

<span data-ttu-id="8753c-107">データの適切な構成と同期は、正しい実装とって非常に重要です。</span><span class="sxs-lookup"><span data-stu-id="8753c-107">Proper configuration and synchronization of data is crucial to a correct implementation.</span></span> <span data-ttu-id="8753c-108">ビジネス要件、IT インフラストラクチャ、および全体的な準備にかかわらず、データが正しく同期されていないと、環境全体が実質的に役に立たなくなります。</span><span class="sxs-lookup"><span data-stu-id="8753c-108">Regardless of business requirements, IT infrastructure, and overall preparedness, if data isn't correctly synchronized, the whole environment is effectively useless.</span></span> <span data-ttu-id="8753c-109">したがって、最優先事項は、完全な実装全体でデータをコンフィギュレーション、生成、同期、検証するために何が必要かを理解することです。</span><span class="sxs-lookup"><span data-stu-id="8753c-109">Therefore, a top priority is to understand what is required to configure, generate, synchronize, and verify data across the full implementation.</span></span> <span data-ttu-id="8753c-110">これは、Commerce Headquarters から Commerce Scale Unit を経由して、Modern POS (オフライン データベースの有無にかかわらず) やその他の店舗内コンポーネントを使用する従来型の店舗にまで及びます。</span><span class="sxs-lookup"><span data-stu-id="8753c-110">This goes from Commerce headquarters through the Commerce Scale Unit to the brick-and-mortar stores that use Modern POS (With or without an offline database) and other in-store components.</span></span> <span data-ttu-id="8753c-111">CDX は、データベース間でデータを複製および同期する Commerce の機能です。</span><span class="sxs-lookup"><span data-stu-id="8753c-111">CDX is the Commerce functionality that replicates and synchronizes data across databases.</span></span> <span data-ttu-id="8753c-112">ただし、CDX はフィルタリングも可能であるため、一般的なデータ レプリケーション機能とは異なります。</span><span class="sxs-lookup"><span data-stu-id="8753c-112">However, CDX differs from typical data replication functionality because it also allows for filtering.</span></span> <span data-ttu-id="8753c-113">したがって、CDX は、選択のために指定されたチャネルに固有のデータのみを生成したり、オフライン データベースから特定のテーブルをフィルター処理したり、使用されなくなったデータについて、期限切れの割引など、使用されなくなったデータのために期限切れレコードをフィルター処理することで、データ セットを最小限に抑えることができます。</span><span class="sxs-lookup"><span data-stu-id="8753c-113">Therefore, CDX helps minimize data sets by generating only data that is specific to the channels that were specified for selection, filtering specific tables from offline databases, and filtering expired records for data that is no longer used, such as expired discounts.</span></span>

<span data-ttu-id="8753c-114">このトピックに進む前に、チャネル (店舗)、レジスターとデバイス、および Modern POS オフライン データベースの概念を理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="8753c-114">Before you go through this topic, it's important that you understand the concepts of a channel (store), registers and devices, and the Modern POS offline database.</span></span> <span data-ttu-id="8753c-115">したがって、このトピックの最後にある 「デバイス管理実装ガイダンス」や「Commerce アーキテクチャの概要」などのリソースを確認することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8753c-115">Therefore, we recommend that you review some of the resources at the end of this topic, such as the Device management implementation guide and the overview of the Commerce architecture.</span></span>

### <a name="important-commerce-headquarters-pages"></a><span data-ttu-id="8753c-116">重要な Commerce Headquarters ページ</span><span class="sxs-lookup"><span data-stu-id="8753c-116">Important Commerce headquarters pages</span></span>

- <span data-ttu-id="8753c-117">**チャネル データベース** – このページを使用して、Commerce Scale Unit (クラウドと自己ホスト型の両方) で使用されるチャネル データベースと、Modern POS で使用されるオフライン データベースを作成、確認、および編集します。</span><span class="sxs-lookup"><span data-stu-id="8753c-117">**Channel database** – Use this page to create, review, and edit the channel databases that are used in Commerce Scale Units (both Cloud and Self-hosted) and the offline databases that are used with Modern POS.</span></span> <span data-ttu-id="8753c-118">ここで作成する各データベースは、単一の物理データベース (つまり、1 対 1 の \[1:1\] マッピングがあります) を参照します。</span><span class="sxs-lookup"><span data-stu-id="8753c-118">Each database that you create here refers to a single, physical database (in other words, there is a one-to-one \[1:1\] mapping).</span></span> <span data-ttu-id="8753c-119">チャネル データベースまたはオフライン データベースは、チャネル データベース グループに関連付ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="8753c-119">A channel database or offline database must be associated with a channel database group.</span></span> <span data-ttu-id="8753c-120">このページから、選択したチャネル データベースまたはオフライン データベースの Scheduler ジョブの完全同期を作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="8753c-120">From this page, you can also create full synchronizations of a scheduler job for a selected channel database or offline database.</span></span>
- <span data-ttu-id="8753c-121">**チャネル データベース グループ** – このページを使用して、チャネル データベース グループを作成、確認、および編集します。</span><span class="sxs-lookup"><span data-stu-id="8753c-121">**Channel database group** – Use this page to create, review, and edit channel database groups.</span></span> <span data-ttu-id="8753c-122">各グループは、1 つ以上のチャネルまたはオフライン データベースに関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="8753c-122">Each group is associated with one or more channel or offline databases.</span></span> <span data-ttu-id="8753c-123">データベース グループは、関連するすべてのチャネルおよびオフライン データベースによって必要とされ、CDX データの同期の一部として生成される必要があるすべての関連データを収集します。</span><span class="sxs-lookup"><span data-stu-id="8753c-123">The database group is responsible for gathering all the relevant data that is required by all the associated channel and offline databases, and that must be generated as part of CDX data synchronization.</span></span>
- <span data-ttu-id="8753c-124">**チャネル プロファイル** – このページを使用して、チャネル プロファイルを作成、確認、および編集します。</span><span class="sxs-lookup"><span data-stu-id="8753c-124">**Channel profile** – Use this page to create, review, and edit channel profiles.</span></span> <span data-ttu-id="8753c-125">各チャネル プロファイルは、チャネル内で必要なネットワークベースの通信に関連する URL が格納されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-125">Each channel profile stores the URLs that are relevant to the network-based communication that is required within a channel.</span></span> <span data-ttu-id="8753c-126">チャネル プロファイルには、通常、Retail Server URL と Cloud POS URL があります。</span><span class="sxs-lookup"><span data-stu-id="8753c-126">A channel profile typically has a Retail Server URL and a Cloud POS URL.</span></span> <span data-ttu-id="8753c-127">多くの場合、メディア サーバー ベース URL もあります。</span><span class="sxs-lookup"><span data-stu-id="8753c-127">Often, there is also a Media Server Base URL.</span></span> <span data-ttu-id="8753c-128">この URL は、POS、電子商取引、その他の Commerce チャネルで使用される画像のインターネット アドレス指定可能な場所です。</span><span class="sxs-lookup"><span data-stu-id="8753c-128">This URL is the internet addressable location of images that are used by the POS, E-Commerce, and other Commerce channels.</span></span> <span data-ttu-id="8753c-129">チャネル プロファイルは Commerce Scale Unit (クラウド) に対して自動的に生成されますが、Commerce Scale Unit (自己ホスト) のコンフィギュレーションおよびインストール手順の一部として手動で生成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8753c-129">Although a channel profile is automatically generated for a Commerce Scale Unit (Cloud), it must be manually generated as part of the configuration and installation steps for a Commerce Scale Unit (Self-hosted).</span></span>
- <span data-ttu-id="8753c-130">**オフライン プロファイル** – このページを使用して、オフライン プロファイルを作成、確認、および編集します。</span><span class="sxs-lookup"><span data-stu-id="8753c-130">**Offline profile** – Use this page to create, review, and edit offline profiles.</span></span> <span data-ttu-id="8753c-131">各オフライン プロファイルでは、オフライン モードに関連する設定をユーザーが構成できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-131">Each offline profile lets a user configure settings that are related to offline mode.</span></span> <span data-ttu-id="8753c-132">たとえば、ユーザーがサインインする前に手動でオフライン モードに切り替え、詳細なオフライン切り替えを有効にして、オフライン同期を一時停止できるようにする設定を構成できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-132">For example, you can configure settings that let users manually switch to offline mode before they sign in, enable advanced offline switching, and pause offline synchronization.</span></span> <span data-ttu-id="8753c-133">これらの設定については、このトピックの後半と、このトピックの最後に一覧表示されている関連トピックで説明します。</span><span class="sxs-lookup"><span data-stu-id="8753c-133">These settings are discussed later in this topic and also in the related topics that are listed at the end of this topic.</span></span>
- <span data-ttu-id="8753c-134">**Commerce チャネル スキーマ** – このページを使用して、チャネル スキーマを作成、確認、および編集します。</span><span class="sxs-lookup"><span data-stu-id="8753c-134">**Commerce channel schema** – Use this page to create, review, and edit channel schemas.</span></span> <span data-ttu-id="8753c-135">既定では、**AX7** という名前の 1 つのスキーマが既に作成され、使用可能になっています。</span><span class="sxs-lookup"><span data-stu-id="8753c-135">By default, one schema that is named **AX7** is already created and available.</span></span> <span data-ttu-id="8753c-136">チャネル スキーマは、Commerce データの Commerce Headquarters データベースの読み取り方法を定義するために必要です。</span><span class="sxs-lookup"><span data-stu-id="8753c-136">The channel schema is required to define how the Commerce headquarters database should be read for Commerce data.</span></span> <span data-ttu-id="8753c-137">また、オフライン データベースへのデータ同期から顧客関連データを除外する設定も含まれています。</span><span class="sxs-lookup"><span data-stu-id="8753c-137">It also includes a setting that lets you exclude customer-related data from data synchronization to offline databases.</span></span> <span data-ttu-id="8753c-138">この設定については、このトピックの後半と、このトピックの最後に一覧表示されている関連トピックで説明します。</span><span class="sxs-lookup"><span data-stu-id="8753c-138">This setting is discussed later in this topic and also in the related topics that are listed at the end of this topic.</span></span>
- <span data-ttu-id="8753c-139">**配分スケジュール** – このページを使用して、配分スケジュール ジョブを作成、確認、および編集します。</span><span class="sxs-lookup"><span data-stu-id="8753c-139">**Distribution schedule** – Use this page create, review, and edit distribution schedule jobs.</span></span> <span data-ttu-id="8753c-140">これらのスケジュール ジョブは、関連する Scheduler ジョブを実行するチャネル データベース グループを決定します (この一覧の次の項目を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="8753c-140">These schedule jobs determine which channel database groups run the associated scheduler job (see the next item in this list).</span></span> <span data-ttu-id="8753c-141">スケジュール ジョブは有効としてマークでき、単方向のデータが関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="8753c-141">A schedule job can be marked as active, and a single direction of data is associated with it.</span></span> <span data-ttu-id="8753c-142">通常、データがチャネルに送信されるように、方向は **ダウンロード** です。</span><span class="sxs-lookup"><span data-stu-id="8753c-142">Typically, the direction is **Download**, so that data is sent down to the channels.</span></span> <span data-ttu-id="8753c-143">既定で、すべての Commerce 関連ジョブが既に存在しており、生成された Commerce Scale Unit (クラウド) で使用する準備ができています。</span><span class="sxs-lookup"><span data-stu-id="8753c-143">By default, all Commerce-related jobs already exist and are ready to be used with any generated Commerce Scale unit (Cloud).</span></span> <span data-ttu-id="8753c-144">このページから、選択したスケジュール ジョブのデルタ同期を作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="8753c-144">From this page, you can also create delta synchronizations for a selected schedule job.</span></span>
- <span data-ttu-id="8753c-145">**Scheduler ジョブ** – このページを使用して、スケジュール ジョブから選択したジョブを作成、確認、および編集します。</span><span class="sxs-lookup"><span data-stu-id="8753c-145">**Scheduler job** – Use this page to create, review, and edit a selected job from the schedule job.</span></span> <span data-ttu-id="8753c-146">このジョブには、関連付けられている一連のサブジョブがあります。</span><span class="sxs-lookup"><span data-stu-id="8753c-146">This job has a series of associated subjobs.</span></span> <span data-ttu-id="8753c-147">また、チャネル スキーマ (通常は、既定の **AX7** スキーマ) にも関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="8753c-147">It's also associated with a channel schema (typically, the default **AX7** schema).</span></span> <span data-ttu-id="8753c-148">オフライン データベースへの同期からジョブを除外できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-148">A job can be excluded from synchronization to offline databases.</span></span>
- <span data-ttu-id="8753c-149">**Scheduler サブジョブ** – このページを使用して、サブジョブを作成、確認、および編集します。</span><span class="sxs-lookup"><span data-stu-id="8753c-149">**Scheduler subjob** – Use this page to create, review, and edit a subjob.</span></span> <span data-ttu-id="8753c-150">**Scheduler ジョブ** ページに示すように、サブジョブは 1 つ以上のジョブに関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="8753c-150">A subjob is associated with one or more jobs, as shown on the **Scheduler job** page.</span></span> <span data-ttu-id="8753c-151">サブジョブは、Commerce Headquarters データベースの 1 つのテーブルに関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="8753c-151">A subjob is associated with a single table in the Commerce headquarters database.</span></span> <span data-ttu-id="8753c-152">チャネル フィールド マッピングが表示され、データベース テーブルで使用されるすべての関連フィールドが一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-152">It shows the channel field mapping, which lists all the related fields that are used in the database table.</span></span>
- <span data-ttu-id="8753c-153">**ダウンロード セッション** と **アップロード セッション** – これらのページを使用して、前述のページで生成されたデータ パッケージを通で作成された、ダウンロードまたはアップロード セッションを確認および編集します。</span><span class="sxs-lookup"><span data-stu-id="8753c-153">**Download sessions** and **Upload sessions** – Use these pages to review and edit download or upload sessions that were created through the data packages that were generated via the previously described pages.</span></span> <span data-ttu-id="8753c-154">これらのページには、同期が必要なデータの行数、データが使用可能になった日時、同期された日時が表示されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-154">These pages show how many rows of data must be synced, when the data was made available, and when it was synced.</span></span> <span data-ttu-id="8753c-155">また、データ パッケージの全体的なサイズも表示されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-155">They also show the overall size of the data package.</span></span> <span data-ttu-id="8753c-156">これらのページを使用して、ある程度データ パッケージの管理とトラブルシューティングを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="8753c-156">These pages let you manage and troubleshoot data packages to some extent.</span></span> <span data-ttu-id="8753c-157">たとえば、発生したエラーを表示したり、問題の原因となっているジョブをキャンセルまたは削除したりできます。</span><span class="sxs-lookup"><span data-stu-id="8753c-157">For example, you can view any errors that have occurred, and cancel or delete any jobs that are causing an issue.</span></span> <span data-ttu-id="8753c-158">詳細については、[Commerce Data Exchange ベスト プラクティス](CDX-Best-Practices.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8753c-158">For more information, see [Commerce Data Exchange best practices](CDX-Best-Practices.md).</span></span>

### <a name="data-synchronization-overview"></a><span data-ttu-id="8753c-159">データ同期の概要</span><span class="sxs-lookup"><span data-stu-id="8753c-159">Data synchronization overview</span></span>

<span data-ttu-id="8753c-160">Scheduler ジョブが実行されると、チャネル データベース グループは、累積サブジョブに一覧表示されているフィールドから、それ自身に関連付けられているすべてのチャネルまたはオフライン データベースに関連するデータを選択します。</span><span class="sxs-lookup"><span data-stu-id="8753c-160">When a scheduler job is run, the channel database group selects, from the fields that are listed in the accumulated subjobs, the relevant data for all channel or offline databases that are associated with itself.</span></span> <span data-ttu-id="8753c-161">このデータ選択の結果は、データ パッケージです。</span><span class="sxs-lookup"><span data-stu-id="8753c-161">The result of this data selection is a data package.</span></span> <span data-ttu-id="8753c-162">データ パッケージは、1 つまたは複数のファイルをまとめて圧縮したもので、1 つ以上の出力先データベースに適用する必要があるデータが含まれています。</span><span class="sxs-lookup"><span data-stu-id="8753c-162">A data package is a file or multiple files that are zipped together, and contains data that must be applied to one or more destination databases.</span></span> <span data-ttu-id="8753c-163">このデータは、以前に選択されたすべてのデータか、通常は選択されたデータのデルタのいずれかです。</span><span class="sxs-lookup"><span data-stu-id="8753c-163">This data is either all previously selected data or, typically, a selected delta of data.</span></span> <span data-ttu-id="8753c-164">出力先データベースには、チャネル データベースまたはオフライン データベースのいずれかを指定できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-164">The destination databases can be either channel databases or offline databases.</span></span>

<span data-ttu-id="8753c-165">データが生成され、特定の方向 (ダウンロードまたはアップロード) にフローします。</span><span class="sxs-lookup"><span data-stu-id="8753c-165">Data is generated and flows in a specific direction (either download or upload).</span></span> <span data-ttu-id="8753c-166">タイミングを設定し、同期するデータを選択する最善の方法を理解するには、Commerce Headquarters のさまざまなページがどのように使用され、データ生成がどのように行われるかを理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="8753c-166">To understand how best to configure the timing and select data for synchronization, it's important that you understand how the various pages in Commerce headquarters are used and how data generation occurs.</span></span> <span data-ttu-id="8753c-167">データの生成が正常に行われると、パフォーマンスが向上し、Commerce Headquarters の使用率が低下します。</span><span class="sxs-lookup"><span data-stu-id="8753c-167">When data generation is done correctly, it helps increase performance and reduce Commerce headquarters utilization.</span></span>

<span data-ttu-id="8753c-168">次の図は、Commerce Headquarters のさまざまなページと、それらが互いにどのように関連しているかを示しています。</span><span class="sxs-lookup"><span data-stu-id="8753c-168">The following illustration shows the various pages in Commerce headquarters and how they are related to each other.</span></span> <span data-ttu-id="8753c-169">(これらのページの説明については、前のセクションを参照してください。) CDX データの生成は、これらすべてのページで完全に構成されている場合にのみ発生します。</span><span class="sxs-lookup"><span data-stu-id="8753c-169">(For descriptions of these pages, see the previous section.) CDX data generation can occur only if it's fully configured across all these pages.</span></span> <span data-ttu-id="8753c-170">データは、ダウンロードまたはアップロードできます。</span><span class="sxs-lookup"><span data-stu-id="8753c-170">Data can be downloaded or uploaded.</span></span> <span data-ttu-id="8753c-171">データ同期の状態は、Headquarters の 2 つの異なるページ: ダウンロード セッションおよびアップロード セッションに表示されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-171">The data synchronization status is viewable on two different pages in Headquarters: Download sessions and Upload sessions.</span></span> <span data-ttu-id="8753c-172">CDX データの生成は、Headquarters を通じて行われ、同期 (ダウンロード) されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-172">CDX data generation occurs through Headquarters and is synchronized down (download).</span></span> <span data-ttu-id="8753c-173">オフライン中に生成される Modern Point of Sale (POS) トランザクション データは、データを同期 (アップロード) する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8753c-173">Modern Point of Sale (POS) transactional data generated while offline requires the data to be synchronized up (upload).</span></span>

![Commerce Data Exchange 関連マップ](./media/CommerceDataExchange-AssociationMap.png)

<span data-ttu-id="8753c-175">次の図は、ダウンロードとアップロードのデータ フローを示しています。</span><span class="sxs-lookup"><span data-stu-id="8753c-175">The following illustration shows the data flows for download and upload.</span></span> <span data-ttu-id="8753c-176">CDX を使用して生成されたデータ パッケージは下向にフローします。</span><span class="sxs-lookup"><span data-stu-id="8753c-176">Data packages that are generated through CDX flow downward.</span></span> <span data-ttu-id="8753c-177">生成されたデータ パッケージは、設定されたチャネル データベース グループに基づいて、Commerce Scale Unit と Modern POS オフライン データベースに適用できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-177">A generated data package can apply to the Commerce Scale Unit and to Modern POS offline databases, based on the channel database groups that are configured.</span></span> <span data-ttu-id="8753c-178">トランザクション データは、Modern POS オフライン データベースから Commerce Scale Unit のチャネル データベースに上向きにフローします。</span><span class="sxs-lookup"><span data-stu-id="8753c-178">Transactional data flows upward from the Modern POS offline databases to the Commerce Scale Unit channel database.</span></span>  <span data-ttu-id="8753c-179">チャネル データベースに格納されたすべてのトランザクション データは、Headquarters データベースにアップロードされます。</span><span class="sxs-lookup"><span data-stu-id="8753c-179">All transactional data stores in the channel database is then uploaded to the Headquarters database.</span></span>

![データ フローのダウンロードとアップロード](./media/CommerceArchitecture-DataSynchronization.jpg)

### <a name="overview-of-package-management"></a><span data-ttu-id="8753c-181">Package Management の概要</span><span class="sxs-lookup"><span data-stu-id="8753c-181">Overview of package management</span></span>

<span data-ttu-id="8753c-182">パッケージが作成されると、処理されて、Azure Storage に送信され、チャネルまたはオフライン データベースにダウンロードする準備が整います。</span><span class="sxs-lookup"><span data-stu-id="8753c-182">As packages are created, they are processed and sent to Azure storage, where they are ready for download to a channel or offline database.</span></span> <span data-ttu-id="8753c-183">作成から完全なアプリケーションまでのすべての段階で、これらのパッケージは、**ダウンロード セッション** ページで詳細な一覧として表示できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-183">During all stages from creation through full application, these packages can be viewed as a detailed list on the **Download sessions** page.</span></span> <span data-ttu-id="8753c-184">同様に、トランザクションがアップロードされると、**アップロード セッション** ページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-184">In a similar way, as transactions are uploaded, there is an **Upload sessions** page.</span></span> <span data-ttu-id="8753c-185">これらのページでは、さまざまな段階において、ある程度までパッケージを管理できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-185">On these pages, you can manage the packages to some extent during the various stages.</span></span>

<span data-ttu-id="8753c-186">一般に、パッケージは自動的に再試行して、処理を行います。</span><span class="sxs-lookup"><span data-stu-id="8753c-186">In general, packages automatically retry and take care of themselves.</span></span> <span data-ttu-id="8753c-187">ただし、さまざまなシナリオによって、何らかの原因でパッケージが停止し、無限に再試行を繰り返しますが、成功または完全に失敗することはありません。</span><span class="sxs-lookup"><span data-stu-id="8753c-187">However, various scenarios can cause a package to become stuck in some way, so that it endlessly retries itself, but without success or outright failure.</span></span> <span data-ttu-id="8753c-188">これらのシナリオでパッケージ アプリケーション プロセスのトラブルシューティングを行う際には、ジョブを削除するか、手動で再試行する機能が役立ちます。</span><span class="sxs-lookup"><span data-stu-id="8753c-188">When you troubleshoot the package application process in these scenarios, the ability to delete or manually retry jobs can be valuable.</span></span>

### <a name="important-cdx-related-features"></a><span data-ttu-id="8753c-189">CDX 関連の重要な機能</span><span class="sxs-lookup"><span data-stu-id="8753c-189">Important CDX-related features</span></span>

<span data-ttu-id="8753c-190">これらの機能すべては、バージョン 10.0.12 以降 で利用できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-190">All these features are available in version 10.0.12 and later.</span></span>

| <span data-ttu-id="8753c-191">機能名</span><span class="sxs-lookup"><span data-stu-id="8753c-191">Feature name</span></span> | <span data-ttu-id="8753c-192">説明</span><span class="sxs-lookup"><span data-stu-id="8753c-192">Description</span></span> |
|--------------|-------------|
| <span data-ttu-id="8753c-193">オフラインの詳細</span><span class="sxs-lookup"><span data-stu-id="8753c-193">Advanced offline</span></span> | <span data-ttu-id="8753c-194">この機能は、オフライン プロファイルの一連の設定で構成されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-194">This feature consists of a series of settings in the offline profile.</span></span> <span data-ttu-id="8753c-195">これらの設定により、追加のオフライン切り替えシナリオを使用できるようになり、ユーザーが POS にサインインする前にオフライン モードに切り替える機能を提供し、強化された Commerce Headquarters の可用性テストが可能になるため、より頻繁にオフライン モードに切り替え、より簡単にオンライン状態に簡単に戻すことができます。</span><span class="sxs-lookup"><span data-stu-id="8753c-195">These settings make additional offline switching scenarios available, give users the ability to switch to offline mode before they sign in to the POS, and allow for enhanced Commerce headquarters availability testing, so that you can switch to offline mode more often and more easily return to online status.</span></span> |
| <span data-ttu-id="8753c-196">オフライン データの除外</span><span class="sxs-lookup"><span data-stu-id="8753c-196">Offline data exclusion</span></span> | <span data-ttu-id="8753c-197">この機能は、データ サイジングの改善とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="8753c-197">This feature is also known as Data sizing improvements.</span></span> <span data-ttu-id="8753c-198">オフライン データベースから除外する必要があり、今後同期してはいけない特定のデータにフラグを設定する機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="8753c-198">It provides the ability to flag specific data that must be excluded from offline databases, and that must not be synced in the future.</span></span> <span data-ttu-id="8753c-199">また、オフライン データベースからすべての顧客関連データを完全に削除するためにも使用されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-199">It's also used to fully remove all customer-related data from offline databases.</span></span> |
| <span data-ttu-id="8753c-200">強制バッチ処理と完全同期で繰り返しの使用不可</span><span class="sxs-lookup"><span data-stu-id="8753c-200">Forced Batch processing and inability to use recurrence with a Full sync</span></span> | <span data-ttu-id="8753c-201">バージョン 10.0.11では、バッチ処理を使用しない限り、**配分スケジュール** ページから **今すぐ実行** コマンドを実行できません。</span><span class="sxs-lookup"><span data-stu-id="8753c-201">In version 10.0.11 and later, you can't perform the **Run now** command from the **Distribution schedule** page unless batch processing is used.</span></span> <span data-ttu-id="8753c-202">この変更は、環境が最も頻繁に使用された時間帯にジョブが実行された場合に発生するパフォーマンス上の問題のために行われました。</span><span class="sxs-lookup"><span data-stu-id="8753c-202">This change was made because of performance issues that occurred if jobs were run during times when environments were most heavily used.</span></span> <span data-ttu-id="8753c-203">この機能拡張の一部として行われた別の変更では、Commerce Headquarters の **チャネル データベース** ページから **完全なデータの同期** コマンド (完全なジョブの同期) が実行されると、繰り返しを使用できません。</span><span class="sxs-lookup"><span data-stu-id="8753c-203">In another change that was made as a part of this feature enhancement, recurrence can't be used when the **Full data sync** command (full job synchronization) is run from the **Channel database** page in Commerce headquarters.</span></span> <span data-ttu-id="8753c-204">実行できるのは 1 回のみです。</span><span class="sxs-lookup"><span data-stu-id="8753c-204">Only a single occurrence can be run.</span></span> |

#### <a name="advanced-offline"></a><span data-ttu-id="8753c-205">オフラインの詳細</span><span class="sxs-lookup"><span data-stu-id="8753c-205">Advanced offline</span></span>

<span data-ttu-id="8753c-206">この機能は、オフライン プロファイルで構成できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-206">This feature can be configured in the offline profile.</span></span> <span data-ttu-id="8753c-207">3 つの設定が関連しています:</span><span class="sxs-lookup"><span data-stu-id="8753c-207">Three settings are related to it:</span></span>

- <span data-ttu-id="8753c-208">**サインイン前に手動でのオフライン切り替えを許可する** – この設定により、Modern POS ユーザーは POS にサインインする前にオフライン モードに切り替えることができます。</span><span class="sxs-lookup"><span data-stu-id="8753c-208">**Allow manual switch to offline before sign in** – This setting lets Modern POS users switch to offline mode before they sign in to the POS.</span></span> <span data-ttu-id="8753c-209">これは、サインインが完了する前にタイムアウトが発生する可能性がある場合や、Commerce Scale Unit (クラウドまたは自己ホスト) からの非定型の応答コードが発生している場合のシナリオで役立ちます。</span><span class="sxs-lookup"><span data-stu-id="8753c-209">It's helpful in scenarios where time-outs might occur before sign-in is completed, or where atypical response codes from the Commerce Scale Unit (Cloud or Self-hosted) are occurring.</span></span> <span data-ttu-id="8753c-210">この設定を有効にすると、オフライン データベースを使用している Modern POS ユーザーが、POS サインイン ページから **設定** メニューにアクセスできるようになります。</span><span class="sxs-lookup"><span data-stu-id="8753c-210">When this setting is turned on, a Modern POS user who is using an offline database can access the **Settings** menu from the POS sign-in page.</span></span> <span data-ttu-id="8753c-211">このメニューには、オフライン モードに切り替えるための新しいオプションが含まれています。</span><span class="sxs-lookup"><span data-stu-id="8753c-211">This menu includes a new option for switching to offline mode.</span></span> <span data-ttu-id="8753c-212">このオプションを選択すると、ユーザーは、Commerce Scale Unit への呼び出しによって最初にログインする必要がなく、オフライン データベースに対して直接サインインできます。</span><span class="sxs-lookup"><span data-stu-id="8753c-212">By selecting this option, the user can sign in directly against the offline database instead of first having to sign in via a call to the Commerce Scale Unit.</span></span>
- <span data-ttu-id="8753c-213">**詳細なオフライン切り替えの有効化** – この設定により、Modern POS をより簡単により頻繁にオフライン モードに切り替えることができます。</span><span class="sxs-lookup"><span data-stu-id="8753c-213">**Enable advanced offline switching** – This setting enables Modern POS to switch to offline mode more easily and more often.</span></span> <span data-ttu-id="8753c-214">通常、Modern POS はオンライン状態を維持しようとし、機能を続行するためにこのようなスイッチが必要になった場合にのみオフライン モードに切り替えます。</span><span class="sxs-lookup"><span data-stu-id="8753c-214">Typically, Modern POS tries to maintain its online status and switches to offline mode only when such a switch is required to continue functionality.</span></span> <span data-ttu-id="8753c-215">この設定を有効にすると、Modern POS は、特にサインインや POS 操作への遅延とみなされる可能性のある追加の Commerce Scale Unit の応答を含むシナリオで、より頻繁に切り替えることができます。</span><span class="sxs-lookup"><span data-stu-id="8753c-215">When this setting is turned on, Modern POS can switch more often, especially in scenarios that involve sign-in and additional Commerce Scale Unit responses that might be considered a delay to POS operation.</span></span> <span data-ttu-id="8753c-216">この設定は、オンラインのみの機能の可用性を維持するより速度を優先するシナリオ (Headquarters への接続を必要とするギフト カードでの支払など) で最も重要です。</span><span class="sxs-lookup"><span data-stu-id="8753c-216">This setting is most valuable in scenarios where speed is a higher priority than maintaining availability of online-only features (for example, paying with a gift card, which requires connection to Headquarters).</span></span>
- <span data-ttu-id="8753c-217">**システムの正常性チェックの間隔 (分)** – この設定は、説明した **詳細なオフライン切り替えの有効化** 設定のサブ機能として機能します。</span><span class="sxs-lookup"><span data-stu-id="8753c-217">**System health check interval (mins)** – This setting works as a subfeature of the **Enable advanced offline switching** setting that was just described.</span></span> <span data-ttu-id="8753c-218">通常、この設定がオフで、Modern POS がオフライン モードの場合、POS は **オフライン プロファイル** の構成に基づいて特定の時間だけ待機し、次に発生する操作呼び出し中に Commerce Scale Unit への再接続を試みます。</span><span class="sxs-lookup"><span data-stu-id="8753c-218">Usually, when that setting is turned off, and Modern POS is in offline mode, the POS waits a specific amount of time, based on configuration in the **Offline profile**, and then tries to reconnect to the Commerce Scale Unit during the next operation call that occurs.</span></span> <span data-ttu-id="8753c-219">この詳細なオフラインの正常性チェックは、オンラインの可用性を確認し、オンライン機能が再び使用可能になるとすぐに切り替える、より頻繁な操作に依存しない方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="8753c-219">This advanced offline health check provides a more frequent, operation-independent method of checking online availability and switching more quickly as soon as online functionality is available again.</span></span>

#### <a name="offline-data-exclusion"></a><span data-ttu-id="8753c-220">オフライン データの除外</span><span class="sxs-lookup"><span data-stu-id="8753c-220">Offline data exclusion</span></span>

<span data-ttu-id="8753c-221">この機能はバージョン 10.0.11 でリリースされ始め、バージョン 10.0.12 で完全な機能セットが完成しました。</span><span class="sxs-lookup"><span data-stu-id="8753c-221">This feature began to be released in version 10.0.11, and the full feature set was completed in version 10.0.12.</span></span> <span data-ttu-id="8753c-222">この機能は、オフライン データベースに同期されるデータの量を減らすことを目的としています。</span><span class="sxs-lookup"><span data-stu-id="8753c-222">This feature is intended to help reduce that amount of data that is synced to offline databases.</span></span> <span data-ttu-id="8753c-223">Commerce Headquarters の **Scheduler ジョブ** ページと **Scheduler サブジョブ** ページで、**オフライン データベースから除外** というオプションを使用すると、データをオフライン データベースに同期するときにデータ (テーブル) を除外できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-223">On the **Scheduler job** and **Scheduler subjob** pages in Commerce headquarters, an option that is named **Exclude from offline databases** lets you exclude data (tables) when you sync data to the offline database.</span></span>

- <span data-ttu-id="8753c-224">**Scheduler ジョブ** ページで、**はい** にオプションを設定し、ジョブ用に生成されたすべてのデータ パッケージがオフライン データベースに同期されないようにします。</span><span class="sxs-lookup"><span data-stu-id="8753c-224">On the **Scheduler job** page, set the option to **Yes** to stop all generated data packages for the job from being synced to offline databases.</span></span> <span data-ttu-id="8753c-225">**チャネル データベース** ページから除外されたジョブに対して **完全データ同期** コマンドが実行されると、オフライン データベースの関連テーブルが空になります (つまり、既に存在していたデータはすべてクリアされます)。</span><span class="sxs-lookup"><span data-stu-id="8753c-225">If the **Full data sync** command is run for the excluded job from the **Channel database** page, the relevant tables in offline databases will be emptied (that is, all data that previously existed will be cleared).</span></span>
- <span data-ttu-id="8753c-226">**Scheduler サブジョブ** で、オプションを **はい** に設定し、サブジョブを含むジョブの関連テーブルがオフライン データベースに同期されないようにします。</span><span class="sxs-lookup"><span data-stu-id="8753c-226">On the **Scheduler subjob**, set the option to **Yes** to stop the associated table for any job that contains the subjob from being synchronized to offline databases.</span></span> <span data-ttu-id="8753c-227">たとえば、チャネル データベースの SQL テーブル **DIRPARTYTABLE** は、3 つの異なる Scheduler ジョブによって同期されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-227">For example, the channel database SQL table **DIRPARTYTABLE** is synchronized by three different scheduler jobs.</span></span> <span data-ttu-id="8753c-228">したがって、**DIRPARTYTABLE** テーブルを除外すると、3 つのジョブすべてによって、そのデータがオフライン データベースに同期されなくなります。</span><span class="sxs-lookup"><span data-stu-id="8753c-228">Therefore, if you exclude the **DIRPARTYTABLE** table, you stop its data from being synced to offline databases by all three jobs.</span></span> <span data-ttu-id="8753c-229">(このテーブル例 (**DIRPARTYTABLE**) は、オフライン データベースに格納されているスタッフ関連データにとって重要なので、除外することはお勧めしません)。</span><span class="sxs-lookup"><span data-stu-id="8753c-229">(We don't recommend that you exclude this example table (**DIRPARTYTABLE**) as it is critical for the staff-related data it stores in the offline database).</span></span>

<span data-ttu-id="8753c-230">この機能は、行レベルのフィルター処理の最初のステップでもあります。</span><span class="sxs-lookup"><span data-stu-id="8753c-230">This feature also represents the first step in row-level filtering.</span></span> <span data-ttu-id="8753c-231">Commerce Headquarters の **Commerce チャネル スキーマ** ページには、**共有顧客データ テーブルのフィルター** という新しいオプションが含まれています。</span><span class="sxs-lookup"><span data-stu-id="8753c-231">In Commerce headquarters, the **Commerce channel schema** page includes a new option that is named **Filter shared customer data tables**.</span></span> <span data-ttu-id="8753c-232">(**Commerce チャネル スキーマ** ページを開くには、**Retail と Commerce \> Headquarters の設定 \> Commerce Scheduler \> チャネル データベース グループ** に移動し、**Commerce チャネル スキーマ** フィールドで値を選択します。</span><span class="sxs-lookup"><span data-stu-id="8753c-232">(To open the **Commerce channel schema** page, go to **Retail and Commerce \> Headquarters setup \> Commerce scheduler \> Channel database group**, and then, in the **Commerce channel schema** field, select a value.</span></span> <span data-ttu-id="8753c-233">既定値は **AX7** です。) オプションを **はい** に設定すると、共有テーブル内のすべての顧客データにフラグが設定されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-233">The default value is **AX7**.) By setting the option to **Yes**, you flag all customer data in shared tables.</span></span> <span data-ttu-id="8753c-234">この設定は、Microsoft 作成の標準テーブル (カスタム作成のテーブルではないテーブル) に対してのみ機能します。</span><span class="sxs-lookup"><span data-stu-id="8753c-234">This setting works only for standard Microsoft-created tables (that is, tables that aren't custom-created tables).</span></span> <span data-ttu-id="8753c-235">このオプションを **はい** に設定すると、以下のメッセージが表示されます: 「チャネル データ分布のレコードからのみ顧客データが削除されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-235">When you set this option to **Yes**, you receive a message that states, "This will remove customer data from the records in the channel data distribution only.</span></span> <span data-ttu-id="8753c-236">顧客データを含むすべてのスケジュール ジョブもオフライン同期をスキップするようにマークする必要があります。」</span><span class="sxs-lookup"><span data-stu-id="8753c-236">All schedule jobs that contain customer data also need to be marked to skip offline synchronization."</span></span> <span data-ttu-id="8753c-237">次に、**はい** または **いいえ** のどちらかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-237">You can then select either **Yes** or **No**.</span></span> <span data-ttu-id="8753c-238">このメッセージは、すべての顧客データ ジョブで **オフライン データベースから除外** オプションも **はい** に設定する必要があることを確認するためのものです。</span><span class="sxs-lookup"><span data-stu-id="8753c-238">This message is intended as a reminder that the **Exclude from offline databases** option must also be set to **Yes** for all customer data jobs.</span></span> <span data-ttu-id="8753c-239">(既定では、唯一の顧客データ ジョブは 1010 ジョブです。)</span><span class="sxs-lookup"><span data-stu-id="8753c-239">(By default, the only customer data job is the 1010 job.)</span></span>

<span data-ttu-id="8753c-240">このフィルター処理の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="8753c-240">Here is an example of this filtering.</span></span> <span data-ttu-id="8753c-241">DIRPARTYTABLE テーブルは、顧客と従業員の両方に使用されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-241">The DIRPARTYTABLE table is used for both customers and employees.</span></span> <span data-ttu-id="8753c-242">**共有顧客データ テーブルのフィルター** を **はい** に設定すると 、行レベルのすべての顧客レコードに対して、オフライン データベースとの同期を行わないことを示すフラグが設定されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-242">If you set the **Filter shared customer data tables** to **Yes**, all customer records at the row level are flagged to indicate that they should not be synced to offline databases.</span></span> <span data-ttu-id="8753c-243">**オフラインデータベースから除外** オプションも **はい** に設定すると、すべての顧客データがオフライン データベースへの同期から除外されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-243">When the **Exclude from offline databases** option is also set to **Yes**, all customer data will be excluded from synchronization to offline databases.</span></span>

## <a name="implementation-considerations"></a><span data-ttu-id="8753c-244">実装の考慮事項</span><span class="sxs-lookup"><span data-stu-id="8753c-244">Implementation considerations</span></span>

<span data-ttu-id="8753c-245">このセクションでは、実装の計画を開始する際に考慮する必要がある構成について説明します。</span><span class="sxs-lookup"><span data-stu-id="8753c-245">This section describes configurations that you should consider when you begin to plan your implementation.</span></span> <span data-ttu-id="8753c-246">ここで説明する機能は、データ管理とデータ構成に関連しています。</span><span class="sxs-lookup"><span data-stu-id="8753c-246">The features that are described here are related to data management and data configuration.</span></span> <span data-ttu-id="8753c-247">ここに記載されているガイダンスを読む前に、[Commerce Data Exchange のベスト プラクティス](CDX-Best-Practices.md) を読むことを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8753c-247">Before you read the guidance that is provided here, we highly recommend that you read [Commerce Data Exchange best practices](CDX-Best-Practices.md).</span></span>

- <span data-ttu-id="8753c-248">**Scheduler ジョブ カレンダーの作成** – 各ジョブはどれぐらいの頻度で発生しますか?</span><span class="sxs-lookup"><span data-stu-id="8753c-248">**Create a Scheduler job calendar** – How often will each job occur?</span></span> <span data-ttu-id="8753c-249">各ジョブは 1 日あたり何回発生しますか?</span><span class="sxs-lookup"><span data-stu-id="8753c-249">How many times per day will each job occur?</span></span> <span data-ttu-id="8753c-250">重要ではない大規模なジョブは、環境全体が頻繁に使用されていない時間外にのみ発生しますか?</span><span class="sxs-lookup"><span data-stu-id="8753c-250">Will large, non-critical jobs occur only during off-hours, when the overall environment isn't heavily used?</span></span> <span data-ttu-id="8753c-251">カレンダー (必要に応じて、物理的または仮想的のいずれか) を作成することにより、ジョブがどのようにパフォーマンスに影響を与える他のワークロード (明細書の転記など)、工程時間、外部データのバッチ処理、指定された時間に (または CDX ジョブのように 1 日を通して頻繁に) データをプッシュまたはプルするカスタマイズと交差するかの詳細を知ることができます。</span><span class="sxs-lookup"><span data-stu-id="8753c-251">By creating a calendar (either physical or virtual, as you prefer), you can learn the details about how jobs will intersect with other workloads that affect performance (for example, statement posting), hours of operation, batch processing for external data, and any customizations that push or pull data at specified times (or frequently throughout the day, just like a CDX job).</span></span>
- <span data-ttu-id="8753c-252">**オフライン同期の一時停止** – 小売組織が拡大するにつれて、このオフライン プロファイル機能を最大限に活用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8753c-252">**Pause offline synchronization** – As a retail organization expands, it should take advantage of this offline profile feature as fully as possible.</span></span> <span data-ttu-id="8753c-253">成長は良いことですが、データ生成を管理して、現在稼働しているビジネスへのパフォーマンス上の影響を最小限にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="8753c-253">Growth is good, but data generation should be managed to help minimize the performance impact on the currently operating business.</span></span> <span data-ttu-id="8753c-254">この機能を使用すると、チャネル、レジスター、およびデータベースを作成することができますが、レジスターが使用されるずっと前から、パフォーマンスに影響を与える大量のデータ生成を必要としません。</span><span class="sxs-lookup"><span data-stu-id="8753c-254">This feature enables the creation of channels, registers, and databases, but without requiring a massive, performance-affecting amount of data generation long before the registers are ever used.</span></span>
- <span data-ttu-id="8753c-255">**オフラインの詳細** – 前述のオフラインの詳細機能を使用すると便利ですが、小売組織の優先順位と値に適合する場合にのみ使用します。</span><span class="sxs-lookup"><span data-stu-id="8753c-255">**Advanced offline** – The previously described advanced offline features can be helpful, but they should be used only if they suit the priorities and values of the retail organization.</span></span> <span data-ttu-id="8753c-256">詳細なオフライン正常性チェックは、オンライン時間の最大化に役立ちますが、Commerce Headquarters または Commerce Scale Unit が何らかの理由で応答しなくなったり、利用できなくなったりした場合は、レジスターをオフライン モードにプッシュする方がより効果的になります。</span><span class="sxs-lookup"><span data-stu-id="8753c-256">Although the advanced offline health check interval can help maximize online time, it will also be more forceful about pushing a register to offline mode if Commerce headquarters or the Commerce Scale Unit becomes unresponsive or unavailable for any reason.</span></span> <span data-ttu-id="8753c-257">タイムアウトや繰り返しの再試行応答を待たずに、オフライン モードにすばやく切り替えることにより、レジスターのパフォーマンスを最大化することは重要です。</span><span class="sxs-lookup"><span data-stu-id="8753c-257">It can be valuable to maximize the performance of registers by quickly switching to offline mode instead of waiting for time-outs or repeated retry responses.</span></span> <span data-ttu-id="8753c-258">ただし、このアプローチは、ロイヤルティ操作、追加の支払方法、顧客注文などの業務を可能するために、可能な限りオンライン状態を維持しようとする標準のシームレスなオフライン モデルに対して理解および管理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8753c-258">However, this approach must be understood and managed against the standard seamless offline model that tries to stay online as long as possible, to allow for operations such as loyalty operations, additional payment methods, and customer orders.</span></span>
- <span data-ttu-id="8753c-259">**オフライン データの除外** – 一般に、小さなデータ セットは通常、大規模なデータ セットよりも速くなります。</span><span class="sxs-lookup"><span data-stu-id="8753c-259">**Offline data exclusion** – In general, a small data set is typically faster than a large data set.</span></span> <span data-ttu-id="8753c-260">データベース全体のサイズを減らす必要がある場合 (たとえば、SQL Express では10 ギガバイト \[GB\] のデータベースしか許可されていない場合) や、POS 端末がオフライン モード中に一般的な操作の一部として照会するデータの量を最小限に抑える必要がある場合は、オフライン データベースの機能に関連しないデータを除外することは重要です。</span><span class="sxs-lookup"><span data-stu-id="8753c-260">It can be valuable to exclude data that isn't relevant to the functionality of the offline database when you want to reduce the overall database size (for example, SQL Express allows for databases of only 10 gigabytes \[GB\]), and also when you want to minimize the amount of data that the POS terminal queries as part of general operations while it's in offline mode.</span></span>

    <span data-ttu-id="8753c-261">この機能は、小売組織の業務要件に応じて大きく異なります。</span><span class="sxs-lookup"><span data-stu-id="8753c-261">This feature varies widely, depending on the business requirements of the retail organization.</span></span> <span data-ttu-id="8753c-262">したがって、カスタマイズが機能するために必要なデータや、標準的な日常業務に必要なデータを把握しておくことが重要です。</span><span class="sxs-lookup"><span data-stu-id="8753c-262">Therefore, it's crucial that you know what data is required for customizations to work, or even what data is required for standard day-to-day operations.</span></span> <span data-ttu-id="8753c-263">たとえば、顧客をトランザクションに関連付ける必要がない場合は、顧客をオフライン データベースから除外できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-263">For example, if a customer doesn't have to be attached to a transaction, customers can be excluded from the offline databases.</span></span> <!--How about **Loyalty information** or **Modes of delivery**? **OPEN QUESTIONS ON TABLES TO EXCLUDE!!!!!!!**-->

- <span data-ttu-id="8753c-264">**チャネル データベース グループ** – 少なくとも 2 つのチャネル データベース グループが存在する必要があります: 1 つは使用される初期の Commerce Scale Unit (クラウド) 用であり、もう 1 つは使用される任意またはすべてのオフライン データベース用です。</span><span class="sxs-lookup"><span data-stu-id="8753c-264">**Channel database groups** – At a minimum, two channel database groups should exist: one for the initial Commerce Scale Unit (Cloud) that is used, and one for any or all offline databases that are used.</span></span> <span data-ttu-id="8753c-265">大規模な小売企業では、関連するチャネル (店舗) のデータの類似性に基づいて分離された、複数のオフライン中心のチャネル データベース グループを持つ場合があります。</span><span class="sxs-lookup"><span data-stu-id="8753c-265">Large retail enterprises might have multiple offline-focused channel database groups that are separated based on similarity of data in their associated channels (stores).</span></span>

    <span data-ttu-id="8753c-266">また、新しいチャネル データベースの構成に使用できる "ダミー" のチャネル データベース グループ、オフライン サポートのあるレジスター (この場合、オフライン データベースが作成されます)、そして場合によっては新しいが未使用の Commerce Scale Unit (クラウドまたは自己ホストのいずれか) があると便利です。</span><span class="sxs-lookup"><span data-stu-id="8753c-266">Additionally, it's helpful to have a "dummy" channel database group that can be used to configure new channel databases, registers that have offline support (in this case, offline databases will be created), and maybe even new but unused Commerce Scale Units (either Cloud or Self-hosted).</span></span> <span data-ttu-id="8753c-267">この "ダミー" グループは、配送スケジュール ジョブに関連付けられていないので、関連付けられているものに対してデータ生成は発生しません。</span><span class="sxs-lookup"><span data-stu-id="8753c-267">Because this "dummy" group won't be associated with any distribution schedule jobs, no data generation will ever occur for anything that is associated with it.</span></span> <span data-ttu-id="8753c-268">時間と実装が進むにつれて、関連付けられているエンティティ (たとえば、チャネル \[店舗\] やオフライン データベースの登録など) は、正しいデータベース グループに再関連付けされます。</span><span class="sxs-lookup"><span data-stu-id="8753c-268">As time and the implementation progress, the associated entities (for example, channels \[stores\] and register offline databases) will be re-associated with the correct database group.</span></span> <span data-ttu-id="8753c-269">このアプローチの優れた代替策、おそらくは改善策として、前述の **オフライン同期の一時停止** 機能を使用することです。</span><span class="sxs-lookup"><span data-stu-id="8753c-269">A great alternative to this approach, and perhaps even an improvement, is to use the **Pause offline synchronization** feature that was described earlier.</span></span>

### <a name="sql-server-versions-and-licenses"></a><span data-ttu-id="8753c-270">SQL Server のバージョンとライセンス</span><span class="sxs-lookup"><span data-stu-id="8753c-270">SQL Server versions and licenses</span></span> 
<span data-ttu-id="8753c-271">SQL Server には、さまざまなバージョン (SQL Server 2017 や SQL Server 2019 など) やエディション (SQL Standard や SQL Express など) があります。</span><span class="sxs-lookup"><span data-stu-id="8753c-271">SQL Server comes in a variety of versions (such as SQL Server 2017 and SQL Server 2019) and a variety of editions (such as SQL Standard and SQL Express).</span></span> <span data-ttu-id="8753c-272">これらのバージョンの詳細な情報については、[SQL Server 2019 (15.x) のエディションとサポートされている機能](/sql/sql-server/editions-and-components-of-sql-server-version-15?view=sql-server-ver15#Cross-BoxScaleLimits)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8753c-272">For more in-depth information about these versions, see [Editions and supported features of SQL Server 2019 (15.x)](/sql/sql-server/editions-and-components-of-sql-server-version-15?view=sql-server-ver15#Cross-BoxScaleLimits).</span></span> <span data-ttu-id="8753c-273">追加のバージョンについては、このトピックで後述する「追加リソース」も参照してください。</span><span class="sxs-lookup"><span data-stu-id="8753c-273">Also see the "Additional resources" later in this topic regarding additional versions.</span></span>

<span data-ttu-id="8753c-274">SQL Server のバージョンについては、現在メインストリーム サポートの期間内にあるバージョンの使用のみをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8753c-274">For SQL Server versions, the only recommendation is to use a version that is currently still within the mainstream support date.</span></span> <span data-ttu-id="8753c-275">サポート日は、[製品とサービス ライフサイクル情報](/lifecycle/products/)という記事で製品ごとに検索できます。</span><span class="sxs-lookup"><span data-stu-id="8753c-275">Support dates can be searched for, by product, in [Search Product and Services Lifecycle Information](/lifecycle/products/).</span></span>

#### <a name="which-sql-server-edition-to-use"></a><span data-ttu-id="8753c-276">使用する SQL Server エディション</span><span class="sxs-lookup"><span data-stu-id="8753c-276">Which SQL Server edition to use</span></span>
<span data-ttu-id="8753c-277">包括的なリストは作成できませんが、Dynamics 365 Commerce で最も使用される SQL Server エディションを次に示します。</span><span class="sxs-lookup"><span data-stu-id="8753c-277">While not an exhaustive list, here are the most used SQL Server editions for Dynamics 365 Commerce.</span></span> <span data-ttu-id="8753c-278">各エディションのユース ケースについても説明します。</span><span class="sxs-lookup"><span data-stu-id="8753c-278">The use cases for each edition are also described.</span></span>

| <span data-ttu-id="8753c-279">エディション</span><span class="sxs-lookup"><span data-stu-id="8753c-279">Edition</span></span> | <span data-ttu-id="8753c-280">ユース ケース</span><span class="sxs-lookup"><span data-stu-id="8753c-280">Use cases</span></span> |
|--------------|-------------|
| <span data-ttu-id="8753c-281">速達</span><span class="sxs-lookup"><span data-stu-id="8753c-281">Express</span></span> | <span data-ttu-id="8753c-282">SQL Server Express には CPU コア カウントや RAM の使用などのいくつかの主要な制限がありますが、最も大きな制限の要因は、10 GBのデータベース サイズ制限です。</span><span class="sxs-lookup"><span data-stu-id="8753c-282">SQL Server Express has some major limitations (such as CPU core count or RAM usage), but the most major limiting factor is the 10 GB database size limit.</span></span>  <span data-ttu-id="8753c-283">その結果、Express は多くの場合、CSU (自己ホスト) チャネル データベースではなく、Modern POS のオフライン データベースに使用されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-283">As a result, Express is often used for a Modern POS offline database, not for a CSU (self-hosted) channel database.</span></span> <span data-ttu-id="8753c-284">Express Edition を CSU (自己ホスト) に使用する場合、データベースが 10 GB の最大サイズ制限に達するとデータ同期に問題が生じ、データの損失などの問題が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8753c-284">If the Express edition is used for a CSU (self-hosted), be aware that there could be data synchronization issues if the database ever reaches the 10 GB maximum size limit, which could cause issues such as loss of data.</span></span> <span data-ttu-id="8753c-285">Express Edition を使用する場合は、圧縮と Dynamics 365 Commerce 機能を使用して、オフライン データベースからデータを除外することが重要です。</span><span class="sxs-lookup"><span data-stu-id="8753c-285">When using the Express edition, it is crucial to use compression and the Dynamics 365 Commerce features to exclude data from offline databases.</span></span> <span data-ttu-id="8753c-286">SQL 圧縮の詳細については、[Commerce Data Exchange のベスト プラクティス](CDX-Best-Practices.md#enable-table-and-index-compression)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8753c-286">For more information about SQL compression, see [Commerce Data Exchange best practices](CDX-Best-Practices.md#enable-table-and-index-compression).</span></span> <span data-ttu-id="8753c-287">データベースのサイズは 8 GB 以下で管理することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8753c-287">We recommended that you maintain a database at 8 GB in size, or less.</span></span> |
| <span data-ttu-id="8753c-288">標準</span><span class="sxs-lookup"><span data-stu-id="8753c-288">Standard</span></span> | <span data-ttu-id="8753c-289">SQL Server Standard は多くの場合、CSU (自己ホスト) チャネル データベースで使用されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-289">SQL Server Standard is often used for CSU (self-hosted) channel databases.</span></span>  <span data-ttu-id="8753c-290">これにより、一般に 1 つ以上の小売店舗の場所で CSU (自己ホスト) チャネル データベースを処理するのに十分なサイズとシステム使用率が提供されます。</span><span class="sxs-lookup"><span data-stu-id="8753c-290">This provides enough size and system utilization to typically handle a CSU (self-hosted) channel database for one to several retail store locations.</span></span> |
| <span data-ttu-id="8753c-291">企業</span><span class="sxs-lookup"><span data-stu-id="8753c-291">Enterprise</span></span> | <span data-ttu-id="8753c-292">SQL Server Enterprise の必要はほとんどありませんが、価値のあるシナリオがあります。</span><span class="sxs-lookup"><span data-stu-id="8753c-292">SQL Server Enterprise is rarely necessary, but there are scenarios where it could be valuable.</span></span> <span data-ttu-id="8753c-293">たとえば、データセンター VM で CSU (自己ホスト) をホストして、多くのデバイスの広い領域で使用する場合、パフォーマンス機能を最大限にするには、制限を取り除くことが重要です。</span><span class="sxs-lookup"><span data-stu-id="8753c-293">For example, if hosting a CSU (self-hosted) in a datacenter VM for use across a large area of many devices, removing the limitations could be valuable to maximize performance capabilities.</span></span> |

## <a name="additional-resources"></a><span data-ttu-id="8753c-294">追加リソース</span><span class="sxs-lookup"><span data-stu-id="8753c-294">Additional resources</span></span>

- [<span data-ttu-id="8753c-295">Commerce Data Exchange のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="8753c-295">Commerce Data Exchange troubleshooting</span></span>](CDX-Troubleshooting.md)
- [<span data-ttu-id="8753c-296">Commerce Data Exchange ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="8753c-296">Commerce Data Exchange best practices</span></span>](CDX-Best-Practices.md)
- [<span data-ttu-id="8753c-297">Dynamics 365 Commerce アーキテクチャの概要</span><span class="sxs-lookup"><span data-stu-id="8753c-297">Dynamics 365 Commerce architecture overview</span></span>](../commerce-architecture.md)
- [<span data-ttu-id="8753c-298">ストア内トポロジの選択</span><span class="sxs-lookup"><span data-stu-id="8753c-298">Select an in-store topology</span></span>](retail-in-store-topology.md)
- [<span data-ttu-id="8753c-299">デバイス管理実装ガイダンス</span><span class="sxs-lookup"><span data-stu-id="8753c-299">Device management implementation guidance</span></span>](../implementation-considerations-devices.md)
- [<span data-ttu-id="8753c-300">Modern POS (MPOS) のコンフィギュレーション、インストール、および有効化</span><span class="sxs-lookup"><span data-stu-id="8753c-300">Configure, install, and activate Modern POS (MPOS)</span></span>](../retail-modern-pos-device-activation.md)
- [<span data-ttu-id="8753c-301">Commerce Scale Unit のコンフィギュレーションとインストール (自己ホスト)</span><span class="sxs-lookup"><span data-stu-id="8753c-301">Configure and install Commerce Scale Unit (self-hosted)</span></span>](retail-store-scale-unit-configuration-installation.md)

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
