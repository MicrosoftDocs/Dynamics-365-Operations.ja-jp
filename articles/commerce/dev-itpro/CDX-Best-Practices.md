---
title: Commerce Data Exchange のベスト プラクティス
description: このトピックは、Microsoft Dynamics 365 Commerce 環境にデータ同期 (Commerce Data Exchange、または CDX) に関連する機能を実装するユーザーを対象としています。 実装にあたってのベスト プラクティスのアドバイスを提供します。
author: jashanno
manager: AnnBe
ms.date: 08/01/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailTerminalTable, RetailDevice
audience: IT Pro
ms.reviewer: sericks
ms.search.scope: Core, Operations, Retail
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail
ms.author: jashanno
ms.search.validFrom: 2020-08-31
ms.dyn365.ops.version: 10.0.12
ms.openlocfilehash: 84c2cd8b92a94f4134d8dd901dfc26784c50d6aa
ms.sourcegitcommit: 2bcacef1e010c312f019dbf9740ce87d627848a7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/20/2020
ms.locfileid: "3712559"
---
# <a name="commerce-data-exchange-best-practices"></a><span data-ttu-id="2dda3-104">Commerce Data Exchange のベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="2dda3-104">Commerce Data Exchange best practices</span></span>
[!include[banner](../includes/banner.md)]

<span data-ttu-id="2dda3-105">このトピックは、Microsoft Dynamics 365 Commerce 環境にデータ同期 (Commerce Data Exchange \[CDX]) に関連する機能を実装するユーザーを対象としています。</span><span class="sxs-lookup"><span data-stu-id="2dda3-105">This topic is intended for people who implement functionality that is related to data synchronization (Commerce Data Exchange \[CDX]) in a Microsoft Dynamics 365 Commerce environment.</span></span> <span data-ttu-id="2dda3-106">実装にあたってのベスト プラクティスのアドバイスを提供します。</span><span class="sxs-lookup"><span data-stu-id="2dda3-106">It gives best practices advice for implementations.</span></span>

## <a name="overview"></a><span data-ttu-id="2dda3-107">概要</span><span class="sxs-lookup"><span data-stu-id="2dda3-107">Overview</span></span>

<span data-ttu-id="2dda3-108">データの構成と同期を適切に行うことは、実装が正しく機能するために非常に重要となります。</span><span class="sxs-lookup"><span data-stu-id="2dda3-108">Proper data configuration and data synchronization are crucial to correctly functioning implementation.</span></span> <span data-ttu-id="2dda3-109">ビジネス要件、IT インフラストラクチャ、および全体的な準備にかかわらず、データが正しく同期されていないと、環境全体が実質的に役に立たなくなります。</span><span class="sxs-lookup"><span data-stu-id="2dda3-109">Regardless of business requirements, IT infrastructure, and overall preparedness, if data isn't correctly synchronized, the whole environment is effectively useless.</span></span> <span data-ttu-id="2dda3-110">したがって、コマース本部から Commerce Scale Unit を経由してオフライン データベースを持つ最新の POS を使用する実店舗に至るまで、完全な実装の全体にわたってデータの設定、生成、同期、検証に必要なものを把握することが最優先事項となります。</span><span class="sxs-lookup"><span data-stu-id="2dda3-110">Therefore, a top priority is to understand what is required to configure, generate, synchronize, and verify data across the full implementation from Commerce headquarters through the Commerce Scale Unit to the brick-and-mortar stores that use Modern POS with an offline database.</span></span>

<span data-ttu-id="2dda3-111">このトピックに進む前に、チャネル (店舗)、レジスターとデバイス、および Modern POS オフライン データベースの概念を理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="2dda3-111">Before you go through this topic, it's important that you understand the concepts of a channel (store), registers and devices, and the Modern POS offline database.</span></span> <span data-ttu-id="2dda3-112">したがって、このトピックの最後にある 「デバイス管理実装ガイダンス」や「Commerce アーキテクチャの概要」などのリソースを確認することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2dda3-112">Therefore, we recommend that you review some of the resources at the end of this topic, such as the Device management implementation guide and the overview of the Commerce architecture.</span></span>

<span data-ttu-id="2dda3-113">このトピックの主な内容は以下の表にまとめました。最初の列にはタグの似た「関連する領域」のリストが含まれており、関心のある分野に関するベストプラクティスをすばやく見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="2dda3-113">The main content of this topic is organized into tables, where the first column includes lists of tag-like "associated areas" to help you more quickly find best practices that are related to your areas of concern.</span></span> <span data-ttu-id="2dda3-114">新しい実装については、これらのテーブルをコピーし、さまざまなベスト プラクティスが完成したときにチェックできる場所にコピーしておくと役立つ場合があります。</span><span class="sxs-lookup"><span data-stu-id="2dda3-114">For new implementations, you might find it useful to copy these tables to a location where you can check off the various best practices as they are completed.</span></span> <span data-ttu-id="2dda3-115">このようにして、本番に移る前に可実装が準備されているかどうかを能な限り確認することができます。</span><span class="sxs-lookup"><span data-stu-id="2dda3-115">In this way, you can help ensure that the implementation is prepared as well as possible before you move forward to production.</span></span>

## <a name="valuable-configurations"></a><span data-ttu-id="2dda3-116">便利な構成</span><span class="sxs-lookup"><span data-stu-id="2dda3-116">Valuable configurations</span></span>

| <span data-ttu-id="2dda3-117">関連する領域</span><span class="sxs-lookup"><span data-stu-id="2dda3-117">Associated areas</span></span> | <span data-ttu-id="2dda3-118">ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="2dda3-118">Best practice</span></span> |
|------------------|---------------|
| <ul><li><span data-ttu-id="2dda3-119">パラメーター</span><span class="sxs-lookup"><span data-stu-id="2dda3-119">Parameters</span></span></li><li><span data-ttu-id="2dda3-120">コマース スケジューラ</span><span class="sxs-lookup"><span data-stu-id="2dda3-120">Commerce scheduler</span></span></li><li><span data-ttu-id="2dda3-121">再試行</span><span class="sxs-lookup"><span data-stu-id="2dda3-121">Retry</span></span></li></ul> | <span data-ttu-id="2dda3-122">**小売とコマース \> バックオフィスの設定 \> パラメーター \> コマース スケジューラー パラメーター**に移動し、**試行回数** フィールドを **3** に設定します。</span><span class="sxs-lookup"><span data-stu-id="2dda3-122">Go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce scheduler parameters**, and set the **Try count** field to **3**.</span></span> <span data-ttu-id="2dda3-123">このフィールドの値が大きすぎる場合は、利用率の高い時間帯にダウンロード セッションが失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2dda3-123">If the value of this field is too high, download sessions might fail during high-usage times.</span></span> |
| <ul><li><span data-ttu-id="2dda3-124">機能プロファイル</span><span class="sxs-lookup"><span data-stu-id="2dda3-124">Functionality profile</span></span></li><li><span data-ttu-id="2dda3-125">データのリテンション期間</span><span class="sxs-lookup"><span data-stu-id="2dda3-125">Data retention</span></span></li><li><span data-ttu-id="2dda3-126">返品ポリシー</span><span class="sxs-lookup"><span data-stu-id="2dda3-126">Return policy</span></span></li> | <span data-ttu-id="2dda3-127">**小売とコマース \> チャネル設定 \> POS 設定 \> POS プロファイル \> 機能プロファイル** に移動し、続いて**機能**セクションで、**トランザクションの存在日数** フィールドを返品ポリシーに対して定義されている値と同じか、またはそれに近い値に設定します。</span><span class="sxs-lookup"><span data-stu-id="2dda3-127">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profile**, and then, in the **Functions** section, set the **Days transactions exist** field to a value that is the same as, or close to, the value that is defined for the return policy.</span></span> <span data-ttu-id="2dda3-128">例えば、返品ポリシーに "30日以内の返品可能" と記載されている場合は、このフィールドを**30**、 **31**に設定します。また、通常のポリシーを超えて特別な例外が認められている場合は **60** に設定します (この場合は通常の返品ポリシー期間の倍になるため、通常のポリシーの期間を超えてもより迅速な返品が可能となります)。</span><span class="sxs-lookup"><span data-stu-id="2dda3-128">For example, if the return policy states an item can be returned within 30 days, set this field to **30**, **31**, or **60** if special exceptions are allowed beyond the normal policy (this would be twice the normal policy, allowing for faster returns even beyond the normal policy limits).</span></span> |
| <ul><li><span data-ttu-id="2dda3-129">チャネル データベース グループ</span><span class="sxs-lookup"><span data-stu-id="2dda3-129">Channel database group</span></span></li><li><span data-ttu-id="2dda3-130">配送スケジュール</span><span class="sxs-lookup"><span data-stu-id="2dda3-130">Distribution schedule</span></span></li><li><span data-ttu-id="2dda3-131">オフライン プロファイル</span><span class="sxs-lookup"><span data-stu-id="2dda3-131">Offline profile</span></span></li><li><span data-ttu-id="2dda3-132">一時停止</span><span class="sxs-lookup"><span data-stu-id="2dda3-132">Pause</span></span></li><li><span data-ttu-id="2dda3-133">データ</span><span class="sxs-lookup"><span data-stu-id="2dda3-133">Data</span></span></li><li><span data-ttu-id="2dda3-134">ダウンロード</span><span class="sxs-lookup"><span data-stu-id="2dda3-134">Download</span></span></li></ul> | <span data-ttu-id="2dda3-135">新たに生成された端末に割り当てる "ダミー" のデータベース グループ (どの配布スケジュール ジョブにも関連付けられていないグループ)、または**オフライン同期の一時停止** オプションが **はい** に設定されている特別なオフライン プロファイルのいずれかを持つことを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2dda3-135">We highly recommend that you have either a "dummy" channel database group (that is, a group that isn't associated with any distribution schedule job) that you assign to the newly generated terminals, or a special offline profile where the **Pause offline synchronization** option is set to **Yes**.</span></span> <span data-ttu-id="2dda3-136">このようにして、データ生成は、必要なときにシステムが最も可用性が高い時に行うことができます。</span><span class="sxs-lookup"><span data-stu-id="2dda3-136">In this way, data generation can occur when it's required and when the system is most available to do it.</span></span> <span data-ttu-id="2dda3-137">(ただし、システムによっては必要に応じて何度か一時停止する場合があります。)</span><span class="sxs-lookup"><span data-stu-id="2dda3-137">(However, the system might pause multiple times as required.)</span></span> |

## <a name="practices-that-affect-performance"></a><span data-ttu-id="2dda3-138">パフォーマンスに影響を与えるプラクティス</span><span class="sxs-lookup"><span data-stu-id="2dda3-138">Practices that affect performance</span></span>

| <span data-ttu-id="2dda3-139">関連する領域</span><span class="sxs-lookup"><span data-stu-id="2dda3-139">Associated areas</span></span> | <span data-ttu-id="2dda3-140">ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="2dda3-140">Best practice</span></span> |
|------------------|---------------|
| <ul><li><span data-ttu-id="2dda3-141">チャネル データベース グループ</span><span class="sxs-lookup"><span data-stu-id="2dda3-141">Channel database group</span></span></li><li><span data-ttu-id="2dda3-142">オフライン プロファイル</span><span class="sxs-lookup"><span data-stu-id="2dda3-142">Offline profile</span></span></li><li><span data-ttu-id="2dda3-143">一時停止</span><span class="sxs-lookup"><span data-stu-id="2dda3-143">Pause</span></span></li><li><span data-ttu-id="2dda3-144">データ</span><span class="sxs-lookup"><span data-stu-id="2dda3-144">Data</span></span></li><li><span data-ttu-id="2dda3-145">ダウンロード</span><span class="sxs-lookup"><span data-stu-id="2dda3-145">Download</span></span></li></ul> | <p><span data-ttu-id="2dda3-146">オフライン データベースが使用できるように、データが必要になるまではオフライン データベース用のデータを生成しないでください。</span><span class="sxs-lookup"><span data-stu-id="2dda3-146">Don't generate data for offline databases until that data is required so that an offline database can be used.</span></span> <span data-ttu-id="2dda3-147">次のシナリオでは、なぜこのベスト プラクティスが重要なのかを示しています。</span><span class="sxs-lookup"><span data-stu-id="2dda3-147">The following scenario shows why this best practice is important.</span></span></p><p><span data-ttu-id="2dda3-148">関連するチャネル データベースのグループに追加された最新の POS オフライン データベースは、データベースの完全な同期が行われた後の既存のダウンロードセッションをすべて継承します。</span><span class="sxs-lookup"><span data-stu-id="2dda3-148">A new Modern POS offline database that has been added to the relevant channel database group inherits all existing download sessions since the last full database synchronization occurred.</span></span> <span data-ttu-id="2dda3-149">オフライン端末を持つ最新の POS インスタンスが新たに 100 個作成され、2 ヶ月間完全な同期が発生していない。</span><span class="sxs-lookup"><span data-stu-id="2dda3-149">One hundred new Modern POS instances that have offline terminals are created, and a full synchronization hasn't occurred in two months.</span></span> <span data-ttu-id="2dda3-150">20 分ごとに実際に変更があるのは、5 つのスケジューラ ジョブだけです。</span><span class="sxs-lookup"><span data-stu-id="2dda3-150">Only five scheduler jobs have actual changes every 20 minutes.</span></span> <span data-ttu-id="2dda3-151">(たとえば、これらの変更には価格と割引、または頻繁に更新される顧客が含まれる場合があります)。このシナリオでは、新たに作成された端末が有効化されているか、このデータを適用できるかどうかに関わらず、最大で 200 万のダウンロード セッションがただちに生成され、適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2dda3-151">(For example, these changes might involve prices and discounts, or customers, which can be updated often.) In this scenario, up to 2,000,000 download sessions are immediately generated and must be applied, regardless of whether the newly created terminals are activated and capable of applying this data.</span></span></p><p><span data-ttu-id="2dda3-152">多くの場合、このタイプの例外的なデータ生成は大規模であり、パフォーマンスに影響します。</span><span class="sxs-lookup"><span data-stu-id="2dda3-152">Even at the best times, this type of exceptional data generation is large and affects performance.</span></span> <span data-ttu-id="2dda3-153">稼働率の高い (最も忙しい時間) 時間帯の場合、環境のパフォーマンスが著しく損なわれることになります。</span><span class="sxs-lookup"><span data-stu-id="2dda3-153">At the worst (that is, busiest) times, it severely impairs the environment's performance.</span></span> <span data-ttu-id="2dda3-154">そのため、新たに生成された端末に割り当てる "ダミー" のデータベース グループ (どの配布スケジュール ジョブにも関連付けられていないグループ) を持つか、またはオフライン プロファイルで使用する**オフライン同期の一時停止** オプションを **はい** に設定することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2dda3-154">Therefore, we highly recommend that you either have a "dummy" channel database group (that is, a group that isn't associated with any distribution schedule job) that you assign to the newly generated terminals, or set the **Pause offline synchronization** option for the offline profile to **Yes**.</span></span> <span data-ttu-id="2dda3-155">**オフライン同期の一時停止**オプションを **はい**に設定することで、オフライン プロファイルを使用したすべてのデータ生成を停止できます。</span><span class="sxs-lookup"><span data-stu-id="2dda3-155">By setting the **Pause offline synchronization** option to **Yes**, you stop data generation for anything that uses the offline profile.</span></span> <span data-ttu-id="2dda3-156">そのため、データの生成は必要となったタイミングでのみ行われ、システムの可用性が高い状態でのみ行われます。</span><span class="sxs-lookup"><span data-stu-id="2dda3-156">Therefore, data generation can occur only when it's required, instead of constantly, and only when the system is most available to do it.</span></span> <span data-ttu-id="2dda3-157">(ただし、システムによっては必要に応じて何度か一時停止する場合があります。)</span><span class="sxs-lookup"><span data-stu-id="2dda3-157">(However, the system might pause multiple times as required.)</span></span> |
| <ul><li><span data-ttu-id="2dda3-158">配送スケジュール</span><span class="sxs-lookup"><span data-stu-id="2dda3-158">Distribution schedule</span></span></li><li><span data-ttu-id="2dda3-159">スケジューラ ジョブ</span><span class="sxs-lookup"><span data-stu-id="2dda3-159">Scheduler jobs</span></span></li><li><span data-ttu-id="2dda3-160">アップロード</span><span class="sxs-lookup"><span data-stu-id="2dda3-160">Upload</span></span></li></ul> | <span data-ttu-id="2dda3-161">P-ジョブ (アップロード バッチ ジョブ) は複数実行できません。</span><span class="sxs-lookup"><span data-stu-id="2dda3-161">No more than one P-job (upload batch job) should occur at any time.</span></span> <span data-ttu-id="2dda3-162">並行して発生する可能性のある P- ジョブ アップロードの一括ジョブが複数作成された場合、アップロードされたトランザクションのデータを適用している間にテーブル ロックや遅延 (パフォーマンスの低下) が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2dda3-162">If multiple P-job upload batch jobs are created that might occur in parallel, table locking and delays (performance degradation) could occur while data of the uploaded transactions is being applied.</span></span> <span data-ttu-id="2dda3-163">同時に複数のジョブを実行する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="2dda3-163">The job doesn't have to occur multiple times at the same time.</span></span> <span data-ttu-id="2dda3-164">頻繁に発生する可能性が考えられます。</span><span class="sxs-lookup"><span data-stu-id="2dda3-164">It can just occur frequently.</span></span> |

## <a name="resources"></a><span data-ttu-id="2dda3-165">リソース</span><span class="sxs-lookup"><span data-stu-id="2dda3-165">Resources</span></span>

- [<span data-ttu-id="2dda3-166">Commerce Data Exchange のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="2dda3-166">Commerce Data Exchange troubleshooting</span></span>](CDX-Troubleshooting.md) 
- [<span data-ttu-id="2dda3-167">Commerce Data Exchange 実装ガイダンス</span><span class="sxs-lookup"><span data-stu-id="2dda3-167">Commerce Data Exchange implementation guidance</span></span>](implementation-considerations-cdx.md) 
- [<span data-ttu-id="2dda3-168">Dynamics 365 Commerce アーキテクチャの概要</span><span class="sxs-lookup"><span data-stu-id="2dda3-168">Dynamics 365 Commerce architecture overview</span></span>](../commerce-architecture.md) 
- [<span data-ttu-id="2dda3-169">ストア内トポロジの選択</span><span class="sxs-lookup"><span data-stu-id="2dda3-169">Select an in-store topology</span></span>](retail-in-store-topology.md) 
- [<span data-ttu-id="2dda3-170">デバイス管理実装ガイダンス</span><span class="sxs-lookup"><span data-stu-id="2dda3-170">Device management implementation guidance</span></span>](../implementation-considerations-devices.md) 
- [<span data-ttu-id="2dda3-171">Modern POS (MPOS) のコンフィギュレーション、インストール、および有効化</span><span class="sxs-lookup"><span data-stu-id="2dda3-171">Configure, install, and activate Modern POS (MPOS)</span></span>](../retail-modern-pos-device-activation.md) 
- [<span data-ttu-id="2dda3-172">Commerce Scale Unit のコンフィギュレーションとインストール (自己ホスト)</span><span class="sxs-lookup"><span data-stu-id="2dda3-172">Configure and install Commerce Scale Unit (self-hosted)</span></span>](retail-store-scale-unit-configuration-installation.md) 
