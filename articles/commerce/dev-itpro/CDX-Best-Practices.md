---
title: Commerce Data Exchange のベスト プラクティス
description: このトピックは、Microsoft Dynamics 365 Commerce 環境にデータ同期 (Commerce Data Exchange、または CDX) に関連する機能を実装するユーザーを対象としています。 実装にあたってのベスト プラクティスのアドバイスを提供します。
author: jashanno
manager: AnnBe
ms.date: 08/01/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailTerminalTable, RetailDevice
audience: IT Pro
ms.reviewer: sericks
ms.search.scope: Core, Operations, Retail
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail
ms.author: jashanno
ms.search.validFrom: 2020-08-31
ms.dyn365.ops.version: 10.0.12
ms.openlocfilehash: 84c2cd8b92a94f4134d8dd901dfc26784c50d6aa
ms.sourcegitcommit: 2bcacef1e010c312f019dbf9740ce87d627848a7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/20/2020
ms.locfileid: "3712559"
---
# <a name="commerce-data-exchange-best-practices"></a>Commerce Data Exchange のベスト プラクティス
[!include[banner](../includes/banner.md)]

このトピックは、Microsoft Dynamics 365 Commerce 環境にデータ同期 (Commerce Data Exchange \[CDX]) に関連する機能を実装するユーザーを対象としています。 実装にあたってのベスト プラクティスのアドバイスを提供します。

## <a name="overview"></a>概要

データの構成と同期を適切に行うことは、実装が正しく機能するために非常に重要となります。 ビジネス要件、IT インフラストラクチャ、および全体的な準備にかかわらず、データが正しく同期されていないと、環境全体が実質的に役に立たなくなります。 したがって、コマース本部から Commerce Scale Unit を経由してオフライン データベースを持つ最新の POS を使用する実店舗に至るまで、完全な実装の全体にわたってデータの設定、生成、同期、検証に必要なものを把握することが最優先事項となります。

このトピックに進む前に、チャネル (店舗)、レジスターとデバイス、および Modern POS オフライン データベースの概念を理解することが重要です。 したがって、このトピックの最後にある 「デバイス管理実装ガイダンス」や「Commerce アーキテクチャの概要」などのリソースを確認することをお勧めします。

このトピックの主な内容は以下の表にまとめました。最初の列にはタグの似た「関連する領域」のリストが含まれており、関心のある分野に関するベストプラクティスをすばやく見つけることができます。 新しい実装については、これらのテーブルをコピーし、さまざまなベスト プラクティスが完成したときにチェックできる場所にコピーしておくと役立つ場合があります。 このようにして、本番に移る前に可実装が準備されているかどうかを能な限り確認することができます。

## <a name="valuable-configurations"></a>便利な構成

| 関連する領域 | ベスト プラクティス |
|------------------|---------------|
| <ul><li>パラメーター</li><li>コマース スケジューラ</li><li>再試行</li></ul> | **小売とコマース \> バックオフィスの設定 \> パラメーター \> コマース スケジューラー パラメーター**に移動し、**試行回数** フィールドを **3** に設定します。 このフィールドの値が大きすぎる場合は、利用率の高い時間帯にダウンロード セッションが失敗する可能性があります。 |
| <ul><li>機能プロファイル</li><li>データのリテンション期間</li><li>返品ポリシー</li> | **小売とコマース \> チャネル設定 \> POS 設定 \> POS プロファイル \> 機能プロファイル** に移動し、続いて**機能**セクションで、**トランザクションの存在日数** フィールドを返品ポリシーに対して定義されている値と同じか、またはそれに近い値に設定します。 例えば、返品ポリシーに "30日以内の返品可能" と記載されている場合は、このフィールドを**30**、 **31**に設定します。また、通常のポリシーを超えて特別な例外が認められている場合は **60** に設定します (この場合は通常の返品ポリシー期間の倍になるため、通常のポリシーの期間を超えてもより迅速な返品が可能となります)。 |
| <ul><li>チャネル データベース グループ</li><li>配送スケジュール</li><li>オフライン プロファイル</li><li>一時停止</li><li>データ</li><li>ダウンロード</li></ul> | 新たに生成された端末に割り当てる "ダミー" のデータベース グループ (どの配布スケジュール ジョブにも関連付けられていないグループ)、または**オフライン同期の一時停止** オプションが **はい** に設定されている特別なオフライン プロファイルのいずれかを持つことを強くお勧めします。 このようにして、データ生成は、必要なときにシステムが最も可用性が高い時に行うことができます。 (ただし、システムによっては必要に応じて何度か一時停止する場合があります。) |

## <a name="practices-that-affect-performance"></a>パフォーマンスに影響を与えるプラクティス

| 関連する領域 | ベスト プラクティス |
|------------------|---------------|
| <ul><li>チャネル データベース グループ</li><li>オフライン プロファイル</li><li>一時停止</li><li>データ</li><li>ダウンロード</li></ul> | <p>オフライン データベースが使用できるように、データが必要になるまではオフライン データベース用のデータを生成しないでください。 次のシナリオでは、なぜこのベスト プラクティスが重要なのかを示しています。</p><p>関連するチャネル データベースのグループに追加された最新の POS オフライン データベースは、データベースの完全な同期が行われた後の既存のダウンロードセッションをすべて継承します。 オフライン端末を持つ最新の POS インスタンスが新たに 100 個作成され、2 ヶ月間完全な同期が発生していない。 20 分ごとに実際に変更があるのは、5 つのスケジューラ ジョブだけです。 (たとえば、これらの変更には価格と割引、または頻繁に更新される顧客が含まれる場合があります)。このシナリオでは、新たに作成された端末が有効化されているか、このデータを適用できるかどうかに関わらず、最大で 200 万のダウンロード セッションがただちに生成され、適用する必要があります。</p><p>多くの場合、このタイプの例外的なデータ生成は大規模であり、パフォーマンスに影響します。 稼働率の高い (最も忙しい時間) 時間帯の場合、環境のパフォーマンスが著しく損なわれることになります。 そのため、新たに生成された端末に割り当てる "ダミー" のデータベース グループ (どの配布スケジュール ジョブにも関連付けられていないグループ) を持つか、またはオフライン プロファイルで使用する**オフライン同期の一時停止** オプションを **はい** に設定することを強くお勧めします。 **オフライン同期の一時停止**オプションを **はい**に設定することで、オフライン プロファイルを使用したすべてのデータ生成を停止できます。 そのため、データの生成は必要となったタイミングでのみ行われ、システムの可用性が高い状態でのみ行われます。 (ただし、システムによっては必要に応じて何度か一時停止する場合があります。) |
| <ul><li>配送スケジュール</li><li>スケジューラ ジョブ</li><li>アップロード</li></ul> | P-ジョブ (アップロード バッチ ジョブ) は複数実行できません。 並行して発生する可能性のある P- ジョブ アップロードの一括ジョブが複数作成された場合、アップロードされたトランザクションのデータを適用している間にテーブル ロックや遅延 (パフォーマンスの低下) が発生する可能性があります。 同時に複数のジョブを実行する必要はありません。 頻繁に発生する可能性が考えられます。 |

## <a name="resources"></a>リソース

- [Commerce Data Exchange のトラブルシューティング](CDX-Troubleshooting.md) 
- [Commerce Data Exchange 実装ガイダンス](implementation-considerations-cdx.md) 
- [Dynamics 365 Commerce アーキテクチャの概要](../commerce-architecture.md) 
- [ストア内トポロジの選択](retail-in-store-topology.md) 
- [デバイス管理実装ガイダンス](../implementation-considerations-devices.md) 
- [Modern POS (MPOS) のコンフィギュレーション、インストール、および有効化](../retail-modern-pos-device-activation.md) 
- [Commerce Scale Unit のコンフィギュレーションとインストール (自己ホスト)](retail-store-scale-unit-configuration-installation.md) 
