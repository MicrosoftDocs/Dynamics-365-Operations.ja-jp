---
title: Modern POS (MPOS) のインストール、構成、有効化
description: このトピックでは、さまざまなプラットフォームで Modern POS を構成、ダウンロード、インストールする方法について説明します。 デバイスの有効化を通じて Modern POS を有効化する方法について説明します。
author: jashanno
ms.date: 04/06/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailChannelManagementWorkspace, RetailDevice, RetailTerminalTable
audience: Developer, IT Pro
ms.reviewer: josaw
ms.custom: 20501
ms.assetid: 1a8dba89-f81b-40d5-9e1e-dba7b335600d
ms.search.region: Global
ms.search.industry: Retail
ms.author: jashanno
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: fffc69dc40e03bc23523d731cf71e51047502e94
ms.sourcegitcommit: 97ada5d52ed1829dcf030dad254096cd8df25da8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/06/2021
ms.locfileid: "5864342"
---
# <a name="configure-install-and-activate-modern-pos-mpos"></a><span data-ttu-id="ecae5-104">Modern POS (MPOS) のインストール、構成、有効化</span><span class="sxs-lookup"><span data-stu-id="ecae5-104">Configure, install, and activate Modern POS (MPOS)</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="ecae5-105">このトピックでは、さまざまなプラットフォームで Modern POS を構成、ダウンロード、インストールする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-105">This topic describes how to configure, download, and install Modern POS on various platforms.</span></span> <span data-ttu-id="ecae5-106">デバイスの有効化を通じて Modern POS を有効化する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-106">It then describes how to activate Modern POS through device activation.</span></span>

> [!NOTE]
> <span data-ttu-id="ecae5-107">最新の POS インストーラーには、Modern POS とオフラインの Modern POS (このインストーラーでもオフライン データベースをインストールします) の 2 つが用意されています。</span><span class="sxs-lookup"><span data-stu-id="ecae5-107">There are two Modern POS installers: Modern POS and Modern POS with offline (this installer also installs the offline database).</span></span>
>
> <span data-ttu-id="ecae5-108">リリース 10.0.11 以降、ClientBroker フォルダーに保存されているカスタマイズ ファイルを変更すると、新しいリリースをインストールするときに問題が発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-108">Starting in release 10.0.11, altering customized files that are stored in the ClientBroker folder could cause issues when installing a newer release.</span></span> <span data-ttu-id="ecae5-109">これらの問題には、オフラインの使用不可、または新しいインストーラーが正常に完了できないことが含まれることがあります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-109">These issues might include the inability to go offline or a newer installer failing to complete successfully.</span></span> <span data-ttu-id="ecae5-110">回避策として、新しいインストーラーを使用してインストールを実行する前に、Modern POS ディレクトリの ClientBroker フォルダーにあるファイルを削除することができます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-110">A workaround is to remove the files in the ClientBroker folder in the Modern POS directory before performing the installation using the newer installer.</span></span>
> 
> <span data-ttu-id="ecae5-111">10.0.15 リリースから、以前のバージョンからの更新時に Modern POS 用のクライアント ブローカー フォルダーにあるファイルへのカスタマイズによりエラーが発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-111">Starting in 10.0.15 release, customizations to files in the Client broker folder for Modern POS can cause an error when updating from a previous version.</span></span> <span data-ttu-id="ecae5-112">既知の回避策は、新しい Modern POS インストーラーを実行する前に、クライアント ブローカー フォルダーからすべてのファイルを削除することです。</span><span class="sxs-lookup"><span data-stu-id="ecae5-112">The known workaround is to delete all files from the Client broker folder prior to running the newer Modern POS installer.</span></span> <span data-ttu-id="ecae5-113">自動化については、インストーラーの事前ステップとして、簡単にスクリプトを記述することができます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-113">For automation, this can easily be scripted as a pre-step for the installer.</span></span> <span data-ttu-id="ecae5-114">このフォルダー内のすべてのファイルを削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-114">All files in this folder must be deleted.</span></span> <span data-ttu-id="ecae5-115">このエラーが発生すると、新しいインストーラーは現在のインストールを正常に更新します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-115">When this error occurs, the newer installer will update the current installation correctly.</span></span>

## <a name="technology"></a><span data-ttu-id="ecae5-116">テクノロジ</span><span class="sxs-lookup"><span data-stu-id="ecae5-116">Technology</span></span>

<span data-ttu-id="ecae5-117">セルフサービス プロセスでは、Modern POS インストーラーの適切なバージョンをダウンロードし、販売時点管理 (POS) レジスターとして使用する物理デバイスにインストールできます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-117">The self-service process lets you download the appropriate version of the Modern POS installer and install it on the physical device that you want to use as the point of sale (POS) register.</span></span> <span data-ttu-id="ecae5-118">デバイスの有効化は、物理デバイスを Headquarters のレジスターに結びつける主要なオンボード手順です。</span><span class="sxs-lookup"><span data-stu-id="ecae5-118">Device activation is the main onboarding step that ties the physical device to a register in Headquarters.</span></span> <span data-ttu-id="ecae5-119">この機能の主要な技術的な機能を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-119">Here are the main technical functions of this feature:</span></span>

- <span data-ttu-id="ecae5-120">物理デバイスをビジネス エンティティに関連付けます (登録)。</span><span class="sxs-lookup"><span data-stu-id="ecae5-120">Tie a physical device to a business entity (register).</span></span>
- <span data-ttu-id="ecae5-121">Microsoft Azure Active Directory (Azure AD) およびデバイス トークン/ID を通してセキュリティを強化します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-121">Provide enhanced security through Microsoft Azure Active Directory (Azure AD) and a device token/ID.</span></span>
- <span data-ttu-id="ecae5-122">Modern POS の権限のないリモート使用を阻止します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-122">Stop unauthorized remote use of Modern POS.</span></span> <span data-ttu-id="ecae5-123">(つまり、リモートでデバイスを無効化します。)</span><span class="sxs-lookup"><span data-stu-id="ecae5-123">(In other words, deactivate a device remotely.)</span></span>
- <span data-ttu-id="ecae5-124">POS の最初のタッチポイントとして簡単な Modern POS の機能 (番号順序、ハードウェア プロファイル、商社情報) の設定を初期化します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-124">Initialize settings for easy Modern POS functioning (number sequence, hardware profile, merchant information) as the first touchpoint of the POS.</span></span>
- <span data-ttu-id="ecae5-125">Payment Card Industry (PCI) 規格に準拠し、Headquarters からのデバイス情報を報告します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-125">Comply with payment card industry (PCI) standards, and report on device information from Headquarters.</span></span>

> [!NOTE]
> <span data-ttu-id="ecae5-126">オンプレミス環境で使用するための Modern POS をインストールする場合、Modern POS はデバイスの有効化に Azure Active Directory の資格情報を使用しません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-126">If you are installing Modern POS for use with an on-premises environment, Modern POS does not use Azure Active Directory credentials for device activation.</span></span>

## <a name="setup"></a><span data-ttu-id="ecae5-127">セットアップ</span><span class="sxs-lookup"><span data-stu-id="ecae5-127">Setup</span></span>

<span data-ttu-id="ecae5-128">このトピックで説明されている手順を開始する前に、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-128">Before you start the steps that are outlined in this topic, follow these steps.</span></span>

- <span data-ttu-id="ecae5-129">Headquarters にサインインするための資格情報があることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-129">Verify that you have credentials to sign in to Headquarters.</span></span>
- <span data-ttu-id="ecae5-130">デバイスに Modern POS をインストールするための管理者アクセス権またはルート アクセス権があることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-130">Verify that you have administrative or root access to install Modern POS on a device.</span></span>
- <span data-ttu-id="ecae5-131">デバイスから Commerce Scale Unit にアクセスできることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-131">Verify that you can access the Commerce Scale Unit from the device.</span></span>
- <span data-ttu-id="ecae5-132">その環境に、**人事管理** モジュールのコマース アクセス許可グループとジョブが含まれていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-132">Verify that the environment contains the Commerce permission groups and jobs in the **Human resources** module.</span></span> <span data-ttu-id="ecae5-133">これらの権限グループとジョブは、デモ データの一部としてインストールされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-133">These permission groups and jobs should have been installed as part of the demo data.</span></span>

## <a name="download-and-install-modern-pos"></a><span data-ttu-id="ecae5-134">Modern POS のダウンロードおよびインストール</span><span class="sxs-lookup"><span data-stu-id="ecae5-134">Download and install Modern POS</span></span>

### <a name="verify-that-the-device-is-correctly-configured"></a><span data-ttu-id="ecae5-135">デバイスが正しくコンフィギュレーションされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-135">Verify that the device is correctly configured</span></span>

1. <span data-ttu-id="ecae5-136">Headquarters で、**Retail と Commerce** &gt; **チャネル** &gt; **チャネル配置** に移動します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-136">In Headquarters, go to **Retail and Commerce** &gt; **Channels** &gt; **Channel deployment**.</span></span>
2. <span data-ttu-id="ecae5-137">**チャネル配置** ページで、**レジスター** タイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-137">On the **Channel deployment** page, select the **Registers** tile.</span></span>
3. <span data-ttu-id="ecae5-138">**レジスター** ページで、店舗のレジスターを選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-138">On the **Registers** page, select a store register.</span></span> <span data-ttu-id="ecae5-139">デモ データはヒューストン店舗を完全に定義し、セルフサービスを登録しています。</span><span class="sxs-lookup"><span data-stu-id="ecae5-139">The demo data thoroughly defines the Houston store and registers for self-service.</span></span> <span data-ttu-id="ecae5-140">ヒューストン レジスタを見つけるには、デバイス リストの上部にあるフィルターで **Houston** と入力します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-140">To find the Houston registers, enter **Houston** in the filter at the top of the list of devices.</span></span>

4. <span data-ttu-id="ecae5-141">**レジスター番号** 列でレジスター番号を選択することにより、レジスターを選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-141">Select a register by selecting the register number in the **Register number** column.</span></span> <span data-ttu-id="ecae5-142">Houston 店舗では、レジスター Houston-3 が適切に定義されているため、例として役立ちます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-142">In the Houston store, register Houston-3 is well defined and is therefore useful as an example.</span></span>

5. <span data-ttu-id="ecae5-143">レジスターのページの、**一般** で、**オフライン サポート** オプションが **いいえ** に設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-143">On the page for the register, under **General**, verify that the **Support offline** option is set to **No**.</span></span> <span data-ttu-id="ecae5-144">オフライン サポートを使用するには、アクション ウィンドウで **編集** を選択し、**オフライン サポート** オプションを **はい** に設定します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-144">To use offline support, on the Action Pane, select **Edit**, and then set **Support offline** option to **Yes**.</span></span>

### <a name="download-the-modern-pos-installer"></a><span data-ttu-id="ecae5-145">Modern POS インストーラーのダウンロード</span><span class="sxs-lookup"><span data-stu-id="ecae5-145">Download the Modern POS installer</span></span>

1. <span data-ttu-id="ecae5-146">**ようこそ** ページで、左上隅のメニューを使用して、**Retail と Commerce** &gt; **チャンネル** &gt; **チャネル配置** に移動します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-146">On the **Welcome** page, use the menu in the upper left to go to **Retail and Commerce** &gt; **Channels** &gt; **Channel deployment**.</span></span>
2. <span data-ttu-id="ecae5-147">**チャネル配置** ページで、**デバイス** タイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-147">On the **Channel deployment** page, select the **Devices** tile.</span></span>
3. <span data-ttu-id="ecae5-148">デバイスを選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-148">Select a device.</span></span>

    > [!NOTE]
    > - <span data-ttu-id="ecae5-149">Houston デバイスが適切に定義されています。</span><span class="sxs-lookup"><span data-stu-id="ecae5-149">The Houston devices are well defined.</span></span> <span data-ttu-id="ecae5-150">Houston-3 は、Microsoft Windows デスクトップまたはタブレットの例として役立ちます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-150">Houston-3 is useful as an example for a Microsoft Windows desktop or tablet.</span></span> <span data-ttu-id="ecae5-151">Houston-21 は、Windows Phone の例として役立ちます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-151">Houston-21 is useful as an example for a Windows Phone.</span></span>
    > - <span data-ttu-id="ecae5-152">デバイスを選択すると、アクション ウィンドウの **ダウンロード** ボタンを使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-152">When you select a device, the **Download** button on the Action Pane becomes available.</span></span>

4. <span data-ttu-id="ecae5-153">**ダウンロード** を選択し、**構成ファイル** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-153">Select **Download**, and then select **Configuration file**.</span></span> <span data-ttu-id="ecae5-154">次の点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-154">Note the following:</span></span>
    
    - <span data-ttu-id="ecae5-155">ブラウザーは、生成されたダウンロード ポップアップをブロックする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-155">Browsers might block the download pop-up that is generated.</span></span> <span data-ttu-id="ecae5-156">**1 回許可** または **このサイトのオプション** &gt; **常に許可** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-156">You must select either **Allow once** or **Options for this site** &gt; **Always allow**.</span></span> <span data-ttu-id="ecae5-157">次に、デバイスが選択されているときに **ダウンロード** を再度選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-157">Then, while the device is still selected, select **Download** again.</span></span>
    - <span data-ttu-id="ecae5-158">構成ファイルは、Modern POS インストーラーと同じ場所に保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-158">The configuration file must be saved to the same location as the Modern POS installer.</span></span> <span data-ttu-id="ecae5-159">セキュリティ上の理由から、インストールの完了後に、このファイルを削除します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-159">For security reasons, delete this file after installation is completed.</span></span> <span data-ttu-id="ecae5-160">構成ファイルが、実行可能なインストーラーと同じファイル名でない場合は、コマンド ラインを使用して実行可能ファイルを実行して構成ファイルを指定するか、XML 構成ファイルの名前を実行可能ファイル名と同じベース名に変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-160">If the configuration file is not the same file name as the installer executable, either the executable must be run using the command line to specify the configuration file or you need to rename the XML configuration file to have the same base name as the executable file name.</span></span>

5. <span data-ttu-id="ecae5-161">Internet Explorer ウィンドウの下部に表示される通知バーで、**保存** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-161">On the Notification bar that appears at the bottom of the Internet Explorer window, select **Save**.</span></span> <span data-ttu-id="ecae5-162">(通知バーは、他のブラウザでは別の場所に表示される場合があります。)</span><span class="sxs-lookup"><span data-stu-id="ecae5-162">(The Notification bar might appear in a different place in other browsers.)</span></span>
6. <span data-ttu-id="ecae5-163">**ダウンロード** を選択し、**Retail Modern POS** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-163">Select **Download**, and then select **Retail Modern POS**.</span></span> <span data-ttu-id="ecae5-164">次の点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-164">Note the following:</span></span>

    - <span data-ttu-id="ecae5-165">ブラウザーは、生成されたダウンロード ポップアップをブロックする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-165">Browsers might block the download pop-up that is generated.</span></span> <span data-ttu-id="ecae5-166">**1 回許可** または **このサイトのオプション** &gt; **常に許可** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-166">You must select either **Allow once** or **Options for this site** &gt; **Always allow**.</span></span> <span data-ttu-id="ecae5-167">次に、デバイスが選択されているときに **ダウンロード** を再度選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-167">Then, while the device is still selected, select **Download** again.</span></span>
    - <span data-ttu-id="ecae5-168">使用する必要があるインストール パッケージは、オフライン サポートが必要かどうか、および Modern POS をインストールするデバイスが Windows タブレットまたは電話デバイス (Windows Phone、Android デバイス、または iOS デバイス) かどうかによって異なります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-168">The installation package that you must use varies, depending on whether you require offline support, and whether the device that Modern POS will be installed on is a Windows tablet or a phone device (such as a Windows Phone, an Android device, or an iOS device).</span></span> <span data-ttu-id="ecae5-169">レジスターの設定と、デバイスに設定されているアプリケーションのタイプに基づいて、適切なパッケージがダウンロード用に自動的に選択されます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-169">The correct package is automatically selected for download, based on the register settings and the application type that is set for the device.</span></span> <span data-ttu-id="ecae5-170">Windows タブレットでオフライン パッケージが選択されていますが、Microsoft SQL Server がまだインストールされていない場合 (またはオフライン パッケージの要件を満たしていない場合)、SQL Server はダウンロードされません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-170">If the offline package is selected for a Windows tablet, but Microsoft SQL Server isn't already installed (or if it doesn't meet the requirements for the offline package), SQL Server is no longer downloaded.</span></span> <span data-ttu-id="ecae5-171">SQL Server (および全文検索などの関連する必須機能) をインストールして、インストーラーを再度試行します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-171">Install SQL Server (and associated prerequisite features, such as Full-text search) and attempt the installer again.</span></span>

7. <span data-ttu-id="ecae5-172">Internet Explorer ウィンドウの下部に表示される通知バーで、**保存** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-172">On the Notification bar that appears at the bottom of the Internet Explorer window, select **Save**.</span></span> <span data-ttu-id="ecae5-173">(通知バーは、他のブラウザでは別の場所に表示される場合があります。)</span><span class="sxs-lookup"><span data-stu-id="ecae5-173">(The Notification bar might appear in a different place in other browsers.)</span></span>
8. <span data-ttu-id="ecae5-174">セットアップ インストーラが保存されたら、通知バーの、**実行** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-174">After the setup installer has been saved, on the Notification bar, select **Run**.</span></span> <span data-ttu-id="ecae5-175">(この手順はブラウザによって異なる場合があります。)</span><span class="sxs-lookup"><span data-stu-id="ecae5-175">(This step might differ, depending on your browser.)</span></span>

### <a name="before-running-the-modern-pos-installer"></a><span data-ttu-id="ecae5-176">Modern POS インストーラーを実行する前に</span><span class="sxs-lookup"><span data-stu-id="ecae5-176">Before running the Modern POS installer</span></span>

- <span data-ttu-id="ecae5-177">すべての [システム要件](../fin-and-ops/get-started/system-requirements.md) を満たしていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-177">Make sure that all [system requirements](../fin-and-ops/get-started/system-requirements.md) are met.</span></span>
- <span data-ttu-id="ecae5-178">一時的にウィルス対策アプリケーションを無効にすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-178">It is recommended to temporarily turn off antivirus applications.</span></span>  <span data-ttu-id="ecae5-179">積極的なウィルス対策ソリューションの場合、使用中のアクティブなファイルをチェックしたときに、ウィルス対策ソリューションがフリーズする可能性があることが報告されています。</span><span class="sxs-lookup"><span data-stu-id="ecae5-179">It has been noted that on aggressive antivirus solutions, the installation may stall due to the antivirus solution checking active files while in use.</span></span>
- <span data-ttu-id="ecae5-180">インストーラーは、最新のアプリケーションをサイドロードします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-180">The installer will sideload a modern application.</span></span> <span data-ttu-id="ecae5-181">したがって、サイドロードされたアプリケーションを許可するようにグループ ポリシー エントリを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-181">Therefore, a Group Policy entry must be set to allow for sideloaded applications.</span></span> <span data-ttu-id="ecae5-182">インストーラーは、このインストールを可能にするために、次のように関連するレジストリ キーを変更します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-182">The installer will change the associated registry key as follows to allow for this installation:</span></span>
    - <span data-ttu-id="ecae5-183">**パス:** HKLM:SoftwarePoliciesMicrosoftWindowsAppx</span><span class="sxs-lookup"><span data-stu-id="ecae5-183">**Path:** HKLM:SoftwarePoliciesMicrosoftWindowsAppx</span></span>     
    - <span data-ttu-id="ecae5-184">**プロパティ:** AllowAllTrustedApps</span><span class="sxs-lookup"><span data-stu-id="ecae5-184">**Property:** AllowAllTrustedApps</span></span>
    - <span data-ttu-id="ecae5-185">**値:** 1</span><span class="sxs-lookup"><span data-stu-id="ecae5-185">**Value:** 1</span></span>
- <span data-ttu-id="ecae5-186">オフラインが使用されている (オフライン データベースが作成されている) 場合、既定の SQL Server のインスタンスが存在している必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-186">If offline is used (an offline database created), then a default SQL Server instance must exist.</span></span> <span data-ttu-id="ecae5-187">SQL Server のインスタンスが存在していても、既定として設定されていない場合、インストーラーはオフライン データベースのインストールに失敗します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-187">If SQL Server instances exist, but none are set as the default, then the installer will fail to install the offline database.</span></span>

<span data-ttu-id="ecae5-188">オンプレミス環境で使用する Modern POS をインストールする場合は、次のようにコマンド ラインからインストーラーを起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-188">If you are installing Modern POS for use with an on-premises environment, you must start the installer from a command line as follows:</span></span>

```Console
ModernPosSetupOffline.exe -UseAdfsAuthentication
```

### <a name="run-the-modern-pos-installer-on-a-windows-computer"></a><span data-ttu-id="ecae5-189">Windows コンピューターで Modern POS インストーラーを実行する</span><span class="sxs-lookup"><span data-stu-id="ecae5-189">Run the Modern POS installer on a Windows computer</span></span>

<span data-ttu-id="ecae5-190">Modern POS インストーラーは、まず関連付けられているファイルを抽出し、インストールを開始します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-190">The Modern POS installer first extracts the associated files and then starts the installation.</span></span>

1. <span data-ttu-id="ecae5-191">インストーラーは、すべての前提条件が満たされていることを検証します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-191">The installer validates that all prerequisites are met.</span></span> <span data-ttu-id="ecae5-192">次の点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-192">Note the following:</span></span>

    - <span data-ttu-id="ecae5-193">システムの再起動が必要な場合は、インストーラーでこれに関する要件を確認できますが、通常インストールを続行できます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-193">If a system restart is required, the installer informs you about this requirement, but the installation can typically continue.</span></span>
    - <span data-ttu-id="ecae5-194">Modern POS のサイドローディング インストールには、グループ ポリシーの変更が必要です。</span><span class="sxs-lookup"><span data-stu-id="ecae5-194">A sideloaded installation of Modern POS requires a Group Policy change.</span></span> <span data-ttu-id="ecae5-195">この変更が必要かどうかがインストーラーによって通知され、自動的に変更されます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-195">The installer informs you if this change is required and then makes the change automatically.</span></span>

2. <span data-ttu-id="ecae5-196">オフライン サポートを選択しましたが、有効なバージョンの SQL Server が見つからない場合、前提条件の確認中にインストーラーは失敗します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-196">If you selected offline support, but a valid version of SQL Server isn't found, the installer will fail during the prerequisites check.</span></span> <span data-ttu-id="ecae5-197">この手順で前提条件が満たされない場合は、まずインストーラを再試行してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-197">If a prerequisite fails during this step, first retry the installer.</span></span> <span data-ttu-id="ecae5-198">それでもインストーラーに失敗する場合は、このトピックの[トラブルシューティング](#troubleshooting)を参照します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-198">If the installer continues to fail, see the [Troubleshooting](#troubleshooting) section of this topic.</span></span>

3. <span data-ttu-id="ecae5-199">インストーラーは Modern POS をインストールします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-199">The installer installs Modern POS.</span></span>
4. <span data-ttu-id="ecae5-200">インストールが成功したことを示すページで、**閉じる** を選択しインストーラーを終了します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-200">On the page that states that installation was successful, select **Close** to exit the installer.</span></span>

<span data-ttu-id="ecae5-201">プログラムを開始できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="ecae5-201">You can now start the program.</span></span>

> [!NOTE]
> <span data-ttu-id="ecae5-202">このインストールは、インストーラーを実行した管理者ユーザーに対してのみ行われます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-202">This installation occurs only for the administrator user who ran the installer.</span></span> <span data-ttu-id="ecae5-203">その他のすべてのユーザーについては、Modern POS をインストールするデスクトップ アイコンが作成されます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-203">For all other users, a desktop icon to install Modern POS is created.</span></span> <span data-ttu-id="ecae5-204">ユーザーがサインインするたびに、そのユーザーがアイコンをダブルクリックする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-204">Every time that a user signs in, he or she must double-click this icon.</span></span> <span data-ttu-id="ecae5-205">その後、要求に応じて、プログラムがインストールまたは更新されます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-205">The program will then be installed or updated, as required.</span></span> <span data-ttu-id="ecae5-206">更新後にユーザーがデスクトップ アイコンを使用しない場合、POS クライアントは、実行する前に正しく更新されるように、デスクトップ アイコンからら実行するようユーザーに POS クライアントより要求されます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-206">If a user doesn't use the desktop icon after an update, the POS client will request that the user run from the desktop icon instead to update correctly prior to running.</span></span>

### <a name="run-the-installer-on-any-other-device-windows-phone-google-android-device-or-apple-ios-device"></a><span data-ttu-id="ecae5-207">その他のデバイス (Windows Phone、Google Android デバイス、または Apple iOS デバイス) でインストーラーを実行する</span><span class="sxs-lookup"><span data-stu-id="ecae5-207">Run the installer on any other device (Windows Phone, Google Android device, or Apple iOS device)</span></span>

1. <span data-ttu-id="ecae5-208">アプリケーションが、デバイスに直接ダウンロードされなかった場合、ダウンロードしたアプリケーション ファイルと関連付けられている構成ファイルをデバイス上の同じフォルダに転送します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-208">If the application wasn't downloaded directly to the device, transfer the downloaded app file and the associated configuration file to the same folder on the device.</span></span> <span data-ttu-id="ecae5-209">デバイスの種類によっては、APP ファイル、APK ファイル、または IPA ファイルになります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-209">Depending on the type of device, the app file will be an APPX, APK, or IPA file.</span></span>

    <span data-ttu-id="ecae5-210">このステップはさまざまな方法で実行できることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-210">Note that this step can be done in various ways.</span></span> <span data-ttu-id="ecae5-211">たとえば、共有フォルダー、USB ケーブル経由での転送、またはユーザーのデバイスへの安全な送信を通してファイルにアクセスすることができます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-211">For example, the files can be accessed through a shared folder, transferred via USB cable, or securely mailed to the user's device.</span></span>

2. <span data-ttu-id="ecae5-212">デバイスのファイル エクスプローラーを使用して、アプリ ディレクトリを参照します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-212">Use a file explorer on the device to browse to the app directory.</span></span>
3. <span data-ttu-id="ecae5-213">アプリケーションのインストールを開始するためにアプリケーションをタップします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-213">Tap the app to begin application installation.</span></span> <span data-ttu-id="ecae5-214">(構成ファイルが同じ場所に保存されている場合は、アプリケーションを起動してデバイスの有効化を開始すると、Commerce Scale Unit URL が自動的に入力されます。)</span><span class="sxs-lookup"><span data-stu-id="ecae5-214">(If the configuration file was saved to the same location, the Commerce Scale Unit URL will be automatically entered when you start the application and begin device activation.)</span></span>

    <span data-ttu-id="ecae5-215">一部のデバイスでは、アプリケーションのインストールを開始するためにファイルをダブルタップする必要があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-215">Note that some devices require that you double-tap the file to begin application installation.</span></span> <span data-ttu-id="ecae5-216">一部のデバイスは、アプリケーションがインストールされたことを通知しないことがあります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-216">Some devices might not notify you that an application has been installed.</span></span> <span data-ttu-id="ecae5-217">これらのデバイスで、アプリケーション一覧を見て、アプリケーションが正しくインストールされたことを確認することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-217">On those devices, we recommend that you look at the application list to verify that the application was correctly installed.</span></span>

4. <span data-ttu-id="ecae5-218">インストールが完了したら、デバイス上のアプリケーション一覧にあるアプリケーションを起動できるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-218">When the installation is completed, you should be able to start the application from the application list on the device.</span></span> <span data-ttu-id="ecae5-219">たとえば、Windows Phone にアプリケーションをインストールした後は、ホーム画面のタイルの一覧から開始できます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-219">For example, after you install the application on a Windows Phone, you can start it from the home screen tiles list.</span></span>

<span data-ttu-id="ecae5-220">プログラムを開始できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="ecae5-220">You can now start the program.</span></span>

## <a name="create-a-worker"></a><span data-ttu-id="ecae5-221">作業者を作成</span><span class="sxs-lookup"><span data-stu-id="ecae5-221">Create a worker</span></span>

<span data-ttu-id="ecae5-222">このトピックのでは、既に作業者を作成し、彼らを提供されているデモ データ内のヒューストン アドレス帳に割り当てました。</span><span class="sxs-lookup"><span data-stu-id="ecae5-222">For this topic, we have already created workers and assigned them to the Houston address book in the demo data that is provided.</span></span> <span data-ttu-id="ecae5-223">したがって、このトピックでは事前生成データを使用します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-223">Therefore, this topic will use pre-generated data.</span></span>

### <a name="create-a-worker"></a><span data-ttu-id="ecae5-224">作業者を作成</span><span class="sxs-lookup"><span data-stu-id="ecae5-224">Create a worker</span></span>

1. <span data-ttu-id="ecae5-225">**Retail と Commerce** &gt; **従業員** &gt; **作業者** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-225">Go to **Retail and Commerce** &gt; **Employees** &gt; **Workers**.</span></span>
2. <span data-ttu-id="ecae5-226">アクション パネルにて **+新規** を選択して新しい従業員を作成します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-226">On the Action Pane, select **New** to create a new employee.</span></span>
3. <span data-ttu-id="ecae5-227">名前および姓を入力します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-227">Enter the first and last name.</span></span> <span data-ttu-id="ecae5-228">たとえば、**John** を名として、**Smith** を姓として入力します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-228">For example, enter **John** as the first name and **Smith** as the last name.</span></span>
4. <span data-ttu-id="ecae5-229">**法人** フィールドが **USRT** に設定され、**作業者の種類** フィールドが **従業員** に設定され、**雇用開始日** フィールドが当日の午前 12 時に設定されていることを確認し、従業員の雇用がすぐに開始されるようにします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-229">Verify that the **Legal entity** field is set to **USRT**, the **Worker type** field is set to **Employee**, and the **Employment start date** field is set to the current date at 12 AM, so that the worker's employment starts immediately.</span></span>
5. <span data-ttu-id="ecae5-230">**職位の割り当て** チェック ボックスを選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-230">Select the **Assign a position** check box.</span></span> <span data-ttu-id="ecae5-231">ストア マネージャーの職位ある職位番号 **000544** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-231">Select position number **000544**, which is the Store manager position.</span></span>
6. <span data-ttu-id="ecae5-232">**個人のアクション タイプ** フィールドを **採用アクション** に設定し、すぐに新しい従業員を雇用します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-232">Set the **Personnel action type** field to **Hire Action** to hire a new employee immediately.</span></span>
7. <span data-ttu-id="ecae5-233">**続行** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-233">Select **Continue**.</span></span>
8. <span data-ttu-id="ecae5-234">アクション ウィンドウで、**完了** を選択し新しい作業者の作成を終了します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-234">On the Action Pane, select **Complete** to finish creating the new worker.</span></span>
9. <span data-ttu-id="ecae5-235">作業者リストに戻ります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-235">Return to the worker list.</span></span> <span data-ttu-id="ecae5-236">新しく作成された作業者 (たとえば、John Smith など) を検索します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-236">Search for the newly created worker (for example, John Smith).</span></span> <span data-ttu-id="ecae5-237">新しい作業者の詳細を表示する作業者の名前を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-237">Select the worker's name to see the details of the new worker.</span></span>
10. <span data-ttu-id="ecae5-238">アクション ウィンドウで、**編集** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-238">On the Action Pane, select **Edit**.</span></span>
11. <span data-ttu-id="ecae5-239">作業者用の言語が **ja-JP** になっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-239">Verify that the language for the worker is **en-us**.</span></span>
12. <span data-ttu-id="ecae5-240">**作業者集計** の **アドレス帳** フィールドで、**ヒューストン** ストアを選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-240">Under **Worker summary**, in the **Address books** field, select the **Houston** store.</span></span>
13. <span data-ttu-id="ecae5-241">**コマース** タブで、POS パスワードをリセットすることができます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-241">On the **Commerce** tab, you can reset the POS password.</span></span> <span data-ttu-id="ecae5-242">このチュートリアルでは、パスワードを **123** にリセットします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-242">For this tutorial, reset the password to **123**.</span></span>
14. <span data-ttu-id="ecae5-243">**コマース** タブの、**画面レイアウト** で、画面レイアウトを割り当てます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-243">On the **Commerce** tab, under **Screen layout**, assign a screen layout.</span></span> <span data-ttu-id="ecae5-244">たとえば、**F2MP16:9M** (**Fabrikam MPOS マネージャー (16:9)**) を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-244">For example, select **F2MP16:9M** (**Fabrikam MPOS Manager (16:9)**).</span></span>
15. <span data-ttu-id="ecae5-245">アクション ウィンドウで、**保存** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-245">On the Action Pane, select **Save**.</span></span>
16. <span data-ttu-id="ecae5-246">**Retail と Commerce** &gt; **定期処理** &gt; **配送スケジュール** の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-246">Go to **Retail and Commerce** &gt; **Periodic** &gt; **Distribution schedule**.</span></span>
17. <span data-ttu-id="ecae5-247">**1060 – スタッフ** ジョブを選択し、アクション ウィンドウで **今すぐ実行** を選択して作業者データをチャネル データベースに同期します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-247">Select the **1060 – Staff** job, and then, on the Action Pane, select **Run now** to sync the worker data to the channel database.</span></span>
18. <span data-ttu-id="ecae5-248">新しい作業者が作成され、店舗に同期された後、作業者ジョン スミスは割り当てられたヒューストン ストアで使用されているすべての POS デバイスにサインインし、トランザクションを実行できます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-248">After the new worker has been created and synced to stores, worker John Smith can sign in to any POS device that is used in the HOUSTON store that he is assigned to, and he can perform transactions on that device.</span></span> <span data-ttu-id="ecae5-249">ただし、デバイスが最初に有効になっている必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-249">However, the device must be activated first.</span></span> <span data-ttu-id="ecae5-250">次のセクションでは、新しい作業者用のデバイスを有効にする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-250">The following section explains how to activate a device for a new worker.</span></span>

### <a name="map-an-azure-ad-account-to-a-worker-who-has-pos-permissions-for-device-activation"></a><span data-ttu-id="ecae5-251">デバイスの有効化の POS アクセス許可がある作業者に、Azure AD アカウントをマップする</span><span class="sxs-lookup"><span data-stu-id="ecae5-251">Map an Azure AD account to a worker who has POS permissions for device activation</span></span>

<span data-ttu-id="ecae5-252">新しい作業者の Modern POS をアクティブにする前に、この手順を完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-252">You must complete this procedure before you activate Modern POS for a new worker.</span></span>

1. <span data-ttu-id="ecae5-253">コマースの **作業者** ページから、前の手順で作成した作業者の **作業者の詳細** ページを開きます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-253">In Commerce, from the **Worker** page, open the **Worker details** page for the worker that you created in the previous procedure.</span></span>
2. <span data-ttu-id="ecae5-254">アクション ウィンドウで、**編集** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-254">On the Action Pane, select **Edit**.</span></span>
3. <span data-ttu-id="ecae5-255">**コマース** タブで、**POS アクセス許可** リンクを選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-255">On the **Commerce** tab, select the **POS permissions** link.</span></span> <span data-ttu-id="ecae5-256">**POS のアクセス許可グループ** で、値が **マネージャ** であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-256">Under **POS permission group**, verify that the value is **Manager**.</span></span>
4. <span data-ttu-id="ecae5-257">完了したら、新しい作業者の **作業者の詳細** のページに戻ります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-257">When you've finished, return to the **Worker details** page for the new worker.</span></span>

    <span data-ttu-id="ecae5-258">**作業者の詳細** ページに戻るには、アクション ウィンドウの右側にある **閉じる** ボタン (**X**) を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-258">To return to the **Worker details** page, select the **Close** button (**X**) on the right side of the Action Pane.</span></span>

5. <span data-ttu-id="ecae5-259">アクション ウィンドウで、**コマース** を選択し、**既存の ID の関連付け** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-259">On the Action Pane, select **Commerce**, and then select **Associate existing identity**.</span></span>
6. <span data-ttu-id="ecae5-260">表示されるダイアログ ボックスで、**AX 管理の管理者** という Azure AD アカウントを選択します。(代替管理者の Azure AD アカウントが作成されている場合は、そのアカウントを選択します。)</span><span class="sxs-lookup"><span data-stu-id="ecae5-260">In the dialog box that appears, select the Azure AD account that is named **admin AX Admin**. (If an alternative administrator Azure AD account has been created, select that account instead.)</span></span>
7. <span data-ttu-id="ecae5-261">**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-261">Select **OK**.</span></span> <span data-ttu-id="ecae5-262">デモ データでは、Headquarters で管理者アカウントに関連付けられている Azure AD アカウントが、管理者 Azure AD アカウントです。</span><span class="sxs-lookup"><span data-stu-id="ecae5-262">In the demo data, the Azure AD account that is associated with the administrator account in Headquarters is your administrator Azure AD account.</span></span>
8. <span data-ttu-id="ecae5-263">アクション ウィンドウで、**保存** を選択し、ページを更新します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-263">On the Action Pane, select **Save**, and then refresh the page.</span></span> <span data-ttu-id="ecae5-264">**外部 ID** セクションは、新しい情報で更新される必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-264">The **External identity** section should be now updated with the new information.</span></span>

    <span data-ttu-id="ecae5-265">**外部識別子** フィールドは空のままになることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-265">Note that the **External identifier** field will remain empty.</span></span> <span data-ttu-id="ecae5-266">この動作は予期されています。</span><span class="sxs-lookup"><span data-stu-id="ecae5-266">This behavior is expected.</span></span> <span data-ttu-id="ecae5-267">したがって、これは無視できます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-267">Therefore, you can ignore it.</span></span>

<span data-ttu-id="ecae5-268">この手順は、Retail Cloud POS または Modern POS を有効化する前に完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-268">This procedure should be completed before you activate Retail Cloud POS or Modern POS.</span></span> <span data-ttu-id="ecae5-269">詳細については、[有効化アカウントの管理とデバイスの検証](set-up-activation-accounts-validate-devices-hq.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-269">For more information, see [Manage activation accounts and validate devices](set-up-activation-accounts-validate-devices-hq.md).</span></span>

### <a name="run-the-validate-devices-for-activation-check"></a><span data-ttu-id="ecae5-270">有効化チェックのためにデバイス検証を実行</span><span class="sxs-lookup"><span data-stu-id="ecae5-270">Run the Validate Devices for Activation check</span></span>

1. <span data-ttu-id="ecae5-271">Headquarters で、**デバイス** ページ (**Retail と Commerce** &gt; **POS の設定** &gt; **デバイス**) を開きます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-271">In Headquarters, open the **Device** page (**Retail and Commerce** &gt; **Setup POS** &gt; **Devices**).</span></span>
2. <span data-ttu-id="ecae5-272">デバイスの有効化を検証するデバイスを選択し、**デバイスで有効化を検証する** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-272">Select the device to validate for device activation, and then select **Validate Devices for Activation**.</span></span> <span data-ttu-id="ecae5-273">たとえば、デバイスの **HOUSTON-3** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-273">For example, select device **HOUSTON-3**.</span></span>
3. <span data-ttu-id="ecae5-274">表示されるダイアログ ボックスで、デバイスを検証する作業者 (前の手順で Azure AD アカウントにマップされた作業者) を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-274">In the dialog box that appears, select the worker to validate the device for (that is, the worker that you mapped to the Azure AD account in the previous procedure).</span></span> <span data-ttu-id="ecae5-275">たとえば、作業者の **000160** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-275">For example, select worker **000160**.</span></span>
4. <span data-ttu-id="ecae5-276">**OK** を選択し、次のメッセージが表示されることを確認します。「デバイス HOUSTON-3 とスタッフ 000160 の有効化前の検証が完了しました。</span><span class="sxs-lookup"><span data-stu-id="ecae5-276">Select **OK**, and make sure that you receive the following message: "Pre-Activation validation completed for Device HOUSTON-3 and Staff 000160.</span></span> <span data-ttu-id="ecae5-277">検証: 成功</span><span class="sxs-lookup"><span data-stu-id="ecae5-277">Validation: Passed"</span></span>

## <a name="activate-a-device"></a><span data-ttu-id="ecae5-278">デバイスのアクティブ化</span><span class="sxs-lookup"><span data-stu-id="ecae5-278">Activate a device</span></span>

> [!NOTE]
> <span data-ttu-id="ecae5-279">Azure Active Directory トークンが取得できないため、クラウド POS デバイスのデバイスのアクティブ化中に Safari ブラウザーでエラーが表示されることがあります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-279">It is possible for the Safari browser to show an error during device activation of a Cloud POS device due to an Azure Active Directory token being unattainable.</span></span> <span data-ttu-id="ecae5-280">この問題は、[Apple デバイスの Microsoft Enterprise SSO プラグイン](https://docs.microsoft.com/azure/active-directory/develop/apple-sso-plugin) を利用することで解決できます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-280">You can resolve this issue by utilizing the [Microsoft Enterprise SSO plug-in for Apple devices](https://docs.microsoft.com/azure/active-directory/develop/apple-sso-plugin).</span></span>

1. <span data-ttu-id="ecae5-281">コンピューターで Modern POS を起動します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-281">Start Modern POS on your computer.</span></span> <span data-ttu-id="ecae5-282">**開始する前に** ページの手順を読み、完了したことを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-282">Read the instructions on the **Before you start** page, and make sure that they are completed.</span></span> <span data-ttu-id="ecae5-283">その後、**次へ** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-283">Then select **Next**.</span></span>
2. <span data-ttu-id="ecae5-284">**有効化** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-284">Select **Activate**.</span></span> <span data-ttu-id="ecae5-285">Azure AD サインイン ページにリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-285">You're redirected to the Azure AD sign-in page.</span></span>
3. <span data-ttu-id="ecae5-286">`admin@<MyCompany>.onmicrosoft.com` など、以前マップした Azure AD アカウントおよびパスワードを入力します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-286">Enter the Azure AD account that you mapped earlier, such as `admin@<MyCompany>.onmicrosoft.com`, and the password.</span></span>
4. <span data-ttu-id="ecae5-287">有効化が完了したら、**開始** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-287">When activation is completed, select **Get Started**.</span></span>
5. <span data-ttu-id="ecae5-288">作業者アカウント **000160** とパスワード **123** を使用して Modern POS にサインインします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-288">Sign in to Modern POS by using worker account **000160** and the password **123**.</span></span>

<span data-ttu-id="ecae5-289">デバイスが有効化され、使用する準備ができました。</span><span class="sxs-lookup"><span data-stu-id="ecae5-289">The device should now be activated and ready to use.</span></span>

## <a name="update-the-modern-pos-application"></a><span data-ttu-id="ecae5-290">Modern POS アプリケーションの更新</span><span class="sxs-lookup"><span data-stu-id="ecae5-290">Update the Modern POS application</span></span>

> [!NOTE]
> <span data-ttu-id="ecae5-291">配置可能パッケージの詳細については、[配置可能パッケージの適用](../dev-itpro/deployment/apply-deployable-package-system.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-291">To learn more about deployable packages, see [Apply a deployable package](../dev-itpro/deployment/apply-deployable-package-system.md).</span></span>

1. <span data-ttu-id="ecae5-292">Modern POS アプリケーションが環境にアップロードされた後、デバイスでパッケージのバージョンを選択することができます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-292">After a Modern POS application is uploaded into the environment, the version of the package can be selected on the device.</span></span> <span data-ttu-id="ecae5-293">パッケージ一覧には、新しいアップロードされたアプリケーションが含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-293">The package listings should include the new uploaded application.</span></span>
2. <span data-ttu-id="ecae5-294">Modern POS アプリケーションを更新するには、[Modern POS のダウンロードおよびインストール](#download-and-install-modern-pos) セクションの手順に従ってください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-294">To update the Modern POS application, follow the steps in the [Download and install Modern POS](#download-and-install-modern-pos) section.</span></span> <span data-ttu-id="ecae5-295">インプレース更新を行うには、新しいバージョンのセルフ サービス インストーラーを実行します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-295">To do an in-place update, just run the newer version of the self-service installer.</span></span> <span data-ttu-id="ecae5-296">アンインストールは必須でないか、推奨されていません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-296">Uninstallation isn't required or recommended.</span></span> <span data-ttu-id="ecae5-297">デバイスの有効化状態は更新後も維持されます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-297">Device activation status will be maintained after the update.</span></span>
3. <span data-ttu-id="ecae5-298">インストーラーは、現在インストールされているコンフィギュレーション設定を使用します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-298">The installer will use the currently installed configuration settings.</span></span> <span data-ttu-id="ecae5-299">コマースでのさまざまな構成の変更によって構成ファイルが変更されている場合、更新によって Modern POS アプリケーションの設定が変更されることはありません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-299">If the configuration file has changed, because of various configuration changes in Commerce, an update won't change the Modern POS application settings.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="ecae5-300">トラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="ecae5-300">Troubleshooting</span></span>

### <a name="troubleshoot-installation"></a><span data-ttu-id="ecae5-301">インストールに関するトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="ecae5-301">Troubleshoot installation</span></span>

- <span data-ttu-id="ecae5-302">ブラウザーが、生成されるダウンロード ポップアップをブロックします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-302">Your browser blocks the download pop-up that is generated.</span></span>

    <span data-ttu-id="ecae5-303">**ソリューション:** いずれかを選択 **1 回のみ許可** または **このサイトのオプション** &gt; **常に許可** (または使用しているブラウザーで同等のコマンド)。</span><span class="sxs-lookup"><span data-stu-id="ecae5-303">**Solution:** Select either **Allow once** or **Options for this site** &gt; **Always allow** (or the equivalent commands in the browser that you're using).</span></span> <span data-ttu-id="ecae5-304">次に、正しいレジスターが選択されているときに **ダウンロード** を再度選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-304">Then, while the correct register is still selected, select **Download** again.</span></span>

- <span data-ttu-id="ecae5-305">使用する必要があるインストール パッケージは、オフライン サポートが必要かどうかによって異なります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-305">The installation package that you must use depends on whether you require offline support.</span></span> <span data-ttu-id="ecae5-306">適切なパッケージがダウンロード用に自動的に選択されます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-306">The correct package is automatically selected for download.</span></span> <span data-ttu-id="ecae5-307">オフライン パッケージについては、SQL Server がインストールされている必要があり、オフライン パッケージの要件を満たす必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-307">For the offline package, SQL Server must be installed and must meet the requirements for the offline package.</span></span>

    <span data-ttu-id="ecae5-308">**ソリューション:** SQL Server のインストールが完了していない場合 (または要件を満たしていない場合)、サポートされているバージョンのインストールが必要です。</span><span class="sxs-lookup"><span data-stu-id="ecae5-308">**Solution:** If SQL Server isn't already installed (or if it doesn't meet the requirements), installation of a supported version is required.</span></span> <span data-ttu-id="ecae5-309">このインストールは長い期間がかかることがあり、全文検索機能を含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-309">This installation might require an extended period of time and must include the Full-text search feature.</span></span>

- <span data-ttu-id="ecae5-310">このインストールは、インストーラーを実行した管理者ユーザーに対してのみ行われ、その他のユーザーに対しては行われません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-310">The installation occurs only for the administrator user who ran the installer, but not for any other users.</span></span>

    <span data-ttu-id="ecae5-311">**ソリューション:** インストーラーは、Modern POS のインストール、アップグレード、および実行に使用されるデスクトップ アイコンを生成します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-311">**Solution:** The installer generates a desktop icon that is used to install, upgrade, and run Modern POS.</span></span> <span data-ttu-id="ecae5-312">このアイコンは、コンピューター上のすべてのユーザーに対して生成されます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-312">This icon is generated for every user on the computer.</span></span> <span data-ttu-id="ecae5-313">Modern POS をインストールする必要があるユーザーがこのアイコンをダブルクリックすると、そのプログラムがインストールされます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-313">When a user who must install Modern POS double-clicks this icon, the program is installed.</span></span> <span data-ttu-id="ecae5-314">ユーザーは Modern POS を使用できます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-314">The user can then start to use Modern POS.</span></span>

- <span data-ttu-id="ecae5-315">セルフ サービス Modern POS インストーラーを使うと、SQL Server が正常にダウンロードおよびインストールされません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-315">SQL Server isn't successfully downloaded and installed through the self-service Modern POS installer.</span></span>

    - <span data-ttu-id="ecae5-316">**ソリューション 1:** インストーラーは自動的に SQL Server をダウンロードしなくなりました。</span><span class="sxs-lookup"><span data-stu-id="ecae5-316">**Solution 1:** The installer no longer downloads SQL Server automatically.</span></span>  <span data-ttu-id="ecae5-317">前提条件のインストールを満たすために、サポートされているバージョンの SQL Server を全文検索でダウンロードおよびインストールします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-317">Download and install a supported version of SQL Server with Full-text search to meet prerequisite installation.</span></span>

- <span data-ttu-id="ecae5-318">パフォーマンス (perf) カウンターの登録に失敗したため、Modern POS のインストールが失敗します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-318">The installation of Modern POS fails, because the registration of performance (perf) counters failed.</span></span>

    <span data-ttu-id="ecae5-319">**ソリューション:** この問題を解決するには、次の手順に従ってください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-319">**Solution:** Follow these steps to fix this issue:</span></span>

    1. <span data-ttu-id="ecae5-320">管理者として **コマンド プロンプト** ウィンドウを開きます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-320">Open a **Command Prompt** window as an administrator.</span></span>
    2. <span data-ttu-id="ecae5-321">次のコマンドを入力します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-321">Enter the following command.</span></span>

        ```Console
        lodctr /s:"perf_backup.txt"
        ```

    3. <span data-ttu-id="ecae5-322">次のコマンドを入力します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-322">Enter the following command.</span></span>

        ```Console
        lodctr /R
        ```

    4. <span data-ttu-id="ecae5-323">システムでシステムのバックアップのパフォーマンス カウンター設定が再構築されない場合、**lodctr/R** コマンドを再実行します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-323">If the system doesn't rebuild the performance counter settings from the system backup, rerun the **lodctr /R** command.</span></span>
    5. <span data-ttu-id="ecae5-324">Modern POS インストーラーを再実行します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-324">Rerun the Modern POS installer.</span></span>

- <span data-ttu-id="ecae5-325">クラウド ホスト環境ではなくダウンロードした仮想ハード ディスク (VHD) を使用している場合、ダウンローダーが失敗する場合があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-325">If you're using a downloaded virtual hard disk (VHD) instead of a cloud-hosted environment, the downloader might fail.</span></span>

    - <span data-ttu-id="ecae5-326">**ソリューション 1:** ダウンロードした VHD では、Azure Storage エミュレーターがインストールされており、正しく動作している必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-326">**Solution 1:** In a downloaded VHD, the Azure Storage Emulator must be installed and must be running correctly.</span></span> <span data-ttu-id="ecae5-327">そうしないと、セルフサービス パッケージを正しくダウンロードすることはできません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-327">Otherwise, the self-service packages can't be downloaded correctly.</span></span>
    - <span data-ttu-id="ecae5-328">**ソリューション 2:** VHD を Microsoft Hyper-V に統合するプロセス中にエラーが発生した可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-328">**Solution 2:** A failure might have occurred during the process of integrating the VHD into Microsoft Hyper-V.</span></span> <span data-ttu-id="ecae5-329">パッケージを正しくダウンロードする前に、手動でアクセス許可を編集する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-329">You must manually edit permissions before the packages can be downloaded correctly.</span></span> <span data-ttu-id="ecae5-330">以下の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-330">Follow these steps:</span></span>

        1. <span data-ttu-id="ecae5-331">ファイル エクスプローラーで、**C:\\Microsoft Dynamics 365\\70\\Retail Server** を参照します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-331">In File Explorer, browse to **C:\\Microsoft Dynamics 365\\70\\Retail Server**.</span></span>
        2. <span data-ttu-id="ecae5-332">**SelfServicePackages** フォルダーを右クリックし、**プロパティ** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-332">Right-click the **SelfServicePackages** folder, and then select **Properties**.</span></span>
        3. <span data-ttu-id="ecae5-333">**セキュリティ** タブで、**編集** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-333">On the **Security** tab, select **Edit**.</span></span>
        4. <span data-ttu-id="ecae5-334">**SelfServiceDeployment のアクセス許可** ダイアログ ボックスで、**追加** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-334">In the **Permissions for SelfServiceDeployment** dialog box, select **Add**.</span></span>
        5. <span data-ttu-id="ecae5-335">**ユーザー、コンピュータ、サービス アカウント、またはグループの選択** ダイアログ ボックスで、**場所** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-335">In the **Select Users, Computers, Service Accounts, or Groups** dialog box, select **Locations**.</span></span>
        6. <span data-ttu-id="ecae5-336">**場所** ダイアログ ボックスで、リスト (ローカル コンピューター) の最初のエントリを選択し、**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-336">In the **Locations** dialog box, select the first entry in the list (the local computer), and then select **OK**.</span></span>
        7. <span data-ttu-id="ecae5-337">**ユーザー、コンピュータ、サービス アカウント、またはグループの選択** ダイアログ ボックスで、**IIS\_IUSRS** という名前を入力してから **名前の確認** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-337">In the **Select Users, Computers, Service Accounts, or Groups** dialog box, enter the name **IIS\_IUSRS**, and then select **Check names**.</span></span> <span data-ttu-id="ecae5-338">オブジェクト名は、**IIS\_IUSRS** に変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-338">The object name should be changed to **IIS\_IUSRS**.</span></span> <span data-ttu-id="ecae5-339">**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-339">Select **OK**.</span></span>
        8. <span data-ttu-id="ecae5-340">**SelfServiceDeployment のアクセス許可** ダイアログ ボックスで、新しい **IIS\_ISURS** ユーザーを選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-340">In the **Permissions for SelfServiceDeployment** dialog box, select the new **IIS\_ISURS** user.</span></span> <span data-ttu-id="ecae5-341">**IIS\_IUSRS のアクセス許可** の **フル コントロール** アクセス許可で **許可** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-341">Under **Permissions for IIS\_IUSRS**, select **Allow** for the **Full control** permission.</span></span> <span data-ttu-id="ecae5-342">**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-342">Select **OK**.</span></span>
        9. <span data-ttu-id="ecae5-343">**アクセス許可を開く** ダイアログ ボックスで、**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-343">In the **Open permission** dialog box, select **OK**.</span></span>

- <span data-ttu-id="ecae5-344">最新の iOS バージョンでは、自己署名証明書をサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-344">The latest iOS version does not support your self-signed certificate.</span></span>

    <span data-ttu-id="ecae5-345">**ソリューション 1:** ドメインを使用して、適切なドメイン ベースの証明書を生成します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-345">**Solution 1:** Utilize a domain and generate a proper domain-based certificate.</span></span>
    
    <span data-ttu-id="ecae5-346">**ソリューション 2:** オープン ソース OpenSSL ライブラリをダウンロードし、インストールの完了後に次の手順を実行します:</span><span class="sxs-lookup"><span data-stu-id="ecae5-346">**Solution 2:** Download the open source OpenSSL library and perform the following after completing installation:</span></span>
  
  1. <span data-ttu-id="ecae5-347">PowerShell を使用して、**$ openssl genrsa -des3 -out rootCA.key 2048** などのコマンドを使用して、ルート証明機関 (CA) の秘密キーを作成します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-347">Using PowerShell, create a private key for the root Certificate Authority (CA) using a command such as **$ openssl genrsa -des3 -out rootCA.key 2048**.</span></span>
        2. <span data-ttu-id="ecae5-348">パスワードの入力を求められますが、パスワードは後で使用するために覚えておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-348">You will be prompted for a password, which must be remembered for later usage.</span></span>
        3. <span data-ttu-id="ecae5-349">次に、**$ openssl req -x509 -new -nodes -key rootCA.key -sha256 -days 1024 -out rootCA.pem** などのコマンドを使用してルート証明書を生成します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-349">Next, generate the root certificate using a command such as **$ openssl req -x509 -new -nodes -key rootCA.key -sha256 -days 1024 -out rootCA.pem**.</span></span>  <span data-ttu-id="ecae5-350">以前に入力したパスワードと、いくつかの基本的な証明書情報を求めるプロンプトが表示されます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-350">There will be a prompt for the password entered previously and some basic certificate information.</span></span>
     
     > [!NOTE]
     > <span data-ttu-id="ecae5-351">証明書の有効期間は変更できます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-351">The number of days the certificate is valid for can be altered.</span></span> <span data-ttu-id="ecae5-352">上記の例では、これは 1024 日です。</span><span class="sxs-lookup"><span data-stu-id="ecae5-352">In the above example this is 1024 days.</span></span>   
     
        4. <span data-ttu-id="ecae5-353">新しい **info.ext** ファイルを作成し、次の情報を入力します:</span><span class="sxs-lookup"><span data-stu-id="ecae5-353">Create a new **info.ext** file and enter the following details:</span></span>
          - <span data-ttu-id="ecae5-354">keyUsage = keyEncipherment, dataEncipherment</span><span class="sxs-lookup"><span data-stu-id="ecae5-354">keyUsage = keyEncipherment, dataEncipherment</span></span>
          - <span data-ttu-id="ecae5-355">extendedKeyUsage = 1.3.6.1.5.5.7.3.1</span><span class="sxs-lookup"><span data-stu-id="ecae5-355">extendedKeyUsage = 1.3.6.1.5.5.7.3.1</span></span>
          - <span data-ttu-id="ecae5-356">subjectAltName = @alt_names</span><span class="sxs-lookup"><span data-stu-id="ecae5-356">subjectAltName = @alt_names</span></span>
          - <span data-ttu-id="ecae5-357">[alt_names]</span><span class="sxs-lookup"><span data-stu-id="ecae5-357">[alt_names]</span></span>
          - <span data-ttu-id="ecae5-358">DNS: 1 = &lt;ホスト コンピュータの完全修飾ドメイン名&gt;</span><span class="sxs-lookup"><span data-stu-id="ecae5-358">DNS.1 = &lt;FULLY QUALIFIED DOMAIN NAME OF HOST COMPUTER&gt;</span></span>
        5. <span data-ttu-id="ecae5-359">**openssl req -new -nodes -out server.csr -newkey rsa:2048 -keyout server.key** などのコマンドを使用して、署名要求と秘密キーを生成します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-359">Generate the signing request and private key using a command such as **openssl req -new -nodes -out server.csr -newkey rsa:2048 -keyout server.key**.</span></span>
        6. <span data-ttu-id="ecae5-360">**$ openssl x509 -req -in server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days 500 -sha256 -extfile info.ext** などのコマンドを使用して、以前に生成されたルート証明書を使用して証明書を発行します。ルート キーのパスワードを求めるプロンプトが表示され、証明書の有効日数 (この例では 500 日) を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-360">Issue the certificate using the previously generated root certificate using a command such as **$ openssl x509 -req -in server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days 500 -sha256 -extfile info.ext**. There will be another prompt for the root key password and you will need to specify the number of days that the certificate is valid (500 days in this example).</span></span>
        7. <span data-ttu-id="ecae5-361">**$ openssl pkcs12 -inkey server.key -in server.crt -export -out server.pfx** などのコマンドを使用して IIS 証明書を生成します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-361">Generate the IIS certificate using a command such as **$ openssl pkcs12 -inkey server.key -in server.crt -export -out server.pfx**.</span></span> <span data-ttu-id="ecae5-362">このコマンドは、新しいパスワードを要求します。このパスワードは、あとで証明書をインポートする時に使用されます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-362">This command will request a new password, which will be used later when the certificate is imported.</span></span>
        8. <span data-ttu-id="ecae5-363">**Certmgr.msc** を開いて、**信頼されたルート証明機関** に移動します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-363">Open **Certmgr.msc** and go to **Trusted Root Certificate Authorities**.</span></span> <span data-ttu-id="ecae5-364">**インポート** アクションを使用して、以前に生成された **rootCA.pem** ルート CA ファイルをインポートします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-364">Use the **Import** action to import the previously generated **rootCA.pem** root CA file.</span></span>
        9. <span data-ttu-id="ecae5-365">同じウィンドウで、**パーソナル** に移動し、**インポート** アクションを使用して、以前に生成された **server.pfx** をインポートします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-365">In the same window, go to **Personal** and use the **Import** action to import the previously generated **server.pfx**.</span></span>
        10. <span data-ttu-id="ecae5-366">次に、**IIS マネージャー** を開き、**RetailHardwareStationWebSite** を選択し、一番右のメニューから **バインドの編集** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-366">Next, open the **IIS Manager**, select the **RetailHardwareStationWebSite** and select **Edit Bindings** from the right-most menu.</span></span>
        11. <span data-ttu-id="ecae5-367">新しいウィンドウで、HTTPS サイトのバインドを選択し、**編集** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-367">In the new window, select the HTTPS site binding, and the select **Edit**.</span></span> <span data-ttu-id="ecae5-368">最後の画面で、新しくインストールした証明書を選択し、**OK** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-368">In the final screen, select the newly installed certificate and select **OK**.</span></span>
        12. <span data-ttu-id="ecae5-369">証明書が正しく使用されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-369">Verify the certificate is correctly being used.</span></span> <span data-ttu-id="ecae5-370">Web ブラウザーで、"https:\/\/&lt;hostname&gt;\/HardwareStation\/ping" に移動します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-370">In a web browser, go to  "https:\/\/&lt;hostname&gt;\/HardwareStation\/ping".</span></span>
        13. <span data-ttu-id="ecae5-371">iOS デバイスに証明書をインストールします:</span><span class="sxs-lookup"><span data-stu-id="ecae5-371">Install the certificate on the iOS device:</span></span>
          - <span data-ttu-id="ecae5-372">**rootCA.pem** ファイルをコピーして、コピーの名前を **rootCA.crt** に変更します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-372">Copy the **rootCA.pem** file and rename the copy to **rootCA.crt**.</span></span>
          - <span data-ttu-id="ecae5-373">OneDrive またはその他のファイル ホスティング ロケーションを使用して、**rootCA.crt** と **server.crt** をアップロードし、iOS デバイスにダウンロードできるようにします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-373">Using OneDrive or another file hosting location, upload the **rootCA.crt** and **server.crt** so that they can be downloaded onto the iOS device.</span></span>
        14. <span data-ttu-id="ecae5-374">iOS デバイスで、**設定 &gt; 全般 &gt; プロファイル** に移動し、**rootCA.crt** 用にダウンロードしたプロファイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-374">On the iOS device, go to **Settings &gt; General &gt; Profiles** and select the downloaded profile for the **rootCA.crt**.</span></span> <span data-ttu-id="ecae5-375">**インストール** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-375">Select **Install**.</span></span>
        15. <span data-ttu-id="ecae5-376">プロファイルの状態が **検証済** に更新されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-376">Validate that the profile status updates to **Verified**.</span></span>  <span data-ttu-id="ecae5-377">**server.crt** ファイルに対して同じプロセスを繰り返します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-377">Repeat the same process for the **server.crt** file.</span></span>
        16. <span data-ttu-id="ecae5-378">**設定 &gt; 全般 &gt; 情報 &gt; 証明書の信頼設定** に移動し、インストールされているルート証明書を有効にします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-378">Go to **Settings &gt; General &gt; About &gt; Certificate Trust Settings** and enable the installed root certificate.</span></span>
        17. <span data-ttu-id="ecae5-379">iOS デバイスで、以前に指定したハードウェア ステーションの ping URL を使用して、証明書が信頼できることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-379">On the iOS device, use the hardware station ping URL specified previously to verify that the certificate is trusted.</span></span>
        18. <span data-ttu-id="ecae5-380">POS アプリケーションを **非ドロワーモード** で開き、通常実行されるようにハードウェア ステーションとペアリングします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-380">Open the POS application in **Non-drawer mode** and pair to the hardware station as typically performed.</span></span>

### <a name="troubleshoot-device-activation-for-modern-pos"></a><span data-ttu-id="ecae5-381">Modern POS のデバイス有効化のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="ecae5-381">Troubleshoot device activation for Modern POS</span></span>

- <span data-ttu-id="ecae5-382">Microsoft アカウント (Azure AD) サインイン ページは開きません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-382">The Microsoft account (Azure AD) sign-in page doesn't open.</span></span>

    <span data-ttu-id="ecae5-383">**ソリューション**: Azure AD エンドポイントに到達できない場合があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-383">**Solution:** The Azure AD endpoint might be unreachable.</span></span> <span data-ttu-id="ecae5-384">しばらく待ってから、もう一度やり直してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-384">Wait a few minutes, and then try again.</span></span>

- <span data-ttu-id="ecae5-385">Azure AD アカウントを入力した後、ユーザーが承認されていない状態を示すエラー メッセージを受入します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-385">After you enter the Azure AD account, you receive an error message that states that the user isn't authorized.</span></span>

    <span data-ttu-id="ecae5-386">**ソリューション**: Azure AD ユーザーがデバイスを有効化するための POS アクセス許可を持つ作業者にマップされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-386">**Solution:** Verify that the Azure AD user is mapped to a worker who has POS permission to activate devices.</span></span> <span data-ttu-id="ecae5-387">作業者の **デバイスの管理** アクセス許可を **はい** に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-387">The **Manage device** permission for the worker should be set to **Yes**.</span></span>

- <span data-ttu-id="ecae5-388">デバイスの有効化が完了していません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-388">Device activation isn't completed.</span></span> <span data-ttu-id="ecae5-389">手順のいずれかの最中に失敗します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-389">It fails during one of the steps.</span></span>

    <span data-ttu-id="ecae5-390">**ソリューション:** すべてのデータが正しいことを確認するには、このチェックリストに従ってください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-390">**Solution:** Follow this checklist to verify that all data is correct:</span></span>

    - <span data-ttu-id="ecae5-391">Headquarters で有効化チェックのためのデバイス検証を完了し、デバイスが検証をパスしたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-391">Complete the Validate Devices for Activation check in Headquarters, and make sure that the device passes validation.</span></span>
    - <span data-ttu-id="ecae5-392">デバイスを有効化しているクライアント コンピューターで、Commerce Scale Unit URL 正常性チェックにアクセスし、正常性チェックが承認されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-392">On the client computer where you're activating the device, access the Commerce Scale Unit URL health check, and make sure that the health check is passed.</span></span> <span data-ttu-id="ecae5-393">URL には次の形式を使用します: `https://MyCompanyNameret.axcloud.dynamics.com/commerce/healthcheck?testname=ping`</span><span class="sxs-lookup"><span data-stu-id="ecae5-393">Use the following format for the URL: `https://MyCompanyNameret.axcloud.dynamics.com/commerce/healthcheck?testname=ping`</span></span>
    - <span data-ttu-id="ecae5-394">作業者は、Azure AD アカウント (**外部 ID** 下) にマップする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-394">The worker must be mapped to an Azure AD account (under **External identity**).</span></span>
    - <span data-ttu-id="ecae5-395">マッピングされる Azure AD アカウントは、同じテナントに属している必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-395">The Azure AD account that is mapped must belong to the same tenant.</span></span>
    - <span data-ttu-id="ecae5-396">作業者を Azure AD アカウントにマップするには、Microsoft Dynamics Lifecycle Services (LCS) の管理者アカウントを使用して Headquarters にサインインします。</span><span class="sxs-lookup"><span data-stu-id="ecae5-396">To map the worker to the Azure AD account, sign in to Headquarters by using the Admin account for Microsoft Dynamics Lifecycle Services (LCS).</span></span>
    - <span data-ttu-id="ecae5-397">作業者がマネージャー ロール内のコマース ユーザーとして設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-397">Make sure that the worker is set up as a Commerce user in the Manager role.</span></span> <span data-ttu-id="ecae5-398">(この品目は、検証によってチェックされます。)</span><span class="sxs-lookup"><span data-stu-id="ecae5-398">(This item is checked by validation.)</span></span>
    - <span data-ttu-id="ecae5-399">チャネルが公開されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-399">Make sure that the channel is published.</span></span> <span data-ttu-id="ecae5-400">(この品目は、検証によってチェックされます。)</span><span class="sxs-lookup"><span data-stu-id="ecae5-400">(This item is checked by validation.)</span></span>
    - <span data-ttu-id="ecae5-401">チャネル データベースに本社から同期したデータが含まれており、ダウンロード ジョブが実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-401">Make sure that the channel database has the synced data from Headquarters, and that download jobs are running.</span></span>
    - <span data-ttu-id="ecae5-402">**登録** でハードウェア プロファイルを設定します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-402">Set up the hardware profile under **Registers**.</span></span> <span data-ttu-id="ecae5-403">(この品目は、検証によってチェックされます。)</span><span class="sxs-lookup"><span data-stu-id="ecae5-403">(This item is checked by validation.)</span></span>
    - <span data-ttu-id="ecae5-404">レジスターおよび店舗に画面レイアウトがあることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-404">Make sure that the register and store have a screen layout.</span></span> <span data-ttu-id="ecae5-405">(この品目は、検証によってチェックされます。)</span><span class="sxs-lookup"><span data-stu-id="ecae5-405">(This item is checked by validation.)</span></span>
    - <span data-ttu-id="ecae5-406">基本住所が法人に対して設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-406">Make sure that a primary address is set up for the legal entity.</span></span>
    - <span data-ttu-id="ecae5-407">言語が Commerce Data Exchange: Real-time Service ユーザー プロファイル (デモ データでの JBB) に設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-407">Make sure that the language is set up for the Commerce Data Exchange: Real-time Service user profile (JBB in the demo data).</span></span>
    - <span data-ttu-id="ecae5-408">リアルタイム サービス プロファイルに適切なアクセス許可があることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-408">Make sure that the Real-time Service profile has the correct access.</span></span>
    - <span data-ttu-id="ecae5-409">電子決済 (EFT) のコンフィギュレーションの値があることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-409">Make sure that the electronic funds transfer (EFT) configuration value is present.</span></span>

### <a name="troubleshoot-modern-pos-connectivity"></a><span data-ttu-id="ecae5-410">Modern POS 接続のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="ecae5-410">Troubleshoot Modern POS connectivity</span></span>

<span data-ttu-id="ecae5-411">開発者トポロジまたはデモ環境などのシングル コンピュータ システム上、または Commerce Scale Unit と Modern POS が同じコンピュータにインストールされている場合は、Modern POS はデバイス有効化を完了できません。</span><span class="sxs-lookup"><span data-stu-id="ecae5-411">On a single-computer system, such as a developer topology or a demo environment, or when Commerce Scale Unit and Modern POS are installed on the same computer, Modern POS can't complete device activation.</span></span>

<span data-ttu-id="ecae5-412">**ソリューション:** この問題は、Modern POS が同じコンピューターへのネットワーク コール (つまり、それ自体の呼び出し) を行うことができないために発生します。</span><span class="sxs-lookup"><span data-stu-id="ecae5-412">**Solution:** This issue occurs because Modern POS can't make network calls to the same computer (that is, calls to itself).</span></span> <span data-ttu-id="ecae5-413">この問題を緩和するには、同じコンピュータに対して通信できるように AppContainer ループバック例外を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecae5-413">To mitigate this issue, you must enable an AppContainer loopback exception so that communications can occur to the same computer.</span></span> <span data-ttu-id="ecae5-414">Modern POS のこのループバックを有効にするのにさまざまなアプリケーションが役立ちます。</span><span class="sxs-lookup"><span data-stu-id="ecae5-414">Various applications will help enabling this loopback for Modern POS.</span></span> <span data-ttu-id="ecae5-415">ループバックの詳細については、[ループバックの有効化およびネットワーク分離のトラブルシューティングの方法](https://msdn.microsoft.com/library/windows/apps/hh780593.aspx)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ecae5-415">For more information about loopback, see [How to enable loopback and troubleshoot network isolation](https://msdn.microsoft.com/library/windows/apps/hh780593.aspx).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="ecae5-416">追加リソース</span><span class="sxs-lookup"><span data-stu-id="ecae5-416">Additional resources</span></span>

[<span data-ttu-id="ecae5-417">POS のレイアウト デザイナーのインストール</span><span class="sxs-lookup"><span data-stu-id="ecae5-417">Install the POS layout designer</span></span>](install-pos-layout-designer.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
