---
title: 販売時点管理 (POS) の顧客注文
description: このトピックでは、販売時点管理 (POS) の顧客注文に関する情報を提供します。 顧客注文は、特別注文としても知られています。 このトピックには、関連パラメーターおよびトランザクション フローのディスカッションが含まれています。
author: josaw1
ms.date: 08/02/2021
ms.topic: overview
ms.prod: ''
ms.technology: ''
ms.search.form: RetailFunctionalityProfile
audience: Application User
ms.reviewer: josaw
ms.custom:
- "260594"
- intro-internal
ms.assetid: 6fc835ef-d62e-4f23-9d49-50299be642ca
ms.search.region: global
ms.search.industry: Retail
ms.author: anpurush
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: Release 10.0.14
ms.openlocfilehash: 9ebdad47d761f775cf26666dc3e2736818fb4832
ms.sourcegitcommit: 3754d916799595eb611ceabe45a52c6280a98992
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/15/2022
ms.locfileid: "7982821"
---
# <a name="customer-orders-in-point-of-sale-pos"></a>販売時点管理 (POS) の顧客注文

[!include [banner](includes/banner.md)]

このトピックでは、販売時点管理 (POS) における顧客注文の作成と管理方法について説明します。 顧客注文は、買い物客が後日商品を受け取りたい、別の場所から商品を受け取りたい、商品を出荷してもらいたいなどの売上を捕捉することができます。 

無指向性のコマース チャネルの世界では、多くの小売業者によって、さまざまな製品およびフルフィルメントの要件を満たすために、顧客注文または特別注文のオプションが用意されています。 以下に一般的なシナリオを挙げます。

- 顧客が特定の日付に特定の住所まで製品の配送を希望しています。
- 顧客は、その製品を購入した店舗または場所とは異なる店舗または場所から製品の集荷を希望しています。
- 店頭の顧客は、今日商品を注文し、後日同じ店で受け取りたいと希望しています。

小売業者は、別の時間や場所での商品の配送や受け取りが可能なため、顧客注文を活用して欠品による販売機会の喪失を最小限にします。

## <a name="set-up-customer-orders"></a>顧客注文の設定
POS で顧客注文機能を使用する前に、コマース本部で必要なすべての構成を完了していることを確認してください。

### <a name="configure-modes-of-delivery"></a>出荷モードの構成

顧客注文を使用するには、店舗チャネルで使用できる配送モードを構成する必要があります。 少なくとも1つの出荷モードを定義して、注文明細行が店舗から顧客に出荷される際に利用できるようにする必要があります。 また、注文明細行が店舗から集荷される際に使用可能な、少なくとも1つの出荷の集荷モードを定義する必要があります。 出荷モードは、コマース本部の **出荷モード** ページで定義されます。 コマース チャネルの出荷モードの設定方法については、[出荷モードの定義](./configure-call-center-delivery.md#define-delivery-modes)を参照してください。

![出荷モードのページ。](media/customer-order-modes-of-delivery.png)


### <a name="set-up-fulfillment-groups"></a>フルフィルメント グループの設定

店舗や倉庫によっては、顧客の注文を満たすことができない場合があります。 フルフィル メントグループを構成することで、組織は POS で顧客の注文を作成するユーザーにオプションとして表示される、店舗や倉庫の場所を指定することができます。 フルフィルメント グループは、**フルフィルメント グループ** ページで構成されます。 組織は、必要な数のフルフィルメント グループを作成できます。 フルフィルメント グループの定義を行った後は、**店舗** ページのアクション ペインにある **設定** タブの **フルフィルメント グループの割り当て** を選択して店舗にリンクします。

Commerce のバージョン 10.0.12 およびそれ以降では、フルフィルメント グループで定義された倉庫、または倉庫/店舗の組み合わせが、出荷、集荷、出荷と集荷の両方に使用できるかどうかを定義することができます。 これによりビジネスに柔軟性が加わり、 出荷する商品の顧客注文を作成する際に選択できる倉庫と、集荷する商品の顧客注文を作成する際に選択できる店舗を決定できるようになります。 これらの構成オプションを利用するには、**フルフィルメント グループ内で「出荷」または「集荷」の場所を指定する** 機能を有効にする必要があります。 フルフィルメント グループにリンクされている倉庫が店舗でない場合は、出荷場所としてのみ構成できます。 集荷の注文が POS で構成されている場合は使用できません。

![フルフィルメント グループのページ。](media/customer-order-fulfillment-group.png)

### <a name="configure-channel-settings"></a>チャネル設定の構成

POS で顧客注文を処理する場合は、店舗チャネルの設定をいくつか検討する必要があります。 これらの設定は、コマース本部の **店舗** ページにあります。

- **倉庫** - このフィールドは、このストアに結びついた現金店頭渡しや、顧客集荷注文の在庫を減少させる際に使用される倉庫を示します。 ベスト プラクティスとして、店舗間でビジネス ロジックの問題が競合しないように、各店舗チャネルに固有の倉庫を使用することを推奨しています。
- **出荷倉庫** - このフィールドは、選択したストアから出荷される顧客による注文の在庫を減少させる際に使用される倉庫を示します。 **フルフィルメントグループ内で、ロケーションを「出荷」または「集荷」をとして指定する機能** がご利用の環境で有効になっている場合、POS ユーザーは、出荷先の店舗を選択する代わりに、POS で出荷先の特定の倉庫を選択することができます。 そのため、この機能を有効にすると、出荷倉庫は利用されなくなります。ユーザーは注文を作成する際に、注文を出荷する倉庫を指定します。
- **フルフィルメント グループの割り当て** – このボタン (アクションウィンドウの **設定** タブ) を選択して、POS で顧客注文が作成された際に集荷場所や出荷元のオプションを表示するために参照するフルフィルメント グループをリンクします。
- **宛先に基づく税を使用する** - このオプションは、顧客の住所に出荷される注文明細行に適用される税金のグループを決定するために、出荷先の住所を使用するかどうかを示します。
- **顧客に基づく税を使用する** - 顧客の自宅に出荷するためにPOSで作成された顧客注文に課税するために、顧客の配送先に定義されている課税グループを使用するかどうかを示します。

![Microsoft Store ページにおける店舗のチャネル設定。](media/customer-order-all-stores.png)

### <a name="set-up-customer-order-parameters"></a>顧客オーダーのパラメータを設定する

POS で顧客注文を作成する前に、コマース本部で適切なパラメータを構成する必要があります。 これらのパラメーターは、**コマース パラメーター** ページの **顧客注文** タブにあります。

- **既定の注文タイプ** - POS で作成した顧客注文に既定で割り当てられている注文タイプを指定することができます。 この顧客注文は、販売注文または見積注文にすることができます。 既定の注文タイプを問わず、ユーザーは POS から販売注文と顧客注文の両方を作成することができます。
- **既定の保証金** – 注文が確定する前に顧客が保証金として支払わなければならない注文総額の割合を指定します。 権限に応じて、POS の **保証金の上書き** 操作を使用して、その操作がトランザクション画面のレイアウトに設定されている場合、店員がは金額を上書きできてしまう場合があります。
- **配送の集荷モード** - POS での集荷が設定されている販売注文明細行に適用する配送モードを指定します。
- **出荷の実行モード** - 混載カートが作成され、一部の明細が集荷または出荷され、他の明細が顧客によって即時に実行される場合に、実行する注文とみなされる受注明細に適用する出荷モードを指定します。
- **キャンセル料率** – お客様のご注文がキャンセルされた場合に料金が発生する場合は、その金額を指定します。
- **キャンセル料コード** - POS でキャンセルされた顧客の注文に対してキャンセル料が発生する場合は、ここで使用する売掛料金コードを指定します。 請求金額コードでは、キャンセル料の財務転記ロジックを定義します。
- **出荷費用コード** ー **高度な自動請求を使用する** が  **はい** に設定されている場合、このパラメータ設定は無効です。 このオプションを  **いいえ** に設定すると、POS で顧客注文を作成する際に送料を手動で入力するように求めるメッセージが表示されます。 このパラメーターを使用して、ユーザーが出荷費用を入力した際に注文に適用される売掛金勘定費用コードをマッピングします。 請求金額コードは、配送料の財務計上ロジックを定義します。
- **高度な自動請求の使用** - 顧客注文が POS で作成された際に、システムが計算する自動請求を使用する場合は、このオプションを **はい** に設定します。 これらの自動請求は、出荷手数料、またはその他の注文、または品目固有の請求費用を計算するために使用できます。 高度な自動請求機能を有効にする方法については、[オムニ チャネルの高度な自動請求](./omni-auto-charges.md) を参照してください。

![コマース パラメーター ページの顧客注文タブ。](media/customer-order-parameters.png)

### <a name="update-transaction-screen-layouts-in-pos"></a>POS のトランザクション画面のレイアウトを更新する

POS [画面のレイアウト ](./pos-screen-layouts.md)が、顧客注文の作成と管理に対応できるように構成されていること、および必要な POS 操作がすべて構成されていることを確認してください。 ここでは、顧客注文の作成と管理を正しくサポートするために推奨される POS 操作を紹介します。
- **すべての製品を出荷する** - この操作は、トランザクション カート内のすべての明細行を出荷先に出荷することを指定するために使用されます。
- **選択した製品を出荷する** - この操作は、トランザクション カート内の選択された明細行を出荷先に出荷することを指定するために使用されます。
- **すべての製品を集荷する** - この操作は、トランザクション カート内のすべての明細行を選択した店舗の場所から集荷することを指定するために使用されます。
- **選択した製品を集荷する** - この操作は、トランザクション カート内の選択した明細行を選択した店舗の場所から集荷することを指定するために使用されます。
- **すべての製品を処理する** - この操作は、トランザクション カート内のすべての明細行を実行するよう指定するために使用されます。この操作が POS で使用された場合、顧客の注文はキャッシュ アンド キャリーのトランザクションに変換されます。
- **選択した製品を処理する** - この操作は、トランザクション カ ート内の選択された明細行が、購入時に顧客によって実行されることを指定するために使用されます。 この操作は、[ハイブリッド注文](./hybrid-customer-orders.md)のシナリオでのみ有用です。
- **注文の取り消し** - この操作は、顧客注文を検索および取得するために使用され、POS ユーザーが必要に応じて顧客の注文を編集、キャンセル、などを処理する操作を行うことができます。
- **配送モードの変更** - この操作を使用すると、すでに出荷用に設定されている明細行の配送モードを迅速に変更することができるため、ユーザーは「すべての製品を出荷する」または「選択した製品を出荷する」フローを再度実行する必要はありません。
- **保証金の上書き** - この操作は、選択された顧客注文に対して顧客が支払う保証金の金額を変更するために使用することができます。

![POS トランザクション画面の操作。](media/customer-order-screen-layout.png)

## <a name="work-with-customer-orders-in-pos"></a>POS で顧客注文の作業を行う

> [!NOTE]
> 収益認識機能は、Commerceチャンネル (電子商取引、POS、コール センター) では現在サポートされていません。 収益認識を使用して設定した品目は、Commerce チャンネルで作成された注文には追加できません。 

### <a name="create-a-customer-order-for-products-that-will-be-shipped-to-the-customer"></a>顧客に出荷する製品の顧客注文を作成する

1. POS トランザクション画面で、トランザクションに顧客を追加します。
2. 製品をカートに追加します。
3. **選択した製品を出荷する** または **すべてを出荷する** を選択して、 顧客のアカウントに設定された住所に製品を出荷します。
4. 顧客注文を作成するオプションを選択します。
5. "出荷元" の場所を確認、変更します。出荷先住所を確認、変更し、送付方法を選択します。
6. 顧客が希望する注文の出荷日を入力します。
7. 支払い機能を使用して、計算された金額の支払いを行うか、**保証金の上書き** 操作を使用して、支払い期限の金額を変更し、支払いを適用します。
8. 注文の総額が支払われていない場合は、請求時に注文に基づく残高に対して取得するクレジットカードを入力します。

### <a name="create-a-customer-order-for-products-that-the-customer-will-pick-up"></a>顧客が受け取る製品の顧客注文を作成する

1. POS トランザクション画面で、トランザクションに顧客を追加します。
2. 製品をカートに追加します。
3. 注文の集荷を構成するには、**選択した製品を集荷** または **すべて集荷** を選択します。
4. 選択した商品を顧客が受け取る店舗を選択します。
5. 品目が集荷される日付を選択します。
6. 支払い機能を使用して、計算された金額の支払いを行うか、**保証金の上書き** 操作を使用して、支払い期限の金額を変更し、支払いを適用します。
7. 注文の総額が支払われていない場合は、顧客が後で (集荷時に) 支払いを行うか、またはクレジット カードが現在トークン化されているかどうかを選択し、受け取り時に使用するか取り込むかを選択します。

### <a name="edit-an-existing-customer-order"></a>既存の顧客注文の編集

オンラインまたは店舗のチャネルで作成された小売オーダーは、必要に応じて、POS を使用して取り消しや編集ができます。

> [!IMPORTANT]
> すべての小売注文を POS アプリケーションで編集できるわけではありません。 コールセンター チャネルで[注文完了を有効にする](./set-up-order-processing-options.md#enable-order-completion) 設定がオンになっていると、コールセンター チャネルで作成した注文を POS で編集できません。 正しい支払い処理を行うためには、コールセンターのチャネルで発生した注文に対して注文完了機能を有効にする機能を使用している注文は、コマース本部のコールセンター アプリケーションで編集する必要があります。

> [!NOTE]
> Commerce 本社のコール センター以外のユーザーが作成した POS の注文や見積もりは編集しないことをお勧めします。 これらの注文と見積もりは Commerce 価格設定エンジンを使用しないため、POS で編集された場合、Commerce 価格設定エンジンはそれらの価格を再設定します。


バージョン 10.0.17 以降では、注文が部分的に処理された場合でも、POS アプリケーションを通じて適格な注文を編集できます。 ただし、完全に請求書が発行された注文は、POS での編集はできません。 この機能を有効化するには、**機能管理** ワークスペースの  **販売時点管理で部分的に処理された注文を編集する** 機能を有効化します。 この機能が有効になっていない場合、またはバージョン 10.0.16 以前を使用している場合、注文が完全にオープンな場合にのみ、POS で顧客注文を編集できます。 さらに、この機能が有効な場合、部分的に処理された注文を編集できる店舗を制限できます。 特定の店舗のこの機能を無効にするオプションは、**全般**  クイック タブの **機能プロファイル** で構成できます。


1. **注文の取り消し** を選択します。
2. **検索** を使用して注文を検索するフィルタを入力し、**適用** を選択し ます。
3. 結果の一覧で順序を選択し、**編集** を選択します。 **編集** ボタンが使用できない場合、その注文は編集できない状態になっています。
4. トランザクション カートから、顧客注文に対して必要な変更を加えます。 編集中は一部の変更ができなくなっている場合があります。
5. 支払操作を選択して編集プロセスを完了します。
6. 変更を保存せずに編集プロセスを終了するには、 **無効なトランザクション** 操作を使用します。

#### <a name="pricing-impact-when-orders-are-edited"></a>注文が編集されたときの価格への影響

POS または Commerce の電子商取引サイトで注文が行かれた場合、顧客は金額を確定します。 この金額には価格が含まれ、割引も含まれる場合があります。 注文し、後でその注文を変更するために (たとえば、別のアイテムを追加するために) コール センターに連絡する顧客は、割引の適用について特定の期待を抱くでしょう。 既存の注文明細行のプロモーションが期限切れの場合でも、顧客はその明細行にもともと適用されていた割引が有効であることを期待します。 ただし、最初に注文したときに割引が有効でなかったが、それ以降割引が有効になっている場合、顧客は新しい割引が変更された注文に適用されることを期待します。 そうしないと、顧客は既存の注文をキャンセルしてから、新しい割引が適用される新しい注文を作成する可能性があります。 このシナリオが示すように、顧客が約束した価格と割引は維持されなければなりません。 同時に、POS およびコール センターのユーザーは、必要に応じて販売注文明細行の価格と割引を再計算する柔軟性を備えている必要があります。

注文を POS でリコールおよび編集すると、既存の注文明細行の価格と割引は「ロック中」と見なされます。 つまり、一部の注文明細行がキャンセルまたは変更されたり、新しい注文明細行が追加されたりしても、変更されません。 既存の販売ラインの価格と割引を変更するには、POS ユーザーは **再計算** を選択する必要があります。 その後、価格ロックは既存の注文明細行から削除されます。 ただし、Commerce バージョン 10.0.21 リリース以前は、この機能はコール センターでは利用できませんでした。 代わりに、注文明細行を変更すると、価格と割引が再計算されました。

Commerce バージョン 10.0.21 リリースでは、**コマース オーダーの意図しない価格計算を防止する** という名前の新機能が **機能管理** ワークスペースで使用可能になりました。 既定では、この機能は有効になっています。 オンにすると、新しい **価格ロック** プロパティは、すべての電子商取引注文で利用できます。 任意のチャネルからの注文の注文キャプチャが完了すると、このプロパティはすべての注文明細行に対して自動的に有効になります (つまり、チェックボックスが選択されます)。 Commerce の価格設定エンジンは、これらの注文明細行をすべての価格と割引の計算から除外します。 したがって、注文が編集された場合、注文明細行は既定で価格設定と割引の計算から除外されます。 ただし、コール センターのユーザーは、任意の注文明細行のプロパティを無効にして (つまり、チェックボックスをオフにして)、**再計算** を選択して、既存の注文明細行を価格計算に含めることができます。

既存の販売明細行に手動割引を適用している場合でも、コール センターのユーザーは、手動割引を適用する前に、販売明細行の **価格ロック** プロパティを無効にする必要があります。

コール センターのユーザーは、**販売注文** ページの操作ウィンドウの **販売** タブにある **計算** グループの **価格ロックの削除** を選択することで、注文明細行の **価格ロック** プロパティを一括して無効にすることもできます。 この場合、価格ロックは、編集不可能な明細行 (言い換えれば、ステータスが **部分的に請求済** もしくは **請求済**) を除くすべての注文明細行から削除されます 。 その後、注文への変更が完了して送信された後、価格ロックがすべての注文明細行に再適用されます。

> [!IMPORTANT]
> **コマース オーダーの意図しない価格計算を防止する** 機能が有効になっている場合、価格設定ワークフローでは売買契約評価の設定は無視されます。 つまり、売買契約の評価ダイアログ ボックスには、**価格関連** のセクションは表示されません。 この動作は、売買契約の評価設定と価格ロック機能の両方が、意図しない価格変更を防ぐという同様の目的を持っているために発生します。 ただし、売買契約評価のユーザー エクスペリエンスは、ユーザーが価格を変更するために 1 つ以上の注文明細行を選択する必要がある大量注文には適していません。

> [!NOTE]
> **価格ロック** プロパティは 1 つ以上の選択行のために無効にすることができる **コール センター** モジュールが使用されています。 POS の動作は変更されません。 つまり、POS ユーザーは、選択した注文明細行の価格のロックを解除できません。 ただし、**再計算** を選択して、既存のすべての注文明細行から価格ロックを削除することができます。

### <a name="cancel-a-customer-order"></a>顧客注文をキャンセルする

1. **注文の取り消し** を選択します。
2. **検索** を使用して注文を検索するフィルタを入力し、**適用** を選択し ます。
3. 結果の一覧で注文を選択し、**キャンセル** を選択します。 **キャンセル** ボタンが使用できない場合、その注文はキャンセルできない状態となっています。
4. キャンセル料金が構成されている場合は確認してください。 必要に応じて、確認する前にキャンセル料を調整することができます。 
5. トランザクション カートから、支払の工程を選択してキャンセル プロセスを完了します。 支払済の保証金がキャンセル料を超過した場合は、返金が発生する可能性があります。
6. キャンセルを保存せずに編集プロセスを終了するには、 **無効なトランザクション** 操作を使用します。

## <a name="finalizing-the-customer-order-shipment-or-pickup-from-pos"></a>POS からの顧客注文の出荷、または集荷を完了する

注文の作成後は、注文内容の構成によって、顧客が店頭で商品を受け取るか、発送するかのどちらかになります。 このプロセスの詳細については、[店舗注文フルフィルメント](./order-fulfillment-overview.md)のドキュメントを参照してください。

## <a name="asynchronous-transaction-flow-for-customer-orders"></a>顧客注文の非同期トランザクション フロー

顧客注文は、POS で同期モード、または非同期モードのいずれかで作成することができます。 POS で顧客注文を作成する際に、パフォーマンスの問題やユーザーによる遅延が発生した場合は、非同期注文の作成を検討してください。

### <a name="enable-customer-orders-to-be-created-in-asynchronous-mode"></a>非同期モードで作成する顧客注文の有効化

1. コマース本部の **機能プロファイル** ページで、設定を行う店舗に対応する機能プロファイルを選択します。
2. **一般** クイック タブで、**非同期モードで顧客注文を作成** オプションを **はい** に設定します。

**非同期モードで顧客注文を作成** オプションを **はい** に設定すると、顧客注文は Retail Transaction Service (RTS) が使用できる場合でも常に非同期モードで作成されます。 このオプションを **いいえ** に設定した場合、顧客注文は RTS を使用して常に同期モードで作成されます。 非同期モードで顧客注文が作成されると、コマース プル (P) ジョブからコマース本部の小売取引としてプルされ、作成されます。 小売取引に対応する販売注文は、**注文の同期** を手動で実行するか、またはバッチプロセスを使用して実行することで作成されます。

## <a name="additional-resources"></a>その他のリソース

[ハイブリッド顧客注文](hybrid-customer-orders.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
