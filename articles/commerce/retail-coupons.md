---
title: 小売販売のクーポンの設定
description: この記事では、クーポンの概要と Dynamics 365 Commerce でそれを設定する方法について説明します。
author: josaw1
ms.date: 10/05/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailCoupon, RetailParameters, RetailSharedParameters
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.search.region: Global
ms.search.industry: retail
ms.author: josaw
ms.search.validFrom: 2017-06-30
ms.dyn365.ops.version: July 2017 update
ms.openlocfilehash: 72ad7b527662bb863069b633d64eea41fee67d44
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/03/2022
ms.locfileid: "8891935"
---
# <a name="set-up-coupons-for-retail-sales"></a>小売販売のクーポンの設定

[!include [banner](includes/banner.md)]

## <a name="overview-of-coupons"></a>クーポンの概要

クーポンは、トランザクションに割引を追加するために使用するコードおよびバーコードです。 各クーポンには複数のコードを使用でき、各コードに独自の有効日を設定できます。

各クーポンは 1 つの割引に関連付けられます。 割引に関連付けられている価格グループは、クーポンまたはクーポンが有効なチャンネルを使用できる顧客を定義します。

基本的に、クーポンは割引での追加の検証です。 クーポンによって、必要なクーポン コードおよびバーコードがこれらのコードの日付範囲と共に提供されます。 クーポンでは、オプションの使用制限と顧客に必要なプロパティも提供されます。 割引は、クーポンが有効な製品のセットを提供します。 割引の価格グループは、クーポンが有効な顧客、チャンネル、またはカタログのセットを提供します。

クーポンを作成するには、割引とクーポンを別に作成します。 コマースのクーポン ページで割引を選択することでそれらをリンクします。

> [!NOTE]
> クーポンが割引にリンクされると、コマースの割引ページのいくつかのフィールドは、クーポンの設定で管理されているため読み取り専用になります。 これらのフィールドには、ステータスと標準の日付範囲のフィールドが含まれます。
> 
> コール センター チャネルでクーポンを使用しているときに、クーポンに関連付けられた割引を適用するには、**再計算** ボタン **(販売タブ > 計算 > 再計算)** を選択する必要があります。 この追加手順は、将来のリリースで削除されます。

販売時点管理 (POS) の販売トランザクションにクーポンを適用するには、**クーポン コード** または **クーポン のバーコード** を使用できます。 **クーポン コード** を使用するには、POS **トランザクション** [画面レイアウト](pos-screen-layouts.md) で **クーポンコードの追加** 操作を構成する必要があります。 **クーポン コードの追加** を選択し、クーポンコードを入力します。 または、**トランザクション** 画面で **クーポン バーコード** を使用するには、バー コードをスキャンするか、数値キーボードを使用してバー コードを 入力 します。

### <a name="limited-use-coupons"></a>専用クーポン

専用クーポンとして、クーポンを構成することができます。 使用制限は、顧客またはチャンネルごと、またはグローバルな制限として定義できます。 POS または販売注文入力時にコードまたはバーコードを入力またはスキャンする際に、この制限が適用されます。

制限は、クーポンのクーポン コードごとに適用されます。 たとえば、2 つのクーポン コードを持つ 1 回のみ使用のクーポンは、各クーポン コード 1 回で 2 回使用できます。 クーポンの各コードは、個別に有効に設定できます。

クーポンはすべての販売チャンネルで使用することができますが、コールセンターで注文を行う場合は、通話センターの **注文完了** 設定が有効になっている通話センターの注文に対してのみ、限定使用のクーポンを使用できます。 これが有効になっていない場合、限定されない使用タイプのクーポンのみをコール センター オーダーで使用できます。

> [!NOTE]
> クーポン コードが使用制限に達した後、システムが自動的にクーポン コードの状態を „使用済み„ に変更することは *ない* です。 ただし、このクーポン コードは使用制限に達しているため使用できません。 クーポン コードの状態が手動で **有効** 以外のもに設定されている場合、すべてのチャネルでこのクーポン コードを使用できません。  

## <a name="managing-coupons"></a>クーポンの管理

割引とクーポンは別に作成する必要があります。 クーポン ページで割引を選択することでそれらをリンクします。 クーポンを割引にリンクすると、割引のいくつかのフィールドは、クーポンの設定で管理されているため読み取り専用になります。 これらのフィールドには、ステータスと標準の日付範囲のフィールドが含まれます。

基本的に、クーポンは現在、割引での追加の検証です。 クーポンによって、クーポン コードおよびバーコードが日付範囲、使用制限、顧客に必要なプロパティと共に提供されます。 割引は、クーポンが有効な製品のセットを提供します。 割引の価格グループは、クーポンが有効な顧客、チャンネル、またはカタログのセットを提供します。

## <a name="system-setup-for-coupons"></a>クーポンのシステム設定

クーポンを設定する前に、クーポンのバーコードおよび 2 つのクーポン番号順序を設定する必要があります。

1. **マスク文字** ページで、クーポン コードに対して新しいマスク文字を作成します。 未使用の文字をどれでも選択できます。
2. **バーコード マスクの設定** ページで、新しいバーコード マスクを作成します。 **タイプ** フィールドを **クーポン** に設定します。
3. **バーコード設定** ページで、作成したバーコード マスクを使用する新しいバーコードを作成します。
4. **番号順序** ページで、2 つの新しい番号順序を作成します。 1 つの順序は、クーポン コード ID 用で、もう 1 つはクーポン番号用です。 クーポン コード ID は、クーポンの各クーポン コードに対する一意の識別子です。 クーポン番号はクーポンに対する一意の識別子です。 各クーポンには、クーポンをトリガーする複数のコードとバーコードを含めることができます。

    > [!NOTE]
    > 両方の番号順序において、**スコープ** フィールドを **会社** に設定する必要があります。 ほとんどの場合、両方の番号順序を自動的に生成する必要があります。

5. **コマース パラメーター** ページの **バーコード** タブで、先ほど作成したバーコードを選択します。
6. **コマース共有パラメーター** ページの **番号順序** タブで、クーポン番号およびクーポン コード ID に対して作成した番号順序を選択します。
7. これで、**クーポン** ページを開いて、新しいクーポンを作成できます。

## <a name="the-effect-of-partial-updates-on-coupons"></a>クーポンに対する部分的な更新の影響

クーポン機能は、複数の異なる機能で構成されています。 コマース バックオフィス (HQ) とチャンネルは、コンポーネント間で部分的に更新することができます。 したがって、部分的な更新が全体としてのクーポン機能にどれほど影響するのか理解することが重要です。

- **HQ は部分的に更新されますが、Commerce Scale Unit と POS は更新されません。** HQ 更新では、クーポンと割引ページが更新され、コマース価格エンジンも更新されます。 これら 2 つのコンポーネントの一方だけが更新された場合、コマースの一部のページで価格計算データが一致しなくなります。 そのため、予期しない割引の計算やエラーが、割引の計算時に発生する可能性があります。
- **HQ は更新されますが、Commerce Scale Unit と POS は更新されません (N-1)。** すべての店舗を同時に更新できるわけではないため、売店舗を更新する前に、HQ を更新することをお勧めします。 N-1 シナリオでは、クーポンに関連する新しい機能は、まだ更新されていない店舗では使用できません。 たとえば、クーポン機能は、明細行の「除外」について説明します。 割引に明細行の除外を使用する場合は、以前のバージョンを実行している店舗では適用されません。
- **HQ は更新されませんが、Commerce Scale Unit と POS は更新されます (N-1)。** Commerce Scale Unit で更新された価格エンジンで価格の計算時にレガシ割引コードを処理できるので、このシナリオでは更新による機能の影響はありません。


[!INCLUDE[footer-include](../includes/footer-banner.md)]
