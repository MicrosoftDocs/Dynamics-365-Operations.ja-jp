---
title: オンライン注文トランザクションと非同期顧客注文トランザクションの編集と監査
description: この記事では、Microsoft Dynamics 365 Commerce でオンライン注文トランザクションと非同期顧客注文トランザクションを編集および監査する方法について説明します。
author: josaw1
ms.date: 10/21/2022
ms.topic: index-page
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgriffin
ms.search.region: global
ms.author: josaw
ms.search.validFrom: 2018-11-15
ms.dyn365.ops.version: ''
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.industry: Retail
ms.openlocfilehash: dbeeff47446c1617da44f34ae56f333717f577a1
ms.sourcegitcommit: 18b7a02c497709e8d9c7b943d82f1fcc3dafa4cd
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/21/2022
ms.locfileid: "9712111"
---
# <a name="edit-and-audit-online-order-and-asynchronous-customer-order-transactions"></a>オンライン注文トランザクションと非同期顧客注文トランザクションの編集と監査

[!include [banner](../includes/banner.md)]

この記事では、Microsoft Dynamics 365 Commerce でオンライン注文トランザクションと非同期顧客注文トランザクションを編集および監査する方法について説明します。

## <a name="overview"></a>概要

Commerce バージョン 10.0.5 と 10.0.6 では、現金売りトランザクション (売上や返品など) と現金管理トランザクション (釣銭入力や支払/入金の削除など) の編集のサポートが追加されました。 Commerce バージョン 10.0.7 では、オンライン注文トランザクションと非同期顧客注文トランザクションの編集のサポートが追加されました。

## <a name="edit-and-audit-order-transactions"></a>注文トランザクションの編集と監査

Commerce headquarters で注文トランザクションの編集と監査を行うには、次の手順に従います。

1. [Microsoft Dynamics Office Add-in](https://appsource.microsoft.com/product/office/WA104379629?tab=Overview) をインストールします。
1. **Commerce パラメーター** ページの **顧客注文** タブの **注文** クイックタブで、**注文の同期エラーの保留コード** に保留コードを指定します。
2. 編集および監査のタイミングと競合する他の注文同期ジョブを一時停止します。
3. **店舗の財務** ワークスペースを開きます。 **オンライン注文の同期エラー** タイルと **顧客注文の同期エラー** タイルに、小売トランザクションの事前にフィルターされたビューが表示されます。 それぞれに、対応する注文タイプについて同期に失敗したトランザクション レコードが表示されます。
4. **オンライン注文の同期エラー** ページまたは **顧客注文の同期エラー** ページを開きます。 レコードを選択して、同期エラーの詳細を表示します。 **同期の状態** クイック タブに、次のエラーの詳細が表示されます。

    - 保留中の注文のステータス
    - 注文エラーの詳細
    - 変更日時
    - 再試行回数

1. エラーの詳細にレコードの修正が必要である旨が示された場合は、**Office アドイン**、**選択したトランザクションの編集** の順に選択します。 選択したトランザクションの詳細を示す Excel ファイルが開きます。

    - 編集中のトランザクションがオンライン注文トランザクションの場合、Excel ファイルに次のワークシートが含まれます。

        - **トランザクション** – このワークシートには、トランザクションのヘッダーに関する詳細が含まれます。
        - **販売トランザクション** – このワークシートには、トランザクションの明細書に関する詳細が含まれます。
        - **支払トランザクション** – このワークシートには、トランザクションの支払行の詳細が含まれます。
        - **割引トランザクション** – このワークシートには、トランザクションの割引に関する詳細が含まれます。
        - **税金トランザクション** – このワークシートには、トランザクションの税金に関する詳細が含まれます。
        - **諸費用トランザクション** – このワークシートには、トランザクションの諸費用に関する詳細が含まれます。

    - 編集中のトランザクションが非同期顧客トランザクションの場合、Excel ファイルに次のワークシートが含まれます。

        - **明細行** – このワークシートには、トランザクションのヘッダーと明細行に関する詳細が含まれます。
        - **支払** – このワークシートには、トランザクションの支払明細行の詳細が含まれます。
        - **割引** – このワークシートには、トランザクションの割引に関する詳細が含まれます。
        - **税金** – このワークシートには、トランザクションの税金に関する詳細が含まれます。
        - **諸費用** – このワークシートには、トランザクションの諸費用に関する詳細が含まれます。

1. Excel ファイルの **保留中の注文のステータス** フィールドに **編集** と入力し、変更を公開します。 このようにして、バッチ モードで実行している **同期注文** ジョブが、処理中にこのレコードをスキップするのを防ぐことができます。
1. Excel ファイルで適切なフィールドを変更してから、Dynamics Excel アドインの公開機能を使用してデータをアップロードして Commerce 本社に戻します。 データの公開後、変更がシステムに反映されます。 公開時には、ユーザーが行った変更に対する検証は行われません。
    > [!NOTE]
    > 編集する必要があるフィールドが見つからない場合は、以下の手順に従って、欠落しているフィールドをワークシートに追加します。
    >   1. データ コネクタで **デザイン** を選択します。
    >   1. フィールドを追加するテーブルの横にある鉛筆アイコンを選択します。
    >   1. **使用可能なフィールド** セクションでフィールドを選択 し、**追加** を選択します。
    >   1. フィールドを必要なだけ追加し、**更新** を選択します。
    >   1. 更新が完了したら、**更新** を選択して値を更新する必要が生じる場合があります。

3. 変更の完全な監査証跡を表示するには、ヘッダーレベル変更用の **小売トランザクション** ヘッダー、および適切なトランザクション ページの該当するセクションやレコードにある **監査追跡の表示** を選択します。 たとえば、販売明細行に関連するすべての変更は、**販売トランザクション** ページに表示され、支 に関連するすべての変更は、**支払トランザクション** ページに表示されます。 変更については、次の監査の詳細が維持されます。

    - 変更日時
    - フィールド
    - 元の値
    - 新しい値
    - 変更者

1. 変更を作成して公開したら、**同期注文** を選択して同期プロセスを直ちに開始します。 または、バッチ モードで実行中の同期プロセスがトランザクションを処理するまで待機することができます。

既定では、注文が正常に同期された後、その注文は、Commerce パラメーターで定義されている保留コードに基づいて保留状態になります。 フルフィルメントやその他の操作のために注文をさらに処理するには、保留された注文を削除する必要があります。

## <a name="additional-resources"></a>追加リソース

[現金売りトランザクションと現金管理トランザクションの編集と監査](edit-cash-trans.md)

[小売トランザクションの財務分析コードの編集](edit-financial-dim.md)

[小売トランザクションを編集するために Excel ブックを作成する](create-excel-edit.md)

[小売トランザクションを編集するために Excel ブックにフィールドを追加する](add-fields-excel.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
