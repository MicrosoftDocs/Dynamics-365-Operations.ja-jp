---
title: コマース サイト ビルダーでの B2C テナントのコンフィギュレーション
description: この記事では、Microsoft Dynamics 365 Commerce サイト ビルダーで企業と顧客間 (B2C) テナントを構成する方法について説明します。
author: BrianShook
ms.date: 11/15/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: brshoo
ms.search.validFrom: 2020-02-13
ms.openlocfilehash: 181edf1570f1a9d071a7fae38ff9d73ff3c068fa
ms.sourcegitcommit: 774f8f97a0b14cf1199bd1802178ccf536a25ade
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/17/2022
ms.locfileid: "9785319"
---
# <a name="configure-your-b2c-tenant-in-commerce-site-builder"></a>コマース サイト ビルダーでの B2C テナントのコンフィギュレーション

[!include [banner](includes/banner.md)]

この記事では、Microsoft Dynamics 365 Commerce サイト ビルダーで企業と顧客間 (B2C) テナントを構成する方法について説明します。

Azure AD B2C テナントの設定が完了したら、コマース サイト ビルダーで B2C テナントをコンフィギュレーションする必要があります。 構成手順には、Azure ポータルから B2C アプリケーション情報を収集し、B2C アプリケーション情報をサイト ビルダーに入力してから、B2C アプリケーションをサイトおよびチャンネルに関連付けることが含まれます。

### <a name="collect-the-required-application-information"></a>必要なアプリケーション情報の収集

必要なアプリケーション情報を収集するには、次の手順を実行します。

1. Azure ポータルで、**ホーム \> Azure AD B2C - アプリの登録** に移動します。
1. アプリケーションを選択し、左側のナビゲーション ウィンドウで **概要** を選択して、アプリケーションの詳細を取得します。
1. **アプリケーション (クライアント) ID** リファレンスで、B2C テナントで作成した B2C アプリケーションのアプリケーション ID を収集します。 これは、後に **クライアント GUID** としてサイト ビルダーに入力されます。
1. **URI のリダイレクト** を選択し、サイトに表示される返信 URL (セットアップ時に入力された返信 URL) を収集します。
1. **ホーム \> Azure AD B2C – ユーザー フロー** に移動して、各ユーザー フロー ポリシーのフル ネームを収集します。

次の図は、**Azure AD B2C - アプリ登録** 概要ページの例を示しています。

![Azure AD B2C - アプリケーション (クライアント) IDが強調表示されたアプリケーション登録の概要ページ](./media/ClientGUID_Application_AzurePortal.png)

次の図は、**Azure AD B2C – ユーザー フロー (ポリシー)** ページのユーザー フロー ポリシーの例を示しています。

![各 B2C ポリシー フローの名前の収集。](./media/B2CImage_22.png)

### <a name="enter-your-azure-ad-b2c-tenant-application-information-into-commerce"></a>Commerce に Azure AD B2C テナント アプリケーションの情報を入力する

B2C テナントをサイトに関連付ける前に、Azure AD B2C テナントの詳細をコマース サイト ビルダーに入力する必要があります。

Azure AD B2C テナント アプリケーションの情報をコマースに追加するには、次の手順を実行します。

1. 環境のコマース サイト ビルダーに管理者としてサインインします。
1. 左のナビゲーション ウィンドウで、**テナント設定** を選択して展開します。
1. **テナントの設定** で、**サイト認証の設定** を選択します。 
1. **サイト認証プロファイル** の横にあるメイン ウィンドウで、**管理** を選択します。 (サイト認証プロファイル リストにテナントが表示されている場合は、管理者によってテナントが既に追加されています。 次の手順 6 の項目が必要な B2C 設定の項目と一致していることを確認します。 同様の Azure AD B2C テナントまたはアプリケーションを使用して新しいプロファイルを作成し、ユーザー ポリシー ID の違いなどの小さな違いを考慮することもできます。
1. **サイト認証プロファイル** を選択します。
1. B2C テナントおよびアプリケーションの値を使用して、表示されたフォームに次の必須項目を入力します。 必須ではない (アスタリスクが付いていない) フィールドは空白のままにしておくことができます。

    - **アプリケーション名**: B2C アプリケーションの名前。たとえば「Fabrikam B2C」のようになります。
    - **テナント名** : B2C テナントの名前です。例えば、ドメインが B2C テナントに "fabrikam.onmicrosoft.com" と表示されている場合は "fabrikam" を使用します。 
    - **パスワードを忘れた場合のポリシー ID**: パスワードを忘れた場合のユーザー フロー ポリシー ID。たとえば「B2C_1_PasswordReset」のようになります。
    - **登録サインイン ポリシー ID**: 登録およびサインインのユーザー ポリシー ID。たとえば「B2C_1_signup_signin」のようになります。
    - **クライアント GUID**: B2C アプリケーション ID。たとえば「22290eb2-c52e-42e9-8b35-a2b0a3bcb9e6」のようになります。
    - **プロファイル ポリシー編集 ID**: プロファイル編集ユーザー フロー ポリシー ID。たとえば「B2C_1A_ProfileEdit」のようになります。

1. **OK** を選択します。 B2C アプリケーションの名前が一覧に表示されるようになります。
1. **保存** をクリックして、変更を保存します。

必要に応じて、**ログイン カスタム ドメイン** フィールドは、Azure AD B2C テナントのカスタム ドメインを設定する場合にのみ使用します。 **ログイン カスタム ドメイン** フィールドの使用に関する詳細および考慮事項については、[追加の B2C 情報](additional-b2c-info.md) を参照してください。

### <a name="associate-the-b2c-application-to-your-site-and-channel"></a>B2C アプリケーションをサイトとチャンネルに関連付ける

> [!WARNING]
> - B2C アプリケーションが既にサイトに関連付けられている場合は、別の B2C アプリケーションに変更すると、この環境で既に登録したユーザーに対して設定されている現在の参照が削除されます。 変更された場合、現在割り当てられている B2C アプリケーションに関連付けられている資格情報は、ユーザーが使用できなくなります。 
> - B2C アプリケーションを更新するのは、チャンネルの B2C アプリケーションを初めて設定する場合か、ユーザーが新しい B2C アプリケーションでこのチャンネルに新しい資格情報を再登録する場合のみです。 B2C アプリケーションにチャンネルを関連付ける際には注意が必要です。また、アプリケーションに明確な名前を付けます。 次の手順でチャンネルが B2C アプリケーションに関連付けられていない場合は、サイトでそのチャンネルにサインインしているユーザーは、B2C アプリケーションの **テナント設定\> B2C 設定** リストで **既定** として表示される B2C アプリケーションに入力されます。

B2C アプリケーションをサイトとチャンネルに関連付けるには、次の手順を実行します。

1. コマース サイト ビルダーでサイトに移動します。
1. 左のナビゲーション ウィンドウで、**サイト設定** を選択して展開します。
1. **サイトの設定** で、**チャンネル** を選択します。
1. **チャンネル** のメイン ウィンドウで、チャンネルを選択します。
1. 右側のチャンネルのプロパティ ウィンドウで、**B2C アプリケーションの選択** ドロップダウン メニューから B2C アプリケーション名を選択します。
1. **閉じる** をクリックし、**保存と公開** を選択します。

## <a name="next-steps"></a>次のステップ

Commerce で B2C テナントを設定するプロセスを続行するには、[追加の B2C 情報](additional-b2c-info.md) に進みます。

## <a name="additional-resources"></a>追加リソース

[B2C テナントを Commerce に 設定](set-up-b2c-tenant.md)

[Azure ポータルでの既存の Azure AD B2C テナントを作成またはリンクする](create-link-aad-b2c-tenant.md)

[B2C アプリケーションを作成する](create-b2c-app.md)

[ユーザー フロー ポリシーの作成](create-user-flow-policies.md)

[ソーシャル ID プロバイダーの追加 (オプション)](add-social-identity-providers.md)

[新しい Azure AD B2C 情報で Commerce headquarters を更新する](update-hq-aad-b2c-info.md)

[B2C 追加情報](additional-b2c-info.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
