---
title: 環境の更新
description: このトピックでは、セルフ サービス配置エクスペリエンスを使用して配置された環境を更新する方法について説明します。
author: manado
manager: AnnBe
ms.date: 12/14/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Developer
ms.reviewer: sericks
ms.search.scope: Operations
ms.custom: ''
ms.search.region: Global
ms.author: manado
ms.search.validFrom: 2018-12-31
ms.dyn365.ops.version: 8.1.1
ms.openlocfilehash: c98464d75ef51e8a97404577cebbcead9f432f29
ms.sourcegitcommit: 2b890cd7a801055ab0ca24398efc8e4e777d4d8c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "1537042"
---
# <a name="update-an-environment"></a>環境の更新

[!include [banner](../includes/banner.md)]
[!include [banner](../includes/limited-availability.md)]

このトピックでは、[セルフサービス配置](infrastructure-stack.md)エクスペリエンスを使用して配置した Dynamics 365 for Finance and Operations 環境に更新を適用するプロセスについて説明します。

> [!IMPORTANT]
> 次世代のインフラストラクチャでは、現在のフローとは異なる方法で更新が適用されます。 **パッケージで提供されているものはすべて環境に適用され、既に環境に存在するものは上書きされます**。 つまり、ビルド環境からのすべてのカスタマイズおよび ISV ソリューションを含む 1 つの配置可能パッケージを作成する**必要があります**。 環境上にあるものと、パッケージに含まれるものの間でモデルの一覧に差異がある場合、更新を適用する前に警告メッセージが表示されます。 1 つのパッケージを作成する方法については、[ソース コントロールを使用することでサード パーティ モデルとランタイム パッケージを管理する](../dev-tools/manage-runtime-packages.md)を参照してください。

## <a name="supported-package-types"></a>サポートされているパッケージの種類
[セルフ サービス展開](infrastructure-stack.md)エクスペリエンスを使用して展開された環境は 8.1 以降にあるため、次のパッケージ タイプがサポートされます。

- **AOT の配置可能パッケージ** - アプリケーション メタデータおよびソース コードから生成される配置可能なパッケージ。 この展開可能なパッケージは、**ビルド**環境で作成されます。
- **バイナリ更新プログラム パッケージ** - ダイナミックリンク ライブラリ (DLL)と、プラットフォームとアプリケーションが依存するその他のバイナリとメタデータを含む配置可能パッケージ。 これは、Microsoft によってリリースされたパッケージです。

## <a name="development-application-lifecycle-management-alm-flow"></a>開発アプリケーション ライフ サイクル管理 (ALM) フロー
コード カスタマイズをサンドボックスおよび製造環境に適用するには、ビルド環境から配置可能なコード パッケージを作成する必要があります。 これを行う方法の詳細については、[モデルの配置可能なパッケージを作成](create-apply-deployable-package.md)を参照してください。

## <a name="microsoft-updates"></a>Microsoft の更新プログラム
Microsoft の更新プログラムへのアクセスを取得するには、環境の環境詳細ページに移動します。 すべてのアプリケーションとプラットフォーム修正の累積的なバイナリ更新を示す **1 つのタイル** が表示されます。 この更新プログラムを適用するには、パッケージを選択して **パッケージの保存** を選択し、プロジェクト資産ライブラリに Microsoft の更新プログラムを保存します。

## <a name="apply-updates"></a>更新プログラムの適用

### <a name="tier-1-sandboxdevelop-and-testdemobuild-environments"></a>レベル 1 サンドボックス/開発およびテスト/デモ/ビルド環境

Lifecycle Services (LCS) を通じて配置されたレベル 1 サンドボックス/開発およびテスト/デモ/ビルド環境に更新を適用するには、[クラウド環境に更新を適用する](apply-deployable-package-system.md)の手順に従います。

### <a name="tier-2-and-above-standard-acceptance-testsandbox-environments"></a>レベル 2 以上の標準引受テスト/サンドボックス環境

> [!IMPORTANT]
> パッケージを適用するとシステムのダウンタイムが発生します。 すべて関連するサービスを停止、およびパッケージを適用中のときには環境を使用できなくなります。

開始する前に、配置可能パッケージが LCS のプロジェクト アセット ライブラリにアップロードされていることと、検証が成功したことを確認します。

このパッケージをプロジェクト資産ライブラリに置いたら、次の手順を使用して環境を更新します。

1. パッケージを適用する環境の**環境の詳細**ビューを開きます。
2. **メンテナンス > 更新プログラムの適用**をクリックし、更新プログラムを適用します。
3. パッケージを選択して適用します。 上部にあるフィルターを使用してパッケージを探します。 アプリケーションおよびプラットフォーム バイナリ パッケージと、一覧のアセット ライブラリから検証に合格したアプリケーションの配置可能なパッケージが表示されます。
4. **適用** をクリックします。
5. **環境の詳細** ビューの右上隅のステータスが **キュー** から **サービス** に代わり、完了した後は **配置済み** に変わります。
6. 完了すると、**環境の詳細** ページにある **履歴 > 環境**の変更からアクセスできる環境履歴が更新され、配置済みの完了したパッケージが表示されます。
7. 環境履歴ページからログをダウンロードすることもできます。

> [!IMPORTANT]
> 最新のインフラストラクチャ スタックに配置された環境では、サービスが失敗した場合、環境が自動的にロールバックされます。 工程が失敗した理由を理解するため、上記の手順に示されているとおりに環境の履歴ページからログをダウンロードすることができます。

### <a name="production-environments"></a>実稼働環境
運用環境に更新プログラムを適用することは、まだ有効になっていません。 運用環境に適用する更新の信頼性を向上させるため、このフローが有効になると、最新のコピーとサンドボックス環境の指定されたスナップショットのどちらを運用環境に移動するかを選択できます。 更新を選択して、それを運用環境に移動する方法はありません。 これにより、更新がもう一度適用されなくなり、サンドボックスのイメージが運用環境に昇格されるため、エクスペリエンスの信頼性が高くなります。
