---
title: Retail Cloud Scale Unit の初期化
description: このトピックでは、Retail Cloud Scale Unit を初期化する方法について説明します。
author: AamirAllaq
manager: AnnBe
ms.date: 08/06/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: IT Pro
ms.reviewer: sericks
ms.search.scope: Retail, Operations
ms.search.region: Global
ms.author: aamiral
ms.search.validFrom: 2018-4-30
ms.dyn365.ops.version: 8
ms.openlocfilehash: d71144ce58f376cc850a0e09168277ac957e3519
ms.sourcegitcommit: c461758290d7ddc19f0b60701368937c35ef78b0
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/06/2019
ms.locfileid: "1864167"
---
# <a name="initialize-retail-cloud-scale-unit"></a>Retail Cloud Scale Unit の初期化

[!include[banner](../includes/banner.md)]

アプリケーション バージョン 8.1.2.x 以降を持つレベル 2 サンドボックスまたは運用環境を使用している場合、販売時点管理 (POS) 操作またはクラウド内の Retail サーバーを使用する電子商取引操作に Retail チャネル機能を使用する前に、Retail Cloud Scale Unit (RCSU) を初期化する必要があります。 初期化は Retail Cloud Scale Unit を展開します。

このトピックでは、Retail Cloud Scale Unit を初期化するための手順について説明します。

## <a name="prerequisites"></a>必要条件

1. アプリケーション バージョン 8.1.2.x またはそれ以降を持つレベル 2 サンドボックスまたは運協環境を配置します。
2. Microsoft Dynamics Lifecycle Services (LCS) で環境ごとに 1 つを超える RCSU が必要な場合は、サポート要求を作成して、**複数の Retail Cloud Scale Unit に対するアクセス要求**を入力し、環境 ID、RCSU の数、および対応するデータ センター地域を指定します。 要求は、5 営業日以内に完了されます。 環境ごとに複数の RCSU を必要としない場合は、サポート要求を作成する必要はありません。 

## <a name="initialize-retail-cloud-scale-unit-as-part-of-a-new-environment-deployment"></a>Retail Cloud Scale Unit を新しい環境の展開の一部として初期化します

本社が使用可能か確認してください。 これは、初期化プロセス中にスケール ユニットを本社に登録するために必要です。 サービス プロセスで利用できなくなる可能性があるため、本社がサービス中の場合はスケール ユニットの初期化をお勧めしません。

1. 本社環境が使用可能で [メンテナンス モード](../sysadmin/maintenance-mode.md) でないことを確認してください。
2. LCS の環境の詳細 ページで、**環境機能 \> Retail** を選択します。
3. Retail 設定配置ページで、**初期化** を選択します。
4. 初期化する Retail Cloud Scale Unit のバージョンを選択します。
5. Retail Cloud Scale Unit を初期化するリージョンを選択します。

## <a name="configure-retail-channels-to-use-retail-cloud-scale-unit"></a>Retail Cloud Scale Unit を使用する小売チャネルの構成

1. Retail Cloud Scale Unit が展開された後で、本社のクライアントで **Retail > Retail Headquarters > Retail スケジューラの設定 > チャンネル データベース** の順に移動して、この Retail Cloud Scale Unit のためにデータベースを使用するように小売りチャンネルが構成されていることを確認します。
2. 各小売りチャンネルに移動して、対応する Retail Cloud Scale Unit のチャンネル プロファイルを選択します。

### <a name="database-refresh-and-cloud-scale-units"></a>データベースの更新とクラウド スケール ユニット

始める前に [Retail 機能を使用する環境でデータベースを更新した後に完了する手順](../database/database-refresh.md#steps-to-complete-after-a-database-refresh-for-environments-that-use-retail-functionality) について慣れていることを確認して下さい。

データベース更新の一部として (チャネル データベース フォームで) スケール ユニット チャネル データベース レコードを環境を越えて移動できません。 これはレコードが環境固有のコンフィギュレーションを表すためです。

データベースの更新後と Retail の再プロビジョニング ツールの実行後、LCS でスケール ユニットの再展開を発行して、スケール ユニットのチャネル データベース レコードを再生成できます。 スケール ユニットで配置やサービス操作を行うと、登録が行われていないことが検出された場合に、本社でスケール ユニットが登録されます。

スケール ユニットがすでに存在するのと同じバージョンの展開を選択することで、コンポーネントを変更することなくスケール ユニットの再配置を発行できます。 これは次の手順により LCS で行うことができます:

1. LCS の環境の詳細 ページで、**環境機能 \> Retail** を選択します。
2. [小売設定の配置] ページで再配置するスケール ユニットを選択します。
3. スケール ユニットの操作メニューで **更新** を選択します。
4. スライダーの **バージョンの選択** のドロップダウンで **バージョンの指定** オプションを選択します
5. **バージョンの指定** の下のテキスト ボックスに、スケール ユニットの **現在のバージョン** ラベルの横に表示されたバージョンを入力します。
6. **更新** ボタンをクリックします。

以前に拡張を適用した場合でも、スケール ユニットを更新するときに最後に適用された拡張パッケージが自動的に選択されるため、**拡張機能の更新** を選択する必要はありません。

複数のスケール ユニットがある場合は、各スケール ユニットに対して上記の操作を実行する必要があります。 必要に応じて、これらの操作を並行して実行できます。

## <a name="deploy-additional-retail-cloud-scale-units-optional"></a>追加の Retail Cloud Scale Unit を展開する (オプション)

最初の Retail Cloud Scale Unit (RCSU) を初期化した後、追加のクラウド スケール ユニットが必要な場合はサポート要求を入力します。 サポート要求で、必要な RCSU の数、環境名、希望するリージョンを明記します。

展開する追加の RCSU ごとに、チャネル データ ベースグループを 個別に作成することもお勧めします。 これを行うには、次の手順に従います。

1. 小売本社で、**Retail > Retail Headquarters > Retail スケジューラーの設定 > チャンネル データベース グループ** の順に移動します。
2. 新しいチャネル データベース グループを作成します。
3. **Retail > Retail Headquarters > Retail スケジューラの設定 > チャンネル データベース** フォームの順に移動し、新しく作成された RCSU に対応するチャンネル データベースを選択します。
4. **編集** を選択して、新しいチャンネル データベース グループを選択します。
5. **保存** を選択します。
6. 選択したチャンネル データベースに対して **完全データ同期の実行** を選択します。

## <a name="additional-considerations-if-you-initialize-cloud-hosted-retail-channel-components-in-an-existing-environment"></a>既存の環境でクラウドにホストされた Retail チャネル コンポーネントを初期化する場合の追加の考慮事項

環境でクラウドでホストされている Retail チャネル コンポーネントを既に使用している場合、Retail Cloud Scale Unit の初期化はそれらのコンポーネントの更新時にダウンタイムを減らすのに役立ちます。 Retail Cloud Scale Unit の初期化を行う前に、追加の計画が必要です。

クラウドでホストされた小売チャネル コンポーネントを使用する環境で最初のクラウド スケール ユニットを初期化するときに、初期化プロセスではクラウドでホストされたチャネル コンポーネントに関連付けられているチャネルを最初のスケール ユニットに移行します。 店舗スケール ユニットに関連付けられたチャンネルは影響を受けません。

移行プロセスはチャネルに対して透過的です。 スケール ユニットの初期化が始まった後、次の操作が自動的に実行されます。

1. 新しいクラウド スケール ユニットが作成され、環境に関連付けられます。
2. クラウド スケール ユニットは、本社で利用可能なチャンネル データベースとして登録されます。
3. 本社で **既定** のチャネル データベースにマップされたすべてのチャネルは、新しいクラウド スケール ユニットにマップするように更新されます。
4. Commerce Data Exchange (CDX) 完全データ同期は、チャンネル データを新しいスケール ユニットに取り込むために実行されます。

小売サーバーやクラウド販売時点管理を使用する店舗およびオンライン チャネルのすべての工程で、5 時間のダウンタイム ウィンドウを計画する必要があります。

このプロセスは、本番データを使用してデータベースを更新した後に、サンドボックス環境で初めて実行する必要があります。 これにより業務検証が可能になり、移行プロセスにかかる時間についてのガイダンスが提供されます。

クラウド スケール ユニットは他のコンポーネントから専用の隔離された計算とストレージ リソースを提供するため、独自のチャネル データベースを持ちます。 したがって、移行の前に次の対策を実行する必要があります:

1. **POS のすべてのシフトがクローズしていることを確認してください。** 移行後、移行プロセス中に有効だったシフトを閉じることができなくなります。
2. **すべての P ジョブが正常に完了していることを確認します。** 前のチャンネル データベースが維持され、トランザクション データが本社との間で同期されている間、開始する前に P ジョブを実行することをお勧めします。
3. **すべての POS デバイスからサインアウトします。** POS 操作は移行中にサポートされません。

初期化期間中に実行される内容を以下に示します。

- POS オフライン機能を有効にしない限り、クラウドでホストされた小売チャネルは機能しません。
- オフライン機能がオンになっている POS デバイスは機能が制限されます。
- Retail サーバーに依存しているすべての電子商取引クライアントが中断されます。
- Retail Store Scale Unit でホストされているチャネルは影響されません。
- 本店機能は影響を受けません。

初期化が完了した後に起きる事柄を示します。

- 有効化されたすべての POS デバイスのデバイス有効化状態は保持されます。つまり、デバイスを再有効化する必要はありません。
- スタンドアロン ハードウェア ステーション インスタンスは引き続き機能します。
- POS チャンネル側のレポートはリセットされ、データを初期化する前に表示されません。
- 仕訳帳の処理の表示もリセットされるため、初期化前のデータは表示されません。
