---
title: ガント管理作成ガイド
description: このトピックでは、Gantt コントロールを使用して新しいフォームを作成する方法について説明します。
author: ShylaThompson
manager: AnnBe
ms.date: 11/10/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Developer
ms.reviewer: sericks
ms.search.scope: Operations
ms.custom: 17311
ms.assetid: e5cd372c-6ac2-4995-bb3c-ff863b40fedb
ms.search.region: Global
ms.author: shylaw
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 72c5d6d02a3b7a3be18c256e5a1c96a0e6384fed
ms.sourcegitcommit: 16bfa0fd08feec1647829630401ce62ce2ffa1a4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/02/2019
ms.locfileid: "1851155"
---
# <a name="gantt-control-development-guide"></a><span data-ttu-id="83a1c-103">ガント管理作成ガイド</span><span class="sxs-lookup"><span data-stu-id="83a1c-103">Gantt control development guide</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="83a1c-104">このトピックでは、Gantt コントロールを使用して新しいフォームを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="83a1c-104">This topic describes how to create new forms by using the Gantt control.</span></span> <span data-ttu-id="83a1c-105">Tutorial_Gantt フォームにあるコードを調べることを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="83a1c-105">We highly recommend that you look at the code in the Tutorial_Gantt form.</span></span> <span data-ttu-id="83a1c-106">このコードは、Gantt コントロールのすべての機能を示し、データをロードしてアプリケーション プログラミング インターフェイス (API) を操作する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="83a1c-106">This code demonstrates the full capabilities of the Gantt control, and shows how to load data and work with the application programming interface (API).</span></span>

<a name="whats-new-for-gantt"></a><span data-ttu-id="83a1c-107">ガント チャートの新機能</span><span class="sxs-lookup"><span data-stu-id="83a1c-107">What’s new for Gantt</span></span>
--------------------

<span data-ttu-id="83a1c-108">Microsoft Dynamics AX 2012 では、クライアントは Win32 アプリケーションで、拡張機能は Microsoft ActiveX、WinForm、または Microsoft Windows Presentation Foundation (WPF) のコントロールを使用していました。</span><span class="sxs-lookup"><span data-stu-id="83a1c-108">In Microsoft Dynamics AX 2012, the client was a Win32 application, and extensions used Microsoft ActiveX, WinForm, or Microsoft Windows Presentation Foundation (WPF) controls.</span></span> <span data-ttu-id="83a1c-109">ActiveX と ManagedHost コントロールは、HTML ベースのプラットフォームと互換性がないため、カスタム コントロールを追加するためには使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-109">ActiveX and ManagedHost controls can no longer be used to add custom controls, because they are incompatible with the HTML-based platform.</span></span> <span data-ttu-id="83a1c-110">代わりに、新しい拡張可能コントロール フレームワークで HTML と JavaScript を使用してコントロールを追加することができます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-110">Instead, a new extensible control framework lets you add controls by using HTML and JavaScript.</span></span> <span data-ttu-id="83a1c-111">新しいガント管理は、このフレームワークを使用して実装されています。</span><span class="sxs-lookup"><span data-stu-id="83a1c-111">The new Gantt control is implemented by using this framework.</span></span> <span data-ttu-id="83a1c-112">以前のバージョンとは異なり、独自のフォームの使用およびコントロールの拡張に追加のライセンス手数料を支払う必要はないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="83a1c-112">Note that, unlike in earlier versions, you don't have to pay an additional license fee to use the control in your own forms or to extend the control.</span></span>

## <a name="high-level-overview-of-the-control"></a><span data-ttu-id="83a1c-113">コントロールの高レベルの概要</span><span class="sxs-lookup"><span data-stu-id="83a1c-113">High-level overview of the control</span></span>
<span data-ttu-id="83a1c-114">次の図は、ガント管理の視覚的要素を示しています。</span><span class="sxs-lookup"><span data-stu-id="83a1c-114">The following illustration shows the visual elements of the Gantt control.</span></span>

<span data-ttu-id="83a1c-115">[![ガントの要素](./media/ganttchartelements.png)](./media/ganttchartelements.png)</span><span class="sxs-lookup"><span data-stu-id="83a1c-115">[![Elements of the Gantt](./media/ganttchartelements.png)](./media/ganttchartelements.png)</span></span>

<span data-ttu-id="83a1c-116">コントロールを新しいフォームに追加するには、フォーム デザインの一番上のノードを右クリックし、**新規追加**&gt;**Gantt** を選択します。</span><span class="sxs-lookup"><span data-stu-id="83a1c-116">To add the control to a new form, just right-click the top node in the form design, and then select **Add new** &gt; **Gantt**.</span></span> <span data-ttu-id="83a1c-117">**高さ**および**幅**プロパティを **SizeToAvailable** に設定した後、デザイナーで設定する必要がある他のプロパティはありません。</span><span class="sxs-lookup"><span data-stu-id="83a1c-117">After you set the **Height** and **Width** properties to **SizeToAvailable**, there are no other properties that must be set in the designer.</span></span> <span data-ttu-id="83a1c-118">他の多くのコントロールとは異なり、Gantt コントロールはデータ ソースにバインドすることはできません。</span><span class="sxs-lookup"><span data-stu-id="83a1c-118">Unlike many other controls, Gantt controls can't be bound to data sources.</span></span> <span data-ttu-id="83a1c-119">代わりに、コードからコントロールにすべてのデータを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-119">Instead, you must add all data to the control from code.</span></span>

## <a name="adding-activities-links-and-milestone-markers"></a><span data-ttu-id="83a1c-120">活動、リンク、マイルストーン マーカーの追加</span><span class="sxs-lookup"><span data-stu-id="83a1c-120">Adding activities, links, and milestone markers</span></span>
<span data-ttu-id="83a1c-121">ガント チャートの最も基本的な要素はタスク活動です。</span><span class="sxs-lookup"><span data-stu-id="83a1c-121">The most basic element of a Gantt chart is the task activity.</span></span> <span data-ttu-id="83a1c-122">各活動は、個々の行がグラフに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-122">Each activity is allocated its own row in the chart.</span></span> <span data-ttu-id="83a1c-123">活動は、親活動を参照することによって、ツリーのような階層を形成できます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-123">Activities can form a hierarchy, like a tree, by referencing a parent activity.</span></span> <span data-ttu-id="83a1c-124">また、任意の 2 つの活動は、リンクを使用して (階層間で) 互いに接続できます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-124">Additionally, any two activities can be connected to each other through links (across hierarchies).</span></span> <span data-ttu-id="83a1c-125">コントロールにデータを追加するには、追加する要素のインスタンスを含むリストを作成します。</span><span class="sxs-lookup"><span data-stu-id="83a1c-125">To add data to the control, you build up a list that contains the instances of the element that you want to add.</span></span> <span data-ttu-id="83a1c-126">次に、**parm** メソッドを使用して、リストをコントロールに割り当てます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-126">You then assign the list to the control by using a **parm** method.</span></span> <span data-ttu-id="83a1c-127">データを変更するときに、リストの内容だけの変更はできないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="83a1c-127">Note that, when you modify data, you can't just modify the content of the list.</span></span> <span data-ttu-id="83a1c-128">データが変更されたことをクライアントに通知し、リフレッシュをトリガーするには、**parm** メソッドを使用してリストをコントロールに再割り当てする必要があります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-128">To notify the client that data has changed, and to trigger a refresh, you must reassign the list to the control by using the **parm** method.</span></span>

<span data-ttu-id="83a1c-129">[![活動およびリンクの API](./media/ganttchartactivitiesapi.png)](./media/ganttchartactivitiesapi.png)</span><span class="sxs-lookup"><span data-stu-id="83a1c-129">[![API for activities and links](./media/ganttchartactivitiesapi.png)](./media/ganttchartactivitiesapi.png)</span></span>

<span data-ttu-id="83a1c-130">各活動は、すべてのアクティビティ タイプに固有の ID を持つ必要があります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-130">Each activity must have a unique ID across all activity types.</span></span> <span data-ttu-id="83a1c-131">この ID は、階層とリンクをビルドするために必要です。</span><span class="sxs-lookup"><span data-stu-id="83a1c-131">This ID is required in order to build the hierarchy and the links.</span></span> <span data-ttu-id="83a1c-132">ID は、ユーザー操作後にサーバーに通知されたときに活動を識別するためにも使用します。</span><span class="sxs-lookup"><span data-stu-id="83a1c-132">The ID is also used to identify the activity when the server is notified after a user interaction.</span></span> <span data-ttu-id="83a1c-133">マイルストーンには 2 つのタイプがあります。マイルストーン アクティビティは、チャート内で独自の行を受け取り、リンクから参照できるスタンドアロン アクティビティです。マイルストーン マーカーは関連するアクティビティと同じ行に表示されます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-133">There are two types of milestones: the milestone activity is a stand-alone activity that receives its own row in the chart and can be referenced from the links, whereas the milestone markers appear on the same row as the related activity.</span></span> <span data-ttu-id="83a1c-134">両方のタイプのマーカーは、Dynamics Symbol フォントの記号を使用して表されます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-134">Both types of markers are represented by using symbols from the Dynamics Symbol font.</span></span>

## <a name="column-headers-and-content"></a><span data-ttu-id="83a1c-135">列のヘッダーとコンテンツ</span><span class="sxs-lookup"><span data-stu-id="83a1c-135">Column headers and content</span></span>
<span data-ttu-id="83a1c-136">コントロールの左側にある「グリッド」で、データを列に配置できます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-136">In the “grid” on the left side of the control, you can arrange the data into columns.</span></span> <span data-ttu-id="83a1c-137">列の定義は、**GanttControlColumn** オブジェクトのリストである **GanttControl.parmColumns** プロパティを使用して提供されます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-137">The column definitions are provided through the **GanttControl.parmColumns** property, which is a list of **GanttControlColumn** objects.</span></span> <span data-ttu-id="83a1c-138">列の内容は、**GanttControlActivity.parmColumnTexts** プロパティを通じてアクティビティのテキスト文字列を含む単純な**リスト** オブジェクトとして指定されます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-138">The content of the columns is given as a simple **List** object that contains the text strings for an activity through the **GanttControlActivity.parmColumnTexts** property.</span></span> <span data-ttu-id="83a1c-139">列リスト内の値は文字列でなければならないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="83a1c-139">Note that the values in the column list must be strings.</span></span> <span data-ttu-id="83a1c-140">したがって、数字、列挙型、日付などの書式は、サーバー側で発生する必要があります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-140">Therefore, any formatting of numbers, enumerations, dates, and so on, must occur on the server side.</span></span> <span data-ttu-id="83a1c-141">**utcdatetime** の書式設定では、ユーザーの優先時間帯を考慮する必要があります。これは、ガント チャートが表示されるときにその時間帯が使用されるためです。</span><span class="sxs-lookup"><span data-stu-id="83a1c-141">The formatting of **utcdatetime** must take into account the user's preferred time zone, because that time zone will be used when the Gantt chart is rendered.</span></span>

<span data-ttu-id="83a1c-142">[![コントロールを構成するための API](./media/ganttchartconfigurationapi.png)](./media/ganttchartconfigurationapi.png)</span><span class="sxs-lookup"><span data-stu-id="83a1c-142">[![API for configuring the control](./media/ganttchartconfigurationapi.png)](./media/ganttchartconfigurationapi.png)</span></span>

## <a name="working-times"></a><span data-ttu-id="83a1c-143">作業時間</span><span class="sxs-lookup"><span data-stu-id="83a1c-143">Working times</span></span>
<span data-ttu-id="83a1c-144">活動はカレンダーを参照できます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-144">An activity can reference a calendar.</span></span> <span data-ttu-id="83a1c-145">カレンダーは基本的に、作業時間間隔のリストです。</span><span class="sxs-lookup"><span data-stu-id="83a1c-145">A calendar is basically a list of working time intervals.</span></span> <span data-ttu-id="83a1c-146">カレンダーを使用すると、「セル」(行とタイム スケール間隔の交差) に異なる背景色を付けることによって、作業時間を非作業時間から視覚的に区別することができます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-146">A calendar is used to visually separate working time from non-working time by giving the “cells” (intersections of a row and a time scale interval) a different background color.</span></span> <span data-ttu-id="83a1c-147">これらの作業時間間隔は、標準カレンダー テーブルから取得する必要はないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="83a1c-147">Note that these working time intervals don't have to come from the standard calendar tables.</span></span> <span data-ttu-id="83a1c-148">間隔は、どこからでも読み込むことができる単なるデータです。</span><span class="sxs-lookup"><span data-stu-id="83a1c-148">The intervals are just data that you can load from anywhere.</span></span> <span data-ttu-id="83a1c-149">カレンダーは良い概要を与えることができる素晴らしい機能ですが、いくつかのパフォーマンスの問題を考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-149">Although calendars are a nice feature that can give you a good overview, there are some performance issues that you must consider.</span></span> <span data-ttu-id="83a1c-150">カレンダーを有効にすると (**GanttControlConfiguration.parmUseCalendars** を **true** に設定して)、各「セル」は HTML 形式で表示されます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-150">When you turn calendars on (by setting **GanttControlConfiguration.parmUseCalendars** to **true**), each “cell” is rendered in HTML by using a DIV element.</span></span> <span data-ttu-id="83a1c-151">カレンダーが非常に粒度の細かいタイムスケールで長期間にわたり多くの活動を示している場合は、多くの DIV 要素が存在します。</span><span class="sxs-lookup"><span data-stu-id="83a1c-151">If a calendar shows lots of activities for a long period at a very granular minor timescale, there will be many DIV elements.</span></span> <span data-ttu-id="83a1c-152">ブラウザおよびハードウェアによっては、多数の DIV 要素がユーザーにパフォーマンスの問題を引き起こす可能性があります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-152">Depending on the browser and hardware, the large number of DIV elements can cause performance issues for the user.</span></span> <span data-ttu-id="83a1c-153">この場合、カレンダーをオフにしなければならない場合があります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-153">In this case, you might have to turn calendars off.</span></span> <span data-ttu-id="83a1c-154">この方法で、表示する必要がある DIV 要素の数を大幅に削減します。</span><span class="sxs-lookup"><span data-stu-id="83a1c-154">In this way, you significantly reduce the number of DIV elements that must be rendered.</span></span> <span data-ttu-id="83a1c-155">コントロールでは、カレンダーをオフにしてパフォーマンスを向上させることはできません。</span><span class="sxs-lookup"><span data-stu-id="83a1c-155">The control can't turn off calendars by itself to improve performance.</span></span> <span data-ttu-id="83a1c-156">特定のシナリオに基づいて、ユーザーに最適なものを決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-156">Based on the specific scenario, you must determine what will be best for the user.</span></span>

## <a name="color-use"></a><span data-ttu-id="83a1c-157">色の使用</span><span class="sxs-lookup"><span data-stu-id="83a1c-157">Color use</span></span>
<span data-ttu-id="83a1c-158">活動およびマイルス トーン マーカーなどの要素には、色プロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-158">Elements such as the activities and milestone markers have a color property.</span></span> <span data-ttu-id="83a1c-159">通常、**WinAPI::RGB2int** メソッドを使用して特定の色の整数値を計算するか、カラー ピッカーを使用して値を設定します (カラー ピッカーは **ColorSelection::selectColor** メソッドを使用して開きます)。</span><span class="sxs-lookup"><span data-stu-id="83a1c-159">Typically, either the int value for a specific color is calculated by using the **WinAPI::RGB2int** method, or the user sets the value by using the color picker (which is opened by calling **ColorSelection::selectColor**).</span></span> <span data-ttu-id="83a1c-160">自身で色を制御するではなく、色が現在のテーマに従うことを指定できます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-160">Instead of controlling the colors yourself, you can specify that the colors should adhere to the current theme.</span></span> <span data-ttu-id="83a1c-161">**GanttControlConfiguration.parmUseThemeColors** オプションを **true** に設定すると、現在のテーマにはない色の値が設定されている場合、それらはオーバーライドされます (どの色も手動では指定できません)。</span><span class="sxs-lookup"><span data-stu-id="83a1c-161">When you set the **GanttControlConfiguration.parmUseThemeColors** option to **true**, if any color values have been set that aren't part of the current theme, they are overridden (no colors have to be specified manually).</span></span> <span data-ttu-id="83a1c-162">テーマ色を使用するときは、活動を暗色または明色のいずれで表示するかを決定するために、**parmIsActive** フラグが活動に対して使用されます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-162">When theme colors are used, the **parmIsActive** flag on an activity is used to determine whether the activity should appear in a dark color or a light color.</span></span>

## <a name="interactions"></a><span data-ttu-id="83a1c-163">相互関係</span><span class="sxs-lookup"><span data-stu-id="83a1c-163">Interactions</span></span>
<span data-ttu-id="83a1c-164">ユーザーがガント チャートにかかわるたびに、サーバー側のコードを通知するためにイベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="83a1c-164">Whenever the user interacts with the Gantt, an event is raised to notify the server-side code.</span></span> <span data-ttu-id="83a1c-165">現在、以下のイベントが利用可能です。</span><span class="sxs-lookup"><span data-stu-id="83a1c-165">The following events are currently available:</span></span>

-   <span data-ttu-id="83a1c-166">onActivitySelected(str \_activityId, GanttControlActivityIdCollection \_allSelectedActivityIds)</span><span class="sxs-lookup"><span data-stu-id="83a1c-166">onActivitySelected(str \_activityId, GanttControlActivityIdCollection \_allSelectedActivityIds)</span></span>
-   <span data-ttu-id="83a1c-167">onActivityDblClick(str \_activityId)</span><span class="sxs-lookup"><span data-stu-id="83a1c-167">onActivityDblClick(str \_activityId)</span></span>
-   <span data-ttu-id="83a1c-168">onSummaryActivityExpand(str \_activityId)</span><span class="sxs-lookup"><span data-stu-id="83a1c-168">onSummaryActivityExpand(str \_activityId)</span></span>
-   <span data-ttu-id="83a1c-169">onSummaryActivityCollapse(str \_activityId)</span><span class="sxs-lookup"><span data-stu-id="83a1c-169">onSummaryActivityCollapse(str \_activityId)</span></span>
-   <span data-ttu-id="83a1c-170">onActivityChanged(GanttControlActivityModification \_modification, GanttControlActivityModificationResponse \_response)</span><span class="sxs-lookup"><span data-stu-id="83a1c-170">onActivityChanged(GanttControlActivityModification \_modification, GanttControlActivityModificationResponse \_response)</span></span>

<span data-ttu-id="83a1c-171">これらすべてのイベントはクライアントからの一方向の通知です。</span><span class="sxs-lookup"><span data-stu-id="83a1c-171">All these events are one-way notifications from the client.</span></span> <span data-ttu-id="83a1c-172">ただし、応答を設定できるため、**onActivityChanged** イベントは多少特殊なものです。</span><span class="sxs-lookup"><span data-stu-id="83a1c-172">However, the **onActivityChanged** event is somewhat special, because you can set a response.</span></span> <span data-ttu-id="83a1c-173">通常、ユーザーが変更を加えた場合 (たとえば、アクティビティを新しい時間にドラッグする)、他のアクティビティも更新するか、アクティビティ自体を調整する必要があります (たとえば、列テキストを変更する必要がある)。</span><span class="sxs-lookup"><span data-stu-id="83a1c-173">Typically, when a user makes a modification (for example, he or she drags an activity to a new time), either other activities must also be updated or some adjustments must be made to the activity itself (for example, the column texts must be changed).</span></span> <span data-ttu-id="83a1c-174">**GanttControlActivityModificationResponse** 応答で、更新する必要のあるアクティビティの一覧を提示することができます。</span><span class="sxs-lookup"><span data-stu-id="83a1c-174">In the **GanttControlActivityModificationResponse** response, you can provide a list of activities that must be updated.</span></span> <span data-ttu-id="83a1c-175">ユーザーによる変更がそのまま受け入れられる場合、応答を設定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="83a1c-175">If the change that the user makes is just accepted as is, no response must be set.</span></span> <span data-ttu-id="83a1c-176">ただし、少なくとも、新しい開始日と終了日を表示するよう保証するため、ほとんどの場合現在の活動の列テキストは更新される必要があります。</span><span class="sxs-lookup"><span data-stu-id="83a1c-176">However, at the very least, the column texts of the current activity must be updated in most cases, to guarantee that the new from and to dates appear.</span></span> <span data-ttu-id="83a1c-177">活動で、**parmAllowMove** フラグは、活動が移動できるかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="83a1c-177">On an activity, the **parmAllowMove** flag determines whether the activity can be moved.</span></span> <span data-ttu-id="83a1c-178">ただし、**GanttControlConfiguration** の高レベルのフラグは、任意の活動を移動 (**parmAllowMoveActivities**) またはサイズを変更 (**parmAllowResizeActivities**) できるかどうか、または、活動の完了率を変更 (**parmAllowCompletionChange**) できるかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="83a1c-178">However, higher-level flags on **GanttControlConfiguration** determine whether any activity can be moved (**parmAllowMoveActivities**) or resized (**parmAllowResizeActivities**), or whether the completion percentage for the activity can be changed (**parmAllowCompletionChange**).</span></span>



