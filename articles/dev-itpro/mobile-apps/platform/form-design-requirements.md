---
title: フォーム デザインの要件
description: このトピックでは、モバイル アプリの設計に関する詳細な情報を示します。
author: makhabaz
manager: AnnBe
ms.date: 08/14/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: sericks
ms.search.scope: Operations
ms.custom: 255544
ms.assetid: ''
ms.search.region: Global
ms.author: makhabaz
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Platform update 3
ms.openlocfilehash: c8bab19806eea891d37b6bd839940273c5c06f5a
ms.sourcegitcommit: 16bfa0fd08feec1647829630401ce62ce2ffa1a4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/02/2019
ms.locfileid: "1851477"
---
# <a name="form-design-requirements"></a><span data-ttu-id="47d77-103">フォーム デザインの要件</span><span class="sxs-lookup"><span data-stu-id="47d77-103">Form design requirements</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="47d77-104">このセクションでは、モバイル アプリでうまく機能する Finance and Operations フォームを構築するための貴重なガイドラインを示します。</span><span class="sxs-lookup"><span data-stu-id="47d77-104">This section provides valuable guidelines for building Finance and Operations forms that work well with the mobile app.</span></span>

-   <span data-ttu-id="47d77-105">各フォームは、表示メニュー項目を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="47d77-105">Each form must have an associated Display Menu Item.</span></span>
    -   <span data-ttu-id="47d77-106">表示メニュー項目の **ルート ナビゲーションを許可する** プロパティを **はい** に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="47d77-106">The Display Menu Item's **Allow Root Navigation** property must be set to **Yes**.</span></span> <span data-ttu-id="47d77-107">この設定により、モバイル フレームワークはメニュー項目によって参照されるフォームを開くことができます。</span><span class="sxs-lookup"><span data-stu-id="47d77-107">This setting enables the mobile framework to open the form that is referenced by the menu item.</span></span>
-   <span data-ttu-id="47d77-108">それぞれのフォームは、表示メニュー項目から直接アクセスする必要があります。</span><span class="sxs-lookup"><span data-stu-id="47d77-108">Each form must be directly accessible via its Display Menu Item.</span></span>
    -   <span data-ttu-id="47d77-109">アクセシビリティを確認するには、URL 経由でメニュー項目を開きます。</span><span class="sxs-lookup"><span data-stu-id="47d77-109">To verify accessibility, open the menu item via a URL.</span></span> <span data-ttu-id="47d77-110">値がメニュー項目のアプリケーション オブジェクト ツリー (AOT) の名前である場合、単純に **&mi=** を URL に追加します。</span><span class="sxs-lookup"><span data-stu-id="47d77-110">Just append **&mi=** to the URL, where the value is the Application Object Tree (AOT) name of your menu item.</span></span>
    -   <span data-ttu-id="47d77-111">フォームにこの方法でアクセスするときに、そのフォームが開かないまたは表示されない場合、モバイル アプリケーションでは動作しません。</span><span class="sxs-lookup"><span data-stu-id="47d77-111">If the form doesn't open or show data when you access it in this way, the form won't work with the mobile app.</span></span>
-   <span data-ttu-id="47d77-112">データが表示する各フォームには、1 つのマスター ルート データ ソースが必要です。</span><span class="sxs-lookup"><span data-stu-id="47d77-112">Each form that shows data must have one Master Root Data Source.</span></span>
    -   <span data-ttu-id="47d77-113">このデータ ソースは、フォーム上の最初のデータ ソースでなければなりません (デザイナーの最上位)。</span><span class="sxs-lookup"><span data-stu-id="47d77-113">This data source must be the first data source on the form (top-most in the designer).</span></span>
    -   <span data-ttu-id="47d77-114">このデータ ソースは、他のデータ ソースに結合してはいけません。</span><span class="sxs-lookup"><span data-stu-id="47d77-114">This data source must not be joined to any other data sources.</span></span>
-   <span data-ttu-id="47d77-115">各フォームでは、データ ソース フィルターを作業する必要があります。</span><span class="sxs-lookup"><span data-stu-id="47d77-115">Each form must work with the data source filters.</span></span>
    -   <span data-ttu-id="47d77-116">Web クライアントでフォームを開いた後、**フィルターの表示**ボタンを使用してフィルター ウィンドウを開きます。</span><span class="sxs-lookup"><span data-stu-id="47d77-116">After you open the form in the web client, open the filter pane by using the **Show filters** button.</span></span> 
    
        ![フィルター ボタンを表示](media/filterpane.png) 
        
        <span data-ttu-id="47d77-118">その後 **フィルター フィールドの追加** をクリックして、マスター ルート データ ソースが、使用可能なフィールドの一覧にあるフィールドのテーブルとして表示されることを確認します。</span><span class="sxs-lookup"><span data-stu-id="47d77-118">Then click **Add a filter field**, and verify that the Master Root Data Source appears as the table for fields in the list of available fields.</span></span> <span data-ttu-id="47d77-119">他のテーブルも表示されますが、マスター ルート データ ソースがこの一覧に表示される**必要があります**。</span><span class="sxs-lookup"><span data-stu-id="47d77-119">Other tables can also appear, but the Master Root Data Source **must** appear in this list.</span></span> <span data-ttu-id="47d77-120">それ以外の場合、モバイル アプリケーションは、コンテキストを使用する検索とナビゲーションを有効にしません。</span><span class="sxs-lookup"><span data-stu-id="47d77-120">Otherwise, the mobile app won't enable searches and navigation that uses context.</span></span>
    -   <span data-ttu-id="47d77-121">検索中: モバイル アプリケーションは、バックグラウンドでフィルター フレームワークを使用して Finance and Operations のデータに対してオンライン検索を行います。</span><span class="sxs-lookup"><span data-stu-id="47d77-121">Searching: The mobile app does online searches against Finance and Operations data by using the Filters framework behind the scenes.</span></span>
    -   <span data-ttu-id="47d77-122">コンテキストを使用するナビゲーション: モバイル アプリは、最初にメニュー項目からターゲット フォームを開いてから、指定されたレコード コンテキストのみを表示するフィルター フレームワークを使用することで、リストから詳細へのナビゲーション (およびその他のコンテキスト認識ナビゲーション) を可能にします。</span><span class="sxs-lookup"><span data-stu-id="47d77-122">Navigation that uses context: The mobile app enables list-to-details navigation (and other context-aware navigation) by first opening the target form via the menu item and then using the Filters framework to show only the specified record context.</span></span>
    -   <span data-ttu-id="47d77-123">リストと詳細のナビゲーション: グリッドがフォーム A (リスト フォーム) 上にバインドされているテーブルは、詳細フォーム (フォーム B) 上のマスター ルート データ ソースである必要があります。</span><span class="sxs-lookup"><span data-stu-id="47d77-123">List-to-details navigation: The table that the grid is bound to on form A (the list form) must be the Master Root Data Source on the details form (form B).</span></span> <span data-ttu-id="47d77-124">ユーザーがフォーム A の一覧でレコードを選択すると、モバイル フレームワークは、レコードを一意に識別するフィルターをフォーム B に適用することによって、レコードのコンテキストで移動します。</span><span class="sxs-lookup"><span data-stu-id="47d77-124">When a user selects a record in the list on form A, the mobile framework navigates with record context by applying filters on form B that uniquely identify the record.</span></span>

### <a name="design-considerations"></a><span data-ttu-id="47d77-125">デザインの考慮事項</span><span class="sxs-lookup"><span data-stu-id="47d77-125">Design considerations</span></span>

#### <a name="using-data-methods"></a><span data-ttu-id="47d77-126">データ メソッドの使用</span><span class="sxs-lookup"><span data-stu-id="47d77-126">Using data methods</span></span>

<span data-ttu-id="47d77-127">表示メソッドを使用してページ (リスト タイプ ページおよび詳細タイプ ページの両方) 上にデータを表示することができます。</span><span class="sxs-lookup"><span data-stu-id="47d77-127">You can use display methods to show data on pages (both list type pages and detail type pages).</span></span> <span data-ttu-id="47d77-128">ただし、表示メソッドを使用する場合、覚えておくべき 2 つのキー ポイントがあります。</span><span class="sxs-lookup"><span data-stu-id="47d77-128">However, there are two key points to remember when you use display methods:</span></span>

-   <span data-ttu-id="47d77-129">**検索中** – ユーザーが「オンライン」の検索 (つまり、ローカルにキャッシュされたデータの代わりに、Finance and Operations のデータに対して実行される検索) をする時、Finance and Operations におけるフィルタリング フレームワークは、データ メソッドに対する検索をサポートしていないため、検索は表示方法と一致しません。</span><span class="sxs-lookup"><span data-stu-id="47d77-129">**Searching** – When a user performs an “online” search (that is, a search that is run against data in Finance and Operations instead of locally cached data), the search won't match against display methods, because the Filtering framework in Finance and Operations doesn't support searches against data methods.</span></span> <span data-ttu-id="47d77-130">ただし、ユーザーがローカルにキャッシュされたデータに対する検索を実行すると、レコードがデバイスにキャッシュされた場合、検索は表示方法と一致します。</span><span class="sxs-lookup"><span data-stu-id="47d77-130">However, when a user does a search against locally cached data, the search will match against display methods, provided that the records have been cached on the device.</span></span>
-   <span data-ttu-id="47d77-131">**オフライン** – デバイスが Finance and Operations サーバーに接続されていない状態で、ユーザーがデータを作成または更新すると、一時レコードがローカル キャッシュに作成されます。</span><span class="sxs-lookup"><span data-stu-id="47d77-131">**Offline** – If a user creates or updates data while his or her device isn’t connected to the Finance and Operations server, temporary records are created in the local cache.</span></span> <span data-ttu-id="47d77-132">これらの一時レコードは Finance and Operations でまだ処理されていないため、レコードに自動的に入力されるフィールドやサーバー側のビジネス ロジックによる既定のフィールドがある場合、これらのフィールドはレコードが Finance and Operations と同期されるまで空白です。</span><span class="sxs-lookup"><span data-stu-id="47d77-132">Because these temporary records haven't yet been processed in Finance and Operations, if the records have any fields that are automatically populated or defaults by server-side business logic, these fields will remain empty until the records have been synced with Finance and Operations.</span></span> <span data-ttu-id="47d77-133">表示メソッドは、一時的なレコードのために空になるフィールドのカテゴリに分類されます。</span><span class="sxs-lookup"><span data-stu-id="47d77-133">Display methods fall into this category of fields that will be empty for a temporary record.</span></span>

#### <a name="designing-for-offline"></a><span data-ttu-id="47d77-134">オフライン用のデザイン</span><span class="sxs-lookup"><span data-stu-id="47d77-134">Designing for offline</span></span>

<span data-ttu-id="47d77-135">Finance and Operations サーバーに密に接続され、サーバー上にオープン フォームを有するオープン ユーザー セッションを維持する Finance and Operations の Web クライアントとは異なり、モバイル アプリは短いバーストでのみユーザー セッションを生成する (およびフォームを開く)と同時に、サーバーと同期化します (ページの場合はデータの読み込み、アクションの場合はデータの書込み/更新による)。</span><span class="sxs-lookup"><span data-stu-id="47d77-135">Unlike the Finance and Operations web client, which is highly connected to the Finance and Operations server and maintains an open user session that has open forms on the server, the mobile app creates user sessions (and opens forms) only in short bursts while the app is being synced with the server (via data read for pages, or via data write/update for actions).</span></span> <span data-ttu-id="47d77-136">サーバーと同期するアクションがなく、ローカル データ キャッシュが最新の場合、ユーザーが明示的にプルをトリガーしない限り、モバイル アプリは、ユーザーがアプリをナビゲートする際に、(ユーザーが明示的にプルして更新しない限り) Finance and Operations サーバーと通信しません。</span><span class="sxs-lookup"><span data-stu-id="47d77-136">If there are no actions to sync with the server, and if the local data cache is up to date, the mobile app won't communicate with the Finance and Operations server as a user navigates around the app (unless the user triggers an explicit pull-to-refresh).</span></span> <span data-ttu-id="47d77-137">モバイル アプリのページとアクションの設計中に、このデータ フロー パターンに注意することが重要です。</span><span class="sxs-lookup"><span data-stu-id="47d77-137">It's important that you keep this data flow pattern in mind while you design pages and actions in the mobile app.</span></span> <span data-ttu-id="47d77-138">ページが読み込まれるか、アクションが起動するたびに Finance and Operations フォームのロジックが実行されるとは限りません。</span><span class="sxs-lookup"><span data-stu-id="47d77-138">You should not expect Finance and Operations form logic to run every time that a page is loaded or an action is started.</span></span> <span data-ttu-id="47d77-139">ユーザーがアクションを実行している間にフォーム ロジックが実行されることを想定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="47d77-139">You should also never expect form logic to run while a user is completing an action.</span></span> <span data-ttu-id="47d77-140">フォーム ロジックは、アクションが Finance and Operations サーバーと同期されている場合にのみ実行されます。</span><span class="sxs-lookup"><span data-stu-id="47d77-140">Form logic is run only when the action is being synced with the Finance and Operations server.</span></span> <span data-ttu-id="47d77-141">次のリストは、フォーム ロジックの実行にかかる時間のみを示しています。</span><span class="sxs-lookup"><span data-stu-id="47d77-141">The following list describes the only times when you should expect Form logic to run.</span></span> <span data-ttu-id="47d77-142">**Finance and Operations フォーム ロジックは、ページがモバイルアプリで初めて開かれる直前に実行されます。**</span><span class="sxs-lookup"><span data-stu-id="47d77-142">**Finance and Operations form logic runs right before a page is opened on the mobile app for the first time.**</span></span>

1.  <span data-ttu-id="47d77-143">ユーザーがまずページを開くと、モバイル アプリが Finance and Operations と連絡を取って、関連付けられているフォームを開きます。</span><span class="sxs-lookup"><span data-stu-id="47d77-143">When a user first opens a page, the mobile app reaches out to Finance and Operations and opens the associated forms.</span></span> <span data-ttu-id="47d77-144">*このプロセス中、フォーム初期化およびデータ ソースの初期化などのロジックはすべて通常通りに実行されます。*</span><span class="sxs-lookup"><span data-stu-id="47d77-144">*During this process, logic such as form init and data source init is all run in the usual manner.*</span></span>
2.  <span data-ttu-id="47d77-145">モバイル アプリ フレームワークは、フォームのコントロールから必要なデータを直接読み込み、データをモバイル アプリに送り返します。</span><span class="sxs-lookup"><span data-stu-id="47d77-145">The mobile app framework reads the required data directly from the controls on the forms and sends the data back to the mobile app.</span></span>
3.  <span data-ttu-id="47d77-146">モバイル アプリはデータをキャッシュし、モバイル アプリのページに表示します。</span><span class="sxs-lookup"><span data-stu-id="47d77-146">The mobile app caches the data and shows it in the page on the mobile app.</span></span>
4.  <span data-ttu-id="47d77-147">ページを開くための更なる試行は、キャッシュされたデータに読み込まれます。</span><span class="sxs-lookup"><span data-stu-id="47d77-147">Future attempts to open the page will load the cached data.</span></span> <span data-ttu-id="47d77-148">*これらの試行は、ユーザーがページを明示的にリフレッシュするか、キャッシュの有効期限が切れない限りフォーム ロジックを再度実行しません。(現在、キャッシュは 30 分後に期限切れになるように設定されています。)*</span><span class="sxs-lookup"><span data-stu-id="47d77-148">*These attempts won't run the form logic again, unless the user explicitly refreshes the page or the cache expires. (Currently, the cache set to expire after 30 minutes.)*</span></span>

<span data-ttu-id="47d77-149">**モバイル アプリからサーバーに送信されたアクションの処理**</span><span class="sxs-lookup"><span data-stu-id="47d77-149">**Processing an action that has been submitted to the server from the mobile app**</span></span>

1.  <span data-ttu-id="47d77-150">ユーザーがアクションを開いて、そのアクションにデータを入力するとき、*どのフォーム ロジックも実行されません*。</span><span class="sxs-lookup"><span data-stu-id="47d77-150">When a user opens an action and fills in the data in that action, *no form logic is run*.</span></span> <span data-ttu-id="47d77-151">ユーザーは、オンラインまたはオフラインのいずれかでアクションを完了できます。</span><span class="sxs-lookup"><span data-stu-id="47d77-151">A user can complete an action while he or she is either offline or online.</span></span> <span data-ttu-id="47d77-152">どちらの場合も、システムは同じように動作します。</span><span class="sxs-lookup"><span data-stu-id="47d77-152">The system behaves the same way in both cases.</span></span>
2.  <span data-ttu-id="47d77-153">ユーザーがアクションの**完了**/**保存**をクリックすると、モバイル アプリはデータ同期操作をキューにします。</span><span class="sxs-lookup"><span data-stu-id="47d77-153">After the user clicks **Done**/**Save** on the action, the mobile app queues a data synchronization operation.</span></span> <span data-ttu-id="47d77-154">この操作は、モバイル アプリがインターネットに接続されているときにサーバーと同期されます。</span><span class="sxs-lookup"><span data-stu-id="47d77-154">This operation will be synced with the server when the mobile app is connected to the Internet.</span></span>
3.  <span data-ttu-id="47d77-155">インターネット接続 (そのアクションの直後に発生することもあります) が検出されると、モバイル アプリは、処理用の Finance and Operations サーバーにデータ同期操作を送信します。</span><span class="sxs-lookup"><span data-stu-id="47d77-155">When an Internet connection is detected (which can happen immediately after the action is completed) the mobile app sends the data synchronization operation to the Finance and Operations server for processing.</span></span>
4.  <span data-ttu-id="47d77-156">サーバー上でオペレーションが処理される間、フレームワークにより関連フォームが開かれ、フォーム コントロールに値を渡すことによりアクションからのデータが入力されます。</span><span class="sxs-lookup"><span data-stu-id="47d77-156">While the operation is processed on the server, the framework opens the associated forms and enters the data from the action by passing values into the form controls.</span></span> <span data-ttu-id="47d77-157">*このプロセス中、Finance and Operations フォーム ロジックは通常の方法（init、変更、クリックなどはすべて実行）で実行されます。*</span><span class="sxs-lookup"><span data-stu-id="47d77-157">*During this process, Finance and Operations form logic is run in the usual manner (init, modified, clicked, and so on, are all run).*</span></span> <span data-ttu-id="47d77-158">ただし、この処理が行われている間、モバイル ユーザーがアプリの別の部分に移動した可能性があります。</span><span class="sxs-lookup"><span data-stu-id="47d77-158">However, the mobile user might have moved to a different part of the app while this processing is occurring.</span></span> <span data-ttu-id="47d77-159">*コントロールを表示 / 非表示するどのフォーム ロジックも、モバイルアプリに表示される UI は無効になります。*</span><span class="sxs-lookup"><span data-stu-id="47d77-159">*Any form logic that shows/hides controls will have no effect on the UI that is seen in the mobile app.*</span></span> <span data-ttu-id="47d77-160">したがって、同期時間を最小限に抑えるために、UI ロジックをフォームに含めないことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="47d77-160">Therefore, to minimize synchronization times, it's best not to include any UI logic on the form.</span></span>

#### <a name="building-mobile-versions-of-existing-forms"></a><span data-ttu-id="47d77-161">既存のフォームのモバイル バージョンの作成</span><span class="sxs-lookup"><span data-stu-id="47d77-161">Building mobile versions of existing forms</span></span>

<span data-ttu-id="47d77-162">新しいモバイル固有フォームを作成するのではなく、モバイル フレームワークと連携できるように、既存のフォームを変更する場合は、条件付きでモバイル固有のシナリオのフォームの動作を変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="47d77-162">If you decide to modify existing forms so that they work with the mobile framework, instead of building new mobile-specific forms, you might have to conditionally change the form's behavior for mobile-specific scenarios.</span></span> <span data-ttu-id="47d77-163">Web クライアント ユーザーがページ/アクションをデザインするセッション中、またはモバイル ユーザーのページ/アクションを読み込むためにモバイル フレームワーク バック エンドが作成したセッション中に、コードにアクセスしているかどうかを決定するために X++ コードでは次の静的 X++ アプリケーション プログラミング インターフェイス (API) を使用することができます。</span><span class="sxs-lookup"><span data-stu-id="47d77-163">You can use the following static X++ application programming interfaces (APIs) in your X++ code to determine whether the code is being accessed during a session where a web client user is designing pages/actions or during a session that the mobile framework back end created to load pages/actions for a mobile user.</span></span> <span data-ttu-id="47d77-164">**モバイル デザイナーで、フォームが使用されている場合**</span><span class="sxs-lookup"><span data-stu-id="47d77-164">**When a form is being used with the mobile designer**</span></span>

    SysTaskRecorderController::isDesigningApp()

<span data-ttu-id="47d77-165">**モバイル フレームワークによりバックエンドからページをロードしてアクションを実行するフォームを使用している場合**</span><span class="sxs-lookup"><span data-stu-id="47d77-165">**When a form is being used by the mobile framework back end to load pages and run actions**</span></span>

    SysTaskRecorderController::isExecutingApp()

#### <a name="finance-and-operations-form-control-support"></a><span data-ttu-id="47d77-166">Finance and Operations のフォーム コントロール サポート</span><span class="sxs-lookup"><span data-stu-id="47d77-166">Finance and Operations form control support</span></span>

<span data-ttu-id="47d77-167">各種の基本データ型 (文字列、日付、および番号) とグリッドの Finance and Operations がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="47d77-167">The Finance and Operations form controls for the various base data types (strings, dates, and numbers) and grids are supported.</span></span> <span data-ttu-id="47d77-168">ただし、いくつかの一般的なコントロールのサポートは限定されます。</span><span class="sxs-lookup"><span data-stu-id="47d77-168">However, a few common controls have limited support.</span></span> <span data-ttu-id="47d77-169">**参照グループ** 参照グループ コントロール内のフィールドは、ページをデザインするときに互換性があります。</span><span class="sxs-lookup"><span data-stu-id="47d77-169">**Reference groups** Fields from within Reference groups controls are compatible when you design pages.</span></span> <span data-ttu-id="47d77-170">ただし、アクションをデザインする際に互換性がありません。</span><span class="sxs-lookup"><span data-stu-id="47d77-170">However, they aren't compatible when you design Actions.</span></span> <span data-ttu-id="47d77-171">いくつかの問題を経験せずにこれらのフィールドを選択することができるかもしれませんが、参照グループはモバイル フレームワークと基本的に互換性がありません。</span><span class="sxs-lookup"><span data-stu-id="47d77-171">Although you might be able to select these fields without experience any issue, Reference groups have a fundamental incompatibility with the mobile framework.</span></span> <span data-ttu-id="47d77-172">参照グループを使用しないことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="47d77-172">We recommend that you not use Reference groups.</span></span> <span data-ttu-id="47d77-173">代わりに、フォームに直接コントロールを追加してから、プロパティ シートを使用して代理外部キー (SFK) に直接コントロールをバインドします。</span><span class="sxs-lookup"><span data-stu-id="47d77-173">Instead, add a control directly to the form, and then bind the control directly to the surrogate foreign key (SFK) by using the property sheet.</span></span>

