---
title: AX 2012 から Finance and Operations へのアップグレード
description: このトピックでは、Microsoft DynamicsAX 2012 を現在実行している顧客が、データとコードを Microsoft Dynamics 365 for Finance and Operations に移動するために使用できるプロセスについて説明します。
author: tariqbell
manager: AnnBe
ms.date: 12/10/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: margoc
ms.search.scope: Operations
ms.search.region: Global
ms.author: tabell
ms.search.validFrom: 2017-06-16
ms.dyn365.ops.version: Platform update 8
ms.openlocfilehash: 9cfd0433d00802cef07d148e79aaefefca5fefda
ms.sourcegitcommit: 0f530e5f72a40f383868957a6b5cb0e446e4c795
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/29/2019
ms.locfileid: "369475"
---
# <a name="upgrade-from-ax-2012-to-finance-and-operations"></a>AX 2012 から Finance and Operations へのアップグレード

[!include [banner](../includes/banner.md)]

[!include [upgrade banner](../includes/upgrade-banner.md)]

プラットフォーム更新プログラム 8 および 2017 年 7 月のアプリケーション リリース以降を実行している Microsoft Dynamics 365 for Finance and Operations は、現在 Microsoft Dynamics AX 2012 を実行している顧客がデータとコードを Finance and Operations に移動するために使用できるアップグレード パスを提供します。 現在、AX 2012 R3 および AX 2012 R2 からのアップグレードがサポートされています。 アップグレード プロセスは、次の要素を基に構築されています。

- AX 2012 から既存のカスタム アプリケーション コードを継承するのに役立つツール。
- データベースを継承するのに使用できるデータ アップグレード プロセス。 したがって、完全なトランザクション履歴をアップグレードすることができます。

> [!IMPORTANT]
> 一部の[推奨されない機能](deprecated-features.md) を実行している Microsoft Dynamics AX 2012 の実装は、現在 Finance and Operations にアップグレードできません。 たとえば、仮想会社またはデータ パーティションのいずれかを使用しているシステムからのアップグレードはできません。 システムがアップグレードできるかどうか分からない場合は、アップグレード アナライザー ツールを実行します。 

## <a name="overview"></a>概要

分析、実行、および検証という 3 つの包括的なフェーズとして全体のアップグレード プロセスを視覚化することができます。

次の図は、エンド ツー エンドのアップグレード プロセス、および各フェーズの一部とみなす活動を示します。 

![アップグレード プロセス](./media/upgrade-process.png)

## <a name="analyze"></a>分析

分析フェーズにおける活動は、アップグレードに必要な工数を見積もるのに役立ちます。 またプロジェクト計画の準備にも役立ちます。 これらの活動は Finance and Operations.を購入する前に実行できます。 必要になる工数およびリソースについてのデータ点を提供することにより、確かな情報に基づいた購買決定をするのに役立ちます。

### <a name="sign-up-for-a-finance-and-operations-lcs-trial-or-partner-project"></a>Finance and Operations の LCS トライアルまたはパートナー プロジェクトにサインアップします。

Finance and Operations を購入する前に分析活動を実行するには、LCS トライアルまたはパートナー プロジェクトにサインアップする必要があります。 自分の Finance and Operations 環境を配置することができます。 また、AX 2012 の環境と既存のカスタム コードを評価するために使用する Microsoft Dynamics Lifecycle Services (LCS) 内のツールにアクセスすることもできます。

AX 2012 に既存の LCS プロジェクトがある場合は、追加の Finance and Operations の LCS プロジェクトにサインアップする必要があります。

顧客用に LCS トライアル プロジェクトを取得する方法の詳細については、https://go.microsoft.com/fwlink/?LinkId=2017742&clcid=0x409 を参照してください。

LCS パートナー プロジェクトを取得する方法の詳細については、https://mbs.microsoft.com/partnersource/global/news-events/news/Microsoft_Dynamics_AX_Public_Preview を参照してください。

これは、[30日間試用版](https://aka.ms/D365OperationTrials) と異なることに注意してください。 30日間試用版は、アプリケーションを活用し評価するのに使用できる Finance and Operations の配置済みのインスタンスを提供します。 ただし、分析活動には完全な LCS 経験とツールが必要です。

### <a name="select-the-upgrade-methodology"></a>アップグレード方法の選択
新しい LCS プロジェクトで、プロジェクト方法を **AX 2012 を Dynamics 365 for Finance and Operations にアップグレードする**に設定します。 この方法は、アップグレード中の AX 2012 の顧客に対して特別に行われます。 3 つのフェーズについて詳細に説明し、プロセスに関するすべてのサポート ドキュメントへのリンクを提供します。

![アップグレード方法](./media/methodology.png)
 
### <a name="run-the-upgrade-analyzer"></a>アップグレード アナライザーの実行
アップグレード アナライザー ツールは、AX 2012 環境に対して実行され AX 2012 環境を整えるために行なうタスクを特定して、アップグレードをより円滑にまたより安価にするのに役立ちます。

- **データ クリーンアップ** – このプロセスは、機能の損失を起こさずに削除できるデータを識別するのに役立ちます。 ツールは、クリーンアップ プロセスを実行することにより、削減できるさまざまなデータ タイプを識別します。 各データ タイプについて、クリーンアップの影響についての説明が与えられます。 その後、クリーンアップ プロセスを実行するかどうかを決定します。 Finance and Operations サブスクリプションのコストの一部はデータベースのサイズに基づいています。 したがって、そのサイズを小さくすることにより、サブスクリプション コストのそのコンポーネントを削減し、アップグレード稼働プロセスに必要な時間も短縮できます。 データベースが小さいほうが、確実にアップグレードが高速になります。
- **SQL コンフィギュレーション** – このプロセスは、SQL コンフィギュレーションを確認して最適化を推奨します。 SQL が最適に動作するようにすることで、このプロセスはアップグレード稼働プロセスに必要な時間を短縮できます。
- **削除予定の機能** – このプロセスは現在使用しているものの Finance and Operations では使用できない機能を識別します。 したがって、このプロセスは機能のギャップを早期に発見するのに役立ちます。 また、代替案も提供します。

また、この手順の一部として、AX 2012 環境でアップグレード前のチェックリストをインストールする必要があります。 このチェックリストを使用すると、アップグレード手順に必要となるデータを入力することができます。 たとえば、あるアップグレード前のチェックリスト タスクでは、現在の各 AX 2012 ユーザーごとに Microsoft Azure Active Directory (Azure AD) サインイン情報を提供し、各ユーザーが Finance and Operations にサインインできるようにします。 

- AX 2012 R3 からアップグレードする場合は、[KB 4035163](https://go.microsoft.com/fwlink/?linkid=852255) をインストールします
- AX 2012 R2 からアップグレードする場合は、[KB 4048614](https://go.microsoft.com/fwlink/?linkid=869025) をインストールします

アップグレード アナライザー ツールの出力は、AX 2012 システム管理者のアップグレード プロジェクト計画のワークストリームになります。詳細については、[分析: アップグレード アナライザーを使用して移行作業を計画する](upgrade-analyzer-tool.md) を参照してください。

### <a name="run-the-code-upgrade-estimation-tools"></a>コード アップグレード見積ツールの実行
このステップでは、AX 2012 からコードを取得して新しい形式に変換し、開発者が後に解決する必要がある競合についてフィードバックを提供します。 このステップがコード アップグレードのコストの見積をする際の基礎となります。

このステップを完了するには、モデル ストア エクスポートとして AX 2012 からコードをエクスポートし、それを LCS コード アップグレード ツールにアップロードする必要があります。 コード アップグレード ツールは、コードのアップグレード バージョン、および解決の必要がある残りの競合に関するレポートを生成します。 開発者はその後、アップグレード済みのコードとレポートの両方を確認して、コード基準をアップグレードするために必要な工数を決定します。

このステップの出力は、Microsoft Dynamics AX 開発者のアップグレード プロジェクト計画におけるワークストリームを表します。

詳細については、「[分析: コード アップグレードの工数見積](analyze-code-upgrade.md)」を参照してください。

### <a name="deploy-a-demo-environment"></a>デモ環境の配置
デモ環境は、(独自のデータではない) デモ データおよび標準コード (カスタマイズなし) を含む既定の環境です。 デモ環境を配置して、新しい機能を評価すること、および AX 2012 で使用されるものの Finance and Operations では変更になっている可能性がある標準プロセスの基本的なフィット ギャップ分析を実行することをお勧めします。 これらのデモ環境は、Azure で配置するか、独自のハードウェア上で実行する仮想マシン (VM) としてダウンロードすることができます。 パブリック プレビュー プロジェクトをまだ使用しており Finance and Operations のサブスクリプションをまだ購入していないので、Azure で配置する場合は Azure のサブスクリプションを提供する必要があります。

このステップの出力は、機能ユーザーおよびビジネス ユーザーのアップグレード プロジェクト計画におけるワーク ストリームを表します。

詳細については、「[分析: サンドボックス環境の配置](analysis-sandbox.md)」を参照してください。

### <a name="create-a-project-plan"></a>プロジェクト計画の作成
プロジェクト計画のテンプレートはアップグレード方法で提供されます。 このステップでは、分析フェーズの前のステップからの出力を使用してアップグレード プロジェクトのプロジェクト計画を作成します。 プロジェクト計画には、すべてのテストの詳細も含まれます。データ アップグレード テスト、切替テスト (切替モック)、機能テスト パス反復、およびそれらのタスクのさまざまなリソース割り当てについての詳細です。

このステージで、プロジェクト計画は Finance and Operations へのアップグレードに関連する時間とコストを理解するのに役立つデータ点を提供します。

## <a name="execute"></a>実行
実行フェーズ中は、分析フェーズ中に計画したタスクを処理します。 実行フェーズに移行するには、Finance and Operations を購入する必要があります。また、そのアップグレードで正常に動作する利用可能なリソースも必要です。

### <a name="switch-to-the-lcs-implementation-project"></a>LCS 実装プロジェクトへの切り替え
分析フェーズに使用したパブリック プレビュー プロジェクトは役目を果たしました。 破棄して構いません。 残りのステップには、分析フェーズの最後のステップで作成したプロジェクト計画のみが必要です。

Finance and Operations のサブスクリプションを購入すると、新しい LCS プロジェクトへのサインアップ方法の詳細を受け取ります。 このプロジェクトは実装プロジェクトと呼ばれ、サブスクリプションを持っている間はそのサブスクリプションの新しい永続的な LCS プロジェクトになります。 このプロジェクトは、Microsoft が管理するという点で、パブリック プレビュー プロジェクトとは異なります。 したがって、このプロジェクトには次の特徴があります。

- プロジェクト内のすべての環境は Azure でホストされています。
- プロジェクトに関連付けられている Azure のサブスクリプションは、Microsoft によって管理されます。 したがって、Azure コストの個別の請求はありません。 そのコストは Finance and Operations のサブスクリプションによってカバーされます。
- プロジェクトにおける実稼働環境は、Microsoft が保守します。 そのため、コードの配置、アップグレード、およびインフラストラクチャの保守はお客様のスタッフではなく、直接 Microsoft が行ないます。 

### <a name="perform-the-ax-2012-preparation-tasks"></a>AX 2012 準備タスクの実行
アップグレード アナライザー ツールが検出し、アップグレード プロジェクト計画で文書化されているタスクを完了します。 Microsoft Dynamics AX のシステム管理者およびデータベース管理者 (DBA) がこれらのタスクを完了する必要があります。

[AX 2012 から Dynamics 365 for Finance and Operations へのデータ アップグレード – AX 2012 のアップグレード前のチェックリスト](prepare-data-upgrade.md)

### <a name="perform-code-upgrade"></a>コード アップグレードの実行
分析フェーズのコード アップグレードの見積ステップ中に計画されたタスクを完了します。 開発者がこれらのタスクを実行する必要があります。

この時点から、AX 2012 のコード変更は凍結する必要があります。 AX 2012 では緊急コード変更のみが許可されることになります。 変更が行われた場合は、新しいコード基準に手動でポートする必要があります。

### <a name="develop-new-code"></a>新しいコードの開発
分析フェーズの「デモ環境の配置」ステップ中に実行されたフィットギャップ分析からのタスクを完了します。 これらのタスクは恐らく、コンフィギュレーションを定義する機能タスクと取り込もうとしている新機能に関連したカスタマイズの開発タスクの混合になります。

### <a name="data-upgrade-development-environment"></a>データ アップグレード (開発環境)
コード アップグレード タスクを完了した後は、AX 2012 データベースを Finance and Operations へ初めてアップグレードできます。 この初回のアップグレードは開発環境で行ない、この段階で検知された問題を容易に修正あるいはデバッグできるようにします。 開発環境では、問題を即座にデバッグし、コードを調整し、アップグレードを数分以内に再実行することができます。 より規模の大きいサンドボックス環境ではこの機敏性は得られず、問題の修正やデバッグ、コードの更新、更新済コードの配置、およびアップグレードの再実行に少なくとも数時間を要します。

次の図がプロセスを示します。 AX 2012 データベースをバックアップし、それを Azure にアップロードし Finance and Operations 環境に復元してからデータ アップグレードを実行するだけです。

![開発環境でのデータ アップグレード](./media/data-upgrade-dev.png)
 
データ アップグレードは、特殊なタイプの配置可能パッケージを介して行われます。 同じメカニズムを使用して、新しい Finance and Operations コードを 1 つの環境から別の環境へと配置します。

このプロセス中にデータベース内のデータ変換に使用される基礎フレームワークは、**ReleaseUpdatexxx** クラスを実行する X++ バッチ ジョブに基づく AX 2012 のアップグレード フレームワークと大部分は同じです。

詳細については、[開発環境における AX 2012 から Dynamics 365 for Finance and Operations へのデータ アップグレード](data-upgrade-2012.md) を参照してください。

### <a name="data-upgrade-sandbox-environments"></a>データ アップグレード (サンドボックス環境)
開発環境でのデータ アップグレードが完了したら、サンドボックス環境で同じプロセスを実行できます。 サンドボックス環境とは、アップグレードした AX 2012 のデータとコードを使用して、ビジネス ユーザーと機能チームのメンバーが業務プロセスをテストできる環境のことです。

次の図では、サンドボックス環境でデータ アップグレードを実行するためのプロセスを示します。 ここでの違いは、従来の SQL バックアップに代わって bacpac ツールが使用されることです。 Microsoft SQL Server と Azure SQL データベース間の変換には、このツールが必要です。 これは標準の SQL ツールで、Finance and Operations に固有のものではありません。

![サンドボックス環境でのデータ アップグレード](./media/data-upgrade-sandbox.png)

詳細については、[サンドボックス環境における AX 2012 から Dynamics 365 for Finance and Operations へのデータ アップグレード](upgrade-data-sandbox.md) を参照してください。
 
## <a name="validate"></a>検証
検証フェーズを入力すると、アップグレード済カスタム コードとアップグレード済データを含む環境が使用できるようになります。 このフェーズでは、アップグレード済の環境が要求通りに動作することを検証してテストするプロセスを説明します。 また、稼働準備のプロセスについても説明します。

### <a name="perform-cutover-testing-and-create-a-cutover-plan"></a>切替テストの実行および切替計画の作成
ここでは _切替_ という用語を使用して、新しいシステムを作動させる最終的なプロセスを表します。 このプロセスは、AX 2012 をオフにした後かつ Finance and Operations をオンにする前に発生するタスクで構成されます。 

テストの目標、または*切替モック*は、切替プロセスを練習することです。 こうして、稼働への実際の切替に携わるすべての人が円滑に作業を進められるようになります。

次の 2 つの主要なワーク ストリームがあります。

- **技術的なワーク ストリーム** – このワーク ストリームは、データ アップグレードの実行プロセスです。 業務では、許可されているダウンタイムの金額に制限が適用されます。 ダウンタイムの間は、AX 2012 または Finance and Operations のいずれも利用できません。 技術的なワーク ストリームでは、業務でのダウンタイム制限を満たすために、データ アップグレード手順のパフォーマンス チューニングをしなければならない可能性があります。 
- **機能的なワーク ストリーム** – データ アップグレード後、Finance and Operations で複数のコンフィギュレーション タスクが必要になります。 技術的なタスクと共に業務のダウンタイム制限内に収まる必要があるため、これらのタスクすべては文書化および定量化し、リソースを割り当てる必要があります。

詳細については、以下を参照してください。 
- [検証: アップグレード後に完了するタスク](app-validation-process.md)
- 「[検証: 切替テスト](upgrade-cutover-testing.md)」

### <a name="functional-test-pass"></a>機能テストのパス
すべての業務プロセスの完全な機能テスト パスを完了します。 このテスト パスは Finance and Operations に関係するすべての業務プロセスの広範な再テストになります。 これらの業務プロセスには、AX 2012 から継承された古いプロセスと、Finance and Operations で初めて取り込まれた新機能に関係する新しいプロセスの両方が含まれます。 

コードの品質によっては、問題修正と再テストのために機能テスト パスを何回か繰り返さなければならない可能性があります。 問題が修正されたら、関係するすべてのプロセスを確実に再テストし、下流プロセスも上流プロセスも変更による影響を受けないようにします。

詳細については、「[検証: 機能テスト](upgrade-functional-validation.md)」を参照してください。

### <a name="pre-go-live-checklist"></a>稼働前のチェックリスト
稼働前のチェックリストは、稼働への最終的な切替中のエラーの可能性を減らすのに役立つ推奨手順です。 稼働期限の 1 週間前に、AX 2012 で (つまり \<モジュール\> \設定で) コンフィギュレーション変更を中止します。 コンフィギュレーション変更に対するこの制限は、単なる手順にすぎません。 Microsoft Dynamics AX のシステム管理者は、この時点ではこのタイプの変更を保留にすることに同意します。

Finance and Operations コード基準でコード変更を凍結することもお勧めします。 評価されており稼働をブロックしないことが示されている場合を除いて、さらなる変更は許可されるべきではありません。  

コンフィギュレーションの制限およびコード凍結が実行されたら、最終的に切替前にデータ アップグレードを実行する必要があります。 このようにして、すべてが期待通りに動作することを確認できます。 

詳細については、「[検証 - 稼働の準備](upgrade-go-live-prep.md)」を参照してください。

### <a name="go-live"></a>Go live
標準またはプレミア承認テスト環境 (サンドボックス レベル 2 またはそれ以上) でアップグレード テストを正常に完了した場合、および正常にテスト切替を完了した後、実稼働環境をアップグレードして稼働するその時が来ました。 

*切替*という用語は、新しいシステムを稼働させる最後のプロセスに使用します。 この切替プロセスは、Microsoft Dynamics AX 2012 をオフにした後かつ Microsoft Dynamics 365 for Finance and Operations をオンにする前に発生するタスクで構成されます。 

詳細については、[AX 2012 からのアップグレード - 切替プロセス (Go live)](2012-upgrade-cutover.md) を参照してください


## <a name="supported-upgrade-paths"></a>サポートされるアップグレード パス
プライベート プレビューで、AX 2012 R2 および AX 2012 R3 からクラウド バージョンの Finance and Operations へのアップグレードがサポートされています。  

Dynamics AX 2012 RTM からのアップグレードは現在サポートされていません。 オンプレミス バージョンへのアップグレードは現在サポートされていませんが、将来追加される予定です。 

