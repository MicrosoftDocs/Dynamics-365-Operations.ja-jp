---
title: "バージョン 8.0 から 8.1 への環境の更新"
description: "このトピックでは、8.1 アプリケーション リリースに既存の Finance and Operations 8.0 環境を更新するために必要な手順について説明します。"
author: laneswenka
manager: AnnBe
ms.date: 10/04/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Developer, IT Pro
ms.reviewer: sericks
ms.search.scope: Operations
ms.search.region: Global
ms.author: laswenka
ms.search.validFrom: 2018-10-31
ms.dyn365.ops.version: 8.1
ms.translationtype: HT
ms.sourcegitcommit: 12ae99c15bafcd9cc08b30903fe3f251f446b17d
ms.openlocfilehash: 96fbd10d5e1b36057b73a41cc2dad6cda475b45f
ms.contentlocale: ja-jp
ms.lasthandoff: 10/05/2018

---

# <a name="update-environments-from-version-80-to-81"></a>バージョン 8.0 から 8.1 への環境の更新

[!include [banner](../includes/banner.md)]

このトピックでは、8.1 アプリケーション リリースに既存の Dynamics 365 for Finance and Operations 8.0 環境を更新するために必要な手順について説明します。

> [!NOTE]
> 8.1 バイナリ更新プログラム パッケージは、2018 年 10 月 15 日より後に利用可能になります。 このパッケージは、手順 5 ～ 7 に影響を与えます。つまり、2018 年 10 月 1 日より後に手順 1 ～ 4 を開始できます。

## <a name="background"></a>バックグラウンド

従来、アプリケーションの新しいバージョンへの移行には、追加の仮想マシンの展開、コード アップグレード、データ アップグレード、および Microsoft Dynamics サービス エンジニアリング (DSE) チームとの数日前の事前スケジューリングを含む厳格なアップグレードが必要でした。  最新バージョンの取得がより簡単になっており、これは継続的に改善されていきます。

このために、フル アップグレードと比較した場合の更新エクスペリエンスをサポートしています。  これは、8.0 および 8.1 アプリケーション スキーマ間にはデータ アップグレードまたはコード アップグレードの手順が存在しないために可能です。  プラットフォーム アップデートを適用するのと同じように、対象となる環境が更新されます。

バージョン 8.0 から 8.1 に更新するプロセスの概要は次のとおりです。

1. 8.1 開発者環境とビルド環境を展開します。
2. バージョン管理を分岐し、アプリケーション修正プログラムを削除します。
3. カスタム拡張機能や ISV ソリューションを再コンパイルします。
4. 1 つのソフトウェア展開可能パッケージを作成します。
5. 展開可能パッケージを 8.1 バイナリ アップデート パッケージとマージします。
6. 検証用の対象環境を展開します。
7. 生産環境に展開します。

## <a name="deploy-81-developer-and-build-environments"></a>8.1 開発者環境とビルド環境を展開
Lifecycle Services を使用して 1 つ以上の開発者環境と 1 つの新しいビルド環境をアプリケーション 8.1リリースに展開します。

平均では、これには 3 ～ 4 時間かかり、同時に行うことができます。 ビルド環境で、**エージェント プールの新規作成**を行い、**詳細オプション** 画面でこの環境に割り当てます。

Azure DevOps で、既存のビルド定義にアクセスし、8.1 用の新しいエージェント プールを使用していないことを確認します。 これにより、新しいビルド エージェントが古いアプリケーション コードをコンパイルしようとしなくなります。

## <a name="begin-branch-work-for-version-control-and-remove-any-application-hotfixes"></a>バージョン管理の分岐作業を開始し、アプリケーション修正プログラムを削除
新しい環境が展開されるとき、更新の分岐作業を開始します。 例として、バージョン管理での次の分岐構造を使用します。  分岐の設計は顧客ごとに異なりますので、分岐の設定に基づき、それに応じてステップを調整するように注意してください。

[![VersionControl](./media/VersionControl.png)](./media/VersionControl.png)

### <a name="prepare-using-visual-studio"></a>Visual Studio の使用準備
その他の開発コンピューター (展開される新規コンピューター以外) で、Visual Studio を開き、ソース管理エクスプローラーに移動します。 8.1 更新用に分離される新しい分岐を作成します。

[![BranchFor81](./media/BranchFor81.png)](./media/BranchFor81.png)

次に、この分岐で Microsoft パッケージ フォルダーを削除します。 削除する必要のある 8.0 での修正プログラムの適用するからチェックインした、ApplicationSuite などのパッケージがある場合があります。 カスタム パッケージまたは ISV が残っているときのみ、分岐にこれらの変更をチェックインします。

>[!Important]
> バージョン管理ワークスペースを新しい開発環境にマップする前に、これを行うことが重要です。 これは、Microsoft 修正プログラムが削除されて、作業環境に伝播され、手を触れていない 8.1 アプリケーション コードが削除されることのないようにすることです。

## <a name="recompile-custom-extensions-andor-isv-solutions"></a>カスタム拡張機能や ISV ソリューションを再コンパイル
新しい開発環境にこの分岐をマッピングし、ソース コードが提供される場合に拡張および ISV ソリューションをコンパイルする準備が整いました。  ISV が提供されたバイナリ パッケージのみ持っている場合、それらをソース管理にチェックインできます。ビルド環境では、1 つのソフトウェア展開可能パッケージを生産するために、拡張パッケージとバイナリが結合されます。 このプロセスの追加の情報は、[サード パーティからの展開可能パッケージ](../dev-tools/manage-runtime-packages.md#deployable-packages-from-third-parties)にあります。  これは、後で 8.1 バイナリ アップデートとパッケージを結合するときに役立ちます。

>[!NOTE]
> この**ステップは必要**です。8.1 アプリケーション コードにはバイナリ レベルから 8.0 との互換性がないためです。 アプリケーションの将来のリリースでは、この手順はオプションとなります。

## <a name="produce-a-single-software-deployable-package"></a>1 つのソフトウェア展開可能パッケージを作成
開発者環境でコンパイルし、解決するためのエラーがない場合、以前設定した新しい 8.1 ビルド環境エージェントを使用して Azure DevOps でビルドを開始します。 これが完了したら、展開可能パッケージ コンポーネントがビルド結果に添付されます。 このパッケージをダウンロードして、Lifecycle Services アセット ライブラリにアップロードします。  この 1 つのパッケージに、拡張機能と ISV ソリューションがすべて含まれています。

## <a name="merge-the-deployable-package-with-the-81-binary-update-package"></a>展開可能パッケージを 8.1 バイナリ アップデート パッケージとマージ
Lifecycle Services で、生産 8.0 環境の詳細ページを参照します。 **すべてのバイナリ更新プログラム** タイルに、8.1 アプリケーション リリースのオプションが表示されます。 アセット ライブラリにこのパッケージを保存します。  

アセット ライブラリで、保存したばかりの新しい 8.1 ソフトウェア展開可能パッケージと 8.1 バイナリ更新プログラム パッケージの両方を検索します。  両方のパッケージを強調表示し、**マージ** を選択します。 これにより、ファイルが、マージされた更新パッケージに結合されます。  このパッケージをさまざまなテスト環境に適用する準備が整いました。

## <a name="deploy-to-target-environments-for-validation"></a>検証用の対象環境を展開
マージされた更新パッケージを使用して、これをさまざまなテスト環境に展開します。  この方法の詳細については、[クラウド環境への更新プログラムの適用](../deployment/apply-deployable-package-system.md) を参照してください。  少なくとも、サブスクリプションに付属しているサンドボックス第 2 層環境に展開する必要があります。  検証が完了したら、マージされた更新パッケージをリリース候補としてマークします。

## <a name="deploy-to-production"></a>生産環境に展開
アセット ライブラリでリリース候補をマークしたら、実稼働環境への展開をスケジューリングできます。  これは、他のソフトウェア展開可能パッケージの適用と同じプロセスに従います。

