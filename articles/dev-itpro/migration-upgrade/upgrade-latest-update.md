---
title: "最新の Finance and Operations 更新プログラムへの移行の処理"
description: "このトピックでは、Microsoft Dynamics 365 for Finance and Operations を最新の更新バージョンに移行するプロセスについて説明します。"
author: laneswenka
manager: AnnBe
ms.date: 12/04/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Developer, IT Pro
ms.reviewer: margoc
ms.search.scope: Operations
ms.custom: 102343
ms.assetid: e48d7424-371a-49ee-882c-07b7ceb00183
ms.search.region: Global
ms.author: tabell
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: Platform update 1
ms.translationtype: HT
ms.sourcegitcommit: 222041860cd29274a3edddba037773a833b21d14
ms.openlocfilehash: f1d41dba7acd34b04fe323b12dc35a0aea5174fe
ms.contentlocale: ja-jp
ms.lasthandoff: 12/05/2018

---

# <a name="process-for-moving-to-the-latest-update-of-finance-and-operations"></a><span data-ttu-id="7e19a-103">最新の Finance and Operations 更新プログラムへの移行の処理</span><span class="sxs-lookup"><span data-stu-id="7e19a-103">Process for moving to the latest update of Finance and Operations</span></span>

[!include [banner](../includes/banner.md)]
[!include [banner](../includes/preview-banner.md)]

<span data-ttu-id="7e19a-104">このトピックでは、Microsoft Dynamics 365 for Finance and Operations を最新リリースに更新またはアップグレードするプロセスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-104">This topic explains the process of updating or upgrading to the latest release of Microsoft Dynamics 365 for Finance and Operations.</span></span> <span data-ttu-id="7e19a-105">プロセス全体とサポートされるシナリオを説明しますが、プロセスの各ステップに関する詳細な指示は提示しません。</span><span class="sxs-lookup"><span data-stu-id="7e19a-105">It describes the overall process and supported scenarios, but it doesn't provide detailed instructions for every step of the process.</span></span>

<span data-ttu-id="7e19a-106">Finance and Operations の各リリースの内容については、[新機能と変更点](../../fin-and-ops/get-started/whats-new-changed.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7e19a-106">For information about the contents of each release of Finance and Operations, see [What's new or changed](../../fin-and-ops/get-started/whats-new-changed.md).</span></span>

## <a name="definitions"></a><span data-ttu-id="7e19a-107">定義</span><span class="sxs-lookup"><span data-stu-id="7e19a-107">Definitions</span></span>

- <span data-ttu-id="7e19a-108">**パブリック プレビュー**: だれでも入手できるようにされた機能であり、機能はサポートされています。</span><span class="sxs-lookup"><span data-stu-id="7e19a-108">**Public Preview** – A feature that has been made generally available to everyone, and the functionality is supported.</span></span> <span data-ttu-id="7e19a-109">追加機能強化や、プレビュー フェーズを終了する前に解決する必要がある既知の問題が存在する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-109">There might be additional functionality improvements, or known issues, that must be resolved before the preview phase can end.</span></span>
- <span data-ttu-id="7e19a-110">**廃止**: 長期的にサポートされない機能またはプロセス。</span><span class="sxs-lookup"><span data-stu-id="7e19a-110">**Deprecation** – A feature or process that won't be supported in the long term.</span></span> <span data-ttu-id="7e19a-111">機能またはプロセスのサポートが終了する日付を明示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-111">The date when support for the feature or process will end should be stated.</span></span>
- <span data-ttu-id="7e19a-112">**アップグレード**: バージョン 8.0 より前のソース環境では、Finance and Operations のある公式リリースから次のリリースに移行するプロセス。</span><span class="sxs-lookup"><span data-stu-id="7e19a-112">**Upgrade** – The process of moving from one official release of Finance and Operations to the next release, for source environments prior to version 8.0.</span></span> <span data-ttu-id="7e19a-113">例としては、7.1 から 7.3 または 7.3 から 8.0 への移行があります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-113">Some examples are the move from 7.1 to 7.3, or from 7.3 to 8.0.</span></span> <span data-ttu-id="7e19a-114">プロセスには、無料サンド ボックス環境、コード アップグレード、およびデータ アップグレードの設定が含まれます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-114">The process involves setup of a free sandbox environment, code upgrade, and data upgrade.</span></span>
- <span data-ttu-id="7e19a-115">**更新**: バージョン 8.0 以降のソース環境で、バイナリ パッケージを環境に適用し、Finance and Operations のある公式リリースから次のリリースに移行するプロセス。</span><span class="sxs-lookup"><span data-stu-id="7e19a-115">**Update** – The process of applying a binary package to an environment to move it from one official release of Finance and Operations to the next release, for source environments starting with version 8.0.</span></span> <span data-ttu-id="7e19a-116">このプロセスには、低いダウンタイム要件があり、データ アップグレードは含まれません。</span><span class="sxs-lookup"><span data-stu-id="7e19a-116">This process has lower downtime requirements and doesn't involve data upgrade.</span></span>

## <a name="introduction-to-the-scenarios"></a><span data-ttu-id="7e19a-117">シナリオの概要</span><span class="sxs-lookup"><span data-stu-id="7e19a-117">Introduction to the scenarios</span></span>

### <a name="scenario-1-update-to-a-specific-application-hotfix-to-be-deprecated"></a><span data-ttu-id="7e19a-118">シナリオ 1: 特定のアプリケーションの修正プログラムを更新する (非推奨予定)</span><span class="sxs-lookup"><span data-stu-id="7e19a-118">Scenario 1: Update to a specific application hotfix (To be deprecated)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7e19a-119">このシナリオは、すべてのユーザーがバージョン 8.1 以降に移行する必要がある 2019 年 4 月までに非推奨になります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-119">This scenario will be deprecated by April 2019, when all customers should be on version 8.1 or later.</span></span> <span data-ttu-id="7e19a-120">バージョン 8.1 は、個々の X++ 修正プログラムをリリースまたはサポートしなくなりました。</span><span class="sxs-lookup"><span data-stu-id="7e19a-120">Version 8.1 no longer releases or supports individual X++ hotfixes.</span></span>

<span data-ttu-id="7e19a-121">このシナリオは、特定の問題に対処するために 1 つ以上の小さな修正プログラムが必要だが、時間やコストの制約などのビジネス要因によってアプリケーション更新を完全に行なうことができない場合に使用します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-121">Use this scenario when one or more small hotfixes are required in order to address a specific issue, but business factors such as time or cost limitations prohibit a complete application update.</span></span>

### <a name="scenario-2-upgrade-your-custom-code"></a><span data-ttu-id="7e19a-122">シナリオ 2: カスタム コードをアップグレードする</span><span class="sxs-lookup"><span data-stu-id="7e19a-122">Scenario 2: Upgrade your custom code</span></span>

<span data-ttu-id="7e19a-123">このシナリオは、シナリオ 3 を使用する前に必要です。</span><span class="sxs-lookup"><span data-stu-id="7e19a-123">This scenario is required before you can use scenario 3.</span></span> <span data-ttu-id="7e19a-124">開発者は、その他の活動を開始する前にカスタム コードのアップグレードを完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-124">A developer must complete the upgrade of custom code before other activities can begin.</span></span>

<span data-ttu-id="7e19a-125">バージョン 8.0 以降では、Microsoft のモデルをオーバーレイヤーすることでカスタマイズを行うことはできません。</span><span class="sxs-lookup"><span data-stu-id="7e19a-125">In version 8.0 and later, customization can't be done by overlayering Microsoft models.</span></span> <span data-ttu-id="7e19a-126">アップグレードする前に、カスタマイズを拡張機能にリファクターする計画が必要です。</span><span class="sxs-lookup"><span data-stu-id="7e19a-126">Before you upgrade, you must have a plan to refactor your customizations into extensions.</span></span> <span data-ttu-id="7e19a-127">詳細については、[拡張機能のホームページ](../extensibility/extensibility-home-page.md)および [8.0 環境でオーバーレイをリファクタリングする](../extensibility/refactoring-over-layering.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7e19a-127">For more information, see [Extensibility homepage](../extensibility/extensibility-home-page.md) and [Refactor overlayering on 8.0 environments](../extensibility/refactoring-over-layering.md).</span></span>

### <a name="scenario-3-upgrade-to-the-latest-application-release-public-preview"></a><span data-ttu-id="7e19a-128">シナリオ 3: 最新のアプリケーション リリースにアップグレードする (パブリック プレビュー)</span><span class="sxs-lookup"><span data-stu-id="7e19a-128">Scenario 3: Upgrade to the latest application release (Public Preview)</span></span>

<span data-ttu-id="7e19a-129">このシナリオを使用して、Finance and Operations の最新のリリースに移行します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-129">Use this scenario to move to the latest release of Finance and Operations.</span></span>

<span data-ttu-id="7e19a-130">このトピックの後半で定義されているプロセスを使用することで、無料サンドボックス環境を設定することができます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-130">By using the process that is defined later in this topic, you can set up a free sandbox environment.</span></span> <span data-ttu-id="7e19a-131">実稼働前および実稼働環境の両方で、ダウンタイム ウィンドウをフル コントロールできます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-131">You will be in full control of the downtime window in both your pre-production and production environments.</span></span>

### <a name="scenario-4-upgrade-to-the-latest-platform-only"></a><span data-ttu-id="7e19a-132">シナリオ 4: 最新のプラットフォームのみにアップグレードする</span><span class="sxs-lookup"><span data-stu-id="7e19a-132">Scenario 4: Upgrade to the latest platform only</span></span>

<span data-ttu-id="7e19a-133">アプリケーションの更新が不要な場合は、このシナリオを使用してプラットフォームの最新リリースに更新します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-133">Use this scenario to update to the latest release of the platform when no application updates are required.</span></span> <span data-ttu-id="7e19a-134">プラットフォーム更新プログラムは常に累積的です。</span><span class="sxs-lookup"><span data-stu-id="7e19a-134">Platform updates are always cumulative.</span></span> <span data-ttu-id="7e19a-135">プラットフォームの更新の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-135">Here are some examples of platform updates:</span></span>

- <span data-ttu-id="7e19a-136">Microsoft Dynamics AX プラットフォーム更新プログラム 2 (2016 年 8 月)</span><span class="sxs-lookup"><span data-stu-id="7e19a-136">Microsoft Dynamics AX with platform update 2 (August 2016)</span></span>
- <span data-ttu-id="7e19a-137">Microsoft Dynamics 365 for Finance and Operations, Enterprise Edition プラットフォーム更新プログラム 9 (2017 年 7 月)</span><span class="sxs-lookup"><span data-stu-id="7e19a-137">Microsoft Dynamics 365 for Finance and Operations, Enterprise edition with platform update 9 (July 2017)</span></span>
- <span data-ttu-id="7e19a-138">Microsoft Dynamics 365 for Finance and Operations, Enterprise Edition プラットフォーム更新プログラム 11 (2017 年 10 月)</span><span class="sxs-lookup"><span data-stu-id="7e19a-138">Microsoft Dynamics 365 for Finance and Operations, Enterprise edition with platform update 11 (October 2017)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7e19a-139">Microsoft Dynamics AX プラットフォーム更新プログラム 1 (2016 年 5 月) およびプラットフォーム更新プログラム 2 では、プラットフォーム レベル X++ コードのオーバーレイが可能でした。</span><span class="sxs-lookup"><span data-stu-id="7e19a-139">In Microsoft Dynamics AX with platform update 1 (May 2016) and Platform update 2, platform-level X++ code could be overlayered.</span></span> <span data-ttu-id="7e19a-140">以降のプラットフォーム更新プログラムでは、プラットフォーム レベルの X++ コードのオーバーレイがロックされます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-140">In later platform updates, the platform-level X++ code is locked for overlayering.</span></span> <span data-ttu-id="7e19a-141">プラットフォーム更新プログラム 1 またはプラットフォーム更新プログラム 2 をアップグレードする場合、開発者は、アップグレード可能になる前に拡張機能としてオーバーレイをリファクターする必要があります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-141">If you're upgrading from Platform update 1 or Platform update 2, your developers must refactor the overlayering as extensions before you can upgrade.</span></span> <span data-ttu-id="7e19a-142">Microsoft Dynamics 365 for Operations およびプラットフォーム更新プログラム 3 (2016 年 11 月) またはそれ以降のバージョンをそれ以降のプラットフォーム更新プログラムにアップグレードする場合、X++ コードをリファクターする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="7e19a-142">If you're upgrading from Microsoft Dynamics 365 for Operations with platform update 3 (November 2016) or later to a later platform update, you don't have to refactor your X++ code.</span></span>

## <a name="scenario-1-update-to-a-specific-application-hotfix-to-be-deprecated"></a><span data-ttu-id="7e19a-143">シナリオ 1: 特定のアプリケーションの修正プログラムを更新する (非推奨予定)</span><span class="sxs-lookup"><span data-stu-id="7e19a-143">Scenario 1: Update to a specific application hotfix (To be deprecated)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7e19a-144">このシナリオは、すべてのユーザーがバージョン 8.1 以降に移行する必要がある 2019 年 4 月までに非推奨になります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-144">This scenario will be deprecated by April 2019, when all customers should be on version 8.1 or later.</span></span> <span data-ttu-id="7e19a-145">バージョン 8.1 は、個々の X++ 修正プログラムをリリースまたはサポートしなくなりました。</span><span class="sxs-lookup"><span data-stu-id="7e19a-145">Version 8.1 no longer releases or supports individual X++ hotfixes.</span></span>

<span data-ttu-id="7e19a-146">このシナリオは、特定の問題に対処するために 1 つ以上の小さな修正プログラムが必要だが、時間やコストの制約などのビジネス要因によって主要なアプリケーション更新を完全に行なうことができない場合に使用します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-146">Use this scenario when one or more small hotfixes are required in order to address a specific issue, but business factors such as time or cost limitations currently prevent you from doing a complete major application update.</span></span>

<span data-ttu-id="7e19a-147">アプリケーションの新しい機能を組み込むには、アプリケーションを完全にアップグレードする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="7e19a-147">To incorporate new features of the application, you don't have to do a complete upgrade of your application.</span></span> <span data-ttu-id="7e19a-148">アプリケーションの現在更新中のすべての機能は、個別に Microsoft Dynamics Lifecycle Services (LCS) で使用することができます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-148">All features in the current update of the application are available individually on Microsoft Dynamics Lifecycle Services (LCS).</span></span> <span data-ttu-id="7e19a-149">LCS から修正プログラムをダウンロードする方法の詳細については、[Lifecycle Services から修正プログラムをダウンロード](download-hotfix-lcs.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7e19a-149">For more information about how to download hotfixes from LCS, see [Download hotfixes from Lifecycle Services](download-hotfix-lcs.md).</span></span>

## <a name="scenario-2-upgrade-your-custom-code"></a><span data-ttu-id="7e19a-150">シナリオ 2: カスタム コードをアップグレードする</span><span class="sxs-lookup"><span data-stu-id="7e19a-150">Scenario 2: Upgrade your custom code</span></span>

<span data-ttu-id="7e19a-151">このシナリオでは、以前のリリースから現在のリリースにコードをアップグレードするプロセスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-151">This scenario describes the process for upgrading code from an earlier release to the current release.</span></span> <span data-ttu-id="7e19a-152">このプロセスは、シナリオ 3 を使用する前に必要です。</span><span class="sxs-lookup"><span data-stu-id="7e19a-152">This process is required before you can use scenario 3.</span></span> <span data-ttu-id="7e19a-153">開発者は、その他の活動を開始する前にこのプロセスを完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-153">A developer must complete this process before other activities can begin.</span></span> <span data-ttu-id="7e19a-154">アプリケーションを新しいメジャー リリースまたは累積リリースにアップグレードするプロセスの一部として、新しい環境を配置する場合は、コードのアップグレードが必要です。</span><span class="sxs-lookup"><span data-stu-id="7e19a-154">A code upgrade is required when you deploy new environments as part of the process of upgrading your application to a new major or cumulative release.</span></span> <span data-ttu-id="7e19a-155">プラットフォームの更新には、コードのアップグレードは不要です。</span><span class="sxs-lookup"><span data-stu-id="7e19a-155">A code upgrade isn't required for platform updates.</span></span>

| <span data-ttu-id="7e19a-156">ソース環境</span><span class="sxs-lookup"><span data-stu-id="7e19a-156">Source environment</span></span> | <span data-ttu-id="7e19a-157">ソースの AX7.version ファイル内容を予定</span><span class="sxs-lookup"><span data-stu-id="7e19a-157">Expected content of the AX7.version file for the source</span></span> | <span data-ttu-id="7e19a-158">ターゲット環境</span><span class="sxs-lookup"><span data-stu-id="7e19a-158">Target environment</span></span> | <span data-ttu-id="7e19a-159">コード アップグレード サービスは必要ですか。</span><span class="sxs-lookup"><span data-stu-id="7e19a-159">Is the code upgrade service required?</span></span> |
|--------------------|---------------------------------------------------------|--------------------|---------------------------------------|
| <span data-ttu-id="7e19a-160">アプリケーション 7.3</span><span class="sxs-lookup"><span data-stu-id="7e19a-160">Application 7.3</span></span> | <span data-ttu-id="7e19a-161">7.3.11971.56116</span><span class="sxs-lookup"><span data-stu-id="7e19a-161">7.3.11971.56116</span></span> | <span data-ttu-id="7e19a-162">アプリケーション リリース 8.x</span><span class="sxs-lookup"><span data-stu-id="7e19a-162">Application release 8.x</span></span> | <span data-ttu-id="7e19a-163">有</span><span class="sxs-lookup"><span data-stu-id="7e19a-163">Yes</span></span> |
| <span data-ttu-id="7e19a-164">2017 年 7 月のリリース (アプリケーション 7.2)</span><span class="sxs-lookup"><span data-stu-id="7e19a-164">July 2017 release (Application 7.2)</span></span> | <span data-ttu-id="7e19a-165">7.2.11792.56024</span><span class="sxs-lookup"><span data-stu-id="7e19a-165">7.2.11792.56024</span></span> | <span data-ttu-id="7e19a-166">アプリケーション リリース 8.x または 7.3</span><span class="sxs-lookup"><span data-stu-id="7e19a-166">Application release 8.x or 7.3</span></span> | <span data-ttu-id="7e19a-167">有</span><span class="sxs-lookup"><span data-stu-id="7e19a-167">Yes</span></span> |
| <span data-ttu-id="7e19a-168">リリース 1611 (アプリケーション 7.1)</span><span class="sxs-lookup"><span data-stu-id="7e19a-168">Release 1611 (Application 7.1)</span></span> | <span data-ttu-id="7e19a-169">7.1.1541.3036</span><span class="sxs-lookup"><span data-stu-id="7e19a-169">7.1.1541.3036</span></span> | <span data-ttu-id="7e19a-170">アプリケーション リリース 8.x、7.3、または 2017 年 7 月 (7.2)</span><span class="sxs-lookup"><span data-stu-id="7e19a-170">Application release 8.x, 7.3, or July 2017 (7.2)</span></span> | <span data-ttu-id="7e19a-171">有</span><span class="sxs-lookup"><span data-stu-id="7e19a-171">Yes</span></span> |
| <span data-ttu-id="7e19a-172">2016 年 8 月リリース (アプリケーション 7.0.1 およびプラットフォーム更新プログラム 2)</span><span class="sxs-lookup"><span data-stu-id="7e19a-172">August 2016 release (Application 7.0.1 with Platform update 2)</span></span> | <span data-ttu-id="7e19a-173">7.0.1265.27075</span><span class="sxs-lookup"><span data-stu-id="7e19a-173">7.0.1265.27075</span></span> | <span data-ttu-id="7e19a-174">アプリケーション リリース 8.x、7.3、2017 年 7 月 (7.2) または 1611 (7.1)</span><span class="sxs-lookup"><span data-stu-id="7e19a-174">Application release 8.x, 7.3, July 2017 (7.2) or 1611 (7.1)</span></span> | <span data-ttu-id="7e19a-175">有</span><span class="sxs-lookup"><span data-stu-id="7e19a-175">Yes</span></span> |
| <span data-ttu-id="7e19a-176">2016 年 5 月のリリース (アプリケーション 7.0.1)</span><span class="sxs-lookup"><span data-stu-id="7e19a-176">May 2016 release (Application 7.0.1)</span></span> | <span data-ttu-id="7e19a-177">7.0.1265.23014</span><span class="sxs-lookup"><span data-stu-id="7e19a-177">7.0.1265.23014</span></span> | <span data-ttu-id="7e19a-178">アプリケーション リリース 8.x、7.3、2017 年 7 月 (7.2) または 1611 (7.1)</span><span class="sxs-lookup"><span data-stu-id="7e19a-178">Application release 8.x, 7.3, July 2017 (7.2) or 1611 (7.1)</span></span> | <span data-ttu-id="7e19a-179">有</span><span class="sxs-lookup"><span data-stu-id="7e19a-179">Yes</span></span> |
| <span data-ttu-id="7e19a-180">2016 年 2 月リリース (アプリケーション 7.0)</span><span class="sxs-lookup"><span data-stu-id="7e19a-180">February 2016 release (Application 7.0)</span></span> | <span data-ttu-id="7e19a-181">7.0.1265.3015</span><span class="sxs-lookup"><span data-stu-id="7e19a-181">7.0.1265.3015</span></span> | <span data-ttu-id="7e19a-182">アプリケーション リリース 8.x、7.3、2017 年 7 月 (7.2) または 1611 (7.1)</span><span class="sxs-lookup"><span data-stu-id="7e19a-182">Application release 8.x, 7.3, July 2017 (7.2) or 1611 (7.1)</span></span> | <span data-ttu-id="7e19a-183">有</span><span class="sxs-lookup"><span data-stu-id="7e19a-183">Yes</span></span> |
| <span data-ttu-id="7e19a-184">Microsoft Dynamics AX 2012</span><span class="sxs-lookup"><span data-stu-id="7e19a-184">Microsoft Dynamics AX 2012</span></span> | <span data-ttu-id="7e19a-185">該当なし</span><span class="sxs-lookup"><span data-stu-id="7e19a-185">Not applicable</span></span> | <span data-ttu-id="7e19a-186">アプリケーション リリース 7.3 または 2017 年 7 月 (7.2)</span><span class="sxs-lookup"><span data-stu-id="7e19a-186">Application release 7.3 or July 2017 (7.2)</span></span> | <span data-ttu-id="7e19a-187">有</span><span class="sxs-lookup"><span data-stu-id="7e19a-187">Yes</span></span> |
| <span data-ttu-id="7e19a-188">アプリケーション リリース 7.3</span><span class="sxs-lookup"><span data-stu-id="7e19a-188">Application release 7.3</span></span> | <span data-ttu-id="7e19a-189">該当なし</span><span class="sxs-lookup"><span data-stu-id="7e19a-189">Not applicable</span></span> | <span data-ttu-id="7e19a-190">さらに新しいバージョンのプラットフォーム</span><span class="sxs-lookup"><span data-stu-id="7e19a-190">Newer version of the platform</span></span> | <span data-ttu-id="7e19a-191">無</span><span class="sxs-lookup"><span data-stu-id="7e19a-191">No</span></span> |
| <span data-ttu-id="7e19a-192">2017 年 7 月のリリース (アプリケーション 7.2)</span><span class="sxs-lookup"><span data-stu-id="7e19a-192">July 2017 release (Application 7.2)</span></span> | <span data-ttu-id="7e19a-193">該当なし</span><span class="sxs-lookup"><span data-stu-id="7e19a-193">Not applicable</span></span> | <span data-ttu-id="7e19a-194">さらに新しいバージョンのプラットフォーム</span><span class="sxs-lookup"><span data-stu-id="7e19a-194">Newer version of the platform</span></span> | <span data-ttu-id="7e19a-195">無</span><span class="sxs-lookup"><span data-stu-id="7e19a-195">No</span></span> |
| <span data-ttu-id="7e19a-196">リリース 1611 (アプリケーション 7.1)</span><span class="sxs-lookup"><span data-stu-id="7e19a-196">Release 1611 (application 7.1)</span></span> | <span data-ttu-id="7e19a-197">該当なし</span><span class="sxs-lookup"><span data-stu-id="7e19a-197">Not applicable</span></span> | <span data-ttu-id="7e19a-198">さらに新しいバージョンのプラットフォーム</span><span class="sxs-lookup"><span data-stu-id="7e19a-198">Newer version of the platform</span></span> | <span data-ttu-id="7e19a-199">無</span><span class="sxs-lookup"><span data-stu-id="7e19a-199">No</span></span> |
| <span data-ttu-id="7e19a-200">2016 年 5 月リリース (プラットフォーム更新プログラム 1、アプリケーション 7.0.1)</span><span class="sxs-lookup"><span data-stu-id="7e19a-200">May 2016 release (Platform update 1, application 7.0.1)</span></span> | <span data-ttu-id="7e19a-201">該当なし</span><span class="sxs-lookup"><span data-stu-id="7e19a-201">Not applicable</span></span> | <span data-ttu-id="7e19a-202">2016 年 8 月リリース (プラットフォーム更新プログラム 2、アプリケーション 7.0.1)</span><span class="sxs-lookup"><span data-stu-id="7e19a-202">August 2016 release (Platform update 2, application 7.0.1)</span></span> | <span data-ttu-id="7e19a-203">無</span><span class="sxs-lookup"><span data-stu-id="7e19a-203">No</span></span> |

<span data-ttu-id="7e19a-204">実際の顧客であるか、まだプロジェクトの実装フェーズにあるかに関係なく、コードをプラットフォーム/アプリケーションの最新の更新プログラムにアップグレードする手順に従います。</span><span class="sxs-lookup"><span data-stu-id="7e19a-204">Regardless of whether you're a live customer or are still in the implementation phase of your project, follow these steps to upgrade your code to the latest platform and application updates.</span></span>

1. <span data-ttu-id="7e19a-205">コードをアップグレードするには、LCS のコード アップグレード サービスを使用します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-205">Use the Code upgrade service in LCS to upgrade your code.</span></span> <span data-ttu-id="7e19a-206">詳細については、[Lifecycle Services でコード アップグレード サービスのコンフィギュレーション](../lifecycle-services/configure-execute-code-upgrade.md)  を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7e19a-206">For more information, see [Configure the code upgrade service in Lifecycle services](../lifecycle-services/configure-execute-code-upgrade.md).</span></span>

    > [!NOTE]
    > <span data-ttu-id="7e19a-207">コード アップグレード サービスは、インストールした古い Microsoft X++ 修正プログラムも削除します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-207">The Code upgrade service also removes any old Microsoft X++ hotfixes that you've installed.</span></span> <span data-ttu-id="7e19a-208">古い Microsoft X++ の修正プログラムの削除は必須ステップであるため、カスタム コードがない場合でもコード アップグレード サービスを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-208">Because the removal of old Microsoft X++ hotfixes is a required step, we recommend that you use the Code upgrade service even if you don't have custom code.</span></span>

2. <span data-ttu-id="7e19a-209">アップグレードする新しいバージョンを実行する新しい開発環境を展開します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-209">Deploy a new development environment that runs the new version that you're upgrading to.</span></span> <span data-ttu-id="7e19a-210">この環境を使用して、コードをマージし、カスタム コードをリファクターします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-210">You will use this environment to merge code and refactor your custom code.</span></span> <span data-ttu-id="7e19a-211">最新の更新プログラムを実行する新しい開発/テスト環境の要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-211">Submit a request for a new development/test environment that runs the latest update.</span></span>

    - <span data-ttu-id="7e19a-212">サブスクリプションで新しい開発やテスト環境が可能ではない場合、既存の開発やテスト環境を削除することが必要な可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-212">You might have to delete your existing development/test environment if your subscription doesn't allow for a new development/test environment.</span></span>
    - <span data-ttu-id="7e19a-213">プロジェクトのタイプに応じて、開発者仮想マシン (VM) を展開するためのその他のオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-213">Depending on your project type, you might have these other options for deploying a developer virtual machine (VM):</span></span>

        - <span data-ttu-id="7e19a-214">開発仮想ハード ディスク (VHD) をダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-214">Download a development virtual hard disk (VHD).</span></span>
        - <span data-ttu-id="7e19a-215">Microsoft Azure サブスクリプションを実行している場合は、新しい開発者トポロジーを配置します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-215">If you're running in your own Microsoft Azure subscription, deploy a new developer topology.</span></span>

    - <span data-ttu-id="7e19a-216">古い開発環境から開発データを保持する場合は、データベースのバックアップを作成し、BAK ファイルを保存します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-216">If you want to keep the development data from your old development environment, create a database backup, and keep the BAK file.</span></span> <span data-ttu-id="7e19a-217">次に、コードのアップグレードが完了したら、「[開発、デモ、またはサンドボックスの環境でのデータのアップグレード](upgrade-data-to-latest-update.md)」の手順に従って、新しい開発環境にデータベース バックアップを復元し、データをアップグレードできます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-217">Then, when you've completed the code upgrade, you can restore the database backup to your new development environment and do a data upgrade by following the steps in [Upgrade data in development, demo or sandbox environments](upgrade-data-to-latest-update.md).</span></span>

3. <span data-ttu-id="7e19a-218">コードの移行手順に従います。</span><span class="sxs-lookup"><span data-stu-id="7e19a-218">Follow the code migration steps:</span></span>

    1. <span data-ttu-id="7e19a-219">開発 VM を Microsoft Azure DevOps に接続し、アップグレードされたコードを含む Azure DevOps ブランチにローカル メタデータ フォルダをマップします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-219">Connect your development VM to Microsoft Azure DevOps, and map your local metadata folder to the Azure DevOps branch that contains your upgraded code.</span></span>
    2. <span data-ttu-id="7e19a-220">同期して、競合を解決し、ビルドしてテストします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-220">Synchronize, resolve any conflicts, build, and test.</span></span>
    3. <span data-ttu-id="7e19a-221">アップグレード後のコードを含む Azure DevOps ブランチを、主要な開発の分岐とマージします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-221">Merge the Azure DevOps branch that contains your upgraded code with your main development branch.</span></span> <span data-ttu-id="7e19a-222">詳細については、[フォルダーおよびファイルをマージする](https://www.visualstudio.com/docs/tfvc/merge-folders-files) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7e19a-222">For more information, see [Merge folders and files](https://www.visualstudio.com/docs/tfvc/merge-folders-files).</span></span>
    4. <span data-ttu-id="7e19a-223">ビルドしテストします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-223">Build and test.</span></span>
    5. <span data-ttu-id="7e19a-224">コードの配置可能パッケージを作成します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-224">Create deployable packages of your code.</span></span>

4. <span data-ttu-id="7e19a-225">この環境に適用される修正プログラムをインストールします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-225">Install any hotfixes that apply to the environment.</span></span>
5. <span data-ttu-id="7e19a-226">展開可能なパッケージをプロジェクトの LCS アセット ライブラリにアップロードします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-226">Upload deployable packages to the LCS Asset library for your project.</span></span>

<span data-ttu-id="7e19a-227">コードの移行手順の詳細については、[コードの移行](../dev-tools/developer-home-page.md#code-migration) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7e19a-227">For details about the code migration steps, see [Code migration](../dev-tools/developer-home-page.md#code-migration).</span></span> <span data-ttu-id="7e19a-228">コードの移行が完了した後は、シナリオ 3 に進みます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-228">After you've completed the code migration, continue to scenario 3.</span></span>

## <a name="scenario-3-upgrade-to-the-latest-application-release-public-preview"></a><span data-ttu-id="7e19a-229">シナリオ 3: 最新のアプリケーション リリースにアップグレードする (パブリック プレビュー)</span><span class="sxs-lookup"><span data-stu-id="7e19a-229">Scenario 3: Upgrade to the latest application release (Public Preview)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7e19a-230">アプリケーションのバージョン 8.0 を使用していて、8.1 リリースに移行する場合は、[8.0 から 8.1 への環境の更新](./appupdate-80-81.md)にある簡略化された手順に従います。</span><span class="sxs-lookup"><span data-stu-id="7e19a-230">If you're using application version 8.0 and want to move to the 8.1 release, follow the simplified steps in [Update environments from 8.0 to 8.1](./appupdate-80-81.md).</span></span>

<span data-ttu-id="7e19a-231">これらの手順は、以前のリリースで稼動しており、最新のプラットフォームおよびアプリケーションの各リリースに完全にアップグレードする顧客に適用されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-231">These steps apply to customers who are live on an earlier release, and who want to do a full upgrade to the most recent platform and application releases.</span></span> <span data-ttu-id="7e19a-232">これらのステップは、まだ稼働していない場合でも、実稼働環境をすでに展開して構成しているお客様にも適用されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-232">The steps might also apply to customers who have already deployed and configured a production environment, even if they haven't yet gone live.</span></span> <span data-ttu-id="7e19a-233">アプリケーションをアップグレードしていなく、プラットフォームをアップグレードする場合は、代わりに 4 つのシナリオを使用します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-233">If you aren't upgrading your application but just want to upgrade your platform, use scenario 4 instead.</span></span>

### <a name="upgrade-your-code"></a><span data-ttu-id="7e19a-234">コードのアップグレード</span><span class="sxs-lookup"><span data-stu-id="7e19a-234">Upgrade your code</span></span>

<span data-ttu-id="7e19a-235">最初に、シナリオ 2 で説明されているように、コードをアップグレードします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-235">First, upgrade your code as described in scenario 2.</span></span> <span data-ttu-id="7e19a-236">このステップは、開発者のタスクです。</span><span class="sxs-lookup"><span data-stu-id="7e19a-236">This step is a developer task.</span></span> <span data-ttu-id="7e19a-237">これは、アップグレード対象の新しいリリースを実行している開発環境で実行されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-237">It's done in a developer environment that is running the new release that you're upgrading to.</span></span>

### <a name="upgrade-your-data-in-a-development-environment"></a><span data-ttu-id="7e19a-238">開発環境でのデータのアップグレード</span><span class="sxs-lookup"><span data-stu-id="7e19a-238">Upgrade your data in a development environment</span></span>

<span data-ttu-id="7e19a-239">データ アップグレード プロセスを外部データベースのコピーで実行します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-239">Run the data upgrade process on a copy of your source database.</span></span> <span data-ttu-id="7e19a-240">環境が既に実稼働状態にある場合、ソース データベースは実稼働データベースのコピーです。</span><span class="sxs-lookup"><span data-stu-id="7e19a-240">If your environment is already live in production, the source database is a copy of the production database.</span></span> <span data-ttu-id="7e19a-241">それ以外の場合、ソース データベースは最新のデータベースです。</span><span class="sxs-lookup"><span data-stu-id="7e19a-241">Otherwise, the source database is your most current database.</span></span> <span data-ttu-id="7e19a-242">アップグレード対象のリリースを実行している開発環境でこのプロセスを実行します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-242">Run this process in the development environment that is running the release that you're upgrading to.</span></span> <span data-ttu-id="7e19a-243">このステップは、開発者によって行われる検証プロセスです。</span><span class="sxs-lookup"><span data-stu-id="7e19a-243">This step is a validation process that is done by a developer.</span></span> <span data-ttu-id="7e19a-244">これにより、開発者はこの環境でカスタマイズの特定のセットを使用することで、データのアップグレードを正常に完了できることの確認に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-244">It helps the developer verify that the data upgrade can be completed successfully by using the specific set of customizations in this environment.</span></span>

<span data-ttu-id="7e19a-245">実稼働のデータベースのコピーを作成するには、[[Microsoft Dynamics 365 for Finance and Operations データベースを Azure SQL データベースから SQL Server 環境にコピーする](../database/copy-database-from-azure-sql-to-sql-server.md)] の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="7e19a-245">To make a copy of your production database, follow the steps in [Copy a Microsoft Dynamics 365 for Finance and Operations database from Azure SQL Database to a SQL Server environment](../database/copy-database-from-azure-sql-to-sql-server.md).</span></span>

<span data-ttu-id="7e19a-246">データのアップグレード プロセスを実行するには、[[開発環境またはデモ環境のデータ アップグレード プロセス](upgrade-data-to-latest-update.md)] の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="7e19a-246">To run the data upgrade process, follow the steps in [Process for data upgrade for development or demo environments](upgrade-data-to-latest-update.md).</span></span>

> [!IMPORTANT]
> - <span data-ttu-id="7e19a-247">開発環境でのデータのアップグレードは必須ステップです。</span><span class="sxs-lookup"><span data-stu-id="7e19a-247">Data upgrade in a development environment is a required step.</span></span> <span data-ttu-id="7e19a-248">これにより、サンドボックス ユーザー受け入れテスト (UAT) と実稼働環境をアップグレードする際に、後のダウンタイムの延長やアップグレード エラーのリスクを軽減できます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-248">It helps reduce the risk of extended downtime and upgrade errors later, when you upgrade sandbox user acceptance testing (UAT) and production environments.</span></span>
> - <span data-ttu-id="7e19a-249">データをアップグレードする前に複数のアプリケーション修正プログラムが必要なことがあります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-249">Several application hotfixes might be required before you can upgrade data.</span></span> <span data-ttu-id="7e19a-250">既存の開発環境を再配置する前に、これらの修正プログラムが必要かどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-250">Before you redeploy your existing development environment, verify whether these hotfixes are required.</span></span> <span data-ttu-id="7e19a-251">必要な修正プログラムをインストールし、Azure DevOps にチェックインします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-251">Install the required hotfixes, and check them in to Azure DevOps.</span></span> <span data-ttu-id="7e19a-252">このステップは、開発環境の古いバージョンでのみで完了できます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-252">This step can be completed only in the old version of your development environment.</span></span> <span data-ttu-id="7e19a-253">さまざまな状況で必要な修正プログラムの一覧については、[開発、デモ、またはサンドボックス環境でのデータのアップグレード](upgrade-data-to-latest-update.md#before-you-begin) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7e19a-253">For a list of the hotfixes that are required in various situations, see [Upgrade data in develop, demo, or sandbox environments](upgrade-data-to-latest-update.md#before-you-begin).</span></span>
 
### <a name="upgrade-your-tier2standard-acceptance-test-or-higher-sandbox-environment-public-preview"></a><span data-ttu-id="7e19a-254">階層 2/スタンダード承認テスト (またはそれ以上) サンドボックス環境のアップグレード (パブリック プレビュー)</span><span class="sxs-lookup"><span data-stu-id="7e19a-254">Upgrade your Tier2/Standard Acceptance Test (or higher) sandbox environment (Public Preview)</span></span>

<span data-ttu-id="7e19a-255">コードを完成し、Microsoft SQL Server でデータを操作しなくても開発環境でエンド ツー エンドのデータ アップグレードを実行することができるようになったら、サンドボックス環境内でプロセスを開始することができます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-255">When you've completed the code and have been able to do an end-to-end data upgrade in your development environment without having to manipulate data in Microsoft SQL Server, you can begin the process in your sandbox environment.</span></span>

<span data-ttu-id="7e19a-256">まず、セルフサービスのアップグレードのプレビュー機能がアカウントで有効であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-256">First, make sure that the preview feature for self-service upgrades is turned on for your account.</span></span> <span data-ttu-id="7e19a-257">LCS で、**プレビュー機能管理** に移動し、一覧で **セルフサービスで環境をアップグレード** 機能を選択し、**プレビュー機能有効** オプションが **はい** に設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-257">In LCS, go to **Preview feature management**, select the **Upgrade environment self serve** feature in the list, and make sure that the **Preview feature enabled** option is set to **Yes**.</span></span>

#### <a name="prerequisite"></a><span data-ttu-id="7e19a-258">前提条件</span><span class="sxs-lookup"><span data-stu-id="7e19a-258">Prerequisite</span></span>

<span data-ttu-id="7e19a-259">アップグレードを開始する前に、サンドボックス環境に最新の生産データがあることを確認しておくことを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7e19a-259">Before you begin your upgrade, we highly recommend that you make sure that your sandbox environment has the latest production data.</span></span> <span data-ttu-id="7e19a-260">データ セットが最新の状態の場合、実稼働環境でアップグレードを確実に行うことができます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-260">If the data set is up to date, you can have more confidence that the upgrade will work in production.</span></span> <span data-ttu-id="7e19a-261">この手順を完了するには、[データベースの更新](../database/database-refresh.md)セルフサービス アクションを使用します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-261">To complete this step, use the [Database Refresh](../database/database-refresh.md) self-service action.</span></span>

#### <a name="begin-the-upgrade"></a><span data-ttu-id="7e19a-262">アップグレードの開始</span><span class="sxs-lookup"><span data-stu-id="7e19a-262">Begin the upgrade</span></span>

<span data-ttu-id="7e19a-263">サンドボックス環境で、**メンテナンス** メニューの **アップグレード** を選択します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-263">In your sandbox environment, on the **Maintain** menu, select **Upgrade**.</span></span>

<img src="media/UpgradeAutomation/01_Select.png" width="700px" alt="Maintain menu" />

<span data-ttu-id="7e19a-264">最新のアプリケーションとプラットフォームの組み合わせを選択するダイアログ ボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-264">A dialog box appears, where you can select the latest application and platform combination.</span></span>

<img src="media/UpgradeAutomation/02_Prepare.png" width="500px" alt="Prepare upgrade environment dialog box" />

> [!NOTE]
> <span data-ttu-id="7e19a-265">準備が失敗したことを示すエラーが発生した場合、このトピックの後半の[既知の問題](#known-issues)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7e19a-265">If you receive an error that states that preparation failed, see the [Known issues](#known-issues) section later in this topic.</span></span>

#### <a name="preparation"></a><span data-ttu-id="7e19a-266">準備</span><span class="sxs-lookup"><span data-stu-id="7e19a-266">Preparation</span></span>

<span data-ttu-id="7e19a-267">環境の詳細ページが更新され、2 つのサンドボックス環境のオプションが右上隅に表示されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-267">The environment details page will be refreshed, and options for two sandbox environments will now appear in the upper-right corner.</span></span> <span data-ttu-id="7e19a-268">オプションを選択することで、古いサンドボックスとアップグレード中の新しいサンドボックスの間で切り替えることができます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-268">By selecting the options, you can switch between your old sandbox and your new upgrade-in-progress sandbox.</span></span>

<img src="media/UpgradeAutomation/03_Provision.png" width="700px" alt="Old and Upgrade in progress options" />

<span data-ttu-id="7e19a-269">フル環境配置に類似しているので、準備ステージには 8 時間以上かかることがあります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-269">The preparation stage can take eight hours or longer, because it's similar to a full environment deployment.</span></span> <span data-ttu-id="7e19a-270">アップグレード中の環境は、展開を高速化するために空の Microsoft Azure SQL データベースに接続され、展開対象として選択した新しいバージョンで実行されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-270">The upgrade-in-progress environment is connected to an empty Microsoft Azure SQL database to speed up deployment, and it's running on the newer version that you selected to deploy.</span></span>

<span data-ttu-id="7e19a-271">この間、元のサンドボックスは変更されず、この段階ではダウンタイムによる影響はありません。</span><span class="sxs-lookup"><span data-stu-id="7e19a-271">During this time, your original sandbox is left untouched, and there is no downtime impact at this stage.</span></span> 

> [!NOTE]
> <span data-ttu-id="7e19a-272">展開の失敗を示すエラーが発生した場合、Microsoft Dynamics サービス エンジニアリング (DSE) チームに通知が送信され、お客様の代わりに問題を事前に解決します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-272">If you receive an error that states that staging deployment failed, the Microsoft Dynamics Service Engineering (DSE) team will be notified and will proactively resolve the issue for you.</span></span> <span data-ttu-id="7e19a-273">この問題は、Azure に、お客様の地域で使用できる必要なリソースがない場合に発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-273">This issue can occur if Azure doesn't have the required resources available in your region.</span></span> <span data-ttu-id="7e19a-274">Microsoft DSE は、より多くのリソースを割り当てるために Azure エンジニアと連携します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-274">Microsoft DSE will work with the Azure engineers to allocate more resources.</span></span> <span data-ttu-id="7e19a-275">ステージング展開が正常に完了したら、電子メールが送信されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-275">When staging deployment is successfully completed, you will receive an email.</span></span> 

#### <a name="package-application"></a><span data-ttu-id="7e19a-276">パッケージ アプリケーション</span><span class="sxs-lookup"><span data-stu-id="7e19a-276">Package application</span></span>

<span data-ttu-id="7e19a-277">ステージング展開が完了したら、環境の詳細ページに戻り、**進行中のアップグレード** ビューに切り替えます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-277">After staging deployment is completed, go back to the environment details page, and switch to the **Upgrade in progress** view.</span></span> <span data-ttu-id="7e19a-278">このビューには、**アップグレード** メニューが表示されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-278">In this view, you will now see an **Upgrade** menu.</span></span>

<span data-ttu-id="7e19a-279">**アップグレード** メニューには、**更新プログラムの適用** オプションが含まれています。</span><span class="sxs-lookup"><span data-stu-id="7e19a-279">The **Upgrade** menu will include an **Apply updates** option.</span></span> <span data-ttu-id="7e19a-280">ソフトウェアの展開可能なパッケージを新しい環境に適用するには、このオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-280">You can select this option to apply your software deployable packages to the new environment.</span></span> <span data-ttu-id="7e19a-281">これらのパッケージには、独立系ソフトウェア ベンダー (ISV) ソリューションによるパッケージ、独自のカスタマイズ パッケージ、プラットフォーム バイナリ更新プログラム パッケージのどれであるかに関係なく、任意のバイナリ パッケージが含まれます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-281">These packages include any binary package, whether it's from an independent software vendor (ISV) solution, your own customization packages, or platform binary update packages.</span></span> 

<img src="media/UpgradeAutomation/06_ApplyUpdates.png" width="700px" alt="Apply updates option on the Upgrade menu" />

<span data-ttu-id="7e19a-282">環境に新しいパッケージを適用する場合、プロセスは、定期的な環境保守のプロセスと同じになります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-282">When you apply a new package to the environment, the process is the same as the process for regular environment servicing.</span></span> <span data-ttu-id="7e19a-283">パッケージ アプリケーションが完成したら、別のパッケージの適用に進む前に、そのパッケージの **サインオフ** ボタンを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-283">When package application is completed, you must use the **Sign Off** button for that package before you can move on or apply another package.</span></span>

<span data-ttu-id="7e19a-284">パッケージの展開が失敗した場合は、**ロールバック** ボタンを使用して取り消すことができます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-284">If package deployment fails, you can use the **Rollback** button to reverse it.</span></span> <span data-ttu-id="7e19a-285">このボタンは、**アップグレード** メニューの **ロールバック** オプションとは同じでは**ない**ことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="7e19a-285">Note that this button is **not** the same as the **Rollback** option on the **Upgrade** menu.</span></span>

<span data-ttu-id="7e19a-286">各パッケージの展開には、約 1 時間かかることがあります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-286">Deployment of each package can take about one hour.</span></span>

#### <a name="data-upgrade-and-environment-swap"></a><span data-ttu-id="7e19a-287">データ アップグレードと開発スワップ</span><span class="sxs-lookup"><span data-stu-id="7e19a-287">Data upgrade and environment swap</span></span>

<span data-ttu-id="7e19a-288">すべてのパッケージがアップグレード中のサンドボックスに適用され、それらをサインオフしたら、データ アップグレードを開始することができます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-288">After all packages are applied to your upgrade-in-progress sandbox, and you've signed off on them, you can begin the data upgrade.</span></span>

> [!NOTE]
> <span data-ttu-id="7e19a-289">このステージにより、元のサンドボックス環境のダウンタイムが開始されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-289">This stage will begin the downtime for your original sandbox environment.</span></span>

<span data-ttu-id="7e19a-290">**アップグレード** メニューで、**データ アップグレード** を選択します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-290">On the **Upgrade** menu, select **Data upgrade**.</span></span> <span data-ttu-id="7e19a-291">元のサンドボックス環境がオフになり、新しい環境が元のデータベースに接続されるようにデータベース接続がスワップされます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-291">Your original sandbox environment will be turned off, and the database connection will be swapped so that your new environment is connected to the original database.</span></span> <span data-ttu-id="7e19a-292">この処理は、最大 1 時間かかります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-292">This process can take up to one hour.</span></span>

<img src="media/UpgradeAutomation/08_DataUpgrade.png" width="700px" alt="Data upgrade option on the Upgrade menu" />

<img src="media/UpgradeAutomation/09_Swap.png" width="500px" alt="Confirmation message about the environment swap" />

<span data-ttu-id="7e19a-293">次に、対象バージョンのデータ アップグレード パッケージが自動的に適用されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-293">Next, the data upgrade package for your target version will be automatically applied.</span></span> <span data-ttu-id="7e19a-294">データ アップグレード パッケージを適用するために必要な時間は、データベースのサイズによって異なります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-294">The time that is required to apply the data upgrade package varies, depending on the size of your database.</span></span>

#### <a name="commit-or-rollback"></a><span data-ttu-id="7e19a-295">コミットまたはロールバック</span><span class="sxs-lookup"><span data-stu-id="7e19a-295">Commit or rollback</span></span>

<span data-ttu-id="7e19a-296">データ アップグレード パッケージが適用された後、環境を確認することができます。ユーザーは、ビジネス検証アクティビティを実行できます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-296">After the data upgrade package is applied, you can review the environment, and your users can perform business validation activities.</span></span> <span data-ttu-id="7e19a-297">この検証に成功した場合は、**アップグレード** メニューで **コミット** を選択することにより、アップグレード全体を成功とマークできます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-297">If this validation is successful, you can mark the whole upgrade as a success by selecting **Commit** on the **Upgrade** menu.</span></span> <span data-ttu-id="7e19a-298">実稼働環境に移行するには、アップグレードをコミットする必要があります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-298">You must commit the upgrade to move on to your production environment.</span></span>

<img src="media/UpgradeAutomation/10_CommitRollback.png" width="700px" alt="Commit option on the Upgrade menu" />

<span data-ttu-id="7e19a-299">検証が失敗すると、**アップグレード** メニューで **ロールバック** を選択できます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-299">If the validation fails, you can select **Rollback** on the **Upgrade** menu.</span></span> <span data-ttu-id="7e19a-300">このオプションは、データベースのポイント イン タイムの復元を実行し、元のサンドボックスにデータベース接続を戻して、元のサンドボックスをオンラインに戻します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-300">This option will perform a point-in-time restore of the database, swap the database connection back to your original sandbox, and bring your original sandbox back online.</span></span> <span data-ttu-id="7e19a-301">その後、サンドボックスが前の状態になります。</span><span class="sxs-lookup"><span data-stu-id="7e19a-301">The sandbox will then be back in its previous state.</span></span>

#### <a name="upgrade-production"></a><span data-ttu-id="7e19a-302">実稼動環境のアップグレード</span><span class="sxs-lookup"><span data-stu-id="7e19a-302">Upgrade production</span></span>

<span data-ttu-id="7e19a-303">このステージに到達すると、アップグレード プロセスは完了しています。</span><span class="sxs-lookup"><span data-stu-id="7e19a-303">When you reach this stage, you've finished the upgrade process.</span></span> <span data-ttu-id="7e19a-304">実稼働環境で、同じプロセスを開始できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="7e19a-304">You can now begin the same process in your production environment.</span></span> <span data-ttu-id="7e19a-305">実行する手順は、まったく同じです。</span><span class="sxs-lookup"><span data-stu-id="7e19a-305">The steps that you follow are exactly the same.</span></span>

<span data-ttu-id="7e19a-306">実稼働環境のアップグレード時に非常に長いダウンタイムを引き起こす問題が発生した場合、[実稼働環境の停止の報告](https://docs.microsoft.com/business-applications-release-notes/April18/dynamics365-finance-operations/report-production-outage)プロセスを使用して、Microsoft に知らせてサポートを受けます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-306">If you encounter an issue that causes excessive downtime during your production upgrade, use the [Report production outage](https://docs.microsoft.com/business-applications-release-notes/April18/dynamics365-finance-operations/report-production-outage) process to alert Microsoft and get help.</span></span>

#### <a name="upgrade-additional-environments"></a><span data-ttu-id="7e19a-307">追加の環境のアップグレード</span><span class="sxs-lookup"><span data-stu-id="7e19a-307">Upgrade additional environments</span></span>

<span data-ttu-id="7e19a-308">これと同じ方法で、追加サンドボックス環境をアップグレードすることができます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-308">You can upgrade additional sandbox environments in this same way.</span></span> <span data-ttu-id="7e19a-309">その他のサンドボックス環境の割り当てを解除して削除し、新しいバージョンで再展開できます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-309">You also can deallocate and delete your other sandbox environments, and then redeploy on the newer version.</span></span> <span data-ttu-id="7e19a-310">[データベースの更新](../database/database-refresh.md)セルフサービス アクションを使用することで、別のサンドボックスまたは実稼働環境からアップグレードするデータベースにコピーできます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-310">By using the [Database Refresh](../database/database-refresh.md) self-service action, you can copy in the upgraded database from another sandbox or production environment.</span></span>

#### <a name="known-issues"></a><span data-ttu-id="7e19a-311">既知の問題</span><span class="sxs-lookup"><span data-stu-id="7e19a-311">Known issues</span></span>

<span data-ttu-id="7e19a-312">**準備操作を開始できませんでした。Microsoft サポートに通知されました。問題が解消しない場合は、次の ID でサポートにお問い合わせください。**</span><span class="sxs-lookup"><span data-stu-id="7e19a-312">**Prepare operation could not start. Microsoft support has been notified. If the issue persists, please contact support with this ID.**</span></span>

<span data-ttu-id="7e19a-313">この既知の問題には、LCS バックエンドの環境証明書が関係しています。</span><span class="sxs-lookup"><span data-stu-id="7e19a-313">This known issue involves environment certificates on the LCS back end.</span></span> <span data-ttu-id="7e19a-314">この影響を受けた場合、サポート チケットを送信し、エラー メッセージに表示されたアクティビティ ID を含めます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-314">If if affect you, submit a support ticket, and include the activity ID from the error message.</span></span> <span data-ttu-id="7e19a-315">Microsoft が問題を解決します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-315">Microsoft will work to resolve the issue.</span></span> <span data-ttu-id="7e19a-316">Microsoft は影響を受ける環境のリストをまとめており、今後はこの問題を事前に解決しようとしています。</span><span class="sxs-lookup"><span data-stu-id="7e19a-316">Microsoft is compiling a list of affect environments and intends to proactively fix this issue in the future.</span></span>

<span data-ttu-id="7e19a-317">**アップグレードをキャンセルしてからもう一度やり直したいと思っています。**</span><span class="sxs-lookup"><span data-stu-id="7e19a-317">**I want to cancel the upgrade and try again later.**</span></span>

<span data-ttu-id="7e19a-318">アップグレードをキャンセルするには、**メンテナンス** メニューの **アップグレードのキャンセル** を選択します。</span><span class="sxs-lookup"><span data-stu-id="7e19a-318">To cancel an upgrade, you can select **Cancel Upgrade** on the **Maintain** menu.</span></span>  <span data-ttu-id="7e19a-319">**メンテナンス** メニューは、**アップグレードを実行中です** ビュー (新しいサンドボックス) ではなく、**古い** ビュー (元のサンドボックス) で使用できます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-319">The **Maintain** menu is available in the **Old** view (for the original sandbox), not in the **Upgrade in progress** view (for the new sandbox).</span></span>

<span data-ttu-id="7e19a-320">**手順 X でアップグレードが失敗しました: サービス モデルの DVT スクリプト: MRProcessServiceします。**</span><span class="sxs-lookup"><span data-stu-id="7e19a-320">**Upgrade failed at step X: DVT script for service model: MRProcessService.**</span></span>

<span data-ttu-id="7e19a-321">この DVT エラーは断続的であり、データ アップグレード パッケージの **再開** ボタンを使用して解決できます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-321">This DVT error is intermittent and can be resolved by using the **Resume** button for your data upgrade package.</span></span> <span data-ttu-id="7e19a-322">**再開** を選択すると、この段階でプロセスが再開されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-322">When you select **Resume**, the process will resume at this step.</span></span> <span data-ttu-id="7e19a-323">Microsoft では、この問題を確実に再現しようとしており、今後修正プログラムを作成する予定です。</span><span class="sxs-lookup"><span data-stu-id="7e19a-323">Microsoft is trying to reliably reproduce this issue and intends to produce a fix in the future.</span></span>

<span data-ttu-id="7e19a-324">**アプリケーション構成の同期に失敗しました。最初に TTSBEGIN を呼び出さずに TTSCOMMIT の呼び出してください。**</span><span class="sxs-lookup"><span data-stu-id="7e19a-324">**Application configuration sync failed. Call to TTSCOMMIT without first calling TTSBEGIN.**</span></span>

<span data-ttu-id="7e19a-325">この TTSCOMMIT エラーは断続的であり、データ アップグレード パッケージの **再開** ボタンを使用して解決できます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-325">This TTSCOMMIT error is intermittent and can be resolved by using the **Resume** button for your data upgrade package.</span></span> <span data-ttu-id="7e19a-326">**再開** を選択すると、この段階でプロセスが再開されます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-326">When you select **Resume**, the process will resume at this step.</span></span> <span data-ttu-id="7e19a-327">Microsoft では、この問題を確実に再現しようとしており、今後修正プログラムを作成する予定です。</span><span class="sxs-lookup"><span data-stu-id="7e19a-327">Microsoft is trying to reliably reproduce this issue and intends to produce a fix in the future.</span></span>

## <a name="scenario-4-upgrade-to-the-most-current-platform-only"></a><span data-ttu-id="7e19a-328">シナリオ 4: 最新のプラットフォームのみにアップグレードする</span><span class="sxs-lookup"><span data-stu-id="7e19a-328">Scenario 4: Upgrade to the most current platform only</span></span>

<span data-ttu-id="7e19a-329">アプリケーション オブジェクト ツリー (AOT) モデル (Application Platform、Application Foundation、および Directory および Test Essentials) のカスタマイズが含まれていない環境を実行している場合は、新しい環境にアップグレードせずに、プラットフォームのインプレース更新を実行できます。</span><span class="sxs-lookup"><span data-stu-id="7e19a-329">If you're running an environment that doesn't have any customization of the platform Application Object Tree (AOT) models (Application Platform, Application Foundation, and Directory and Test Essentials), you can do an in-place update of your platform without upgrading to a new environment.</span></span> <span data-ttu-id="7e19a-330">このプロセスの詳細については、[Finance and Operations を最新のプラットフォーム更新プログラムにアップグレード](upgrade-latest-platform-update.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7e19a-330">For more information about this process, see [Upgrade Finance and Operations to the latest platform update](upgrade-latest-platform-update.md).</span></span> <span data-ttu-id="7e19a-331">ユーザーのプラットフォームのみをアップグレードする場合は、コードのアップグレード (このトピックではシナリオ 2)、またはデータ アップグレード スクリプトの実行は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="7e19a-331">If you upgrade only your platform, you don't have to do a code upgrade (scenario 2 in this topic) or run data upgrade scripts.</span></span>

