---
title: コンフィギュレーション キーおよびデータ エンティティ
description: このトピックでは、Microsoft Dynamics 365 for Finance and Operations のコンフィギュレーション キーとデータ エンティティの関係を示します。
author: Sunil-Garg
manager: AnnBe
ms.date: 05/10/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Application user
ms.reviewer: sericks
ms.search.scope: Operations
ms.custom: 25341
ms.assetid: 8e214c95-616b-4ee1-b5a4-fa5ce5147f2c
ms.search.region: Global
ms.author: sunilg
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: Platform update 13
ms.openlocfilehash: b825d42ada4b7615514b78f231d182aee2f2024d
ms.sourcegitcommit: 16bfa0fd08feec1647829630401ce62ce2ffa1a4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/02/2019
ms.locfileid: "1850154"
---
# <a name="configuration-keys-and-data-entities"></a>コンフィギュレーション キーおよびデータ エンティティ

[!include [banner](../includes/banner.md)]

データ エンティティを使用してデータをインポートまたはエクスポートする前に、使用を計画しているデータ エンティティでコンフィギュレーション キーの影響を最初に判断することをお勧めします。

Finance and Operations でコンフィギュレーション キーの詳細については、[ライセンス コードとコンフィギュレーション キーのレポート](../sysadmin/license-codes-configuration-keys-report.md) を参照してください。

### <a name="configuration-key-assignments"></a>コンフィギュレーション キーの割り当て
コンフィギュレーション キーは、次のアーティファクトの 1 つまたはすべてに割り当てられます。

- データ エンティティ
- データ ソースとして使用されるテーブル
- テーブル フィールド
- データ エンティティ フィールド

次のテーブルは、オブジェクトの基になるさまざまなアーティファクトで、コンフィギュレーション キーの値がオブジェクトの予想される動作を変更する方法を集計したものです。

| データ エンティティでコンフィギュレーション キーを設定する | テーブルでコンフィギュレーション キーを設定する | テーブル フィールドでコンフィギュレーション キーを設定する | データ エンティティ フィールドのコンフィギュレーション キー | 予想される動作 |
|-----------------------------------------|------------------------------------|------------------------------------------|----------------------------------------|------------------|
| 無効                                | 未評価                      | 未評価                            | 未評価                          | データ エンティティのコンフィギュレーション キーが無効である場合、データ エンティティは機能しなくなります。 基になるテーブルやフィールド内でコンフィギュレーション キーが有効または無効かどうかは重要ではありません。 |
| 有効                                 | 無効                           | 未評価                            | 未評価                          | データ エンティティのコンフィギュレーション キーが有効である場合、データ管理フレームワークは基になるテーブルごとのコンフィギュレーション キーを確認します。 テーブルのコンフィギュレーション キーが無効である場合、テーブルは機能を使用するデータ エンティティで使用できなくなります。 テーブルのコンフィギュレーション キーが無効である場合、テーブルおよびデータ エンティティのコンフィギュレーション キー設定は評価されません。 エンティティのプライマリ テーブルでそのコンフィギュレーション キーが無効になっている場合、エンティティのコンフィギュレーション キーが無効にされたのと同じように、システムは実行されます。 |
| 有効                                 | 有効                            | 無効                                 | 未評価                          | データ エンティティのコンフィギュレーション キーが有効で、基になるテーブルのコンフィギュレーション キーが有効である場合、データ管理フレームワークはコンフィギュレーション キーをテーブルのフィールドで確認します。 フィールドのコンフィギュレーション キーが無効である場合、対応するデータ エンティティ フィールドが有効なコンフィギュレーション キーを持っている場合でも、そのフィールドは使用する機能に対するデータ エンティティを使用できません。 |
| 有効                                 | 有効                            | 有効                                  | 無効                               | 他のすべてのレベルでコンフィギュレーション キーが有効であっても、そのエンティティ フィールドのコンフィギュレーション キーが有効でない場合、フィールドはデータ エンティティで使用不可能です。 |

> [!NOTE]
> エンティティが、データ ソースとして別のエンティティを持っている場合、上記のセマンティクスが再帰的な方法で適用されます。

### <a name="entity-list-refresh"></a>エンティティ リストの更新
エンティティ リストが更新されると、データ管理フレームワークは、ランタイムに使用するコンフィギュレーション キー メタデータを構築します。 このメタデータは上記で説明されたロジックを使用して構築されます。 データ管理フレームワークのジョブおよびエンティティを使用する前に、エンティティ リストの更新の完了を待機することを強くお勧めします。 待機しない場合、コンフィギュレーション キー メタデータは最新でない場合があり、予期しない結果になる場合があります。 エンティティ リストが更新される場合、エンティティ リストのページに、次のメッセージが表示されます。

![エンティティ リストの更新](./media/Entity_refresh_list.png)

### <a name="data-entity-list-page"></a>データ エンティティ リストのページ
データ管理ワークスペースのデータ エンティティ リストのページは、エンティティのコンフィギュレーション キー設定を示します。 データ エンティティのコンフィギュレーション キーからの影響を理解するには、このページから開始します。

エンティティの更新中に構築されるメタデータを使用して、この情報が表示されます。 コンフィギュレーション キーの列で、データ エンティティに関連付けられているコンフィギュレーション キーの名前が表示されます。 この列が空白の場合は、データ エンティティに関連付けられているコンフィギュレーション キーがないことを意味します。 コンフィギュレーション キーの状態列は、コンフィギュレーション キーの状態を表示します。 チェックマークがある場合、キーが有効になっていることを意味します。 空白の場合、キーが無効であるか、または関連付けられているキーが存在しないかのいずれかであることを意味します。

![エンティティ リストのページ](./media/Data_entity_list_page.png)

### <a name="target-fields"></a>ターゲット フィールド
次の手順は、テーブルおよびフィールドのコンフィギュレーション キーの影響を確認するため、データ エンティティにドリルダウンすることです。 データ エンティティのターゲット フィールド フォームは、データ エンティティで関連するテーブルおよびフィールドに対して、コンフィギュレーション キーおよびキーの状態情報を示します。 データ エンティティ自体そのコンフィギュレーション キーが無効になっている場合、このエンティティに対するターゲット フィールド フォームで、テーブルおよびフィールドがコンフィギュレーション キーの状態に関係なく全く使用できないことを通知する、警告メッセージが表示されます。

![ターゲット フィールド](./media/Target_fields_1.png)

### <a name="child-entities"></a>子エンティティ 
特定のエンティティはデータ ソースとして他のエンティティを持っているか、複合データ エンティティです: 子エンティティ フォームでこれらのエンティティに対するコンフィギュレーション キー情報が表示されます。 上記のエンティティ リスト ページと同じ方法で、このフォームを使用します。 子エンティティのターゲット フィールド フォームも、上記のように機能します。

![ターゲット フィールド](./media/Target_fields_2.png)

### <a name="using-data-entities"></a>データ エンティティの使用
完全な影響を理解した後に、データ エンティティで使用したいコンフィギュレーション キーがある場合、データ プロジェクトに追加することでデータ エンティティの使用に進むことができます。 

### <a name="run-time-validations-for-configuration-keys"></a>コンフィギュレーション キーの実行時間の検証
エンティティ更新リストの中で検構築されたコンフィギュレーション キー メタデータを使用して、次の使用ケースで実行時間の検証が実行されます。

- データ エンティティがジョブに追加される場合
- エンティティ リストでユーザーが '検証' をクリックした場合
- ユーザーがデータ プロジェクトにデータ パッケージを読み込む場合
- ユーザーがデータ プロジェクトにテンプレートを読み込む場合
- 既存のデータ プロジェクトが読み込まれる場合
- テンプレートがデータ プロジェクトに読み込まれる場合
- エクスポート / インポート ジョブが実行される前 (バッチ、非バッチ、反復、OData)。
- ユーザーがマッピングを生成する場合
- ユーザーがマッピング UI のフィールドをマップする場合
- ユーザーが 'インポート可能フィールド' を追加する場合

### <a name="managing-configuration-key-changes"></a>コンフィギュレーション キー変更の管理
エンティティ、テーブルまたはフィールド レベルでコンフィギュレーション キーを更新する時はいつでも、データ管理フレームワークのエンティティ リストは更新されている必要があります。 このプロセスでは、フレームワークが、最新のコンフィギュレーション キー設定をピックアップすることが保証されます。 エンティティ リストが更新されるまで、エンティティ リストのページに、次の警告メッセージが表示されます。 更新されたコンフィギュレーション キーの変更は、エンティティ リストが更新されたすぐ後に、有効になります。 コンフィギュレーション キーの変更が有効になった後、期待どおりに動作するかどうかを確認するため、既存のデータ プロジェクトおよびジョブを検証することをお勧めします。

![ターゲット フィールド](./media/Target_fields_3.png)
