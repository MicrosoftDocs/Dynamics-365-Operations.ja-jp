---
title: "一般仕訳エンティティを使用して伝票をインポートするためのベスト プラクティス"
description: "このトピックでは、一般仕訳エンティティを使用して一般仕訳帳にデータをインポートするためのヒントを提供します。"
author: twheeloc
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Application User
ms.reviewer: twheeloc
ms.search.scope: Core, Operations
ms.custom: 94363
ms.assetid: 0b8149b5-32c5-4518-9ebd-09c9fd7f4cfc
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: efcb77ff883b29a4bbaba27551e02311742afbbd
ms.openlocfilehash: eea226fae902c19d66aff83b7ee2786d1586ef39
ms.contentlocale: ja-jp
ms.lasthandoff: 05/08/2018

---

# <a name="best-practices-for-importing-vouchers-using-the-general-journal-entity"></a>一般仕訳エンティティを使用して伝票をインポートするためのベスト プラクティス

[!include [banner](../includes/banner.md)]

このトピックでは、一般仕訳エンティティを使用して一般仕訳帳にデータをインポートするためのヒントを提供します。  

一般仕訳エンティティを使用して、勘定または相手勘定タイプが **元帳、顧客、仕入先、または銀行** の伝票をインポートできます。 伝票は、**勘定** フィールドと **相手勘定** フィールドの両方を使用して 1 行として入力できます。もしくは複数行の伝票として入力できますが、その場合は **勘定** フィールドだけが使用されている (また **相手勘定** が各明細行で空白のままになっている) ことになります。 一般仕訳帳エンティティではすべての勘定タイプのサポートはされません。 代わりに、異なる勘定タイプの組み合わせが必要なシナリオのために、他のエンティティが存在します。 たとえば、プロジェクト トランザクションをインポートするには、プロジェクト経費仕訳帳エンティティを使用します。 各エンティティは特定のシナリオをサポートするように設計されています。つまり、追加のフィールドはそれらのシナリオのエンティティで使用できても異なるシナリオのエンティティでは使用できない場合があることを意味します。

## <a name="setup"></a>段取り
一般仕訳エンティティを使用してインポートする前に、次の設定を検証します。

-   **仕訳帳バッチ番号の番号順序の設定** - 既定では、一般仕訳エンティティを使用してインポートする場合、仕訳帳バッチ番号は、総勘定元帳パラメーターで定義された番号順序を使用します。 仕訳帳バッチ番号の番号順序を **手動** に設定する場合、既定の番号は適用されません。 この設定はサポートされていません。
-   **財務分析コードの構成** - エンティティを使用してトランザクションをインポートするとき、すべての組織は財務分析コードの順序を定義する必要があります。 順序は、**勘定分析コードの統合** 形式のために、**総勘定元帳** &gt; **勘定科目表** &gt; **分析コード** &gt; **アプリケーション統合用の財務分析コードの構成** &gt; **データ エンティティの選択** で定義されます。 インポートする勘定科目のセグメントには、同じ順序が必要です。 それ以外の場合、インポート中にエラーが発生します。

## <a name="general-journal-entity-setup"></a>一般仕訳エンティティの設定
データ管理の 2 つの設定は既定の仕訳帳バッチ番号または伝票番号を適用する方法に影響を与えます。

-   **セット ベースのプロセス** (データ エンティティで)
-   **自動生成** (フィールド マッピングで)

以下のセクションでは、これらの設定の影響について説明し、仕訳帳バッチ番号と伝票番号を生成する方法についても説明します。

### <a name="journal-batch-number"></a>仕訳帳バッチ番号

-   一般仕訳エンティティの **セット ベースのプロセス** の設定は、仕訳帳バッチ番号の生成方法には影響しません。
-   **仕訳帳バッチ番号** フィールドが **自動生成** に設定されている場合、インポートされるすべての行に対して新しい仕訳帳バッチ番号が作成されます。 この動作はお勧めしません。 **自動生成** の設定は、**マッピング詳細** タブの **マップ詳細** の下のインポート プロジェクトにあります。
-   **仕訳帳バッチ番号** フィールドが **自動生成** に設定されていない場合、仕訳帳バッチ番号は次のように作成されます。
    -   インポートしたファイルで定義されている仕訳帳バッチ番号が、既存の未転記日次仕訳帳と一致する場合、一致する仕訳帳バッチ番号を持つすべての行が既存の仕訳帳にインポートされます。 明細行は転記済仕訳帳バッチ番号にインポートされることはありません。 代わりに、新しい番号が作成されます。
    -   インポートしたファイルで定義されている仕訳帳バッチ番号が、既存の未転記日次仕訳帳と一致しない場合、同じ仕訳帳バッチ番号を持つすべての行が新しい仕訳帳の下にグループ化されます。 たとえば、1 の仕訳帳バッチ番号を持つすべての行が新しい仕訳帳にインポートされ、2 の仕訳帳バッチ番号を持つすべての行は、2 番目の新しい仕訳帳にインポートされます。 仕訳帳バッチ番号は、総勘定元帳のパラメーターで定義されている番号順序を使用して作成されます。

### <a name="voucher-number"></a>伝票番号

-   一般仕訳エンティティの **セット ベースのプロセス** 設定を使用する場合、伝票番号をインポートされたファイルで指定する必要があります。 伝票が分散されていない場合でも、一般仕訳帳内のすべてのトランザクションには、インポートしたファイルで指定された伝票番号が割り当てられます。 セット ベースのプロセスを使用し、なお、伝票番号に対して定義されている番号順序を使用する場合は、2016 年 2 月のリリースで修正プログラムが提供されています。 修正プログラムの番号は 3170316 で、Lifecycle Services (LCS) からダウンロードできます。 詳細については、 [Lifecycle Services から修正プログラムをダウンロード](../migration-upgrade/download-hotfix-lcs.md) を参照してください。
    -   この機能を有効にするには、インポートに使用される仕訳帳名で、**転記時の番号配賦** を **はい** に設定します。
    -   伝票番号は、インポートしたファイルで定義する必要があります。 ただし、この番号は一時的なもので、仕訳帳が転記されるときに伝票番号で上書きされます。 一時伝票番号で、仕訳帳の明細行が正しくグループ化されていることを確認する必要があります。 たとえば、転記の際に一時的な伝票番号が 1 の 3 つの明細行があるとします。 3 つの明細行すべての一時的な伝票番号は、番号順序の次の番号で上書きされます。 これら 3 つの明細行がバランス済エントリではない場合、伝票は転記されていません。 次に、一時的な伝票番号が 2 の行が見つかった場合は、この番号は、番号順序の次の伝票番号で上書きされます。

<!-- -->

-   **セット ベースのプロセス** 設定を使用しない場合、インポートされたファイルで伝票番号を指定する必要はありません。 伝票番号は、仕訳帳名 (**1 つの伝票のみ**、**残高との関連** など) の設定に基づいて、インポート中に作成されます。 たとえば、仕訳帳名が **残高との関連** として定義されている場合、最初の行は、新しい既定の伝票番号を受け取ります。 システムによって行が評価され、借方と貸方が等しいかどうかを判断します。 行に相手勘定が存在する場合、インポートされる次の行は、新しい伝票番号を受け取ります。 相手勘定が存在しない場合は、新しい行がインポートされる度に、システムにより、借方と貸方が等しいかどうかが評価されます。
-   **伝票番号** フィールドが **自動生成** に設定されている場合、インポートは成功しません。 **伝票番号** フィールドの **自動生成** の設定はサポートされていません。

既定では、一般仕訳帳エンティティは、セット ベースのプロセスを使用します。 組織のビジネス要件を評価した後、**セット ベースのプロセス** 設定は **データ管理** ワークスペースの **データ エンティティ** をクリックして変更できます。 セットベースのプロセスを使用して、インポート処理を高速化します。 セットベースのプロセスを使用しない場合は、一般仕訳帳エンティティ インポートのインポートは速度が遅くなります。




