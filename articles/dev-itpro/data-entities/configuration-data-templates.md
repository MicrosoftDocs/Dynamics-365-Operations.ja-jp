---
title: "コンフィギュレーション データ テンプレート"
description: "このトピックは、コンフィギュレーション データ テンプレートについて説明し、それらを作成する方法について説明します。"
author: mikefalkner
manager: AnnBe
ms.date: 09/29/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Developer, IT Pro
ms.reviewer: margoc
ms.search.scope: Operations
ms.custom: 77523
ms.search.region: Global
ms.author: mfalkner
ms.search.validFrom: 2017-07-31
ms.dyn365.ops.version: Platform update 7
ms.translationtype: HT
ms.sourcegitcommit: 879eb9f2a63a8514791f74965005ed3e22bc0de7
ms.openlocfilehash: 48d6d05cd8c3da3447cea7e4a1ad095dad5a2a99
ms.contentlocale: ja-jp
ms.lasthandoff: 04/20/2018

---
# <a name="configuration-data-templates"></a>コンフィギュレーション データ テンプレート

[!include [banner](../includes/banner.md)]

コンフィグレーション データ テンプレートは、データ プロジェクトで使用できる各モジュール領域のエンティティの事前定義リストです。 Microsoft Dynamics 365 for Finance and Operations の **データ管理** ワークスペース内の **テンプレート** ページを使用することにより、これらのテンプレートを作成、表示、および修正することができます。

> [!IMPORTANT]
> 既定の構成テンプレートは、Microsoft Dynamics 365 for Finance and Operations Enterprise Edition 2017 年 7 月の更新プログラムで提供されました。 コンフィギュレーション データ プロジェクト機能は、Microsoft Dynamics 365 for Operations プラットフォーム更新プログラム 7 で使用できます。 現在の製品リリースで、自分自身のテンプレートを作成および使用することができます。

## <a name="create-a-new-configuration-data-template"></a>新しいコンフィギュレーション データ テンプレートを作成する
**データ管理** ワークスペースの **テンプレート** ページには、エンティティのテンプレートを作成できるようにするためのツールが用意されています。 このページは設定ページに似ており、2 つの機能は同じように動作します。 新しい機能を活用するには、**拡張ビュー** を使用する必要があります。

テンプレートを作成するには、次の手順を実行します。

1. **新規作成** を選択してテンプレートを作成します。 テンプレートの ID と名前を入力します。 状態が**ドラフト**に設定されていることを確認します。
2. 必要に応じて、エンティティを追加または削除します。
3. 一覧を整理するには、**並べ替え** ボタンを使用して、エンティティ グループ、または単位、レベル、シーケンスでエンティティの順序を変更します。
4. いずれかのエンティティのシーケンスを変更するには、ユニット、レベル、またはシーケンスを手動で編集します。 または、**再シーケンス**ボタンを使用して選択したすべてのエンティティを更新します。 **再シーケンス** ボタンは、複数のエンティティを選択する場合にのみ表示されます。
5. エンティティにフィルターを追加するには、**フィルター** ボタンを使用します。 **プレビュー** ボタンを使用して、フィルターの結果を確認します。 フィルターを追加する場合、**フィルター** ボタンが**編集**ボタンに変更されます。
6. すべてのフィールドをマッピングに含めない場合は、**マップの表示**ボタンを使用し、マッピングからフィールドを除外します。
7. **テンプレートの検証** を選択してステータスを **検証済み** に変更します。

これで、テンプレートを 1 つのプロジェクトで使用できます。 ただし、エクスポート プロセスを制御するいくつかの追加機能を使用する可能性があります。

- Microsoft Excel ブックでグリッドの内容を開くには、**Excel で開く** ボタンを使用します。 必要に応じてエンティティを変更してから、**公開**を選択して Finance and Operations に変更をアップロードします。
- テンプレートをエクスポートした場合、そのテンプレートを Finance and Operations に戻すことを希望する場合、**テンプレートのインポート**を選択し、テンプレート ファイルを参照し、**テンプレートの作成**を選択し、読み込みます。
- 開いているテンプレートの内容を置き換えるには、**テンプレートから置換** を選択し、インポートするエンティティがあるテンプレート ファイルを参照してから、**テンプレートを作成** を選択してテンプレート ファイルを読み込みます。 未処理のテンプレート内の値は上書きされます。
- プロジェクトからテンプレートを作成するには、**新規** を選択してテンプレートを作成します。 テンプレートの ID と名前を入力し、次に**プロジェクトからテンプレートを置換**を選択します。 表示されるプロジェクトの一覧で、プロジェクトを選択し、**テンプレートの作成**を選択してそのプロジェクトから開いているテンプレートにプロジェクト エンティティを移動します。 未処理のテンプレート内の値は上書きされます。

## <a name="default-data-templates"></a>既定のデータ テンプレート
2017 年 7 月の更新プログラムで、コンフィギュレーション データ プロジェクトの作成に役立つ定義済みのテンプレートをリリースしました。 エンティティが生成するデータが正しい順序で処理されるように、テンプレートがシーケンスされます。 事前に定義されたテンプレートは、1 つ以上のテンプレートが同じデータ プロジェクトを追加されるときに、正しい順序が維持されるようにも設計されています。 詳細については、「既定のテンプレートでの優先順位」セクションを参照してください。

既定のテンプレートは、新しいリリースの Finance and Operations と共に提供されます。 長期的な目標は、Finance and Operations のインスタンスにプッシュできるように、Microsoft Dynamics Lifecycle Services (LCS) のテンプレートを提供することです。 ただし、現在のリリースでは、**データ管理**ワークスペースで**テンプレート**を選択し、テンプレートを読み込むため**既定のテンプレートの読み込み**を選択します。 **既定のテンプレートの読み込み** メニューを表示するには、 **拡張ビュー** を使用する必要があります。

テンプレートが読み込まれた後、業務要件に合った変更をすることができます。 元の既定のテンプレートを取得する場合は、**既定のテンプレートを読み込む** ボタンを使用し、システムに追加します。 テンプレートは、最新バージョンに置き換えられます。 テンプレートに変更を行った場合は、それらをエクスポートして古いテンプレートをコピーすることができます。

既定のテンプレートを読み込み、テンプレートをインポートするには、システム管理者のアクセス許可が必要であることに注意してください。 この要求は、テンプレートにべてのエンティティが正しく読み込まれていることを保証するのに役立ちます。

### <a name="how-entities-are-sequenced-for-processing"></a>エンティティは処理に対してどのように順序付けられますか。
独自のテンプレートを作成するか、既定のテンプレートを使用するかにかかわらず、テンプレートが、エクスポートおよびインポート時の処理の順序付けを行う方法を理解しておくことが重要です。

#### <a name="units-levels-and-sequences"></a>単位、レベル、および順序
エンティティの単位、レベル、シーケンスは、データのエクスポートまたはインポートの順序を制御するために使用されます。

- 異なる実行単位をもつエンティティは、並行処理されます。
- 同じ単位では、エンティティは同じレベルを持つ場合に並列処理されます。
- 同じレベルでは、そのレベルの順序番号に従ってエンティティが処理されます。
- 1 つのレベルが処理された後、次のレベルが処理されます。
- すべての依存関係が正しい順序で処理されるようにするために、ユニット 1 のみ使用します。

エンティティは、モジュール名、エンティティ カテゴリ、およびタグによって分類されます。

- このモジュールは、エンティティに通常使用されるモジュールを表します。
- エンティティ カテゴリは、カテゴリ内の情報のタイプを表します。 たとえば、カテゴリには、パラメータまたは参照データが含まれる可能性があります。
- タグは、機能領域内のエンティティの機能に関する追加情報を提供します。 たとえば、総勘定元帳に対するエンティティは、モジュール名として**総勘定元帳**になります。 一般会計にはいくつかのタスクがあり、タグはそれらのタスクを表します。 たとえば、**設定**および**仕訳帳**は、総勘定元帳で実行できるタスクを表すタグです。

#### <a name="sequencing-in-the-default-templates"></a>既定のテンプレートの優先順位
優先順位の長期的な目標は、すべてのコンフィギュレーションのすべてのエンティティの優先順位を自動的に付けることです。 その目標に達するまで、規定の各テンプレートのエンティティに対して、エンティティ間の依存関係順序を表すシーケンスを作成しました。

次のテーブルは、依存関係を処理するためにテンプレートがどのように設定されたかを示しています。 エンティティは付けた順番で処理する必要は**ない**ことに注意してください。 それらを別々のシーケンスにすることができます。 ただし、エンティティが処理される順番を誤って変更する可能性があります。 エンティティで、別のエンティティによってインポートされていないデータが必要とされる場合は、依存するデータの欠落が原因でエラーが発生する可能性があります。

| モジュール                    | 単位 | レベル |
|---------------------------|------|-------|
| システム設定              | 1    |  10     | 
| グローバル アドレス帳       | 1    |  15     |
| 共有される総勘定元帳     | 1    |  20   |
| ワークフロー                  | 1    |  22     | 
| 一般会計            | 1    |  25     | 
| 依存関係のバンド 1   | 1    |  30     | 
| 依存関係のバンド 2   | 1    |  40     | 
| 依存関係のバンド 3   | 1    |  50     | 
| 依存関係のバンド 4   | 1    |  60     | 
| 依存関係のバンド 5   | 1    |  70     |
| 依存関係のバンド 6   | 1    |  80     | 
| 依存関係のバンド 7   | 1    |  90     | 
| Bank                      | 1    | 100     |
| 買掛金          | 1    | 120     |
| 税申告                       | 1    | 130     |
| 売掛金       | 1    | 140     |
| 固定資産              | 1    | 150     |
| 予算作成                 | 1    | 160     |
| 在庫管理      | 1    | 300     |
| 生産管理        | 1    | 310     |
| 調達               | 1    | 320     | 
| 販売とマーケティング       | 1    | 330     |
| 品質管理        | 1    | 395     |
| 倉庫管理      | 1    | 400     |
| 輸送管理 | 1    | 405     |
| 生産管理        | 1    | 410     |
| プロセス製造     | 1    | 412     |
| 原価設定                   | 1    | 420     |
| Retail (注記を参照。)    | 1    | 500     | 
| 経費管理        | 1    | 600     |
| プロジェクト会計        | 1    | 650     |

> [!NOTE]
> Retail テンプレートは、Finance and Operations アプリ更新プログラム 3 でリリースされる予定です。

共有システム エンティティが最初に処理されるように、共有システム エンティティのレベル 10 から 22 までが予約されました。 ほとんどすべてのシステムは会社固有の総勘定元帳のエンティティが使用できます。 したがって、私たちはそれらのエンティティに対してレベル 25 を予約しました。 これらのレベルは、構成内のほとんどの共有データに必要な最小基本セットアップを表します。

基本設定が完了した後、多数のエンティティは、すべてのモジュールを並列に読み込むことができます。 これらのエンティティは、モジュールごとにサイロでロードする必要はありません。 代わりに、さまざまなエンティティのデータ間の依存関係のつながりを設定します。 バンド 30 と依存関係のないエンティティを追加しました。 次に、バンド 30 内のエンティティと依存関係があるエンティティに対してバンド 40 を追加しました。 バンド 50 から 90 までのプロセスを続行しました。

基本のエンティティを並列に処理できるように編成した後、残りのエンティティをモジュールごと、およびモジュールを処理する順序で編成しました。 ただし、多くのエンティティには多くの依存関係があり、その一部は複雑です。 たとえば、仕入先転記プロファイルのエンティティは、仕入先または品目のエンティティを必要とする可能性があります。 仕入先転記プロファイルのエンティティは**買掛金管理**モジュールの中にありますが、**生産管理**モジュールの後に処理する必要があります。 その場合、仕入先のエンティティが 1.130.10 で、品目のエンティティが 1.300.10 である場合、その順序 (たとえば、1.310.20) の後になるように、仕入先の転記プロファイル エンティティを移動しなければなりません。

当社が実装したシーケンスはガイドラインであり、要件ではありません。 レベルとモジュールの間には必要なリレーションシップはありません。 シーケンスがユーザーの実装で動作しない場合は、エンティティを再配列することができます。 構成に独自のテンプレートを追加するには、前述のガイドラインに従って、テンプレートがデフォルト テンプレートを使用するプロジェクトに正しくマージされるようにします。

#### <a name="templates-that-have-the-same-entity"></a>同じエンティティを持つテンプレート
一部のエンティティは、1 つ以上のテンプレートで必要です。 たとえば、買掛金勘定と売掛金勘定テンプレートの両方での支払条件が必要です。 ただし、売掛金勘定のテンプレートのみを要求する可能性があります。 両方のテンプレートの 1 つだけが必要な状況に対処するために、両方にエンティティを追加しました。

データ プロジェクトでは、エンティティのインスタンスを 1 つだけ含めることができます。 テンプレートを追加すると、テンプレートにはデータ プロジェクトに既に存在するエンティティが含まれ、そのテンプレート内のエンティティは現在プロジェクト内にあるエンティティを置き換えます。

変更せずに既定のテンプレートをオーバーライドするには、この機能を使用することができます。 たとえば、**作業者**フィールドはデータ プロジェクトにマップされていませんが、作業者を追加する独自のテンプレートがあります。 この場合、**作業者** フィールドがあるエンティティを含むテンプレートを構築できます。 このテンプレートでは、**作業者**フィールドをマップできます。 フィールドがマップされていないデータ プロジェクト内のエンティティは置き換えられます。

#### <a name="merged-templates"></a>マージ済のテンプレート
複数のモジュール領域に対応する大きなテンプレートを作成しました。 データ プロジェクトを構築するために大きなテンプレートまたは小規模なテンプレートの任意の組み合わせを使用することができます。 以下の組み合わせテンプレートが利用可能です。

- システムと共有 (システムの設定、グローバル アドレス帳、共有総勘定元帳、およびワークフローが含まれる)
- 財務には、一般会計、銀行、買掛金勘定、税、売掛金勘定、固定資産、および予算が含まれます
- サプライ チェーン管理 (在庫管理、製品管理、調達、販売とマーケティング、限定的な倉庫管理、生産管理、および原価計算が含まれる)

経費およびプロジェクト管理テンプレートは、より大きいテンプレートには含まれません。 ただし、それらは他のテンプレートを使用するプロジェクトに簡単にマージできるように設計されています。

作業者テンプレートには、作業者の追加、および作業者マッピングが削除された個所へのエンティティの再マッピングに必要なエンティティが含まれています。
 
#### <a name="master-data"></a>マスター データ
多くの既定のテンプレートには、顧客、仕入先、およびリリースされた製品などのマスター データのエンティティが含まれます。 これらのエンティティは、パラメーターと参照データをロードした後に必要となるエンティティの正しい順序を示すために含まれています。 マスター エンティティは、よく 100 以上の番号が付けられたモジュール バンド内で順序付けされます。 グリッドで、これらのエンティティのエンティティ カテゴリは**マスター**になります。

マスター データを構成に含めない場合は、プロジェクトからこれらのエンティティを削除します。

