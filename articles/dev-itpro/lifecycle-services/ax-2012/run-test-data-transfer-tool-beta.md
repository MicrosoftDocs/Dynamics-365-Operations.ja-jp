---
title: "Dynamics AX (AX 2012) 用のテスト データ転送ツール (ベータ版) の実行"
description: "このトピックでは、Microsoft Dynamics AX でデータ転送ツールのテストを実行する方法について説明します。"
author: kfend
manager: AnnBe
ms.date: 11/13/2017
ms.topic: article
ms.prod: dynamics-ax-2012
ms.service: 
ms.technology: 
audience: Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 2012
ms.custom: 17571
ms.assetid: f98591d7-f3ba-416c-982b-350823f16dad
ms.search.region: Global
ms.author: kfend
ms.search.validFrom: 
ms.dyn365.ops.version: 2012
ms.translationtype: HT
ms.sourcegitcommit: efcb77ff883b29a4bbaba27551e02311742afbbd
ms.openlocfilehash: bb7ee7f110b6e6a404f58dcb90a2b8849c387e58
ms.contentlocale: ja-jp
ms.lasthandoff: 05/08/2018

---

# <a name="run-the-test-data-transfer-tool-beta-for-dynamics-ax-ax-2012"></a><span data-ttu-id="b180d-103">Dynamics AX (AX 2012) 用のテスト データ転送ツール (ベータ版) の実行</span><span class="sxs-lookup"><span data-stu-id="b180d-103">Run the Test Data Transfer Tool (beta) for Dynamics AX (AX 2012)</span></span>

[!include [banner](../../includes/banner.md)]

<a name="security-and-permissions"></a><span data-ttu-id="b180d-104">セキュリティおよびアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-104">Security and permissions</span></span>
------------------------

<span data-ttu-id="b180d-105">テスト データを転送ツール (ベータ) に必要なのは、Microsoft SQL Server のアクセス許可のみです。</span><span class="sxs-lookup"><span data-stu-id="b180d-105">The Test Data Transfer Tool (beta) requires only Microsoft SQL Server permissions.</span></span>

> [!WARNING]
> <span data-ttu-id="b180d-106">テスト データ転送ツール (ベータ) では、Microsoft Dynamics AX に組み込まれているセキュリティ メカニズムはまったく認識されません。</span><span class="sxs-lookup"><span data-stu-id="b180d-106">The Test Data Transfer Tool (beta) does not in any way recognize the security mechanisms that are built into Microsoft Dynamics AX.</span></span>

<span data-ttu-id="b180d-107">**SELECT** ステートメントを SQL Server Management Studio で実行する権限がある場合、または SQL Server 一括コピー ツール (bcp) を使用してデータをエクスポートする権限がある場合は、テスト データ転送ツール (ベータ) を使用してデータをエクスポートするために必要なアクセス許可が与えられます。</span><span class="sxs-lookup"><span data-stu-id="b180d-107">If you have permission to execute **SELECT** statements in SQL Server Management Studio or to use the SQL Server bulk copy tool (bcp) to export data, you have the permissions that are required to export data by using the Test Data Transfer Tool (beta).</span></span> <span data-ttu-id="b180d-108">エクスポート時には、次の SQL Server のアクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="b180d-108">The following SQL Server permissions are required during export:</span></span>

-   <span data-ttu-id="b180d-109">テーブル、インデックス、および sysdatabases を読み取るための sys スキーマへの読み取りのアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-109">Read permission to the sys schema to read tables, indexes, and sysdatabases</span></span>
-   <span data-ttu-id="b180d-110">ModelElements ビューへの読み取りアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-110">Read permission to the ModelElements view</span></span>
-   <span data-ttu-id="b180d-111">SQLDictionary テーブルへの読み取りアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-111">Read permission to the SQLDictionary table</span></span>
-   <span data-ttu-id="b180d-112">ElementType テーブルへの読み取りアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-112">Read permission to the ElementType table</span></span>
-   <span data-ttu-id="b180d-113">ModelElement テーブルへの読み取りアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-113">Read permission to the ModelElement table</span></span>
-   <span data-ttu-id="b180d-114">エクスポート先テーブルの読み取りアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-114">Read permission to the table that you are exporting</span></span>

<span data-ttu-id="b180d-115">SQL Server Management Studio の **SELECT** ステートメントおよび **BULK INSERT** ステートメントを実行する権限がある場合は、ツールを使用してデータをインポートするために必要なアクセス許可が与えられています。</span><span class="sxs-lookup"><span data-stu-id="b180d-115">If you have permission to execute **SELECT** statements and **BULK INSERT** statements in SQL Server Management Studio, you have the permissions that are required to import data by using the tool.</span></span> <span data-ttu-id="b180d-116">インポート時には、次の SQL Server のアクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="b180d-116">The following SQL Server permissions are required during import:</span></span>

-   <span data-ttu-id="b180d-117">テーブル、インデックス、および sysdatabases を読み取るための sys スキーマへの読み取りのアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-117">Read permission to the sys schema to read tables, indexes, and sysdatabases</span></span>
-   <span data-ttu-id="b180d-118">ModelElements ビューへの読み取りアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-118">Read permission to the ModelElements view</span></span>
-   <span data-ttu-id="b180d-119">SQLDictionary テーブルへの読み取りアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-119">Read permission to the SQLDictionary table</span></span>
-   <span data-ttu-id="b180d-120">ElementType テーブルへの読み取りアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-120">Read permission to the ElementType table</span></span>
-   <span data-ttu-id="b180d-121">ModelElement テーブルへの読み取りアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-121">Read permission to the ModelElement table</span></span>
-   <span data-ttu-id="b180d-122">SYSTEMSEQUENCES テーブルの読み取り/書き込みアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-122">Read/write permission to the SYSTEMSEQUENCES table</span></span>
-   <span data-ttu-id="b180d-123">インポート先テーブルのアクセス許可を記述</span><span class="sxs-lookup"><span data-stu-id="b180d-123">Write permission to the table that you are importing</span></span>
-   <span data-ttu-id="b180d-124">インポートするテーブルで **ALTER INDEX** を実行するアクセス許可。データが固有のインデックス制約に違反し、インデックスを自動的に無効化する場合。</span><span class="sxs-lookup"><span data-stu-id="b180d-124">Permission to execute **ALTER INDEX** on the table that you are importing, if the data violates unique index constraints and you want the index to be disabled automatically</span></span>
-   <span data-ttu-id="b180d-125">\[インポート\]ディレクトリにある SQL コマンドに対する適切なアクセス許可</span><span class="sxs-lookup"><span data-stu-id="b180d-125">Appropriate permissions for any SQL commands that are found in the \[Import\] directory</span></span>

## <a name="run-the-tool"></a><span data-ttu-id="b180d-126">ツールを実行</span><span class="sxs-lookup"><span data-stu-id="b180d-126">Run the tool</span></span>
<span data-ttu-id="b180d-127">bcp ユーティリティがコマンド プロンプト パスに含まれるように、SQL Server クライアント ツールがインストールされているシステムからテスト データ転送ツール (beta) を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-127">You must run the Test Data Transfer Tool (beta) from a system that has the SQL Server client tools installed, so that the bcp utility is in the command-prompt path.</span></span> <span data-ttu-id="b180d-128">このツールは、インポート中にデータベースをホストしているコンピューターから直接実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-128">You must run the tool directly from the computer that is hosting the database during import.</span></span> <span data-ttu-id="b180d-129">テスト データ転送ツール (ベータ) を実行するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="b180d-129">To run the Test Data Transfer Tool (beta), follow these steps.</span></span>
1.  <span data-ttu-id="b180d-130">Microsoft Dynamics AX Application Object Server (AOS) のインスタンスを停止します。</span><span class="sxs-lookup"><span data-stu-id="b180d-130">Stop the instance of Microsoft Dynamics AX Application Object Server (AOS).</span></span>
2.  <span data-ttu-id="b180d-131">テスト データ転送ツール (ベータ) を実行します (DP.exe)。</span><span class="sxs-lookup"><span data-stu-id="b180d-131">Run the Test Data Transfer Tool (beta) (DP.exe).</span></span> <span data-ttu-id="b180d-132">実行するアクションを記述する引数を含めます。</span><span class="sxs-lookup"><span data-stu-id="b180d-132">Include arguments that describe the action to take.</span></span>

<span data-ttu-id="b180d-133">ツールの実行では、次の情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-133">As the tool runs, the following information is displayed:</span></span>
-   <span data-ttu-id="b180d-134">ツールの進捗状況</span><span class="sxs-lookup"><span data-stu-id="b180d-134">The tool’s progress</span></span>
-   <span data-ttu-id="b180d-135">まだ処理する必要があるテーブルの数</span><span class="sxs-lookup"><span data-stu-id="b180d-135">The number of tables that must still be processed</span></span>
-   <span data-ttu-id="b180d-136">発生したエラー数</span><span class="sxs-lookup"><span data-stu-id="b180d-136">The number of errors that have occurred</span></span>

<span data-ttu-id="b180d-137">処理が完了した後、ツールは、現在のディレクトリに DPLog.xml ログ ファイルを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="b180d-137">After processing is completed, the tool writes the DPLog.xml log file to the current directory.</span></span> <span data-ttu-id="b180d-138">エラーを見つけるには、ログ ファイルで ‘failed’ を検索します。</span><span class="sxs-lookup"><span data-stu-id="b180d-138">To find errors, search for ‘failed’ in the log file.</span></span>
### <a name="syntax"></a><span data-ttu-id="b180d-139">構文</span><span class="sxs-lookup"><span data-stu-id="b180d-139">Syntax</span></span>

    DP.exe direction directory database server

<span data-ttu-id="b180d-140">すべての引数はオプションです。</span><span class="sxs-lookup"><span data-stu-id="b180d-140">All arguments are optional.</span></span>

| <span data-ttu-id="b180d-141">パラメーター</span><span class="sxs-lookup"><span data-stu-id="b180d-141">Parameter</span></span>   | <span data-ttu-id="b180d-142">既定値</span><span class="sxs-lookup"><span data-stu-id="b180d-142">Default value</span></span>         | <span data-ttu-id="b180d-143">説明</span><span class="sxs-lookup"><span data-stu-id="b180d-143">Description</span></span>                                                                                                                                                                                                                                                                                                           |
|-------------|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b180d-144">*方向*</span><span class="sxs-lookup"><span data-stu-id="b180d-144">*direction*</span></span> | <span data-ttu-id="b180d-145">エクスポート</span><span class="sxs-lookup"><span data-stu-id="b180d-145">EXPORT</span></span>                | <span data-ttu-id="b180d-146">データをエクスポートには EXPORT、データをインポートするには IMPORT を指定します。</span><span class="sxs-lookup"><span data-stu-id="b180d-146">Specify EXPORT to export data or IMPORT to import data.</span></span>                                                                                                                                                                                                                                                               |
| <span data-ttu-id="b180d-147">*ディレクトリ*</span><span class="sxs-lookup"><span data-stu-id="b180d-147">*directory*</span></span> | <span data-ttu-id="b180d-148">現在のディレクトリ</span><span class="sxs-lookup"><span data-stu-id="b180d-148">The current directory</span></span> | <span data-ttu-id="b180d-149">データのエクスポート元またはデータのインポート先のディレクトリを指定します。</span><span class="sxs-lookup"><span data-stu-id="b180d-149">Specify the directory from which the data should be exported or to which the data should be imported.</span></span>                                                                                                                                                                                                                 |
| <span data-ttu-id="b180d-150">*データベース*</span><span class="sxs-lookup"><span data-stu-id="b180d-150">*database*</span></span>  | <span data-ttu-id="b180d-151">AXDB</span><span class="sxs-lookup"><span data-stu-id="b180d-151">AXDB</span></span>                  | <span data-ttu-id="b180d-152">データベースの名前です。</span><span class="sxs-lookup"><span data-stu-id="b180d-152">The name of the database.</span></span>                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="b180d-153">*サーバー*</span><span class="sxs-lookup"><span data-stu-id="b180d-153">*server*</span></span>    | <span data-ttu-id="b180d-154">現在のコンピューター</span><span class="sxs-lookup"><span data-stu-id="b180d-154">The current computer</span></span>  | <span data-ttu-id="b180d-155">Microsoft Dynamics AX データベースをホストしている SQL Server コンピューターのコンピューター名またはインスタンス名を指定します。</span><span class="sxs-lookup"><span data-stu-id="b180d-155">Specify the computer name or instance name of the SQL Server computer that is hosting the Microsoft Dynamics AX database.</span></span> <span data-ttu-id="b180d-156">インスタンス名を指定するには、ServerNameInstanceName の形式で入力します。</span><span class="sxs-lookup"><span data-stu-id="b180d-156">To specify an instance name, enter it in the format ServerNameInstanceName.</span></span> <span data-ttu-id="b180d-157">ローカル コンピューターの名前付きインスタンスがある場合は、localhostInstanceName または InstanceName という形式を使用できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-157">If you have a named instance on a local computer, you can use the format localhostInstanceName or InstanceName.</span></span> |

  <span data-ttu-id="b180d-158">コマンド ライン オプションの概要を表示するには、次のコマンドを使用できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-158">You can view a summary of the command-line options by using the following command.</span></span>

    DP.exe -?

### <a name="stop-the-tool"></a><span data-ttu-id="b180d-159">ツールを停止</span><span class="sxs-lookup"><span data-stu-id="b180d-159">Stop the tool</span></span>

<span data-ttu-id="b180d-160">ツールを停止するには、Ctrl キーを押しながら C キーを押します。</span><span class="sxs-lookup"><span data-stu-id="b180d-160">To stop the tool, press Ctrl+C.</span></span> <span data-ttu-id="b180d-161">ツールは、現在作業中のテーブルを終了して終了します。</span><span class="sxs-lookup"><span data-stu-id="b180d-161">The tool finishes the tables that it is currently working on and then closes.</span></span>

## <a name="overview-of-data-export-and-import"></a><span data-ttu-id="b180d-162">データのエクスポートとインポートの概要</span><span class="sxs-lookup"><span data-stu-id="b180d-162">Overview of data export and import</span></span>
<span data-ttu-id="b180d-163">テスト データ転送ツール (ベータ) は、Microsoft Dynamics AX のテーブルごとに 3 つのファイルをエクスポートおよびインポートします。</span><span class="sxs-lookup"><span data-stu-id="b180d-163">The Test Data Transfer Tool (beta) exports and imports three files for each Microsoft Dynamics AX table.</span></span> <span data-ttu-id="b180d-164">テーブルに Microsoft Dynamics AX での依存関係がある場合、これらのファイルは、関連テーブルに関係なくテーブルをエクスポートおよびインポートするためのツールの機能をサポートします。</span><span class="sxs-lookup"><span data-stu-id="b180d-164">If tables have dependencies in Microsoft Dynamics AX, these files support the capability of the tool to export and import the tables independently of related tables.</span></span> <span data-ttu-id="b180d-165">次の図は、エクスポートとインポートのプロセスを示しています。</span><span class="sxs-lookup"><span data-stu-id="b180d-165">The following diagram shows the export and import process.</span></span> ![データのエクスポートとインポートを実行するプロセス](./media/dataportprocess.jpg)
### <a name="export-and-import-process"></a><span data-ttu-id="b180d-167">プロセスをエキスポートおよびインポート</span><span class="sxs-lookup"><span data-stu-id="b180d-167">Export and import process</span></span>

<span data-ttu-id="b180d-168">次のテーブルでは、ファイルの 3 つのタイプについて説明します。</span><span class="sxs-lookup"><span data-stu-id="b180d-168">The following table describes the three types of files.</span></span>

| <span data-ttu-id="b180d-169">ファイル タイプ</span><span class="sxs-lookup"><span data-stu-id="b180d-169">File type</span></span> | <span data-ttu-id="b180d-170">説明</span><span class="sxs-lookup"><span data-stu-id="b180d-170">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-----------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b180d-171">.out</span><span class="sxs-lookup"><span data-stu-id="b180d-171">.out</span></span>      | <span data-ttu-id="b180d-172">テーブル データを含む bcp データ ファイル。</span><span class="sxs-lookup"><span data-stu-id="b180d-172">A bcp data file that contains table data.</span></span> <span data-ttu-id="b180d-173">列は \ #&#124;EOC&#124;\# で区切られます。</span><span class="sxs-lookup"><span data-stu-id="b180d-173">Columns are separated by \ #&#124;EOC&#124;\#.</span></span> <span data-ttu-id="b180d-174">列は \# &#124;EOR &#124;\#n で区切られます。</span><span class="sxs-lookup"><span data-stu-id="b180d-174">Rows are separated by \# &#124;EOR &#124;\#n.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="b180d-175">.xml</span><span class="sxs-lookup"><span data-stu-id="b180d-175">.xml</span></span>      | <span data-ttu-id="b180d-176">テーブル メタデータ (列の説明) を含む bcp データ ファイル。</span><span class="sxs-lookup"><span data-stu-id="b180d-176">A bcp data file that contains the table metadata (column descriptions).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="b180d-177">.outmodel</span><span class="sxs-lookup"><span data-stu-id="b180d-177">.outmodel</span></span> | <span data-ttu-id="b180d-178">Microsoft Dynamics AX に固有のメタデータを含むファイルです。</span><span class="sxs-lookup"><span data-stu-id="b180d-178">A file that contains metadata that is specific to Microsoft Dynamics AX.</span></span> <span data-ttu-id="b180d-179">このメタデータには、テーブルとそのフィールドのすべての名前と ID が含まれます。</span><span class="sxs-lookup"><span data-stu-id="b180d-179">This metadata includes all names and IDs of the table and its fields.</span></span> <span data-ttu-id="b180d-180">このファイルには、**elementType** 属性も含まれています。この属性は、テーブルで参照される Microsoft Dynamics AX のテーブル、クラス、または拡張データ型の名前と ID を格納します。</span><span class="sxs-lookup"><span data-stu-id="b180d-180">This file also includes the **elementType** attribute, which stores the names and IDs of any Microsoft Dynamics AX tables, classes, or extended data types that are referenced by the table.</span></span> <span data-ttu-id="b180d-181">この情報は、インポート中に名前が変更されたフィールドを照合するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-181">This information is used during import to match up fields that have been renamed.</span></span> <span data-ttu-id="b180d-182">また、これらの ID がターゲット データベース内の ID と一致するように、テーブル ID、クラス ID、またはデータ タイプ ID を更新するためにも使用されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-182">The information is also used to update the table IDs, class IDs, or data type IDs so that those IDs match the IDs in the target database.</span></span> <span data-ttu-id="b180d-183">.outmodel ファイルのデータは、Metadata.xml ファイルから作成されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-183">Data in the .outmodel file is constructed from the Metadata.xml file.</span></span> <span data-ttu-id="b180d-184">このファイルは、ソース データベースの Microsoft Dynamics AX から実行する X++ ジョブによって生成されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-184">This file is generated by an X++ job that you run from Microsoft Dynamics AX on the source database.</span></span> |

<span data-ttu-id="b180d-185">テスト データ転送ツール (beta) がデータをエクスポートするとき、インポート時に追加情報を必要とする、テーブルのリレーションシップおよび EDT 参照を識別するために Metadata.xml ファイルが使用されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-185">When the Test Data Transfer Tool (beta) exports data, the Metadata.xml file is used to identify table relationships and EDT references that require additional information during import.</span></span> <span data-ttu-id="b180d-186">この追加情報は、ツールがエクスポートする .outmodel ファイルに含まれています。</span><span class="sxs-lookup"><span data-stu-id="b180d-186">This additional information is included in the .outmodel file that the tool exports.</span></span>

<span data-ttu-id="b180d-187">テーブルの継承に関連するシナリオなど一部のシナリオでは、更新された .outmodel ファイルを維持することが重要です。</span><span class="sxs-lookup"><span data-stu-id="b180d-187">It is important that you maintain an updated .outmodel file in some scenarios, such as scenarios that involve table inheritance.</span></span> <span data-ttu-id="b180d-188">**SuperType** テーブルの各行は、その行の **SubType** テーブルの Microsoft Dynamics AX ID を含む **InstanceRelationType** コラムが含まれます。</span><span class="sxs-lookup"><span data-stu-id="b180d-188">Each row in the **SuperType** table includes an **InstanceRelationType** column that contains the Microsoft Dynamics AX ID of the **SubType** table for that row.</span></span> <span data-ttu-id="b180d-189">Microsoft Dynamics AX の ID は時間経過に伴い変更可能であるため、.out ファイルのデータは不正確になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-189">Because the Microsoft Dynamics AX IDs can change over time, the data in the .out file can become inaccurate.</span></span> <span data-ttu-id="b180d-190">テスト データ転送ツール (ベータ) は、Metadata.xml ファイルからの情報を使用して、この状況を回避し、データが正しくインポートされるようにします。</span><span class="sxs-lookup"><span data-stu-id="b180d-190">The Test Data Transfer Tool (beta) uses information from the Metadata.xml file to avoid this situation and to make sure that the data is imported correctly.</span></span> 

<span data-ttu-id="b180d-191">ファイルをインポートするときは、Metadata.xml ファイルが最新であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="b180d-191">When you import files, make sure that the Metadata.xml file is current.</span></span> <span data-ttu-id="b180d-192">インポート プロセス中に、ツールは .outmodel ファイルを使用して関係を認識します。</span><span class="sxs-lookup"><span data-stu-id="b180d-192">During the import process, the tool uses the .outmodel file to recognize the relationships.</span></span> <span data-ttu-id="b180d-193">このツールは、Microsoft Dynamics AX にクエリを実行して、データが正しくインポートされるようにします。</span><span class="sxs-lookup"><span data-stu-id="b180d-193">The tool then queries Microsoft Dynamics AX to make sure that the data is imported correctly.</span></span> <span data-ttu-id="b180d-194">たとえば、.outmodel ファイルは、**InstanceRelationType** 列に挿入する値が **1234** であることを示します。</span><span class="sxs-lookup"><span data-stu-id="b180d-194">For example, the .outmodel file indicates that the value to insert into the **InstanceRelationType** column is **1234**.</span></span> <span data-ttu-id="b180d-195">ただし、ツールは、サブタイプ テーブルが **1235** である新しい Microsoft Dynamics AX ID に新しいテーブルが追加されたことを認識します。</span><span class="sxs-lookup"><span data-stu-id="b180d-195">However, the tool recognizes that new tables have been added to the new Microsoft Dynamics AX ID for which the subtype table is **1235**.</span></span> 

<span data-ttu-id="b180d-196">期限が切れている Metadata.xml ファイルを使用したとき、データは通常、エラーを発生させずにインポートおよびエクスポートされます。</span><span class="sxs-lookup"><span data-stu-id="b180d-196">When you use a Metadata.xml file that is out of date, the data is usually imported and exported without any errors.</span></span> <span data-ttu-id="b180d-197">このエラーの欠如は、問題の診断を困難にする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-197">This lack of errors can make it difficult to diagnose issues.</span></span> <span data-ttu-id="b180d-198">.out ファイルに含まれている Microsoft Dynamics AX ID は、通常正確です。</span><span class="sxs-lookup"><span data-stu-id="b180d-198">The Microsoft Dynamics AX IDs that are included in the .out file are typically correct.</span></span> <span data-ttu-id="b180d-199">ただし、テーブルの Microsoft Dynamics AX ID が変更されると、データ インポートが正常に完了しても、不正確な値が Microsoft Dynamics AX ID フィールドに追加されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-199">However, when a table’s Microsoft Dynamics AX ID changes, the data import is completed successfully, but incorrect values are added in the Microsoft Dynamics AX ID field.</span></span> <span data-ttu-id="b180d-200">たとえば、給与データには、従業員の給与税の設定に関連するいくつかの継承テーブルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="b180d-200">For example, payroll data contains some inheritance tables that are related to the setup of an employee’s payroll tax.</span></span> 

<span data-ttu-id="b180d-201">古い Metadata.xml ファイルを使用してエクスポートされたデータを読み込むと、テーブルの継承関係を含むいくつかの問題が発生します。</span><span class="sxs-lookup"><span data-stu-id="b180d-201">If you load data that was exported by using an outdated Metadata.xml file, several issues occur that involve the inheritance relationships in the tables.</span></span> <span data-ttu-id="b180d-202">Microsoft Dynamics AX を管理者として実行している場合は、継承関係を正しく解決できるし、給与支払が正常に生成されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-202">When you are running Microsoft Dynamics AX as an administrator, the inheritance relationships can be correctly resolved, and the payroll payments are then generated correctly.</span></span> <span data-ttu-id="b180d-203">ただし、Microsoft Dynamics AX を非管理者として実行する場合、X++ コードはデータベースからのレコードを読み取りません。</span><span class="sxs-lookup"><span data-stu-id="b180d-203">However, if you are running Microsoft Dynamics AX as a non-administrator, the X++ code does not read the records from the database.</span></span> <span data-ttu-id="b180d-204">したがって、生成される給与支払には税金は含まれません。</span><span class="sxs-lookup"><span data-stu-id="b180d-204">Therefore, the payroll payments that are generated do not include any taxes.</span></span>

## <a name="exporting-data"></a><span data-ttu-id="b180d-205">データのエクスポート</span><span class="sxs-lookup"><span data-stu-id="b180d-205">Exporting data</span></span>
<span data-ttu-id="b180d-206">データをエクスポートする手順は、次の一般的なステップで構成されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-206">The procedure for exporting data consists of the following general steps:</span></span>
1.  <span data-ttu-id="b180d-207">Metadata.xml ファイルを生成します。</span><span class="sxs-lookup"><span data-stu-id="b180d-207">Generate a Metadata.xml file.</span></span>
2.  <span data-ttu-id="b180d-208">エクスポートするデータを決定します。</span><span class="sxs-lookup"><span data-stu-id="b180d-208">Determine which data to export.</span></span>
3.  <span data-ttu-id="b180d-209">ツールを実行します。</span><span class="sxs-lookup"><span data-stu-id="b180d-209">Run the tool.</span></span>

### <a name="generate-the-metadataxml-file"></a><span data-ttu-id="b180d-210">Metadata.xml ファイルを生成します</span><span class="sxs-lookup"><span data-stu-id="b180d-210">Generate the Metadata.xml file</span></span>

<span data-ttu-id="b180d-211">テスト データ転送ツール (ベータ) を使用してデータをエクスポートする前に、ソース システムで Metadata.xml ファイルを生成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-211">Before you use the Test Data Transfer Tool (beta) to export data, you must generate the Metadata.xml file on the source system.</span></span> <span data-ttu-id="b180d-212">Metadata.xml ファイルは、エクスポート中にのみ使用されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-212">The Metadata.xml file is used only during export.</span></span>

> [!NOTE] 
> <span data-ttu-id="b180d-213">Metadata.xml ファイルは、定期的に更新されない場合に古くなる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-213">The Metadata.xml file can become out of date if you do not update it periodically.</span></span> <span data-ttu-id="b180d-214">ファイルの有効期限が切れている場合、エクスポートしたデータに**要素型**属性が含まれていない可能性があり、インポートによって、ターゲット データベースで ID が一致するように ID がアップデートされない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-214">If the file is out of date, the exported data might not contain the **elementType** attribute, and the import might not update the IDs to match the IDs in the target database.</span></span> <span data-ttu-id="b180d-215">手動でファイルを更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-215">You must update the file manually.</span></span>

<span data-ttu-id="b180d-216">Metadata.xml ファイルを更新するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="b180d-216">To update the Metadata.xml file, follow these steps.</span></span>
1.  <span data-ttu-id="b180d-217">DP.exe が格納されている同じフォルダーの MetadataXMLGenerator.xpo をインポートしてから、MetadataXMLGenerator ジョブを実行します。</span><span class="sxs-lookup"><span data-stu-id="b180d-217">Import the MetadataXMLGenerator.xpo from the same folder that DP.exe is stored in, and then run the MetadataXMLGenerator job.</span></span> <span data-ttu-id="b180d-218">新しい Metadata.xml ファイルは、コンピューター上の一時フォルダーに作成されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-218">A new Metadata.xml file is created in a temporary folder on your computer.</span></span>
2.  <span data-ttu-id="b180d-219">次の方法のいずれかで新しい Metadata.xml ファイルを検索します。</span><span class="sxs-lookup"><span data-stu-id="b180d-219">Locate the new Metadata.xml file in one of the following ways:</span></span>
    -   <span data-ttu-id="b180d-220">MetadataXMLGenerator ジョブが完了すると、新しい Metadata.xml ファイルのパスが情報ログに用意されています。</span><span class="sxs-lookup"><span data-stu-id="b180d-220">When the MetadataXMLGenerator job is completed, the path of the new Metadata.xml file is provided in the Infolog.</span></span>
    -   <span data-ttu-id="b180d-221">コマンド プロンプト ウィンドウを開いて **echo %temp%** と入力し、Metadata.xml ファイルが保存されている一時フォルダーのパスを表示します。</span><span class="sxs-lookup"><span data-stu-id="b180d-221">Open a Command Prompt window, and enter **echo %temp%** to view the path of the temporary folder where the Metadata.xml file is stored.</span></span>

3.  <span data-ttu-id="b180d-222">一時フォルダーに移動してから、テスト データ転送ツール (ベータ) がインストールされているサブフォルダーに Metadata.xml ファイルをコピーします。</span><span class="sxs-lookup"><span data-stu-id="b180d-222">Navigate to the temporary folder, and then copy the Metadata.xml file to the subfolder where the Test Data Transfer Tool (beta) is installed.</span></span> <span data-ttu-id="b180d-223">\[リスト\] サブフォルダーに既存の Metadata.xml ファイルがある場合、生成された Metadata.xml ファイルを使用することによって、既存のエクスポートできるファイルを上書きします。</span><span class="sxs-lookup"><span data-stu-id="b180d-223">If there is an existing Metadata.xml file in the \[Lists\] subfolder, overwrite the existing Metadata.xml file by using the Metadata.xml file that you just generated.</span></span>

### <a name="choose-data-to-export"></a><span data-ttu-id="b180d-224">エクスポートするデータの選択</span><span class="sxs-lookup"><span data-stu-id="b180d-224">Choose data to export</span></span>

<span data-ttu-id="b180d-225">テスト データ転送ツール (ベータ) は、データベース内のすべてのテーブルのすべてのデータをエクスポートするように設計されています。ただし、エクスポートしたデータから、テーブル、列、または行がフィルタ処理により除かれている場合があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-225">The Test Data Transfer Tool (beta) is designed to export all data from all tables in the database, unless tables, columns, or rows are filtered out of the exported data.</span></span> <span data-ttu-id="b180d-226">このツールは、多くのテーブルを除外するフィルターのセットを含むように事前設定されています。</span><span class="sxs-lookup"><span data-stu-id="b180d-226">The tool is preconfigured to include a set of filters that filter out many tables.</span></span> <span data-ttu-id="b180d-227">コンフィギュレーション済のフィルターは、次のガイドラインに基づいています。</span><span class="sxs-lookup"><span data-stu-id="b180d-227">The preconfigured filters are based on the following guidelines:</span></span>
-   <span data-ttu-id="b180d-228">コードやモデルを含むテーブルをエクスポートしないでください。</span><span class="sxs-lookup"><span data-stu-id="b180d-228">Do not export tables that contain code or models.</span></span>
-   <span data-ttu-id="b180d-229">セキュリティ設定をエクスポートしないでください。</span><span class="sxs-lookup"><span data-stu-id="b180d-229">Do not export security settings.</span></span>
-   <span data-ttu-id="b180d-230">コンピューターの固有データをエクスポートしないでください。</span><span class="sxs-lookup"><span data-stu-id="b180d-230">Do not export computer-specific data.</span></span>
-   <span data-ttu-id="b180d-231">ユーザーの固有データをエクスポートしないでください。</span><span class="sxs-lookup"><span data-stu-id="b180d-231">Do not export user-specific data.</span></span>
-   <span data-ttu-id="b180d-232">一時的なテーブルをエクスポートしないでください。</span><span class="sxs-lookup"><span data-stu-id="b180d-232">Do not export temp tables.</span></span>

<span data-ttu-id="b180d-233">これらのフィルタは、要件に完全ではないかもしれません。</span><span class="sxs-lookup"><span data-stu-id="b180d-233">These filters might not be complete or appropriate for your requirements.</span></span> <span data-ttu-id="b180d-234">たとえば、既定でフィルター除外されるデータの一部をエクスポートする、またはエクスポートされない追加のテーブルがある場合があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-234">For example, you might want to export some of the data that is filtered out by default, or you might have additional tables that should not be exported.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b180d-235">テーブルが含まれている場合、**RecVersion**列で、テスト データ転送ツール (beta) テーブルで現在の値を無視し、常に1の値を使用して、テーブルをエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="b180d-235">If a table contains a **RecVersion** column, the Test Data Transfer Tool (beta) ignores the current value in the table and always exports the table by using the value 1.</span></span> <span data-ttu-id="b180d-236">この機能を使用すると、.out ファイルを比較して意味のある違いのみを簡単に確認できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-236">This feature makes it much easier to compare .out files and see only meaningful differences.</span></span> <span data-ttu-id="b180d-237">この機能は、データをバージョン管理システムに保存する場合に特に便利です。</span><span class="sxs-lookup"><span data-stu-id="b180d-237">This feature is especially useful when you keep your data in a version control system.</span></span> <span data-ttu-id="b180d-238">ほとんどの Microsoft Dynamics AX テーブルには、**RecVersion** 列が含まれています。</span><span class="sxs-lookup"><span data-stu-id="b180d-238">Most Microsoft Dynamics AX tables contain a **RecVersion** column.</span></span>

<span data-ttu-id="b180d-239">次のテーブルでは、標準除外ファイルと Filters.xml ファイルで使用されるエクスポート方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="b180d-239">The following table describes the export strategies that are used in the standard exclude files and the Filters.xml file.</span></span>

| <span data-ttu-id="b180d-240">テーブルのコンテンツ</span><span class="sxs-lookup"><span data-stu-id="b180d-240">Content of the table</span></span>                                                       | <span data-ttu-id="b180d-241">戦略をエクスポート</span><span class="sxs-lookup"><span data-stu-id="b180d-241">Export strategy</span></span>                 | <span data-ttu-id="b180d-242">理由</span><span class="sxs-lookup"><span data-stu-id="b180d-242">Reason</span></span>                                                                                                                                                                                                                                                                                |
|----------------------------------------------------------------------------|---------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b180d-243">業務データに接続されていないコード、システム データ、またはユーザー データ</span><span class="sxs-lookup"><span data-stu-id="b180d-243">Code, system data, or user data that is not connected to the business data</span></span> | <span data-ttu-id="b180d-244">エクスポートからテーブルを除外</span><span class="sxs-lookup"><span data-stu-id="b180d-244">Exclude this table from export.</span></span> | <span data-ttu-id="b180d-245">この戦略により、ビジネス データのインポート時に意図しないデータの変更が防止されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-245">This strategy prevents data from being unintentionally changed when business data is imported.</span></span>                                                                                                                                                                                        |
| <span data-ttu-id="b180d-246">業務データから計算されるキャッシュされた値</span><span class="sxs-lookup"><span data-stu-id="b180d-246">Cached values that are calculated from business data</span></span>                       | <span data-ttu-id="b180d-247">空の .out ファイルをエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="b180d-247">Export an empty .out file.</span></span>      | <span data-ttu-id="b180d-248">この戦略は、コンテンツがビジネス データに依存するため、テーブルをインポートするときにテーブルのコンテンツを制御するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="b180d-248">This strategy helps control the content of the table when the table is imported, because the content depends on business data.</span></span> <span data-ttu-id="b180d-249">.out ファイルは必須ですが、ソース データから再計算することができる値を格納しないためです。</span><span class="sxs-lookup"><span data-stu-id="b180d-249">An .out file is required, but we do not want to store values that can be recalculated from the source data.</span></span> <span data-ttu-id="b180d-250">したがって、空の .out ファイルがエクスポートされます。</span><span class="sxs-lookup"><span data-stu-id="b180d-250">Therefore, an empty .out file is exported.</span></span> |

### <a name="export-data"></a><span data-ttu-id="b180d-251">データのエクスポート</span><span class="sxs-lookup"><span data-stu-id="b180d-251">Export data</span></span>

<span data-ttu-id="b180d-252">Metadata.xml ファイルを生成し、エクスポートするデータを選択した後、ファイルをエクスポートできます。</span><span class="sxs-lookup"><span data-stu-id="b180d-252">After you have generated the Metadata.xml file and chosen the data to export, you can export the file.</span></span> <span data-ttu-id="b180d-253">テスト データ転送ツール (ベータ) では、エクスポート中に一時ファイルは作成されません。</span><span class="sxs-lookup"><span data-stu-id="b180d-253">The Test Data Transfer Tool (beta) does not create any temporary files during export.</span></span> <span data-ttu-id="b180d-254">テスト データ転送ツール (ベータ) は、\[リスト\]Filters.xml ファイルの内容から SQL ステートメントを生成します。</span><span class="sxs-lookup"><span data-stu-id="b180d-254">The Test Data Transfer Tool (beta) generates SQL statements from the content of the \[Lists\]Filters.xml file.</span></span> <span data-ttu-id="b180d-255">特に、&lt;フィルター&gt;要素の内容には、エクスポート中にユーザーのコンテキストで実行される任意の SQL ステートメントを含むことができます。</span><span class="sxs-lookup"><span data-stu-id="b180d-255">In particular, the content of the &lt;filter&gt; element can contain arbitrary SQL statements that are executed in your user context during export.</span></span> <span data-ttu-id="b180d-256">変更する前に Filters.xml ファイルへのすべての変更を十分にテストしてください。</span><span class="sxs-lookup"><span data-stu-id="b180d-256">Make sure that you thoroughly test all changes to the Filters.xml file before you modify it.</span></span>

### <a name="export-filtering"></a><span data-ttu-id="b180d-257">フィルタリングをエクスポート</span><span class="sxs-lookup"><span data-stu-id="b180d-257">Export filtering</span></span>

<span data-ttu-id="b180d-258">Microsoft Dynamics AX 2012 テスト データ転送ツール (beta) を使用してデータをエクスポートするとき、次の 3 つの方法で、このツールによるデータのエクスポートを回避できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-258">When you export data by using the Microsoft Dynamics AX 2012 Test Data Transfer Tool (beta), you can prevent the tool from exporting data in three ways:</span></span>
-   <span data-ttu-id="b180d-259">テーブルを除外または含む</span><span class="sxs-lookup"><span data-stu-id="b180d-259">Exclude  or include tables</span></span>
-   <span data-ttu-id="b180d-260">列を除外</span><span class="sxs-lookup"><span data-stu-id="b180d-260">Exclude columns</span></span>
-   <span data-ttu-id="b180d-261">行を除外</span><span class="sxs-lookup"><span data-stu-id="b180d-261">Exclude rows</span></span>

#### <a name="create-an-exclude-file-to-exclude-tables-from-the-export"></a><span data-ttu-id="b180d-262">エクスポートからテーブルを除外する除外ファイルを作成する</span><span class="sxs-lookup"><span data-stu-id="b180d-262">Create an exclude file to exclude tables from the export</span></span>

<span data-ttu-id="b180d-263">エクスポートされたデータからテーブルまたはテーブルのセットを除外するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="b180d-263">To exclude a table or a set of tables from the exported data, follow these steps.</span></span>
1.  <span data-ttu-id="b180d-264">\[一覧表示\]ディレクトリのテキスト ファイルを追加します。</span><span class="sxs-lookup"><span data-stu-id="b180d-264">Add a text file in the \[Lists\] directory.</span></span> <span data-ttu-id="b180d-265">ファイル名は、**Exclude –** (スペースとハイフンは名前の一部です) で始まり、ファイル名の拡張子は **.txt** でなければなりません。</span><span class="sxs-lookup"><span data-stu-id="b180d-265">The file name must start with **Exclude –** (the space and hyphen are part of the name), and the file name extension must be **.txt**.</span></span> <span data-ttu-id="b180d-266">また、既存のファイルを変更することができます。</span><span class="sxs-lookup"><span data-stu-id="b180d-266">You can also modify an existing file.</span></span>
2.  <span data-ttu-id="b180d-267">テキスト ファイルで、エクスポートから除外するテーブルの名前に一致する正規表現を含む行を追加します。</span><span class="sxs-lookup"><span data-stu-id="b180d-267">In the text file, add a line that contains a regular expression that matches the name of the table or tables to exclude from the export.</span></span>

<span data-ttu-id="b180d-268">テーブルが除外されると、エクスポート時にそのテーブルに対してファイルが作成されません。</span><span class="sxs-lookup"><span data-stu-id="b180d-268">When a table is excluded, no files are created for that table during the export.</span></span> <span data-ttu-id="b180d-269">指定した正規表現は、その名前が SQL Server データベースに表示されるため、テーブルの名前と照合されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-269">The regular expression that you provide is matched against the name of the table as that name appears in the SQL Server database.</span></span> <span data-ttu-id="b180d-270">大文字と小文字の違いは無視されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-270">Differences in capitalization are disregarded.</span></span> <span data-ttu-id="b180d-271">また、テスト データ転送ツール (ベータ) は、除外ファイルから正規表現にアンカーを追加して、名前全体が正規表現と一致する場合にのみテーブルが除外されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="b180d-271">Additionally, the Test Data Transfer Tool (beta) adds anchors to the regular expression from the exclude file to make sure that tables are excluded only if the whole name matches the regular expression.</span></span> <span data-ttu-id="b180d-272">このツールでは、Microsoft .NET 正規表現構文を使用します。</span><span class="sxs-lookup"><span data-stu-id="b180d-272">The tool uses Microsoft .NET regular expression syntax.</span></span> <span data-ttu-id="b180d-273">除外ファイル形式では空白行を入力できるため、1 つのファイルで式のグループを個別に作成できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-273">The exclude file format lets you enter blank lines, so that you can create separate groups for expressions in a single file.</span></span> <span data-ttu-id="b180d-274">ファイル形式では、(行が // で始まる) 単一行のコメントを入力できるため、表が除外された理由を説明するコメントを入力できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-274">The file format also lets you enter single-line comments (where the line starts with //), so that you can provide comments that describe why the tables have been excluded.</span></span>

#### <a name="examples-of-excluding-tables-from-the-export"></a><span data-ttu-id="b180d-275">エクスポートからテーブルを除外する例</span><span class="sxs-lookup"><span data-stu-id="b180d-275">Examples of excluding tables from the export</span></span>

<span data-ttu-id="b180d-276">SysVersionControlParameters という名前のテーブルのみを除外するには、次の正規表現を使用します。</span><span class="sxs-lookup"><span data-stu-id="b180d-276">To exclude only the table that is named SysVersionControlParameters, use the following regular expression.</span></span>
<span data-ttu-id="b180d-277">// SYSVERSIONCONTROLPARAMETERS のテーブルを除外します</span><span class="sxs-lookup"><span data-stu-id="b180d-277">// Exclude 1 table SYSVERSIONCONTROLPARAMETERS</span></span>

<span data-ttu-id="b180d-278">SysVersionControl で始まる名前を持つすべてのテーブルを除外するには、次の正規表現を使用します。</span><span class="sxs-lookup"><span data-stu-id="b180d-278">To exclude all tables that have names that start with SysVersionControl, use the following regular expression.</span></span>
<span data-ttu-id="b180d-279">// SYSVERSIONCONTROL\* の複数のテーブルを除外します。</span><span class="sxs-lookup"><span data-stu-id="b180d-279">// Exclude multiple tables SYSVERSIONCONTROL.\*</span></span>

#### <a name="including-tables-in-the-export"></a><span data-ttu-id="b180d-280">エクスポートにテーブルを含める</span><span class="sxs-lookup"><span data-stu-id="b180d-280">Including tables in the export</span></span>

<span data-ttu-id="b180d-281">通常、エクスポートしないテーブルを記述してエクスポートするデータを指定します。</span><span class="sxs-lookup"><span data-stu-id="b180d-281">Typically, you specify the data that is exported by describing the tables that you do not want to export.</span></span> <span data-ttu-id="b180d-282">ただし、エクスポートするテーブルを記述する場合、除外リストで正規表現を使用できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-282">However, if you want to describe the tables that you do want to export, you can use a regular expression in an exclude list.</span></span> <span data-ttu-id="b180d-283">エクスポートするテーブル以外のすべてのテーブルに一致する正規表現を作成します。</span><span class="sxs-lookup"><span data-stu-id="b180d-283">Just create a regular expression that matches all tables except the tables that you want to export.</span></span> <span data-ttu-id="b180d-284">次のテーブルに、正規表現に含めることができる構文を示します。</span><span class="sxs-lookup"><span data-stu-id="b180d-284">The following table describes the syntax that you can include in your regular expression.</span></span>

| <span data-ttu-id="b180d-285">正規表現の構文</span><span class="sxs-lookup"><span data-stu-id="b180d-285">Regular expression syntax</span></span> | <span data-ttu-id="b180d-286">説明</span><span class="sxs-lookup"><span data-stu-id="b180d-286">Description</span></span>                                                                                                                                                     |
|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b180d-287">.</span><span class="sxs-lookup"><span data-stu-id="b180d-287">.</span></span>                         | <span data-ttu-id="b180d-288">任意の 1 文字と一致します。</span><span class="sxs-lookup"><span data-stu-id="b180d-288">Match any single character.</span></span>                                                                                                                                     |
| \*                        | <span data-ttu-id="b180d-289">前の式と 0 回以上一致します。</span><span class="sxs-lookup"><span data-stu-id="b180d-289">Match the previous expression zero or more times.</span></span>                                                                                                               |
| <span data-ttu-id="b180d-290">(?&lt;!</span><span class="sxs-lookup"><span data-stu-id="b180d-290">(?&lt;!</span></span> <span data-ttu-id="b180d-291">subexpression)</span><span class="sxs-lookup"><span data-stu-id="b180d-291">subexpression)</span></span>    | <span data-ttu-id="b180d-292">以前に一致したコンテンツの末尾が部分式と一致する場合は、一致を禁止します。</span><span class="sxs-lookup"><span data-stu-id="b180d-292">Prevent a match if the end of the previously matched content matches the subexpression.</span></span> <span data-ttu-id="b180d-293">この式は、ゼロ幅後読みアサーションと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="b180d-293">This expression is known as a zero-width negative lookbehind assertion.</span></span> |
| ^                         | <span data-ttu-id="b180d-294">文字列の開始と一致します。</span><span class="sxs-lookup"><span data-stu-id="b180d-294">Match the start of the string.</span></span>                                                                                                                                  |

<span data-ttu-id="b180d-295">テーブルを指定するには、最初に \* で始まる正規表現を定義して、すべてのテーブルに一致させます。</span><span class="sxs-lookup"><span data-stu-id="b180d-295">To specify tables, first define a regular expression that starts with .\* to match all tables.</span></span> <span data-ttu-id="b180d-296">次に、エクスポートするテーブルごとに幅ゼロの負の lookbehind アサーションを追加します。</span><span class="sxs-lookup"><span data-stu-id="b180d-296">Then append a zero-width negative lookbehind assertion for each table that you want to export.</span></span> <span data-ttu-id="b180d-297">各アサーションの部分式は、文字列の先頭に固定されているテーブルの名前です。</span><span class="sxs-lookup"><span data-stu-id="b180d-297">The subexpression in each assertion is the name of the table that is anchored to the start of the string.</span></span> <span data-ttu-id="b180d-298">たとえば、InventTable および DocuRef テーブルのみをエクスポートするには、次の正規表現を使用します。</span><span class="sxs-lookup"><span data-stu-id="b180d-298">For example, to export only the InventTable and DocuRef tables, use the following regular expression.</span></span>
<span data-ttu-id="b180d-299">// InventTable および DocuRef を除くすべてのテーブルに一致させます。\*(?<!^InventTable)(?<!^DocuRef)</span><span class="sxs-lookup"><span data-stu-id="b180d-299">// Match all tables except InventTable and DocuRef .\*(?<!^InventTable)(?<!^DocuRef)</span></span>

<span data-ttu-id="b180d-300">エクスポートする追加のテーブルごとに、同じ正規表現に (?&lt;!^ NameOfTable) を追加します。</span><span class="sxs-lookup"><span data-stu-id="b180d-300">For each additional table that you want to export, append (?&lt;!^NameOfTable) to the same regular expression.</span></span>

#### <a name="exclude-columns-from-the-export"></a><span data-ttu-id="b180d-301">エクスポートから列を除外</span><span class="sxs-lookup"><span data-stu-id="b180d-301">Exclude columns from the export</span></span>

<span data-ttu-id="b180d-302">エクスポートされたデータから列を除外するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="b180d-302">To exclude a column or columns from the exported data, follow these steps.</span></span>
1.  <span data-ttu-id="b180d-303">**\[Lists\]Filters.xml** を開きます。</span><span class="sxs-lookup"><span data-stu-id="b180d-303">Open **\[Lists\]Filters.xml**.</span></span>
2.  <span data-ttu-id="b180d-304">**名前**属性を持つ&lt;テーブル&gt;要素を追加します。</span><span class="sxs-lookup"><span data-stu-id="b180d-304">Add a &lt;table&gt; element that has a **name** attribute.</span></span> <span data-ttu-id="b180d-305">**name** 属性の値は、除外する列を含むテーブルの名前です。</span><span class="sxs-lookup"><span data-stu-id="b180d-305">The value of the **name** attribute is the name of the table that contains the columns to exclude.</span></span>
3.  <span data-ttu-id="b180d-306">&lt;テーブル&gt;要素の&lt;除外&gt;要素を追加します。</span><span class="sxs-lookup"><span data-stu-id="b180d-306">Add an &lt;exclude&gt; element in the &lt;table&gt; element.</span></span>
4.  <span data-ttu-id="b180d-307">このテーブルでエクスポートから除外する各列に対して、&lt;フィールド&gt; 要素を追加します。</span><span class="sxs-lookup"><span data-stu-id="b180d-307">For each column that you want to exclude from the export for this table, add a &lt;field&gt; element.</span></span> <span data-ttu-id="b180d-308">&lt;フィールド&gt; 要素のコンテンツは、除外する列の名前です。</span><span class="sxs-lookup"><span data-stu-id="b180d-308">The content of the &lt;field&gt; element is the name of the column to exclude.</span></span>

> [!NOTE]
> <span data-ttu-id="b180d-309">テーブルごとに指定できる &lt;exclude&gt; 要素は 1 つだけです。</span><span class="sxs-lookup"><span data-stu-id="b180d-309">There can be only one &lt;exclude&gt; element per table.</span></span>

#### <a name="example-of-excluding-columns-from-the-export"></a><span data-ttu-id="b180d-310">エクスポートから列を除外する例</span><span class="sxs-lookup"><span data-stu-id="b180d-310">Example of excluding columns from the export</span></span>

<span data-ttu-id="b180d-311">**DimensionAttribute** テーブルをエクスポートするときに、**BackingEntityTableId**、**BackingEntityKeyFieldId**、**BackingEntityValueFieldId** 列を除外するには、次のようなエントリを Filters.xml に含めます。</span><span class="sxs-lookup"><span data-stu-id="b180d-311">To exclude the **BackingEntityTableId**, **BackingEntityKeyFieldId**, and **BackingEntityValueFieldId** columns when you export the **DimensionAttribute** table, include an entry such as this in Filters.xml.</span></span>
      <table name="DimensionAttribute">
        <span data-ttu-id="b180d-312"><exclude> <field>BackingEntityTableId</field> <field>BackingEntityKeyFieldId</field> <field>BackingEntityValueFieldId</field> </exclude>
      </span><span class="sxs-lookup"><span data-stu-id="b180d-312"><exclude> <field>BackingEntityTableId</field> <field>BackingEntityKeyFieldId</field> <field>BackingEntityValueFieldId</field> </exclude>
      </span></span></table>

#### <a name="exclude-rows-from-the-export"></a><span data-ttu-id="b180d-313">エクスポートから行を除外</span><span class="sxs-lookup"><span data-stu-id="b180d-313">Exclude rows from the export</span></span>

<span data-ttu-id="b180d-314">エクスポートされたデータから行を除外するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="b180d-314">To exclude rows from the exported data, follow these steps.</span></span>
1.  <span data-ttu-id="b180d-315">\[Lists\]Filters.xml を開きます。</span><span class="sxs-lookup"><span data-stu-id="b180d-315">Open \[Lists\]Filters.xml.</span></span>
2.  <span data-ttu-id="b180d-316">**名前**属性を持つ&lt;テーブル&gt;要素を追加します。</span><span class="sxs-lookup"><span data-stu-id="b180d-316">Add a &lt;table&gt; element that has a **name** attribute.</span></span> <span data-ttu-id="b180d-317">**name** 属性の値は、除外する列を含むテーブルの名前です。</span><span class="sxs-lookup"><span data-stu-id="b180d-317">The value of the **name** attribute is the name of the table that contains the columns to exclude.</span></span>
3.  <span data-ttu-id="b180d-318">&lt;テーブル&gt;要素の&lt;フィルター&gt;要素を追加します。</span><span class="sxs-lookup"><span data-stu-id="b180d-318">Add a &lt;filter&gt; element in the &lt;table&gt; element.</span></span> <span data-ttu-id="b180d-319">&lt;フィルター&gt; 要素のコンテンツは、エクスポートする行を記述する SQL ステートメントである必要があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-319">The content of the &lt;filter&gt; element should be an SQL statement that describes the rows to export.</span></span> <span data-ttu-id="b180d-320">&lt;filter&gt; 要素は SQL WHERE 句と似ていますが、各列名は &lt;field&gt; ステートメントで囲む必要があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-320">The &lt;filter&gt; element is like an SQL WHERE clause, but each column name should be wrapped in a &lt;field&gt; element.</span></span>

<span data-ttu-id="b180d-321">テーブルごとに指定できる &lt;filter&gt; 要素は 1 つだけです。</span><span class="sxs-lookup"><span data-stu-id="b180d-321">There can be only one &lt;filter&gt; element per table.</span></span> <span data-ttu-id="b180d-322">テーブル内の複数の列に基づきフィルター処理することができます。</span><span class="sxs-lookup"><span data-stu-id="b180d-322">You can filter based on multiple columns in the table.</span></span> <span data-ttu-id="b180d-323">他のテーブルのデータに基づいてフィルター処理することはできません。</span><span class="sxs-lookup"><span data-stu-id="b180d-323">You cannot filter based on data in other tables.</span></span> <span data-ttu-id="b180d-324">ユーザーは、エクスポートからすべての行を削除することが必要な場合がよくあります。</span><span class="sxs-lookup"><span data-stu-id="b180d-324">Users often want to exclude all rows from the export.</span></span> <span data-ttu-id="b180d-325">常に false に評価されるフィルターを使用することにより、すべての行を簡単に除外することができます。</span><span class="sxs-lookup"><span data-stu-id="b180d-325">You can easily exclude all rows by using a filter that always evaluates to false.</span></span> <span data-ttu-id="b180d-326">供給している標準フィルターで、0 = 1 のフィルターは空でエクスポートするテーブルの慣用句です。</span><span class="sxs-lookup"><span data-stu-id="b180d-326">In the standard filters that we supply, a filter of 0 = 1 is the idiom for tables that we want to export as empty.</span></span> <span data-ttu-id="b180d-327">しかし、この技術を使用すると、テスト データ転送ツール (ベータ) では、.out ファイルにデータが含まれていない場合でも、エクスポート時にテーブルの表が作成されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-327">However, when this technique is used, the Test Data Transfer Tool (beta) still creates files for the table during export, even if the .out file does not contain any data.</span></span> <span data-ttu-id="b180d-328">この動作は、除外ファイルのエントリを使用してテーブル全体を除外した場合の動作とは異なります。</span><span class="sxs-lookup"><span data-stu-id="b180d-328">This behavior is unlike the behavior when you exclude the whole table by using an entry in an exclude file.</span></span>
#### <a name="examples-of-excluding-rows-from-the-export"></a><span data-ttu-id="b180d-329">エクスポートから行を除外する例</span><span class="sxs-lookup"><span data-stu-id="b180d-329">Examples of excluding rows from the export</span></span>

<span data-ttu-id="b180d-330">**UserID** が空白の **SysLastValue** の行のみをエクスポートするには、Filters.xml に次のエントリを含めます。</span><span class="sxs-lookup"><span data-stu-id="b180d-330">To export only those rows in **SysLastValue** where the **UserID** is blank, include the following entry in Filters.xml.</span></span>
      <table name="SysLastValue">
        <span data-ttu-id="b180d-331"><filter><field>UserID</field> = ''</filter>
      </span><span class="sxs-lookup"><span data-stu-id="b180d-331"><filter><field>UserID</field> = ''</filter>
      </span></span></table>

<span data-ttu-id="b180d-332">この場合、エクスポートするために行を定義する SQL クエリは SELECT \* FROM SysLastValue WHERE UserID = '' であることが想像できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-332">In this case, you can imagine that the SQL query that defines the rows to export is SELECT \* FROM SysLastValue WHERE UserID = ''.</span></span> <span data-ttu-id="b180d-333">SysPersonalization のすべての行がエクスポートされないようにするには、Filters.xml に次のエントリを含めます。</span><span class="sxs-lookup"><span data-stu-id="b180d-333">To prevent all rows in SysPersonalization from being exported, include the following entry in Filters.xml.</span></span>
      <table name="SysPersonalization">
        <span data-ttu-id="b180d-334"><filter>0 = 1</filter>
      </span><span class="sxs-lookup"><span data-stu-id="b180d-334"><filter>0 = 1</filter>
      </span></span></table>

<span data-ttu-id="b180d-335">この場合、エクスポートするために行を定義する SQL クエリは SELECT \* FROM SysPersonalization WHERE 0 = 1 であることが想像できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-335">In this case, you can imagine that the SQL query that defines the rows to export is SELECT \* FROM SysPersonalization WHERE 0 = 1.</span></span>
<span data-ttu-id="b180d-336">データのインポート</span><span class="sxs-lookup"><span data-stu-id="b180d-336">Importing data</span></span>

<span data-ttu-id="b180d-337">テスト データ転送ツール (ベータ) は、指定したディレクトリ内のすべてのデータのインポートを試みるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="b180d-337">The Test Data Transfer Tool (beta) is designed to try to import all the data in the directory that you specify.</span></span> <span data-ttu-id="b180d-338">このツールはインポート中にフィルタリングを実行しません。</span><span class="sxs-lookup"><span data-stu-id="b180d-338">The tool does not perform any filtering during import.</span></span> <span data-ttu-id="b180d-339">このルールの唯一の例外は、**SystemSequences** テーブルです。</span><span class="sxs-lookup"><span data-stu-id="b180d-339">The only exception to this rule is the **SystemSequences** table.</span></span> <span data-ttu-id="b180d-340">このツールは他のテーブルと同様に **SystemSequences** テーブルをエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="b180d-340">The tool exports the **SystemSequences** table just like any other table.</span></span> <span data-ttu-id="b180d-341">ただし、インポート中に、このテーブル用に供給する任意のデータはツールにより無視されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-341">However, during import, the tool ignores any data that you supply for this table.</span></span> <span data-ttu-id="b180d-342">代わりに、**SystemSequences** テーブルの次の **RecID** の値が、インポートされているテーブルの最大 **RecID** よりも低い場合、ツールはインポートされる各テーブルについてデータベースで **SystemSequences** テーブルを更新します。</span><span class="sxs-lookup"><span data-stu-id="b180d-342">Instead, the tool updates the **SystemSequences** table in the database for each table that is imported if the next **RecID** value for that table in the **SystemSequences** table is less than the maximum **RecID** in the table that is being imported.</span></span> <span data-ttu-id="b180d-343">各テーブルがインポートされると、ツールは **SystemSequences** テーブルに格納されている他の ID 値に必要な調整も行います。</span><span class="sxs-lookup"><span data-stu-id="b180d-343">As each table is imported, the tool also makes any adjustments that are required to the other ID values that are stored in the **SystemSequences** table.</span></span> <span data-ttu-id="b180d-344">.out ファイルで行を持たないテーブルをインポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="b180d-344">You can import a table that has no rows in the .out file.</span></span> <span data-ttu-id="b180d-345">テーブルをまったくインポートしないこともできます。</span><span class="sxs-lookup"><span data-stu-id="b180d-345">You can also not import a table at all.</span></span> <span data-ttu-id="b180d-346">これら 2 つの工程は同じではありません。</span><span class="sxs-lookup"><span data-stu-id="b180d-346">These two operations are not the same.</span></span> <span data-ttu-id="b180d-347">行を持たないテーブルをインポートするとき、そのテーブル内の既存のデータは削除されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-347">When you import a table that has no rows, the existing data in that table is deleted.</span></span> <span data-ttu-id="b180d-348">ただし、テーブルを全くインポートしない場合、そのテーブルの既存のデータは変更されません。</span><span class="sxs-lookup"><span data-stu-id="b180d-348">However, if you do not import a table at all, the existing data in that table is untouched.</span></span> <span data-ttu-id="b180d-349">インポートする必要があるテーブルごとに、ツールは以下のアクションを実行します。</span><span class="sxs-lookup"><span data-stu-id="b180d-349">For each table that must be imported, the tool performs the following actions:</span></span>
1.  <span data-ttu-id="b180d-350">ツールは、同じ起点 GUID を持つターゲット データベース内のテーブルを検索します。</span><span class="sxs-lookup"><span data-stu-id="b180d-350">The tool searches for a table in the target database that has the same origin GUID.</span></span>
    -   <span data-ttu-id="b180d-351">このようなテーブルが存在する場合、ツールは、インポートの対象としてそのテーブルを使用します。</span><span class="sxs-lookup"><span data-stu-id="b180d-351">If such a table exists, the tool uses that table as the target of the import.</span></span>
    -   <span data-ttu-id="b180d-352">そのようなテーブルが存在しない場合、ツールは、同じ名前であるターゲット データベース内のテーブルを検索しようとします。</span><span class="sxs-lookup"><span data-stu-id="b180d-352">If no such table exists, the tool tries to find a table in the target database that has the same name.</span></span> <span data-ttu-id="b180d-353">このようなテーブルが存在する場合、ツールは、インポートの対象としてそのテーブルを使用します。</span><span class="sxs-lookup"><span data-stu-id="b180d-353">If such a table exists, the tool uses that table as the target of the import.</span></span>
    -   <span data-ttu-id="b180d-354">対象となるテーブルが見つからない場合は、テーブルはインポートされず、エラーは生成されません。</span><span class="sxs-lookup"><span data-stu-id="b180d-354">If no target table can be found, the table is not imported, and no error is produced.</span></span>

2.  <span data-ttu-id="b180d-355">ターゲット テーブルが特定されると、ターゲット テーブル内の列に一致する .out ファイルの新しい一時的なバージョンがツールによって作成されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-355">When a target table has been identified, the tool creates a new temporary version of the .out file that matches the columns in the target table.</span></span>
3.  <span data-ttu-id="b180d-356">ソース テーブル内の各列で、ツールは最初に、フィールドの GUID の発生元を使用して、ターゲット テーブルで対応する列を検索します。</span><span class="sxs-lookup"><span data-stu-id="b180d-356">For each column in the source table, the tool first searches for the matching column in the target table by using the origin GUID of the field.</span></span> <span data-ttu-id="b180d-357">発生元に基づく一致が見つからない場合は、フィールド名を使用して列が一致します。</span><span class="sxs-lookup"><span data-stu-id="b180d-357">If no origin-based match is found, columns are matched by using the field names.</span></span>
    -   <span data-ttu-id="b180d-358">ターゲット テーブル内で一致した列がないソース テーブル内に列がある場合は、それらの列のデータは無視され、エラーは生成されません。</span><span class="sxs-lookup"><span data-stu-id="b180d-358">If there are columns in the source table that do not have matching columns in the target table, the data for those columns is ignored, and no error is produced.</span></span>
    -   <span data-ttu-id="b180d-359">ソース テーブル内に一致した列がないターゲット テーブル内に列がある場合は、既定値が使用されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-359">If there are columns in the target table that do not have matching columns in the source table, default values are used.</span></span> <span data-ttu-id="b180d-360">ほとんどの場合、既定値は 0 (ゼロ) またはターゲット列のデータ型と一致する空の列です。</span><span class="sxs-lookup"><span data-stu-id="b180d-360">In most cases, the default values are 0 (zero) or empty values that match the data type of the target column.</span></span> <span data-ttu-id="b180d-361">ただし、ターゲット列が **InstanceRelationType** と名付けられる場合、既定値はターゲット テーブルのテーブル ID です。</span><span class="sxs-lookup"><span data-stu-id="b180d-361">However, if the target column is named **InstanceRelationType**, the default value is the table ID of the target table.</span></span>

4.  <span data-ttu-id="b180d-362">エンティティのテーブル ID、クラス ID、または拡張データ型 ID により Microsoft Dynamics AX のエンティティを参照することで知られる任意の列に関しては、ツールはターゲット データベースで同じエンティティの ID と一致する ID を更新します。</span><span class="sxs-lookup"><span data-stu-id="b180d-362">For any column that is known to refer to a Microsoft Dynamics AX entity by the entity’s table ID, class ID, or extended data type ID, the tool updates the ID to match the ID of the same entity in the target database.</span></span> <span data-ttu-id="b180d-363">このツールは、まず、エクスポート時にソースデータの ID をエンティティの起点にマッピングします。</span><span class="sxs-lookup"><span data-stu-id="b180d-363">The tool first maps the ID in the source data to the origin of the entity at the time of export.</span></span> <span data-ttu-id="b180d-364">ツールは、エンティティの原点を使用して、ターゲット データベース内の ID を取得します。</span><span class="sxs-lookup"><span data-stu-id="b180d-364">The tool then uses the origin of the entity to obtain the ID in the target database.</span></span> <span data-ttu-id="b180d-365">ターゲット システムで、事業体が見つからない場合に元の ID を使用すると、エラーは生成されません。</span><span class="sxs-lookup"><span data-stu-id="b180d-365">If the entity cannot be found in the target system, the original ID is used, and no error is produced.</span></span>
5.  <span data-ttu-id="b180d-366">インポート中に、クラスター化されていないインデックスのインデックス違反のためにデータがインポートされなかった場合、ツールはインデックスを無効にしてからインポートを再試行します。</span><span class="sxs-lookup"><span data-stu-id="b180d-366">During import, if data is not imported because of an index violation in a non-clustered index, the tool tries to disable the index and then retries the import.</span></span> <span data-ttu-id="b180d-367">この場合、インデックスを無効にされた後にデータが正常にインポートされた場合でも、ログ ファイルにエラーが報告されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-367">In this case, an error is reported in the log file, even if the data is successfully imported after the index was disabled.</span></span>

### <a name="import-example"></a><span data-ttu-id="b180d-368">インポートの例</span><span class="sxs-lookup"><span data-stu-id="b180d-368">Import example</span></span>

<span data-ttu-id="b180d-369">次の例は、**Import\_March2013** ディレクトリにあるすべてのファイルをインポートする方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="b180d-369">The following example shows how to import all files in the **Import\_March2013** directory.</span></span>
<span data-ttu-id="b180d-370">DP.exe インポート Import_March2013 AXTestDB</span><span class="sxs-lookup"><span data-stu-id="b180d-370">DP.exe IMPORT Import_March2013 AXTestDB</span></span>

### <a name="files-used-during-import"></a><span data-ttu-id="b180d-371">インポート中に使用されるファイル</span><span class="sxs-lookup"><span data-stu-id="b180d-371">Files used during import</span></span>

<span data-ttu-id="b180d-372">このセクションでは、インポート処理中にテスト データ転送ツール (ベータ版) で使用されるファイルについて説明します。</span><span class="sxs-lookup"><span data-stu-id="b180d-372">This section describes the files that are used by the Test Data Transfer Tool (beta) during the import process.</span></span>
#### <a name="temporary-files"></a><span data-ttu-id="b180d-373">一時ファイル</span><span class="sxs-lookup"><span data-stu-id="b180d-373">Temporary files</span></span>

<span data-ttu-id="b180d-374">テスト データ転送ツール (beta) は、追加、削除、または名前変更が実行された列などの多くの種類の変更を含むテーブルにデータをインポートできます。</span><span class="sxs-lookup"><span data-stu-id="b180d-374">The Test Data Transfer Tool (beta) can import data into tables that have many kinds of changes, such as columns that have been added, removed, or renamed.</span></span> <span data-ttu-id="b180d-375">この機能を有効にするには、修正されたバージョンの .out ファイルをディスクの一時的な場所に書き込み、このファイルを bcp に渡してインポートします。</span><span class="sxs-lookup"><span data-stu-id="b180d-375">To enable this functionality, the tool writes a modified version of the .out file to a temporary location on disk and passes this file to bcp to import.</span></span> <span data-ttu-id="b180d-376">インポートが完了すると、ツールは一時ファイルを削除します。</span><span class="sxs-lookup"><span data-stu-id="b180d-376">Then, when the import is completed, the tool deletes the temporary file.</span></span> <span data-ttu-id="b180d-377">一時ファイルの名前は、**Path.GetTempPath()** および **Path.GetRandomFileName()** を呼び出すことによって生成されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-377">The name of the temporary file is generated by calling **Path.GetTempPath()** and **Path.GetRandomFileName()**.</span></span> <span data-ttu-id="b180d-378">通常、一時ファイルは実行時エラーが発生しても削除されます。</span><span class="sxs-lookup"><span data-stu-id="b180d-378">Typically, the temporary files are deleted even when run-time errors occur.</span></span> <span data-ttu-id="b180d-379">ただし、インポート中に停電が発生する場合などのまれな状況では、一時ファイルに書き込まれ、削除はされません。</span><span class="sxs-lookup"><span data-stu-id="b180d-379">However, in rare situations, such as when a power outage occurs during import, the temporary files can be written and not deleted.</span></span> <span data-ttu-id="b180d-380">ファイルが現在のユーザーの一時的なパスに書き込まれるため、この問題により予期せぬ情報開示が発生しないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-380">Because the files are written to the current user’s temporary path, this issue should not cause unexpected information disclosure.</span></span> <span data-ttu-id="b180d-381">ただし、インポートする情報の重要度によって、および組織のデータ処理のポリシーによっては、このリスクについて理解しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-381">However, depending on the importance of the information that you are importing and on your organization’s data handling policies, you might have to know about this risk.</span></span>

### <a name="sql-files"></a><span data-ttu-id="b180d-382">.sql ファイル</span><span class="sxs-lookup"><span data-stu-id="b180d-382">.sql files</span></span>

<span data-ttu-id="b180d-383">テスト データ転送ツール (ベータ) では、.sql ファイルを \[インポート\] フォルダに追加すると、ユーザーのコンテキストで任意の SQL ステートメントを実行できます。。</span><span class="sxs-lookup"><span data-stu-id="b180d-383">The Test Data Transfer Tool (beta) lets you execute arbitrary SQL statements in your user context by adding .sql files to the \[Import\] folder.</span></span> <span data-ttu-id="b180d-384">信頼済のソースから .sql ファイルだけを追加します。</span><span class="sxs-lookup"><span data-stu-id="b180d-384">Add only .sql files that come from a trusted source.</span></span>

### <a name="out-files-outmodel-files-and-xml-files"></a><span data-ttu-id="b180d-385">.out ファイル、.outmodel ファイル、および .xml ファイル</span><span class="sxs-lookup"><span data-stu-id="b180d-385">.out files, .outmodel files, and .xml files</span></span>

<span data-ttu-id="b180d-386">テスト データ転送ツール (ベータ) は、.out ファイルの名前から、およびインポートするデータを含むディレクトリ内のその他のファイルの内容から SQL ステートメントを生成します。</span><span class="sxs-lookup"><span data-stu-id="b180d-386">The Test Data Transfer Tool (beta) generates SQL statements from the names of the .out files and from the content of the other files in the directory that contains the data to import.</span></span> <span data-ttu-id="b180d-387">これらのファイルから取得され、SQL ステートメントを生成するために使用されるコンテンツは、テーブル名を表す必要があります。</span><span class="sxs-lookup"><span data-stu-id="b180d-387">The content that is pulled from those files and used to generate SQL statements is expected to represent table names.</span></span> <span data-ttu-id="b180d-388">SQL インジェクション攻撃を防ぐため、ツールは SQL クエリを作成する前にデータの検証とエスケープを行います。</span><span class="sxs-lookup"><span data-stu-id="b180d-388">To prevent SQL injection attacks, the tool validates and escapes the data before that data is used to create the SQL queries.</span></span> <span data-ttu-id="b180d-389">ただし、信頼できるソースからのみデータを受け入れることを引き続きお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b180d-389">However, we still recommend that you accept data only from trusted sources.</span></span>

## <a name="run-sql-scripts-after-import"></a><span data-ttu-id="b180d-390">インポート後に SQL スクリプトを実行</span><span class="sxs-lookup"><span data-stu-id="b180d-390">Run SQL scripts after import</span></span>
<span data-ttu-id="b180d-391">テスト データ転送ツール (ベータ) では、インポートを完了した後に SQL スクリプトを実行できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-391">The Test Data Transfer Tool (beta) lets you run SQL scripts after you complete the import.</span></span> <span data-ttu-id="b180d-392">インポートされたデータに対して行う変更は、SQL スクリプトを使用することによって完了できます。</span><span class="sxs-lookup"><span data-stu-id="b180d-392">Any modifications that you have to make to imported data can be completed by using the SQL scripts.</span></span> <span data-ttu-id="b180d-393">データのインポートを完了する前に、SQL スクリプトを作成し、ツールと同じ場所にある\[インポート\] サブフォルダーに .sql ファイルとして保存します。</span><span class="sxs-lookup"><span data-stu-id="b180d-393">Before you complete your data import, write the SQL script, and then save the file as an .sql file in the \[Import\] subfolder in the same location as the tool.</span></span> <span data-ttu-id="b180d-394">インポートが完了したら、ツールは、\[インポート\] フォルダに保存されている SQL スクリプト ファイルを自動的に実行します。</span><span class="sxs-lookup"><span data-stu-id="b180d-394">When the import is completed, the tool automatically runs the SQL script file that you have stored in the \[Import\] folder.</span></span>






