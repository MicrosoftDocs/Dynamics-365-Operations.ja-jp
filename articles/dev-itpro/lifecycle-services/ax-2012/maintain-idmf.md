---
title: "Intelligent Data Management Framework (AX 2012) でのメンテナンス"
description: "このトピックでは、インテリジェント データ管理フレームワーク (IDMF) のデータベース設定について説明します。"
author: kfend
manager: AnnBe
ms.date: 11/14/2017
ms.topic: article
ms.prod: dynamics-ax-2012
ms.service: 
ms.technology: 
audience: Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 2012
ms.custom: 18471
ms.assetid: a8cab868-0e2f-406e-b486-4883876f1f09
ms.search.region: Global
ms.author: kfend
ms.search.validFrom: 
ms.dyn365.ops.version: 2012
ms.translationtype: HT
ms.sourcegitcommit: 879eb9f2a63a8514791f74965005ed3e22bc0de7
ms.openlocfilehash: 2119c6229afb96151bf1eefd2087d9f2b1bd3663
ms.contentlocale: ja-jp
ms.lasthandoff: 04/20/2018

---

# <a name="maintenance-in-the-intelligent-data-management-framework-ax-2012"></a>Intelligent Data Management Framework (AX 2012) でのメンテナンス

[!include [banner](../../includes/banner.md)]

<a name="database"></a> データベース
--------

このコマンドを使用すると、運用レプリカ、アーカイブ、および生産データベースの接続文字列を構成できます。 実働データベースは、実働環境の Microsoft Dynamics AX データベースです。 生産レプリカ データベースは、ヘルス チェック スナップショットのクエリを実行するために使用されます。 生産データベースに対して正常性チェック クエリを実行することは技術的に可能ですが、そうするとパフォーマンスが低下します。 アーカイブ データベースは、タスクで使用されるアーカイブ オブジェクトに基づいてレコードをアーカイブするアーカイブ タスクで使用されます。 ツールバーで、**データベース**をクリックして、**データベースの接続設定**ウィンドウを操作します。 **注意:** 技術的には、アプリケーション ヘルス チェック クエリを生産データベースで実行するようにコンフィギュレーションすることはできますが、その場合、パフォーマンスと応答時間の低下を招きます。 実稼働複製データベースで正常性チェック クエリを実行し、**実稼働と同じ** フィールドを選択しないことをお勧めします。

### <a name="navigation-of-the-database-connection-settings-window"></a>データベースの接続設定ウィンドウのナビゲーション

次のテーブルで、**データベースの接続設定** ウィンドウのコントロールについて説明します。

#### <a name="tabs"></a>タブ

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>タブ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><span class="ui">生産</span></strong></td>
<td>生産データベースの接続文字列をコンフィギュレーションします。
<div class="alert">
<table>
<thead>
<tr class="header">
<th><strong>メモ</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ここで選択する実働データベースは、Microsoft Dynamics AX サーバー構成で使用されるデータベースと一致する必要があります。</td>
</tr>
</tbody>
</table>
</div></td>
</tr>
<tr class="even">
<td><strong><span class="ui">生産レプリカ</span></strong></td>
<td>レプリカ データベースの接続文字列をコンフィギュレーションします。</td>
</tr>
<tr class="odd">
<td><strong><span class="ui">アーカイブ</span></strong></td>
<td>アーカイブ データベースの接続文字列をコンフィギュレーションします。</td>
</tr>
</tbody>
</table>

#### <a name="buttons"></a>ボタン

| ボタン              | 説明                                                               |
|---------------------|---------------------------------------------------------------------------|
| **接続のテスト** | 設定した接続文字列を使用してデータベース接続をテストします。 |
| **保存**            | データベース コンフィギュレーションを保存します。                                          |
| **クリア**           | すべての入力フィールドをクリアします。                                               |


#### <a name="fields-across-all-tabs"></a>フィールド (すべてのタブ間)

| フィールド                                               | 説明                                                                                                                                                                                                                                      |
|-----------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **SQL サーバー名**                                 | リストからデータベース サーバーの名前を選択します。                                                                                                                                                                                            |
| **Windows 統合セキュリティの使用**                 | スケジューラ サービスは、Windows 統合セキュリティを使用してデータベースに接続します。                                                                                                                                                                |
| **特定のユーザー名およびパスワードの使用**              | スケジューラ サービスは、このウィンドウに入力したユーザー名とパスワードの値を使用してデータベースに接続します。                                                                                                                            |
| **ユーザー名**                                        | スケジューラー サービスがデータベースへの接続に使用するユーザー名。                                                                                                                                                                        |
| **パスワード**                                        | スケジューラー サービスがデータベースへの接続に使用するパスワード。                                                                                                                                                                         |
| **サーバーのデータベースの名前**              | 接続しようとしているデータベース。                                                                                                                                                                                                         |
| **接続タイムアウト (秒)**                    | 接続タイムアウトの値 (秒)。                                                                                                                                                                                                |
| **最大プール サイズ**                               | コネクション プールの最大値。                                                                                                                                                                                                        |
| **最小プール サイズ**                               | コネクション プールの最小値。                                                                                                                                                                                                        |
| **生産と同じ** (**運用レプリカ** タブ) | このフィールドを選択すると、接続文字列が運用データベースから運用レプリカ データベースにコピーされます。 したがって、正常性チェック クエリは、実稼働レプリカ データベースではなく、実稼働データベースに対して実行されます。 |



## <a name="email"></a>電子メール
IDMF は、コンフィギュレーション済の受信者に電子メール警告を送信することができます。 このコマンドは、電子メール機能を設定するために使用します。 ツールバーで、**電子メール**をクリックして、**電子メール パラメーター**ウィンドウを操作します。

### <a name="navigation-of-the-email-parameters-window"></a>電子メール パラメーター ウィンドウのナビゲーション

次のテーブルで、**電子メール パラメーター** ウィンドウのコントロールについて説明します。

#### <a name="buttons"></a>ボタン

| ボタン     | 説明                                   |
|------------|-----------------------------------------------|
| **保存**   | メール構成に加えられた変更を保存します。 |
| **キャンセル** | すべての入力フィールドをクリアします。                   |


#### <a name="fields"></a>フィールド

| フィールド                    | 説明                                                                                                                                      |
|--------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------|
| **送信 SMTP サーバー** | 有効な SMTP サーバーの IP アドレス。                                                                                                           |
| **SMTP ポート番号**     | IDMF が電子メールの送信に使用するポート番号。                                                                                                    |
| **出発地住所**         | 電子メールの送信者として表示される電子メール アドレス。                                                                                           |
| **受取人のリスト**       | 受信者の電子メール アドレス。 セミコロンで区切った複数の電子メール アドレスを入力することができます。                                            |
| **ユーザー名**             | SMTP サーバーへのアクセスに使用されるユーザー名。 これはオプションのフィールドです。 IDMF から電子メールの警告を受信する場合は、この値を入力します。 |
| **パスワード**             | SMTP サーバーへのアクセスに使用されるパスワード。 これはオプションのフィールドです。 IDMF から電子メールの警告を受信する場合は、この値を入力します。  |



## <a name="thresholds"></a>しきい値
このコマンドを使用すると、インデックスの断片化の増加、インデックスからデータへの成長率、およびスナップショットからスナップショットへの成長率のしきい値を決定できます。 テーブルまたは測定がしきい値に達すると、警告が生成されます。 既定では、しきい値パラメータの値は 0 です。 0 以外の値を含むしきい値パラメーターのみ警告を生成します。 **分析の詳細** ワークスペースに警告が表示されます。 **分析メニュー** &gt; **分析詳細コマンド**をクリックします。 また、ユーザーが電子メール機能を構成したの場合、警告とともに電子メール メッセージを受信します。 ツール バーで、**しきい値**をクリックして、**しきい値パラメーターの構成**ウィンドウを操作します。

### <a name="navigation-of-the-configure-threshold-parameters-window"></a>しきい値パラメーターの構成ウィンドウのナビゲーション

次のテーブルで、**しきい値パラメーターの構成** ウィンドウのコントロールについて説明します。

#### <a name="tabs"></a>タブ

| タブ                       | 説明                                                 |
|---------------------------|-------------------------------------------------------------|
| **テーブル**                | テーブルとそのしきい値の一覧。                |
| **健康チェック メジャー** | 状態チェック測定とそのしきい値の一覧。 |
| **削除**                 | テーブルとそのしきい値の一覧。                |


#### <a name="buttons"></a>ボタン

| ボタン        | 説明                                               |
|---------------|-----------------------------------------------------------|
| **構成** | リストに入力または変更されたしきい値を追加します。 |
| **保存**      | 変更内容をデータベースに保存します。                         |


#### <a name="fields-across-all-tabs"></a>フィールド (すべてのタブ間)

| フィールド                               | 説明                                                                                                                                                                                                                                                                                                                                                                                                     |
|-------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **フィルター基準**                 | このリストは、テーブルのタイプとカテゴリで構成されています。 トップ 50 テーブル、トップ 100 テーブル、またはすべてのテーブルなどの、テーブルの種類に基づき値を選択することができます。 ログ テーブルまたはパラメーター テーブルなどの、テーブルのカテゴリに基づき値を選択することもできます。 データ グリッドは、このリストで選択した値に基づいてフィルタリングされます。 既定では、**フィルター基準**フィールドは**上位 10 個のテーブル**に設定されています。 |
| **テーブル名**                      | テーブルの名前。                                                                                                                                                                                                                                                                                                                                                                                          |
| **インデックスの断片化の増加 (%)**  | 選択したテーブルのスナップショット間のインデックス断片化の成長率のしきい値。 たとえば、10 のしきい値は、インデックスの断片化の割合がここから次のスナップショットの間で 10 増えた場合に、警告を生成します。 この値はテーブルでのみ使用できます。                                                                                                                  |
| **インデックスとデータの比率の増加 (%)**  | 選択したテーブルの 2 つのスナップショット間のインデックスとデータ比率の成長率のしきい値。 この値はテーブルでのみ使用できます。                                                                                                                                                                                                                                                           |
| **スナップショットからスナップショットへの成長 (%)** | 選択したテーブルに対するスナップショットとスナップショットの成長率の割合のしきい値。 テーブルまたは測定のためにこの値を入力することができます。                                                                                                                                                                                                                                                             |
| **測定名**                    | 測定の名前。                                                                                                                                                                                                                                                                                                                                                                                        |
| **データ サイズ (MB)**                  | 削除テーブルのしきい値。 削除テーブルが指定したサイズに達すると、警告が生成されます。                                                                                                                                                                                                                                                                                                   |


## <a name="alerts"></a>警告
このコマンドは、IDMF の 警告機能を設定するために使用します。 電子メール警告を受信するには、**管理**&gt;**電子メール コマンド** から電子メール パラメーターを構成する必要があります。 ツールバーで、**警告**をクリックして、**警告のコンフィギュレーション**ウィンドウを開きます。 警告を生成する警告イベントを選択します。 次のテーブルは、選択可能な警告イベントについて説明してします。

| 警告イベント    | 説明                                                                                                                                                                                             |
|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **ジョブ開始**  | タスクの開始時に、警告を送信します。 このオプションは既定で選択されています。                                                                                                                                   |
| **ジョブの終了**    | タスクの終了時に、警告を送信します。 警告は、タスクの完了ステータスに関係なく送信されます。 完了ステータスは、**合格**、**不合格**、または**キャンセル**です。 このオプションは既定で選択されています。 |
| **しきい値** | 特定のしきい値に達したら警告を送信します。                                                                                                                                               |

生成された警告を表示するには、**分析**&gt;**分析の詳細** をクリックし、**関連情報** ウィンドウで **警告** をクリックします。 電子メール機能を構成した場合、生成された警告が構成済の受信者に電子メールで送信されます。

## <a name="related-information"></a>関連情報
このコマンドを使用すると、関連する情報を扱うことができます。 関連する情報は、アプリケーション全体の **関連情報** ウィンドウで、テーブル、メジャー、およびタスクなどのさまざまなアプリケーション エンティティのコンテキストの説明を提供します。 これらのアプリケーション エンティティは、関連情報パラメーターと呼ばれます。 これらのパラメーターは、次のテーブルに示すように、関連情報タイプと呼ばれるグループに分類されます。

| 関連情報タイプ | 説明                                                                                                                                                                                                    |
|--------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **分析**             | **詳細分析** ビューでテーブルのコンテキスト説明を提供します。                                                                                                                               |
| **基準**              | メジャーの説明、アーカイブの妥当性、およびメジャーの計算に使用された式を含む、測定の情報を提供します。 この情報は、アプリケーションの稼働状態チェック分析で使用されます。 |
| **OfflineObject**        | アーカイブ オブジェクトにおけるテーブルのコンテキストの説明を提供します。                                                                                                                                            |
| **RecyleObject**         | 削除オブジェクトにおけるテーブルのコンテキストの説明を提供します。                                                                                                                                               |
| **UnusedIndex**          | 未使用のインデックスを評価し、インデックスが必要か削除できるかを判別します。                                                                                                                       |
| **FragmentedIndex**      | フラグメント化されたインデックスを最適化するタスクを作成するための手順を提供します。                                                                                                                                       |

> [!NOTE]
> IDMF は、限定された関連情報のパラメーター セットに関する関連情報を提供します。 自分自身の関連情報パラメーターを追加、または既存の関連情報パラメーターを要件に合わせて修正することができます。

ツール バーで、**関連情報**をクリックし、**関連情報**ウィンドウを開きます。
### <a name="navigation-of-the-related-information-window"></a>関連情報ウィンドウのナビゲーション

次のテーブルで、**関連情報** ウィンドウのコントロールについて説明します。

#### <a name="panes"></a>ウィンドウ

| ウィンドウ                            | 説明                                                        |
|---------------------------------|--------------------------------------------------------------------|
| **関連情報のリスト**    | 関連情報パラメーターの一覧。                          |
| **関連情報の詳細** | 関連する情報パラメーターを追加または変更できるフィールドです。 |


#### <a name="buttons"></a>ボタン

| ボタン          | 説明                                                                                                                             |
|-----------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| **新規**         | 新しい関連情報パラメーターを追加します。                                                                                                |
| **更新 / 保存** | 選択内容に応じて、ラベルが変わります。 ラベルは **既存の説明の更新** と **新しい説明用に保存** です。 |

#### <a name="fields"></a>フィールド

| フィールド                        | 説明                                                                                                                                                                                                                                                       |
|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **関連情報タイプ** | 関連情報タイプ。                                                                                                                                                                                                                                     |
| **言語 ID**              | 関連情報パラメーターの言語 ID。 既定では、既定の関連情報パラメーターの言語 ID は **en-US** (英語、米国) です。 新しい関連情報パラメーターを追加するとき、一覧から言語を選択することができます。 |
| **パラメーター**                | 関連情報パラメーターの名前。 これは、テーブル名、メジャー名、またはタスク タイプなど、アプリケーション エンティティの名前です。                                                                                                                  |
| **説明**              | 関連情報のパラメーターのコンテキストの説明です。 たとえば、測定の説明、アーカイブとの適合性、および測定の式についての説明を提供します。                                                                              |

## <a name="discovery"></a>検索
このコマンドを使用すると、例外リストを操作できます。 例外リストは例外パラメーターで構成されています。 例外リストは、テーブル、関係、またはルールを削除オブジェクトまたはアーカイブ オブジェクトに追加することを制限します。 制限のタイプは、例外パラメーターに適用する例外のタイプによって異なります。 次のテーブルでは、例外パラメーターの値について説明します。 コンフィギュレーション キーおよびテーブル グループの詳細については、Microsoft Dynamics AX のドキュメントを参照してください。

| 例外パラメーター タイプ | 説明                                                                                                                                                                                                                                                               |
|--------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **テーブル名**           | 例外の一覧にテーブル名により明示的に追加されたテーブル。 たとえば、**BOMCalcTrans** テーブルがドライバー テーブルの例外になるようコンフィギュレーションされます。 したがって、削除オブジェクトまたはアーカイブ オブジェクトのドライバー テーブルとして **BOMCalcTrans** を使用することはできません。 |
| **コンフィギュレーション キー**    | 例外リストのコンフィギュレーション キーの一覧。 これらのコンフィギュレーション キーを使用するすべてのテーブルはコンフィギュレーション キーとの関係に基づいて暗黙的に例外リストに含まれます。                                                             |
| **テーブル グループ**          | 例外リストのテーブル グループの一覧。 例外リストのテーブル グループの一部であるすべてのテーブルは、テーブル グループとの関係に基づいて、例外リストに暗黙的に含まれます。                                                     |

> [!NOTE]
> 例外リストからテーブルを追加または削除するときは、検出が正しく行われず誤った削除オブジェクトまたはアーカイブ オブジェクトが作成される可能性があるため、注意が必要です。
> パージ オブジェクトの **プロパティ** ウィンドウを使用して、選択したテーブルのテーブル グループと構成キーを表示します。

**管理** &gt; **検索**をクリックし、**例外パラメータ** ウィンドウを処理します。

### <a name="navigation-of-the-exception-parameters-window"></a>例外パラメーター ウィンドウのナビゲーション

次のテーブルで、検出用の **例外パラメーター** ウィンドウのコントロールについて説明します。

#### <a name="panes"></a>ウィンドウ

| ウィンドウ                                    | 説明                                                                                                                                                                                                    |
|-----------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **例外パラメータ**                | 選択内容に基づいてデータ グリッドをフィルター処理する例外パラメーター タイプを選択します。 IDMF では既定の例外を削除することも、変更することもできません。 自分自身の例外パラメーターを追加、変更、および削除することができます。 |
| **保存または更新例外パラメーター** | カスタム例外パラメータを作成または変更します。                                                                                                                                                             |
| **検索**                              | 特定の例外パラメーターを検索します。                                                                                                                                                                     |

#### <a name="buttons"></a>ボタン

| ボタン                | 説明                                                                                                                             |
|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| **新しいパラメーターの追加** | 新しい例外パラメーターを追加します。                                                                                                          |
| **追加**               | **例外パラメーター** リストに新しいパラメーターを追加します。                                                                             |
| **保存/更新**       | データ グリッドを変更して例外のパラメーターに追加、削除、および変更を反映し、情報をデータベースに保存します。 |
| **検索**            | 検索値を使用して、**例外パラメーター** 一覧をフィルター処理します。                                                                       |
| **クリア**             | **パラメーター名**フィールドの検索テキストをクリアします。                                                                                  |
| **削除**            | 選択した例外パラメータを削除します。                                                                                                   |

#### <a name="fields-exception-parameters-pane"></a>フィールド (例外パラメータ ウィンドウ)

| フィールド                 | 説明                                                                                                                                                                                                                                                                                                                                                                |
|-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **パラメーター名**    | 例外パラメーターの名前。これは、テーブル名、コンフィギュレーション キー名、またはテーブルグループ名です。                                                                                                                                                                                                                                                           |
| **パラメーター タイプ**    | 例外パラメーター タイプは、**Table name**、**Configuration key**、または **Table group** です。                                                                                                                                                                                                                                                                                   |
| **ルール**             | このフィールドが選択されていると、このパラメーターを使用して、削除オブジェクトまたはアーカイブ オブジェクト内にルールを作成できません。                                                                                                                                                                                                                                                        |
| **リレーション**         | このフィールドが選択されていると、このパラメーターを使用して、削除オブジェクトまたはアーカイブ オブジェクト内にリレーションを作成できません。                                                                                                                                                                                                                                                    |
| **削除検出**   | このフィールドが選択されると、このパラメーターからの任意のテーブルを、新しい削除オブジェクト内の関連テーブルまたは子テーブルとして含めることはできません。 検出プロセスは、階層リレーションシップ ツリーを生成するときに例外パラメーターの一部であるすべてのテーブルを無視します。 パラメータを子テーブルとして使用する既存の削除オブジェクトは、引き続き正常に機能します。     |
| **ドライバー テーブル**      | このフィールドが選択されていると、このパラメーターからの任意のテーブルを、削除オブジェクトまたはアーカイブ オブジェクト内のドライバー テーブルとして使用できません。                                                                                                                                                                                                                                          |
| **アーカイブの検出** | このフィールドが選択されていると、このパラメーターからの任意のテーブルを、新しいアーカイブ オブジェクト内の関連テーブルまたは子テーブルとして含めることはできません。 検出プロセスは、階層リレーションシップ ツリーを生成するときに例外パラメーターの一部であるすべてのテーブルを無視します。 パラメータを子テーブルとして使用する既存のアーカイブ オブジェクトは、引き続き正常に機能します。 |


#### <a name="fields-search-pane"></a>フィールド (検索ウィンドウ)

| フィールド              | 説明                                                                                                                                  |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| **パラメーター タイプ** | このフィールドは、データ グリッドをフィルター処理するために使用されます。 データ グリッドは、選択した値に基づいて自動的にフィルタリングされます。 既定値はすべてです。 |
| **パラメーター名** | 検索値を入力します。                                                                                                                      |


#### <a name="fields-save-or-update-exception-parameters-pane"></a>フィールド (保存または更新例外パラメーター ウィンドウ)

| フィールド                 | 説明                                                                                                                                                                                                                         |
|-----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **パラメーター タイプ**    | 新しいパラメーターを追加するときは、このリストからパラメーターの型を選択します。                                                                                                                                                              |
| **パラメーター名**    | 新しいパラメーターを追加するときは、このリストからパラメーター名を選択します。                                                                                                                                                              |
| **ルール**             | アーカイブ オブジェクトまたは削除オブジェクトでルールを作成するために、このパラメーターに属するテーブルを使用することはできません。 詳細については、前のセクションの、**例外パラメーター**ウィンドウのフィールドの説明を参照してください。          |
| **リレーション**         | アーカイブ オブジェクトまたは削除オブジェクトで関係を作成するために、このパラメーターに属するテーブルを使用することはできません。 詳細については、前のセクションの、**例外パラメーター**ウィンドウのフィールドの説明を参照してください。      |
| **削除検出**   | 削除オブジェクトの検出プロセスでは、このパラメータに属するテーブルを使用することはできません。 詳細については、前のセクションの、**例外パラメーター**ウィンドウのフィールドの説明を参照してください。                      |
| **ドライバー テーブル**      | このパラメーターに属するテーブルを、アーカイブ オブジェクトまたは削除オブジェクトを作成するドライバー テーブルとして使用することはできません。 詳細については、前のセクションの、**例外パラメーター**ウィンドウのフィールドの説明を参照してください。 |
| **アーカイブの検出** | アーカイブ オブジェクトの検出プロセスでは、このパラメータに属するテーブルを使用することはできません。 詳細については、前のセクションの、**例外パラメーター**ウィンドウのフィールドの説明を参照してください。                   |

## <a name="framework-options"></a>フレームワーク オプション
このコマンドを使用すると、傾向分析で使用される最小および最大のデータベース分析スナップショットなど、IDMF のオプションを構成できます。 ツールバーで、**管理** &gt; **フレームワーク オプション**をクリックして、IDMF のコンフィギュレーション オプションを操作します。
### <a name="navigation-of-the-framework-options-workspace"></a>フレームワーク オプション ワークスペースのナビゲーション

次のテーブルで、**フレームワーク オプション** ワークスペースのコントロールについて説明します。

#### <a name="panes"></a>ウィンドウ

| ウィンドウ                    | 説明                                                            |
|-------------------------|------------------------------------------------------------------------|
| **フレームワーク オプション**   | IDMF のコンフィギュレーション オプションを提供します。                               |
| **関連情報** | 選択したコンフィギュレーション オプションの追加情報を提供します。 |


#### <a name="fields-framework-options-pane-database-analysis-options-group"></a>フィールド (フレームワーク オプション ウィンドウ、データベース分析オプション グループ)

| フィールド                                                     | 説明                                                                                                                                                                      |
|-----------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **インデックス分析に必要なスナップショットの数**       | インデックス統計の意味のある分析に必要なスナップショットの最小数。 既定値は 5 です。                                                                    |
| **トレンド グラフに必要なスナップショットの最小数** | トレンド解析に必要なスナップショットの最小数。 既定は 2 で、この値を小さくすることはできません。                                                               |
| **トレンド グラフに許可されるスナップショットの最大数**  | トレンド解析に必要なスナップショットの最大数。 既定値は 10 です。 トレンド分析の最大スナップショット数を設定するには、2 から 10 の数値を入力します。 |

#### <a name="fields-framework-options-pane-other-configuration-options-group"></a>フィールド (フレームワーク オプション ウィンドウ、他の構成オプション グループ)

| フィールド                                         | 説明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|-----------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **行ごとの関連するアーカイブ オブジェクトの数** | **コンフィギュレーション** ワークスペースに、行ごとに表示される関連するアーカイブ オブジェクトの数。 既定値は 6 です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **テーブル行数**                           | 行数のしきい値。 既定値は 500,000 です。 アーカイブ オブジェクトは右上隅に「x」で構成されているしきい値より小さい行数で各テーブルが強調表示されます。 強調表示したテーブルをマスター データ テーブルとして構成してから、それをリレーションシップ ツリーから削除することができます。 マスタ データ テーブルはコピーされ、アーカイブされません。                                                                                                                                                                                                    |
| **テーブル サイズ**                                | テーブル サイズのしきい値。 既定値は 512,000 (MB) です。 アーカイブ オブジェクトは右上隅に「x」でしきい値より小さいサイズの各テーブルが強調表示されます。 強調表示したテーブルをマスター データ テーブルとして構成してから、それをリレーションシップ ツリーから削除することができます。 マスタ データ テーブルはコピーされ、アーカイブされません。 このフィールドに 0 以外の値となるサイズを入力し、次に隣接するリストから値を選択し、サイズをメガバイト、キロバイト、またはギガバイト単位で指定します。 リストの既定値は、メガバイト (MB) です。 |

#### <a name="fields-framework-options-pane-status-display"></a>フィールド (フレームワーク オプション ウィンドウ、状態の表示)

| フィールド                                | 説明                                                                                                                                                                                                                                                             |
|--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **以前のステータスの詳細を表示します** | このフィールドでは、ステータス詳細が**状態**ワークスペースに表示される期間を選択できます。 既定値は 1 週です。 この値を変更するには、このフィールドに 0 以外の数値を入力し、隣接する一覧から日、週、または月を選択します。 |

#### <a name="fields-framework-options-pane-logging-group"></a>フィールド (フレームワーク オプション ウィンドウ、ログ グループ)

<table>

<thead>
<tr class="header">
<th>フィールド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><span class="ui">追跡レベル</span></strong></td>
<td>追跡レベルをリストから選択します。 重大なエラーのみを記録するには、<strong><span class="ui">最小限</span></strong> を選択します。 <strong><span class="ui">詳細</span></strong>を選択し、情報イベントを含むすべてのイベントを記録します。 イベントのログ機能を停止するには、<strong><span class="ui">なし</span></strong> を選択します。 <strong><span class="ui">Verbose</span></strong> を選択すると、マスターデータの同期と分析のスナップショットタスクにより、<strong><span class="ui">Job status</span></strong> ペインにある <span class="ui">SSIS trace</span> フィールドのハイパーリンクが提供されます。 <strong><span class="ui">ステータス</span></strong> メニューを使用して、<strong><span class="ui">ジョブの状態</span></strong> ウィンドウでタスクを探します。 <strong><span class="ui">SSIS トレース</span></strong> フィールドのハイパーリンクをクリックし、トレース出力を表示します。
<div class="alert">
<table>
<thead>
<tr class="header">
<th><strong>メモ</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><span class="ui">SSIS トレース</span></strong> フィールドは、トレース レベル <strong><span class="ui">詳細</span></strong> を選択した場合にのみ <strong>ステータス</strong> ワークスペースで利用可能になります。</td>
</tr>
</tbody>
</table>
</div></td>
</tr>
<tr class="even">
<td><strong><span class="ui">SQL Server の統合サービス (SSIS) トレース ログの更新頻度</span></strong></td>
<td>Microsoft SQL Server Integration Services (SSIS) トレース出力がリフレッシュされる頻度 (ミリ秒単位)。 既定値は <span class="ui">1000</span> です。</td>
</tr>
</tbody>
</table>

#### <a name="fields-framework-options-pane-threading-options-group"></a>フィールド (フレームワーク オプション ウィンドウ、スレッド オプション グループ)

| フィールド                                    | 説明                                                                                                                                                                                                                                                                  |
|------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **スケジュールされたタスクのスレッドを有効にします。** | **はい** を選択し、タスクを処理するときに複数のスレッドの使用を有効にします。 IDMF でのスレッド化は、依存関係のために完全に並列化されません。 たとえば、テーブルがレベルに 2 回一覧表示されている場合、各インスタンスは競合や競合状態を回避するためにシリアルで処理されます。 |
| **スレッドの最大数**            | IDMF を実行しているコンピューターで、プロセッサの数を超えるスレッドの最大数を設定します。                                                                                                                                                                       |
| **ロックのエスカレーションを無効化**              | 処理時間を短縮するため、メンテナンス ウィンドウ中に実行している場合は、実稼働環境でアーカイブするときはロック エスカレーションを無効にし、アーカイブ バッチ サイズに小さい値 (4000以下) を設定することをお勧めします。                                      |
| **削除のバッチ サイズ**                 | バッチに含まれる行の数。                                                                                                                                                                                                                                        |
| **アーカイブのバッチ サイズ**               | バッチに含まれる行の数。                                                                                                                                                                                                                                        |

#### <a name="fields-related-information-pane"></a>フィールド (関連情報ウィンドウ)

| フィールド          | 説明                                                                      |
|----------------|----------------------------------------------------------------------------------|
| **(無題)** | このペインには、このワークスペース内の選択したフィールドに関する関連情報が表示されます。 |

## <a name="application-health-check"></a>アプリケーションの正常性チェック
このコマンドを使用すると、選択したモジュールからアプリケーション稼働状態情報を取得するために使用されるクエリを操作できます。 既存のクエリを表示および変更するか、新しいクエリを作成できます。 ツールバーで、**管理** &gt; **アプリケーションの正常性チェック**をクリックして、**アプリケーションの正常性チェック クエリ** ワークスペースを操作します。

### <a name="navigation-of-the-application-health-check-queries-workspace"></a>アプリケーションの正常性チェック クエリ ワークスペースのナビゲーション

次のテーブルに、**アプリケーションの正常性チェック クエリ** ワークスペースのコントロールについて説明します。

#### <a name="panes"></a>ウィンドウ

| ウィンドウ                                    | 説明                                                                                                                                                     |
|-----------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **アプリケーションの正常性チェック クエリ**    | ツリー ビューですべての正常性チェック クエリとそれらのデータ ソースを一覧表示します。                                                                                       |
| **その他の正常性チェック情報** | 選択したクエリの追加情報を提供します。 たとえば、このウィンドウは、クエリの生成時に、SQL ステートメントを一覧表示します。                               |
| **メッセージ**                             | SQL クエリの生成やクエリの保存コマンドなどからのエラー メッセージなど、エラー メッセージを提供します。                                                         |
| **テーブル ディクショナリ**                    | Microsoft Dynamics AX 運用データベースからテーブルとそのフィールドを記載したツリー ビューを提供します。                                                        |
| **プロパティ**                          | クエリのプロパティを表示または変更します。 クエリ名などの、一部のプロパティを変更することができます。 フィールド名などの、他のプロパティのみを表示することができます。 |


#### <a name="buttons-application-health-check-queries-pane"></a>ボタン (アプリケーションの正常性チェック クエリ ウィンドウ)

<table>
<thead>
<tr class="header">
<th>ボタン</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><span class="ui">クエリの検証</span></strong></td>
<td><strong><span class="ui">クエリの評価</span></strong> ボタンは、最初にアプリケーションを起動したときにのみ使用できます。 無効なクエリは、メタデータの不一致または不適切なセキュリティ キーのいずれかによって発生します。 <strong><span class="ui">クエリ</span></strong> ノードを展開するとき、無効なクエリは赤色で表示されます。 無効なクエリはすべてタスクから外されるため、アプリケーションの正常性チェック タスクを作成する前に、クエリを検証する必要があります。 クエリを検証するには、<strong><span class="ui">クエリを評価</span></strong> をクリックし、検証が完了するまで待ちます。 <strong><span class="ui">クエリ</span></strong> ノードをスクロールし、すべてのクエリが黒で表示されていることを確認します。</td>
</tr>
<tr class="even">
<td><strong><span class="ui">検索</span></strong></td>
<td><strong>正常性チェックのクエリ検索</strong>ウィンドウを開きます。 <strong>正常性チェックのクエリ検索</strong>ウィンドウで、これらの手順に従います。
<ol>
<li><strong><span class="ui">検索</span></strong>リストから、<strong><span class="ui">クエリ名</span></strong>または<strong><span class="ui">テーブル名</span></strong>を選択します。</li>
<li><strong><span class="ui">含む</span></strong>テキスト ボックスに、検索テキストを入力します。 アスタリスク (<em>) をワイルドカード文字としてテキストの前後で使用することができます。 たとえば、<span class="ui"></em>販売</span>、<span class="ui">販売<em></span>、または<span class="ui"></em>販売 *</span>を検索することができます。</li>
<li><strong><span class="ui">今すぐ検索</span></strong>をクリックし、検索を開始します。 手順 1 での選択に応じて、IDMF はテーブル名またはクエリ名に一致する値を検索します。 <strong><span class="ui">クエリ名</span>データ グリッド</strong> には、一致の結果が表示されます。</li>
<li>結果セットから利息のクエリをダブルクリックします。 <strong>正常性チェック クエリ検索</strong> ウィンドウが閉じ、選択した内容に一致するクエリ ノードが表示されます。</li>
</ol></td>
</tr>
</tbody>
</table>

#### <a name="fields"></a>フィールド

<table>
<thead>
<tr class="header">
<th>フィールド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><span class="ui">クエリ</span></strong></td>
<td>クエリのデータ ソースで作業するには、<strong><span class="ui">クエリ</span></strong> ノードを展開します。 次のコマンドを操作するクエリを右クリックします。
<ul>
<li><strong><span class="ui">SQL クエリの生成</span></strong> - クエリを生成し、<span class="ui"><strong>追加の正常性チェック</strong>情報</span>ウィンドウで表示します。 保存前にクエリを生成する必要があります。</li>
<li><strong><span class="ui">クエリを保存</span></strong> - クエリをデータベースに保存します。 保存操作の状態とエラーは、<strong><span class="ui">メッセージ</span></strong> ウィンドウに表示されます。</li>
<li><strong><span class="ui">クエリを無効にする</span></strong> - このコマンドは、有効になっており、すでに保存されているクエリを選択した場合に使用できます。 選択したクエリを無効にし、赤色で表示します。 無効なクエリは、アプリケーションの正常性チェック タスクでは無視され、アプリケーションの正常性チェック分析に表示されません。</li>
<li><strong><span class="ui">クエリを削除</span></strong> - このコマンドは保存されていない新しいクエリで使用できます。 新しく作成されたクエリを右クリックし、<strong><span class="ui">削除クエリ</span></strong> を選択してクエリを削除します。</li>
<li><strong><span class="ui">クエリを有効にする</span></strong> - このコマンドは、無効にされたクエリを選択した場合に使用できます。 クエリを有効にし、黒色で表示します。 有効なクエリは、正常性チェックのタスクによって実行され、正常性チェックの分析に表示されます。</li>
</ul></td>
</tr>
<tr class="even">
<td><strong><span class="ui">テーブル ディクショナリ</span></strong></td>
<td>生産データベースのテーブルを表示するには、<span class="ui">T<strong> 可能なディクショナリ</strong></span>ノードを展開します。</td>
</tr>
<tr class="odd">
<td><strong>プロパティ ウィンドウ内のフィールド</strong></td>
<td><strong><span class="ui">プロパティ</span></strong> ウィンドウのフィールドは、<strong><span class="ui">クエリ</span></strong> ノードでの選択に応じて変更されます。</td>
</tr>
</tbody>
</table>

### <a name="walkthrough-create-a-new-query"></a>チュートリアル: 新しいクエリの作成

新しいクエリを作成するには、これらの手順に従います。
1.  **管理** &gt; **アプリケーション健康チェック**をクリックし、**アプリケーションの正常性チェック クエリ** ワークスペースを開きます。
2.  **アプリケーション正常性チェック クエリ** ウィンドウで、**クエリ** ノードを右クリックしてから**新しいクエリ**をクリックします。
3.  クエリの名前は **Query\_nnn** で、「nnn」は数を表します。 たとえば、クエリ名は、クエリ\_70 である可能性があります。
4.  新しく作成したクエリをクリックします。 **プロパティ** ウィンドウで**名前**フィールドをクリックして、クエリの適切な名前を入力します。 このチュートリアルでは、**名前**フィールドで **SalesTable クエリ**を入力します。 名前を入力した後、**名前**フィールドの外をクリックし、名前が**クエリ** ノードで **SalesTable クエリ**に変更されたことを確認します。
5.  **SalesTable クエリ**を展開し、**データ ソース**を右クリックし、その後**新しいデータ ソース**をクリックします。
6.  既定では、新しいデータ ソースは**テーブル ディクショナリ** ウィンドウで最初の表です。 データソース名は **Address(Address)** で、**Address** はデータソースの名前で、**(Address)** はデータソースとして使用されているデータベー テーブルの名前です。
7.  **クエリ** &gt; **SalesTable クエリ**&gt;**データ ソース** ノードで、データ ソースの**アドレス (アドレス)** をクリックします。
8.  **プロパティ** ウィンドウで**名前**フィールドをクリックして、データ ソースの適切な名前を入力します。 このチュートリアルでは、 **名前**フィールドで **SalesTable DS** をタイプします。
9.  **テーブル**一覧をクリックします。 **SalesTable** を入力または移動して、リストから **SalesTable** を選択します。
10. **アプリケーション正常性チェック クエリ** ウィンドウで、**クエリ** &gt; **SalesTable クエリ** &gt; **データ ソース**をクリックして、データ ソースが **SalesTable DS(SalesTable)** になったことを確認します。
11. **SalesTable クエリ** を右クリックし**SQL クエリの生成**をクリックします。 **追加ヘルス チェック** 情報ウィンドウで SQL ステートメントを確認します。
12. **SalesTable クエリ** を右クリックし**クエリの保存** をクリックします。
13. **モジュールの選択**ダイアログ ボックスで、リストから **AR** を選択して **OK** をクリックします。
14. **OK** をクリックして続行します。

## <a name="export-to-excel"></a>Excel にエクスポート
このコマンドを使用すると、選択した情報 (マスター データ テーブルなど) をMicrosoft Excel にエクスポートできます。 エクスポートするには、エクスポート機能を有効にする情報をアクティブなウィンドウで選択し、ツールバーの **Excelにエクスポート** をクリックします。

## <a name="master-data-tables"></a>マスター データ テーブル
このコマンドを使用すると、選択したテーブルをマスター データ テーブルとして分類できます。 マスター データ同期タスクは、生産データベースからアーカイブ データベースにマスター データ テーブルをコピーします。

> [!WARNING]
> マスタ データ テーブルには、アーカイブ オブジェクトの一部になると、IDMF はマスタ データ テーブルを無効にし、それを複製せずにアーカイブします。

ツールバーで、**管理** &gt; **マスター データ テーブル**クリックして、**マスター データ テーブル**ワークスペースを操作します。

### <a name="navigation-of-the-master-data-tables-workspace"></a>マスター データ テーブル ワークスペースのナビゲーション

次のテーブルで、**マスター データ テーブル** ワークスペースのコントロールについて説明します。

#### <a name="tabs"></a>タブ

| タブ                               | 説明                                                                                                                                                                                                                                                                                                         |
|-----------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **マスター テーブル**                 | **グループ**、**メイン**、**参照**、または**パラメーター**の **TableGroup** 値を持つテーブルの一覧。                                                                                                                                                                                                               |
| **推奨テーブル**            | **その他**、**トランザクション**、**TransactionLine**、**TransactionHeader**、**ワークシート**、**WorksheetHeader**、または **WorksheetLine** の **TableGroup** 値を持つテーブルの一覧。 **TableGroup** の値にかかわらず、データサイズまたは行数に基づく上位 100 のテーブルはこの一覧に含まれません。 |
| **システムおよびカスタム ユーザー テーブル** | アプリケーション オブジェクト ツリー (AOT) に表示されていないテーブルの一覧。                                                                                                                                                                                                                                         |

#### <a name="buttons"></a>ボタン

| ボタン     | 説明                                       |
|------------|---------------------------------------------------|
| **保存**   | 一覧とデータベースに変更を保存します。 |
| **クリア**  | 検索基準をクリアします。                        |
| **検索** | データ グリッドで、検索を実行します。              |


#### <a name="fields"></a>フィールド

| フィールド                                | 説明                                                                                                                                                     |
|--------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **テーブル名**                       | テーブルの名前。                                                                                                                                          |
| **インデックス名**                       | インデックスの名前。                                                                                                                                          |
| **インデックス フィールド**                     | インデックスの作成に使用されるフィールド。                                                                                                                   |
| **テーブル グループ**                      | テーブルの **TableGroup** プロパティ。                                                                                                                       |
| **行**                             | テーブルの行数。                                                                                                                                |
| **更新者**                      | 最後に、このテーブルを選択または選択解除します。                                                                                                                 |
| **検索一覧 (無題)**           | データ グリッドの検索に使用するフィールドを一覧から選択します。 既定値は **すべて** です。                                                        |
| **検索条件の一覧 (無題)** | 検索条件をリストから選択します。 既定値は **=** です。 選択できる値は、検索リストから選択したフィールドによって異なります。           |
| **検索する値 (無題)**          | このボックスに検索する値を入力します。 ワイルドカード文字、\* を使用できます。 たとえば、\*販売、販売\*、または \*販売\*を検索することができます。 |


### <a name="working-with-master-tables"></a>マスタ テーブルでの作業

**マスター テーブル** タブは、**TableGroup** 値が **Group**、**Main**、**Reference**、または **Parameter** のすべてのテーブルを一覧表示します。 既定では、マスター データ テーブル リストのすべてのテーブルが選択されます。 実行時に、マスター データの同期タスクはターゲット データベースとしてアーカイブ データベースを使用し、ソース データベースとして生産データベースを使用することにより、このリスト内の選択したすべてのテーブルを同期します。 テーブルのチェック ボックスをオフにして、テーブルの選択を解除します。 選択されていないテーブルは、マスター データ テーブルとは見なされず、マスター データ テーブルの同期タスクの実行時に同期されません。 インデックスが **RecId** 列で定義されているテーブルは、赤色で表示されます。 これらの表を評価して別のインデックスを選択すると、同期のパフォーマンスが向上するかどうかを判断します。 別のインデックスを選択するには、次のようにします。
1.  グリッドのテーブルにある**インデックス名**をダブルクリックします。
2.  他のインデックスがある場合、一覧から別のインデックスを選択します。
3.  **保存** をクリックします。

特定のテーブルを検索するには、ウィンドウの上部にある検索ユーティリティを使用します。 フィールドを選択して、検索条件を選択し、検索値を提供して **検索** をクリックします。 検索ユーティリティはデータ グリッドをフィルタリングして一致するレコードを表示します。 ワイルドカード文字、\* を検索値に使用することができます。 検索基準をクリアするためには、**クリア**をクリックします。 **検索** ボックスの一覧から **すべて** を選択し、**検索** をクリックしてすべてのテーブルを表示します。

### <a name="working-with-the-recommended-tables"></a>推奨されるテーブルでの作業

推奨されるテーブルは通常 **TableGroup** タイプ **Miscellaneous**、**Transaction**、**TransactionLine**、**TransactionHeader**、**Worksheet**、**WorkSheetHeader**、**WorksheetLine** に属します。 推奨テーブル リストは、サイズまたは行数に基づいて、データベース内の上位 100 個のテーブルを除外します。 既定では、推奨テーブル リストのテーブルは選択されません。 推奨されるテーブルの一覧を確認し、マスター データ テーブルとして扱う必要があるテーブルを選択します。 テーブルを選択するには、テーブルの横にあるチェック ボックスをオンにします。 同期タスクは、**推奨テーブル** タブの選択したすべてのテーブルをマスター テーブルと同じものとして扱い、実稼働データベースからアーカイブ データベースにデータをコピーします。 データ グリッドには、**RECID** フィールドに基づくインデックスのあるテーブルが赤で表示されます。 テーブルに複数のインデックスがある場合、**RECID** 以外のフィールドをベースに固有のキーを持つ別のインデックスを選択できます。 インデックスを変更するには、インデックス名の列をダブルクリックし、一覧にそのインデックスがあれば別のインデックスを選択します。 検索とフィルターの機能は、**マスターテーブル** タブと同じように機能します。詳細については、前のセクションを参照してください。

### <a name="working-with-system-tables-and-custom-user-tables"></a>システム テーブルおよびカスタム ユーザー テーブルでの作業

Microsoft Dynamics AX アプリケーションは、Application Object Server (AOS) の初期化およびメタデータの維持のために特定のテーブルを使用します。 これらのテーブルは Microsoft Dynamics AX データベースの一部ですが、アプリケーション オブジェクト ツリー (AOT) には表示されません。 IDMF では、これらのテーブルのシステム テーブルが考慮されます。 ただし、統合目的で、Microsoft Dynamics AX データベースにカスタム テーブルを作成した可能性があります。 これらのテーブルは、AOT には表示されません。 IDMF では、システム テーブルとカスタム ユーザー テーブル間は区別されません。 IDMF は、**システムおよびカスタム ユーザー テーブル** タブ上のすべてのシステム テーブルとカスタム ユーザー テーブルを一覧表示し、テーブルを確認し、すべてのシステム テーブルがデータ同期用に選択されていることを確認します。 アーカイブ データベースで必要ない任意のカスタム ユーザー テーブルは選択解除することができます。 このリストには、**Worksheet**、**WorkSheetHeader**、**WorkSheetLine**、**Transaction**、**TransactionLine**、**TransactionHeader**、または**Miscellaneous** の **TableGroup** プロパティを持つ、行数に基づく上位 100 個のテーブルも含まれています。 ただし、これらのテーブルは既定では選択されません。 これらのテーブルをアーカイブ データベースと同期させる必要があるかどうかを判断します。

> [!WARNING]
> アーカイブされたトランザクションを表示するには、アーカイブ データベースに接続する Application Object Server (AOS) を構成する必要があります。 システム テーブルが正しくレプリケートされていない場合は、AOS はアーカイブ データベースに接続できません。 ユーザーにはアーカイブ データベースへの読み取りアクセス権のみがあることを確認します。 アーカイブされたトランザクションを変更すると、データの不一致が発生します。

## <a name="database-maintenance"></a>データベースのメンテナンス
お使いのデータベースの保守、バックアップ、復元の手順に従って、管理、アーカイブ、生産、生産レプリカの各データベースの保守を行う必要があります。 IDMF で使用されるデータベースの構成、またはジョブをスケジュールするときのデータベースの構成については、次の点を考慮してください。
-   各データベースのデータ ファイルとログ ファイルの場所と初期サイズを決定します。 データベースとログ ファイルの初期サイズが最適なパフォーマンスと将来の拡大に十分であることを確認します。 データベース の詳細については、[Microsoft Dynamics AX のデータベース コンフィギュレーションの計画](http://www.microsoft.com/downloads/details.aspx?FamilyID=ab4cd401-b366-4c1c-9a73-88c945ae8191) および Microsoft Dynamics AX のパフォーマンス チームの [ブログ](http://blogs.msdn.com/axperf/) を参照してください。
-   定期的な保守期間中にセット ベースのアーカイブおよび削除操作をスケジュールし、最適なユーザー エクスペリエンスを維持します。 行ごとの操作は通常のユーザー活動中にスケジュールすることができますが、これらの操作によりユーザーの応答時間が遅くなる可能性があります。
-   いつでも 1 つのアーカイブ タスクのみを実行します。 現在のタスクに予想以上の時間がかかるように見える場合は将来のタスクの開始時間を遅らせるようにしてください。 **スケジュール** メニューを使用して、アーカイブ タスクを処理します。
-   タスクを削除してアーカイブすると、ディスク、プロセッサ、メモリを大量に消費する操作が発生します。

### <a name="restore-recycled-records"></a>リサイクルされたレコードの復元

このセクションでは、削除タスクが成功した後にリサイクルされたレコードを完全に復元する方法について説明します。 成功した削除タスクは、**成功**ステータスで完了しました。 **ステータス** ワークスペースの **トレース** ウィンドウには、削除オブジェクトの各テーブルで再利用されるレコード数が一覧表示されます。 リサイクルされたレコードを実稼働データベースに復元するには、次の手順を実行します。
1.  製品と管理データベースをバックアップします。
2.  ステップ 4 のストアド プロシージャは、実稼働データベースで分散クエリを実行します。 生産データベースから管理データベースにリンクされているサーバーを作成する必要があります。 手順については、[SQL Server 2008 オンライン ブック](http://msdn.microsoft.com/en-us/library/ms190479.aspx) を参照してください。
3.  SQL Server Management Studio で、**新しいクエリ**をクリックします。 SQL エディター ツールバーから生産データベースを選択し、生産データベースに接続します。 インストール パスから**クリーンアップ\_復元\_purge.sql** クエリを開いて実行します。 既定のインストール パスは、C:\Program Files\Microsoft Dynamics AX Intelligent Data Management Framework です。 このクエリは、リサイクルされたレコードの復元と削除に必要な 2 つのストアド プロシージャを作成します。
4.  SQL Server Management Studio で、**新しいクエリ**をクリックします。 SQL エディター ツールバーから管理データベースを選択し、管理データベースに接続します。 次のクエリを実行して **AXScheduleTrace** テーブルから traceid を見つけます。 **ステータス** ウィンドウで、クエリの 'Purge\_task\_name' を削除タスクの名前に置き換えます。 traceid を**結果**ウィンドウからクリップボードまたはメモ帳にコピーします。

        SELECT B.TRACEID AS JOBIDENTIFIER , B.CREATEDDATETIME AS RUNTIME
        FROM AXSCHEDULES A, AXSCHEDULETRACE B 
        WHERE A.SCHID=B.SCHID AND A.SCHEDULENAME = 'Purge_task_name' ORDER BY B.CREATEDDATETIME

5.  SQL Server Management Studio で、**新しいクエリ**をクリックします。 生産データベースに接続します。 クエリ内のパラメーター値を、環境の適切な値と前の手順の traceid に置き換えます。 ストアド プロシージャを実行します。

        EXEC IMPORT_PURGERECORDS @PRODDB = ‘Production database name’,
        @MANAGEMENTSERVER = ‘Management db Server Name’,@MANAGEMENTDB = ‘Management database name’,@JOBIDENTIFIER = ‘Selected TRACEID from Step 3’,
        @AXVERSION = ‘Version‘

6.  クエリで、「バージョン」を Microsoft Dynamics AX のバージョン 2009 の場合は 5.0 に、バージョン 2012 の場合は 6.0 に置き換えます。
7.  復元が正常に行われたことを確認する削除オブジェクトで、テーブルをテストします。

> [!WARNING]
> 削除オブジェクトや削除したレコードの復元を不適切に使用すると、予期しない結果、データベース破損、データベース全体およびアプリケーションの復旧が必要となるアプリケーション ダウンタイムが発生する可能性があります。 実稼働環境で作業する前に、十分に注意を払い、テスト環境でリサイクル戦略を入念にテストする必要があります。

### <a name="delete-recycled-records"></a>リサイクルされたレコードの削除

このセクションでは、削除タスクが成功した後にリサイクルされたレコードを完全に削除する方法について説明します。 成功した削除タスクは、**成功**ステータスで完了しました。 **ステータス** ワークスペースの **トレース** ウィンドウには、削除オブジェクトの各テーブルで再利用されるレコード数が一覧表示されます。 実稼働データベースのリサイクルされたテーブルからレコードを完全に削除するには、次の手順を実行します。
1.  生産と管理データベースをバックアップします。
2.  ストアド プロシージャを作成し、traceid を取得するには、前のセクションの手順 2. と 3. を実行します。
3.  SQL Server Management Studio で、**新しいクエリ**をクリックします。 SQL エディター ツールバーから生産データベースを選択し、生産データベースに接続します。 クエリ内のパラメーター値を、環境の適切な値と前の手順の traceid に置き換えます。 ストアド プロシージャを実行します。

        EXEC  DELETE_PURGERECORDS 
        @MANAGEMENTSERVER = `Server Name’,
        @MANAGEMENTDB= `Management DB’,
        @JOBIDENTIFIER = ‘Selected TRACEID from Step 1’

4.  削除タスクは、削除オブジェクトのリレーションシップ ツリーのテーブルからレコードを削除し、生産データベースの削除テーブルに挿入します。 削除テーブルの命名規則は、nnnn が生産データベース内のテーブルの ID である purge\_nnnn です。 たとえば、**テーブル削除\_343** には、**PurchParm** テーブルから削除されたレコードが含まれます。 **構成** &gt; **削除テンプレート/削除オブジェクト** ワークスペースの**プロパティ** ウィンドウを確認して、削除オブジェクトにあるテーブルのテーブル ID を取得します。 SQL Server Management Studio を起動し、左ウィンドウで運用データベースの **テーブル** ノードに移動します。 手順 1 で使用される traceid のレコードが、**ステータス** ワークスペースの **トレース** ウィンドウにあるテーブルに対応するパージ テーブルに存在しないことを確認します。

予定メンテナンス期間中にこの活動を実行します。 **注意:** これらのレコードは、データベースから完全に削除されます。 実稼働環境で作業する前に、十分に注意を払い、テスト環境でリサイクル戦略を入念にテストする必要があります。

