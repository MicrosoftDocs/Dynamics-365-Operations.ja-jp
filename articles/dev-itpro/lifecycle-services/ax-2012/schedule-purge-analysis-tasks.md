---
title: Intelligent Data Management Framework の削除および分析タスクをスケジュール
description: このトピックでは、Microsoft Dynamics AX インテリジェント データ管理フレームワーク (IDMF) のスケジュール メニューのオプションとその使用方法について説明します。
author: kfend
manager: AnnBe
ms.date: 11/14/2017
ms.topic: article
ms.prod: dynamics-ax-2012
ms.service: ''
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: sericks
ms.search.scope: AX 2012
ms.custom: 18631
ms.assetid: 1ecac46c-29d5-4e5b-aa39-3daa00956820
ms.search.region: Global
ms.author: kfend
ms.search.validFrom: ''
ms.dyn365.ops.version: 2012
ms.openlocfilehash: 5ead8731c4df8fbcbf66ec97cbb92f3d397141ac
ms.sourcegitcommit: 16bfa0fd08feec1647829630401ce62ce2ffa1a4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/02/2019
ms.locfileid: "1850529"
---
# <a name="schedule-intelligent-data-management-framework-purge-and-analysis-tasks"></a>Intelligent Data Management Framework の削除および分析タスクをスケジュール

[!include [banner](../../includes/banner.md)]

このトピックでは、Microsoft Dynamics AX インテリジェント データ管理フレームワーク (IDMF) のスケジュール メニューのオプションとその使用方法について説明します。

<a name="overview-of-scheduling"></a>スケジューリングの概要
----------------------

**スケジュール** メニューを使用して、タスクをスケジュールします。 IDMF では、次のテーブルに示すように、アプリケーションのさまざまな領域からさまざまなタイプのタスクを作成できます。

<table>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th>タスク タイプ</th>
<th>説明</th>
<th>開始</th>
<th>頻度の既定値</th>
<th>頻度は変更可能です</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>インデックスの最適化</td>
<td>選択したインデックスの最適化を行います。 インデックスを最適化するには、これらの手順に従います。
<ol>
<li><strong><span class="ui">分析</span>メニュー </strong> &gt; <strong><span class="ui">インデックスの管理</span></strong>をクリックします。</li>
<li><strong><span class="ui">断片化インデックス</span></strong>タブで、最適化するインデックスを選択し、<strong><span class="ui">スケジュール</span></strong>をクリックします。</li>
</ol>
- または -
<ol>
<li><strong><span class="ui">分析</span>メニュー </strong> &gt; <strong><span class="ui">分析の詳細</span></strong> &gt; <span class="ui"><strong>インデックス詳細</strong> ウィンドウ </span> &gt; <strong><span class="ui">断片化</span></strong>タブをクリックします。</li>
<li>最適化するインデックスを選択します。</li>
<li><strong><span class="ui">インデックスを最適化する</span></strong>をクリックします。</li>
</ol></td>
<td><strong><span class="ui">分析</span></strong>メニュー</td>
<td>1 回のみ</td>
<td>無</td>
</tr>
<tr class="even">
<td>分析スナップショット</td>
<td>データのサイズ、インデックスのサイズ、およびインデックスの断片化を含む、データベースのスナップショットを作成します。 このタスクは、本番データベースとアーカイブ データベースで使用できます。</td>
<td><strong><span class="ui">スケジュール</span></strong>メニュー</td>
<td></td>
<td>有</td>
</tr>
<tr class="odd">
<td>元帳期間</td>
<td>アプリケーション ヘルス チェック クエリに使用される元帳期間を作成します。 このタスクは、本番用レプリカ データベースを使用します。</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>正常性チェック</td>
<td>キー モジュールから選択した単位の、アプリケーションのスナップショットを作成します。 このタスクは、本番用レプリカ データベースを使用します。</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>メタデータ同期</td>
<td>Microsoft Dynamics AX メタデータに基づいて、データベース オブジェクトを生産データベースからアーカイブ データベースにコピーしますが、データはコピーしません。</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>マスター データ同期</td>
<td>選択したテーブルの生産データベースからアーカイブ データベースにデータをコピーします。</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>削除</td>
<td>削除オブジェクトを使用し、削除オブジェクト内のルールの検証に基づいて、生産データベースからレコードを削除します。</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>アーカイブ</td>
<td>アーカイブ オブジェクトでアーカイブ オブジェクトとルールを使用して、生産データベースからアーカイブ データベースにレコードを移動またはアーカイブします。</td>
<td></td>
<td></td>
<td>無</td>
</tr>
<tr class="odd">
<td>アーカイブを復元</td>
<td>アーカイブ データベースから生産データベースにデータを復元します。</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>再起動</td>
<td>次の失敗したか終了したタスクを再起動します。
<ul>
<li>アーカイブ</li>
<li>アーカイブを復元</li>
<li>タスクを元に戻す</li>
</ul></td>
<td><strong><span class="ui">ステータス</span></strong>&gt;<strong><span class="ui">ジョブ ステータス</span></strong> ウィンドウ</td>
<td></td>
<td>無</td>
</tr>
<tr class="odd">
<td>元に戻す</td>
<td>障害が発生したか、キャンセルされたアーカイブ タスクを元に戻し、アーカイブ タスクを開始する前の状態に生産データベースを戻します。</td>
<td><strong><span class="ui">ステータス</span></strong>&gt;<strong><span class="ui">ジョブ ステータス</span></strong> ウィンドウ</td>
<td></td>
<td>無</td>
</tr>
</tbody>
</table>

## <a name="navigation-of-the-scheduled-tasks-window"></a>スケジュール タスク ウィンドウのナビゲーション
次のテーブルで、スケジュール タスク ウィンドウのコントロールについて説明します。 すべてのタスクはこのウィンドウを使用します。

### <a name="panes"></a>ウィンドウ

| ウィンドウ                    | 説明                                                                                                                                                                                                                                             |
|-------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **スケジュール タスク**     | 作成したタスクの一覧を示します。 非アクティブな現在または将来のタスクを削除するには、そのタスクを選択します。 選択したタスクを右クリックし、**スケジュールの削除** を選択します。 **スケジュールの削除**ダイアログ ボックスで、**はい**をクリックして続行します。 |
| **タスクの詳細**        | スケジュールされたタスクを作成するために必要な情報を入力する領域を提供します。                                                                                                                                                                         |
| **関連情報** | スケジュールされたタスクを作成するための手順の一覧を提供します。                                                                                                                                                                                       |

### 

### <a name="tabs"></a>タブ

| タブ                             | 説明                                                                                                                                  |
|---------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| **一般**                     | タスクの名前および説明を入力または修正できます。                                                                          |
| **削除のルールのコンフィギュレーション**   | 削除オブジェクトに作成されたルールの値を入力できます。 このタブは、削除タスクを作成する場合にのみ使用できます。      |
| **アーカイブのルールのコンフィギュレーション** | アーカイブ オブジェクトに作成されたルールの値を入力できます。 このタブは、アーカイブタスクを作成する場合にのみ使用できます。 |
| **アーカイブ復元のコンフィギュレーション**   | データを復元するために使用するアーカイブ タスクを選択できます。 このタブは、アーカイブ復元タスクを作成する場合にのみ使用できます。       |
| **スケジュール**                    | タスクの頻度、開始日、および開始時刻の入力または選択ができます。                                                         |

### <a name="buttons"></a>ボタン

| ボタン          | 説明                                                                                                                                                                                                        |
|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **保存/更新** | 新しいまたは変更されたタスクを保存します。 保存されたタスクは、**スケジュールされたタスク**ウィンドウで一覧に表示されます。 ラベルは、既存のタスクを選択すると、**更新**に、新しいタスクを追加すると **保存** に変わります。 |
| **キャンセル**      | 追加または編集アクションをキャンセルします。                                                                                                                                                                                      |

### 

### <a name="fields-scheduled-tasks-pane"></a>フィールド (スケジュール タスク ウィンドウ)

| フィールド             | 説明                                                                                                                                    |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------|
| **スケジュール名** | タスクの名前です。                                                                                                                          |
| **タイプ**          | タスクのタイプ。                                                                                                                          |
| **発生**        | タスクの頻度、開始日、および開始時刻。                                                                                         |
| **作成者**    | タスクを作成したユーザーの ID。 既定では、この値はタスクを作成したユーザーのログオン ID であり、この値を変更することはできません。 |
| **説明**   | タスクの説明。                                                                                                                     |

### 

### <a name="fields-task-details-pane"></a>フィールド (タスク詳細ウィンドウ)

#### <a name="general-tab"></a>[全般] タブ

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>フィールド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><span class="ui">名前</span></strong></td>
<td>フィールドにタスク名を入力します。</td>
</tr>
<tr class="even">
<td><strong><span class="ui">説明</span></strong></td>
<td>フィールドにタスクの説明を入力します。</td>
</tr>
<tr class="odd">
<td><strong><span class="ui">作成者の名前</span></strong></td>
<td>既定では、この値は現在ログオンしているユーザーであり、この値を変更することはできません。</td>
</tr>
<tr class="even">
<td><strong><span class="ui">インデックスの物理的な統計</span></strong></td>
<td>このフィールドが選択されると、分析スナップショット タスクは、最適化率などのインデックスの物理的な統計を収集します。 このフィールドは、分析スナップショットを初めて実行するときに既定で選択されます。 このキャプチャはリソースを大量に消費し、運用システムのパフォーマンスに影響します。 したがって、最初のスナップショット後のスナップショットに対しては、フィールドは自動的には選択されません。 再計算インデックスの統計に、フィールドを手動で選択する必要があります。 ユーザーへの影響が最も小さいスナップショットをスケジュール設定します。</td>
</tr>
<tr class="odd">
<td><strong><span class="ui">会社ごとの統計</span></strong></td>
<td>このフィールドが選択されていると、インデックスとデータの統計は、Microsoft Dynamics AX システム内で会社別にグループ化されます。 このフィールドは、分析スナップショットを初めて実行するときに既定で選択されます。 会社別のデータおよびインデックス統計のグループ化は、リソースを大量に消費し、生産システムのパフォーマンスに影響します。 したがって、最初のスナップショット後のスナップショットに対しては、フィールドは自動的には選択されません。 会社別のグループ統計に、フィールドを手動で選択する必要があります。 ユーザーへの影響が最も小さいスナップショットをスケジュール設定します。</td>
</tr>
<tr class="even">
<td><strong><span class="ui">アーカイブ タイプの選択</span></strong></td>
<td>アーカイブ トランザクションが行に基づくかセットに基づくかを示すため、一覧から値を選択します。 <strong><span class="ui">1 行ずつ</span></strong> を選択し、アーカイブ機能の行に基づくトランザクションの単位を作成します。 行ベースのトランザクション単位は、一度にアーカイブ オブジェクトから単一の行をアーカイブします。 同様に、セット ベースのトランザクション単位は、レコード セットとしてアーカイブ オブジェクトからの一致するレコードをすべてアーカイブします。 このリストの既定値は、<strong><span class="ui">セット ベース</span></strong> です。 パフォーマンス向上のために、セットベースのアーカイブ タイプを使用することをお勧めします。
<div class="alert">
<table>
<thead>
<tr class="header">
<th><strong>メモ</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>このフィールドは、アーカイブ タスクでのみ使用できます。</td>
</tr>
</tbody>
</table>
</div></td>
</tr>
<tr class="odd">
<td><strong><span class="ui">スレッド数</span></strong></td>
<td>1 ～ 8 の範囲のマスター データ同期に使用されるスレッドの数を選択します。 1 より大きい番号を選択すると、各スレッドは一定数のテーブルを処理します。
<div class="alert">
<table>
<thead>
<tr class="header">
<th><strong>メモ</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>このフィールドは、マスター データの同期タスクに対してのみ使用できます。</td>
</tr>
</tbody>
</table>
</div></td>
</tr>
</tbody>
</table>

#### 

#### <a name="schedule-tab"></a>スケジュール タブ

| フィールド                    | 説明                                                                                                                                                             |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **頻度**            | リストから頻度を選択します。                                                                                                                                       |
| **開始日**           | 日付管理で開始日を選択するか入力します。                                                                                                                     |
| **開始時刻**           | 時間、分、および午前/午後のリストを使用して時刻を選択するか入力します。                                                                                                    |
| **毎日**            | 毎日のスケジュールを選択します。 このフィールドは、毎日の頻度でのみ使用できます。                                                                                          |
| **&lt;n&gt; 日ごと** | タスクの繰り返しの間の日数を選択します。 たとえば、10 日ごとにタスクを繰り返すよう 10 を選択します。 このフィールドは、毎日の頻度でのみ使用できます。 |
| **日数の選択**          | 週単位のタスクで定期的なアイテムの曜日を選択します。 このフィールドは、毎週の頻度でのみ使用できます。                                                                  |
| **月数の選択**        | 月単位のタスクで定期的なアイテムの月を選択します。 このフィールドは、毎月の頻度でのみ使用できます。                                                              |
| **日**                  | 月単位のタスクで定期的なアイテムの日付を選択します。 このフィールドは、毎月の頻度でのみ使用できます。                                                                |

#### 

#### <a name="configure-rules-for-purge-tab-only-appears-when-you-create-a-purge-task"></a>削除のルール タブのコンフィギュレーション (削除タスクを作成するときにのみ表示されます)

| フィールド            | 説明                                                               |
|------------------|---------------------------------------------------------------------------|
| **削除オブジェクト** | 削除タスクで使用する削除オブジェクトを選択します。           |
| **テーブル**        | ルールで使用されるテーブルの名前。                           |
| **フィールド**        | ルールで使用されるフィールドの名前。                           |
| **演算子**     | このルールで使用される条件。                                   |
| **値**        | ルールの値を選択または更新します。 既存の値でルールを検証します。 |

#### 

#### <a name="configure-rules-for-archive-tab-only-appears-when-you-create-an-archive-task"></a>アーカイブ ルール タブのコンフィギュレーション (アーカイブ タスクを作成するときにのみ表示されます)

| フィールド              | 説明                                                               |
|--------------------|---------------------------------------------------------------------------|
| **アーカイブ オブジェクト** | アーカイブ タスクで使用するアーカイブ オブジェクトを選択します。       |
| **テーブル**          | ルールで使用されるテーブルの名前。                           |
| **フィールド**          | ルールで使用されるフィールドの名前。                           |
| **演算子**       | このルールで使用される条件。                                   |
| **値**          | ルールの値を選択または更新します。 既存の値でルールを検証します。 |

#### 

#### <a name="configure-archive-restore-tab-only-appears-when-you-create-a-restore-archive-task"></a>アーカイブの復元タブのコンフィギュレーション (アーカイブ復元タスクを作成するときにのみ表示されます)

| フィールド              | 説明                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **復元タイプ**   | 復元するタスクに適用するフィルターを選択します。 **その他のスケジュール** を選択すると、データ グリッドに正常にアーカイブされたすべてのタスクの名前が表示されます。                                                                                                                                                                                                                                  |
| **スケジュール**       | アーカイブ タスクの名前。 復元するタスクを選択します。 複数のタスクを選択することができます。 先行するタスクを選択すると、より最近のタスクが自動的に選択されます。 たとえば、復元の 2014 を選択する場合、2013 および 2012 は自動で復元用に選択されます。 Microsoft Dynamics AX アプリケーションでは、トランザクションの整合性のために最近の期間のデータが必要です。 |
| **アーカイブの日付**   | アーカイブ タスクが実行された日付。                                                                                                                                                                                                                                                                                                                                                                          |
| **アーカイブ オブジェクト** | アーカイブ オブジェクトの名前。                                                                                                                                                                                                                                                                                                                                                                                  |

## <a name="production-database"></a>生産データベース
このコマンドを使用すると、生産データベースの新しいデータベース分析スナップショット タスクを作成できます。 データベース スナップショット タスクは、本番データベースに対してクエリを実行して、データ サイズ、インデックス サイズ、テーブル サイズ、データおよびインデックスの使用率などのデータベース統計を取得します。 IDMF を使用するには、データベース分析のスナップショットが少なくとも 1 つ必要です。 定期的なデータベース スナップショットをスケジュールして、生産データベースの傾向解析を作成することができます。 トレンド分析では、少なくとも 2 つのデータベース分析スナップショットが必要で、最新のスナップショットを 10 個まで処理します。 ツールバーで、**生産データベース**をクリックして、データベース分析のスケジュールされたタスクを作成します。 必要な情報を**スケジュール タスク**ウィンドウに入力し、**保存**をクリックします。 この情報は、**分析**メニューの分析ダッシュボード、分析の詳細、および生産データベースのパフォーマンス ダッシュボードで使用されます。

## <a name="archive-database"></a>アーカイブ データベース
このコマンドを使用すると、アーカイブ データベースの新しいデータベース分析スナップショット タスクを作成できます。 データベース スナップショット タスクは、アーカイブ データベースに対してクエリを実行して、データ サイズ、インデックス サイズ、テーブル サイズ、データおよびインデックスの使用率などのデータベース統計を取得します。 これは、オプションのステップです。 この情報は、**分析**メニューのアーカイブ データベースの分析ダッシュボード、分析の詳細、およびパフォーマンス ダッシュボードで使用されます。 アーカイブ データベースの分析ダッシュボードと分析の詳細を利用するには、データベースの分析スナップショットが少なくとも 1 つ必要です。 トレンド分析では、少なくとも 2 つのデータベース分析スナップショットとプロセスを必要とし、最新のスナップショットを 10 個まで処理します。 IDMF では、10 日の最新のスナップショットと動作し、いずれかがある場合、それ以前のものを無視します。 ツールバーで、**アーカイブ データベース**をクリックして、データベース分析のスケジュールされたタスクを作成します。 必要な情報を**スケジュール タスク**ウィンドウに入力し、**保存**をクリックします。

## <a name="ledger-periods"></a>元帳期間
このコマンドを実行すると、稼働状態チェック クエリで会社および年ごとにトランザクション情報を取得および集計するために必要な元帳期間の新しいタスクが作成されます。 正常性チェックのタスクを実行する前に、このタスクを正常に完了させる必要があります。 ツールバーで、**元帳期間**をクリックして、元帳期間のスケジュールされたタスクを作成します。 必要な情報を**スケジュール タスク**ウィンドウに入力し、**保存**をクリックします。 このコマンドは、生産レプリカ データベースで機能します。

## <a name="system-health-check"></a>システムの正常性チェック
このコマンドは、**在庫管理**、**売掛金勘定**、**買掛金勘定**、**総勘定元帳**、Microsoft Dynamics AX アプリケーションの**管理**モジュールを使用します。 これらのクエリは、企業ごとおよび年ごとの各測定の集計を取得します。 この情報が取得される年数は、元帳期間テーブルの情報によって異なります。 測定では、特定の業務プロセスに関する情報を提供します。 たとえば、**在庫管理**モジュールは、**キャンセルされた在庫決済**と呼ばれる基準を提供します。 アプリケーションの状態をチェックするツールを扱うには、アプリケーションの状態をチェックする分析スナップショットが少なくとも 1 つ必要です。 定期的なアプリケーション正常性チェック スナップショットをスケジュールして、アプリケーション正常性の傾向解析を作成することができます。 トレンド分析では、少なくとも 2 つの分析スナップショットが必要で、最新のスナップショットを 10 個まで処理します。 これらのアプリケーション正常性チェッククエリは広範囲であり、オンライン ユーザーの応答時間に悪影響を及ぼします。 したがって、既定では、これらのクエリは、実稼働レプリカ データベースと呼ばれるデータベースで実行されます。 アプリケーションの正常性チェック クエリの精度は、運用レプリカ データベースのアプリケーション データの妥当性によって異なります。 生産レプリカ データベースを生産データベースのできるだけ近くに維持するための同期戦略を作成します。 ツール バーで、**システム正常性チェック**をクリックして、アプリケーション正常性チェック スナップショットのスケジュールされたタスクを作成します。 必要な情報を**スケジュール タスク**ウィンドウに入力し、**保存**をクリックします。 この情報は、**分析** &gt; **稼働状態の表示**コマンドでアプリケーションの稼働状態チェック対策を提供するために使用されます。

> [!WARNING]
> 生産データベースに対してアプリケーションの正常性チェック クエリを実行するアプリケーションを構成することができます。 これらのクエリは Microsoft Dynamics AX アプリケーションの応答時間に悪影響を与えるため、実稼働データベースに対してアプリケーションの正常性チェック クエリを実行しないことをお勧めします。

## <a name="metadata"></a>メタデータ
このコマンドは、生産データベースのメタデータをアーカイブ データベースと同期させます。 メタデータ同期タスクは、データベース オブジェクトを生産データベースからアーカイブ データベースにコピーしますが、データはコピーしません。 マスター データの同期プロセスを実行する前に、このタスクを正常に完了する必要があります。 システム保守期間中または、最小量のアクティビティが Microsoft Dynamics AX アプリケーションで発生したとき、メタデータ同期タスクを実行します。 ビュー、関数、ストアド プロシージャなどのオブジェクトのコピー中に、メタデータ同期タスクが失敗することがあります。 このエラーは、これらのオブジェクトの無効なコードによって作成が妨げられたり、循環的な依存関係が原因で発生している可能性があります。 成功したタスクは、**成功**ステータスで完了しました。 テーブル、インデックス、および主キーなどのデータベース オブジェクトをコピーするタスクが失敗すると、ジョブに**失敗**ステータスが表示されます。 **ステータス** メニューをクリックし、エラーの原因となった正確なステップを判断するために**トレース** ウィンドウの**サブタスク**一覧をチェックしてください。 IDMF は、インストール場所のこれらのサブタスクのトレース ファイルを作成します。 各トレース・ファイルは、 **CreateColumn.txt**、**CreateIndex.txt** および **DropTables.txt** などの特定のサブタスクにマップされます。 エラーの原因を決定するために障害が発生したサブタスクに対応するトレース ファイルを確認します。 トラブルシューティングし、ジョブにエラーが発生する原因の問題を手動で解決する必要があります。 アーカイブ フィーチャーを使用するには、メタデータの同期タスクを正常に完了する必要があります。 最初のメタデータ同期タスクが正常に完了したら、実稼働データベースとアーカイブ データベース間のメタデータ同期を維持する必要があります。 最初のメタデータ同期タスク後、もし生産データベース スキーマに変更がある場合、メタデータ同期タスクを実行して、両方のデータベースを同期化させておく必要があります。 ツールバーで、**メタデータ**をクリックして、メタデータの同期のスケジュールされたタスクを作成します。 必要な情報を**スケジュール タスク**ウィンドウに入力し、**保存**をクリックします。

## <a name="master-data"></a>マスター データ
このコマンドは、生産データベースのマスター データ テーブルをアーカイブ データベースと同期させます。 メタデータ同期タスクは、**管理** メニューでマスター テーブルとしてコンフィギュレーションしたすべてのテーブルをコピーします。 メタデータの同期タスクは、マスター データの同期タスクを実行する前に、少なくとも一度正常に完了させる必要があります。 実稼働データベース内でメタデータが変更されるときはいつでも、マスタ データの同期タスクを実行する前に、メタデータ同期タスクを正常に完了する必要があります。 マスター データ同期タスクは、次の手順に従ってマスター テーブルをコピーします。
1.  各ターゲット テーブルから既存のレコードをすべて削除します。
2.  ソーステーブル全体を実動データベースからターゲット データベースにコピーします。

ツールバーで、**マスター データ**をクリックして、マスタ データの同期のスケジュールされたタスクを作成します。 必要な情報を**スケジュール タスク**ウィンドウに入力し、**保存**をクリックします。

## <a name="purge"></a>削除
このコマンドを使用して、新しい削除タスクを作成できます。 削除タスクを作成する前に、削除オブジェクトが存在することが必要です。 実行時に、削除タスクはレコードをフィルター処理するために削除オブジェクト内のルールを使用します。 スケジュールされた削除オブジェクト タスクは、削除オブジェクトのリレーションシップ ツリー内のすべてのテーブルの一致するレコードを削除します。 ツール バーで、**スケジュール** &gt; **削除**をクリックして、**スケジュール タスク**ウィンドウを開きます。 削除タスクを作成するときは、**スケジュール タスク** ウィンドウで追加のタブを使用します。 **削除のためのコンフィギュレーション ルール**タブで、削除オブジェクトを選択し、**一般**および**スケジュール**タブ作業に加えて、ルールの値を検証または変更します。

## <a name="archive"></a>アーカイブ
このコマンドを使用して、新しいアーカイブ タスクを作成できます。 アーカイブ タスクを作成する前に、アーカイブ オブジェクトが存在することが必要です。 実行時に、アーカイブ タスクはレコードをフィルター処理するためにアーカイブ オブジェクト内のルールを使用します。 スケジュールされたアーカイブ オブジェクト タスクは、アーカイブ オブジェクトのリレーションシップ ツリー内のすべてのテーブルの一致するレコードをアーカイブします。 ツール バーで、**スケジュール** &gt; **アーカイブ**をクリックして、**スケジュール タスク**ウィンドウを開きます。 アーカイブ タスクを作成するときは、**スケジュール タスク** ウィンドウで追加のタブを使用します。 **アーカイブ ルールのコンフィギュレーション**タブで、アーカイブ オブジェクトを選択し、**一般**および**スケジュール**タブ作業に加えて、アーカイブ オブジェクトのルールの値を検証または変更します。
### <a name="restart-the-failed-or-canceled-archive-task"></a>障害が発生したか、キャンセルされたアーカイブ タスクを再開

IDMF では、予期しないエラー状態を障害とみなし、スケジューラー サービスが利用できない場合は、タスクがキャンセルされます。 両方のケースがエラー ログ ファイルに記録されます。 アーカイブ タスクは選択したレコードを生産データベースからアーカイブ データベースへ移動します。 IDMF は、各テーブルを 1 つのトランザクションとしてアーカイブします。 また、IDMF では各テーブルのアーカイブ プロセスの完了を追跡します。 たとえば、**CustTable** と呼ばれるテーブルを処理しています。 **CustTable** のアーカイブ中にアーカイブ タスクが失敗した場合、**CustTable** をアーカイブしていたトランザクションをロール バックします。 IDMF は処理中の表にマークを付け、CustTable の処理中にエラーが発生したことを認識します。 失敗したたアーカイブ タスクを再起動すると、IDMF は **CustTable** のアーカイブを最初から開始し、アーカイブ オブジェクトの残りのテーブルを続行します。 アーカイブ タスク障害が発生したり、データをコピーする前に、最初のフェーズでキャンセルされると、タスクを再起動することはできません。 その場合、データをアーカイブする新しいタスクを作成して実行する必要があります。

### <a name="revert-the-failed-or-canceled-archive-task"></a>障害が発生したか、キャンセルされたアーカイブ タスクを元に戻します。

失敗またはキャンセルされたアーカイブ タスクにロールバックすることができます。 タスクをロールバックすると、部分的にアーカイブされているデータが復元されます。 前のセクションで詳述したように、エラーが発生した場合、IDMF は処理中の現在のテーブルをロール バックします。 ただし、既定では、以前にアーカイブされたテーブルはロールバックされません。 たとえば、アーカイブ タスクが、テーブル **WMSOrder** のアーカイブを正常に完了しました。 タスクは **WMSOrderTans** テーブルのアーカイブ中に失敗し、**WMSOrderTans** テーブルのアーカイブをロールバックします。 データベースは、現在 **WMSOrder** からのレコードはアーカイブされていますが、**WMSOrderTans** からの対応するレコードと入れ子になったリレーションシップ ツリー内の他の関連テーブルはアーカイブされていない状態です。 データベースの整合性を維持するために、失敗したアーカイブ タスクを元に戻すか再開する必要があります。 失敗したタスクを元に戻すとき、このタスクは、**WMSOrder** テーブルからアーカイブしたデータの復元を試みます。 復元が成功すると、データベースはアーカイブ タスクが開始される前の状態になります。 アーカイブ タスクがデータのコピーを開始する前に失敗またはキャンセルされた場合、元に戻すものはありません。 このような障害が発生したタスクを元に戻そうとすると、IDMF にそのようなタスクを元に戻すことは不可能であるというメッセージが表示されます。 復元タスクが失敗した場合または取り消された場合、失敗した復元タスクを再開できます。 正常に完了したことを確認するために元に戻すタスクを監視します。

## <a name="restore-archive"></a>アーカイブを復元
このコマンドを使用すると、正常なアーカイブ タスクからアーカイブされたレコードを復元できます。 ツール バーで、**アーカイブを復元**をクリックして、アーカイブされたデータを復元するためのスケジュールされたタスクを作成します。 必要な情報を**スケジュール タスク**ウィンドウに入力し、**保存**をクリックします。 成功したアーカイブ タスクは、**成功**ステータスで完了しました。 **ステータス** ワークスペースを操作するには **ステータス** メニューをクリックします。 **ジョブ ステータス** ウィンドウで、**成功**ステータスのアーカイブ タスクを選択します。 **ステータス** ワークスペースの **トレース** ウィンドウには、アーカイブ オブジェクトの各テーブルでアーカイブされるレコード数が一覧表示されます。
### <a name="walkthrough-create-a-restore-archive-task-for-the-archive-object"></a>チュートリアル: アーカイブ オブジェクトのアーカイブ復元タスクの作成

このセクションでは、アーカイブの復元タスクを作成するためのチュートリアルを提供します。 生産データベースにアーカイブされたレコードを復元するには、これらの手順に従います。
1.  **スケジュール** &gt; **アーカイブを復元**の順にクリックし、アーカイブの復元タスクを作成します。 このチュートリアルでは、**タスクの詳細**ウィンドウで作業します。
2.  **一般**タブで、タスク名と説明を入力します。
3.  **アーカイブ復元のコンフィギュレーション**タブで、**その他のスケジュール**を選択して、選択項目に基づいてリストからデータ グリッドをフィルター処理します。 **他のスケジュール** を選択するとデータ グリッドがフィルター処理され、**SalesTable** や **BankDeposit** など、他のすべてのアーカイブ オブジェクトの正常に完了したファイルが表示されます。
4.  **スケジュール** 列に表示されているアーカイブ タスクを確認します。 複数のタスクを選択することができます。 復元するときは、同じオブジェクトの古いアーカイブの復元を必要とすることなく、最新のアーカイブを復元できます。
5.  **スケジュール**タブで、開始日の値および開始時刻を入力します。
6.  **保存** をクリックします。
7.  評価モデルの変更、または標準原価の再評価を実行したことを示す警告が表示される可能性があるため、注意深く読んでください。 検証モデルの変更後または標準原価の評価後にアーカイブ オブジェクトを復元すると、データの不整合が生じることがあります。 実稼動環境では、これらのアクションのいずれかを実行した場合、復元アーカイブ タスクを実行しないでください。 このチュートリアルでは、テスト環境でチュートリアルを続行します。 **OK** をクリックしてメッセージを閉じます。
8.  **スケジュール**タブで、**OK** をクリックして続行します。
9.  **ステータス**メニューを使用して、復元タスクの進捗状況を監視し、それが正常に完了したことを **成功** ステータスで確認します。 アーカイブ タスクの情報を使用して、復元タスクの**追跡**ウィンドウの情報を比較します。 アーカイブ タスクと復元タスクのすべてのテーブルで、復元レコードの数がアーカイブ レコードの数に一致していることを確認します。
10. データおよびアプリケーションの整合性を確認するテスト環境で復元したテーブルをテストします。

| **注意**                                                                                                                                                                                                                                                                                                                                               |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| アーカイブ オブジェクトやアーカイブしたレコードの復元を不適切に使用すると、予期しない結果、データベース破損、データベース全体およびアプリケーションの復旧が必要となるアプリケーション ダウンタイムが発生する可能性があります。 実稼働環境で作業する前に、十分に注意を払い、テスト環境でアーカイブ戦略を入念にテストする必要があります。 |

### <a name="restart-the-failed-or-canceled-restore-archive-task"></a>障害が発生したか、キャンセルされた復元タスクを再開

IDMF では、予期しないエラー状態を障害とみなし、スケジューラー サービスが利用できない場合は、タスクがキャンセルされます。 両方のケースがエラー ログ ファイルに記録されます。 前のセクションで説明したように、復元アーカイブ タスクは、アーカイブ データベースから生産データベースにレコードを復元します。 IDMF は、各テーブルを 1 つのトランザクションとして復元します。 また、IDMF では各テーブルの復元プロセスの完了を追跡します。 たとえば、**CustTable** と呼ばれるテーブルを復元しています。 **CustTable** の復元中にアーカイブの復元タスクが失敗した場合、**CustTable** を復元していたトランザクションをロール バックします。 IDMF は処理中の表にマークを付け、**CustTable** の復元中にエラーが発生したことを認識します。 失敗したアーカイブの復元タスクを再起動すると、IDMF は **CustTable** の復元を最初から開始し、アーカイブ オブジェクトの残りのテーブルを続行します。 復元アーカイブ タスク障害が発生したり、データを復元する前に、最初のフェーズでキャンセルされると、タスクを再起動することはできません。 その場合、データをアーカイブする新しいタスクを作成して実行する必要があります。

## <a name="export-to-excel"></a>Excel にエクスポート
このコマンドは、選択したタスクを Microsoft Excel にエクスポートします。





