---
title: "Intelligent Data Management Framework (IDMF) のトラブルシューティング"
description: "このトピックには、Microsoft Dynamics AX Intelligent Data Management Framework (IDMF) 機能についての情報が含まれています。"
author: kfend
manager: AnnBe
ms.date: 11/14/2017
ms.topic: article
ms.prod: dynamics-ax-2012
ms.service: 
ms.technology: 
audience: Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 2012
ms.custom: 18711
ms.assetid: fe0b2255-d44e-42db-9c90-2c6202fc7578
ms.search.region: Global
ms.author: kfend
ms.search.validFrom: 
ms.dyn365.ops.version: 2012
ms.translationtype: HT
ms.sourcegitcommit: e782d33f3748524491dace28008cd9148ae70529
ms.openlocfilehash: 1ff09879a0814c0eac0c460e8e70bd6b4e1b7b17
ms.contentlocale: ja-jp
ms.lasthandoff: 08/09/2018

---

# <a name="troubleshoot-the-intelligent-data-management-framework-idmf"></a><span data-ttu-id="fac50-103">Intelligent Data Management Framework (IDMF) のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="fac50-103">Troubleshoot the Intelligent Data Management Framework (IDMF)</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="fac50-104">このトピックには、Microsoft Dynamics AX Intelligent Data Management Framework (IDMF) 機能についての情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="fac50-104">This topic contains information about troubleshooting the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF).</span></span>

<a name="known-issues"></a><span data-ttu-id="fac50-105">既知の問題</span><span class="sxs-lookup"><span data-stu-id="fac50-105">Known issues</span></span>
------------

-   <span data-ttu-id="fac50-106">**問題** サービスの設定とインストール中に提供されたドメイン アカウントには**サービスとしてログオンするためのアクセス許可**が与えられないため、IDMF サービスは開始時に失敗します。</span><span class="sxs-lookup"><span data-stu-id="fac50-106">**Issue** The domain account provided during setup and installation of the service is not granted **permission to log on as a service**, therefore the IDMF service fails when it is started.</span></span> <span data-ttu-id="fac50-107">**回避策** **サービス コントロール**パネルを開いてください。</span><span class="sxs-lookup"><span data-stu-id="fac50-107">**Workaround** Open the **Services control** panel.</span></span> <span data-ttu-id="fac50-108">**セキュリティ**タブで、アカウントのパスワードを入力します。</span><span class="sxs-lookup"><span data-stu-id="fac50-108">On the **Security** tab, enter the password for the account.</span></span>
-   <span data-ttu-id="fac50-109">**問題** IDMF のサービスアカウントにローカル管理者権限が与えられていない場合、次のエラーメッセージが表示されます。未処理の例外が発生し、記録されました。</span><span class="sxs-lookup"><span data-stu-id="fac50-109">**Issue** If the service account for IDMF has not been granted local administrator privileges, the following error message is received: "An unhandled exception occurred and has been logged.</span></span> <span data-ttu-id="fac50-110">サポートにお問い合わせください。</span><span class="sxs-lookup"><span data-stu-id="fac50-110">Please contact support."</span></span> <span data-ttu-id="fac50-111">**回避策**ローカル コンピューター上の IDMF 管理者権限にサービス アカウントを付与してください。</span><span class="sxs-lookup"><span data-stu-id="fac50-111">**Workaround** Grant the service account for IDMF administrator privileges on the local computer.</span></span>
-   <span data-ttu-id="fac50-112">**問題** **ByFiscal** アーカイブ タスクは、メタデータ タスクの実行中にスケジュールすることはできません。</span><span class="sxs-lookup"><span data-stu-id="fac50-112">**Issue** A **ByFiscal** archive task cannot be scheduled when a metadata task is running.</span></span> <span data-ttu-id="fac50-113">**回避策** **ByFiscal** アーカイブ タスクをスケジューリングする前にメタデータ タスクが完了するまで待ってください。</span><span class="sxs-lookup"><span data-stu-id="fac50-113">**Workaround** Wait until the metadata task completes before scheduling a **ByFiscal** archive task</span></span>
-   <span data-ttu-id="fac50-114">**問題** アーカイブの実行、オフライン **ALTER INDEX** として同時にアーカイブ タスクを削除または復元する操作により、データベースのロックに関する問題が発生します。</span><span class="sxs-lookup"><span data-stu-id="fac50-114">**Issue** Running archive, purge or restore archive tasks at the same time as offline **ALTER INDEX** operations causes database locking issues.</span></span> <span data-ttu-id="fac50-115">**回避策**アーカイブ、削除またはアーカイブ タスクの復元を実行する前に、指定されたインデックスを完了させるために**変更インデックス**操作がオフラインになるまで待ってください。</span><span class="sxs-lookup"><span data-stu-id="fac50-115">**Workaround** Wait until offline **ALTER INDEX** operations for the specified indexes have completed before running archive, purge or restore archive tasks.</span></span>
-   <span data-ttu-id="fac50-116">**問題** アーカイブ テンプレートまたは削除テンプレートは、アーカイブ タスクまたは削除タスクが実行されているときは変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="fac50-116">**Issue** Archive templates and purge template should not be modified when archive or purge tasks are running.</span></span> <span data-ttu-id="fac50-117">**回避策**アーカイブまたは削除タスクが実行されているときは、アーカイブおよび削除テンプレートは変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="fac50-117">**Workaround** Do not modify archive and purge templates when archive or purge tasks are running.</span></span>
-   <span data-ttu-id="fac50-118">**問題** 復元中に、バルク挿入命令を実行すると、実稼働環境の Microsoft Dynamics AX ビジネス データベースのテーブルに対して大量のテーブル ロックのエスカレーションが発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-118">**Issue** During a restore, the insert bulk statements can cause a high amount of table lock escalations on tables in the production Microsoft Dynamics AX business database.</span></span> <span data-ttu-id="fac50-119">**回避策**なし。</span><span class="sxs-lookup"><span data-stu-id="fac50-119">**Workaround** None.</span></span>
-   <span data-ttu-id="fac50-120">**問題** **ByFiscal** タスク ページおよび他のページでは、展開と折りたたみのアイコンに逆の画像を表示することができます。</span><span class="sxs-lookup"><span data-stu-id="fac50-120">**Issue** In the **ByFiscal** task page and in other pages, expand and collapse icons can show reversed images.</span></span> <span data-ttu-id="fac50-121">**回避策**なし。</span><span class="sxs-lookup"><span data-stu-id="fac50-121">**Workaround** None.</span></span>
-   <span data-ttu-id="fac50-122">**問題** ドライブ テーブルが **AccountingEvent** の場合、アーカイブ オブジェクトを検出することができません。</span><span class="sxs-lookup"><span data-stu-id="fac50-122">**Issue** Unable to discover archive objects if the drive table is **AccountingEvent**.</span></span> <span data-ttu-id="fac50-123">システムは次のメッセージを返します。「エラー実行コード: スクリプトを実行するためのメモリが不足しています」</span><span class="sxs-lookup"><span data-stu-id="fac50-123">The system returns the following message: "Error executing code: Insufficient memory to run script."</span></span> <span data-ttu-id="fac50-124">**回避策**以下のレジストリ エントリを更新します。\[HKEY\_CURRENT\_USERSoftwareMicrosoftDynamics6.0Configurationconfiguration 名\]\[HKEY\_LOCAL\_MACHINESoftwareMicrosoftDynamics6.0Configurationconfiguration 名\]\[HKEY\_LOCAL\_MACHINESYSTEMCurrentControlSetServicesDynamics Server6.0AOS インスタンスのコンフィギュレーション名\]値の名前 :maxbuffersizeValue タイプ : レジストリ\_SZValue: メモリの最大量 (MB) または制限なしの 0</span><span class="sxs-lookup"><span data-stu-id="fac50-124">**Workaround** Update the following registry entries.\[HKEY\_CURRENT\_USERSoftwareMicrosoftDynamics6.0Configurationconfiguration name\]\[HKEY\_LOCAL\_MACHINESoftwareMicrosoftDynamics6.0Configurationconfiguration name\]\[HKEY\_LOCAL\_MACHINESYSTEMCurrentControlSetServicesDynamics Server6.0AOS instance configuration name\]Value name: maxbuffersizeValue type: REG\_SZValue: Maximum amount of memory in MB or 0 for no limit</span></span>

## <a name="view-log-files"></a><span data-ttu-id="fac50-125">ログ ファイルの表示</span><span class="sxs-lookup"><span data-stu-id="fac50-125">View log files</span></span>
<span data-ttu-id="fac50-126">IDMF は、エラー イベントをインストール フォルダーの下のフォルダー内のログ ファイルに記録します。</span><span class="sxs-lookup"><span data-stu-id="fac50-126">IDMF logs error events in a log file in a folder under the installation folder.</span></span> <span data-ttu-id="fac50-127">既定のインストール パスは、C:\Program File\Microsoft Dynamics AX Intelligent Data Management Framework です。</span><span class="sxs-lookup"><span data-stu-id="fac50-127">The default installation path is C:\Program File\Microsoft Dynamics AX Intelligent Data Management Framework.</span></span> <span data-ttu-id="fac50-128">IDMF は、最初のエラー メッセージが生成されたときに、ログ ファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="fac50-128">IDMF creates the log file when the first error message is generated.</span></span> <span data-ttu-id="fac50-129">このファイルの名前は trace\_mm-dd-yyyy.log で、mm-dd-yyyy は現在の月、日、年を示します。</span><span class="sxs-lookup"><span data-stu-id="fac50-129">The file is named trace\_mm-dd-yyyy.log, with mm-dd-yyyy providing the current month, day, and year.</span></span> <span data-ttu-id="fac50-130">IDMF スケジューラー サービスは、servicetrace\_mm-dd-yyyy.log と呼ばれるエラー ログ ファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="fac50-130">The IDMF scheduler service creates an error log file called servicetrace\_mm-dd-yyyy.log.</span></span> <span data-ttu-id="fac50-131">エラー ログ ファイルは、毎日作成されます。</span><span class="sxs-lookup"><span data-stu-id="fac50-131">The error log files are created for each day.</span></span> <span data-ttu-id="fac50-132">その日に最初のエラーが発生すると、エラー ログ ファイルが作成されて、エラー メッセージが新たに作成されたエラー ログ ファイルに追加されます。</span><span class="sxs-lookup"><span data-stu-id="fac50-132">When the first error occurs during the day, the error log file is created, and the error message is appended to the newly created error log file.</span></span> <span data-ttu-id="fac50-133">その後のすべてのエラー メッセージはその日の既存のエラー ログ ファイルに追加されます。</span><span class="sxs-lookup"><span data-stu-id="fac50-133">All subsequent error messages are appended to the existing error log file for the day.</span></span>

## <a name="database-rights-are-not-set-correctly"></a><span data-ttu-id="fac50-134">データベース権限が正しく設定されていません</span><span class="sxs-lookup"><span data-stu-id="fac50-134">Database rights are not set correctly</span></span>
<span data-ttu-id="fac50-135">AOS サービス アカウントには、IDMF 管理データベースでの **datareader**、**datawriter**、および **ddladmin** 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="fac50-135">The AOS service account must have **datareader**, **datawriter**, and **ddladmin** rights on the IDMF management database.</span></span>

## <a name="idmf-fails-to-start"></a><span data-ttu-id="fac50-136">IDMF が開始しない</span><span class="sxs-lookup"><span data-stu-id="fac50-136">IDMF fails to start</span></span>
<span data-ttu-id="fac50-137">IDMF を起動するときは、次のエラーが発生することがあります: 「未処理の例外が発生し、記録されました。</span><span class="sxs-lookup"><span data-stu-id="fac50-137">When starting IDMF, you may encounter the following error: "An unhandled exception occurred and has been logged.</span></span> <span data-ttu-id="fac50-138">サポートにお問い合わせください。</span><span class="sxs-lookup"><span data-stu-id="fac50-138">Please contact support."</span></span> <span data-ttu-id="fac50-139">上記のエラー メッセージは、エラー状態がアクセス許可などの環境問題によって発生した場合に IDMF が表示する一般的なメッセージです。</span><span class="sxs-lookup"><span data-stu-id="fac50-139">The preceding error message is a generic message that IDMF displays when the error condition is caused by an environmental issue such as permissions.</span></span> <span data-ttu-id="fac50-140">この特定のエラー状態は、通常、ユーザーに IDMF のインストール フォルダーに対する読み取りおよび書き込み許可がない場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="fac50-140">This particular error condition typically occurs when the user does not have read and write permissions on the installation folder of IDMF.</span></span> <span data-ttu-id="fac50-141">エラー状態を修正するには、IDMF のインストール フォルダーに、読み取りと書き込みのアクセス許可を適用します。</span><span class="sxs-lookup"><span data-stu-id="fac50-141">To fix the error condition, provide read and write permissions to the installation folder of IDMF.</span></span> <span data-ttu-id="fac50-142">既定のパスは、C:\Program Files\Microsoft Dynamics AX Intelligent Data Management Framework です。</span><span class="sxs-lookup"><span data-stu-id="fac50-142">The default path is C:\Program Files\Microsoft Dynamics AX Intelligent Data Management Framework.</span></span>

## <a name="index-defragmentation-does-not-reduce-the-fragmentation-percentage-to-zero"></a><span data-ttu-id="fac50-143">インデックスの最適化は最適化率をゼロまで減らしません。</span><span class="sxs-lookup"><span data-stu-id="fac50-143">Index defragmentation does not reduce the fragmentation percentage to zero</span></span>
<span data-ttu-id="fac50-144">インデックスの最適化スケジュールは、必ずしも完全な最適化、つまり0 (ゼロ)% の断片化を達成するとは限りません。</span><span class="sxs-lookup"><span data-stu-id="fac50-144">The index defragmentation schedules do not always achieve a complete defragmentation, or in other words, 0 (zero) percent fragmentation.</span></span> <span data-ttu-id="fac50-145">インデックスの一部には、引き続き小さな断片化が存在する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-145">Some of the indexes may still have a small percentage of fragmentation.</span></span> <span data-ttu-id="fac50-146">最適化プロセスは、選択されたインデックスを最大限可能なレベルまで最適化しようとします。</span><span class="sxs-lookup"><span data-stu-id="fac50-146">The defragmentation process tries to defragment selected indexes to the maximum possible level.</span></span> <span data-ttu-id="fac50-147">ただし、Microsoft Dynamics AX は、0 (ゼロ) の FILL FACTOR を使用します。</span><span class="sxs-lookup"><span data-stu-id="fac50-147">However, Microsoft Dynamics AX uses a fill factor of 0 (zero).</span></span> <span data-ttu-id="fac50-148">0 の FILL FACTOR は、インデックス ページを完全に埋めることなく、追加のページにレコードを分割します。</span><span class="sxs-lookup"><span data-stu-id="fac50-148">The fill factor of 0 breaks records out to extra pages without completely filling an index page.</span></span> <span data-ttu-id="fac50-149">結果として、デフラグメンテーション スケジュールが正常に完了した後であっても、一部のインデックスの断片化レベルは、ゼロ以外のレベルの状態です。</span><span class="sxs-lookup"><span data-stu-id="fac50-149">As a result, the fragmentation level for some of the indexes remains at a non-zero level, even after the defragmentation schedule is completed successfully.</span></span>

## <a name="distributed-transaction-error"></a><span data-ttu-id="fac50-150">配分トランザクション エラー</span><span class="sxs-lookup"><span data-stu-id="fac50-150">Distributed transaction error</span></span>
<span data-ttu-id="fac50-151">Microsoft SQL Server Integration Services (SSIS) ランタイムから次のエラーが表示される可能性があります: "エラー 0x8004D025 による分散トランザクションの OLE DB 接続を得るのに、SSIS ランタイムは失敗しました。</span><span class="sxs-lookup"><span data-stu-id="fac50-151">You may encounter the following error from the Microsoft SQL Server Integration Services (SSIS) runtime: "The SSIS Runtime has failed to enlist the OLE DB connection in a distributed transaction with error 0x8004D025.</span></span> <span data-ttu-id="fac50-152">パートナー トランザクション マネージャーは、リモート/ネットワーク トランザクションのサポートを無効にしました。」</span><span class="sxs-lookup"><span data-stu-id="fac50-152">The partner transaction manager has disabled its support for remote/network transactions."</span></span> <span data-ttu-id="fac50-153">このエラー状態を修正するには、Microsoft 分散トランザクション コーディネーター (MSDT) 通信がファイアウォールを通過するようにサーバーを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-153">To fix this error condition, you must configure your servers so that Microsoft Distributed Transaction Coordinator (MSDT) communication flows through the firewall.</span></span> <span data-ttu-id="fac50-154">手順については、[サポート技術情報 306843](http://support.microsoft.com/kb/306843) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fac50-154">For instructions, see [Knowledge Base article 306843](http://support.microsoft.com/kb/306843).</span></span> <span data-ttu-id="fac50-155">**Microsoft 分散トランザクション コーディネーター**により、**受信および発信ルール**で**分散トランザクション コーディネーター** のファイアウォールが設定されていることを確認した後にエラーが発生する場合。</span><span class="sxs-lookup"><span data-stu-id="fac50-155">If the error persists after configuring the **Microsoft Distributed Transaction Coordinator** verify that the firewall settings for **Distributed Transaction Coordinator** under the **Inbound and Outbound Rules** have been enabled.</span></span>

## <a name="export-to-excel-fails"></a><span data-ttu-id="fac50-156">Excel へのエクスポートが失敗</span><span class="sxs-lookup"><span data-stu-id="fac50-156">Export to Excel fails</span></span>
<span data-ttu-id="fac50-157">一部の環境で Excel へのエクスポート機能が動作しない場合があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-157">The export to Excel functionality may not work in some environments.</span></span> <span data-ttu-id="fac50-158">この問題を解決するには、Microsoft Excel と Excel PIA がコンピューターにインストールされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-158">To fix this problem, you must have Microsoft Excel and the Excel PIAs installed on the computer.</span></span> <span data-ttu-id="fac50-159">Excel が正しくインストールされ、コンピューターで動作していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="fac50-159">Verify that Excel is correctly installed and working on the computer.</span></span> <span data-ttu-id="fac50-160">必要に応じて、Microsoft Office プライマリ相互運用アセンブリ (PIA) をダウンロードし、インストールします。</span><span class="sxs-lookup"><span data-stu-id="fac50-160">If required, download and install the Microsoft Office Primary Interop Assemblies (PIAs).</span></span> <span data-ttu-id="fac50-161">Excel 2003 については、[Office 2003 更新プログラム: 再頒布可能パッケージのプライマリ相互運用アセンブリ](http://www.microsoft.com/downloads/details.aspx?familyid=3c9a983a-ac14-4125-8ba0-d36d67e0f4ad&displaylang=en) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fac50-161">For Excel 2003, see [Office 2003 Update: Redistributable Primary Interop Assemblies](http://www.microsoft.com/downloads/details.aspx?familyid=3c9a983a-ac14-4125-8ba0-d36d67e0f4ad&displaylang=en).</span></span> <span data-ttu-id="fac50-162">Microsoft Excel 2007 については、[2007 Microsoft Office システム更新プログラム: 再頒布可能パッケージのプライマリ相互運用アセンブリ](http://www.microsoft.com/downloads/details.aspx?FamilyID=59daebaa-bed4-4282-a28c-b864d8bfa513&displaylang=en) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fac50-162">For Microsoft Excel 2007, see [2007 Microsoft Office System Update: Redistributable Primary Interop Assemblies](http://www.microsoft.com/downloads/details.aspx?FamilyID=59daebaa-bed4-4282-a28c-b864d8bfa513&displaylang=en).</span></span> <span data-ttu-id="fac50-163">PIA のインストールが成功したら IDMF を再起動します。</span><span class="sxs-lookup"><span data-stu-id="fac50-163">Restart IDMF after successful installation of the PIAs.</span></span>

## <a name="the-discovery-of-a-driver-table-fails"></a><span data-ttu-id="fac50-164">ドライバー テーブルの検出に失敗します</span><span class="sxs-lookup"><span data-stu-id="fac50-164">The discovery of a driver table fails</span></span>
<span data-ttu-id="fac50-165">アーカイブ オブジェクトまたは削除オブジェクトの検出プロセスを起動すると、次のエラーが発生する場合があります: 「アーカイブ オブジェクトまたは削除オブジェクトのドライバー テーブルを検出できません。」</span><span class="sxs-lookup"><span data-stu-id="fac50-165">When starting a discovery process for an Archive Object or a Purge Object, you may encounter the following error: "Unable to discover the driver table for the Archive Object or Purge Object."</span></span> <span data-ttu-id="fac50-166">このエラー メッセージは、通常、メタデータの同期の問題によって発生します。</span><span class="sxs-lookup"><span data-stu-id="fac50-166">This error message is usually caused by metadata synchronization issues.</span></span> <span data-ttu-id="fac50-167">このエラー状態を修正するには、インストール後のタスクを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-167">To fix this error condition, you must run the post-installation tasks.</span></span> <span data-ttu-id="fac50-168">**スタート** &gt; **すべてのプログラム** &gt; **Intelligent Data Management Framework** &gt; **インストール後の作業** をクリックしてインストール後のアプリケーションを実行するか、以下の手順に従ってこのエラーを手動で解決します。</span><span class="sxs-lookup"><span data-stu-id="fac50-168">Run the post-installation application by clicking **Start** &gt; **All programs** &gt; **Intelligent Data Management Framework** &gt; **Post-installation tasks**, or follow these steps to resolve this error manually.</span></span> <span data-ttu-id="fac50-169">詳細については、[Microsoft Dynamics AX インテリジェント データ管理フレームワーク (IDMF) のインストール ガイド](installation-guide-idmf.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fac50-169">For details, see the [Installation Guide for the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF)](installation-guide-idmf.md).</span></span>

1.  <span data-ttu-id="fac50-170">アプリケーション オブジェクト ツリー (AOT) に、**AXDataManagementToolProjectnn.xpo** が存在することを確認します。ここで nn は、Microsoft Dynamics AX アプリケーションのバージョンに応じて 50、60、61、または 62です。</span><span class="sxs-lookup"><span data-stu-id="fac50-170">Verify that **AXDataManagementToolProjectnn.xpo** exists in the Application Object Tree (AOT), where nn is 50, 60, 61, or 62 depending on the version of your Microsoft Dynamics AX application.</span></span>
2.  <span data-ttu-id="fac50-171">ポストインストール チェックリストを正常に完了したことを確認します。</span><span class="sxs-lookup"><span data-stu-id="fac50-171">Verify that you have successfully completed the post-installation checklist.</span></span>
3.  <span data-ttu-id="fac50-172">実装チームのすべてのメンバーが、たとえば **CUS**、**VAR**、または **USR** のように同じレイヤーで作業していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="fac50-172">Verify that all member of the implementation team are working on the same layer, for example **CUS**, **VAR**, or **USR**.</span></span>
4.  <span data-ttu-id="fac50-173">**VAR** レイヤまたは **USR** レイヤと同じレイヤに、手順 1 に記述した XPO がインポートされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="fac50-173">Verify that the XPOs mentioned in step 1 are imported in the same layer, such as the **VAR** layer or the **USR** layer.</span></span> <span data-ttu-id="fac50-174">これらの XPO のすべてのメソッドが、**USR** または **VAR** などの同じレイヤーにインポートされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="fac50-174">Verify that all methods from these XPOs are imported in the same layer, such as **USR** or **VAR**.</span></span>
5.  <span data-ttu-id="fac50-175">AOT を使用して、AOT と、IDMF に含まれている XPO との違いを修正します。</span><span class="sxs-lookup"><span data-stu-id="fac50-175">Use the AOT to correct any difference you find between your AOT and the XPOs that are included with IDMF.</span></span> <span data-ttu-id="fac50-176">[データ管理フレームワークのインストール ガイド](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409) で説明されているように、これらの XPO を現在作業中のレイヤーから削除して、手動で他のレイヤーにインポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="fac50-176">You can delete these XPOs from the layer they are currently in and manually import them to another layer, as described in the [Data Management Framework Installation Guide](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409).</span></span>

## <a name="the-database-snapshot-schedule-fails-with-a-permission-error"></a><span data-ttu-id="fac50-177">アクセス許可のエラーでデータベースのスナップショット スケジュールが失敗します</span><span class="sxs-lookup"><span data-stu-id="fac50-177">The database snapshot schedule fails with a permission error</span></span>
<span data-ttu-id="fac50-178">分散型 SQL Server 2008 環境では、複数のサーバーにデータベースを格納する場合、すべての SQL Server インスタンスで Service Pack 2 以降のバージョンをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-178">In a distributed SQL Server 2008 environment, you must install Service Pack 2 or a later version on all SQL Server instances when you store your databases on multiple servers.</span></span> <span data-ttu-id="fac50-179">たとえば、生産データベースおよびアーカイブ データベースを 2 つの別々のサーバーに保存するときに、配分済 SQL Server 環境があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-179">For example, when you store your production database and archive database on two separate servers, you have a distributed SQL Server environment.</span></span> <span data-ttu-id="fac50-180">IDMF をインストールして開始する前に、両方のサーバーには SQL Server 2008 またはそれ以降のバージョンが必要です。</span><span class="sxs-lookup"><span data-stu-id="fac50-180">Both the servers must have SQL Server 2008 or a later version before you install and start IDMF.</span></span> <span data-ttu-id="fac50-181">実行しないと、データベース スナップショット スケジュールから次のエラー メッセージが表示されます。「構文エラー、アクセス許可違反、またはその他の一般的なエラー」</span><span class="sxs-lookup"><span data-stu-id="fac50-181">Failure to do so causes the following error message from a database snapshot schedule: "Syntax error, permission violation, or other nonspecific error."</span></span>

## <a name="the-discovery-process-fails-with-an-error-message"></a><span data-ttu-id="fac50-182">検出プロセスが失敗し、エラー メッセージが表示されます</span><span class="sxs-lookup"><span data-stu-id="fac50-182">The discovery process fails with an error message</span></span>
<span data-ttu-id="fac50-183">検出プロセスで、「アーカイブ オブジェクトを作成できないか、オブジェクトを削除できません」というエラーメッセージが表示されることがあります。</span><span class="sxs-lookup"><span data-stu-id="fac50-183">The discovery process may display an error message: "Cannot create archive object or purge object."</span></span> <span data-ttu-id="fac50-184">このメッセージは、Application Object Server (AOS) が使用できない場合、または AOS との接続が失敗した場合に表示されることがあります。</span><span class="sxs-lookup"><span data-stu-id="fac50-184">This message may appear if Application Object Server (AOS) is not available or the connection with AOS has failed.</span></span> <span data-ttu-id="fac50-185">AOS の有効性を確認してください。</span><span class="sxs-lookup"><span data-stu-id="fac50-185">Check the availability of AOS.</span></span> <span data-ttu-id="fac50-186">必要に応じて AOS を再起動し、IDMF を再起動します。</span><span class="sxs-lookup"><span data-stu-id="fac50-186">Restart the AOS if necessary, and then restart IDMF.</span></span>

## <a name="application-object-server-error-when-connecting-to-the-archive-database"></a><span data-ttu-id="fac50-187">アーカイブ データベースに接続するときの Application Object Server エラー</span><span class="sxs-lookup"><span data-stu-id="fac50-187">Application Object Server error when connecting to the archive database</span></span>
<span data-ttu-id="fac50-188">一部の環境では、Application Object Server (AOS) がアーカイブ データベースに接続するとき、「ユーザーのセッションを作成中に内部エラーが発生しました」というエラーを受け取ることがあります。</span><span class="sxs-lookup"><span data-stu-id="fac50-188">In some environments, you may receive an error when Application Object Server (AOS) connects to the archive database: "An internal error occurred while creating session for the user."</span></span> <span data-ttu-id="fac50-189">AOS サービスに使用されるアカウントにアーカイブ データベースへの十分なアクセス許可があることを確認します。</span><span class="sxs-lookup"><span data-stu-id="fac50-189">Verify that the account used for the AOS service has sufficient permissions to the archive database.</span></span> <span data-ttu-id="fac50-190">詳細については、[データ管理フレームワークのインストール ガイド](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409) の「インストールに必要な権限」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="fac50-190">For more information, see the "Rights required for installation" section in the [Data Management Framework Installation Guide](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409).</span></span> <span data-ttu-id="fac50-191">AOS サービスに使用されるアカウントがアーカイブ データベースの **CREATESERVERSESSIONS** および **CREATEUSERSESSIONS** のストアド プロシージャに対する実行権限を持っていることを確認にします。</span><span class="sxs-lookup"><span data-stu-id="fac50-191">Verify that the account used for the AOS service has the execute permission for stored procedures **CREATESERVERSESSIONS** and **CREATEUSERSESSIONS** in the archive database.</span></span>

## <a name="the-analysis-snapshot-schedule-fails-with-a-permission-error"></a><span data-ttu-id="fac50-192">アクセス許可のエラーで分析スナップショット スケジュールが失敗します</span><span class="sxs-lookup"><span data-stu-id="fac50-192">The analysis snapshot schedule fails with a permission error</span></span>
<span data-ttu-id="fac50-193">分析スナップショット スケジュールが失敗して、エラー メッセージ「OLE DB エラーが発生しました。」が表示されます。</span><span class="sxs-lookup"><span data-stu-id="fac50-193">The analysis snapshot schedule may fail with an error message: "An OLE DB error has occurred.</span></span> <span data-ttu-id="fac50-194">エラー コード: 0x80040E14.An OLE DB レコードは使用できます。</span><span class="sxs-lookup"><span data-stu-id="fac50-194">Error code: 0x80040E14.An OLE DB record is available.</span></span> <span data-ttu-id="fac50-195">ソース: "Microsoft SQL ネイティブ クライアント" Hresult: 0x80040E14 説明: "ユーザーには、この操作を実行するためのアクセス許可がありません"。"データベースのアクセス許可の不足が原因でこのエラー メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="fac50-195">Source: "Microsoft SQL Native Client" Hresult: 0x80040E14 Description: "The user does not have permission to perform this action"." This error message appears because of insufficient database permissions.</span></span> <span data-ttu-id="fac50-196">[データ管理フレームワークのインストール ガイド](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409)セクションの「インストールに必要な権限」の手順に従って、データベースのアクセス権が割り当てられていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="fac50-196">Be sure that the database permissions are assigned by following the instructions in the "Rights required for installation" section in the [Data Management Framework Installation Guide](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409).</span></span>

## <a name="the-analysis-snapshot-schedule-fails-because-of-a-sql-server-integration-services-error"></a><span data-ttu-id="fac50-197">分析スナップショット スケジュールは、SQL Server Integration Services のエラーが原因で失敗します</span><span class="sxs-lookup"><span data-stu-id="fac50-197">The analysis snapshot schedule fails because of a SQL Server Integration Services error</span></span>
<span data-ttu-id="fac50-198">分析スナップショット スケジュールが失敗して、エラー メッセージ「メッセージ: パッケージ エラー: ファイルが存在します。」が表示されます。</span><span class="sxs-lookup"><span data-stu-id="fac50-198">The analysis snapshot schedule may fail with an error: "Message: Package Error: The file exists.</span></span> <span data-ttu-id="fac50-199">バッファマネージャーが一時ファイル名を取得できませんでした。</span><span class="sxs-lookup"><span data-stu-id="fac50-199">The buffer manager could not get a temporary file name.</span></span> <span data-ttu-id="fac50-200">GetTempFileName の呼び出しに失敗しました。</span><span class="sxs-lookup"><span data-stu-id="fac50-200">The call to GetTempFileName failed.</span></span> <span data-ttu-id="fac50-201">バッファマネージャーは、パス C:\DOCUME~1\ADMINI~1.SAMLOCALS~1Tempに一時ファイルを作成できませんでした。</span><span class="sxs-lookup"><span data-stu-id="fac50-201">The buffer manager could not create a temporary file on the path C:\DOCUME~1\ADMINI~1.SAMLOCALS~1Temp.</span></span> <span data-ttu-id="fac50-202">パスは一時的な記憶域に対して再度は考慮されません。」</span><span class="sxs-lookup"><span data-stu-id="fac50-202">The path will not be considered for temporary storage again."</span></span> <span data-ttu-id="fac50-203">このエラーを解決するには、SQL Server 2008 以降のバージョンをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-203">To resolve this error, you must install SQL Server 2008 or a later version.</span></span> <span data-ttu-id="fac50-204">詳細については、Microsoft サポート技術情報の記事 [972365](http://support.microsoft.com/kb/972365) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fac50-204">For more information, see Microsoft Knowledge Base article [972365](http://support.microsoft.com/kb/972365).</span></span>

## <a name="unable-to-create-an-archive-schedule-or-restore-schedule"></a><span data-ttu-id="fac50-205">アーカイブ スケジュールまたは復元スケジュールを作成できません</span><span class="sxs-lookup"><span data-stu-id="fac50-205">Unable to create an archive schedule or restore schedule</span></span>
<span data-ttu-id="fac50-206">アーカイブ スケジュールが失敗または中止した場合は、同一のオブジェクトで別のスケジュールを作成する前に、そのスケジュールを再起動または元に戻します。</span><span class="sxs-lookup"><span data-stu-id="fac50-206">If an archive schedule fails or is aborted, you must try to restart or revert it before you can create another schedule with the same object.</span></span> <span data-ttu-id="fac50-207">この制限は、すべてのアーカイブ オブジェクトに適用されます。</span><span class="sxs-lookup"><span data-stu-id="fac50-207">This restriction applies to all Archive Objects.</span></span>

## <a name="unable-to-select-an-archive-schedule-for-restoration"></a><span data-ttu-id="fac50-208">復元のためのアーカイブ スケジュールを選択できません</span><span class="sxs-lookup"><span data-stu-id="fac50-208">Unable to select an archive schedule for restoration</span></span>
<span data-ttu-id="fac50-209">復元しようとするアーカイブ スケジュールが無効である場合があるため、選択できません。</span><span class="sxs-lookup"><span data-stu-id="fac50-209">The archive schedule that you want to restore may be disabled, so that you cannot select it.</span></span> <span data-ttu-id="fac50-210">これは、前回のスケジュールの復元が中止または失敗した場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="fac50-210">This occurs when your previous attempt to restore the schedule has either been aborted or failed.</span></span> <span data-ttu-id="fac50-211">ステータス ウィンドウで、中止または失敗した復元スケジュールに移動します。</span><span class="sxs-lookup"><span data-stu-id="fac50-211">In the Status window, navigate to the aborted or failed restore schedule.</span></span> <span data-ttu-id="fac50-212">スケジュールを右クリックし、実行する必要があるアクションで **スケジュールの再起動** または **スケジュールを元に戻す** を選択します。</span><span class="sxs-lookup"><span data-stu-id="fac50-212">Right-click the schedule, and then select **Restart schedule** or **Revert schedule**, depending on the action you have to perform.</span></span> <span data-ttu-id="fac50-213">初期化状態のときにスケジュールに失敗した場合、データがアーカイブされません。</span><span class="sxs-lookup"><span data-stu-id="fac50-213">If the schedule failed during the initialization state, no data was archived.</span></span> <span data-ttu-id="fac50-214">その場合、スケジュールを復元したり戻したりする必要はなく、IDMF が新しいスケジュールを作成するよう求める警告を表示します。</span><span class="sxs-lookup"><span data-stu-id="fac50-214">In that case, there is no need to restore or revert the schedule, and IDMF displays a warning that asks you to create a new schedule.</span></span> <span data-ttu-id="fac50-215">**スケジュール** メニューを使用して、新しいアーカイブ スケジュールを作成します。</span><span class="sxs-lookup"><span data-stu-id="fac50-215">Use the **Schedule** menu to create a new archive schedule.</span></span>

| <span data-ttu-id="fac50-216">**メモ**</span><span class="sxs-lookup"><span data-stu-id="fac50-216">**Note**</span></span>                                                                                                                 |
|--------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="fac50-217">常に同じアーカイブ オブジェクトに対して新しいアーカイブ スケジュールを作成する前に失敗したアーカイブ スケジュールを再起動または元に戻すことができます。</span><span class="sxs-lookup"><span data-stu-id="fac50-217">Always restart or revert a failed archive schedule before you create a new archive schedule for the same Archive Object.</span></span> |

## <a name="a-schedule-fails-because-of-insufficient-space"></a><span data-ttu-id="fac50-218">領域の不足が原因でスケジュールが失敗する</span><span class="sxs-lookup"><span data-stu-id="fac50-218">A schedule fails because of insufficient space</span></span>
<span data-ttu-id="fac50-219">データベースまたはログ ファイルがいっぱいになった場合、アーカイブおよびパージ スケジュールは失敗します。</span><span class="sxs-lookup"><span data-stu-id="fac50-219">Archive and purge schedules fail if the database or log files become full.</span></span> <span data-ttu-id="fac50-220">これらのスケジュールには、アーカイブまたは削除するデータの量に応じて、大量の空きデータベースとログ領域が必要です。</span><span class="sxs-lookup"><span data-stu-id="fac50-220">These schedules require a significant amount of free database and log space, depending on the volume of data you archive or purge.</span></span> <span data-ttu-id="fac50-221">既定では、削除およびアーカイブ スケジュールはバッチ内の 100,000 レコードを処理します。</span><span class="sxs-lookup"><span data-stu-id="fac50-221">By default, the purge and archive schedules process 100,000 records in a batch.</span></span> <span data-ttu-id="fac50-222">バッチ サイズを小さくして、スケジュールがバッチを処理するときに必要なデータベースとログ領域を減らします。</span><span class="sxs-lookup"><span data-stu-id="fac50-222">Reduce the batch size to decrease the database and log space required when a schedule processes a batch.</span></span> <span data-ttu-id="fac50-223">バッチ サイズをコンフィギュレーションするには、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="fac50-223">Follow these steps to configure the batch size:</span></span>
1.  <span data-ttu-id="fac50-224">メモ帳を使用して、IDMF のインストール フォルダーから **AXDataManagementSchedulerService.exe.config** を開きます。</span><span class="sxs-lookup"><span data-stu-id="fac50-224">Using Notepad, open **AXDataManagementSchedulerService.exe.config** from the installation folder of IDMF.</span></span> <span data-ttu-id="fac50-225">インストール フォルダーの既定のパスは、C:\Program Files\Microsoft Dynamics AX Intelligent Data Management Framework です。</span><span class="sxs-lookup"><span data-stu-id="fac50-225">The default path of the installation folder is C:\Program Files\Microsoft Dynamics AX Intelligent Data Management Framework.</span></span>
2.  <span data-ttu-id="fac50-226">アーカイブ タスクのバッチ サイズを小さくするには、構成キー BatchSizeForPurge &lt;add key="BatchSizeForArchive" value="4000" /&gt; を見つけて、キーの値を小さい値に変更します。</span><span class="sxs-lookup"><span data-stu-id="fac50-226">To decrease the batch size for an archive task, locate the configuration key BatchSizeForPurge &lt;add key="BatchSizeForArchive" value="4000" /&gt;, and change the key value to a smaller number.</span></span>
3.  <span data-ttu-id="fac50-227">パージ スケジュールのバッチ サイズを小さくするには、構成キー BatchSizeForPurge &lt;add key="BatchSizeForPurge" value="4000" /&gt; を見つけて、キーの値を小さい値に変更します。</span><span class="sxs-lookup"><span data-stu-id="fac50-227">To decrease the batch size for a purge schedule, locate the configuration key BatchSizeForPurge &lt;add key="BatchSizeForPurge" value="4000" /&gt;, and change the key value to a smaller number.</span></span>

<span data-ttu-id="fac50-228">アーカイブ、生産、管理、および生産複製データベースのデータとログ ファイルの場所と初期サイズを慎重に決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-228">You must carefully determine the location and initial size of data and log files for the archive, production, management, and production replica databases.</span></span> <span data-ttu-id="fac50-229">最適なパフォーマンスと将来の拡大に初期サイズが十分であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="fac50-229">Be sure that the initial size is sufficient for optimal performance and future growth.</span></span> <span data-ttu-id="fac50-230">データベース の詳細については、[Microsoft Dynamics AX のデータベース コンフィギュレーションの計画](http://www.microsoft.com/downloads/details.aspx?FamilyID=ab4cd401-b366-4c1c-9a73-88c945ae8191) および Microsoft Dynamics AX のパフォーマンス チームの [ブログ](http://blogs.msdn.com/axperf/) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fac50-230">For more information about database configuration, see [Planning database configuration for Microsoft Dynamics AX](http://www.microsoft.com/downloads/details.aspx?FamilyID=ab4cd401-b366-4c1c-9a73-88c945ae8191) and the Microsoft Dynamics AX Performance team's [blog](http://blogs.msdn.com/axperf/).</span></span>

## <a name="troubleshoot-failed-schedules"></a><span data-ttu-id="fac50-231">失敗したスケジュールのトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="fac50-231">Troubleshoot failed schedules</span></span>
<span data-ttu-id="fac50-232">失敗したスケジュールのトラブルシューティングを行うには、これらの手順に従います。</span><span class="sxs-lookup"><span data-stu-id="fac50-232">Follow these steps to troubleshoot failed schedules:</span></span>
1.  <span data-ttu-id="fac50-233">ログ ファイル、および前のセクションで説明されている一般的な原因と関連付けられているソリューションの一覧を表示します。</span><span class="sxs-lookup"><span data-stu-id="fac50-233">View the log file and the list of common causes and associated solutions that are described in the previous sections.</span></span>
2.  <span data-ttu-id="fac50-234">メタデータ同期スケジュールを経由して、生産データベースのメタデータ変更をアーカイブ データベースと同期させてください。</span><span class="sxs-lookup"><span data-stu-id="fac50-234">Be sure to synchronize any metadata changes in the production database with the archive database via the metadata synchronization schedule.</span></span> <span data-ttu-id="fac50-235">2 つのデータベース間でメタデータが同期されていないと、マスター データ同期スケジュールが失敗することがあります。</span><span class="sxs-lookup"><span data-stu-id="fac50-235">The master data synchronization schedule may fail if the metadata is not synchronized between the two databases.</span></span>
3.  <span data-ttu-id="fac50-236">Microsoft Distributed Transaction Coordinator (MSDTC) が正しく構成されていないと、削除スケジュールが失敗する場合があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-236">The purge schedule may fail if the Microsoft Distributed Transaction Coordinator (MSDTC) is not configured correctly.</span></span>
4.  <span data-ttu-id="fac50-237">スケジュールは、データベースのデータ ファイルまたはログ ファイルがいっぱいになった場合に失敗することがあります。</span><span class="sxs-lookup"><span data-stu-id="fac50-237">A schedule may fail if the data file or log file in the database becomes full.</span></span>

<span data-ttu-id="fac50-238">スケジュールを再度実行する前に、エラー状態を修正する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fac50-238">You must fix the error conditions before you rerun the schedule.</span></span>






