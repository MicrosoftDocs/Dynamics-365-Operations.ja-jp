---
title: "Intelligent Data Management Framework (IDMF) での構成"
description: "このトピックでは、Microsoft Dynamics AX のインテリジェント データ管理フレームワーク (IDMF) 機能について説明します。"
author: kfend
manager: AnnBe
ms.date: 10/25/2017
ms.topic: article
ms.prod: dynamics-ax-2012
ms.service: 
ms.technology: 
audience: Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 2012
ms.custom: 17661
ms.assetid: b8e04a6f-a206-4faa-84e5-6cd45c9b5257
ms.search.region: Global
ms.author: kfend
ms.search.validFrom: 
ms.dyn365.ops.version: 2012
ms.translationtype: HT
ms.sourcegitcommit: e782d33f3748524491dace28008cd9148ae70529
ms.openlocfilehash: 70b247522d6e7b9f677e65a4c68c8573445a658b
ms.contentlocale: ja-jp
ms.lasthandoff: 08/09/2018

---

# <a name="configuration-in-the-intelligent-data-management-framework-idmf"></a>Intelligent Data Management Framework (IDMF) での構成

[!include [banner](../../includes/banner.md)]

<a name="purge-and-archive-functionality"></a>機能の削除とアーカイブ
-------------------------------

Microsoft Dynamics AX アプリケーションは、トランザクションのリアルタイム更新を提供します。 たとえば、ユーザーが注文を入力、変更、または削除する場合、Microsoft Dynamics AX は、メイン テーブルと関連するテーブルのいくつかを更新します。 時間の経過と共に、データベース内のデータの量が大きくなります。 IDMF を使用すると、データベースを分析し、最適なデータベース サイズを維持できます。 データベース・サイズを維持するために、IDMF ではパージ機能とアーカイブ機能が提供されています。 削除機能で、実稼働データベースの関連するエンティティまたはテーブルのセットから、データを削除します。 アーカイブ機能により、実稼働データベースにある一連の関連テーブルから、アーカイブ データベースと呼ばれるスタンバイ データベースへデータが移動されます。 ユーザーは、アーカイブ データベースをレポートに使用できますが、その更新を許可しないことをお勧めします。 IDMF とこの文書では、オフラインという用語をアーカイブという用語と交互に使用し、パージまたは削除操作と交互にリサイクルします。 削除とアーカイブ操作は、Microsoft Dynamics AX のメタデータに基づいて慎重に判別された関連テーブルの階層関係ツリーによって異なります。 たとえば、ユーザーが販売注文を作成、更新、または削除する際に、**SalesTable** テーブルおよび **SalesTable** に関連付けられているその他のテーブルが更新されます。 SalesTable などのテーブルのデータをアーカイブまたは削除するときは、そのメイン テーブルに関連付けられているすべてのテーブルのデータをアーカイブまたは削除する必要があります。 アーカイブおよび削除の操作は常に、関連するテーブルのセットで実行されます。 この関連テーブルのセットは、リレーションシップを形成します。 各階層関係は、階層ツリーのレベル 0 であるルート レベルで、ドライバー テーブルと呼ばれるメイン テーブルから始まります。 ドライバー テーブルに関連付けられたすべての子テーブルは次のレベル、レベル 1 にあります。 レベル 1 テーブル内にあるすべての子テーブルは次のレベル、レベル 2 にあります。 親子関係の入れ子になった階層は、最下位レベルのテーブルの子テーブル表がなくなるまで続きます。 階層関係の理解に役立つように、IDMF にはサンプルの階層関係を示すテンプレートがいくつか含まれています。 アーカイブ機能のテンプレートは、アーカイブ テンプレートと呼ばれます。 削除機能のテンプレートは、削除テンプレートと呼ばれます。 各テンプレートは、カスタマイズされていない標準インストールに基づくサンプル階層を提供します。 これらのテンプレートを直接使用することはできません。 アーカイブまたは削除機能に使用する前に、これらのテンプレートを開き、環境内の適合性を確認して保存してください。 テンプレートを開いたとき、リレーションシップの階層に、Microsoft Dynamics AX の実装からの関連するすべてのテーブルが含まれていることを確認します。 テンプレートの階層ツリーは、いくつかの理由で実装と一致しない場合があります。 以下の一覧は、Microsoft Dynamics AX の実装におけるテンプレートとリレーションシップとの違いの理由の一部について示しています。

-   ご使用の実装には、実装のカスタマイズ、コンフィギュレーション、およびライセンスに基づいて、テンプレート内の特定のテーブルが含まれない場合があります。
-   テンプレート内のテーブルの一部のフィールドは、実装では使用できない場合があります。
-   テンプレートに含まれていないカスタム テーブルを作成している場合があります。

階層関係が実装で関連するすべてのテーブルを含んでいることが非常に重要です。 正しくない階層に基づく削除またはアーカイブ操作は、データの破損を引き起こします。 したがって、実装に完全で正確なリレーションシップ ツリーを作成する必要があります。 各実装の一意性のため、アーカイブまたは削除機能でテンプレートを使用することはできません。 代わりに、実装に関連するすべての関係を含む削除オブジェクトやアーカイブ オブジェクトを作成する必要があります。 削除オブジェクトまたはアーカイブ オブジェクトを作成するには、2 つの方法があります。

-   テンプレートで作業します。 IDMF に含まれているテンプレートを開きます。 テンプレートを確認し、実装に合うようにテーブルおよびルールを追加または削除します。 リレーションシップ ツリーが実装のために完成していることを確認します。 テンプレートを保存します。 アーカイブ テンプレートはアーカイブ オブジェクトとして保存されます。 削除テンプレートは、削除オブジェクトとして保存されます。
-   IDMF に含まれているテンプレートを使用する代わりに、独自のオブジェクトを作成します。 ライセンス、コンフィギュレーション、およびカスタマイズによっては、実装の階層リレーションシップが IDMF に含まれるテンプレートと大きく異なる場合があります。 この場合、リレーションシップ ツリーのルートを形成する親テーブルとなっているドライバー テーブルを選択できる検出プロセスを使用する必要があります。 選択したドライバー テーブルと Microsoft Dynamics AX のメタデータに基づいて、IDMF は階層リレーションシップ ツリーを生成します。 IDMF では、例外一覧を確認し、例外リストに含まれるテーブルを無視します。

テンプレートを開くまた保存する代わりに、検索プロセスを使用して削除オブジェクトまたはアーカイブ オブジェクトを作成することをお勧めします。 同様のテンプレートが存在する場合は、テンプレートとオブジェクトを比較して、テンプレートに含まれているテーブルがオブジェクトに存在しないかどうかを確認します。 比較と検証に応じて、適切なオブジェクトにテーブルを追加するか、オブジェクトからテーブルを削除します。 各アーカイブ オブジェクトまたは削除オブジェクトには、アーカイブまたはデータの削除を管理する特定のルールが含まれています。 ルールを使用して、削除またはアーカイブする対象となるデータを選択するために使用する選択基準を指定できます。 自分のアーカイブガイドラインおよび削除ガイドラインと一致するように、これらのルールを追加、削除、または修正することができます。 削除タスクまたはアーカイブ タスクで使用する前に、アーカイブ オブジェクトまたは削除オブジェクトを保存する必要があります。 DMF は、次の図に示すサンプルに類似した削除オブジェクトまたはアーカイブ オブジェクトのグラフィカル表示を提供します。 アーカイブ オブジェクトおよび削除オブジェクトを簡単に理解して検証できるように、凡例を確認します。 

![IDMF アーカイブ オブジェクト](./media/idmfarchiveobject.png) 

次のテーブルでは、オブジェクトまたはテンプレートのリレーションシップ ツリーに表示される凡例について説明します。

| テキスト                                                                  | 説明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-----------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| テーブルが削除されました                                                         | このテーブルは、操作しているオブジェクトから削除されています。 削除オブジェクトまたはアーカイブ オブジェクトは、このテーブルからデータを削除したりアーカイブしたりしません。                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| テーブルが、生産データベースにありません。                         | このテーブルは、操作しているテンプレートまたはオブジェクトにはありますが、実稼働データベースにはありません。 このオブジェクトを保存する前に、次の表をリレーションシップから削除する必要があります。                                                                                                                                                                                                                                                                                                                                                                                                  |
| 無構成キーが無効になっているフィールド                               | Microsoft Dynamics AX では、各フィールドがセキュリティ キーおよびコンフィギュレーション キーによって制御されます。 使用するライセンス、セキュリティ キー、およびコンフィギュレーションに応じて、各フィールドは有効または無効のフィールドにすることができます。 この文書では、無効なフィールドは、コンフィギュレーション キーを介して無効にされるフィールドを参照します。 無効なフィールドを使用するルールを含むドライバー テーブル、または無効なフィールドを使用する任意のリレーションシップを持つ子テーブルは黄色の境界線で表示されます。 オブジェクトを保存する前に、無効なフィールドのルールとリレーションシップを解決する必要があります。 |
| 選択されたテーブル                                                        | このテーブルを選択しています。 複数のテーブルを選択してから、選択したテーブルのすべての発生を削除、または選択したテーブルをデータ アプリケーション フィーチャーに追加などのアクションを実行することができます。                                                                                                                                                                                                                                                                                                                                                                                               |
| テーブル グループ プロパティは、ワークシート ヘッダーです                              | このテーブルには、**WorksheetHeader** の **TableGroup** 値が格納されています。 このようなテーブルを右クリックして、関連する子テーブルを再検出することができます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 関連するアーカイブ オブジェクト                                                | これは、関連するアーカイブ オブジェクトです。 複雑さを避けるため、多数の入れ子になったリレーションシップを持つ子テーブルを追加する代わりに、関連するアーカイブ オブジェクトを自分のアーカイブ オブジェクトに追加できます。                                                                                                                                                                                                                                                                                                                                                                                                      |
| 関連するアーカイブ オブジェクト: テーブルが生産データベースにありません | この関連アーカイブ オブジェクトは、生産データベースに存在しません。 現在のオブジェクトを保存する前に、関連するアーカイブ オブジェクトからこのテーブルを削除して保存する必要があります。                                                                                                                                                                                                                                                                                                                                                                                                             |
| 関連するアーカイブ オブジェクト: 無効になったコンフィギュレーション キーを持つフィールド       | この関連するアーカイブ オブジェクトには、構成キーが無効になっている関係またはルールが含まれています。 このオブジェクトで使用できるようにするには、構成キーを有効にするか、または無効なフィールドに基づくリレーションシップとルールを削除し、それから関連するアーカイブ オブジェクトを保存する必要があります。                                                                                                                                                                                                                                                                                                               |
| 親 Archive Object のドライバー デーブル                             | これは、この関連アーカイブ オブジェクトの親オブジェクトであるアーカイブ オブジェクトのドライバー テーブルです。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |



## <a name="introduction-to-the-discovery-process"></a>検出プロセスの概要
検出プロセスは、削除オブジェクトまたはアーカイブ オブジェクの階層リレーションシップ ツリーを作成します。 新しい削除オブジェクトまたはアーカイブ オブジェクトを作成するときは、ドライバー テーブルと呼ばれる親テーブルを選択します。 IDMF では、発見と呼ばれるプロセスを使用して、選択したドライバー テーブルに基づく階層関係ツリーを作成します。 次の手順では、WMSOrder テーブルをドライバー テーブルとして選択したと仮定して、検出プロセスの詳細を説明します。
1.  親子階層のルート親であるドライバー テーブルとしてテーブルを選択すると、検出プロセスが開始されます。 ただし、IDMF は、例外リストの一部であるドライバー テーブル リストにはテーブルを表示しません。 **WMSOrder** テーブルは、例外パラメーター リスト内にないためリストに表示されます。
2.  Microsoft Dynamics AX の **xRefTableRelation** テーブルには、2 つのテーブル間の関係と、関係により使用されるフィールドが含まれています。 IDMF は、**xRefTableRelation** テーブルを照会して、親の子テーブル **WMSOrder** のテーブル名を取得します。 **xRefTableRelation** フィールドの説明は、このトピックの範囲を超えています。 詳細については、[xRefTableRelation テーブル](https://msdn.microsoft.com/en-us/library/aa860828.aspx) を参照してください。
3.  子テーブルがなくなるまで、すべてのテーブルについて前の手順を続行します。 場合によっては、子テーブルがこれらの条件のリレーションシップ ツリーから除外されます。
    -   子テーブルには、**メイン**、**パラメーター**、または**グループ**の **TableGroup** 値があります。
    -   子テーブルは例外パラメーター リストにあり、**削除検出**フィールドが選択されています。 この場合、子テーブルは、削除オブジェクトのリレーションシップ ツリーから除外されます。
    -   子テーブルは例外パラメーター リストにあり、**アーカイブ検出**フィールドが選択されています。 この場合、子テーブルは、アーカイブ オブジェクトのリレーションシップ ツリーから除外されます。

<table>
<colgroup>
<col width="100%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>メモ</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><span class="ui">Table Group</span></strong> 値が <strong><span class="ui">WorksheetHeader</span></strong> のテーブルは、ドライバー テーブルに最適な候補であり、子テーブルとして検出されると関係ツリーに黒色の境界線で表示されます。 検出プロセスでは、これらのテーブルが子テーブルとして表示されますが、子テーブルはツリーに表示されません。 削除およびアーカイブ戦略にこれらのテーブルを組み込むには、次の一覧のどのオプションを使用するのが最適かを判断します。
<ul>
<li>リレーションシップ ツリーでこれらのテーブルを保持し、その子テーブルを追加しません。</li>
<li>リレーションシップ ツリーでこれらのテーブルを保持し、その子テーブルを追加します。 テーブルを右クリックし、<strong><span class="ui">検出</span></strong> を選択して、テーブルの親子階層を形成する子テーブルを検出または追加します。</li>
<li>アーカイブ オブジェクトの場合、リレーションシップ ツリーからこれらのテーブルを削除し、関連するアーカイブ オブジェクトとして追加するか、独立したアーカイブ オブジェクトを作成します。</li>
<li>削除オブジェクトの場合、これらのテーブルを削除し、ドライバー テーブルとしてこれらのテーブルを使用して新しい削除オブジェクトを作成します。</li>
</ul></td>
</tr>
</tbody>
</table>

| **注意**                                                                                                                                                                                                                                                                              |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 例外パラメーターの一覧やアーカイブ オブジェクト、削除オブジェクトに対して操作を開始する前に、Microsoft Dynamics AX のメタデータとアプリケーションについて理解する必要があります。 データベースとアプリケーションとの整合性を維持するには、削除オブジェクトまたはアーカイブ オブジェクトの機能を検証する必要があります。 |






