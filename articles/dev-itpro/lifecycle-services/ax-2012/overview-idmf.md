---
title: "Intelligent Data Management Framework の概要 (AX 2012)"
description: "このトピックでは、Microsoft Dynamics AX インテリジェント データ管理フレームワーク (IDMF) の管理と使用について説明します。 IDMF により、システム管理者は Microsoft Dynamics AX インストールのパフォーマンスを最適化できます。 IDMF は、Microsoft Dynamics AX アプリケーションの正常性の評価と現在の使用パターンの分析を行い、データベース サイズの削減に役立ちます。"
author: kfend
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: dynamics-ax-2012
ms.service: 
ms.technology: 
audience: Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 2012
ms.custom: 18551
ms.assetid: 5dac88bb-39a4-4d0c-a426-3d30bbaae357
ms.search.region: Global
ms.author: kfend
ms.search.validFrom: 
ms.dyn365.ops.version: 2012
ms.translationtype: HT
ms.sourcegitcommit: 879eb9f2a63a8514791f74965005ed3e22bc0de7
ms.openlocfilehash: a49cd536eb9d9139017ce9d312cc6a514bb4bd7c
ms.contentlocale: ja-jp
ms.lasthandoff: 04/20/2018

---

# <a name="intelligent-data-management-framework-overview-ax-2012"></a>Intelligent Data Management Framework の概要 (AX 2012)

[!include [banner](../../includes/banner.md)]

このトピックでは、Microsoft Dynamics AX インテリジェント データ管理フレームワーク (IDMF) の管理と使用について説明します。 IDMF により、システム管理者は Microsoft Dynamics AX インストールのパフォーマンスを最適化できます。 IDMF は、Microsoft Dynamics AX アプリケーションの正常性の評価と現在の使用パターンの分析を行い、データベース サイズの削減に役立ちます。

Microsoft Dynamics AX Intelligent Data Management Framework (IDMF) では、データベースを分析し、最適なデータベース サイズを維持することができます。 データベース・サイズを維持するために、IDMF ではパージ機能とアーカイブ機能が提供されています。 削除機能で、実稼働データベースの関連するエンティティまたはテーブルのセットから、データを削除します。 アーカイブ機能により、実稼働データベースにあるすべての関連テーブルから、アーカイブ データベースと呼ばれるスタンバイ データベースへデータが移動されます。 アーカイブのデータベースをレポート目的で使用できますが、更新することはできません。 IDMF とこのトピックでは、オフラインという用語をアーカイブという用語と交互に使用し、削除操作と交互に削除またはリサイクルします。 削除とアーカイブ操作は、Microsoft Dynamics AX のメタデータに基づいて慎重に判別された関連テーブルの階層関係ツリーによって異なります。 階層関係を作成するには、親テーブルを選択し、Microsoft Dynamics AX のメタデータに基づいて関連するすべてのテーブルを検出します。 リレーションシップの親テーブルは、ツリーのルート レベルに配置されます。 検出プロセスは、リレーションシップが最下位レベルになくなるまで、親エンィティへの入れ子になったリレーションシップ ツリーを作成します。 ドライバー テーブルに基づいて作成されるリレーションシップ ツリーは、削除オブジェクトまたはアーカイブ オブジェクトと呼ばれます。 削除オブジェクトは、リレーションシップ ツリー内のすべてのテーブルから選択したレコードを Microsoft Dynamics AX データベースから削除するために使用されます。 同様に、アーカイブ オブジェクトは、リレーションシップ ツリー内のすべてのテーブルから選択したレコードを Microsoft Dynamics AX データベースからアーカイブ データベースに移動するために使用されます。 削除オブジェクトまたはアーカイブ オブジェクトを作成した後、エンティティとトランザクションにビジネス ルールと選択基準を適用して、生産データベースから削除または移動するレコードを決定します。 最後に、データベースを削除またはアーカイブにするため、スケジュールされたタスクを作成します。 実行時に、削除タスクは削除オブジェクトのすべてのテーブルから一致するレコードを選択し、それらを実働データベースから削除します。 同様に、スケジュール済アーカイブ タスクは、アーカイブ オブジェクトのすべてのテーブルから一致するレコードを選択し、生産データベースからアーカイブ オブジェクトに移動します。 削除タスクおよびアーカイブ タスクでは慎重な計画およびシステム テストが実行され、データベースの一貫性と整合性を維持しながら、生産データベースからレコードが削除または移動されます。

### <a name="audience"></a>対象者

このトピックは、Microsoft Dynamics AX アプリケーションと Microsoft SQL Server データベースの管理とメンテナンスを担当するデータベース管理者およびシステム管理者を対象としています。

### <a name="prerequisites"></a>前提条件

このトピックを利用するためには、次の分野の知識が必要です。

-   Microsoft Dynamics AX アプリケーションおよびシステム管理
-   SQL Server データベースの管理、バックアップ、復旧、およびパフォーマンスのチューニング
-   Windows Server の管理、バックアップ、復旧、およびパフォーマンスのチューニング

| **注意**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| このトピックを使用するには、Microsoft Dynamics AX のアプリケーションとデータベースのメンテナンスと管理に精通している必要があります。 IDMF により削除オブジェクトとアーカイブ オブジェクトを作成または変更することができます。 削除オブジェクトまたはアーカイブオブジェクトは、Microsoft Dynamics AX アプリケーション テーブル間の階層リレーションシップ ツリーを定義します。 特定の条件に基づきレコードを選択するルールを適用することができます。 スケジュール済削除タスクは、削除オブジェクトの基準に一致するレコードを選択し、リレーションシップ ツリーのすべてのテーブルから削除します。 スケジュール済アーカイブ タスクは、生産データベースからアーカイブ オブジェクトの基準に一致するアーカイブ データベースにレコードを選択して移動します。 |

## <a name="system-architecture"></a>システムのアーキテクチャ
 このセクションでは、IDMF のシステム アーキテクチャの高レベルの概要を説明します。 IDMF は、Microsoft .NET 開発環境を使用して作成され、単一のドキュメント インターフェイス (SDI) を提供します。 IDMF は、管理データベースと呼ばれるデータベースを使用してデータの格納および取得を行い、.NET Business Connector を介して Application Object Server (AOS) インスタンスと通信します。 AOS は、すべてのビジネス ロジックとデータベース クエリを処理し、Microsoft Dynamics AX アプリケーション データベースにアクセスします。 IDMF のインストール先のコンピューターに、ビジネス コネクタをインストールする必要があります。 インストール時に、IDMF は、Microsoft Dynamics AX Intelligent Data Management Framework service と呼ばれる Windows サービスをインストールします。 このサービスはスケジュールされたジョブの実行に使用され、IDMF のスケジューラー サービスと呼ばれます。 インストール後の段階では、IDMF は Microsoft Dynamics AX クライアントを使用して 2 つの X++ プロジェクト (XPO) をインポートしてコンパイルします。 1 つの XPO を使用して、クラス、テーブル、ジョブなど、IDMF に必要なアプリケーション エンティティを作成します。 Microsoft Dynamics AX Windows クライアントは、IDMF を使用して Microsoft Dynamics AX からメタデータをインポートおよび同期するために使用します。 次の図は、IDMF システム アーキテクチャの高レベルな概要を示しています。 
[![IDMF01](./media/idmf01.jpg)](./media/idmf01.jpg)   

**図 1. システム アーキテクチャ**

| **メモ**                                                                                                                                                                                                           |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| システム アーキテクチャには、説明を簡単にするために、データベースが異なる単一の SQL Server コンピューターが示されています。 これらのデータベースは、単一のデータベース サーバー上または複数のデータベース サーバー上に展開することができます。 |

## <a name="deployment-scenarios"></a>配置のシナリオ
このセクションでは、IDMF の展開シナリオについて説明します。 次のセクションに示すように、システム トポロジは単一のサーバー環境から複数のサーバーの配置まで変動可能です。
### <a name="single-server-deployment"></a>単一のサーバーの配置

次の図は、単一のサーバー上のすべてのコンポーネントの配置を示しています。 このトポロジは運用環境には推奨されません。 

[![IDMF02](./media/idmf02.jpg)](./media/idmf02.jpg)   

**図 2. 単一のサーバーの配置**

### <a name="multi-server-deployment"></a>複数のサーバーの配置

次の図は、AOS インスタンス、データベース サーバー、および IDMF が専用サーバーに配置されているマルチサーバー配置を示しています。 

[![IDMF03](./media/idmf03.jpg)](./media/idmf03.jpg)   

**図 3. 複数のサーバーの配置**

### <a name="distributed-deployment"></a>配分配置

次の図は、各データベースを専用のデータベース サーバーに配置することにより、マルチサーバー トポロジを拡張する分散配置を示しています。 必要に応じて、管理データベースと運用複製データベースを 1 台のサーバーに組み合わせることができます。 

[![IDMF04](./media/idmf04.jpg)](./media/idmf04.jpg) 

**図 4. 配分配置**

## <a name="before-you-begin"></a>準備
IDMF を初めて起動すると、データベースとアプリケーションのベースライン スナップショットを作成するように求められます。 ベースライン プロセスは、実稼働データベースのスナップショットを取得し、Microsoft Dynamics AX アプリケーションの正常性を特定します。 IDMF を使用できるようにするには、ベースライン スナップショットを作成する必要があります。 IDMF を使用する前に、次の考慮事項に注意してください。
-   アーカイブおよび削除の操作は、大量のリソースを消費し、メモリ、プロセッサ、ディスク ドライブまたはストレージ、およびネットワークなどのハードウェア リソースに影響します。 ユーザーがオフラインのとき、メンテナンス時間中にこれらの操作をスケジュールします。
-   テスト環境で削除タスクおよびアーカイブ タスクの作業をし、ハードウェア リソースおよびソフトウェア リソースへの影響を把握し、正常に完了するために必要な時間を理解します。 テスト環境で実行されたテストの結果を使用して、実稼動環境のメンテナンス時間帯を判断します。
-   実稼働データベースとアーカイブ データベースの初期のデータベースのサイズに大量データによる将来の拡大のための空き領域が用意されていることを確認します。 生産およびアーカイブ データベースにあるデータベース ファイルが自動拡張オプションを使用せずに、削除およびアーカイブ操作を完了するのに十分なスペースを確保します。 絶対必要なときにデータベース ファイルの拡張を可能にし、その結果、エラーを防止する安全機構として、自動拡張オプションを考慮することをお勧めします。 SQL Server のデータベース コンフィギュレーション チェックリストに関する詳細については、[Microsoft Dynamics AX のデータベース コンフィギュレーションの計画](http://www.microsoft.com/downloads/details.aspx?FamilyID=ab4cd401-b366-4c1c-9a73-88c945ae8191) を参照してください。
-   ストレージ要件が大きいため、データ型が BLOB およびメモであるテーブルのアーカイブ タスクを慎重に計画します。
-   アーカイブおよび削除タスクごとに、次の手順に従います。
    1.  削除またはアーカイブの必要があるレコード数を見積もります。
    2.  メガバイトで影響を受けるレコードのサイズをメガバイトで計算します。
    3.  削除の操作では、生産データベースで使用可能な領域は、前の手順で計算したサイズの少なくとも 2 倍であることを確認します。 アーカイブ操作では、生産およびアーカイブ データベースで使用可能な領域は、前の手順で計算したサイズの少なくとも 2 倍であることを確認します。
    4.  削除またはアーカイブ タスクを正常に完了するために必要な時間を決定します。 オンライン ユーザーへの影響を最小限に抑えるため、保守期間中にタスクを実行します。
-   削除の操作により、生産データベースのデータベースが変更されます。 アーカイブ操作は生産およびアーカイブ データベースのデータベースを変更します。 運用データベースの完全復旧モデルを選択します。 アーカイブ データベースの復旧モデルを慎重に決定してください。 単純復旧モデルでは、アーカイブ操作のパフォーマンスが向上しますが、データベースが破損している場合は、大幅にワークロスを被る可能性があります。 データは、失われたデータの最新のバックアップにのみリカバリ可能です。 完全復旧モデルは、単純復旧モデルよりも優れたデータ保護を提供します。 完全復旧モデルでは、トランザクション ログのバックアップを使用して完全なリカバリ機能を提供し、広範な障害のシナリオでの作業損失を防ぎます。 ただし、アーカイブ タスクが完全な復旧モデルで完了するには、単純な復旧モデルより長い時間がかかります。 詳細については、[データベースの復旧モデルを選択する](http://technet.microsoft.com/en-us/library/ms175987.aspx) を参照してください。
-   パージまたはアーカイブ タスクを実行するすぐ前に、実稼働およびアーカイブ データベースのデータベース全体のバックアップを実行します。 削除およびアーカイブ操作の前後に生産データベースのトランザクション ログをバックアップします。 完了復旧モデルを使用する場合は、各アーカイブ操作の直後にアーカイブ データベースのトランザクション ログをバックアップします。 単純復旧モデルを使用する場合は、各アーカイブ操作の直後にアーカイブ データベースの完全なデータベース バックアップを実行します。
-   アーカイブ データベースに接続してアーカイブ レコードを表示するように、AOS インスタンスを構成することができます。 ただし、この接続は読み取り専用である必要があります。 アーカイブ データベースにデータを更新するか、アプリケーション オブジェクト ツリー (AOT) からデータベース同期などの操作を実行すると、データおよびアプリケーションが破損します。

## <a name="terminology"></a>用語
このセクションでは、IDMF で使用される用語と概念について説明します。

| 期間                                                  | 説明                                                                                                                                                                                                                                                                                                                                                                                                                       |
|-------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 分析スナップショット                                     | データ サイズ、インデックス サイズ、インデックスの使用などのデータベース分析情報を取得するタスク。                                                                                                                                                                                                                                                                                                                           |
| アーカイブ                                               | 選択基準に一致するレコードをアーカイブ オブジェクトのリレーションシップ ツリー内のすべてのテーブルからアーカイブします。 アーカイブ プロセスは、実稼働データベースからアーカイブ データベースへレコードを移動します。 このトピックでは、アーカイブとオフラインという用語が同じ意味で使用されています。                                                                                                                                                  |
| アーカイブ オブジェクト                                        | ドライバー テーブルと関連テーブルを選択して作成するリレーション ツリー。                                                                                                                                                                                                                                                                                                                                               |
| テンプレートのアーカイブ                                      | IDMF に含まれているアーカイブ オブジェクトです。 アーカイブ テンプレートは、アーカイブ データに使用する前に、確認して保存する必要があります。 保存されているアーカイブ テンプレートは、アーカイブ オブジェクトになります。                                                                                                                                                                                                                                            |
| ベースライン                                              | 特定のクエリによってキャプチャされたデータベースまたはアプリケーションのスナップショット。                                                                                                                                                                                                                                                                                                                                          |
| 検索                                             | 検出プロセスはドライバー テーブルから始まり、Microsoft Dynamics AX アプリケーション メタデータを検索してリレーションシップ ツリーのすべてのテーブルを取得します。                                                                                                                                                                                                                                                            |
| ドライバー テーブル                                          | 関連するテーブルの親子関係の親テーブル。 ドライバー テーブルはルート親です。                                                                                                                                                                                                                                                                                                                           |
| エンティティ                                                | データベース テーブル。                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 例外                                             | 削除オブジェクトまたはアーカイブ オブジェクトでの使用が制限されている定義済みのテーブル、テーブル グループ、およびコンフィギュレーション キーの一覧。 例外パラメーターはテーブル、テーブル グループ、またはコンフィギュレーション キーにすることができます。                                                                                                                                                                                                                  |
| 式                                            | 削除オブジェクトやアーカイブ オブジェクトのルールに設定する条件。 複数の式がある場合、それらの式はクエリ内に "or" 句を形成します。                                                                                                                                                                                                                                                                             |
| レベル                                                 | 削除オブジェクトまたはアーカイブ オブジェクトのテーブルをグループ化。 ドライバー テーブルは、ルート レベルであるレベル 0 で開始します。 ドライバー テーブルに関連するすべてのテーブルはレベル 1 に配置されます。 レベル 1 のテーブルに関連するすべてのテーブルはレベル 2 に配置され、以下同様になります。 レベルは、リレーションシップ ツリーの親子階層を形成します。                                                                                           |
| 管理データベース                                   | IDMF によって使用されるデータベース。                                                                                                                                                                                                                                                                                                                                                                                                |
| マスター データ同期                           | 実動データベースからアーカイブ データベースにマスター データ テーブルを複製するプロセス。 このプロセスでは、本番データベースからアーカイブ データベースにマスター データ テーブルがコピーされ、同期された状態に保たれます。                                                                                                                                                                                                    |
| マスター データ テーブル                                    | マスター データ同期タスクは、生産データベースからアーカイブ データベースにマスター データ テーブルをコピーします。 これらのテーブルはアーカイブされません。つまり、レコードがアーカイブ データベースにコピーされた後、実稼働データベースにデータを保持します。                                                                                                                                                           |
| 基準                                               | 測定では、会社ごとの主要な業務プロセスの集計された統計情報を Microsoft Dynamics AX アプリケーションで年ごとに取得します。                                                                                                                                                                                                                                                                                              |
| メタデータ同期                              | 実働データベースからアーカイブ データベースにデータベース スキーマとデータベース オブジェクトを同期するプロセス。                                                                                                                                                                                                                                                                                                          |
| オフラインまたはオフライン                                  | アーカイブと同じです。                                                                                                                                                                                                                                                                                                                                                                                                              |
| パフォーマンス ダッシュボード                                 | パフォーンマンス ダッシュボードには、IDMF が使用するすべてのデータベースのデータベース構成の詳細、および実動およびアーカイブ データベースのテーブル統計およびクエリ統計が表示されます。                                                                                                                                                                                                                                         |
| 削除                                                 | 削除オブジェクトの関係ツリー内のすべての表から、選択基準に一致するレコードを削除します。 削除とリサイクルは、このトピックでは相互に置き換えることができます。                                                                                                                                                                                                                                                            |
| 削除オブジェクト                                          | ドライバー テーブルと関連テーブルを選択して作成するリレーション ツリー。                                                                                                                                                                                                                                                                                                                                               |
| タスクの削除                                            | 削除タスクは、削除オブジェクトのルールに設定された値に基づいて、削除オブジェクトを使用してデータベースからすべてのレコードを再利用します。                                                                                                                                                                                                                                                                                           |
| テンプレートの削除                                        | IDMF に含まれている削除オブジェクト。 削除テンプレートは、再利用で使用する前に、確認して保存する必要があります。 保存された削除テンプレートは、削除オブジェクトになります。                                                                                                                                                                                                                                                        |
| リサイクル                                               | 削除と同じです。                                                                                                                                                                                                                                                                                                                                                                                                                |
| リレーション                                              | 削除オブジェクトかアーカイブ オブジェクトに追加する子テーブル。 リレーションシップ ツリー内のすべてのテーブルには、ドライバー テーブルを除く親テーブルがあります。                                                                                                                                                                                                                                                                                |
| 関係ツリー                                     | ドライバー テーブルで始まる親子関係。 ドライバー テーブルは、リレーションシップ ツリーのレベル 0 つまりルート レベルに置かれます。 ドライバー テーブルを親として参照するすべてのテーブルはレベル 1 に配置されます。 レベル 1 のテーブルを親として参照するすべてのテーブルはレベル 2 に配置されます。 子-親関係は、すべての関連するテーブルがリレーション ツリーにグループ化されるまで深く進みます。 |
| 復元                                               | アーカイブされたデータをアーカイブ データベースから実働データベースに復元するプロセス。 復元プロセスは、特定データをアーカイブ データベースから実働データベースに移動します。                                                                                                                                                                                                                                      |
| ルール                                                  | 削除オブジェクトまたはアーカイブ オブジェクト内のいずれかのエンティティのフィールドに設定する条件。 複数のルールがある場合、それらのルールはクエリ内で "AND" 句を形成します。                                                                                                                                                                                                                                                          |
| システムの正常性は、アプリケーションの正常性とも呼ばれます | システムの正常性では、在庫管理、売掛金勘定、買掛金勘定、総勘定元帳、Microsoft Dynamics AX アプリケーションの管理モジュールからの選択されたメジャーの分析が提供されます。                                                                                                                                                                                                                                  |






