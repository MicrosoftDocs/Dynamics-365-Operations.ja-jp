---
title: "ワークスペースの Power BI 統合のコンフィギュレーション"
description: "このチュートリアルでは、新しい Microsoft Dynamics 365 for Finance and Operations、また PowerBI.com との統合をサポートする環境をコンフィギュレーションする方法について説明します。 このコンフィギュレーションにより、ワークスペースに Power BI コントロールが表示され、ユーザーはワークスペースに視覚エフェクトをピン留めすることができます。"
author: MilindaV2
manager: AnnBe
ms.date: 01/09/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
ms.search.form: PowerBIConfiguration
audience: IT Pro
ms.reviewer: sericks
ms.search.scope: Core, Operations
ms.custom: 27661
ms.assetid: 861cfa94-c6f3-4c84-89ac-22c78bf6b7a4
ms.search.region: Global
ms.author: milindav
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: efcb77ff883b29a4bbaba27551e02311742afbbd
ms.openlocfilehash: f85e9af8aafc0ebd20a93d6a712dbd7b0bf31639
ms.contentlocale: ja-jp
ms.lasthandoff: 08/09/2018

---

# <a name="configure-power-bi-integration-for-workspaces"></a><span data-ttu-id="d434d-104">ワークスペースの Power BI 統合のコンフィギュレーション</span><span class="sxs-lookup"><span data-stu-id="d434d-104">Configure Power BI integration for workspaces</span></span>

[!include [banner](../includes/banner.md)]

## <a name="overview"></a><span data-ttu-id="d434d-105">概要</span><span class="sxs-lookup"><span data-stu-id="d434d-105">Overview</span></span>

<span data-ttu-id="d434d-106">Microsoft Dynamics 365 for Finance and Operations で、ユーザーは自分の PowerBI.com アカウントからワークスペースにタイルおよびレポートをピン留めできます。</span><span class="sxs-lookup"><span data-stu-id="d434d-106">Microsoft Dynamics 365 for Finance and Operations lets users pin tiles and reports from their own PowerBI.com account to workspaces.</span></span>

<span data-ttu-id="d434d-107">この機能を使用するには、構成を一度設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-107">This functionality requires a one-time configuration of your environment.</span></span> <span data-ttu-id="d434d-108">管理者は、Finance and Operations および Microsoft Power BI が正しく通信し認証するためにこの手順を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-108">An administrator must do this step to enable Finance and Operations and Microsoft Power BI to communicate and authenticate correctly.</span></span>

<span data-ttu-id="d434d-109">Finance and Operations と PowerBI.com の両方はクラウドベースのサービスです。</span><span class="sxs-lookup"><span data-stu-id="d434d-109">Both Finance and Operations and PowerBI.com are cloud-based services.</span></span> <span data-ttu-id="d434d-110">Power BI タイルを表示するための Finance and Operations ワークスペースでは、Finance and Operations のサーバーはユーザーの代理として Power BI サービスに連絡し視覚化にアクセスする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-110">For a Finance and Operations workspace to show a Power BI tile, the Finance and Operations server must contact the Power BI service on behalf of a user and access the visualization.</span></span> <span data-ttu-id="d434d-111">そして、Finance and Operations ワークスペースで視覚化を再描画する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-111">It must then redraw the visualization in the Finance and Operations workspace.</span></span> <span data-ttu-id="d434d-112">Finance and Operations サーバーが Power BI サービスに「ユーザーの代わりに」連絡するという事実は重要です。</span><span class="sxs-lookup"><span data-stu-id="d434d-112">The fact that the Finance and Operations server contacts the Power BI service “on behalf of a user” is important.</span></span> <span data-ttu-id="d434d-113">`Tim@ContosoAX7.onmicrosoft.com` などのユーザーが BI PowerBI.com サービスに連絡すると、Power BI は、Tim の独自の PowerBI.com アカウントからタイルとレポートのみを表示するはずです。</span><span class="sxs-lookup"><span data-stu-id="d434d-113">When a user, such as `Tim@ContosoAX7.onmicrosoft.com`, contacts the PowerBI.com service, Power BI should show only tiles and reports from Tim’s own PowerBI.com account.</span></span>

<span data-ttu-id="d434d-114">この構成ステップが完了すると、Finance and Operations がユーザーの代理で PowerBI.com サービスに連絡できるようになります。</span><span class="sxs-lookup"><span data-stu-id="d434d-114">By completing this configuration step, you enable Finance and Operations to contact the PowerBI.com service on behalf of a user.</span></span> <span data-ttu-id="d434d-115">Finance and Operations と Power BI サービス間のフローは、このトピックの後半で説明する OAuth 2.0 Authorization Code Grant Flow に基づいています。</span><span class="sxs-lookup"><span data-stu-id="d434d-115">The flow between Finance and Operations and the Power BI service is based on the OAuth 2.0 Authorization Code Grant Flow, which is discussed later in this topic.</span></span>

## <a name="things-you-must-know-before-you-start"></a><span data-ttu-id="d434d-116">開始前に知っておく必要事項</span><span class="sxs-lookup"><span data-stu-id="d434d-116">Things you must know before you start</span></span> 

- <span data-ttu-id="d434d-117">Finance and Operations のシステム管理者である必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-117">You must be a system administrator in Finance and Operations.</span></span> <span data-ttu-id="d434d-118">このオプションは、**システム管理**メニューで利用できます。</span><span class="sxs-lookup"><span data-stu-id="d434d-118">This option is available on the **System administration** menu.</span></span>
- <span data-ttu-id="d434d-119">PowerBI.com のアカウントが必要です。</span><span class="sxs-lookup"><span data-stu-id="d434d-119">You must have a PowerBI.com account.</span></span> <span data-ttu-id="d434d-120">アカウントを持っていない場合は、試用版アカウントを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="d434d-120">You can create a trial account if you don't have an account.</span></span> <span data-ttu-id="d434d-121">(プロ ライセンスは、この構成ステップでは必要ありません。)</span><span class="sxs-lookup"><span data-stu-id="d434d-121">(A Pro license isn't required for this configuration step.)</span></span>
- <span data-ttu-id="d434d-122">ご自分の Power BI アカウントに、少なくとも 1 つのダッシュボードと 1 つのレポートがあることが必要です。</span><span class="sxs-lookup"><span data-stu-id="d434d-122">You must have at least one dashboard and one report in your Power BI account.</span></span> <span data-ttu-id="d434d-123">この構成ステップでは、ダッシュボードやレポートは必要ではありませんが、PowerBI.com アカウントにコンテンツが含まれていない場合コンフィギュレーションを検証することができないかもしれません。</span><span class="sxs-lookup"><span data-stu-id="d434d-123">Although the dashboard and report aren't required for this configuration step, you might not be able to validate the configuration if you don't have any content in your PowerBI.com account.</span></span>
- <span data-ttu-id="d434d-124">Microsoft Azure Active Directory (Azure AD) アカウントの管理者である必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-124">You must be an administrator for your Microsoft Azure Active Directory (Azure AD) account.</span></span> <span data-ttu-id="d434d-125">管理者ではない場合は、管理者ユーザーはこのコンフィギュレーションの手順をユーザーのために実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-125">If you aren't the administrator, an administrative user must perform this configuration step for you.</span></span>
- <span data-ttu-id="d434d-126">Finance and Operations に構成されている Azure AD ドメインは、PowerBI.com アカウントに使用したのと同じドメインにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-126">The Azure AD domain that is configured for Finance and Operations must be the same domain that you used for your PowerBI.com account.</span></span> <span data-ttu-id="d434d-127">例については、Contoso.com ドメイン内で Finance and Operations をプロビジョニングした場合、そのドメインで `Tim@ContosoAX7.onmicrosoft.com` などの Power BI 勘定を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-127">For an example, if you provisioned Finance and Operations in the Contoso.com domain, you must have Power BI accounts in that domain, such as `Tim@ContosoAX7.onmicrosoft.com`.</span></span>

## <a name="registration-process"></a><span data-ttu-id="d434d-128">登録プロセス</span><span class="sxs-lookup"><span data-stu-id="d434d-128">Registration process</span></span> 

1. <span data-ttu-id="d434d-129">新しいブラウザー セッションを開いて、Power BI アプリ登録を [https://dev.powerbi.com/apps](https://dev.powerbi.com/apps) で開始します。</span><span class="sxs-lookup"><span data-stu-id="d434d-129">Open a new browser session, and start the Power BI app registration at [https://dev.powerbi.com/apps](https://dev.powerbi.com/apps).</span></span> <span data-ttu-id="d434d-130">次の図のようなページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="d434d-130">A page that resembles the following illustration appears.</span></span>

    ![Power BI ページのアプリケーションを登録](./media/PowerBI-registration1.JPG)

2. <span data-ttu-id="d434d-132">**既存のアカウントでサインイン** を選択します。</span><span class="sxs-lookup"><span data-stu-id="d434d-132">Select **Sign in with your existing account**.</span></span> <span data-ttu-id="d434d-133">Finance and Operations で使用しているものと同じ Azure AD アカウントを使用して、ブラウザーでサインインしたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="d434d-133">Make sure that your browser signed you in by using the same Azure AD account that you use for Finance and Operations.</span></span> <span data-ttu-id="d434d-134">サインインの後に、ユーザーの名前は、ページに表示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-134">After sign-in, the user’s name should appear on the page.</span></span>

    ![サインイン後にページに表示されるユーザー名](./media/PowerBI-registration2.JPG)

3. <span data-ttu-id="d434d-136">**アプリ名**フィールドで、**Contoso Dyn365 for Operations** などの名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="d434d-136">In the **App name** field, enter a name, such as **Contoso Dyn365 for Operations**.</span></span>
4. <span data-ttu-id="d434d-137">**リダイレクト URL** フィールドで、Finance and Operations クライアントのベース URL をコピーして貼り付けてから OAuth の添え字を追加します。</span><span class="sxs-lookup"><span data-stu-id="d434d-137">In the **Redirect URL** field, copy and paste the base URL of your Finance and Operations client, and then add the OAuth suffix.</span></span> <span data-ttu-id="d434d-138">次に例を示します: `http://contosoax7.cloud.dynamics.com/oauth`</span><span class="sxs-lookup"><span data-stu-id="d434d-138">Here is an example: `http://contosoax7.cloud.dynamics.com/oauth`</span></span>
5. <span data-ttu-id="d434d-139">**ホーム ページの URL** フィールドに、ホーム ページの URL を入力し、モック拡張を追加します。</span><span class="sxs-lookup"><span data-stu-id="d434d-139">In the **Home page URL** field, enter your home page URL, and add a mock extension.</span></span> <span data-ttu-id="d434d-140">次に例を示します: `http://contosoax7.cloud.dynamics.com/testenv/`</span><span class="sxs-lookup"><span data-stu-id="d434d-140">Here is an example: `http://contosoax7.cloud.dynamics.com/testenv/`</span></span>

    <span data-ttu-id="d434d-141">この値は必須ですが、ワークスペースの統合には必要ありません。</span><span class="sxs-lookup"><span data-stu-id="d434d-141">This value is mandatory, but it isn't required for the workspace integration.</span></span> <span data-ttu-id="d434d-142">アプリ ID URI がモック URL であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="d434d-142">Make sure that the App ID URI is a mock URL.</span></span> <span data-ttu-id="d434d-143">展開の実際の URL を使用すると、Microsoft Excel アドインなど他の Azure AD アプリケーションでサインインの問題が発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="d434d-143">If you use the real URL of your deployment, you might cause sign-in issues in other Azure AD applications, such as the Microsoft Excel Add-in.</span></span> <span data-ttu-id="d434d-144">次に例を示します: `http://contosoax7.cloud.dynamics.com/testenv/`</span><span class="sxs-lookup"><span data-stu-id="d434d-144">Here is an example: `http://contosoax7.cloud.dynamics.com/testenv/`</span></span>

6. <span data-ttu-id="d434d-145">**手順 3 アクセスする API を選択** で、すべてのチェック ボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="d434d-145">Under **Step 3 Choose APIs to access**, select all the check boxes.</span></span>
7. <span data-ttu-id="d434d-146">**アプリの登録** を選択します。</span><span class="sxs-lookup"><span data-stu-id="d434d-146">Select **Register App**.</span></span>
8. <span data-ttu-id="d434d-147">**クライアント ID** および**クライアント シークレット** フィールドの値をメモしておきます。</span><span class="sxs-lookup"><span data-stu-id="d434d-147">Make a note of the values in the **Client ID** and **Client secret** fields.</span></span> <span data-ttu-id="d434d-148">次の手順で、これらの値を使用します。</span><span class="sxs-lookup"><span data-stu-id="d434d-148">You will use these values in the next procedure.</span></span>

    ![クライアント ID とクライアント シークレット フィールド](./media/PowerBI-registration3.JPG)

## <a name="specify-power-bi-settings-in-finance-and-operations"></a><span data-ttu-id="d434d-150">Finance and Operations で Power BI 設定を指定</span><span class="sxs-lookup"><span data-stu-id="d434d-150">Specify Power BI settings in Finance and Operations</span></span>

1. <span data-ttu-id="d434d-151">Finance and Operations クライアントで **Power BI コンフィギュレーション** ページを開きます。</span><span class="sxs-lookup"><span data-stu-id="d434d-151">In the Finance and Operations client, open the **Power BI configuration** page.</span></span>

    ![編集前の Power BI 構成ページ](./media/PowerBIpage-before-edit.JPG)

2. <span data-ttu-id="d434d-153">**編集**を選択します。</span><span class="sxs-lookup"><span data-stu-id="d434d-153">Select **Edit**.</span></span>
3. <span data-ttu-id="d434d-154">**有効** オプションを **はい** に設定します。</span><span class="sxs-lookup"><span data-stu-id="d434d-154">Set the **Enabled** option to **Yes**.</span></span>

    <span data-ttu-id="d434d-155">**Azure AD テナント** フィールドには、テナント (またはドメイン名) が表示されます。</span><span class="sxs-lookup"><span data-stu-id="d434d-155">The **Azure AD Tenant** field should show your tenant (or domain name).</span></span> <span data-ttu-id="d434d-156">たとえば、ContosoAX7.onmicrosoft.com テナントの Finance and Operations をプロビジョニングした場合、フィールドは前の図で示す値を持つ必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-156">For example, if you provisioned Finance and Operations with the ContosoAX7.onmicrosoft.com tenant, the field should have the value that is shown in the previous illustration.</span></span> <span data-ttu-id="d434d-157">このフィールドが空白の場合は、適切なテナントを入力できます。</span><span class="sxs-lookup"><span data-stu-id="d434d-157">If the field is blank, you can enter the correct tenant.</span></span>

    <span data-ttu-id="d434d-158">Power BI 統合機能は実稼働前は機能せず、Azure AD ドメインをテストしないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="d434d-158">Note that the Power BI integration feature doesn’t work on pre-production and test Azure AD domains.</span></span> <span data-ttu-id="d434d-159">管理者ユーザー ツールを実行して、生産 Azure ADドメインを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-159">You must change to a production Azure AD domain by running the Admin user tool.</span></span>

4. <span data-ttu-id="d434d-160">**クライアント ID** フィールドで、前の手順で Power BI から取得した**クライアント ID** の値を入力します。</span><span class="sxs-lookup"><span data-stu-id="d434d-160">In the **Client ID** field, enter the **Client ID** value that you got from Power BI in the previous procedure.</span></span>
5. <span data-ttu-id="d434d-161">**アプリケーション キー** フィールドで、前の手順で Power BI から取得した**クライアント シークレット**の値を入力します。</span><span class="sxs-lookup"><span data-stu-id="d434d-161">In the **Application Key** field, enter the **Client Secret** value that you got from Power BI in the previous procedure.</span></span>
6. <span data-ttu-id="d434d-162">**リダイレクト URL** フィールドが前の手順で Power BI に入力したものと同じリダイレクト URL に設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="d434d-162">Make sure that the **Redirect URL** field is set to the same redirect URL that you entered in Power BI in the previous procedure.</span></span>

    <span data-ttu-id="d434d-163">たとえば、Finance and Operations クライアントのベース URL をコピーして貼り付けてから OAuth の添え字を追加します。</span><span class="sxs-lookup"><span data-stu-id="d434d-163">For example, copy and paste the base URL of your Finance and Operations client, and then add the OAuth suffix.</span></span> <span data-ttu-id="d434d-164">次に例を示します: `http://contosoax7.cloud.dynamics.com/oauth`</span><span class="sxs-lookup"><span data-stu-id="d434d-164">Here is an example: `http://contosoax7.cloud.dynamics.com/oauth`</span></span>

7. <span data-ttu-id="d434d-165">**タイル フィルター テーブル** フィールドに、**会社** と入力します。</span><span class="sxs-lookup"><span data-stu-id="d434d-165">In the **Tile filter table** field, enter **Company**.</span></span> <span data-ttu-id="d434d-166">**タイル フィルター列**フィールドに、**ID** と入力します。</span><span class="sxs-lookup"><span data-stu-id="d434d-166">In the **Tile filter column** field, enter **ID**.</span></span>

    <span data-ttu-id="d434d-167">これらの 2 つの値は、ワークスペースに固定された Power BI タイルのフィルタリングを有効にします。</span><span class="sxs-lookup"><span data-stu-id="d434d-167">These two values enable filtering of Power BI tiles that are pinned to a workspace.</span></span> <span data-ttu-id="d434d-168">例については、ワークスペースの会社コンテキストが **USMF** である場合、Power BI タイルのデータは USMF 会社に対してフィルター処理されます。</span><span class="sxs-lookup"><span data-stu-id="d434d-168">For an example, if the company context of a workspace is **USMF**, the data on the Power BI tile will be filtered for the USMF company.</span></span>

    <span data-ttu-id="d434d-169">Power BI のコンテンツに **会社** という名前のテーブルおよび **ID** という名前の列がある場合にのみ、会社のフィルターを適用することができます。</span><span class="sxs-lookup"><span data-stu-id="d434d-169">You can apply the company filter only if your Power BI content has a table that is named **Company** and a column that is named **ID**.</span></span> <span data-ttu-id="d434d-170">Finance and Operations によってリリースされた既存の Power BI コンテンツは、この会話を使用します。</span><span class="sxs-lookup"><span data-stu-id="d434d-170">Ready-made Power BI content that is released with Finance and Operations uses this convention.</span></span>

    <span data-ttu-id="d434d-171">Power BI コンテンツに**会社**および **ID** という名前のテーブルとフィールドがそれぞれある場合、フィルターが無視され、タイルにフィルター処理されないデータが表示されます。</span><span class="sxs-lookup"><span data-stu-id="d434d-171">If the Power BI content (that you wish to pin) doesn't have a table and a field that are named **Company** and **ID** respectively, the filter is ignored, and the tile will show unfiltered data.</span></span>

    ![タイル フィルター テーブルとタイル フィルターの列フィールド](media/1820cc9320b91814dbb7d7c90c04d49f.png)

8. <span data-ttu-id="d434d-173">**保存** を選択してページを閉じます。</span><span class="sxs-lookup"><span data-stu-id="d434d-173">Select **Save**, and close the page.</span></span>

## <a name="pin-tiles-to-a-workspace"></a><span data-ttu-id="d434d-174">ワークスペースにタイルを固定</span><span class="sxs-lookup"><span data-stu-id="d434d-174">Pin tiles to a workspace</span></span>

1. <span data-ttu-id="d434d-175">設定を有効にするには、**元帳予算と予測** や **引当管理** などのワークスペースを開きます。</span><span class="sxs-lookup"><span data-stu-id="d434d-175">To validate the configuration, open a workspace, such as **Ledger budgets and forecasts** or **Reservation management**.</span></span> <span data-ttu-id="d434d-176">この例では、**元帳予算および予測**ワークスペースを使用します。</span><span class="sxs-lookup"><span data-stu-id="d434d-176">For this example, we will use the **Ledger budgets and forecasts** workspace.</span></span>

    <span data-ttu-id="d434d-177">**Power BI** セクションとバナーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="d434d-177">You should see the **Power BI** section and a banner.</span></span> <span data-ttu-id="d434d-178">右にスクロールすることが必要な可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-178">You might have to scroll to the right.</span></span>

    ![Power BI セクションおよび元帳予算および予測ワークスペースのバナー](./media/Workspace.JPG)

3. <span data-ttu-id="d434d-180">バナーで、**使用開始**を選択します。</span><span class="sxs-lookup"><span data-stu-id="d434d-180">In the banner, select **Get started**.</span></span> <span data-ttu-id="d434d-181">Finance and Operations の Power BI をはじめて使用する場合は、Finance and Operations クライアントから Power BI へのサインインを承認するように求められます。</span><span class="sxs-lookup"><span data-stu-id="d434d-181">If you're starting Power BI from Finance and Operations for the first time, you're prompted to authorize sign-in to Power BI from the Finance and Operations client.</span></span> <span data-ttu-id="d434d-182">**ここをクリックして Power BI に承認を与える** を選択します。</span><span class="sxs-lookup"><span data-stu-id="d434d-182">Select **Click here to provide authorization to Power BI**.</span></span>

    <span data-ttu-id="d434d-183">ユーザーは、初めて Power BI コンテンツをピン留めするとき、このステップを完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-183">Your users will have to complete this step the first time that they pin Power BI content.</span></span>

    ![Power BI の承認](./media/Authorize.JPG)

    > [!Note]
    > <span data-ttu-id="d434d-185">この手順に問題がある場合、**トラブルシューティングにおける一般的なエラー**セクションを参照し、**ユーザーが代わって会社データにアクセスするアプリケーションに同意できる**オプションに関する情報に留意します。</span><span class="sxs-lookup"><span data-stu-id="d434d-185">If you have an issue with this step, please see the **Troubleshooting common errors** section and note the information about the **Users can consent to apps accessing company data on their behalf** option.</span></span>

4. <span data-ttu-id="d434d-186">Azure AD の同意ページは、お客様の同意を求めます。</span><span class="sxs-lookup"><span data-stu-id="d434d-186">The Azure AD consent page asks for your consent.</span></span> <span data-ttu-id="d434d-187">Finance and Operations がユーザーに代わって PowerBI.com にアクセスするには、ユーザーの同意が必要です。</span><span class="sxs-lookup"><span data-stu-id="d434d-187">User consent is required for Finance and Operations to access PowerBI.com on behalf of the user.</span></span> <span data-ttu-id="d434d-188">**受け入れる** を選択します。</span><span class="sxs-lookup"><span data-stu-id="d434d-188">Select **Accept**.</span></span>

    ![同意ページ](media/65da7a9b5ac0a328568f76c4e7a0770c.png)

5. <span data-ttu-id="d434d-190">Finance and Operations の Azure AD に既にサインインしているので、再度資格情報を入力する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d434d-190">Because you're already signed in to Azure AD in Finance and Operations, you don't have to enter your credentials again.</span></span> <span data-ttu-id="d434d-191">新しいタブが表示され、Finance and Operations と Power BI の間の接続を承認するように求められます。</span><span class="sxs-lookup"><span data-stu-id="d434d-191">A new tab appears, where you're prompted to authorize the connection between Finance and Operations and Power BI.</span></span> <span data-ttu-id="d434d-192">接続を承認し元のタブに戻ります。</span><span class="sxs-lookup"><span data-stu-id="d434d-192">Authorize the connection, and then return to the original tab.</span></span>
6. <span data-ttu-id="d434d-193">PowerBI.com アカウントのタイルの一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="d434d-193">A list of tiles from your PowerBI.com account appears.</span></span> <span data-ttu-id="d434d-194">1 つまたは複数のタイルを選択し、選択したワークスペースにピン留めします。</span><span class="sxs-lookup"><span data-stu-id="d434d-194">Select one or more tiles to pin to the selected workspace.</span></span>

## <a name="troubleshooting-common-errors"></a><span data-ttu-id="d434d-195">一般的なエラーのトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="d434d-195">Troubleshooting common errors</span></span>

<span data-ttu-id="d434d-196">前の手順で**承諾**を選択した後、プロセスが失敗した場合、次のエラー メッセージが表示される場合があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-196">After you select **Accept** in the previous procedure, you might receive the following error message if the process is unsuccessful.</span></span> <span data-ttu-id="d434d-197">エラーの詳細がメッセージの下部に表示されていることに注意します。</span><span class="sxs-lookup"><span data-stu-id="d434d-197">Notice that details of the error appear at the bottom of the message.</span></span> <span data-ttu-id="d434d-198">追加の技術情報は、原因を特定するのに役立つヒントを提供します (値は次の図で半透明)。</span><span class="sxs-lookup"><span data-stu-id="d434d-198">Additional technical information provide clues that can help you determine what went wrong (values are obscured in the following illustration).</span></span>

![エラー メッセージ](media/ce094da8b9e0674c5cbd75616e40d829.png)

### <a name="some-common-issues-and-the-resolution-steps"></a><span data-ttu-id="d434d-200">一般的な問題および解決手順</span><span class="sxs-lookup"><span data-stu-id="d434d-200">Some common issues and the resolution steps</span></span>

| <span data-ttu-id="d434d-201">エラー</span><span class="sxs-lookup"><span data-stu-id="d434d-201">Error</span></span>                                                       | <span data-ttu-id="d434d-202">解像度</span><span class="sxs-lookup"><span data-stu-id="d434d-202">Resolution</span></span> |
|-------------------------------------------------------------|------------|
| <span data-ttu-id="d434d-203">大文字と小文字の区別があるため、返信アドレスが一致しませんでした。</span><span class="sxs-lookup"><span data-stu-id="d434d-203">The reply address didn't match because of case-sensitivity.</span></span> | <span data-ttu-id="d434d-204">Power BI に入力した URL は、アプリケーション ID と一致しない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-204">The URL that you entered in Power BI might not match the application ID.</span></span> <span data-ttu-id="d434d-205">Power BI を起動し、登録プロセスを再実行します。</span><span class="sxs-lookup"><span data-stu-id="d434d-205">Start Power BI, and rerun the registration process.</span></span> |
| <span data-ttu-id="d434d-206">Power BI サービスは利用できません。</span><span class="sxs-lookup"><span data-stu-id="d434d-206">The Power BI service is unavailable.</span></span>                        | <span data-ttu-id="d434d-207">この問題は頻繁には発生しませんが、Power BI サービスに到達できないことがあります。</span><span class="sxs-lookup"><span data-stu-id="d434d-207">This issue doesn't occur very often, but the Power BI service might sometimes be unreachable.</span></span> <span data-ttu-id="d434d-208">再登録する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d434d-208">You don't have to re-register.</span></span> <span data-ttu-id="d434d-209">後でタイルをワークスペースに固定してみてください。</span><span class="sxs-lookup"><span data-stu-id="d434d-209">Try to pin a tile to a workspace later.</span></span> |
| <span data-ttu-id="d434d-210">アプリケーションにアクセスすることはできません。</span><span class="sxs-lookup"><span data-stu-id="d434d-210">You can’t access the application.</span></span>                           | <span data-ttu-id="d434d-211">登録プロセス中に、**手順 3 アクセスする API** の下のすべてのチェック ボックスが選択されなかった可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-211">You probably didn't select all the check boxes under **Step 3 Choose APIs to access** during the registration process.</span></span> <span data-ttu-id="d434d-212">Power BI を起動し、登録プロセスを再実行します。</span><span class="sxs-lookup"><span data-stu-id="d434d-212">Start Power BI, and rerun the registration process.</span></span> |
| <span data-ttu-id="d434d-213">Power BI タイル ページは空です (コンテンツは表示されません)。</span><span class="sxs-lookup"><span data-stu-id="d434d-213">The Power BI tiles page is empty (no content is shown).</span></span>     | <span data-ttu-id="d434d-214">PowerBI.com アカウントに、ダッシュ ボードまたはタイルがない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-214">Your PowerBI.com account might not have a dashboard or any tiles.</span></span> <span data-ttu-id="d434d-215">サンプル ダッシュ ボードなどのダッシュボードを追加して、もう一度をタイルをピン留めしてみてください。</span><span class="sxs-lookup"><span data-stu-id="d434d-215">Add a dashboard, such as a sample dashboard, and try to pin a tile again.</span></span> |
| <span data-ttu-id="d434d-216">Power BI を許可する際のエラー</span><span class="sxs-lookup"><span data-stu-id="d434d-216">Error when Authorizing Power BI</span></span>                             | <span data-ttu-id="d434d-217">Azure 管理者ダッシュボード内の、**ユーザーおよびグループ > ユーザー設定** の下で、**ユーザーはアプリが会社のデータにアクセスすることに同意できる** オプションが **はい** に設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="d434d-217">Within the Azure Admin Dashboard, under **Users and Groups > User settings**, make sure that the **Users can consent to apps accessing company data on their behalf** option is set to **Yes**.</span></span> |

## <a name="technical-details-about-oauth-20-authorization-code-grant-flow"></a><span data-ttu-id="d434d-218">OAuth 2.0 承認コード付与フローに関する技術詳細</span><span class="sxs-lookup"><span data-stu-id="d434d-218">Technical details about OAuth 2.0 Authorization Code Grant Flow</span></span>

<span data-ttu-id="d434d-219">このセクションでは、認証フェーズ中にタイルのリストがユーザーに表示される直前に、Finance and Operations 間の許可フローと PowerBI.com サービスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="d434d-219">This section describes the authorization flow between Finance and Operations and the PowerBI.com service just before the list of tiles is shown to the user during the authentication phase.</span></span> <span data-ttu-id="d434d-220">Azure AD サービスでは、このフローを実行して、2 つのサービスがユーザーの代わりに安全に通信できるようにします。</span><span class="sxs-lookup"><span data-stu-id="d434d-220">The Azure AD service runs this flow to enable two services to securely communicate on behalf of a user.</span></span>

<span data-ttu-id="d434d-221">次の図は、認証フローを示しています。</span><span class="sxs-lookup"><span data-stu-id="d434d-221">The following illustration shows the authorization flow.</span></span>

![認証フロー](media/caaddad46d4ea9e3c7e12e896733594a.png)

1. <span data-ttu-id="d434d-223">ユーザーが Finance and Operations 内のワークスペースに初めてアクセスすると、初回の接続の開始をユーザーに求めるメッセージが Power BI バナーに表示されます。</span><span class="sxs-lookup"><span data-stu-id="d434d-223">When a user visits a workspace in Finance and Operations for the first time, the Power BI banner prompts the user to start the first-time connection.</span></span> <span data-ttu-id="d434d-224">ユーザーが初めて接続を開始することに合意した場合、OAuth 2.0 承認コード付与フローが開始されます。</span><span class="sxs-lookup"><span data-stu-id="d434d-224">If the user agrees to start the first-time connection, an OAuth 2.0 Authorization Code Grant Flow is started.</span></span>
2. <span data-ttu-id="d434d-225">Finance and Operations はユーザー エージェントを Azure AD 承認エンドポイントにリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="d434d-225">Finance and Operations redirects the user agent to the Azure AD authorization endpoint.</span></span> <span data-ttu-id="d434d-226">同意が必要な場合、ユーザーは認証され、同意します。</span><span class="sxs-lookup"><span data-stu-id="d434d-226">The user is authenticated and consents, if consent is required.</span></span> <span data-ttu-id="d434d-227">ユーザーは Finance and Operations を実行しているため、既に Azure AD にサインインしています。</span><span class="sxs-lookup"><span data-stu-id="d434d-227">Because the user is running Finance and Operations, he or she is already signed in to Azure AD.</span></span> <span data-ttu-id="d434d-228">したがって、ユーザーは自分の資格情報を再度入力する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d434d-228">Therefore, the user doesn't have to enter her or his credentials again.</span></span>
3. <span data-ttu-id="d434d-229">Azure AD 承認エンドポイントは、Azure AD エージェントを、認証コードと共にクライアント アプリケーションにもう一度リダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="d434d-229">The Azure AD authorization endpoint redirects the Azure AD agent back to the client application together with an authorization code.</span></span> <span data-ttu-id="d434d-230">ユーザー エージェントは、クライアント アプリケーションのリダイレクト URL に認証コードを返します。</span><span class="sxs-lookup"><span data-stu-id="d434d-230">The user agent returns the authorization code to the client application’s redirect URL.</span></span> <span data-ttu-id="d434d-231">アプリケーション リダイレクト URL は、このトピックで説明するように、Power BI コンフィギュレーションで管理されるパラメーターです。</span><span class="sxs-lookup"><span data-stu-id="d434d-231">The application redirect URL is a parameter that is maintained in your Power BI configuration, as described in this topic.</span></span>
4. <span data-ttu-id="d434d-232">Finance and Operations にユーザーの代わりに認証コードが含まれているので、Azure AD トークン発行エンドポイントからアクセス トークンを要求します。</span><span class="sxs-lookup"><span data-stu-id="d434d-232">Now that Finance and Operations has an authorization code on behalf of the user, it requests an access token from the Azure AD token issuance endpoint.</span></span> <span data-ttu-id="d434d-233">Finance and Operations は、ユーザーが同意したことを証明するための認証コードを表示します。</span><span class="sxs-lookup"><span data-stu-id="d434d-233">Finance and Operations presents the authorization code to prove that the user has consented.</span></span>
5. <span data-ttu-id="d434d-234">Azure AD トークン発行エンドポイントは、アクセス トークンと更新トークンを返します。</span><span class="sxs-lookup"><span data-stu-id="d434d-234">The Azure AD token issuance endpoint returns an access token and a refresh token.</span></span> <span data-ttu-id="d434d-235">Finance and Operations は、Power BI からの視覚化を要求するアクセス トークンを持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-235">Finance and Operations must have the access token to request a visualization from Power BI.</span></span> <span data-ttu-id="d434d-236">アクセス トークンは、短期間で有効期限が切れます。</span><span class="sxs-lookup"><span data-stu-id="d434d-236">Access tokens expire after a short time.</span></span> <span data-ttu-id="d434d-237">更新トークンを使用して、新しいトークンを要求できます。</span><span class="sxs-lookup"><span data-stu-id="d434d-237">The refresh token can be used to request a new token.</span></span>
6. <span data-ttu-id="d434d-238">Finance and Operations はアクセス トークンを使用して、Power BI によって提供される Web API への認証をします。</span><span class="sxs-lookup"><span data-stu-id="d434d-238">Finance and Operations uses the access token to authenticate to the Web API that is provided by Power BI.</span></span> <span data-ttu-id="d434d-239">Finance and Operations は、Web API を使用して、Power BI ビジュアル化がユーザーの代理として表示されるよう要求します。</span><span class="sxs-lookup"><span data-stu-id="d434d-239">Finance and Operations uses the Web API to request that Power BI visualizations be shown on behalf of the user.</span></span>
7. <span data-ttu-id="d434d-240">クライアント アプリケーションが認証された後、Power BI Web API は、ユーザーに要求された視覚化を返します。</span><span class="sxs-lookup"><span data-stu-id="d434d-240">After the client application is authenticated, the Power BI Web API returns the requested visualization to the user.</span></span> <span data-ttu-id="d434d-241">Power BI はユーザーが表示を許可されているデータのみを返すことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="d434d-241">Note that Power BI returns only the data that the user is allowed to see.</span></span> <span data-ttu-id="d434d-242">Power BI Web API はユーザーが Finance and Operations を介して接続していることを検出するため、ユーザーを正しく解決することができます。</span><span class="sxs-lookup"><span data-stu-id="d434d-242">Because the Power BI Web API detects that the user is connecting via Finance and Operations, it can correctly resolve the user.</span></span>
8. <span data-ttu-id="d434d-243">ユーザーは、Finance and Operations ワークスペースで Power BI タイルを表示します。</span><span class="sxs-lookup"><span data-stu-id="d434d-243">The user sees Power BI tiles in the Finance and Operations workspace.</span></span>

<span data-ttu-id="d434d-244">その後のアクセスについては、このフロー全体は発生しません。</span><span class="sxs-lookup"><span data-stu-id="d434d-244">For subsequent visits, this whole flow doesn't occur.</span></span> <span data-ttu-id="d434d-245">Finance and Operations はユーザーの代理としてアクセス トークンを持つため、手順 1. ～ 4. を繰り返す必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d434d-245">Because Finance and Operations has the access token on behalf of the user, steps 1 through 4 don't have to be repeated.</span></span>

## <a name="whats-next"></a><span data-ttu-id="d434d-246">次の新機能</span><span class="sxs-lookup"><span data-stu-id="d434d-246">What’s next</span></span>

<span data-ttu-id="d434d-247">PowerBI.com 統合機能を有効にしたので、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="d434d-247">Now that you've enabled the PowerBI.com integration feature, you might want to perform the following steps:</span></span>

- <span data-ttu-id="d434d-248">組織が PowerBI.com を使用している場合、ユーザーを招待して、彼ら自身の PowerBI.com アカウントのタイルおよびレポートをワークスペースにピン留めすると簡単にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="d434d-248">If your organization uses PowerBI.com, you can invite users to pin tiles and reports from their own PowerBI.com account to workspaces for easy access.</span></span>
- <span data-ttu-id="d434d-249">Microsoft Dynamics 365 for Finance and Operations, Enterprise edition (2017 年 7月) またはそれ以降のバージョンを使用している場合、既成の分析ワークスペースが自分のワークスペースに組み込まれることがあります。</span><span class="sxs-lookup"><span data-stu-id="d434d-249">If you're using Microsoft Dynamics 365 for Finance and Operations, Enterprise edition (July 2017) or later, ready-made analytical workspaces might be built into your workspaces.</span></span> <span data-ttu-id="d434d-250">現在、この機能はマルチボックス環境でのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="d434d-250">Currently, this feature is available only in multi-box environments.</span></span> <span data-ttu-id="d434d-251">以前のバージョンを使用している場合は、PowerBI.com アカウントに既製のレポートを配置することができます。</span><span class="sxs-lookup"><span data-stu-id="d434d-251">If you're using a previous version, you can deploy the ready-made reports to your PowerBI.com account.</span></span> <span data-ttu-id="d434d-252">レポートは、Microsoft Dynamics Lifecycle Services (LCS) に配置されます。</span><span class="sxs-lookup"><span data-stu-id="d434d-252">The reports are distributed in Microsoft Dynamics Lifecycle Services (LCS).</span></span> 
- <span data-ttu-id="d434d-253">エンティティ ストアで入出できるデータを使用して、独自の Power BI コンテンツを作成する場合があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-253">You might want to create your own Power BI content by using data that is available in Entity store.</span></span> <span data-ttu-id="d434d-254">(エンティティ格納とは、Finance and Operations に含まれる運用データウェアハウスのことです。) 詳細については、[エンティティ ストアとの Power BI の統合](power-bi-integration-entity-store.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d434d-254">(Entity store is the operational data warehouse that is included with Finance and Operations.) For more information, see [Overview of Power BI integration with Entity store](power-bi-integration-entity-store.md).</span></span>
- <span data-ttu-id="d434d-255">Finance and Operations に付属している既製の Power BI コンテンツと外部データをマッシュアップする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d434d-255">You might want to mash up external data with ready-made Power BI content that is provided with Finance and Operations.</span></span> <span data-ttu-id="d434d-256">Power BI ソリューション テンプレートを使用して、このデータのマッシュアップを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="d434d-256">You can do this data mash-up by using Power BI solution templates.</span></span>

