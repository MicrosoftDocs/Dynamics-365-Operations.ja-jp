---
title: 自分のデータベースの持ち込み (BYOD)
description: このトピックでは、エンティティを 独自の Azure SQL データベースにエクスポートする方法について説明します。
author: Sunil-Garg
manager: AnnBe
ms.date: 12/10/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Developer, IT Pro
ms.reviewer: margoc
ms.search.scope: Operations
ms.search.region: Global
ms.author: sunilg
ms.search.validFrom: 2016-08-30
ms.dyn365.ops.version: Platform update 2
ms.openlocfilehash: 31ae2cbeb5d6589d2ad7c16a6119812213cb40f1
ms.sourcegitcommit: 0f530e5f72a40f383868957a6b5cb0e446e4c795
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/29/2019
ms.locfileid: "368777"
---
# <a name="bring-your-own-database-byod"></a><span data-ttu-id="bce3e-103">自分のデータベースの持ち込み (BYOD)</span><span class="sxs-lookup"><span data-stu-id="bce3e-103">Bring your own database (BYOD)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="bce3e-104">このトピックでは、管理者がMicrosoft Dynamics 365 for Finance and Operations からのデータ エンティティを自分の Microsoft Azure SQL データベースにエクスポートする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-104">This topic explains how administrators can export data entities from Microsoft Dynamics 365 for Finance and Operations into their own Microsoft Azure SQL database.</span></span> <span data-ttu-id="bce3e-105">この機能は、*自分のデータベースの持ち込み* (BYOD) とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-105">This feature is also known as *bring your own database* (BYOD).</span></span> <span data-ttu-id="bce3e-106">BYOD 機能は、Microsoft Dynamics AX でプラットフォーム更新プログラム 2 (2016 年 8 月) によってリリースされました。</span><span class="sxs-lookup"><span data-stu-id="bce3e-106">The BYOD feature was released in Microsoft Dynamics AX with platform update 2 (August 2016).</span></span> <span data-ttu-id="bce3e-107">マイナーな改良およびバグ修正は、後続のプラットフォーム更新プログラムに含まれています。</span><span class="sxs-lookup"><span data-stu-id="bce3e-107">Minor improvements and bug fixes have been included in subsequent platform updates.</span></span>

<span data-ttu-id="bce3e-108">BYOD 機能により、管理者は、独自のデータベースを構成し、Finance and Operations で使用できる 1 つまたは複数のデータ エンティティをそこにエクスポートできます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-108">The BYOD feature lets administrators configure their own database, and then export one or more data entities that are available in Finance and Operations into it.</span></span> <span data-ttu-id="bce3e-109">(現時点では、1,700 以上のデータ エンティティが使用可能です。) 具体的には、この機能により次のタスクを実行できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-109">(Currently, more than 1,700 data entities are available.) Specifically, this feature lets you complete these tasks:</span></span>

- <span data-ttu-id="bce3e-110">エンティティ データを Finance and Operations からエクスポートできる 1 つ以上の SQL データベースを定義します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-110">Define one or more SQL databases that you can export entity data from Finance and Operations into.</span></span>
- <span data-ttu-id="bce3e-111">すべてのレコード (*完全にプッシュ*) または変更または削除されたレコードのみ (*差分プッシュ*) を、エキスポートします。</span><span class="sxs-lookup"><span data-stu-id="bce3e-111">Export either all the records (*full push*) or only the records that have changed or been deleted (*incremental push*).</span></span>
- <span data-ttu-id="bce3e-112">定期的なエクスポートを有効にするには、Finance and Operations バッチ フレームワークの豊富なスケジューリング機能を使用します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-112">Use the rich scheduling capabilities of the Finance and Operations batch framework to enable periodic exports.</span></span>
- <span data-ttu-id="bce3e-113">トランザクション SQL (T-SQL) を使用してエンティティ データベースにアクセスし、さらにテーブルを追加してデータベースを拡張します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-113">Access the entity database by using Transact-SQL (T-SQL), and even extend the database by adding more tables.</span></span>

## <a name="entity-store-or-byod"></a><span data-ttu-id="bce3e-114">エンティティ格納または BYOD か</span><span class="sxs-lookup"><span data-stu-id="bce3e-114">Entity store or BYOD?</span></span>

<span data-ttu-id="bce3e-115">[Microsoft Power BI 統合についてのブログ投稿](https://blogs.msdn.microsoft.com/dynamicsaxbi/2016/06/09/power-bi-integration-with-entity-store-in-dynamics-ax-7-may-update/)のシリーズに従った場合、エンティティ格納に精通できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-115">If you followed the series of [blog posts about Microsoft Power BI integration](https://blogs.msdn.microsoft.com/dynamicsaxbi/2016/06/09/power-bi-integration-with-entity-store-in-dynamics-ax-7-may-update/), you will be familiar with Entity store.</span></span> <span data-ttu-id="bce3e-116">エンティティ格納は、Finance and Operations に含まれている運用データ ウェアハウスです。</span><span class="sxs-lookup"><span data-stu-id="bce3e-116">Entity store is the operational data warehouse that is included with Finance and Operations.</span></span> <span data-ttu-id="bce3e-117">エンティティ格納では、Power BI の実稼働レポートの組み込み統合を提供します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-117">Entity store provides built-in integration of operational reports with Power BI.</span></span> <span data-ttu-id="bce3e-118">Finance and Operations に組み込まれている既存のレポートと分析ワークスペースは、エンティティ格納を使用します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-118">Ready-made reports and analytical workspaces that are built into Finance and Operations use Entity store.</span></span> <span data-ttu-id="bce3e-119">Finance and Operations の環境のデータを使用して Power BI レポートを作成する場合は、エンティティ格納を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-119">If you write Power BI reports by using data in your Finance and Operations environment, you should use Entity store.</span></span>

<span data-ttu-id="bce3e-120">ただし、次のシナリオでは BYOD 機能をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bce3e-120">However, the BYOD feature is recommended for the following scenarios:</span></span>

- <span data-ttu-id="bce3e-121">Finance and Operations からご自身のデータ ウェアハウスにデータをエクスポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-121">You must export data from Finance and Operations into your own data warehouse.</span></span>
- <span data-ttu-id="bce3e-122">Power BI 以外の分析ツールを使用し、これらのツールはデータに対して T-SQL アクセスを必要とします。</span><span class="sxs-lookup"><span data-stu-id="bce3e-122">You use analytical tools other than Power BI, and those tools require T-SQL access to data.</span></span>
- <span data-ttu-id="bce3e-123">他のシステムとのバッチ統合を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-123">You must perform batch integration with other systems.</span></span>

> [!NOTE]
> <span data-ttu-id="bce3e-124">Finance and Operations には、生産データベースへの T-SQL 接続を使用できません。</span><span class="sxs-lookup"><span data-stu-id="bce3e-124">Finance and Operations doesn't allow T-SQL connections to the production database.</span></span> <span data-ttu-id="bce3e-125">Finance and Operations の以前のバージョンをアップグレードする場合、データベースへの直接的な T-SQL アクセスを必要とする統合ソリューションがある場合は、BYOD は推奨するアップグレード パスになります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-125">If you're upgrading from a previous version of Finance and Operations, and you have integration solutions that require direct T-SQL access to the database, BYOD is the recommended upgrade path.</span></span>

<span data-ttu-id="bce3e-126">Finance and Operations の顧客は、エンティティ格納または BYOD のいずれかを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-126">As a customer of Finance and Operations, you can use either Entity store or BYOD.</span></span> <span data-ttu-id="bce3e-127">使用可能な既定の業務レポートは、埋め込み Power BI とエンティティ格納を利用します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-127">The default operational reports that are available take advantage of embedded Power BI and Entity store.</span></span> <span data-ttu-id="bce3e-128">最初の選択として、既定の業務レポートを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bce3e-128">We recommend that you use our default operational reports as your first choice.</span></span> <span data-ttu-id="bce3e-129">また、要件に合わせて、既成のオペレーション レポートを拡張することができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-129">You can also extend the ready-made operational reports to meet your requirements.</span></span> <span data-ttu-id="bce3e-130">BYOD を必要に応じて利用する補足的なオプションと見なす必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-130">You should consider BYOD a complementary option that you use as you require.</span></span>

## <a name="creating-a-sql-database"></a><span data-ttu-id="bce3e-131">SQL データベースを作成しています</span><span class="sxs-lookup"><span data-stu-id="bce3e-131">Creating a SQL database</span></span>

<span data-ttu-id="bce3e-132">エンティティのエクスポート オプションをコンフィギュレーションして BYOD 機能を使用する前に、Azure ポータルを使用して SQL データベースを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-132">Before you can configure the entity export option and use the BYOD feature, you must create a SQL database by using Azure portal.</span></span>

<span data-ttu-id="bce3e-133">1 ボックス開発環境では、ローカルの Microsoft SQL Server データベースでデータベースを作成できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-133">For one-box development environments, you can create a database in the local Microsoft SQL Server database.</span></span> <span data-ttu-id="bce3e-134">ただし、このデータベースは、開発およびテスト目的でのみ使用される必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-134">However, this database should be used only for development and testing purposes.</span></span> <span data-ttu-id="bce3e-135">実稼働環境については、SQL データベースを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-135">For production environments, you must create a SQL database.</span></span>

<span data-ttu-id="bce3e-136">また、データベースにサインインするには、SQL ユーザー アカウントを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-136">You should also create a SQL user account for sign-in to the database.</span></span> <span data-ttu-id="bce3e-137">サーバー名、データベース名、および SQL ユーザー ID とパスワードを記述します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-137">Write down the server name, database name, and the SQL user ID and password.</span></span> <span data-ttu-id="bce3e-138">この情報は、次のセクションで、エンティティのエクスポート オプションをコンフィギュレーションするときに使用します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-138">You will use this information when you configure the entity export option in the next section.</span></span>

<span data-ttu-id="bce3e-139">ビジネス インテリジェンス (BI) ツールとの統合に BYOD 機能を使用している場合、SQL プレミアム データベースの作成を検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-139">If you're using the BYOD feature for integration with a business intelligence (BI) tool, you should consider creating a SQL premium database.</span></span> <span data-ttu-id="bce3e-140">Premium データベースでは、クラスター化された縦棒ストア インデックス (CCI) がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-140">Premium databases support clustered columnstore indexes (CCIs).</span></span> <span data-ttu-id="bce3e-141">CCI は、分析およびレポートのワークロードで一般的な読取りクエリのパフォーマンスを向上させるメモリ内インデックスです。</span><span class="sxs-lookup"><span data-stu-id="bce3e-141">CCIs are in-memory indexes that improve the performance of read queries that are typical in analytical and reporting workloads.</span></span> <span data-ttu-id="bce3e-142">ステージング データベースへのデータのエクスポート、または一般的な統合目的で BYOD 機能を使用している場合、標準的なデータベースを使用できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-142">If you're using the BYOD feature to export data into a staging database or for general integration purposes, you can use a standard database.</span></span>

## <a name="configuring-the-entity-export-option"></a><span data-ttu-id="bce3e-143">エンティティのエクスポート オプションのコンフィギュレーション</span><span class="sxs-lookup"><span data-stu-id="bce3e-143">Configuring the entity export option</span></span>

1. <span data-ttu-id="bce3e-144">Finance and Operations クライアントを起動し、**データの管理** ワークスペースで、**データベースへのエンティティ エクスポートの構成** タイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-144">Start the Finance and Operations client, and then, in the **Data management** workspace, select the **Configure Entity export to database** tile.</span></span>
2. <span data-ttu-id="bce3e-145">いくつかのデータベースを構成した場合、一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-145">If you've configured any databases, a list is shown.</span></span> <span data-ttu-id="bce3e-146">それ以外の場合、新しいデータベースをコンフィギュレーションする必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-146">Otherwise, you must configure a new database.</span></span> <span data-ttu-id="bce3e-147">この場合、**新規**を選択して、新しいデータベースに一意の名前と説明を入力します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-147">In this case, select **New**, and then enter a unique name and a description for the new database.</span></span> <span data-ttu-id="bce3e-148">複数のデータベースにエンティティをエクスポートできることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="bce3e-148">Note that you can export entities into multiple databases.</span></span>
3. <span data-ttu-id="bce3e-149">次の形式で、接続文字列を入力します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-149">Enter the connection string in the following format:</span></span>

    <span data-ttu-id="bce3e-150">データ ソース =&lt; 論理サーバー名 &gt;、1433。最初のカタログ =&lt; DB名 &gt;。統合セキュリティ = False。ユーザー ID =&lt; SQL ユーザー ID &gt; 。パスワード =&lt; パスワード &gt;</span><span class="sxs-lookup"><span data-stu-id="bce3e-150">Data Source=&lt;logical server name&gt;,1433; Initial Catalog=&lt;your DB name&gt;; Integrated Security=False; User ID=&lt;SQL user ID&gt;; Password=&lt;password&gt;</span></span>

    <span data-ttu-id="bce3e-151">この接続文字列では、論理サーバー名を **nnnn.database.windows.net** のようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-151">In this connection string, the logical server name should resemble **nnnn.database.windows.net**.</span></span> <span data-ttu-id="bce3e-152">Azure ポータル内の論理サーバー名を検索できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-152">You should be able to find the logical server name in Azure portal.</span></span> <span data-ttu-id="bce3e-153">次の図は、接続文字列の例を示します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-153">The following illustration shows an example of a connection string.</span></span>

    ![新しいレコード ページの接続文字列](media/NewRecord.png)

4. <span data-ttu-id="bce3e-155">**検証** を選択し、接続が正常に行われたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-155">Select **Validate**, and make sure that the connection is successful.</span></span>

    - <span data-ttu-id="bce3e-156">**クラスター化された列ストア インデックスを作成** オプションは、Finance and Operations からコピーされるエンティティの CCI を定義することで選択したクエリの出力先データベースを最適化します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-156">The **Create clustered column store indexes** option optimizes the destination database for selected queries by defining CCIs for entities that are copied from Finance and Operations.</span></span> <span data-ttu-id="bce3e-157">ただし、CCI は現在 SQL プレミアム データベースでのみサポートされています。</span><span class="sxs-lookup"><span data-stu-id="bce3e-157">However, CCIs are currently supported only on SQL premium databases.</span></span> <span data-ttu-id="bce3e-158">したがって、このオプションを有効にするには、SQL プレミアム データベースを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-158">Therefore, to enable this option, you must create a SQL premium database.</span></span>
    - <span data-ttu-id="bce3e-159">**ターゲット データベースでトリガーを有効にする** オプションは、ターゲット データベースで SQL トリガーを有効にするためにエクスポート ジョブを設定します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-159">The **Enable triggers in target database** option sets export jobs to enable SQL triggers in the target database.</span></span> <span data-ttu-id="bce3e-160">このオプションを使用すると、レコードを挿入した後に開始する必要がある操作を調整するために、ダウンストリーム プロセスをトリガーにフックできます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-160">This option lets you hook downstream processes into the trigger to orchestrate actions that must be started after records have been inserted.</span></span> <span data-ttu-id="bce3e-161">1 つのトリガーは一括挿入の操作ごとにサポートされています。</span><span class="sxs-lookup"><span data-stu-id="bce3e-161">One trigger is supported per bulk insert operation.</span></span> <span data-ttu-id="bce3e-162">一括挿入のサイズは、データ管理フレームワークの **最大挿入コミット サイズ** パラメーターによって決まります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-162">The size of the bulk insert is determined by the **Maximum insert commit size** parameter in the Data management framework.</span></span>

<span data-ttu-id="bce3e-163">BYOD からデータを読み取るレポート システムのシナリオでは、Finance and Operations からの同期の実行中に、レポート システムが BYOD から一貫したデータを取得することを確認するという課題が常にあります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-163">For scenarios in which reporting systems read data from BYOD, there is always the challenge of ensuring that the reporting systems get consistent data from BYOD while the sync from Finance and Operations is in progress.</span></span> <span data-ttu-id="bce3e-164">BYOD プロセスで作成されたステージング テーブルから報告システムが直接読み取りしないようにすることにより、この結果を達成することができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-164">You can achieve this result by not having the reporting systems read directly from the staging tables created by the BYOD process.</span></span> <span data-ttu-id="bce3e-165">ステージング テーブルは、データが Finance and Operations インスタンスから同期されている間データを保持するため、常に変化します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-165">The staging tables hold the data while data is being synced from the Finance and Operations instance and hence will be constantly changing.</span></span> <span data-ttu-id="bce3e-166">SQL トリガー機能を使用して、Finance and Operations からのデータ同期が完了した時点を判断し、下流のレポーティング システムに通知します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-166">Use the SQL trigger feature to determine when the data sync from Finance and Operations has been completed, and then hydrate the downstream reporting systems.</span></span>

<span data-ttu-id="bce3e-167">検証に合格すると、次の図に示すように、エンティティのエクスポートに向けてコンフィギュレーションされたデータベースがデータベースのリストに表示されます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-167">When the validation is passed, the database that you configured for entity export appears in lists of databases, as shown in the following illustration.</span></span>

![エンティティ エクスポートのデータベース](media/e3bcecdb0ff1532d890915903b378c60.png)

<span data-ttu-id="bce3e-169">メニュー上で **公開** オプションを選択することにより、1 つまたは複数のエンティティを新しいデータベースに公開することができるようになりました。</span><span class="sxs-lookup"><span data-stu-id="bce3e-169">You can now publish one or more entities to the new database by selecting the **Publish** option on the menu.</span></span>

### <a name="publishing-the-entity-schema-to-the-database"></a><span data-ttu-id="bce3e-170">エンティティ スキーマをデータベースに公開</span><span class="sxs-lookup"><span data-stu-id="bce3e-170">Publishing the entity schema to the database</span></span>

<span data-ttu-id="bce3e-171">**発行** ページは、いくつかのシナリオを有効にします。</span><span class="sxs-lookup"><span data-stu-id="bce3e-171">The **Publish** page enables several scenarios:</span></span>

- <span data-ttu-id="bce3e-172">データベースに新しいエンティティを公開します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-172">Publish new entities to the database.</span></span>
- <span data-ttu-id="bce3e-173">以前に公開されたエンティティをデータベースから削除します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-173">Delete previously published entities from the database.</span></span> <span data-ttu-id="bce3e-174">(たとえば、スキーマを再作成することができます。)</span><span class="sxs-lookup"><span data-stu-id="bce3e-174">(For example, you might want to re-create the schema.)</span></span>
- <span data-ttu-id="bce3e-175">Finance and Operations における公開されたエンティティとエンティティ スキーマとを比較する。</span><span class="sxs-lookup"><span data-stu-id="bce3e-175">Compare published entities with the entity schema in Finance and Operations.</span></span> <span data-ttu-id="bce3e-176">(たとえば、新しいフィールドを後で Finance and Operations に追加する場合、フィールドをデータベース スキーマと比較できます。)</span><span class="sxs-lookup"><span data-stu-id="bce3e-176">(For example, if new fields are added to Finance and Operations later, you can compare the fields with your database schema.)</span></span>
- <span data-ttu-id="bce3e-177">データの差分更新を可能にする変更追跡機能をコンフィギュレーションします。</span><span class="sxs-lookup"><span data-stu-id="bce3e-177">Configure change tracking functionality that enables incremental updates of your data.</span></span>

<span data-ttu-id="bce3e-178">次のセクションでは、各オプションについて説明します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-178">The following sections discuss each option.</span></span>

#### <a name="publish"></a><span data-ttu-id="bce3e-179">パブリッシュ</span><span class="sxs-lookup"><span data-stu-id="bce3e-179">Publish</span></span>

<span data-ttu-id="bce3e-180">**発行** オプションは、ターゲット データベースにエンティティ データベース スキーマを定義します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-180">The **Publish** option defines the entity database schema on the destination database.</span></span> <span data-ttu-id="bce3e-181">1 つまたは複数のエンティティを選択してから、**公開** オプションを選択すると、バッチ ジョブが開始します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-181">When you select one or more entities, and then select the **Publish** option, a batch job is started.</span></span> <span data-ttu-id="bce3e-182">このジョブは、出力先データベースにエンティティを作成します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-182">This job creates the entities in the destination database.</span></span> <span data-ttu-id="bce3e-183">データベース定義ジョブが完了すると、メッセージが表示されます。このメッセージには、右上のベル記号を使用してアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-183">When the database definition job is completed, you receive a message, which you can access by using the bell symbol in the upper right.</span></span>

<span data-ttu-id="bce3e-184">実際のデータの更新は、データをエクスポートするときに実行されます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-184">The actual data update occurs when you export data.</span></span> <span data-ttu-id="bce3e-185">この時点では、スキーマを作成するだけです。</span><span class="sxs-lookup"><span data-stu-id="bce3e-185">At this point, you're just creating the schema.</span></span>

#### <a name="drop-entity"></a><span data-ttu-id="bce3e-186">エンティティの削除</span><span class="sxs-lookup"><span data-stu-id="bce3e-186">Drop entity</span></span>

<span data-ttu-id="bce3e-187">**エンティティを削除** オプションは、出力先のデータベースからデータとエンティティ定義を削除します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-187">The **Drop entity** option deletes the data and the entity definition from the destination database.</span></span>

#### <a name="compare-source-names"></a><span data-ttu-id="bce3e-188">ソース名の比較</span><span class="sxs-lookup"><span data-stu-id="bce3e-188">Compare source names</span></span>

<span data-ttu-id="bce3e-189">**ソース名を比較** オプションでは、ターゲットのエンティティ スキーマを Finance and Operations 内のエンティティ スキーマと比較することができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-189">The **Compare source names** option lets you compare the entity schema in the destination with the entity schema in Finance and Operations.</span></span> <span data-ttu-id="bce3e-190">このオプションは、バージョン管理に使用されます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-190">This option is used for version management.</span></span> <span data-ttu-id="bce3e-191">また、出力先テーブルから不要な列を削除するためにこのオプションを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-191">You can also use this option to remove any unwanted columns from the destination table.</span></span>

#### <a name="configure-change-tracking"></a><span data-ttu-id="bce3e-192">変更追跡のコンフィギュレーション</span><span class="sxs-lookup"><span data-stu-id="bce3e-192">Configure change tracking</span></span>

<span data-ttu-id="bce3e-193">変更の追跡は、SQL Server および SQL データベースで提供される機能です。</span><span class="sxs-lookup"><span data-stu-id="bce3e-193">Change tracking is a feature that is provided in SQL Server and SQL Database.</span></span> <span data-ttu-id="bce3e-194">変更追跡を使用すると、データベースでテーブルに加えられた変更 (削除を含む) を追跡できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-194">Change tracking enables the database to track changes including deletes that are made on tables.</span></span> <span data-ttu-id="bce3e-195">変更の追跡を使用して、Finance and Operations でトランザクションとしてテーブルに加えられた変更を識別します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-195">The system uses change tracking to identify changes that are made to tables as transactions in Finance and Operations.</span></span>

<span data-ttu-id="bce3e-196">**発行** ページの **変更の追跡** オプションでは、基になるエンティティの変更の追跡方法を設定できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-196">The **Change tracking** option on the **Publish** page lets you configure how changes are tracked on the underlying entity.</span></span>

![基礎となるエンティティの変更追跡](media/8918ed89bcc966252727af5a1b75e0fb.png)

<span data-ttu-id="bce3e-198">次のテーブルでは、使用可能な変更追跡オプションについて説明します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-198">The following table describes the change tracking options that are available.</span></span>

| <span data-ttu-id="bce3e-199">オプション</span><span class="sxs-lookup"><span data-stu-id="bce3e-199">Option</span></span>               | <span data-ttu-id="bce3e-200">説明</span><span class="sxs-lookup"><span data-stu-id="bce3e-200">Description</span></span> |
|----------------------|-------------|
| <span data-ttu-id="bce3e-201">プライマリ テーブルの有効化</span><span class="sxs-lookup"><span data-stu-id="bce3e-201">Enable primary table</span></span> | <span data-ttu-id="bce3e-202">エンティティは複数のテーブルで構成されます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-202">An entity consists of several tables.</span></span> <span data-ttu-id="bce3e-203">エンティティの主テーブルに加えられたすべての変更を追跡するには、このオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-203">Select this option to track all changes that are made to the primary table of the entity.</span></span> <span data-ttu-id="bce3e-204">プライマリ テーブルに変更を加えると、対応するレコードが出力先データベースに挿入されるか、またはそのデータベース内で更新されます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-204">When changes are made to the primary table, the corresponding record is inserted into or updated in the destination database.</span></span> <span data-ttu-id="bce3e-205">エンティティ全体からのデータは出力先テーブルに書き込まれますが、プライマリ テーブルが変更された場合にのみ、システムの挿入または更新オプションがトリガーされます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-205">Although data from the whole entity is written to the destination table, the system triggers the insert or update option only when the primary table is modified.</span></span> |
| <span data-ttu-id="bce3e-206">エンティティ全体の有効化</span><span class="sxs-lookup"><span data-stu-id="bce3e-206">Enable entire entity</span></span> | <span data-ttu-id="bce3e-207">エンティティのすべての変更を追跡するには、このオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-207">Select this option to track all changes to the entity.</span></span> <span data-ttu-id="bce3e-208">(これらの変更は、エンティティを構成するすべてのテーブルへの変更を含みます。) エンティティへの変更を加えるときに、対応する更新が宛先に対して行われます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-208">(These changes include changes to all the tables that make up the entity.) When changes are made to the entity, corresponding updates are made to the destination.</span></span> |
| <span data-ttu-id="bce3e-209">カスタム クエリの有効化</span><span class="sxs-lookup"><span data-stu-id="bce3e-209">Enable custom query</span></span>  | <span data-ttu-id="bce3e-210">このオプションを使用すると、開発者は、システムが変更を評価するために実行するカスタム クエリを提供できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-210">This option lets a developer provide a custom query that the system runs to evaluate changes.</span></span> <span data-ttu-id="bce3e-211">このオプションは、選択したフィールドのセットのみから変更を追跡するという複雑な要件がある場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="bce3e-211">This option is useful when you have a complex requirement to track changes from only a selected set of fields.</span></span> <span data-ttu-id="bce3e-212">エクスポートされるエンティティが入れ子になったビューの階層を使用して構築されたときも、このオプションを選択することができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-212">You can also select this option when the entities that will be exported were built by using a hierarchy of nested views.</span></span> <span data-ttu-id="bce3e-213">詳細については、[カスタム クエリを使用してエンティティの変更追跡を有効にする](../data-entities/entity-change-track.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bce3e-213">For more information, see [Enable change tracking for an entity by using a custom query](../data-entities/entity-change-track.md).</span></span> |

<span data-ttu-id="bce3e-214">追跡変更機能の操作については、Finance and Operations データベース内の**変更追跡**オプションを有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-214">For the change tracking functionality to work, you must enable the **Change tracking** option in the Finance and Operations database.</span></span> <span data-ttu-id="bce3e-215">このオプションは、既定で有効になっています。</span><span class="sxs-lookup"><span data-stu-id="bce3e-215">This option is enabled by default.</span></span>

<span data-ttu-id="bce3e-216">出力先のデータベースに存在するエンティティを再発行する場合、システムでは、既存のデータが新しい操作が原因で削除されることを警告されます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-216">If you republish an entity that exists in the destination database, the system warns you that existing data will be deleted because of the new operation.</span></span>

<span data-ttu-id="bce3e-217">発行操作を確認すると、システムがスキーマをデータベースに発行し、その操作が完了すると通知を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-217">When you confirm the publish operation, the system publishes the schema to the database, and you're notified when the operation is completed.</span></span>

<span data-ttu-id="bce3e-218">**公開**ページで**公開済のみを表示**オプションを選択することにより、指定した出力先データベースに公開されたエンティティのみを表示できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-218">By selecting the **Show published only** option on the **Publish** page, you can show only the entities that were published to a given destination database.</span></span> <span data-ttu-id="bce3e-219">発行機能は、データベース内のエンティティ スキーマを作成します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-219">The Publish function creates the entity schema in the database.</span></span> <span data-ttu-id="bce3e-220">データベースに移動して、対応するインデックスとともに、作成されたテーブル スキーマを表示することができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-220">You can navigate to the database and see the table schemas that were created, together with corresponding indexes.</span></span>

> [!NOTE]
> <span data-ttu-id="bce3e-221">現在、データベースに複合エンティティをエクスポートするのに BYOD を使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="bce3e-221">Currently, you can't use BYOD to export composite entities into a database.</span></span> <span data-ttu-id="bce3e-222">複合エンティティの各エンティティをエクスポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-222">You must export each entity in the composite entity.</span></span>

## <a name="exporting-data-into-your-database"></a><span data-ttu-id="bce3e-223">データベースへのエクスポート データ</span><span class="sxs-lookup"><span data-stu-id="bce3e-223">Exporting data into your database</span></span>

<span data-ttu-id="bce3e-224">エンティティが宛先データベースに公開された後、**データ管理**ワークスペースのエクスポート機能を使用してデータを移動することができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-224">After entities are published to the destination database, you can use the Export function in the **Data management** workspace to move data.</span></span> <span data-ttu-id="bce3e-225">エクスポート関数を使用すると、1 つまたは複数のエンティティが含まれるデータ移動ジョブを定義できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-225">The Export function lets you define a Data movement job that contains one or more entities.</span></span>

<span data-ttu-id="bce3e-226">**エクスポート** ページを使用すると、Finance and Operations からのデータを、カンマで区切られた値 (CSV) 値などの多くのターゲット データ書式にエクスポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-226">You can use the **Export** page to export data from Finance and Operations into many target data formats, such as a comma-separated values (CSV) file.</span></span> <span data-ttu-id="bce3e-227">このページは、別の宛先として SQL データベースもサポートしています。</span><span class="sxs-lookup"><span data-stu-id="bce3e-227">This page also supports SQL databases as another destination.</span></span>

![ページをエクスポート](media/091eb0da74bf94c620c3785bca92b41e.png)

<span data-ttu-id="bce3e-229">複数のエンティティを持つデータ プロジェクトを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-229">You can create a data project that has multiple entities.</span></span> <span data-ttu-id="bce3e-230">Finance and Operations バッチ フレームワークを使用することにより、このデータ プロジェクトの実行をスケジュールすることができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-230">You can schedule this data project to run by using the Finance and Operations batch framework.</span></span> <span data-ttu-id="bce3e-231">また、**バッチ処理でのエクスポート** オプションを選択することにより、データ エクスポート ジョブを定期的に実行するようにスケジュールします。</span><span class="sxs-lookup"><span data-stu-id="bce3e-231">You also schedule the data export job to run on a periodic basis by selecting the **Export in batch** option.</span></span>

> [!NOTE]
> <span data-ttu-id="bce3e-232">BYOD のために **管理 > 定期的なデータ ジョブの管理** で定期的なエクスポートを使用することはお勧めしません。</span><span class="sxs-lookup"><span data-stu-id="bce3e-232">Use of recurring exports in **Manage > Manage recurring data jobs** for BYOD is discouraged.</span></span> <span data-ttu-id="bce3e-233">**バッチ処理でのエクスポート** オプションを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-233">You must use the **Export in batch** option.</span></span>

### <a name="incremental-export"></a><span data-ttu-id="bce3e-234">差分エクスポート</span><span class="sxs-lookup"><span data-stu-id="bce3e-234">Incremental export</span></span>
<span data-ttu-id="bce3e-235">データ エクスポートのエンティティを追加するとき、増分エクスポート (増分プッシュとも呼ばれます) またはフル プッシュをするかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-235">When you add an entity for data export, you can select to do an incremental export (which is also known as incremental push) or a full push.</span></span> <span data-ttu-id="bce3e-236">作業する増分プッシュについては、このトピックで前述されているように、Finance and Operations データベースで**変更追跡**オプションを有効にし、適切な変更追跡オプションを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-236">For incremental push to work, you must enable the **Change tracking** option in the Finance and Operations database and specify an appropriate change tracking option, as described earlier in this topic.</span></span>

>[!NOTE]
> <span data-ttu-id="bce3e-237">完全なプッシュは、エンティティからすべての既存のレコードを削除し、選択したエンティティから現在のレコードのセットを挿入します。</span><span class="sxs-lookup"><span data-stu-id="bce3e-237">A full push deletes all existing records from an entity and then inserts the current set of records from the selected entity.</span></span>

<span data-ttu-id="bce3e-238">広域増分プッシュを選択した場合、最初のプッシュは常に完全なプッシュになります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-238">If you select an incremental push, the first push is always going to be a full push.</span></span> <span data-ttu-id="bce3e-239">これは、後続の変更を追跡できるようにするために、SQL でどのレコードが「追跡済み」であるかを知る必要があるためです。</span><span class="sxs-lookup"><span data-stu-id="bce3e-239">This is because SQL needs to know which records have been 'tracked' in order to be able to track subsequent changes.</span></span> <span data-ttu-id="bce3e-240">新しいレコードが挿入される、またはレコードが追加または削除されるたびに、対応する変更が宛先エンティティに反映されます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-240">Whenever a new record is inserted, or a record is added or deleted, the corresponding change will be reflected in the destination entity.</span></span>

<span data-ttu-id="bce3e-241">最初のプッシュは常に完全なプッシュであるため、変更の追跡を有効にする前に、明示的な完全プッシュの実行を勧めます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-241">Because the first push is always a full push, we do not recomend that you do an explicit full push before you enable change tracking.</span></span>

<span data-ttu-id="bce3e-242">最初に変更トラッキングを有効にし、増分プッシュでエクスポート ジョブをスケジュールすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bce3e-242">We recommend that you first enable change tracking and schedule a export job with incremental push.</span></span> <span data-ttu-id="bce3e-243">これにより、最初の完全プッシュと後続の差分エクスポートが処理されます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-243">This will take care of the first full push and the subsequent incremental exports.</span></span>

### <a name="timeouts"></a><span data-ttu-id="bce3e-244">タイムアウト</span><span class="sxs-lookup"><span data-stu-id="bce3e-244">Timeouts</span></span>
<span data-ttu-id="bce3e-245">BYOD エクスポートの既定のタイムアウトは、切り捨て操作では 10 分、実際の一括挿入操作には 1 時間に設定されています。</span><span class="sxs-lookup"><span data-stu-id="bce3e-245">The default timeouts for BYOD exports are set to ten minutes for truncation operations and one hour for actual bulk insert operations.</span></span> <span data-ttu-id="bce3e-246">ボリュームが多い場合、これらのタイムアウト設定が十分でなく、更新する必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-246">When volumes are high, these timeout settings may not be sufficient and must be updated.</span></span> <span data-ttu-id="bce3e-247">プラットフォーム更新 18 のリリース以降では、**データ管理** > **フレームワーク パラメーター** > **自分のデータベースの持ち込み** に移動することで、タイムアウト設定を更新できます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-247">Starting with the release of Platform update 18, you can update the timeout settings by navigating to **Data management** > **Framework parameters** > **Bring your own database**.</span></span>

### <a name="known-limitations"></a><span data-ttu-id="bce3e-248">既知の制限</span><span class="sxs-lookup"><span data-stu-id="bce3e-248">Known limitations</span></span>

<span data-ttu-id="bce3e-249">BYOD 機能には、次の制限があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-249">The BYOD feature has the following limitations.</span></span>

#### <a name="there-should-be-no-active-locks-on-your-database-during-synchronization"></a><span data-ttu-id="bce3e-250">同期中、データベースにアクティブなロックが存在してはいけません</span><span class="sxs-lookup"><span data-stu-id="bce3e-250">There should be no active locks on your database during synchronization</span></span>
<span data-ttu-id="bce3e-251">BYOD は独自のデータベースであるため、Finance and Operations からデータが同期されているときは Azure SQL データベースにアクティブなロックがないことを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-251">Because BYOD is your own database, you must ensure that there are no active locks on your Azure SQL database when data is being synced from Finance and Operations.</span></span> <span data-ttu-id="bce3e-252">同期中にデータベースにアクティブなロックがあると、書き込み速度が低下したり Azure SQL データベースへのエクスポートの完全な失敗につながる可能性もあります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-252">Having active locks on your database during synchronization can result in slow writes or even failure to export to your Azure SQL database.</span></span>

#### <a name="export-data-projects-are-specific-to-a-single-legal-entity"></a><span data-ttu-id="bce3e-253">エクスポート データ プロジェクトは単一の法人に固有です。</span><span class="sxs-lookup"><span data-stu-id="bce3e-253">Export data projects are specific to a single legal entity</span></span>

<span data-ttu-id="bce3e-254">複数の法人間では、データをエクスポートする 1 つのジョブを作成することはできません。</span><span class="sxs-lookup"><span data-stu-id="bce3e-254">You can't create a single job to export data across multiple legal entities.</span></span> <span data-ttu-id="bce3e-255">データをエクスポートするデータ プロジェクトを作成するとき、このジョブは現在の法人からのデータをエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="bce3e-255">When you create a data project to export data, the job exports data from the current legal entity.</span></span> <span data-ttu-id="bce3e-256">複数の法人からデータをエクスポートする必要がある場合は、法人を切り替えることにより、複数のデータ プロジェクトを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-256">If you must export data from multiple legal entities, you must create multiple data projects by switching legal entities.</span></span>

#### <a name="you-cant-export-composite-entities-into-your-own-database"></a><span data-ttu-id="bce3e-257">独自のデータベースに複合エンティティをエクスポートすることはできません。</span><span class="sxs-lookup"><span data-stu-id="bce3e-257">You can't export composite entities into your own database</span></span>

<span data-ttu-id="bce3e-258">現在、複合エンティティがサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="bce3e-258">Currently, composite entities aren't supported.</span></span> <span data-ttu-id="bce3e-259">複合エンティティを構成する個々 のエンティティをエクスポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-259">You must export individual entities that make up the composite entity.</span></span> <span data-ttu-id="bce3e-260">ただし、同じデータ プロジェクト内の両方のエンティティをエクスポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-260">However, you can export both the entities in the same data project.</span></span>

#### <a name="entities-that-dont-have-unique-keys-cant-be-exported-by-using-incremental-push"></a><span data-ttu-id="bce3e-261">固有キーを持たないエンティティは、増分プッシュを使用してエクスポートすることは不可能</span><span class="sxs-lookup"><span data-stu-id="bce3e-261">Entities that don't have unique keys can't be exported by using incremental push</span></span>

<span data-ttu-id="bce3e-262">この制限は特に、数個の既製エンティティからレコードを段階的にエクスポートする場合に直面する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-262">You might face this limitation especially when you try to incrementally export records from a few ready-made entities.</span></span> <span data-ttu-id="bce3e-263">これらのエンティティは Finance and Operations にデータをインポートできるように設計されているため、固有のキーはありません。</span><span class="sxs-lookup"><span data-stu-id="bce3e-263">Because these entities were designed to enable the import of data into Finance and Operations, they don't have a unique key.</span></span> <span data-ttu-id="bce3e-264">ただし、変更追跡を、固有のキーがあるエンティティに対してのみ有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="bce3e-264">However, you can enable change tracking only for entities that have a unique key.</span></span> <span data-ttu-id="bce3e-265">したがって、増分プッシュには制限があります。</span><span class="sxs-lookup"><span data-stu-id="bce3e-265">Therefore, there is a limitation on incremental push.</span></span> <span data-ttu-id="bce3e-266">1 つの回避策は、必要なエンティティを拡張し、固有のキーを定義することです。</span><span class="sxs-lookup"><span data-stu-id="bce3e-266">One workaround is to extend the required entity and define a unique key.</span></span>
