---
title: 実行時間の長いレポートがタイムアウトしないようにする
description: この記事では、長時間実行されるレポートがタイムアウトするのを防ぐのに役立つヒントを紹介します。
author: TJVass
manager: AnnBe
ms.date: 09/14/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Developer
ms.reviewer: robinr
ms.search.scope: Operations
ms.custom: 20521
ms.assetid: 74ffc94a-188f-4198-a4b0-f949ec4886cb
ms.search.region: Global
ms.author: tjvass
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 0ab30d1c679058188ef073b993a1c65f4eb5ad63
ms.sourcegitcommit: 574d4dda83dcab94728a3d35fc53ee7e2b90feb0
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/22/2019
ms.locfileid: "1595468"
---
# <a name="help-prevent-long-running-reports-from-timing-out"></a><span data-ttu-id="2dd41-103">実行時間の長いレポートがタイムアウトしないようにする</span><span class="sxs-lookup"><span data-stu-id="2dd41-103">Help prevent long-running reports from timing out</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="2dd41-104">この記事では、長時間実行されるレポートがタイムアウトするのを防ぐのに役立つヒントを紹介します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-104">This article provides tips that can help you prevent reports that run for a long time from timing out.</span></span>

<span data-ttu-id="2dd41-105">ページ設定されたレポートおよびドキュメントは、Microsoft SQL Server Reporting Services を使用して生成されます。</span><span class="sxs-lookup"><span data-stu-id="2dd41-105">Paginated reports and documents are generated by using Microsoft SQL Server Reporting Services.</span></span> <span data-ttu-id="2dd41-106">Reporting Services は、Windows Communication Foundation (WCF) を使って AOS と通信するカスタム拡張機能を使うことにより、Application Object Server (AOS) からレポート データを取得します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-106">Reporting Services retrieves report data from Application Object Server (AOS) by using a custom extension that uses Windows Communication Foundation (WCF) to communicate with AOS.</span></span> <span data-ttu-id="2dd41-107">データセットのサイズと生成されるレポートの複雑さは、レポートの表示に必要な時間に影響する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2dd41-107">The size of the data set and the complexity of the report that is generated can affect the time that is required to display the report.</span></span> <span data-ttu-id="2dd41-108">また、さまざまなタイムアウトおよびその他のしきい値に達すると、レポートの生成が失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2dd41-108">Additionally, if various time-outs and other thresholds are reached, report generation might fail.</span></span> <span data-ttu-id="2dd41-109">展開におけるサービスのタイムアウトは固定されており、対話型の接続を 10 分に制限します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-109">Service time-outs in deployments are fixed and limit interactive connections to 10 minutes.</span></span> <span data-ttu-id="2dd41-110">このサービスのタイムアウト制限を超えるデータ セット生成プロセスは完了しません。</span><span class="sxs-lookup"><span data-stu-id="2dd41-110">Any data set generation process that exceeds this service time-out limit won't be completed.</span></span> <span data-ttu-id="2dd41-111">この記事では、実行時間の長いレポートをサポートするための拡張機能について説明します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-111">This article describes the extensions that support long-running reports.</span></span> <span data-ttu-id="2dd41-112">これらの拡張機能は、プロセスが 10 分のサービス タイム アウト制限を超えていても長時間実行されるレポートを生成できるようにします。</span><span class="sxs-lookup"><span data-stu-id="2dd41-112">These extensions help guarantee that long-running reports can be generated even if the process exceeds the 10-minute service time-out limit.</span></span>

## <a name="preprocess-the-data-source"></a><span data-ttu-id="2dd41-113">データ ソースの前処理</span><span class="sxs-lookup"><span data-stu-id="2dd41-113">Preprocess the data source</span></span>
<span data-ttu-id="2dd41-114">レポートでレポートのデータ プロバイダー (RDP) を使用してデータを取得している場合、レポートは、事前処理 RDP クラスをデータ ソースとして使用するために変更される必要があります。</span><span class="sxs-lookup"><span data-stu-id="2dd41-114">If the report uses the Report Data Provider (RDP) to retrieve data, the report should be modified to use a pre-processed RDP class as the data source.</span></span> <span data-ttu-id="2dd41-115">この方法では、処理ロジックが Reporting Services に対して呼び出しが行われる前に呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="2dd41-115">In this way, processing logic is invoked before a call is made to Reporting Services.</span></span> <span data-ttu-id="2dd41-116">RDP クラスの詳細については、[レポート データにアクセスするレポートのデータ プロバイダー クラスを使用する](https://technet.microsoft.com/library/66667d57-37b1-48a8-90a1-ab8231698463(AX.60).aspx) および [レポートのプログラム ガイド](https://technet.microsoft.com/library/1a6cb21f-e665-45ef-8bf7-4df31e6ca0b7(AX.60).aspx) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dd41-116">For more information about RDP classes, see [Using Report Data Provider Classes to Access Report Data](https://technet.microsoft.com/library/66667d57-37b1-48a8-90a1-ab8231698463(AX.60).aspx) and [Report Programming Guide](https://technet.microsoft.com/library/1a6cb21f-e665-45ef-8bf7-4df31e6ca0b7(AX.60).aspx).</span></span>

<span data-ttu-id="2dd41-117">[![レポート タイムアウト](./media/report-timeouts.png)](./media/report-timeouts.png)</span><span class="sxs-lookup"><span data-stu-id="2dd41-117">[![Report timeouts](./media/report-timeouts.png)](./media/report-timeouts.png)</span></span>

## <a name="how-do-i-migrate-a-regular-rdp-to-a-pre-process-data-access-solution-by-using-tempdb"></a><span data-ttu-id="2dd41-118">TempDB を使用して、通常の RDP を事前処理されたデータ アクセス ソリューションに移行するにはどうすればよいですか。</span><span class="sxs-lookup"><span data-stu-id="2dd41-118">How do I migrate a regular RDP to a pre-process data access solution by using TempDB?</span></span>

1. <span data-ttu-id="2dd41-119">RDP 基本クラスを **SRSReportDataProviderBase** から **SRSReportDataProviderPreProcessTempDB** に変更します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-119">Change the RDP base class from **SRSReportDataProviderBase** to **SRSReportDataProviderPreProcessTempDB**.</span></span>
2. <span data-ttu-id="2dd41-120">テーブル タイプを **InMemory** から **TempDB** に更新します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-120">Update the table type from **InMemory** to **TempDB**.</span></span>
3. <span data-ttu-id="2dd41-121">レポートの RDP クラスをリビルドします。</span><span class="sxs-lookup"><span data-stu-id="2dd41-121">Rebuild the report's RDP class.</span></span>
4. <span data-ttu-id="2dd41-122">レポート デザイナーで RDP クラスにリンクされているデータ ソースを復元します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-122">Restore the data source that is linked to the RDP class in the report designer.</span></span>
5. <span data-ttu-id="2dd41-123">レポートを再配置します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-123">Redeploy the report.</span></span>
6. <span data-ttu-id="2dd41-124">**コントローラー** クラスを導入してレポートを実行します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-124">Introduce a **Controller** class to run the report.</span></span>
7. <span data-ttu-id="2dd41-125">レポートの代わりに **Controller** クラスを指すように出力メニュー項目を更新します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-125">Update the Output Menu Item so that it points to the **Controller** class instead of the report.</span></span>

<span data-ttu-id="2dd41-126">次のビデオでプロセスを示します: [Ep 59 実行時間の長いレポート](https://www.youtube.com/watch?v=6tdQtHV2WAc)</span><span class="sxs-lookup"><span data-stu-id="2dd41-126">The following video demonstrates the process: [Ep 59 Long Running Reports](https://www.youtube.com/watch?v=6tdQtHV2WAc)</span></span>

## <a name="use-batch-processing"></a><span data-ttu-id="2dd41-127">バッチ処理の使用</span><span class="sxs-lookup"><span data-stu-id="2dd41-127">Use batch processing</span></span>
<span data-ttu-id="2dd41-128">大量のデータを含む明細書またはレポートを印刷するときのパフォーマンスを向上させるには、バッチ処理を使用します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-128">To improve performance when you print statements or reports that include large amounts of data, use batch processing.</span></span> <span data-ttu-id="2dd41-129">バッチ処理を使用すると、特定のタスクをバッチ ジョブとして実行した後、そのバッチ ジョブを、別のコンピューター (バッチ サーバー) で実行されるようにスケジュールすることができます。</span><span class="sxs-lookup"><span data-stu-id="2dd41-129">When you use batch processing, you can run specific tasks as batch jobs and then schedule those batch jobs to run on a different computer (a batch server).</span></span> <span data-ttu-id="2dd41-130">これらのタスクの処理をバッチ サーバーに移すことによって、クライアント コンピューターのレポートのパフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-130">By moving the processing of these tasks to a batch server, you can improve the report performance on the client computer.</span></span> <span data-ttu-id="2dd41-131">また、各バッチ サイズを制限するために範囲制限を適用できます。</span><span class="sxs-lookup"><span data-stu-id="2dd41-131">You can also apply range restrictions to limit the size of each batch.</span></span>

<span data-ttu-id="2dd41-132">パフォーマンスをさらに向上させるには、1 つの大きなバッチを送信しないでください。</span><span class="sxs-lookup"><span data-stu-id="2dd41-132">To further improve performance, don't submit one large batch.</span></span> <span data-ttu-id="2dd41-133">代わりに、同時に別のサーバーで処理するための複数の小さいバッチを送信します。</span><span class="sxs-lookup"><span data-stu-id="2dd41-133">Instead submit multiple smaller batches for processing at the same time on different servers.</span></span> <span data-ttu-id="2dd41-134">多くのタスクをバッチ ジョブの一部として実行できます。</span><span class="sxs-lookup"><span data-stu-id="2dd41-134">Many tasks can be run as part of batch jobs.</span></span> <span data-ttu-id="2dd41-135">詳細については、[バッチ処理の概要](../sysadmin/batch-processing-overview.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dd41-135">For more information, see [Batch processing overview](../sysadmin/batch-processing-overview.md).</span></span>
