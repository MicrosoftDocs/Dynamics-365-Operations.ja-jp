---
title: "一般仕訳帳のエンティティを使用して、伝票をインポートするためのベスト プラクティス"
description: "このトピックでは、一般仕訳帳にデータをインポートする一般仕訳帳のエンティティを使用して情報を提供します。"
author: twheeloc
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 94363
ms.assetid: 0b8149b5-32c5-4518-9ebd-09c9fd7f4cfc
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
translationtype: Human Translation
ms.sourcegitcommit: 4d6cf88788dcc5e982e509137aa444a020137a5e
ms.openlocfilehash: 81a52acd1d9baa12fcfe9d848441901894fa5682
ms.lasthandoff: 03/31/2017


---

# <a name="best-practices-for-importing-vouchers-using-the-general-journal-entity"></a>一般仕訳帳のエンティティを使用して、伝票をインポートするためのベスト プラクティス

このトピックでは、一般仕訳帳にデータをインポートする一般仕訳帳のエンティティを使用して情報を提供します。  

勘定または相手勘定のタイプがありますが、伝票をインポートする場合でも、一般仕訳帳のエンティティを使用して**勘定科目、顧客、仕入先、または銀行**。 伝票は一つの明細行として入力できますが、両方を使用して**勘定**フィールド**相手勘定** **勘定**フィールドのみが使用される場合に、伝票として、または (および**相手勘定**去られます各行には空白に、有効なフィールド)。 一般仕訳帳のエンティティはすべての勘定タイプはサポートされません。 代わりに、異なる勘定タイプの組み合わせが必要なシナリオのために、他のエンティティが存在します。 たとえば、プロジェクト トランザクションをインポートするには、プロジェクト経費仕訳帳エンティティを使用します。 各エンティティについては、追加のフィールドが異なる場合のためのエンティティではないエンティティにある場合のために使用できる場合がある特定のシナリオをサポートするように設計されています。

## <a name="setup"></a>段取り
一般仕訳帳のエンティティを使用してインポートする前に、次の設定を検証します:

-   **仕訳帳バッチ番号の番号順序の設定は- **一般仕訳帳のエンティティを使用してインポートするときに既定では、仕訳帳、バッチ番号総勘定元帳パラメータで定義された番号順序を使用します。 仕訳帳バッチ番号の番号順序を [**手動**] に設定する場合、既定の番号は適用されません。 この設定はサポートされていません。
-   **財務分析コードのコンフィギュレーションは、コンフィギュレーション- **エンティティがインポート トランザクションに使用されるときに財務分析コードの順序を定義する必要があります。 注文はに**総勘定元帳** **勘定科目表の**元帳分析コードの統合**書式 &gt; 設定、**定義 &gt; された**分析コード** &gt; **アプリケーション統合の財務分析コードの構成** &gt; ** [データ エンティティ**。 インポートする勘定科目のセグメントには、同じ順序が必要です。 それ以外の場合、インポート中にエラーが発生します。

## <a name="general-journal-entity-setup"></a>一般仕訳エンティティの設定
データ管理の二つの設定は、既定の仕訳帳のバッチ番号または伝票番号の適用方法を影響します:

-   **設定ベースの処理** (データ エンティティ) 
-   **自動生成された** (フィールドのマッピング) 

以下のセクションでは、これらの設定の影響について説明し、仕訳帳バッチ番号と伝票番号を生成する方法についても説明します。

### <a name="journal-batch-number"></a>仕訳帳バッチ番号

-   一般仕訳エンティティの [**セット ベースのプロセス**] の設定は、仕訳帳バッチ番号の生成方法には影響しません。
-   [**仕訳帳バッチ番号**] フィールドが [**自動生成**] に設定されている場合、インポートされるすべての行に対して新しい仕訳帳バッチ番号が作成されます。 この動作はお勧めしません。 [**自動生成**] の設定は、[**マッピング詳細**] タブの [**マップ詳細**] の下のインポート プロジェクトにあります。
-   [**仕訳帳バッチ番号**] フィールドが [**自動生成**] に設定されていない場合、仕訳帳バッチ番号は次のように作成されます。
    -   インポート ファイルで定義された仕訳帳バッチ番号が存在には、Microsoft Dynamics 365の未転記日次仕訳帳と一致する場合、仕訳帳とバッチ番号を持つすべての明細行が既存の仕訳帳にインポートされます。 明細行は転記済仕訳帳バッチ番号にインポートされることはありません。 代わりに、新しい番号が作成されます。
    -   インポート ファイルで定義された仕訳帳バッチ番号が存在に365 for Operationsの未転記日次仕訳帳一致して、同じ仕訳帳バッチ番号を持つすべての行は新しい仕訳帳でグループ化されます。 たとえば、1 の仕訳帳バッチ番号を持つすべての行が新しい仕訳帳にインポートされ、2 の仕訳帳バッチ番号を持つすべての行は、2 番目の新しい仕訳帳にインポートされます。 仕訳帳バッチ番号は、総勘定元帳のパラメーターで定義されている番号順序を使用して作成されます。

### <a name="voucher-number"></a>伝票番号

-   一般仕訳エンティティの [**セット ベースのプロセス**] 設定を使用する場合、伝票番号をインポートされたファイルで指定する必要があります。 伝票が分散されていない場合でも、一般仕訳帳内のすべてのトランザクションには、インポートしたファイルで指定された伝票番号が割り当てられます。 設定ベースの処理を使用すると、Dynamics 365 for Operationsの伝票番号で定義された番号順序を使用する場合は、変更は2年1月2016日のリリースに出荷されました。 修正プログラムの番号は 3170316 で、Lifecycle Services (LCS) からダウンロードできます。 詳細については、 [Lifecycle Services から修正プログラムをダウンロード](..\migration-upgrade\download-hotfix-lcs.md) を参照してください。
    -   Dynamics 365 for Operationsでインポートに使用される仕訳帳名にこの機能を有効にするには、**転記の番号割り当て**に設定された**はい**。
    -   伝票番号は、インポートしたファイルで定義する必要があります。 ただし、この番号は、仕訳帳が転記されると、一時では、アクション伝票番号365 for Operationsで上書きされます。 一時伝票番号で、仕訳帳の明細行が正しくグループ化されていることを確認する必要があります。 たとえば、転記時に、1.の一時伝票番号を持つ3つの明細行ができます。 すべての3つ明細行の数量伝票番号は、番号順序の次の番号が上書きされます。 これら 3 つの明細行がバランス済エントリではない場合、伝票は転記されていません。 次に、一時的な伝票番号が 2 の行が見つかった場合は、この番号は、番号順序の次の伝票番号で上書きされます。

<!-- -->

-   **設定ベースの処理**設定を使用すると、インポート ファイルの伝票番号を提供する必要はありません。 伝票番号は、仕訳帳名 ([**1 つの伝票のみ**]、[**残高との関連**] など) の設定に基づいて、インポート中に作成されます。 たとえば、仕訳帳名が [**残高との関連**] として定義されている場合、最初の行は、新しい既定の伝票番号を受け取ります。 システムによって行が評価され、借方と貸方が等しいかどうかを判断します。 行に相手勘定が存在する場合、インポートされる次の行は、新しい伝票番号を受け取ります。 相手勘定が存在しない場合は、新しい行がインポートされる度に、システムにより、借方と貸方が等しいかどうかが評価されます。
-   [**伝票番号**] フィールドが [**自動生成**] に設定されている場合、インポートは成功しません。 [**伝票番号**] フィールドの [**自動生成**] の設定はサポートされていません。

既定では、一般仕訳帳エンティティは、セット ベースのプロセスを使用します。 組織のビジネス要件を評価した後、[**セット ベースのプロセス**] 設定は [**データ管理**] ワークスペースの [**データ エンティティ**] をクリックして変更できます。 セットベースのプロセスを使用して、インポート処理を高速化します。 セットベースのプロセスを使用しない場合は、一般仕訳帳エンティティ インポートのインポートは速度が遅くなります。


