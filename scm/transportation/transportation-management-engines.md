---
title: "輸送管理エンジン"
description: "輸送管理エンジンは、輸送管理で配送率を生成およびプロセスするために使用するロジックを定義します。"
author: YuyuScheller
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
ms.search.form: TMSFreightBillType, TMSGenericEngine, TMSMileageEngine, TMSRateEngine, TMSTransitTimeEngine, TMSZoneEngine
audience: Application User
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 12234
ms.assetid: b878478c-0e04-4a1e-a037-6fdbb345a9a3
ms.search.region: Global
ms.author: yuyus
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: Human Translation
ms.sourcegitcommit: fd3392eba3a394bd4b92112093c1f1f9b894426d
ms.openlocfilehash: c65f7e44459478cac7663575abe588ad057f18e0
ms.contentlocale: ja-jp
ms.lasthandoff: 04/25/2017


---

# <a name="transportation-management-engines"></a>輸送管理エンジン

[!include[banner](../includes/banner.md)]


輸送管理エンジンは、輸送管理で配送率を生成およびプロセスするために使用するロジックを定義します。 

輸送管理エンジンは、配送業者の配送率などのタスクを計算します。 エンジン システムを使用すると、Microsoft Dynamics 365 for Operations のデータに基づき、実行時の計算戦略を変更できます。 輸送管理エンジンは、特定の配送契約に関連付けられているプラグインに似ています。

## <a name="what-engines-are-available"></a>どのエンジンを使用できますか。
次の表に、Microsoft Dynamics 365 for Operations で使用できる輸送管理エンジンを示します。

| 輸送管理エンジン | 説明                                                                                                                                                                                                                                                                                                                 |
|----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **レート エンジン**                  | レートを計算します。                                                                                                                                                                                                                                                                                                           |
| **汎用エンジン**               | 予定エンジンなどの、Microsoft Dynamics 365 for Operations からのデータを必要としない、他のエンジンが使用する単純な補助エンジン。 予定エンジンは、数量および重量などの分析コードに基づいて、特定の注文と明細行の最終輸送費用を軽減するために使用されます。 |
| **マイレージ エンジン**               | 輸送距離を計算します。                                                                                                                                                                                                                                                                                     |
| **輸送時間エンジン**          | 出発地から目的地まで移動するために必要な時間を計算します。                                                                                                                                                                                                                                       |
| **ゾーン エンジン**                  | 現在の住所に基づいてゾーンを計算し、住所 A から住所 B に移動するために通過する必要があるゾーンの数を計算します。                                                                                                                                                                    |
| **運賃請求書タイプ**            | 運賃請求書と配送料の明細行を標準化し、配送料の自動照合に使用されます。                                                                                                                                                                                                                |

 
<a name="what-engines-must-be-configured-to-rate-a-shipment"></a>出荷を評価するため、どのエンジンをコンフィギュレーションする必要がありますか。
---------------------------------------------------

特定の配送業者を使用して出荷を評価するには、複数の輸送管理エンジンをコンフィギュレーションする必要があります。 **レート エンジン**は必要ですが、**レート エンジン**をサポートするために他の輸送管理エンジンも必要な場合があります。 たとえば、**レート エンジン**を使用すると、**マイレージ エンジン**からデータを取得して、起点と終点の間の距離に基づいてレートを計算できます。

## <a name="whats-required-to-initialize-a-transportation-management-engine"></a>輸送管理エンジンを初期化するために何が必要ですか。
輸送管理エンジンは、特定の方法で機能するように、初期化データを設定する必要があります。 設定には以下の種類のデータを含めることができます。
-   他の輸送管理エンジンへの参照。 詳細については、このセクションのコンフィギュレーションの例を参照してください。
-   移動管理エンジンで使用される .NET タイプへの参照。
-   単純構成データ。

ほとんどの場合、輸送管理エンジンの設定フォームの**パラメーター** ボタンをクリックして、初期化データをコンフィギュレーションできます。 **マイレージ エンジンを照会するレート エンジンのコンフィギュレーションの例** 次の例は、.NET エンジン タイプの Microsoft.Dynamics.Ax.Tms.Bll.MileageRateEngine に基づき、そしてマイレージ エンジンを照会する、レート エンジンに必要な設定を示します。
| パラメーター             | 説明                                                                                                                                                                                                                                                                                                                                                                      |
|-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| *RateBaseAssigner*    | 特定のスキーマのレート基準の割り当てデータを変換する .NET タイプ。 パラメーター値の構文は、縦棒で区切られる 2 つの区分から構成されます。|)。 最初の区分はアサイナー タイプを定義するアセンブリ名が含まれます。 2 番目の区分はアサイナー タイプの完全修飾名を定義します。 これにはタイプの名前空間が含まれます。 |
| *MileageEngineCode*   | Microsoft Dynamics 365 for Operations データベースのマイレージ エンジン レコードを識別する、マイレージ エンジン コード。                                                                                                                                                                                                                                                             |
| *ApportionmentEngine* | Microsoft Dynamics 365 for Operations データベースの予定エンジン レコードを識別する、汎用エンジン コード。                                                                                                                                                                                                                                                              |

 
<a name="how-is-metadata-used-in-transportation-management-engines"></a>輸送管理エンジンのでどのようにメタデータを使用しますか。
----------------------------------------------------------

Dynamics 365 for Operations で定義されたデータに依存する輸送管理エンジンは、異なるデータ スキーマを使用する場合があります。 輸送管理エンジン システムを使用すると、異なる輸送管理エンジンが同じ汎用物理データベース テーブルを使用できます。 エンジン データの実行時の解釈が正しくなるように、データベース テーブルのメタデータを定義できます。 Operations では追加テーブルおよびフォーム構造が必要ないため、これにより、新しい輸送管理エンジンの構築コストを軽減できます。

## <a name="what-can-be-used-as-search-data-in-rate-calculations"></a>レート計算では検索データとして何を使用できますか。
Microsoft Dynamics 365 for Operations でレートを計算するときに使用するデータは、メタデータのコンフィギュレーションによってコントロールされます。 たとえば、郵便番号に基づいてレートを検索する場合は、郵便番号のルックアップのタイプに基づいてメタデータを設定する必要があります。

## <a name="do-all-engine-configurations-require-metadata"></a>すべてのエンジンのコンフィギュレーションにメタデータが必要ですか。
いいえ。レート計算が必要なデータを、外部システムから取得するために使用する輸送管理エンジンは、メタデータを必要としません。 これらのエンジンのレート データは、外部の配送搬送システム取得でき、通常は Web サービスを使用します。 たとえば、このエンジンのメタデータを必要としないように、Bing マップから直接データを取得するマイレージ エンジンを使用できます。
| **メモ**                                                                                                                                                                                                                                                                                                                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Microsoft Dynamics 365 for Operations と共に提供される輸送管理エンジンは、アプリケーションから取得されるデータに依存します。 外部システムに接続するエンジンは Operations に含まれません。 ただし、エンジン ベースの拡張性モデルを使用すると、Microsoft Dynamics 365 for Operations Visual Studio Tools を使用して拡張子を作成することができます。 |

## <a name="how-do-i-configure-metadata-for-a-transportation-management-engine"></a>輸送管理エンジン用メタデータをどのようにコンフィギュレーションしますか。
輸送管理エンジンのメタデータは、異なるタイプのエンジンのために別々にコンフィギュレーションされます。

| 輸送管理エンジン               | コンフィギュレーション                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **レート エンジン**                                | **レート基準タイプ**が必要です。 レート基準タイプには、レート基準データおよびレート基準割当てデータが含まれます。 レート基準メタデータの構造は、レート エンジンのタイプにより決定されます。 レート基準割当てメタデータの構造は、そのレート エンジンに関連付けられた、レート基準アサイナーのタイプにより決定されます。 **レート エンジン** ページおよび**レート マスター** ページでレート エンジンのレート基準タイプを設定します。 |
| **ゾーン エンジン**                                | メタデータはゾーン マスターで直接設定する必要があります。                                                                                                                                                                                                                                                                                                                                                                                                          |
| **輸送時間エンジン** および **マイレージ エンジン** | マイレージ エンジンのコンフィギュレーション設定フォームから直接メタデータを取得します。                                                                                                                                                                                                                                                                                                                                                                                  |

  **レート エンジンのメタデータの例** 輸送管理エンジンには、出荷元住所の ID、目的地の都道府県および国/地域、出荷の開始と終了地点が必要です。 これらの要件を使用して、メタデータは、次の表のデータのようになります。 また、テーブルには、どのような入力データが必要かに関する情報も含まれます。
-   この情報は、[**レート基準タイプ**] ページの [**配送管理**] &gt; [**設定**] で定義します。

| 順番 | 氏名                          | フィールド タイプ | データ型 | 参照タイプ    | 必須 |
|----------|-------------------------------|------------|-----------|----------------|-----------|
| 1        | 発送元の郵便番号            | 割り当て | 文字列    | 郵便番号    | 選択済  |
| 2        | 発送先の都道府県             | 割り当て | 文字列    | 都道府県          |           |
| 3        | 発送先開始郵便番号 | 割り当て | 文字列    | 郵便番号    | 選択済  |
| 4        | 発送先終了郵便番号   | 割り当て | 文字列    | 郵便番号    | 選択済  |
| 5        | 発送先国           | 割り当て | 文字列    | 国/地域 |           |






